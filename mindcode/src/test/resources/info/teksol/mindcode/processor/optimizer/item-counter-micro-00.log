   263 instructions before optimizations.
    41 instructions eliminated by Temp Variables Elimination.
    34 instructions eliminated by Dead Code Elimination (5 iterations).
     1 instructions eliminated by Jump Normalization (3 iterations).
    17 instructions eliminated by Jump Optimization (3 iterations).
    13 instructions eliminated by Single Step Elimination (4 iterations).
     2 instructions eliminated by Expression Optimization (2 iterations).
     4 instructions eliminated by Data Flow Optimization (7 iterations).
     1 instructions added by Loop Optimization (2 iterations).
     1 loops improved by Loop Optimization.
     3 instructions eliminated by Jump Straightening (3 iterations).
     4 instructions updated by PropagateJumpTargets.
     2 instructions eliminated by Unreachable Code Elimination.
     4 instructions eliminated by Print Merging.
   143 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 852):
  * Loop Optimization: replicate condition at line 68            cost     1, benefit       25,0, efficiency       25,0 (+1 instructions)

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-41 instructions):
 
     8 set CONV1 CONV2
     9 set MEMORY CONV1
    10 set LINKED 0
-    * set __tmp0 @links
-    * set LINKS __tmp0
+   11 set LINKS @links
    12 set n LINKS
    13 label __label3
-    * op sub __tmp1 n 1
-    * set n __tmp1
-    * getlink __tmp2 n
-    * set block __tmp2
-    * sensor __tmp3 block @type
-    * set __ast0 __tmp3
+   14 op sub n n 1
+   15 getlink block n
+   16 sensor __ast0 block @type
    17 jump __label8 equal __ast0 @memory-cell
    18 jump __label7 always
    19 label __label8
 
    37 set CONV3 CONV2
    38 set CONV2 CONV1
    39 set CONV1 block
-    * op add __tmp5 LINKED 1
-    * set LINKED __tmp5
+   40 op add LINKED LINKED 1
    41 set __tmp4 LINKED
    42 jump __label6 always
    43 label __label11
 
    88 label __label2
    89 set BATCH_DURATION 2000
    90 op idiv __tmp13 MIN_BATCH 10
-    * op max __tmp14 __tmp13 1
-    * set MIN_BATCH __tmp14
+   91 op max MIN_BATCH __tmp13 1
    92 op idiv __tmp15 MAX_BATCH 10
-    * op max __tmp16 __tmp15 MIN_BATCH
-    * set MAX_BATCH __tmp16
+   93 op max MAX_BATCH __tmp15 MIN_BATCH
    94 set BATCH_STEP 1
    95 set BATCH MIN_BATCH
-    * read __tmp17 MEMORY 0
-    * set total __tmp17
-    * op idiv __tmp18 total 10
-    * set batches __tmp18
-    * op add __tmp19 batches BATCH
-    * set limit __tmp19
+   96 read total MEMORY 0
+   97 op idiv batches total 10
+   98 op add limit batches BATCH
    99 control enabled switch1 0
   100 set b4 0
   101 set b3 b4
 
   106 set a2 a3
   107 set a1 a2
   108 set ratePerMin 0
-    * set __tmp20 @time
-    * set startTime __tmp20
+  109 set startTime @time
   110 label __label19
   111 sensor __tmp21 switch1 @enabled
   112 op equal __tmp22 __tmp21 0
   113 jump __label21 equal __tmp22 false
-    * set __tmp23 @time
-    * set start __tmp23
-    * sensor __tmp24 CONV1 @totalItems
-    * set a1 __tmp24
+  114 set start @time
+  115 sensor a1 CONV1 @totalItems
   116 op lessThan __tmp25 a1 b1
   117 jump __label22 equal __tmp25 false
-    * op add __tmp27 batches 1
-    * set batches __tmp27
+  118 op add batches batches 1
   119 set __tmp26 batches
   120 jump __label23 always
   121 label __label22
   122 set __tmp26 null
   123 label __label23
-    * sensor __tmp28 CONV2 @totalItems
-    * set a2 __tmp28
+  124 sensor a2 CONV2 @totalItems
   125 op lessThan __tmp29 a2 b2
   126 jump __label24 equal __tmp29 false
-    * op add __tmp31 batches 1
-    * set batches __tmp31
+  127 op add batches batches 1
   128 set __tmp30 batches
   129 jump __label25 always
   130 label __label24
   131 set __tmp30 null
   132 label __label25
-    * sensor __tmp32 CONV3 @totalItems
-    * set a3 __tmp32
+  133 sensor a3 CONV3 @totalItems
   134 op lessThan __tmp33 a3 b3
   135 jump __label26 equal __tmp33 false
-    * op add __tmp35 batches 1
-    * set batches __tmp35
+  136 op add batches batches 1
   137 set __tmp34 batches
   138 jump __label27 always
   139 label __label26
   140 set __tmp34 null
   141 label __label27
-    * sensor __tmp36 CONV4 @totalItems
-    * set a4 __tmp36
+  142 sensor a4 CONV4 @totalItems
   143 op lessThan __tmp37 a4 b4
   144 jump __label28 equal __tmp37 false
-    * op add __tmp39 batches 1
-    * set batches __tmp39
+  145 op add batches batches 1
   146 set __tmp38 batches
   147 jump __label29 always
   148 label __label28
 
   150 label __label29
   151 op greaterThan __tmp40 batches limit
   152 jump __label30 equal __tmp40 false
-    * op sub __tmp42 @time startTime
-    * set duration __tmp42
-    * set __tmp43 @time
-    * set startTime __tmp43
-    * op div __tmp44 BATCH duration
-    * set rate __tmp44
+  153 op sub duration @time startTime
+  154 set startTime @time
+  155 op div rate BATCH duration
   156 op mul __tmp45 rate 166.66666666666666
   157 write __tmp45 MEMORY lastCell
   158 op mul __tmp46 rate 600000
-    * op floor __tmp47 __tmp46
-    * set ratePerMin __tmp47
+  159 op floor ratePerMin __tmp46
   160 op lessThanEq __tmp48 duration BATCH_DURATION
   161 jump __label32 equal __tmp48 false
   162 op add __tmp50 BATCH BATCH_STEP
-    * op min __tmp51 __tmp50 MAX_BATCH
-    * set BATCH __tmp51
-    * op mul __tmp52 BATCH 10
-    * set BATCH_TXT __tmp52
+  163 op min BATCH __tmp50 MAX_BATCH
+  164 op mul BATCH_TXT BATCH 10
   165 set __tmp49 BATCH_TXT
   166 jump __label33 always
   167 label __label32
   168 set __tmp49 null
   169 label __label33
-    * op add __tmp53 limit BATCH
-    * set limit __tmp53
+  170 op add limit limit BATCH
   171 set __tmp41 limit
   172 jump __label31 always
   173 label __label30
   174 set __tmp41 null
   175 label __label31
-    * op mul __tmp54 batches 10
-    * set total __tmp54
+  176 op mul total batches 10
   177 write total MEMORY 0
   178 print "Item Counter                  \n"
   179 print "Monitoring [green]"
 
   185 print "Rate: [green]"
   186 print ratePerMin
   187 print "[] items/min\n"
-    * sensor __tmp55 CONV1 @totalItems
-    * set b1 __tmp55
+  188 sensor b1 CONV1 @totalItems
   189 op lessThan __tmp56 b1 a1
   190 jump __label34 equal __tmp56 false
-    * op add __tmp58 batches 1
-    * set batches __tmp58
+  191 op add batches batches 1
   192 set __tmp57 batches
   193 jump __label35 always
   194 label __label34
   195 set __tmp57 null
   196 label __label35
-    * sensor __tmp59 CONV2 @totalItems
-    * set b2 __tmp59
+  197 sensor b2 CONV2 @totalItems
   198 op lessThan __tmp60 b2 a2
   199 jump __label36 equal __tmp60 false
-    * op add __tmp62 batches 1
-    * set batches __tmp62
+  200 op add batches batches 1
   201 set __tmp61 batches
   202 jump __label37 always
   203 label __label36
   204 set __tmp61 null
   205 label __label37
-    * sensor __tmp63 CONV3 @totalItems
-    * set b3 __tmp63
+  206 sensor b3 CONV3 @totalItems
   207 op lessThan __tmp64 b3 a3
   208 jump __label38 equal __tmp64 false
-    * op add __tmp66 batches 1
-    * set batches __tmp66
+  209 op add batches batches 1
   210 set __tmp65 batches
   211 jump __label39 always
   212 label __label38
   213 set __tmp65 null
   214 label __label39
-    * sensor __tmp67 CONV4 @totalItems
-    * set b4 __tmp67
+  215 sensor b4 CONV4 @totalItems
   216 op lessThan __tmp68 b4 a4
   217 jump __label40 equal __tmp68 false
-    * op add __tmp70 batches 1
-    * set batches __tmp70
+  218 op add batches batches 1
   219 set __tmp69 batches
   220 jump __label41 always
   221 label __label40
   222 set __tmp69 null
   223 label __label41
   224 op sub __tmp71 @time startTime
-    * op floor __tmp72 __tmp71
-    * set elapsed __tmp72
+  225 op floor elapsed __tmp71
   226 op greaterThanEq __tmp73 elapsed 10000
   227 jump __label42 equal __tmp73 false
   228 op idiv __tmp75 BATCH 5
-    * op max __tmp76 __tmp75 MIN_BATCH
-    * set BATCH __tmp76
-    * op mul __tmp77 BATCH 10
-    * set BATCH_TXT __tmp77
-    * op add __tmp78 batches BATCH
-    * set limit __tmp78
+  229 op max BATCH __tmp75 MIN_BATCH
+  230 op mul BATCH_TXT BATCH 10
+  231 op add limit batches BATCH
   232 write 0 MEMORY lastCell
   233 set ratePerMin 0
-    * set __tmp79 @time
-    * set startTime __tmp79
+  234 set startTime @time
   235 set __tmp74 startTime
   236 jump __label43 always
   237 label __label42

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-30 instructions):
 
    19 label __label8
    20 set MEMORY block
    21 set lastCell 63
-    * set __tmp4 lastCell
    22 jump __label6 always
    23 label __label7
    24 jump __label10 equal __ast0 @memory-bank
 
    26 label __label10
    27 set MEMORY block
    28 set lastCell 511
-    * set __tmp4 lastCell
    29 jump __label6 always
    30 label __label9
    31 jump __label12 equal __ast0 @plastanium-conveyor
 
    36 set CONV2 CONV1
    37 set CONV1 block
    38 op add LINKED LINKED 1
-    * set __tmp4 LINKED
    39 jump __label6 always
    40 label __label11
-    * set __tmp4 null
    41 label __label6
    42 label __label4
    43 op greaterThan __tmp6 n 0
 
    51 print LINKED
    52 print ")"
    53 printflush message1
-    * set __tmp8 null
    54 jump __label14 always
    55 label __label13
    56 op greaterThan __tmp9 LINKED 4
 
    76 label __label18
    77 set __tmp10 __tmp12
    78 label __label16
-    * set __tmp8 __tmp10
    79 label __label14
    80 label __label1
    81 jump __label0 always
 
   110 op lessThan __tmp25 a1 b1
   111 jump __label22 equal __tmp25 false
   112 op add batches batches 1
-    * set __tmp26 batches
   113 jump __label23 always
   114 label __label22
-    * set __tmp26 null
   115 label __label23
   116 sensor a2 CONV2 @totalItems
   117 op lessThan __tmp29 a2 b2
   118 jump __label24 equal __tmp29 false
   119 op add batches batches 1
-    * set __tmp30 batches
   120 jump __label25 always
   121 label __label24
-    * set __tmp30 null
   122 label __label25
   123 sensor a3 CONV3 @totalItems
   124 op lessThan __tmp33 a3 b3
   125 jump __label26 equal __tmp33 false
   126 op add batches batches 1
-    * set __tmp34 batches
   127 jump __label27 always
   128 label __label26
-    * set __tmp34 null
   129 label __label27
   130 sensor a4 CONV4 @totalItems
   131 op lessThan __tmp37 a4 b4
   132 jump __label28 equal __tmp37 false
   133 op add batches batches 1
-    * set __tmp38 batches
   134 jump __label29 always
   135 label __label28
-    * set __tmp38 null
   136 label __label29
   137 op greaterThan __tmp40 batches limit
   138 jump __label30 equal __tmp40 false
 
   148 op add __tmp50 BATCH BATCH_STEP
   149 op min BATCH __tmp50 MAX_BATCH
   150 op mul BATCH_TXT BATCH 10
-    * set __tmp49 BATCH_TXT
   151 jump __label33 always
   152 label __label32
-    * set __tmp49 null
   153 label __label33
   154 op add limit limit BATCH
-    * set __tmp41 limit
   155 jump __label31 always
   156 label __label30
-    * set __tmp41 null
   157 label __label31
   158 op mul total batches 10
   159 write total MEMORY 0
 
   171 op lessThan __tmp56 b1 a1
   172 jump __label34 equal __tmp56 false
   173 op add batches batches 1
-    * set __tmp57 batches
   174 jump __label35 always
   175 label __label34
-    * set __tmp57 null
   176 label __label35
   177 sensor b2 CONV2 @totalItems
   178 op lessThan __tmp60 b2 a2
   179 jump __label36 equal __tmp60 false
   180 op add batches batches 1
-    * set __tmp61 batches
   181 jump __label37 always
   182 label __label36
-    * set __tmp61 null
   183 label __label37
   184 sensor b3 CONV3 @totalItems
   185 op lessThan __tmp64 b3 a3
   186 jump __label38 equal __tmp64 false
   187 op add batches batches 1
-    * set __tmp65 batches
   188 jump __label39 always
   189 label __label38
-    * set __tmp65 null
   190 label __label39
   191 sensor b4 CONV4 @totalItems
   192 op lessThan __tmp68 b4 a4
   193 jump __label40 equal __tmp68 false
   194 op add batches batches 1
-    * set __tmp69 batches
   195 jump __label41 always
   196 label __label40
-    * set __tmp69 null
   197 label __label41
   198 op sub __tmp71 @time startTime
   199 op floor elapsed __tmp71
 
   206 write 0 MEMORY lastCell
   207 set ratePerMin 0
   208 set startTime @time
-    * set __tmp74 startTime
   209 jump __label43 always
   210 label __label42
-    * set __tmp74 null
   211 label __label43
   212 print "Batch size: [green]"
   213 print BATCH_TXT
 
   225 op notEqual __tmp83 LINKS @links
   226 jump __label44 equal __tmp83 false
   227 end
-    * set __tmp84 null
   228 jump __label45 always
   229 label __label44
-    * set __tmp84 null
   230 label __label45
   231 label __label20
   232 jump __label19 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-2 instructions):
 
    61 print LINKED
    62 print ")"
    63 printflush message1
-    * set __tmp10 null
    64 jump __label16 always
    65 label __label15
    66 op equal __tmp11 MEMORY null
 
    73 jump __label2 always
    74 set __tmp12 null
    75 label __label18
-    * set __tmp10 __tmp12
    76 label __label16
    77 label __label14
    78 label __label1

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-2 instructions):
 
    67 jump __label17 equal __tmp11 false
    68 print "Item Counter\n[salmon]No memory attached."
    69 printflush message1
-    * set __tmp12 null
    70 jump __label18 always
    71 label __label17
    72 jump __label2 always
-    * set __tmp12 null
    73 label __label18
    74 label __label16
    75 label __label14

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
     1 set MAX_BATCH 1000
     2 set lastCell 0
     3 label __label0
-    * jump __label2 equal true false
     4 set CONV4 null
     5 set CONV3 CONV4
     6 set CONV2 CONV3

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-3 instructions):
 
    13 op sub n n 1
    14 getlink block n
    15 sensor __ast0 block @type
-    * jump __label8 equal __ast0 @memory-cell
-    * jump __label7 always
+   16 jump __label7 notEqual __ast0 @memory-cell
    17 label __label8
    18 set MEMORY block
    19 set lastCell 63
    20 jump __label6 always
    21 label __label7
-    * jump __label10 equal __ast0 @memory-bank
-    * jump __label9 always
+   22 jump __label9 notEqual __ast0 @memory-bank
    23 label __label10
    24 set MEMORY block
    25 set lastCell 511
    26 jump __label6 always
    27 label __label9
-    * jump __label12 equal __ast0 @plastanium-conveyor
-    * jump __label11 always
+   28 jump __label11 notEqual __ast0 @plastanium-conveyor
    29 label __label12
    30 set CONV4 CONV3
    31 set CONV3 CONV2

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    36 label __label11
    37 label __label6
    38 label __label4
-    * op greaterThan __tmp6 n 0
-    * jump __label3 notEqual __tmp6 false
+   39 jump __label3 greaterThan n 0
    40 label __label5
-    * op equal __tmp7 LINKED 0
-    * jump __label13 equal __tmp7 false
+   41 jump __label13 notEqual LINKED 0
    42 print "Item Counter\n[salmon]No plastanium conveyor attached (maximum: "
    43 print 4
    44 print ", found: "
 
    47 printflush message1
    48 jump __label14 always
    49 label __label13
-    * op greaterThan __tmp9 LINKED 4
-    * jump __label15 equal __tmp9 false
+   50 jump __label15 lessThanEq LINKED 4
    51 print "Item Counter\n[salmon]Too many plastanium conveyors attached (maximum: "
    52 print 4
    53 print ", found: "
 
    56 printflush message1
    57 jump __label16 always
    58 label __label15
-    * op equal __tmp11 MEMORY null
-    * jump __label17 equal __tmp11 false
+   59 jump __label17 notEqual MEMORY null
    60 print "Item Counter\n[salmon]No memory attached."
    61 printflush message1
    62 jump __label18 always
 
    91 set startTime @time
    92 label __label19
    93 sensor __tmp21 switch1 @enabled
-    * op equal __tmp22 __tmp21 0
-    * jump __label21 equal __tmp22 false
+   94 jump __label21 notEqual __tmp21 0
    95 set start @time
    96 sensor a1 CONV1 @totalItems
-    * op lessThan __tmp25 a1 b1
-    * jump __label22 equal __tmp25 false
+   97 jump __label22 greaterThanEq a1 b1
    98 op add batches batches 1
    99 jump __label23 always
   100 label __label22
   101 label __label23
   102 sensor a2 CONV2 @totalItems
-    * op lessThan __tmp29 a2 b2
-    * jump __label24 equal __tmp29 false
+  103 jump __label24 greaterThanEq a2 b2
   104 op add batches batches 1
   105 jump __label25 always
   106 label __label24
   107 label __label25
   108 sensor a3 CONV3 @totalItems
-    * op lessThan __tmp33 a3 b3
-    * jump __label26 equal __tmp33 false
+  109 jump __label26 greaterThanEq a3 b3
   110 op add batches batches 1
   111 jump __label27 always
   112 label __label26
   113 label __label27
   114 sensor a4 CONV4 @totalItems
-    * op lessThan __tmp37 a4 b4
-    * jump __label28 equal __tmp37 false
+  115 jump __label28 greaterThanEq a4 b4
   116 op add batches batches 1
   117 jump __label29 always
   118 label __label28
   119 label __label29
-    * op greaterThan __tmp40 batches limit
-    * jump __label30 equal __tmp40 false
+  120 jump __label30 lessThanEq batches limit
   121 op sub duration @time startTime
   122 set startTime @time
   123 op div rate BATCH duration
 
   125 write __tmp45 MEMORY lastCell
   126 op mul __tmp46 rate 600000
   127 op floor ratePerMin __tmp46
-    * op lessThanEq __tmp48 duration BATCH_DURATION
-    * jump __label32 equal __tmp48 false
+  128 jump __label32 greaterThan duration BATCH_DURATION
   129 op add __tmp50 BATCH BATCH_STEP
   130 op min BATCH __tmp50 MAX_BATCH
   131 op mul BATCH_TXT BATCH 10
 
   149 print ratePerMin
   150 print "[] items/min\n"
   151 sensor b1 CONV1 @totalItems
-    * op lessThan __tmp56 b1 a1
-    * jump __label34 equal __tmp56 false
+  152 jump __label34 greaterThanEq b1 a1
   153 op add batches batches 1
   154 jump __label35 always
   155 label __label34
   156 label __label35
   157 sensor b2 CONV2 @totalItems
-    * op lessThan __tmp60 b2 a2
-    * jump __label36 equal __tmp60 false
+  158 jump __label36 greaterThanEq b2 a2
   159 op add batches batches 1
   160 jump __label37 always
   161 label __label36
   162 label __label37
   163 sensor b3 CONV3 @totalItems
-    * op lessThan __tmp64 b3 a3
-    * jump __label38 equal __tmp64 false
+  164 jump __label38 greaterThanEq b3 a3
   165 op add batches batches 1
   166 jump __label39 always
   167 label __label38
   168 label __label39
   169 sensor b4 CONV4 @totalItems
-    * op lessThan __tmp68 b4 a4
-    * jump __label40 equal __tmp68 false
+  170 jump __label40 greaterThanEq b4 a4
   171 op add batches batches 1
   172 jump __label41 always
   173 label __label40
   174 label __label41
   175 op sub __tmp71 @time startTime
   176 op floor elapsed __tmp71
-    * op greaterThanEq __tmp73 elapsed 10000
-    * jump __label42 equal __tmp73 false
+  177 jump __label42 lessThan elapsed 10000
   178 op idiv __tmp75 BATCH 5
   179 op max BATCH __tmp75 MIN_BATCH
   180 op mul BATCH_TXT BATCH 10
 
   198 print __tmp82
   199 print " ms"
   200 printflush message1
-    * op notEqual __tmp83 LINKS @links
-    * jump __label44 equal __tmp83 false
+  201 jump __label44 equal LINKS @links
   202 end
   203 jump __label45 always
   204 label __label44

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-13 instructions):
 
    32 set CONV2 CONV1
    33 set CONV1 block
    34 op add LINKED LINKED 1
-    * jump __label6 always
    35 label __label11
    36 label __label6
    37 label __label4
 
    95 sensor a1 CONV1 @totalItems
    96 jump __label22 greaterThanEq a1 b1
    97 op add batches batches 1
-    * jump __label23 always
    98 label __label22
    99 label __label23
   100 sensor a2 CONV2 @totalItems
   101 jump __label24 greaterThanEq a2 b2
   102 op add batches batches 1
-    * jump __label25 always
   103 label __label24
   104 label __label25
   105 sensor a3 CONV3 @totalItems
   106 jump __label26 greaterThanEq a3 b3
   107 op add batches batches 1
-    * jump __label27 always
   108 label __label26
   109 label __label27
   110 sensor a4 CONV4 @totalItems
   111 jump __label28 greaterThanEq a4 b4
   112 op add batches batches 1
-    * jump __label29 always
   113 label __label28
   114 label __label29
   115 jump __label30 lessThanEq batches limit
 
   124 op add __tmp50 BATCH BATCH_STEP
   125 op min BATCH __tmp50 MAX_BATCH
   126 op mul BATCH_TXT BATCH 10
-    * jump __label33 always
   127 label __label32
   128 label __label33
   129 op add limit limit BATCH
-    * jump __label31 always
   130 label __label30
   131 label __label31
   132 op mul total batches 10
 
   144 sensor b1 CONV1 @totalItems
   145 jump __label34 greaterThanEq b1 a1
   146 op add batches batches 1
-    * jump __label35 always
   147 label __label34
   148 label __label35
   149 sensor b2 CONV2 @totalItems
   150 jump __label36 greaterThanEq b2 a2
   151 op add batches batches 1
-    * jump __label37 always
   152 label __label36
   153 label __label37
   154 sensor b3 CONV3 @totalItems
   155 jump __label38 greaterThanEq b3 a3
   156 op add batches batches 1
-    * jump __label39 always
   157 label __label38
   158 label __label39
   159 sensor b4 CONV4 @totalItems
   160 jump __label40 greaterThanEq b4 a4
   161 op add batches batches 1
-    * jump __label41 always
   162 label __label40
   163 label __label41
   164 op sub __tmp71 @time startTime
 
   171 write 0 MEMORY lastCell
   172 set ratePerMin 0
   173 set startTime @time
-    * jump __label43 always
   174 label __label42
   175 label __label43
   176 print "Batch size: [green]"
 
   188 printflush message1
   189 jump __label44 equal LINKS @links
   190 end
-    * jump __label45 always
   191 label __label44
   192 label __label45
   193 label __label20

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
   118 op div rate BATCH duration
   119 op mul __tmp45 rate 166.66666666666666
   120 write __tmp45 MEMORY lastCell
-    * op mul __tmp46 rate 600000
-    * op floor ratePerMin __tmp46
+  121 op idiv ratePerMin rate 0.0000016666666666666667
   122 jump __label32 greaterThan duration BATCH_DURATION
   123 op add __tmp50 BATCH BATCH_STEP
   124 op min BATCH __tmp50 MAX_BATCH
 
   179 print elapsed
   180 print "[] ms\n"
   181 op sub __tmp80 @time start
-    * op div __tmp81 __tmp80 2
-    * op floor __tmp82 __tmp81
+  182 op idiv __tmp82 __tmp80 2
   183 print "[lightgray]Loop time: "
   184 print __tmp82
   185 print " ms"

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    79 op add limit batches BATCH
    80 control enabled switch1 0
    81 set b4 0
-    * set b3 b4
-    * set b2 b3
-    * set b1 b2
-    * set a4 b1
-    * set a3 a4
-    * set a2 a3
-    * set a1 a2
+   82 set b3 0
+   83 set b2 b4
+   84 set b1 b3
+   85 set a4 b2
+   86 set a3 b1
+   87 set a2 a4
+   88 set a1 a3
    89 set ratePerMin 0
    90 set startTime @time
    91 label __label19

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2:
 
    80 control enabled switch1 0
    81 set b4 0
    82 set b3 0
-    * set b2 b4
-    * set b1 b3
-    * set a4 b2
-    * set a3 b1
-    * set a2 a4
-    * set a1 a3
+   83 set b2 0
+   84 set b1 0
+   85 set a4 b4
+   86 set a3 b3
+   87 set a2 b2
+   88 set a1 b1
    89 set ratePerMin 0
    90 set startTime @time
    91 label __label19

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3:
 
    82 set b3 0
    83 set b2 0
    84 set b1 0
-    * set a4 b4
-    * set a3 b3
-    * set a2 b2
-    * set a1 b1
+   85 set a4 0
+   86 set a3 0
+   87 set a2 0
+   88 set a1 0
    89 set ratePerMin 0
    90 set startTime @time
    91 label __label19

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 4 (-4 instructions):
 
    82 set b3 0
    83 set b2 0
    84 set b1 0
-    * set a4 0
-    * set a3 0
-    * set a2 0
-    * set a1 0
    85 set ratePerMin 0
    86 set startTime @time
    87 label __label19

Modifications by Loop Optimization: replicate condition at line 68 (+1 instructions):
 
    87 label __label19
    88 sensor __tmp21 switch1 @enabled
    89 jump __label21 notEqual __tmp21 0
+   90 label __label46
    91 set start @time
    92 sensor a1 CONV1 @totalItems
    93 jump __label22 greaterThanEq a1 b1
 
   186 label __label44
   187 label __label45
   188 label __label20
-    * jump __label19 always
+  189 sensor __tmp21 switch1 @enabled
+  190 jump __label46 equal __tmp21 0
   191 label __label21
   192 control enabled switch1 0
   193 write 0 MEMORY lastCell

Modifications by Final phase, Jump Threading, iteration 1:
 
    44 print LINKED
    45 print ")"
    46 printflush message1
-    * jump __label14 always
+   47 jump __label0 always
    48 label __label13
    49 jump __label15 lessThanEq LINKED 4
    50 print "Item Counter\n[salmon]Too many plastanium conveyors attached (maximum: "
 
    53 print LINKED
    54 print ")"
    55 printflush message1
-    * jump __label16 always
+   56 jump __label0 always
    57 label __label15
-    * jump __label17 notEqual MEMORY null
+   58 jump __label2 notEqual MEMORY null
    59 print "Item Counter\n[salmon]No memory attached."
    60 printflush message1
-    * jump __label18 always
+   61 jump __label0 always
    62 label __label17
    63 jump __label2 always
    64 label __label18

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-2 instructions):
 
    59 print "Item Counter\n[salmon]No memory attached."
    60 printflush message1
    61 jump __label0 always
-    * label __label17
-    * jump __label2 always
-    * label __label18
-    * label __label16
-    * label __label14
-    * label __label1
-    * jump __label0 always
    62 label __label2
    63 set BATCH_DURATION 2000
    64 op idiv __tmp13 MIN_BATCH 10

Modifications by Final phase, Print Merging, iteration 1 (-4 instructions):
 
   123 print "Item Counter                  \n"
   124 print "Monitoring [green]"
   125 print LINKED
-    * print "[] conveyors\n"
-    * print "Total items: [gold]"
+  126 print "[] conveyors\nTotal items: [gold]"
   127 print total
-    * print "[]\n"
-    * print "Rate: [green]"
+  128 print "[]\nRate: [green]"
   129 print ratePerMin
   130 print "[] items/min\n"
   131 sensor b1 CONV1 @totalItems
 
   162 label __label43
   163 print "Batch size: [green]"
   164 print BATCH_TXT
-    * print "[]\n"
-    * print "Batch time: [gold]"
+  165 print "[]\nBatch time: [gold]"
   166 print elapsed
-    * print "[] ms\n"
   167 op sub __tmp80 @time start
   168 op idiv __tmp82 __tmp80 2
-    * print "[lightgray]Loop time: "
+  169 print "[] ms\n[lightgray]Loop time: "
   170 print __tmp82
   171 print " ms"
   172 printflush message1

Final code before resolving virtual instructions:

set MIN_BATCH 10
set MAX_BATCH 1000
set lastCell 0
label __label0
set CONV4 null
set CONV3 CONV4
set CONV2 CONV3
set CONV1 CONV2
set MEMORY CONV1
set LINKED 0
set LINKS @links
set n LINKS
label __label3
op sub n n 1
getlink block n
sensor __ast0 block @type
jump __label7 notEqual __ast0 @memory-cell
set MEMORY block
set lastCell 63
jump __label6 always 0 0
label __label7
jump __label9 notEqual __ast0 @memory-bank
set MEMORY block
set lastCell 511
jump __label6 always 0 0
label __label9
jump __label11 notEqual __ast0 @plastanium-conveyor
set CONV4 CONV3
set CONV3 CONV2
set CONV2 CONV1
set CONV1 block
op add LINKED LINKED 1
label __label11
label __label6
jump __label3 greaterThan n 0
jump __label13 notEqual LINKED 0
print "Item Counter\n[salmon]No plastanium conveyor attached (maximum: "
print 4
print ", found: "
print LINKED
print ")"
printflush message1
jump __label0 always 0 0
label __label13
jump __label15 lessThanEq LINKED 4
print "Item Counter\n[salmon]Too many plastanium conveyors attached (maximum: "
print 4
print ", found: "
print LINKED
print ")"
printflush message1
jump __label0 always 0 0
label __label15
jump __label2 notEqual MEMORY null
print "Item Counter\n[salmon]No memory attached."
printflush message1
jump __label0 always 0 0
label __label2
set BATCH_DURATION 2000
op idiv __tmp13 MIN_BATCH 10
op max MIN_BATCH __tmp13 1
op idiv __tmp15 MAX_BATCH 10
op max MAX_BATCH __tmp15 MIN_BATCH
set BATCH_STEP 1
set BATCH MIN_BATCH
read total MEMORY 0
op idiv batches total 10
op add limit batches BATCH
control enabled switch1 0 0 0 0
set b4 0
set b3 0
set b2 0
set b1 0
set ratePerMin 0
set startTime @time
sensor __tmp21 switch1 @enabled
jump __label21 notEqual __tmp21 0
label __label46
set start @time
sensor a1 CONV1 @totalItems
jump __label22 greaterThanEq a1 b1
op add batches batches 1
label __label22
sensor a2 CONV2 @totalItems
jump __label24 greaterThanEq a2 b2
op add batches batches 1
label __label24
sensor a3 CONV3 @totalItems
jump __label26 greaterThanEq a3 b3
op add batches batches 1
label __label26
sensor a4 CONV4 @totalItems
jump __label28 greaterThanEq a4 b4
op add batches batches 1
label __label28
jump __label30 lessThanEq batches limit
op sub duration @time startTime
set startTime @time
op div rate BATCH duration
op mul __tmp45 rate 166.66666666666666
write __tmp45 MEMORY lastCell
op idiv ratePerMin rate 0.0000016666666666666667
jump __label32 greaterThan duration BATCH_DURATION
op add __tmp50 BATCH BATCH_STEP
op min BATCH __tmp50 MAX_BATCH
op mul BATCH_TXT BATCH 10
label __label32
op add limit limit BATCH
label __label30
op mul total batches 10
write total MEMORY 0
print "Item Counter                  \n"
print "Monitoring [green]"
print LINKED
print "[] conveyors\nTotal items: [gold]"
print total
print "[]\nRate: [green]"
print ratePerMin
print "[] items/min\n"
sensor b1 CONV1 @totalItems
jump __label34 greaterThanEq b1 a1
op add batches batches 1
label __label34
sensor b2 CONV2 @totalItems
jump __label36 greaterThanEq b2 a2
op add batches batches 1
label __label36
sensor b3 CONV3 @totalItems
jump __label38 greaterThanEq b3 a3
op add batches batches 1
label __label38
sensor b4 CONV4 @totalItems
jump __label40 greaterThanEq b4 a4
op add batches batches 1
label __label40
op sub __tmp71 @time startTime
op floor elapsed __tmp71 0
jump __label42 lessThan elapsed 10000
op idiv __tmp75 BATCH 5
op max BATCH __tmp75 MIN_BATCH
op mul BATCH_TXT BATCH 10
op add limit batches BATCH
write 0 MEMORY lastCell
set ratePerMin 0
set startTime @time
label __label42
print "Batch size: [green]"
print BATCH_TXT
print "[]\nBatch time: [gold]"
print elapsed
op sub __tmp80 @time start
op idiv __tmp82 __tmp80 2
print "[] ms\n[lightgray]Loop time: "
print __tmp82
print " ms"
printflush message1
jump __label44 equal LINKS @links
end
label __label44
sensor __tmp21 switch1 @enabled
jump __label46 equal __tmp21 0
label __label21
control enabled switch1 0 0 0 0
write 0 MEMORY lastCell
write 0 MEMORY 0
end
