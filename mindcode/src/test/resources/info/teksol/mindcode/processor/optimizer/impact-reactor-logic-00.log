   620 instructions before optimizations.
    53 instructions eliminated by Temp Variables Elimination.
    60 instructions eliminated by Dead Code Elimination (10 iterations).
     1 instructions eliminated by Jump Normalization (4 iterations).
    17 instructions eliminated by Jump Optimization (4 iterations).
    27 instructions eliminated by Single Step Elimination (3 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (3 iterations).
     3 instructions eliminated by If Expression Optimization (3 iterations).
    91 instructions eliminated by Data Flow Optimization (8 passes, 27 iterations).
   504 instructions added by Function Inlining (10 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by PropagateJumpTargets.
     5 instructions eliminated by Unreachable Code Elimination.
   864 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 548):
  * Function Inlining: inline function kilo                      cost     5, benefit      218,8, efficiency       43,8 (-5 instructions)
    Function Inlining: inline function update_fuel               cost    13, benefit      337,5, efficiency       26,0
    Function Inlining: inline function check_radar               cost    22, benefit      175,0, efficiency        8,0
    Function Inlining: inline function calc_charge_req           cost    69, benefit      503,9, efficiency        7,3
    Function Inlining: inline function start_reactor             cost   519, benefit      687,5, efficiency        1,3
    Function Inlining: inline function call at line 69           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 73           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 74           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 75           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 76           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 77           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 80           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 82           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 84           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 86           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 88           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 89           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 91           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 93           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 96           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 102          cost     3, benefit       87,5, efficiency       29,2
    Function Inlining: inline function call at line 103          cost     3, benefit       87,5, efficiency       29,2
    Function Inlining: inline function call at line 105          cost     3, benefit       43,8, efficiency       14,6
    Function Inlining: inline function call at line 173          cost    14, benefit        3,9, efficiency        0,3

Pass 1: speed optimization selection (cost limit 553):
  * Function Inlining: inline function update_fuel               cost    13, benefit      337,5, efficiency       26,0 (-1 instructions)
    Function Inlining: inline function check_radar               cost    22, benefit      175,0, efficiency        8,0
    Function Inlining: inline function calc_charge_req           cost    69, benefit      503,9, efficiency        7,3
    Function Inlining: inline function start_reactor             cost   519, benefit      687,5, efficiency        1,3
    Function Inlining: inline function call at line 69           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 73           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 74           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 75           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 76           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 77           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 80           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 82           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 84           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 86           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 88           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 89           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 91           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 93           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 96           cost     7, benefit      112,5, efficiency       16,1
    Function Inlining: inline function call at line 173          cost    14, benefit        3,9, efficiency        0,3

Pass 1: speed optimization selection (cost limit 554):
  * Function Inlining: inline function check_radar               cost    22, benefit      175,0, efficiency        8,0 (+5 instructions)
    Function Inlining: inline function calc_charge_req           cost    69, benefit      503,9, efficiency        7,3
    Function Inlining: inline function start_reactor             cost   519, benefit      687,5, efficiency        1,3
    Function Inlining: inline function call at line 69           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 73           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 74           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 75           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 76           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 77           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 80           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 84           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 88           cost    23, benefit       87,5, efficiency        3,8
    Function Inlining: inline function call at line 89           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 91           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 93           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 173          cost    14, benefit        3,9, efficiency        0,3

Pass 1: speed optimization selection (cost limit 549):
  * Function Inlining: inline function calc_charge_req           cost    69, benefit      503,9, efficiency        7,3 (+43 instructions)
    Function Inlining: inline function start_reactor             cost   519, benefit      687,5, efficiency        1,3
    Function Inlining: inline function call at line 73           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 74           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 75           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 76           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 77           cost    14, benefit      100,0, efficiency        7,1
    Function Inlining: inline function call at line 80           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 84           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 89           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 91           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 93           cost   130, benefit      137,5, efficiency        1,1
    Function Inlining: inline function call at line 173          cost    14, benefit        3,9, efficiency        0,3

Pass 1: speed optimization selection (cost limit 506):
  ! Function Inlining: inline function start_reactor             cost   559, benefit      687,5, efficiency        1,2
  * Function Inlining: inline function call at line 80           cost   140, benefit      137,5, efficiency        1,0 (+131 instructions)
    Function Inlining: inline function call at line 84           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 89           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 91           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 93           cost   140, benefit      137,5, efficiency        1,0

Pass 1: speed optimization selection (cost limit 375):
  ! Function Inlining: inline function start_reactor             cost   419, benefit      550,0, efficiency        1,3
  * Function Inlining: inline function call at line 84           cost   140, benefit      137,5, efficiency        1,0 (+132 instructions)
    Function Inlining: inline function call at line 89           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 91           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 93           cost   140, benefit      137,5, efficiency        1,0

Pass 1: speed optimization selection (cost limit 243):
  ! Function Inlining: inline function start_reactor             cost   279, benefit      412,5, efficiency        1,5
  * Function Inlining: inline function call at line 89           cost   140, benefit      137,5, efficiency        1,0 (+132 instructions)
    Function Inlining: inline function call at line 91           cost   140, benefit      137,5, efficiency        1,0
    Function Inlining: inline function call at line 93           cost   140, benefit      137,5, efficiency        1,0

Pass 1: speed optimization selection (cost limit 111):
  ! Function Inlining: inline function start_reactor             cost   139, benefit      275,0, efficiency        2,0
  ! Function Inlining: inline function call at line 91           cost   140, benefit      137,5, efficiency        1,0
  ! Function Inlining: inline function call at line 93           cost   140, benefit      137,5, efficiency        1,0

Pass 2: speed optimization selection (cost limit 130):
  ! Function Inlining: inline function start_reactor             cost   138, benefit      275,0, efficiency        2,0
  ! Function Inlining: inline function call at line 91           cost   139, benefit      137,5, efficiency        1,0
  ! Function Inlining: inline function call at line 93           cost   139, benefit      137,5, efficiency        1,0

Pass 3: speed optimization selection (cost limit 130):
  ! Function Inlining: inline function start_reactor             cost   138, benefit      275,0, efficiency        2,0
  ! Function Inlining: inline function call at line 91           cost   139, benefit      137,5, efficiency        1,0
  ! Function Inlining: inline function call at line 93           cost   139, benefit      137,5, efficiency        1,0

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    72 print "\n"
    73 set __tmp8 true
    74 jump __label12 always
-    * set __tmp13 null
    75 jump __label14 always
    76 label __label13
-    * set __tmp13 null
    77 label __label14
    78 set __tmp8 false
    79 jump __label12 always
 
   137 setaddr __fn1retaddr __label21
   138 call __label1 __fn1retval
   139 gotolabel __label21 __fn1
-    * set __tmp25 __fn1retval
   140 set __fn4_reactor reactor2
   141 set __fn4_reactor_num 2
   142 set __fn4_emerg_shutdown emerg_shutdown
 
   154 setaddr __fn1retaddr __label23
   155 call __label1 __fn1retval
   156 gotolabel __label23 __fn1
-    * set __tmp27 __fn1retval
   157 set __fn2_unit TOWER
   158 setaddr __fn2retaddr __label24
   159 call __label2 __fn2retval
 
   203 setaddr __fn1retaddr __label28
   204 call __label1 __fn1retval
   205 gotolabel __label28 __fn1
-    * set __tmp35 __fn1retval
   206 op or __tmp36 fuel_1 fuel_2
   207 op or __tmp37 __tmp36 fuel_many
   208 label __label29
 
   237 print " Critical power.\n"
   238 set __tmp51 null
   239 label __label34
-    * set __tmp50 __tmp51
   240 jump __label32 always
   241 label __label31
   242 op equal __tmp52 __fn6_reactors_fueled false
 
   258 print "\n"
   259 set __tmp53 null
   260 label __label36
-    * set __tmp50 __tmp53
   261 label __label32
   262 op lessThan __tmp54 __fn6_fuel_stored __fn6_limit
   263 set __tmp38 __tmp54
 
   291 control enabled generator2 true
   292 set __tmp63 true
   293 label __label42
-    * set __tmp56 __tmp63
   294 label __label40
   295 set __fn0_val AVG_SURPLUS
   296 setaddr __fn0retaddr __label43
 
   320 print "kJ. "
   321 print surplus
   322 print "kW flow.\n"
-    * set __tmp68 null
   323 jump __label46 always
   324 label __label45
   325 print "Power "
 
   348 label __label52
   349 set __tmp80 null
   350 label __label53
-    * set __tmp78 __tmp80
   351 jump __label51 always
   352 label __label50
-    * set __tmp78 null
   353 label __label51
   354 op lessThan __tmp83 __fn8_stored 0.8
   355 op mul __tmp84 GOAL_BUFFER 0.8
 
   370 label __label55
   371 set __tmp70 __tmp87
   372 label __label49
-    * set __tmp68 __tmp70
   373 label __label46
   374 op notEqual __tmp93 REACTORS_DESIRED 5
   375 jump __label56 equal __tmp93 false
   376 print "Require only "
   377 print REACTORS_DESIRED
   378 print "/5 reactors.\n"
-    * set __tmp94 null
   379 jump __label57 always
   380 label __label56
-    * set __tmp94 null
   381 label __label57
   382 printflush message1
   383 label __label8
 
   458 jump __label68 equal __tmp108 false
   459 set __fn3retval 0
   460 jump __label67 always
-    * set __tmp109 null
   461 jump __label69 always
   462 label __label68
-    * set __tmp109 null
   463 label __label69
   464 op sub __tmp110 30 __fn3_secs
   465 set __fn3_time_left __tmp110
 
   506 control enabled __fn4_reactor false
   507 print "emergency mode\n"
   508 set __fn4_supply_fuel false
-    * set __tmp129 __fn4_supply_fuel
   509 jump __label72 always
   510 label __label71
   511 jump __label73 equal __fn4_enabled false
 
   686 label __label91
   687 set __tmp130 __tmp165
   688 label __label74
-    * set __tmp129 __tmp130
   689 label __label72
   690 sensor __tmp187 __fn4_reactor @enabled
   691 op notEqual __tmp188 __fn4_enabled __tmp187
   692 jump __label102 equal __tmp188 false
   693 set __tmp190 @tick
   694 set RET_T_STARTUP __tmp190
-    * set __tmp189 RET_T_STARTUP
   695 jump __label103 always
   696 label __label102
-    * set __tmp189 null
   697 label __label103
   698 set __fn4retval __fn4_supply_fuel
   699 jump __label70 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   231 print " - "
   232 jump __label33 equal __fn6_emerg_shutdown false
   233 print " Enemies detected.\n"
-    * set __tmp51 null
   234 jump __label34 always
   235 label __label33
   236 print " Critical power.\n"
-    * set __tmp51 null
   237 label __label34
   238 jump __label32 always
   239 label __label31
 
   245 print " / "
   246 print __fn6_limit
   247 print " (due to emergency)\n"
-    * set __tmp53 null
   248 jump __label36 always
   249 label __label35
   250 set __fn6_limit FUEL_LIMIT
 
   253 print " / "
   254 print __fn6_limit
   255 print "\n"
-    * set __tmp53 null
   256 label __label36
   257 label __label32
   258 op lessThan __tmp54 __fn6_fuel_stored __fn6_limit
 
   280 print "Differential now idle.\n"
   281 control enabled generator1 false
   282 control enabled generator2 false
-    * set __tmp63 false
   283 jump __label42 always
   284 label __label41
   285 control enabled generator1 true
   286 control enabled generator2 true
-    * set __tmp63 true
   287 label __label42
   288 label __label40
   289 set __fn0_val AVG_SURPLUS
 
   337 set REACTORS_DESIRED __tmp81
   338 op sub __tmp82 AVG_SURPLUS GENERATOR_OUTPUT
   339 set AVG_SURPLUS __tmp82
-    * set __tmp80 AVG_SURPLUS
   340 jump __label53 always
   341 label __label52
-    * set __tmp80 null
   342 label __label53
   343 jump __label51 always
   344 label __label50
 
   360 label __label54
   361 set __tmp87 null
   362 label __label55
-    * set __tmp70 __tmp87
   363 label __label49
   364 label __label46
   365 op notEqual __tmp93 REACTORS_DESIRED 5
 
   400 set __tmp99 FUEL_OFF
   401 label __label63
   402 control config __fn1_uld_out __tmp99
-    * set __fn1retval __tmp99
   403 label __label59
   404 goto __fn1retaddr __fn1
   405 end
 
   590 label __label78
   591 set __tmp132 __tmp137
   592 label __label76
-    * set __tmp130 __tmp132
   593 jump __label74 always
   594 label __label73
   595 op sub __tmp156 __fn4_charge START_POWER_REQ
 
   673 label __label93
   674 set __tmp165 __tmp168
   675 label __label91
-    * set __tmp130 __tmp165
   676 label __label74
   677 label __label72
   678 sensor __tmp187 __fn4_reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   355 op add __tmp91 __fn8_needed REACTORS_DESIRED
   356 op min __tmp92 5 __tmp91
   357 set REACTORS_DESIRED __tmp92
-    * set __tmp87 REACTORS_DESIRED
   358 jump __label55 always
   359 label __label54
-    * set __tmp87 null
   360 label __label55
   361 label __label49
   362 label __label46
 
   501 jump __label75 equal __tmp131 false
   502 control enabled __fn4_reactor false
   503 print "STOP unwanted\n"
-    * set __tmp132 null
   504 jump __label76 always
   505 label __label75
   506 op greaterThan __tmp133 __fn4_reactor_num 1
 
   585 label __label80
   586 set __tmp137 __tmp139
   587 label __label78
-    * set __tmp132 __tmp137
   588 label __label76
   589 jump __label74 always
   590 label __label73
 
   603 jump __label90 equal __tmp164 false
   604 print "IDLE\n"
   605 set __fn4_supply_fuel false
-    * set __tmp165 __fn4_supply_fuel
   606 jump __label91 always
   607 label __label90
   608 op add __tmp166 __fn4_flow_units __fn4_charge_units
 
   666 label __label95
   667 set __tmp168 __tmp177
   668 label __label93
-    * set __tmp165 __tmp168
   669 label __label91
   670 label __label74
   671 label __label72

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   510 jump __label77 equal __tmp136 false
   511 control enabled __fn4_reactor false
   512 print "STOP system fuel low\n"
-    * set __tmp137 null
   513 jump __label78 always
   514 label __label77
   515 op lessThanEq __tmp138 __fn4_fuel 1
 
   582 label __label82
   583 set __tmp139 __tmp141
   584 label __label80
-    * set __tmp137 __tmp139
   585 label __label78
   586 label __label76
   587 jump __label74 always
 
   620 print __fn4_flow
   621 print "W)\n"
   622 set __fn4_supply_fuel false
-    * set __tmp168 __fn4_supply_fuel
   623 jump __label93 always
   624 label __label92
   625 op lessThan __tmp175 __fn4_fuel FUEL_REQ
 
   661 label __label99
   662 set __tmp177 __tmp183
   663 label __label95
-    * set __tmp168 __tmp177
   664 label __label93
   665 label __label91
   666 label __label74

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   516 jump __label79 equal __tmp138 false
   517 control enabled __fn4_reactor false
   518 print "STOP fuel low\n"
-    * set __tmp139 null
   519 jump __label80 always
   520 label __label79
   521 op lessThanEq __tmp140 __fn4_cryo CRYO_ABORT
 
   579 label __label84
   580 set __tmp141 __tmp143
   581 label __label82
-    * set __tmp139 __tmp141
   582 label __label80
   583 label __label78
   584 label __label76
 
   633 print "WAIT system fuel\n"
   634 set __tmp180 null
   635 label __label97
-    * set __tmp177 __tmp180
   636 jump __label95 always
   637 label __label94
   638 op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
 
   656 label __label101
   657 set __tmp183 __tmp185
   658 label __label99
-    * set __tmp177 __tmp183
   659 label __label95
   660 label __label93
   661 label __label91

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   522 jump __label81 equal __tmp140 false
   523 control enabled __fn4_reactor false
   524 print "STOP out of cryo\n"
-    * set __tmp141 null
   525 jump __label82 always
   526 label __label81
   527 op lessThan __tmp142 __fn4_secs 30
 
   576 label __label89
   577 set __tmp143 __tmp153
   578 label __label84
-    * set __tmp141 __tmp143
   579 label __label82
   580 label __label80
   581 label __label78
 
   625 op greaterThan __tmp179 __tmp178 FUEL_REQ
   626 jump __label96 equal __tmp179 false
   627 print "WAIT fuel\n"
-    * set __tmp180 null
   628 jump __label97 always
   629 label __label96
   630 print "WAIT system fuel\n"
-    * set __tmp180 null
   631 label __label97
   632 jump __label95 always
   633 label __label94
 
   635 op lessThan __tmp182 __fn4_fuel_stored __tmp181
   636 jump __label98 equal __tmp182 false
   637 print "WAIT buffer fuel\n"
-    * set __tmp183 null
   638 jump __label99 always
   639 label __label98
   640 op lessThan __tmp184 __fn4_cryo __fn4_cryo_req
 
   649 control enabled __fn4_reactor true
   650 set __tmp185 true
   651 label __label101
-    * set __tmp183 __tmp185
   652 label __label99
   653 label __label95
   654 label __label93

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   552 print "J\n"
   553 set __tmp148 null
   554 label __label87
-    * set __tmp143 __tmp148
   555 jump __label84 always
   556 label __label83
   557 op lessThan __tmp150 __fn4_charge PWR_ABANDON
 
   573 print " mins\n"
   574 set __tmp153 null
   575 label __label89
-    * set __tmp143 __tmp153
   576 label __label84
   577 label __label82
   578 label __label80
 
   638 op lessThan __tmp184 __fn4_cryo __fn4_cryo_req
   639 jump __label100 equal __tmp184 false
   640 print "WAIT cryo\n"
-    * set __tmp185 null
   641 jump __label101 always
   642 label __label100
   643 print "STARTUP\n"
   644 op add __tmp186 START_POWER_REQ PWR_REQ
   645 set START_POWER_REQ __tmp186
   646 control enabled __fn4_reactor true
-    * set __tmp185 true
   647 label __label101
   648 label __label99
   649 label __label95

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   540 control enabled __fn4_reactor false
   541 print "START FAIL battery\n"
   542 set __fn4_supply_fuel false
-    * set __tmp148 __fn4_supply_fuel
   543 jump __label87 always
   544 label __label86
   545 op sub __tmp149 30 __fn4_secs
 
   549 print " secs, req "
   550 print __fn4_charge_req
   551 print "J\n"
-    * set __tmp148 null
   552 label __label87
   553 jump __label84 always
   554 label __label83
 
   559 control enabled __fn4_reactor false
   560 print "ABANDON - battery crit\n"
   561 set __fn4_supply_fuel false
-    * set __tmp153 __fn4_supply_fuel
   562 jump __label89 always
   563 label __label88
   564 op idiv __tmp154 __fn4_secs 6
 
   568 print "RUN "
   569 print __fn4_mins
   570 print " mins\n"
-    * set __tmp153 null
   571 label __label89
   572 label __label84
   573 label __label82

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-53 instructions):
 
    25 sensor __tmp0 node1 @powerNetIn
    26 sensor __tmp1 node1 @powerNetOut
    27 op sub __tmp2 __tmp0 __tmp1
-    * op floor __tmp3 __tmp2
-    * set surplus __tmp3
+   28 op floor surplus __tmp2
    29 op greaterThan __tmp4 surplus 10000
    30 jump __label5 equal __tmp4 false
-    * op sub __tmp6 @tick 3600
-    * set __tmp5 __tmp6
+   31 op sub __tmp5 @tick 3600
    32 jump __label6 always
    33 label __label5
    34 set __tmp5 @tick
 
    58 setaddr __fn2retaddr __label10
    59 call __label2 __fn2retval
    60 gotolabel __label10 __fn2
-    * set __tmp7 __fn2retval
-    * set emerg_shutdown __tmp7
+   61 set emerg_shutdown __fn2retval
    62 label __label11
    63 op notEqual __tmp9 switch1 null
    64 sensor __tmp10 switch1 @enabled
 
    76 jump __label12 always
    77 set __tmp8 null
    78 label __label12
-    * op or __tmp14 emerg_shutdown __tmp8
-    * set emerg_shutdown __tmp14
+   79 op or emerg_shutdown emerg_shutdown __tmp8
    80 set __fn3_reactor reactor1
    81 set __fn3_time t_startup1
    82 setaddr __fn3retaddr __label15
    83 call __label3 __fn3retval
    84 gotolabel __label15 __fn3
-    * set __tmp15 __fn3retval
-    * set START_POWER_REQ __tmp15
+   85 set START_POWER_REQ __fn3retval
    86 set __fn3_reactor reactor2
    87 set __fn3_time t_startup2
    88 setaddr __fn3retaddr __label16
    89 call __label3 __fn3retval
    90 gotolabel __label16 __fn3
    91 set __tmp16 __fn3retval
-    * op add __tmp17 START_POWER_REQ __tmp16
-    * set START_POWER_REQ __tmp17
+   92 op add START_POWER_REQ START_POWER_REQ __tmp16
    93 set __fn3_reactor reactor3
    94 set __fn3_time t_startup3
    95 setaddr __fn3retaddr __label17
    96 call __label3 __fn3retval
    97 gotolabel __label17 __fn3
    98 set __tmp18 __fn3retval
-    * op add __tmp19 START_POWER_REQ __tmp18
-    * set START_POWER_REQ __tmp19
+   99 op add START_POWER_REQ START_POWER_REQ __tmp18
   100 set __fn3_reactor reactor4
   101 set __fn3_time t_startup4
   102 setaddr __fn3retaddr __label18
   103 call __label3 __fn3retval
   104 gotolabel __label18 __fn3
   105 set __tmp20 __fn3retval
-    * op add __tmp21 START_POWER_REQ __tmp20
-    * set START_POWER_REQ __tmp21
+  106 op add START_POWER_REQ START_POWER_REQ __tmp20
   107 set __fn3_reactor reactor5
   108 set __fn3_time t_startup5
   109 setaddr __fn3retaddr __label19
   110 call __label3 __fn3retval
   111 gotolabel __label19 __fn3
   112 set __tmp22 __fn3retval
-    * op add __tmp23 START_POWER_REQ __tmp22
-    * set START_POWER_REQ __tmp23
+  113 op add START_POWER_REQ START_POWER_REQ __tmp22
   114 set __fn4_reactor reactor1
   115 set __fn4_reactor_num 1
   116 set __fn4_emerg_shutdown emerg_shutdown
 
   119 setaddr __fn4retaddr __label20
   120 call __label4 __fn4retval
   121 gotolabel __label20 __fn4
-    * set __tmp24 __fn4retval
-    * set fuel_1 __tmp24
+  122 set fuel_1 __fn4retval
   123 set t_startup1 RET_T_STARTUP
   124 set __fn1_fuel fuel_1
   125 set __fn1_uld_in ULD_IN_1
 
   135 setaddr __fn4retaddr __label22
   136 call __label4 __fn4retval
   137 gotolabel __label22 __fn4
-    * set __tmp26 __fn4retval
-    * set fuel_2 __tmp26
+  138 set fuel_2 __fn4retval
   139 set t_startup2 RET_T_STARTUP
   140 set __fn1_fuel fuel_2
   141 set __fn1_uld_in ULD_IN_2
 
   148 call __label2 __fn2retval
   149 gotolabel __label24 __fn2
   150 set __tmp28 __fn2retval
-    * op or __tmp29 emerg_shutdown __tmp28
-    * set emerg_shutdown __tmp29
+  151 op or emerg_shutdown emerg_shutdown __tmp28
   152 set __fn4_reactor reactor3
   153 set __fn4_reactor_num 3
   154 set __fn4_emerg_shutdown emerg_shutdown
 
   157 setaddr __fn4retaddr __label25
   158 call __label4 __fn4retval
   159 gotolabel __label25 __fn4
-    * set __tmp30 __fn4retval
-    * set fuel_3 __tmp30
+  160 set fuel_3 __fn4retval
   161 set t_startup3 RET_T_STARTUP
   162 set __fn4_reactor reactor4
   163 set __fn4_reactor_num 4
 
   167 setaddr __fn4retaddr __label26
   168 call __label4 __fn4retval
   169 gotolabel __label26 __fn4
-    * set __tmp31 __fn4retval
-    * set fuel_4 __tmp31
+  170 set fuel_4 __fn4retval
   171 set t_startup4 RET_T_STARTUP
   172 set __fn4_reactor reactor5
   173 set __fn4_reactor_num 5
 
   177 setaddr __fn4retaddr __label27
   178 call __label4 __fn4retval
   179 gotolabel __label27 __fn4
-    * set __tmp32 __fn4retval
-    * set fuel_5 __tmp32
+  180 set fuel_5 __fn4retval
   181 set t_startup5 RET_T_STARTUP
   182 op or __tmp33 fuel_3 fuel_4
-    * op or __tmp34 __tmp33 fuel_5
-    * set fuel_many __tmp34
+  183 op or fuel_many __tmp33 fuel_5
   184 set __fn1_fuel fuel_many
   185 set __fn1_uld_in ULD_IN_MANY
   186 set __fn1_uld_out ULD_OUT_MANY
 
   193 set __fn6_reactors_fueled __tmp37
   194 set __fn6_emerg_shutdown emerg_shutdown
   195 sensor __tmp39 NODE @powerNetStored
-    * op floor __tmp40 __tmp39
-    * set __fn6_charge __tmp40
+  196 op floor __fn6_charge __tmp39
   197 sensor __tmp41 NODE @powerNetIn
   198 sensor __tmp42 NODE @powerNetOut
   199 op sub __tmp43 __tmp41 __tmp42
-    * op floor __tmp44 __tmp43
-    * set __fn6_surplus __tmp44
-    * sensor __tmp45 CONTAINER @blast-compound
-    * set __fn6_fuel_stored __tmp45
+  200 op floor __fn6_surplus __tmp43
+  201 sensor __fn6_fuel_stored CONTAINER @blast-compound
   202 op lessThan __tmp46 __fn6_charge PWR_ABORT
   203 op lessThan __tmp47 __fn6_surplus FLOW_ABORT
   204 op land __tmp48 __tmp46 __tmp47
 
   236 print "\n"
   237 label __label36
   238 label __label32
-    * op lessThan __tmp54 __fn6_fuel_stored __fn6_limit
-    * set __tmp38 __tmp54
+  239 op lessThan __tmp38 __fn6_fuel_stored __fn6_limit
   240 jump __label30 always
   241 set __tmp38 null
   242 label __label30
 
   251 label __label39
   252 sensor __tmp57 NODE @powerNetStored
   253 sensor __tmp58 NODE @powerNetCapacity
-    * op div __tmp59 __tmp57 __tmp58
-    * set __fn7_stored_pc __tmp59
+  254 op div __fn7_stored_pc __tmp57 __tmp58
   255 op greaterThan __tmp60 __fn7_stored_pc 0.9
   256 op lessThan __tmp61 START_POWER_REQ 10
   257 op land __tmp62 __tmp60 __tmp61
 
   269 setaddr __fn0retaddr __label43
   270 call __label0 __fn0retval
   271 gotolabel __label43 __fn0
-    * set __tmp64 __fn0retval
-    * set surplus __tmp64
-    * sensor __tmp65 NODE @powerNetStored
-    * set __fn0_val __tmp65
+  272 set surplus __fn0retval
+  273 sensor __fn0_val NODE @powerNetStored
   274 setaddr __fn0retaddr __label44
   275 call __label0 __fn0retval
   276 gotolabel __label44 __fn0
-    * set __tmp66 __fn0retval
-    * set charge __tmp66
+  277 set charge __fn0retval
   278 op greaterThan __tmp67 START_POWER_REQ 0
   279 jump __label45 equal __tmp67 false
   280 set __fn0_val START_POWER_REQ
   281 setaddr __fn0retaddr __label47
   282 call __label0 __fn0retval
   283 gotolabel __label47 __fn0
-    * set __tmp69 __fn0retval
-    * set req __tmp69
+  284 set req __fn0retval
   285 print "Req "
   286 print req
   287 print "kJ / "
 
   299 label __label48
   300 sensor __tmp71 NODE @powerNetStored
   301 sensor __tmp72 NODE @powerNetCapacity
-    * op div __tmp73 __tmp71 __tmp72
-    * set __fn8_stored __tmp73
+  302 op div __fn8_stored __tmp71 __tmp72
   303 op greaterThan __tmp74 __fn8_stored 0.98
   304 op add __tmp75 GENERATOR_OUTPUT GOAL_BUFFER
   305 op greaterThan __tmp76 AVG_SURPLUS __tmp75
 
   307 jump __label50 equal __tmp77 false
   308 op greaterThan __tmp79 REACTORS_DESIRED 2
   309 jump __label52 equal __tmp79 false
-    * op sub __tmp81 REACTORS_DESIRED 1
-    * set REACTORS_DESIRED __tmp81
-    * op sub __tmp82 AVG_SURPLUS GENERATOR_OUTPUT
-    * set AVG_SURPLUS __tmp82
+  310 op sub REACTORS_DESIRED REACTORS_DESIRED 1
+  311 op sub AVG_SURPLUS AVG_SURPLUS GENERATOR_OUTPUT
   312 jump __label53 always
   313 label __label52
   314 label __label53
 
   322 jump __label54 equal __tmp86 false
   323 op sub __tmp88 AVG_SURPLUS GOAL_BUFFER
   324 op idiv __tmp89 __tmp88 GENERATOR_OUTPUT
-    * op max __tmp90 1 __tmp89
-    * set __fn8_needed __tmp90
+  325 op max __fn8_needed 1 __tmp89
   326 op add __tmp91 __fn8_needed REACTORS_DESIRED
-    * op min __tmp92 5 __tmp91
-    * set REACTORS_DESIRED __tmp92
+  327 op min REACTORS_DESIRED 5 __tmp91
   328 jump __label55 always
   329 label __label54
   330 label __label55
 
   345 end
   346 label __label0
   347 op idiv __tmp95 __fn0_val 100
-    * op div __tmp96 __tmp95 10
-    * set __fn0retval __tmp96
+  348 op div __fn0retval __tmp95 10
   349 jump __label58 always
   350 set __fn0retval null
   351 label __label58
 
   371 goto __fn1retaddr __fn1
   372 end
   373 label __label2
-    * radar enemy any any health __fn2_unit 1 __tmp100
-    * set __fn2_enemy_found __tmp100
+  374 radar enemy any any health __fn2_unit 1 __fn2_enemy_found
   375 op notEqual __tmp101 __fn2_enemy_found null
   376 jump __label65 equal __tmp101 false
   377 control enabled projector1 true
 
   405 end
   406 label __label3
   407 op sub __tmp103 @tick __fn3_time
-    * op idiv __tmp104 __tmp103 60
-    * set __fn3_secs __tmp104
+  408 op idiv __fn3_secs __tmp103 60
   409 op greaterThan __tmp105 __fn3_secs 30
   410 sensor __tmp106 __fn3_reactor @enabled
   411 op equal __tmp107 __tmp106 false
 
   416 jump __label69 always
   417 label __label68
   418 label __label69
-    * op sub __tmp110 30 __fn3_secs
-    * set __fn3_time_left __tmp110
+  419 op sub __fn3_time_left 30 __fn3_secs
   420 op mul __tmp111 __fn3_time_left __fn3_time_left
   421 op mul __tmp112 __tmp111 25
-    * op floor __tmp113 __tmp112
-    * set __fn3_charge_req __tmp113
+  422 op floor __fn3_charge_req __tmp112
   423 set __fn3retval __fn3_charge_req
   424 jump __label67 always
   425 set __fn3retval null
 
   429 label __label4
   430 set RET_T_STARTUP __fn4_t_startup
   431 op sub __tmp114 @tick __fn4_t_startup
-    * op idiv __tmp115 __tmp114 60
-    * set __fn4_secs __tmp115
-    * sensor __tmp116 __fn4_reactor @blast-compound
-    * set __fn4_fuel __tmp116
+  432 op idiv __fn4_secs __tmp114 60
+  433 sensor __fn4_fuel __fn4_reactor @blast-compound
   434 set __fn4_supply_fuel true
-    * sensor __tmp117 CONTAINER @blast-compound
-    * set __fn4_fuel_stored __tmp117
-    * sensor __tmp118 __fn4_reactor @cryofluid
-    * set __fn4_cryo __tmp118
+  435 sensor __fn4_fuel_stored CONTAINER @blast-compound
+  436 sensor __fn4_cryo __fn4_reactor @cryofluid
   437 sensor __tmp119 NODE @powerNetStored
-    * op floor __tmp120 __tmp119
-    * set __fn4_charge __tmp120
+  438 op floor __fn4_charge __tmp119
   439 sensor __tmp121 NODE @powerNetIn
   440 sensor __tmp122 NODE @powerNetOut
   441 op sub __tmp123 __tmp121 __tmp122
-    * op floor __tmp124 __tmp123
-    * set __fn4_surplus __tmp124
+  442 op floor __fn4_surplus __tmp123
   443 op mul __tmp125 AVG_SURPLUS 0.8
   444 op mul __tmp126 __fn4_surplus 0.2
-    * op add __tmp127 __tmp125 __tmp126
-    * set AVG_SURPLUS __tmp127
-    * sensor __tmp128 __fn4_reactor @enabled
-    * set __fn4_enabled __tmp128
+  445 op add AVG_SURPLUS __tmp125 __tmp126
+  446 sensor __fn4_enabled __fn4_reactor @enabled
   447 print "#"
   448 print __fn4_reactor_num
   449 print " - "
 
   499 set __fn4_supply_fuel false
   500 jump __label87 always
   501 label __label86
-    * op sub __tmp149 30 __fn4_secs
-    * set __fn4_time_left __tmp149
+  502 op sub __fn4_time_left 30 __fn4_secs
   503 print "Starting "
   504 print __fn4_time_left
   505 print " secs, req "
 
   517 set __fn4_supply_fuel false
   518 jump __label89 always
   519 label __label88
-    * op idiv __tmp154 __fn4_secs 6
-    * set __fn4_mins __tmp154
-    * op div __tmp155 __fn4_mins 10
-    * set __fn4_mins __tmp155
+  520 op idiv __fn4_mins __fn4_secs 6
+  521 op div __fn4_mins __fn4_mins 10
   522 print "RUN "
   523 print __fn4_mins
   524 print " mins\n"
 
   533 op sub __tmp156 __fn4_charge START_POWER_REQ
   534 op sub __tmp157 __tmp156 PWR_ABORT
   535 op div __tmp158 __tmp157 PWR_REQ
-    * op mul __tmp159 __tmp158 PWR_RESERVE
-    * set __fn4_charge_units __tmp159
+  536 op mul __fn4_charge_units __tmp158 PWR_RESERVE
   537 op div __tmp160 __fn4_surplus FLOW_REQ
-    * op max __tmp161 -0.1 __tmp160
-    * set __fn4_flow_units __tmp161
+  538 op max __fn4_flow_units -0.1 __tmp160
   539 op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
-    * op add __tmp163 CRYO_REQ __tmp162
-    * set __fn4_cryo_req __tmp163
+  540 op add __fn4_cryo_req CRYO_REQ __tmp162
   541 op lessThan __tmp164 REACTORS_DESIRED __fn4_reactor_num
   542 jump __label90 equal __tmp164 false
   543 print "IDLE\n"
 
   549 jump __label92 equal __tmp167 false
   550 op mul __tmp169 __fn4_flow_units 1000
   551 op floor __tmp170 __tmp169
-    * op div __tmp171 __tmp170 10
-    * set __fn4_flow __tmp171
+  552 op div __fn4_flow __tmp170 10
   553 op mul __tmp172 __fn4_charge_units 1000
   554 op floor __tmp173 __tmp172
-    * op div __tmp174 __tmp173 10
-    * set __fn4_charge __tmp174
+  555 op div __fn4_charge __tmp173 10
   556 print "WAIT power. (%"
   557 print __fn4_charge
   558 print "J + %"
 
   586 jump __label101 always
   587 label __label100
   588 print "STARTUP\n"
-    * op add __tmp186 START_POWER_REQ PWR_REQ
-    * set START_POWER_REQ __tmp186
+  589 op add START_POWER_REQ START_POWER_REQ PWR_REQ
   590 control enabled __fn4_reactor true
   591 label __label101
   592 label __label99
 
   598 sensor __tmp187 __fn4_reactor @enabled
   599 op notEqual __tmp188 __fn4_enabled __tmp187
   600 jump __label102 equal __tmp188 false
-    * set __tmp190 @tick
-    * set RET_T_STARTUP __tmp190
+  601 set RET_T_STARTUP @tick
   602 jump __label103 always
   603 label __label102
   604 label __label103

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set REACTORS_DESIRED 5
    44 set AVG_SURPLUS 500
    45 label __label7
-    * jump __label9 equal true false
    46 set ULD_IN_1 unloader1
    47 set ULD_OUT_1 unloader2
    48 set ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor __tmp1 node1 @powerNetOut
    27 op sub __tmp2 __tmp0 __tmp1
    28 op floor surplus __tmp2
-    * op greaterThan __tmp4 surplus 10000
-    * jump __label5 equal __tmp4 false
+   29 jump __label5 lessThanEq surplus 10000
    30 op sub __tmp5 @tick 3600
    31 jump __label6 always
    32 label __label5
 
   216 label __label34
   217 jump __label32 always
   218 label __label31
-    * op equal __tmp52 __fn6_reactors_fueled false
-    * jump __label35 equal __tmp52 false
+  219 jump __label35 notEqual __fn6_reactors_fueled false
   220 set __fn6_limit FUEL_LIMIT_LOW
   221 print "Fuel "
   222 print __fn6_fuel_stored
 
   272 call __label0 __fn0retval
   273 gotolabel __label44 __fn0
   274 set charge __fn0retval
-    * op greaterThan __tmp67 START_POWER_REQ 0
-    * jump __label45 equal __tmp67 false
+  275 jump __label45 lessThanEq START_POWER_REQ 0
   276 set __fn0_val START_POWER_REQ
   277 setaddr __fn0retaddr __label47
   278 call __label0 __fn0retval
 
   301 op greaterThan __tmp76 AVG_SURPLUS __tmp75
   302 op land __tmp77 __tmp74 __tmp76
   303 jump __label50 equal __tmp77 false
-    * op greaterThan __tmp79 REACTORS_DESIRED 2
-    * jump __label52 equal __tmp79 false
+  304 jump __label52 lessThanEq REACTORS_DESIRED 2
   305 op sub REACTORS_DESIRED REACTORS_DESIRED 1
   306 op sub AVG_SURPLUS AVG_SURPLUS GENERATOR_OUTPUT
   307 jump __label53 always
 
   325 label __label55
   326 label __label49
   327 label __label46
-    * op notEqual __tmp93 REACTORS_DESIRED 5
-    * jump __label56 equal __tmp93 false
+  328 jump __label56 equal REACTORS_DESIRED 5
   329 print "Require only "
   330 print REACTORS_DESIRED
   331 print "/5 reactors.\n"
 
   353 set __tmp97 FUEL_OFF
   354 label __label61
   355 control config __fn1_uld_in __tmp97
-    * op equal __tmp98 __fn1_fuel false
-    * jump __label62 equal __tmp98 false
+  356 jump __label62 notEqual __fn1_fuel false
   357 set __tmp99 FUEL
   358 jump __label63 always
   359 label __label62
 
   365 end
   366 label __label2
   367 radar enemy any any health __fn2_unit 1 __fn2_enemy_found
-    * op notEqual __tmp101 __fn2_enemy_found null
-    * jump __label65 equal __tmp101 false
+  368 jump __label65 equal __fn2_enemy_found null
   369 control enabled projector1 true
   370 control enabled projector2 true
   371 control config ULD_IN_1 FUEL_OFF
 
   446 jump __label72 always
   447 label __label71
   448 jump __label73 equal __fn4_enabled false
-    * op lessThan __tmp131 REACTORS_DESIRED __fn4_reactor_num
-    * jump __label75 equal __tmp131 false
+  449 jump __label75 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
   450 control enabled __fn4_reactor false
   451 print "STOP unwanted\n"
   452 jump __label76 always
 
   460 print "STOP system fuel low\n"
   461 jump __label78 always
   462 label __label77
-    * op lessThanEq __tmp138 __fn4_fuel 1
-    * jump __label79 equal __tmp138 false
+  463 jump __label79 greaterThan __fn4_fuel 1
   464 control enabled __fn4_reactor false
   465 print "STOP fuel low\n"
   466 jump __label80 always
   467 label __label79
-    * op lessThanEq __tmp140 __fn4_cryo CRYO_ABORT
-    * jump __label81 equal __tmp140 false
+  468 jump __label81 greaterThan __fn4_cryo CRYO_ABORT
   469 control enabled __fn4_reactor false
   470 print "STOP out of cryo\n"
   471 jump __label82 always
   472 label __label81
-    * op lessThan __tmp142 __fn4_secs 30
-    * jump __label83 equal __tmp142 false
+  473 jump __label83 greaterThanEq __fn4_secs 30
   474 set __fn3_reactor __fn4_reactor
   475 set __fn3_time __fn4_t_startup
   476 setaddr __fn3retaddr __label85
 
   526 op max __fn4_flow_units -0.1 __tmp160
   527 op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
   528 op add __fn4_cryo_req CRYO_REQ __tmp162
-    * op lessThan __tmp164 REACTORS_DESIRED __fn4_reactor_num
-    * jump __label90 equal __tmp164 false
+  529 jump __label90 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
   530 print "IDLE\n"
   531 set __fn4_supply_fuel false
   532 jump __label91 always
   533 label __label90
   534 op add __tmp166 __fn4_flow_units __fn4_charge_units
-    * op lessThan __tmp167 __tmp166 1
-    * jump __label92 equal __tmp167 false
+  535 jump __label92 greaterThanEq __tmp166 1
   536 op mul __tmp169 __fn4_flow_units 1000
   537 op floor __tmp170 __tmp169
   538 op div __fn4_flow __tmp170 10
 
   551 op land __tmp176 __fn4_fuel_on __tmp175
   552 jump __label94 equal __tmp176 false
   553 op add __tmp178 __fn4_fuel __fn4_fuel_stored
-    * op greaterThan __tmp179 __tmp178 FUEL_REQ
-    * jump __label96 equal __tmp179 false
+  554 jump __label96 lessThanEq __tmp178 FUEL_REQ
   555 print "WAIT fuel\n"
   556 jump __label97 always
   557 label __label96
 
   560 jump __label95 always
   561 label __label94
   562 op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
-    * op lessThan __tmp182 __fn4_fuel_stored __tmp181
-    * jump __label98 equal __tmp182 false
+  563 jump __label98 greaterThanEq __fn4_fuel_stored __tmp181
   564 print "WAIT buffer fuel\n"
   565 jump __label99 always
   566 label __label98
-    * op lessThan __tmp184 __fn4_cryo __fn4_cryo_req
-    * jump __label100 equal __tmp184 false
+  567 jump __label100 greaterThanEq __fn4_cryo __fn4_cryo_req
   568 print "WAIT cryo\n"
   569 jump __label101 always
   570 label __label100
 
   579 label __label74
   580 label __label72
   581 sensor __tmp187 __fn4_reactor @enabled
-    * op notEqual __tmp188 __fn4_enabled __tmp187
-    * jump __label102 equal __tmp188 false
+  582 jump __label102 equal __fn4_enabled __tmp187
   583 set RET_T_STARTUP @tick
   584 jump __label103 always
   585 label __label102

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    67 print "\n"
    68 set __tmp8 true
    69 jump __label12 always
-    * jump __label14 always
    70 label __label13
    71 label __label14
    72 set __tmp8 false
 
   303 jump __label52 lessThanEq REACTORS_DESIRED 2
   304 op sub REACTORS_DESIRED REACTORS_DESIRED 1
   305 op sub AVG_SURPLUS AVG_SURPLUS GENERATOR_OUTPUT
-    * jump __label53 always
   306 label __label52
   307 label __label53
-    * jump __label51 always
   308 label __label50
   309 label __label51
   310 op lessThan __tmp83 __fn8_stored 0.8
 
   317 op max __fn8_needed 1 __tmp89
   318 op add __tmp91 __fn8_needed REACTORS_DESIRED
   319 op min REACTORS_DESIRED 5 __tmp91
-    * jump __label55 always
   320 label __label54
   321 label __label55
   322 label __label49
 
   325 print "Require only "
   326 print REACTORS_DESIRED
   327 print "/5 reactors.\n"
-    * jump __label57 always
   328 label __label56
   329 label __label57
   330 printflush message1
 
   400 jump __label68 equal __tmp108 false
   401 set __fn3retval 0
   402 jump __label67 always
-    * jump __label69 always
   403 label __label68
   404 label __label69
   405 op sub __fn3_time_left 30 __fn3_secs
 
   575 sensor __tmp187 __fn4_reactor @enabled
   576 jump __label102 equal __fn4_enabled __tmp187
   577 set RET_T_STARTUP @tick
-    * jump __label103 always
   578 label __label102
   579 label __label103
   580 set __fn4retval __fn4_supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   404 label __label69
   405 op sub __fn3_time_left 30 __fn3_secs
   406 op mul __tmp111 __fn3_time_left __fn3_time_left
-    * op mul __tmp112 __tmp111 25
-    * op floor __fn3_charge_req __tmp112
+  407 op idiv __fn3_charge_req __tmp111 0.04
   408 set __fn3retval __fn3_charge_req
   409 jump __label67 always
   410 set __fn3retval null
 
   526 label __label90
   527 op add __tmp166 __fn4_flow_units __fn4_charge_units
   528 jump __label92 greaterThanEq __tmp166 1
-    * op mul __tmp169 __fn4_flow_units 1000
-    * op floor __tmp170 __tmp169
+  529 op idiv __tmp170 __fn4_flow_units 0.001
   530 op div __fn4_flow __tmp170 10
-    * op mul __tmp172 __fn4_charge_units 1000
-    * op floor __tmp173 __tmp172
+  531 op idiv __tmp173 __fn4_charge_units 0.001
   532 op div __fn4_charge __tmp173 10
   533 print "WAIT power. (%"
   534 print __fn4_charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-3 instructions):
 
    33 set __tmp5 @tick
    34 label __label6
    35 set start_time __tmp5
-    * set t_startup1 start_time
-    * set t_startup2 start_time
-    * set t_startup3 start_time
-    * set t_startup4 start_time
-    * set t_startup5 start_time
-    * set RET_T_STARTUP t_startup1
+   36 set t_startup1 __tmp5
+   37 set t_startup2 __tmp5
+   38 set t_startup3 __tmp5
+   39 set t_startup4 __tmp5
+   40 set t_startup5 __tmp5
+   41 set RET_T_STARTUP start_time
    42 set REACTORS_DESIRED 5
    43 set AVG_SURPLUS 500
    44 label __label7
 
    52 set TOWER cyclone1
    53 set CONTAINER vault1
    54 set NODE node1
-    * set __fn2_unit TOWER
+   55 set __fn2_unit cyclone1
    56 setaddr __fn2retaddr __label10
    57 call __label2 __fn2retval
    58 gotolabel __label10 __fn2
 
    71 label __label14
    72 set __tmp8 false
    73 jump __label12 always
-    * set __tmp8 null
    74 label __label12
-    * op or emerg_shutdown emerg_shutdown __tmp8
+   75 op or emerg_shutdown __fn2retval __tmp8
    76 set __fn3_reactor reactor1
    77 set __fn3_time t_startup1
    78 setaddr __fn3retaddr __label15
 
    85 call __label3 __fn3retval
    86 gotolabel __label16 __fn3
    87 set __tmp16 __fn3retval
-    * op add START_POWER_REQ START_POWER_REQ __tmp16
+   88 op add START_POWER_REQ START_POWER_REQ __fn3retval
    89 set __fn3_reactor reactor3
    90 set __fn3_time t_startup3
    91 setaddr __fn3retaddr __label17
    92 call __label3 __fn3retval
    93 gotolabel __label17 __fn3
    94 set __tmp18 __fn3retval
-    * op add START_POWER_REQ START_POWER_REQ __tmp18
+   95 op add START_POWER_REQ START_POWER_REQ __fn3retval
    96 set __fn3_reactor reactor4
    97 set __fn3_time t_startup4
    98 setaddr __fn3retaddr __label18
    99 call __label3 __fn3retval
   100 gotolabel __label18 __fn3
   101 set __tmp20 __fn3retval
-    * op add START_POWER_REQ START_POWER_REQ __tmp20
+  102 op add START_POWER_REQ START_POWER_REQ __fn3retval
   103 set __fn3_reactor reactor5
   104 set __fn3_time t_startup5
   105 setaddr __fn3retaddr __label19
   106 call __label3 __fn3retval
   107 gotolabel __label19 __fn3
   108 set __tmp22 __fn3retval
-    * op add START_POWER_REQ START_POWER_REQ __tmp22
+  109 op add START_POWER_REQ START_POWER_REQ __fn3retval
   110 set __fn4_reactor reactor1
   111 set __fn4_reactor_num 1
   112 set __fn4_emerg_shutdown emerg_shutdown
 
   117 gotolabel __label20 __fn4
   118 set fuel_1 __fn4retval
   119 set t_startup1 RET_T_STARTUP
-    * set __fn1_fuel fuel_1
-    * set __fn1_uld_in ULD_IN_1
-    * set __fn1_uld_out ULD_OUT_1
+  120 set __fn1_fuel __fn4retval
+  121 set __fn1_uld_in unloader1
+  122 set __fn1_uld_out unloader2
   123 setaddr __fn1retaddr __label21
   124 call __label1 __fn1retval
   125 gotolabel __label21 __fn1
 
   133 gotolabel __label22 __fn4
   134 set fuel_2 __fn4retval
   135 set t_startup2 RET_T_STARTUP
-    * set __fn1_fuel fuel_2
-    * set __fn1_uld_in ULD_IN_2
-    * set __fn1_uld_out ULD_OUT_2
+  136 set __fn1_fuel __fn4retval
+  137 set __fn1_uld_in unloader3
+  138 set __fn1_uld_out unloader4
   139 setaddr __fn1retaddr __label23
   140 call __label1 __fn1retval
   141 gotolabel __label23 __fn1
-    * set __fn2_unit TOWER
+  142 set __fn2_unit cyclone1
   143 setaddr __fn2retaddr __label24
   144 call __label2 __fn2retval
   145 gotolabel __label24 __fn2
   146 set __tmp28 __fn2retval
-    * op or emerg_shutdown emerg_shutdown __tmp28
+  147 op or emerg_shutdown emerg_shutdown __fn2retval
   148 set __fn4_reactor reactor3
   149 set __fn4_reactor_num 3
   150 set __fn4_emerg_shutdown emerg_shutdown
 
   176 set fuel_5 __fn4retval
   177 set t_startup5 RET_T_STARTUP
   178 op or __tmp33 fuel_3 fuel_4
-    * op or fuel_many __tmp33 fuel_5
+  179 op or fuel_many __tmp33 __fn4retval
   180 set __fn1_fuel fuel_many
-    * set __fn1_uld_in ULD_IN_MANY
-    * set __fn1_uld_out ULD_OUT_MANY
+  181 set __fn1_uld_in unloader5
+  182 set __fn1_uld_out unloader6
   183 setaddr __fn1retaddr __label28
   184 call __label1 __fn1retval
   185 gotolabel __label28 __fn1
 
   188 label __label29
   189 set __fn6_reactors_fueled __tmp37
   190 set __fn6_emerg_shutdown emerg_shutdown
-    * sensor __tmp39 NODE @powerNetStored
+  191 sensor __tmp39 node1 @powerNetStored
   192 op floor __fn6_charge __tmp39
-    * sensor __tmp41 NODE @powerNetIn
-    * sensor __tmp42 NODE @powerNetOut
+  193 sensor __tmp41 node1 @powerNetIn
+  194 sensor __tmp42 node1 @powerNetOut
   195 op sub __tmp43 __tmp41 __tmp42
   196 op floor __fn6_surplus __tmp43
-    * sensor __fn6_fuel_stored CONTAINER @blast-compound
-    * op lessThan __tmp46 __fn6_charge PWR_ABORT
-    * op lessThan __tmp47 __fn6_surplus FLOW_ABORT
+  197 sensor __fn6_fuel_stored vault1 @blast-compound
+  198 op lessThan __tmp46 __fn6_charge 5000
+  199 op lessThan __tmp47 __fn6_surplus -500
   200 op land __tmp48 __tmp46 __tmp47
-    * op or __tmp49 __tmp48 __fn6_emerg_shutdown
+  201 op or __tmp49 __tmp48 emerg_shutdown
   202 jump __label31 equal __tmp49 false
   203 set __fn6_limit 0
   204 print "Central Fuel at "
   205 print __fn6_fuel_stored
   206 print " / "
-    * print __fn6_limit
+  207 print 0
   208 print " - "
-    * jump __label33 equal __fn6_emerg_shutdown false
+  209 jump __label33 equal emerg_shutdown false
   210 print " Enemies detected.\n"
   211 jump __label34 always
   212 label __label33
 
   214 label __label34
   215 jump __label32 always
   216 label __label31
-    * jump __label35 notEqual __fn6_reactors_fueled false
-    * set __fn6_limit FUEL_LIMIT_LOW
+  217 jump __label35 notEqual __tmp37 false
+  218 set __fn6_limit 150
   219 print "Fuel "
   220 print __fn6_fuel_stored
   221 print " / "
-    * print __fn6_limit
+  222 print FUEL_LIMIT_LOW
   223 print " (due to emergency)\n"
   224 jump __label36 always
   225 label __label35
-    * set __fn6_limit FUEL_LIMIT
+  226 set __fn6_limit 800
   227 print "Fuel "
   228 print __fn6_fuel_stored
   229 print " / "
-    * print __fn6_limit
+  230 print FUEL_LIMIT
   231 print "\n"
   232 label __label36
   233 label __label32
   234 op lessThan __tmp38 __fn6_fuel_stored __fn6_limit
   235 jump __label30 always
-    * set __tmp38 null
   236 label __label30
   237 set feed_mixers __tmp38
-    * jump __label37 equal feed_mixers false
-    * set __tmp55 MIXER_IN
+  238 jump __label37 equal __tmp38 false
+  239 set __tmp55 @pyratite
   240 jump __label38 always
   241 label __label37
-    * set __tmp55 FUEL_OFF
+  242 set __tmp55 @scrap
   243 label __label38
-    * control config ULD_MIXER __tmp55
+  244 control config unloader7 __tmp55
   245 label __label39
-    * sensor __tmp57 NODE @powerNetStored
-    * sensor __tmp58 NODE @powerNetCapacity
+  246 sensor __tmp57 node1 @powerNetStored
+  247 sensor __tmp58 node1 @powerNetCapacity
   248 op div __fn7_stored_pc __tmp57 __tmp58
   249 op greaterThan __tmp60 __fn7_stored_pc 0.9
   250 op lessThan __tmp61 START_POWER_REQ 10
 
   264 call __label0 __fn0retval
   265 gotolabel __label43 __fn0
   266 set surplus __fn0retval
-    * sensor __fn0_val NODE @powerNetStored
+  267 sensor __fn0_val node1 @powerNetStored
   268 setaddr __fn0retaddr __label44
   269 call __label0 __fn0retval
   270 gotolabel __label44 __fn0
 
   276 gotolabel __label47 __fn0
   277 set req __fn0retval
   278 print "Req "
-    * print req
+  279 print __fn0retval
   280 print "kJ / "
   281 print charge
   282 print "kJ. "
 
   287 print "Power "
   288 print surplus
   289 print "kW, "
-    * print charge
+  290 print __fn0retval
   291 print "kJ\n"
   292 label __label48
-    * sensor __tmp71 NODE @powerNetStored
-    * sensor __tmp72 NODE @powerNetCapacity
+  293 sensor __tmp71 node1 @powerNetStored
+  294 sensor __tmp72 node1 @powerNetCapacity
   295 op div __fn8_stored __tmp71 __tmp72
   296 op greaterThan __tmp74 __fn8_stored 0.98
-    * op add __tmp75 GENERATOR_OUTPUT GOAL_BUFFER
-    * op greaterThan __tmp76 AVG_SURPLUS __tmp75
+  297 op add __tmp75 6500 10000
+  298 op greaterThan __tmp76 AVG_SURPLUS 16500
   299 op land __tmp77 __tmp74 __tmp76
   300 jump __label50 equal __tmp77 false
   301 jump __label52 lessThanEq REACTORS_DESIRED 2
   302 op sub REACTORS_DESIRED REACTORS_DESIRED 1
-    * op sub AVG_SURPLUS AVG_SURPLUS GENERATOR_OUTPUT
+  303 op sub AVG_SURPLUS AVG_SURPLUS 6500
   304 label __label52
   305 label __label53
   306 label __label50
   307 label __label51
   308 op lessThan __tmp83 __fn8_stored 0.8
-    * op mul __tmp84 GOAL_BUFFER 0.8
-    * op lessThan __tmp85 AVG_SURPLUS __tmp84
+  309 op mul __tmp84 10000 0.8
+  310 op lessThan __tmp85 AVG_SURPLUS 8000
   311 op land __tmp86 __tmp83 __tmp85
   312 jump __label54 equal __tmp86 false
-    * op sub __tmp88 AVG_SURPLUS GOAL_BUFFER
-    * op idiv __tmp89 __tmp88 GENERATOR_OUTPUT
+  313 op sub __tmp88 AVG_SURPLUS 10000
+  314 op idiv __tmp89 __tmp88 6500
   315 op max __fn8_needed 1 __tmp89
   316 op add __tmp91 __fn8_needed REACTORS_DESIRED
   317 op min REACTORS_DESIRED 5 __tmp91
 
   382 control enabled projector2 false
   383 set __fn2retval false
   384 jump __label64 always
-    * set __tmp102 null
   385 label __label66
-    * set __fn2retval __tmp102
+  386 set __fn2retval null
   387 label __label64
   388 goto __fn2retaddr __fn2
   389 end
 
   467 call __label3 __fn3retval
   468 gotolabel __label85 __fn3
   469 set __fn4_charge_req __fn3retval
-    * op sub __tmp144 __fn4_charge __fn4_charge_req
+  470 op sub __tmp144 __fn4_charge __fn3retval
   471 op lessThan __tmp145 __tmp144 PWR_ABORT
   472 op lessThan __tmp146 __fn4_surplus FLOW_ABORT
   473 op land __tmp147 __tmp145 __tmp146
 
   481 print "Starting "
   482 print __fn4_time_left
   483 print " secs, req "
-    * print __fn4_charge_req
+  484 print __fn3retval
   485 print "J\n"
   486 label __label87
   487 jump __label84 always

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-18 instructions):
     0 printflush message1
     1 set FUEL @blast-compound
     2 set FUEL_OFF @scrap
-    * set MIXER_IN @pyratite
     3 set PWR_REQ 23000
     4 set FLOW_REQ 2000
     5 set PWR_ABANDON 2000
 
    11 set FUEL_LIMIT_LOW 150
    12 set FUEL_LIMIT 800
    13 set FUEL_TOT_ABORT 15
-    * set GENERATOR_OUTPUT 6500
-    * set GOAL_BUFFER 10000
    14 set CRYO_REQ 3
    15 set CRYO_REQ_EA 2
    16 set CRYO_ABORT 1
 
    35 set t_startup3 __tmp5
    36 set t_startup4 __tmp5
    37 set t_startup5 __tmp5
-    * set RET_T_STARTUP start_time
+   38 set RET_T_STARTUP __tmp5
    39 set REACTORS_DESIRED 5
    40 set AVG_SURPLUS 500
    41 label __label7
 
    46 set ULD_IN_MANY unloader5
    47 set ULD_OUT_MANY unloader6
    48 set ULD_MIXER unloader7
-    * set TOWER cyclone1
    49 set CONTAINER vault1
    50 set NODE node1
    51 set __fn2_unit cyclone1
    52 setaddr __fn2retaddr __label10
    53 call __label2 __fn2retval
    54 gotolabel __label10 __fn2
-    * set emerg_shutdown __fn2retval
    55 label __label11
    56 op notEqual __tmp9 switch1 null
    57 sensor __tmp10 switch1 @enabled
 
    79 setaddr __fn3retaddr __label16
    80 call __label3 __fn3retval
    81 gotolabel __label16 __fn3
-    * set __tmp16 __fn3retval
    82 op add START_POWER_REQ START_POWER_REQ __fn3retval
    83 set __fn3_reactor reactor3
    84 set __fn3_time t_startup3
    85 setaddr __fn3retaddr __label17
    86 call __label3 __fn3retval
    87 gotolabel __label17 __fn3
-    * set __tmp18 __fn3retval
    88 op add START_POWER_REQ START_POWER_REQ __fn3retval
    89 set __fn3_reactor reactor4
    90 set __fn3_time t_startup4
    91 setaddr __fn3retaddr __label18
    92 call __label3 __fn3retval
    93 gotolabel __label18 __fn3
-    * set __tmp20 __fn3retval
    94 op add START_POWER_REQ START_POWER_REQ __fn3retval
    95 set __fn3_reactor reactor5
    96 set __fn3_time t_startup5
    97 setaddr __fn3retaddr __label19
    98 call __label3 __fn3retval
    99 gotolabel __label19 __fn3
-    * set __tmp22 __fn3retval
   100 op add START_POWER_REQ START_POWER_REQ __fn3retval
   101 set __fn4_reactor reactor1
   102 set __fn4_reactor_num 1
 
   134 setaddr __fn2retaddr __label24
   135 call __label2 __fn2retval
   136 gotolabel __label24 __fn2
-    * set __tmp28 __fn2retval
   137 op or emerg_shutdown emerg_shutdown __fn2retval
   138 set __fn4_reactor reactor3
   139 set __fn4_reactor_num 3
 
   176 op or __tmp36 fuel_1 fuel_2
   177 op or __tmp37 __tmp36 fuel_many
   178 label __label29
-    * set __fn6_reactors_fueled __tmp37
-    * set __fn6_emerg_shutdown emerg_shutdown
   179 sensor __tmp39 node1 @powerNetStored
   180 op floor __fn6_charge __tmp39
   181 sensor __tmp41 node1 @powerNetIn
 
   207 print "Fuel "
   208 print __fn6_fuel_stored
   209 print " / "
-    * print FUEL_LIMIT_LOW
+  210 print 150
   211 print " (due to emergency)\n"
   212 jump __label36 always
   213 label __label35
 
   215 print "Fuel "
   216 print __fn6_fuel_stored
   217 print " / "
-    * print FUEL_LIMIT
+  218 print 800
   219 print "\n"
   220 label __label36
   221 label __label32
   222 op lessThan __tmp38 __fn6_fuel_stored __fn6_limit
   223 jump __label30 always
   224 label __label30
-    * set feed_mixers __tmp38
   225 jump __label37 equal __tmp38 false
   226 set __tmp55 @pyratite
   227 jump __label38 always
 
   261 setaddr __fn0retaddr __label47
   262 call __label0 __fn0retval
   263 gotolabel __label47 __fn0
-    * set req __fn0retval
   264 print "Req "
   265 print __fn0retval
   266 print "kJ / "
 
   280 sensor __tmp72 node1 @powerNetCapacity
   281 op div __fn8_stored __tmp71 __tmp72
   282 op greaterThan __tmp74 __fn8_stored 0.98
-    * op add __tmp75 6500 10000
   283 op greaterThan __tmp76 AVG_SURPLUS 16500
   284 op land __tmp77 __tmp74 __tmp76
   285 jump __label50 equal __tmp77 false
 
   291 label __label50
   292 label __label51
   293 op lessThan __tmp83 __fn8_stored 0.8
-    * op mul __tmp84 10000 0.8
   294 op lessThan __tmp85 AVG_SURPLUS 8000
   295 op land __tmp86 __tmp83 __tmp85
   296 jump __label54 equal __tmp86 false
 
   359 control enabled reactor5 false
   360 set __fn2retval true
   361 jump __label64 always
-    * set __tmp102 null
   362 jump __label66 always
   363 label __label65
   364 control enabled projector1 false
 
   449 setaddr __fn3retaddr __label85
   450 call __label3 __fn3retval
   451 gotolabel __label85 __fn3
-    * set __fn4_charge_req __fn3retval
   452 op sub __tmp144 __fn4_charge __fn3retval
   453 op lessThan __tmp145 __tmp144 PWR_ABORT
   454 op lessThan __tmp146 __fn4_surplus FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set FLOW_ABORT -500
     9 set FUEL_REQ 10
    10 set FUEL_TOT_REQ 45
-    * set FUEL_LIMIT_LOW 150
-    * set FUEL_LIMIT 800
    11 set FUEL_TOT_ABORT 15
    12 set CRYO_REQ 3
    13 set CRYO_REQ_EA 2
 
    27 label __label5
    28 set __tmp5 @tick
    29 label __label6
-    * set start_time __tmp5
    30 set t_startup1 __tmp5
    31 set t_startup2 __tmp5
    32 set t_startup3 __tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   220 jump __label30 always
   221 label __label30
   222 jump __label37 equal __tmp38 false
-    * set __tmp55 @pyratite
+  223 control config unloader7 @pyratite
   224 jump __label38 always
   225 label __label37
-    * set __tmp55 @scrap
+  226 control config unloader7 @scrap
   227 label __label38
-    * control config unloader7 __tmp55
   228 label __label39
   229 sensor __tmp57 node1 @powerNetStored
   230 sensor __tmp58 node1 @powerNetCapacity
 
   320 end
   321 label __label1
   322 jump __label60 equal __fn1_fuel false
-    * set __tmp97 FUEL
+  323 control config __fn1_uld_in FUEL
   324 jump __label61 always
   325 label __label60
-    * set __tmp97 FUEL_OFF
+  326 control config __fn1_uld_in FUEL_OFF
   327 label __label61
-    * control config __fn1_uld_in __tmp97
   328 jump __label62 notEqual __fn1_fuel false
-    * set __tmp99 FUEL
+  329 control config __fn1_uld_out FUEL
   330 jump __label63 always
   331 label __label62
-    * set __tmp99 FUEL_OFF
+  332 control config __fn1_uld_out FUEL_OFF
   333 label __label63
-    * control config __fn1_uld_out __tmp99
   334 label __label59
   335 goto __fn1retaddr __fn1
   336 end

Modifications by Function Inlining: inline function kilo:
 
   243 label __label42
   244 label __label40
   245 set __fn0_val AVG_SURPLUS
-    * setaddr __fn0retaddr __label43
-    * call __label0 __fn0retval
-    * gotolabel __label43 __fn0
+  246 label __label104
+  247 op idiv __tmp95 __fn0_val 100
+  248 op div __fn0retval __tmp95 10
+  249 jump __label105 always
+  250 set __fn0retval null
+  251 label __label105
   252 set surplus __fn0retval
   253 sensor __fn0_val node1 @powerNetStored
-    * setaddr __fn0retaddr __label44
-    * call __label0 __fn0retval
-    * gotolabel __label44 __fn0
+  254 label __label106
+  255 op idiv __tmp95 __fn0_val 100
+  256 op div __fn0retval __tmp95 10
+  257 jump __label107 always
+  258 set __fn0retval null
+  259 label __label107
   260 set charge __fn0retval
   261 jump __label45 lessThanEq START_POWER_REQ 0
   262 set __fn0_val START_POWER_REQ
-    * setaddr __fn0retaddr __label47
-    * call __label0 __fn0retval
-    * gotolabel __label47 __fn0
+  263 label __label108
+  264 op idiv __tmp95 __fn0_val 100
+  265 op div __fn0retval __tmp95 10
+  266 jump __label109 always
+  267 set __fn0retval null
+  268 label __label109
   269 print "Req "
   270 print __fn0retval
   271 print "kJ / "
 
   319 jump __label7 always
   320 label __label9
   321 end
-    * label __label0
-    * op idiv __tmp95 __fn0_val 100
-    * op div __fn0retval __tmp95 10
-    * jump __label58 always
-    * set __fn0retval null
-    * label __label58
-    * goto __fn0retaddr __fn0
-    * end
   322 label __label1
   323 jump __label60 equal __fn1_fuel false
   324 control config __fn1_uld_in FUEL

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-3 instructions):
 
   244 label __label40
   245 set __fn0_val AVG_SURPLUS
   246 label __label104
-    * op idiv __tmp95 __fn0_val 100
+  247 op idiv __tmp95 AVG_SURPLUS 100
   248 op div __fn0retval __tmp95 10
   249 jump __label105 always
-    * set __fn0retval null
   250 label __label105
   251 set surplus __fn0retval
   252 sensor __fn0_val node1 @powerNetStored
 
   254 op idiv __tmp95 __fn0_val 100
   255 op div __fn0retval __tmp95 10
   256 jump __label107 always
-    * set __fn0retval null
   257 label __label107
   258 set charge __fn0retval
   259 jump __label45 lessThanEq START_POWER_REQ 0
   260 set __fn0_val START_POWER_REQ
   261 label __label108
-    * op idiv __tmp95 __fn0_val 100
+  262 op idiv __tmp95 START_POWER_REQ 100
   263 op div __fn0retval __tmp95 10
   264 jump __label109 always
-    * set __fn0retval null
   265 label __label109
   266 print "Req "
   267 print __fn0retval

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   242 control enabled generator2 true
   243 label __label42
   244 label __label40
-    * set __fn0_val AVG_SURPLUS
   245 label __label104
   246 op idiv __tmp95 AVG_SURPLUS 100
   247 op div __fn0retval __tmp95 10
 
   256 label __label107
   257 set charge __fn0retval
   258 jump __label45 lessThanEq START_POWER_REQ 0
-    * set __fn0_val START_POWER_REQ
   259 label __label108
   260 op idiv __tmp95 START_POWER_REQ 100
   261 op div __fn0retval __tmp95 10

Modifications by Function Inlining: inline function update_fuel (+8 instructions):
 
   108 set __fn1_fuel __fn4retval
   109 set __fn1_uld_in unloader1
   110 set __fn1_uld_out unloader2
-    * setaddr __fn1retaddr __label21
-    * call __label1 __fn1retval
-    * gotolabel __label21 __fn1
+  111 label __label110
+  112 jump __label111 equal __fn1_fuel false
+  113 control config __fn1_uld_in FUEL
+  114 jump __label112 always
+  115 label __label111
+  116 control config __fn1_uld_in FUEL_OFF
+  117 label __label112
+  118 jump __label113 notEqual __fn1_fuel false
+  119 control config __fn1_uld_out FUEL
+  120 jump __label114 always
+  121 label __label113
+  122 control config __fn1_uld_out FUEL_OFF
+  123 label __label114
+  124 label __label115
   125 set __fn4_reactor reactor2
   126 set __fn4_reactor_num 2
   127 set __fn4_emerg_shutdown emerg_shutdown
 
   135 set __fn1_fuel __fn4retval
   136 set __fn1_uld_in unloader3
   137 set __fn1_uld_out unloader4
-    * setaddr __fn1retaddr __label23
-    * call __label1 __fn1retval
-    * gotolabel __label23 __fn1
+  138 label __label116
+  139 jump __label117 equal __fn1_fuel false
+  140 control config __fn1_uld_in FUEL
+  141 jump __label118 always
+  142 label __label117
+  143 control config __fn1_uld_in FUEL_OFF
+  144 label __label118
+  145 jump __label119 notEqual __fn1_fuel false
+  146 control config __fn1_uld_out FUEL
+  147 jump __label120 always
+  148 label __label119
+  149 control config __fn1_uld_out FUEL_OFF
+  150 label __label120
+  151 label __label121
   152 set __fn2_unit cyclone1
   153 setaddr __fn2retaddr __label24
   154 call __label2 __fn2retval
 
   189 set __fn1_fuel fuel_many
   190 set __fn1_uld_in unloader5
   191 set __fn1_uld_out unloader6
-    * setaddr __fn1retaddr __label28
-    * call __label1 __fn1retval
-    * gotolabel __label28 __fn1
+  192 label __label122
+  193 jump __label123 equal __fn1_fuel false
+  194 control config __fn1_uld_in FUEL
+  195 jump __label124 always
+  196 label __label123
+  197 control config __fn1_uld_in FUEL_OFF
+  198 label __label124
+  199 jump __label125 notEqual __fn1_fuel false
+  200 control config __fn1_uld_out FUEL
+  201 jump __label126 always
+  202 label __label125
+  203 control config __fn1_uld_out FUEL_OFF
+  204 label __label126
+  205 label __label127
   206 op or __tmp36 fuel_1 fuel_2
   207 op or __tmp37 __tmp36 fuel_many
   208 label __label29
 
   347 jump __label7 always
   348 label __label9
   349 end
-    * label __label1
-    * jump __label60 equal __fn1_fuel false
-    * control config __fn1_uld_in FUEL
-    * jump __label61 always
-    * label __label60
-    * control config __fn1_uld_in FUEL_OFF
-    * label __label61
-    * jump __label62 notEqual __fn1_fuel false
-    * control config __fn1_uld_out FUEL
-    * jump __label63 always
-    * label __label62
-    * control config __fn1_uld_out FUEL_OFF
-    * label __label63
-    * label __label59
-    * goto __fn1retaddr __fn1
-    * end
   350 label __label2
   351 radar enemy any any health __fn2_unit 1 __fn2_enemy_found
   352 jump __label65 equal __fn2_enemy_found null

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   109 set __fn1_uld_in unloader1
   110 set __fn1_uld_out unloader2
   111 label __label110
-    * jump __label111 equal __fn1_fuel false
-    * control config __fn1_uld_in FUEL
+  112 jump __label111 equal __fn4retval false
+  113 control config unloader1 @blast-compound
   114 jump __label112 always
   115 label __label111
-    * control config __fn1_uld_in FUEL_OFF
+  116 control config unloader1 @scrap
   117 label __label112
-    * jump __label113 notEqual __fn1_fuel false
-    * control config __fn1_uld_out FUEL
+  118 jump __label113 notEqual __fn4retval false
+  119 control config unloader2 @blast-compound
   120 jump __label114 always
   121 label __label113
-    * control config __fn1_uld_out FUEL_OFF
+  122 control config unloader2 @scrap
   123 label __label114
   124 label __label115
   125 set __fn4_reactor reactor2
 
   136 set __fn1_uld_in unloader3
   137 set __fn1_uld_out unloader4
   138 label __label116
-    * jump __label117 equal __fn1_fuel false
-    * control config __fn1_uld_in FUEL
+  139 jump __label117 equal __fn4retval false
+  140 control config unloader3 @blast-compound
   141 jump __label118 always
   142 label __label117
-    * control config __fn1_uld_in FUEL_OFF
+  143 control config unloader3 @scrap
   144 label __label118
-    * jump __label119 notEqual __fn1_fuel false
-    * control config __fn1_uld_out FUEL
+  145 jump __label119 notEqual __fn4retval false
+  146 control config unloader4 @blast-compound
   147 jump __label120 always
   148 label __label119
-    * control config __fn1_uld_out FUEL_OFF
+  149 control config unloader4 @scrap
   150 label __label120
   151 label __label121
   152 set __fn2_unit cyclone1
 
   190 set __fn1_uld_in unloader5
   191 set __fn1_uld_out unloader6
   192 label __label122
-    * jump __label123 equal __fn1_fuel false
-    * control config __fn1_uld_in FUEL
+  193 jump __label123 equal fuel_many false
+  194 control config unloader5 @blast-compound
   195 jump __label124 always
   196 label __label123
-    * control config __fn1_uld_in FUEL_OFF
+  197 control config unloader5 @scrap
   198 label __label124
-    * jump __label125 notEqual __fn1_fuel false
-    * control config __fn1_uld_out FUEL
+  199 jump __label125 notEqual fuel_many false
+  200 control config unloader6 @blast-compound
   201 jump __label126 always
   202 label __label125
-    * control config __fn1_uld_out FUEL_OFF
+  203 control config unloader6 @scrap
   204 label __label126
   205 label __label127
   206 op or __tmp36 fuel_1 fuel_2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   105 gotolabel __label20 __fn4
   106 set fuel_1 __fn4retval
   107 set t_startup1 RET_T_STARTUP
-    * set __fn1_fuel __fn4retval
-    * set __fn1_uld_in unloader1
-    * set __fn1_uld_out unloader2
   108 label __label110
   109 jump __label111 equal __fn4retval false
   110 control config unloader1 @blast-compound
 
   129 gotolabel __label22 __fn4
   130 set fuel_2 __fn4retval
   131 set t_startup2 RET_T_STARTUP
-    * set __fn1_fuel __fn4retval
-    * set __fn1_uld_in unloader3
-    * set __fn1_uld_out unloader4
   132 label __label116
   133 jump __label117 equal __fn4retval false
   134 control config unloader3 @blast-compound
 
   180 set t_startup5 RET_T_STARTUP
   181 op or __tmp33 fuel_3 fuel_4
   182 op or fuel_many __tmp33 __fn4retval
-    * set __fn1_fuel fuel_many
-    * set __fn1_uld_in unloader5
-    * set __fn1_uld_out unloader6
   183 label __label122
   184 jump __label123 equal fuel_many false
   185 control config unloader5 @blast-compound

Modifications by Function Inlining: inline function check_radar (+18 instructions):
 
    46 set CONTAINER vault1
    47 set NODE node1
    48 set __fn2_unit cyclone1
-    * setaddr __fn2retaddr __label10
-    * call __label2 __fn2retval
-    * gotolabel __label10 __fn2
+   49 label __label128
+   50 radar enemy any any health __fn2_unit 1 __fn2_enemy_found
+   51 jump __label129 equal __fn2_enemy_found null
+   52 control enabled projector1 true
+   53 control enabled projector2 true
+   54 control config ULD_IN_1 FUEL_OFF
+   55 control config ULD_OUT_1 FUEL
+   56 control config ULD_IN_2 FUEL_OFF
+   57 control config ULD_OUT_2 FUEL
+   58 control config ULD_IN_MANY FUEL_OFF
+   59 control config ULD_OUT_MANY FUEL
+   60 control config ULD_MIXER FUEL_OFF
+   61 control enabled reactor1 false
+   62 control enabled reactor2 false
+   63 control enabled reactor3 false
+   64 control enabled reactor4 false
+   65 control enabled reactor5 false
+   66 set __fn2retval true
+   67 jump __label131 always
+   68 jump __label130 always
+   69 label __label129
+   70 control enabled projector1 false
+   71 control enabled projector2 false
+   72 set __fn2retval false
+   73 jump __label131 always
+   74 label __label130
+   75 set __fn2retval null
+   76 label __label131
    77 label __label11
    78 op notEqual __tmp9 switch1 null
    79 sensor __tmp10 switch1 @enabled
 
   169 label __label120
   170 label __label121
   171 set __fn2_unit cyclone1
-    * setaddr __fn2retaddr __label24
-    * call __label2 __fn2retval
-    * gotolabel __label24 __fn2
+  172 label __label132
+  173 radar enemy any any health __fn2_unit 1 __fn2_enemy_found
+  174 jump __label133 equal __fn2_enemy_found null
+  175 control enabled projector1 true
+  176 control enabled projector2 true
+  177 control config ULD_IN_1 FUEL_OFF
+  178 control config ULD_OUT_1 FUEL
+  179 control config ULD_IN_2 FUEL_OFF
+  180 control config ULD_OUT_2 FUEL
+  181 control config ULD_IN_MANY FUEL_OFF
+  182 control config ULD_OUT_MANY FUEL
+  183 control config ULD_MIXER FUEL_OFF
+  184 control enabled reactor1 false
+  185 control enabled reactor2 false
+  186 control enabled reactor3 false
+  187 control enabled reactor4 false
+  188 control enabled reactor5 false
+  189 set __fn2retval true
+  190 jump __label135 always
+  191 jump __label134 always
+  192 label __label133
+  193 control enabled projector1 false
+  194 control enabled projector2 false
+  195 set __fn2retval false
+  196 jump __label135 always
+  197 label __label134
+  198 set __fn2retval null
+  199 label __label135
   200 op or emerg_shutdown emerg_shutdown __fn2retval
   201 set __fn4_reactor reactor3
   202 set __fn4_reactor_num 3
 
   388 jump __label7 always
   389 label __label9
   390 end
-    * label __label2
-    * radar enemy any any health __fn2_unit 1 __fn2_enemy_found
-    * jump __label65 equal __fn2_enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config ULD_IN_1 FUEL_OFF
-    * control config ULD_OUT_1 FUEL
-    * control config ULD_IN_2 FUEL_OFF
-    * control config ULD_OUT_2 FUEL
-    * control config ULD_IN_MANY FUEL_OFF
-    * control config ULD_OUT_MANY FUEL
-    * control config ULD_MIXER FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set __fn2retval true
-    * jump __label64 always
-    * jump __label66 always
-    * label __label65
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set __fn2retval false
-    * jump __label64 always
-    * label __label66
-    * set __fn2retval null
-    * label __label64
-    * goto __fn2retaddr __fn2
-    * end
   391 label __label3
   392 op sub __tmp103 @tick __fn3_time
   393 op idiv __fn3_secs __tmp103 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-2 instructions):
 
    47 set NODE node1
    48 set __fn2_unit cyclone1
    49 label __label128
-    * radar enemy any any health __fn2_unit 1 __fn2_enemy_found
+   50 radar enemy any any health cyclone1 1 __fn2_enemy_found
    51 jump __label129 equal __fn2_enemy_found null
    52 control enabled projector1 true
    53 control enabled projector2 true
-    * control config ULD_IN_1 FUEL_OFF
-    * control config ULD_OUT_1 FUEL
-    * control config ULD_IN_2 FUEL_OFF
-    * control config ULD_OUT_2 FUEL
-    * control config ULD_IN_MANY FUEL_OFF
-    * control config ULD_OUT_MANY FUEL
-    * control config ULD_MIXER FUEL_OFF
+   54 control config unloader1 @scrap
+   55 control config unloader2 @blast-compound
+   56 control config unloader3 @scrap
+   57 control config unloader4 @blast-compound
+   58 control config unloader5 @scrap
+   59 control config unloader6 @blast-compound
+   60 control config unloader7 @scrap
    61 control enabled reactor1 false
    62 control enabled reactor2 false
    63 control enabled reactor3 false
 
    72 set __fn2retval false
    73 jump __label131 always
    74 label __label130
-    * set __fn2retval null
    75 label __label131
    76 label __label11
    77 op notEqual __tmp9 switch1 null
 
   169 label __label121
   170 set __fn2_unit cyclone1
   171 label __label132
-    * radar enemy any any health __fn2_unit 1 __fn2_enemy_found
+  172 radar enemy any any health cyclone1 1 __fn2_enemy_found
   173 jump __label133 equal __fn2_enemy_found null
   174 control enabled projector1 true
   175 control enabled projector2 true
-    * control config ULD_IN_1 FUEL_OFF
-    * control config ULD_OUT_1 FUEL
-    * control config ULD_IN_2 FUEL_OFF
-    * control config ULD_OUT_2 FUEL
-    * control config ULD_IN_MANY FUEL_OFF
-    * control config ULD_OUT_MANY FUEL
-    * control config ULD_MIXER FUEL_OFF
+  176 control config unloader1 @scrap
+  177 control config unloader2 @blast-compound
+  178 control config unloader3 @scrap
+  179 control config unloader4 @blast-compound
+  180 control config unloader5 @scrap
+  181 control config unloader6 @blast-compound
+  182 control config unloader7 @scrap
   183 control enabled reactor1 false
   184 control enabled reactor2 false
   185 control enabled reactor3 false
 
   194 set __fn2retval false
   195 jump __label135 always
   196 label __label134
-    * set __fn2retval null
   197 label __label135
   198 op or emerg_shutdown emerg_shutdown __fn2retval
   199 set __fn4_reactor reactor3

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set FUEL @blast-compound
-    * set FUEL_OFF @scrap
     1 set PWR_REQ 23000
     2 set FLOW_REQ 2000
     3 set PWR_ABANDON 2000
 
    34 set REACTORS_DESIRED 5
    35 set AVG_SURPLUS 500
    36 label __label7
-    * set ULD_IN_1 unloader1
-    * set ULD_OUT_1 unloader2
-    * set ULD_IN_2 unloader3
-    * set ULD_OUT_2 unloader4
-    * set ULD_IN_MANY unloader5
-    * set ULD_OUT_MANY unloader6
-    * set ULD_MIXER unloader7
    37 set CONTAINER vault1
    38 set NODE node1
-    * set __fn2_unit cyclone1
    39 label __label128
    40 radar enemy any any health cyclone1 1 __fn2_enemy_found
    41 jump __label129 equal __fn2_enemy_found null
 
   157 control config unloader4 @scrap
   158 label __label120
   159 label __label121
-    * set __fn2_unit cyclone1
   160 label __label132
   161 radar enemy any any health cyclone1 1 __fn2_enemy_found
   162 jump __label133 equal __fn2_enemy_found null

Modifications by Function Inlining: inline function calc_charge_req (+61 instructions):
 
    81 op or emerg_shutdown __fn2retval __tmp8
    82 set __fn3_reactor reactor1
    83 set __fn3_time t_startup1
-    * setaddr __fn3retaddr __label15
-    * call __label3 __fn3retval
-    * gotolabel __label15 __fn3
+   84 label __label136
+   85 op sub __tmp103 @tick __fn3_time
+   86 op idiv __fn3_secs __tmp103 60
+   87 op greaterThan __tmp105 __fn3_secs 30
+   88 sensor __tmp106 __fn3_reactor @enabled
+   89 op equal __tmp107 __tmp106 false
+   90 op or __tmp108 __tmp105 __tmp107
+   91 jump __label137 equal __tmp108 false
+   92 set __fn3retval 0
+   93 jump __label139 always
+   94 label __label137
+   95 label __label138
+   96 op sub __fn3_time_left 30 __fn3_secs
+   97 op mul __tmp111 __fn3_time_left __fn3_time_left
+   98 op idiv __fn3_charge_req __tmp111 0.04
+   99 set __fn3retval __fn3_charge_req
+  100 jump __label139 always
+  101 set __fn3retval null
+  102 label __label139
   103 set START_POWER_REQ __fn3retval
   104 set __fn3_reactor reactor2
   105 set __fn3_time t_startup2
-    * setaddr __fn3retaddr __label16
-    * call __label3 __fn3retval
-    * gotolabel __label16 __fn3
+  106 label __label140
+  107 op sub __tmp103 @tick __fn3_time
+  108 op idiv __fn3_secs __tmp103 60
+  109 op greaterThan __tmp105 __fn3_secs 30
+  110 sensor __tmp106 __fn3_reactor @enabled
+  111 op equal __tmp107 __tmp106 false
+  112 op or __tmp108 __tmp105 __tmp107
+  113 jump __label141 equal __tmp108 false
+  114 set __fn3retval 0
+  115 jump __label143 always
+  116 label __label141
+  117 label __label142
+  118 op sub __fn3_time_left 30 __fn3_secs
+  119 op mul __tmp111 __fn3_time_left __fn3_time_left
+  120 op idiv __fn3_charge_req __tmp111 0.04
+  121 set __fn3retval __fn3_charge_req
+  122 jump __label143 always
+  123 set __fn3retval null
+  124 label __label143
   125 op add START_POWER_REQ START_POWER_REQ __fn3retval
   126 set __fn3_reactor reactor3
   127 set __fn3_time t_startup3
-    * setaddr __fn3retaddr __label17
-    * call __label3 __fn3retval
-    * gotolabel __label17 __fn3
+  128 label __label144
+  129 op sub __tmp103 @tick __fn3_time
+  130 op idiv __fn3_secs __tmp103 60
+  131 op greaterThan __tmp105 __fn3_secs 30
+  132 sensor __tmp106 __fn3_reactor @enabled
+  133 op equal __tmp107 __tmp106 false
+  134 op or __tmp108 __tmp105 __tmp107
+  135 jump __label145 equal __tmp108 false
+  136 set __fn3retval 0
+  137 jump __label147 always
+  138 label __label145
+  139 label __label146
+  140 op sub __fn3_time_left 30 __fn3_secs
+  141 op mul __tmp111 __fn3_time_left __fn3_time_left
+  142 op idiv __fn3_charge_req __tmp111 0.04
+  143 set __fn3retval __fn3_charge_req
+  144 jump __label147 always
+  145 set __fn3retval null
+  146 label __label147
   147 op add START_POWER_REQ START_POWER_REQ __fn3retval
   148 set __fn3_reactor reactor4
   149 set __fn3_time t_startup4
-    * setaddr __fn3retaddr __label18
-    * call __label3 __fn3retval
-    * gotolabel __label18 __fn3
+  150 label __label148
+  151 op sub __tmp103 @tick __fn3_time
+  152 op idiv __fn3_secs __tmp103 60
+  153 op greaterThan __tmp105 __fn3_secs 30
+  154 sensor __tmp106 __fn3_reactor @enabled
+  155 op equal __tmp107 __tmp106 false
+  156 op or __tmp108 __tmp105 __tmp107
+  157 jump __label149 equal __tmp108 false
+  158 set __fn3retval 0
+  159 jump __label151 always
+  160 label __label149
+  161 label __label150
+  162 op sub __fn3_time_left 30 __fn3_secs
+  163 op mul __tmp111 __fn3_time_left __fn3_time_left
+  164 op idiv __fn3_charge_req __tmp111 0.04
+  165 set __fn3retval __fn3_charge_req
+  166 jump __label151 always
+  167 set __fn3retval null
+  168 label __label151
   169 op add START_POWER_REQ START_POWER_REQ __fn3retval
   170 set __fn3_reactor reactor5
   171 set __fn3_time t_startup5
-    * setaddr __fn3retaddr __label19
-    * call __label3 __fn3retval
-    * gotolabel __label19 __fn3
+  172 label __label152
+  173 op sub __tmp103 @tick __fn3_time
+  174 op idiv __fn3_secs __tmp103 60
+  175 op greaterThan __tmp105 __fn3_secs 30
+  176 sensor __tmp106 __fn3_reactor @enabled
+  177 op equal __tmp107 __tmp106 false
+  178 op or __tmp108 __tmp105 __tmp107
+  179 jump __label153 equal __tmp108 false
+  180 set __fn3retval 0
+  181 jump __label155 always
+  182 label __label153
+  183 label __label154
+  184 op sub __fn3_time_left 30 __fn3_secs
+  185 op mul __tmp111 __fn3_time_left __fn3_time_left
+  186 op idiv __fn3_charge_req __tmp111 0.04
+  187 set __fn3retval __fn3_charge_req
+  188 jump __label155 always
+  189 set __fn3retval null
+  190 label __label155
   191 op add START_POWER_REQ START_POWER_REQ __fn3retval
   192 set __fn4_reactor reactor1
   193 set __fn4_reactor_num 1
 
   455 jump __label7 always
   456 label __label9
   457 end
-    * label __label3
-    * op sub __tmp103 @tick __fn3_time
-    * op idiv __fn3_secs __tmp103 60
-    * op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
-    * op equal __tmp107 __tmp106 false
-    * op or __tmp108 __tmp105 __tmp107
-    * jump __label68 equal __tmp108 false
-    * set __fn3retval 0
-    * jump __label67 always
-    * label __label68
-    * label __label69
-    * op sub __fn3_time_left 30 __fn3_secs
-    * op mul __tmp111 __fn3_time_left __fn3_time_left
-    * op idiv __fn3_charge_req __tmp111 0.04
-    * set __fn3retval __fn3_charge_req
-    * jump __label67 always
-    * set __fn3retval null
-    * label __label67
-    * goto __fn3retaddr __fn3
-    * end
   458 label __label4
   459 set RET_T_STARTUP __fn4_t_startup
   460 op sub __tmp114 @tick __fn4_t_startup
 
   510 jump __label83 greaterThanEq __fn4_secs 30
   511 set __fn3_reactor __fn4_reactor
   512 set __fn3_time __fn4_t_startup
-    * setaddr __fn3retaddr __label85
-    * call __label3 __fn3retval
-    * gotolabel __label85 __fn3
+  513 label __label156
+  514 op sub __tmp103 @tick __fn3_time
+  515 op idiv __fn3_secs __tmp103 60
+  516 op greaterThan __tmp105 __fn3_secs 30
+  517 sensor __tmp106 __fn3_reactor @enabled
+  518 op equal __tmp107 __tmp106 false
+  519 op or __tmp108 __tmp105 __tmp107
+  520 jump __label157 equal __tmp108 false
+  521 set __fn3retval 0
+  522 jump __label159 always
+  523 label __label157
+  524 label __label158
+  525 op sub __fn3_time_left 30 __fn3_secs
+  526 op mul __tmp111 __fn3_time_left __fn3_time_left
+  527 op idiv __fn3_charge_req __tmp111 0.04
+  528 set __fn3retval __fn3_charge_req
+  529 jump __label159 always
+  530 set __fn3retval null
+  531 label __label159
   532 op sub __tmp144 __fn4_charge __fn3retval
   533 op lessThan __tmp145 __tmp144 PWR_ABORT
   534 op lessThan __tmp146 __fn4_surplus FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-6 instructions):
 
    82 set __fn3_reactor reactor1
    83 set __fn3_time t_startup1
    84 label __label136
-    * op sub __tmp103 @tick __fn3_time
+   85 op sub __tmp103 @tick t_startup1
    86 op idiv __fn3_secs __tmp103 60
    87 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+   88 sensor __tmp106 reactor1 @enabled
    89 op equal __tmp107 __tmp106 false
    90 op or __tmp108 __tmp105 __tmp107
    91 jump __label137 equal __tmp108 false
 
    98 op idiv __fn3_charge_req __tmp111 0.04
    99 set __fn3retval __fn3_charge_req
   100 jump __label139 always
-    * set __fn3retval null
   101 label __label139
   102 set START_POWER_REQ __fn3retval
   103 set __fn3_reactor reactor2
   104 set __fn3_time t_startup2
   105 label __label140
-    * op sub __tmp103 @tick __fn3_time
+  106 op sub __tmp103 @tick t_startup2
   107 op idiv __fn3_secs __tmp103 60
   108 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+  109 sensor __tmp106 reactor2 @enabled
   110 op equal __tmp107 __tmp106 false
   111 op or __tmp108 __tmp105 __tmp107
   112 jump __label141 equal __tmp108 false
 
   119 op idiv __fn3_charge_req __tmp111 0.04
   120 set __fn3retval __fn3_charge_req
   121 jump __label143 always
-    * set __fn3retval null
   122 label __label143
   123 op add START_POWER_REQ START_POWER_REQ __fn3retval
   124 set __fn3_reactor reactor3
   125 set __fn3_time t_startup3
   126 label __label144
-    * op sub __tmp103 @tick __fn3_time
+  127 op sub __tmp103 @tick t_startup3
   128 op idiv __fn3_secs __tmp103 60
   129 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+  130 sensor __tmp106 reactor3 @enabled
   131 op equal __tmp107 __tmp106 false
   132 op or __tmp108 __tmp105 __tmp107
   133 jump __label145 equal __tmp108 false
 
   140 op idiv __fn3_charge_req __tmp111 0.04
   141 set __fn3retval __fn3_charge_req
   142 jump __label147 always
-    * set __fn3retval null
   143 label __label147
   144 op add START_POWER_REQ START_POWER_REQ __fn3retval
   145 set __fn3_reactor reactor4
   146 set __fn3_time t_startup4
   147 label __label148
-    * op sub __tmp103 @tick __fn3_time
+  148 op sub __tmp103 @tick t_startup4
   149 op idiv __fn3_secs __tmp103 60
   150 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+  151 sensor __tmp106 reactor4 @enabled
   152 op equal __tmp107 __tmp106 false
   153 op or __tmp108 __tmp105 __tmp107
   154 jump __label149 equal __tmp108 false
 
   161 op idiv __fn3_charge_req __tmp111 0.04
   162 set __fn3retval __fn3_charge_req
   163 jump __label151 always
-    * set __fn3retval null
   164 label __label151
   165 op add START_POWER_REQ START_POWER_REQ __fn3retval
   166 set __fn3_reactor reactor5
   167 set __fn3_time t_startup5
   168 label __label152
-    * op sub __tmp103 @tick __fn3_time
+  169 op sub __tmp103 @tick t_startup5
   170 op idiv __fn3_secs __tmp103 60
   171 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+  172 sensor __tmp106 reactor5 @enabled
   173 op equal __tmp107 __tmp106 false
   174 op or __tmp108 __tmp105 __tmp107
   175 jump __label153 equal __tmp108 false
 
   182 op idiv __fn3_charge_req __tmp111 0.04
   183 set __fn3retval __fn3_charge_req
   184 jump __label155 always
-    * set __fn3retval null
   185 label __label155
   186 op add START_POWER_REQ START_POWER_REQ __fn3retval
   187 set __fn4_reactor reactor1
 
   506 set __fn3_reactor __fn4_reactor
   507 set __fn3_time __fn4_t_startup
   508 label __label156
-    * op sub __tmp103 @tick __fn3_time
+  509 op sub __tmp103 @tick __fn4_t_startup
   510 op idiv __fn3_secs __tmp103 60
   511 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn3_reactor @enabled
+  512 sensor __tmp106 __fn4_reactor @enabled
   513 op equal __tmp107 __tmp106 false
   514 op or __tmp108 __tmp105 __tmp107
   515 jump __label157 equal __tmp108 false
 
   522 op idiv __fn3_charge_req __tmp111 0.04
   523 set __fn3retval __fn3_charge_req
   524 jump __label159 always
-    * set __fn3retval null
   525 label __label159
   526 op sub __tmp144 __fn4_charge __fn3retval
   527 op lessThan __tmp145 __tmp144 PWR_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    79 jump __label12 always
    80 label __label12
    81 op or emerg_shutdown __fn2retval __tmp8
-    * set __fn3_reactor reactor1
-    * set __fn3_time t_startup1
    82 label __label136
    83 op sub __tmp103 @tick t_startup1
    84 op idiv __fn3_secs __tmp103 60
 
    98 jump __label139 always
    99 label __label139
   100 set START_POWER_REQ __fn3retval
-    * set __fn3_reactor reactor2
-    * set __fn3_time t_startup2
   101 label __label140
   102 op sub __tmp103 @tick t_startup2
   103 op idiv __fn3_secs __tmp103 60
 
   117 jump __label143 always
   118 label __label143
   119 op add START_POWER_REQ START_POWER_REQ __fn3retval
-    * set __fn3_reactor reactor3
-    * set __fn3_time t_startup3
   120 label __label144
   121 op sub __tmp103 @tick t_startup3
   122 op idiv __fn3_secs __tmp103 60
 
   136 jump __label147 always
   137 label __label147
   138 op add START_POWER_REQ START_POWER_REQ __fn3retval
-    * set __fn3_reactor reactor4
-    * set __fn3_time t_startup4
   139 label __label148
   140 op sub __tmp103 @tick t_startup4
   141 op idiv __fn3_secs __tmp103 60
 
   155 jump __label151 always
   156 label __label151
   157 op add START_POWER_REQ START_POWER_REQ __fn3retval
-    * set __fn3_reactor reactor5
-    * set __fn3_time t_startup5
   158 label __label152
   159 op sub __tmp103 @tick t_startup5
   160 op idiv __fn3_secs __tmp103 60
 
   493 jump __label82 always
   494 label __label81
   495 jump __label83 greaterThanEq __fn4_secs 30
-    * set __fn3_reactor __fn4_reactor
-    * set __fn3_time __fn4_t_startup
   496 label __label156
   497 op sub __tmp103 @tick __fn4_t_startup
   498 op idiv __fn3_secs __tmp103 60

Modifications by Function Inlining: inline function call at line 80 (+139 instructions):
 
   179 set __fn4_emerg_shutdown emerg_shutdown
   180 set __fn4_fuel_on fuel_1
   181 set __fn4_t_startup t_startup1
-    * setaddr __fn4retaddr __label20
-    * call __label4 __fn4retval
-    * gotolabel __label20 __fn4
+  182 label __label160
+  183 set RET_T_STARTUP __fn4_t_startup
+  184 op sub __tmp114 @tick __fn4_t_startup
+  185 op idiv __fn4_secs __tmp114 60
+  186 sensor __fn4_fuel __fn4_reactor @blast-compound
+  187 set __fn4_supply_fuel true
+  188 sensor __fn4_fuel_stored CONTAINER @blast-compound
+  189 sensor __fn4_cryo __fn4_reactor @cryofluid
+  190 sensor __tmp119 NODE @powerNetStored
+  191 op floor __fn4_charge __tmp119
+  192 sensor __tmp121 NODE @powerNetIn
+  193 sensor __tmp122 NODE @powerNetOut
+  194 op sub __tmp123 __tmp121 __tmp122
+  195 op floor __fn4_surplus __tmp123
+  196 op mul __tmp125 AVG_SURPLUS 0.8
+  197 op mul __tmp126 __fn4_surplus 0.2
+  198 op add AVG_SURPLUS __tmp125 __tmp126
+  199 sensor __fn4_enabled __fn4_reactor @enabled
+  200 print "#"
+  201 print __fn4_reactor_num
+  202 print " - "
+  203 jump __label161 equal __fn4_emerg_shutdown false
+  204 control enabled __fn4_reactor false
+  205 print "emergency mode\n"
+  206 set __fn4_supply_fuel false
+  207 jump __label194 always
+  208 label __label161
+  209 jump __label180 equal __fn4_enabled false
+  210 jump __label162 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  211 control enabled __fn4_reactor false
+  212 print "STOP unwanted\n"
+  213 jump __label179 always
+  214 label __label162
+  215 op greaterThan __tmp133 __fn4_reactor_num 1
+  216 op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
+  217 op lessThan __tmp135 __fn4_fuel_stored __tmp134
+  218 op land __tmp136 __tmp133 __tmp135
+  219 jump __label163 equal __tmp136 false
+  220 control enabled __fn4_reactor false
+  221 print "STOP system fuel low\n"
+  222 jump __label178 always
+  223 label __label163
+  224 jump __label164 greaterThan __fn4_fuel 1
+  225 control enabled __fn4_reactor false
+  226 print "STOP fuel low\n"
+  227 jump __label177 always
+  228 label __label164
+  229 jump __label165 greaterThan __fn4_cryo CRYO_ABORT
+  230 control enabled __fn4_reactor false
+  231 print "STOP out of cryo\n"
+  232 jump __label176 always
+  233 label __label165
+  234 jump __label172 greaterThanEq __fn4_secs 30
+  235 label __label166
+  236 op sub __tmp103 @tick __fn4_t_startup
+  237 op idiv __fn3_secs __tmp103 60
+  238 op greaterThan __tmp105 __fn3_secs 30
+  239 sensor __tmp106 __fn4_reactor @enabled
+  240 op equal __tmp107 __tmp106 false
+  241 op or __tmp108 __tmp105 __tmp107
+  242 jump __label167 equal __tmp108 false
+  243 set __fn3retval 0
+  244 jump __label169 always
+  245 label __label167
+  246 label __label168
+  247 op sub __fn3_time_left 30 __fn3_secs
+  248 op mul __tmp111 __fn3_time_left __fn3_time_left
+  249 op idiv __fn3_charge_req __tmp111 0.04
+  250 set __fn3retval __fn3_charge_req
+  251 jump __label169 always
+  252 label __label169
+  253 op sub __tmp144 __fn4_charge __fn3retval
+  254 op lessThan __tmp145 __tmp144 PWR_ABORT
+  255 op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  256 op land __tmp147 __tmp145 __tmp146
+  257 jump __label170 equal __tmp147 false
+  258 control enabled __fn4_reactor false
+  259 print "START FAIL battery\n"
+  260 set __fn4_supply_fuel false
+  261 jump __label171 always
+  262 label __label170
+  263 op sub __fn4_time_left 30 __fn4_secs
+  264 print "Starting "
+  265 print __fn4_time_left
+  266 print " secs, req "
+  267 print __fn3retval
+  268 print "J\n"
+  269 label __label171
+  270 jump __label175 always
+  271 label __label172
+  272 op lessThan __tmp150 __fn4_charge PWR_ABANDON
+  273 op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  274 op land __tmp152 __tmp150 __tmp151
+  275 jump __label173 equal __tmp152 false
+  276 control enabled __fn4_reactor false
+  277 print "ABANDON - battery crit\n"
+  278 set __fn4_supply_fuel false
+  279 jump __label174 always
+  280 label __label173
+  281 op idiv __fn4_mins __fn4_secs 6
+  282 op div __fn4_mins __fn4_mins 10
+  283 print "RUN "
+  284 print __fn4_mins
+  285 print " mins\n"
+  286 label __label174
+  287 label __label175
+  288 label __label176
+  289 label __label177
+  290 label __label178
+  291 label __label179
+  292 jump __label193 always
+  293 label __label180
+  294 op sub __tmp156 __fn4_charge START_POWER_REQ
+  295 op sub __tmp157 __tmp156 PWR_ABORT
+  296 op div __tmp158 __tmp157 PWR_REQ
+  297 op mul __fn4_charge_units __tmp158 PWR_RESERVE
+  298 op div __tmp160 __fn4_surplus FLOW_REQ
+  299 op max __fn4_flow_units -0.1 __tmp160
+  300 op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
+  301 op add __fn4_cryo_req CRYO_REQ __tmp162
+  302 jump __label181 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  303 print "IDLE\n"
+  304 set __fn4_supply_fuel false
+  305 jump __label192 always
+  306 label __label181
+  307 op add __tmp166 __fn4_flow_units __fn4_charge_units
+  308 jump __label182 greaterThanEq __tmp166 1
+  309 op idiv __tmp170 __fn4_flow_units 0.001
+  310 op div __fn4_flow __tmp170 10
+  311 op idiv __tmp173 __fn4_charge_units 0.001
+  312 op div __fn4_charge __tmp173 10
+  313 print "WAIT power. (%"
+  314 print __fn4_charge
+  315 print "J + %"
+  316 print __fn4_flow
+  317 print "W)\n"
+  318 set __fn4_supply_fuel false
+  319 jump __label191 always
+  320 label __label182
+  321 op lessThan __tmp175 __fn4_fuel FUEL_REQ
+  322 op land __tmp176 __fn4_fuel_on __tmp175
+  323 jump __label185 equal __tmp176 false
+  324 op add __tmp178 __fn4_fuel __fn4_fuel_stored
+  325 jump __label183 lessThanEq __tmp178 FUEL_REQ
+  326 print "WAIT fuel\n"
+  327 jump __label184 always
+  328 label __label183
+  329 print "WAIT system fuel\n"
+  330 label __label184
+  331 jump __label190 always
+  332 label __label185
+  333 op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
+  334 jump __label186 greaterThanEq __fn4_fuel_stored __tmp181
+  335 print "WAIT buffer fuel\n"
+  336 jump __label189 always
+  337 label __label186
+  338 jump __label187 greaterThanEq __fn4_cryo __fn4_cryo_req
+  339 print "WAIT cryo\n"
+  340 jump __label188 always
+  341 label __label187
+  342 print "STARTUP\n"
+  343 op add START_POWER_REQ START_POWER_REQ PWR_REQ
+  344 control enabled __fn4_reactor true
+  345 label __label188
+  346 label __label189
+  347 label __label190
+  348 label __label191
+  349 label __label192
+  350 label __label193
+  351 label __label194
+  352 sensor __tmp187 __fn4_reactor @enabled
+  353 jump __label195 equal __fn4_enabled __tmp187
+  354 set RET_T_STARTUP @tick
+  355 label __label195
+  356 label __label196
+  357 set __fn4retval __fn4_supply_fuel
+  358 jump __label197 always
+  359 set __fn4retval null
+  360 label __label197
   361 set fuel_1 __fn4retval
   362 set t_startup1 RET_T_STARTUP
   363 label __label110

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-2 instructions):
 
    30 set t_startup3 __tmp5
    31 set t_startup4 __tmp5
    32 set t_startup5 __tmp5
-    * set RET_T_STARTUP __tmp5
    33 set REACTORS_DESIRED 5
    34 set AVG_SURPLUS 500
    35 label __label7
 
   179 set __fn4_fuel_on fuel_1
   180 set __fn4_t_startup t_startup1
   181 label __label160
-    * set RET_T_STARTUP __fn4_t_startup
-    * op sub __tmp114 @tick __fn4_t_startup
+  182 set RET_T_STARTUP t_startup1
+  183 op sub __tmp114 @tick t_startup1
   184 op idiv __fn4_secs __tmp114 60
-    * sensor __fn4_fuel __fn4_reactor @blast-compound
+  185 sensor __fn4_fuel reactor1 @blast-compound
   186 set __fn4_supply_fuel true
-    * sensor __fn4_fuel_stored CONTAINER @blast-compound
-    * sensor __fn4_cryo __fn4_reactor @cryofluid
-    * sensor __tmp119 NODE @powerNetStored
+  187 sensor __fn4_fuel_stored vault1 @blast-compound
+  188 sensor __fn4_cryo reactor1 @cryofluid
+  189 sensor __tmp119 node1 @powerNetStored
   190 op floor __fn4_charge __tmp119
-    * sensor __tmp121 NODE @powerNetIn
-    * sensor __tmp122 NODE @powerNetOut
+  191 sensor __tmp121 node1 @powerNetIn
+  192 sensor __tmp122 node1 @powerNetOut
   193 op sub __tmp123 __tmp121 __tmp122
   194 op floor __fn4_surplus __tmp123
   195 op mul __tmp125 AVG_SURPLUS 0.8
   196 op mul __tmp126 __fn4_surplus 0.2
   197 op add AVG_SURPLUS __tmp125 __tmp126
-    * sensor __fn4_enabled __fn4_reactor @enabled
+  198 sensor __fn4_enabled reactor1 @enabled
   199 print "#"
-    * print __fn4_reactor_num
+  200 print 1
   201 print " - "
-    * jump __label161 equal __fn4_emerg_shutdown false
-    * control enabled __fn4_reactor false
+  202 jump __label161 equal emerg_shutdown false
+  203 control enabled reactor1 false
   204 print "emergency mode\n"
   205 set __fn4_supply_fuel false
   206 jump __label194 always
   207 label __label161
   208 jump __label180 equal __fn4_enabled false
-    * jump __label162 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
-    * control enabled __fn4_reactor false
+  209 jump __label162 greaterThanEq REACTORS_DESIRED 1
+  210 control enabled reactor1 false
   211 print "STOP unwanted\n"
   212 jump __label179 always
   213 label __label162
-    * op greaterThan __tmp133 __fn4_reactor_num 1
-    * op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
-    * op lessThan __tmp135 __fn4_fuel_stored __tmp134
-    * op land __tmp136 __tmp133 __tmp135
+  214 op greaterThan __tmp133 1 1
+  215 op mul __tmp134 15 1
+  216 op lessThan __tmp135 __fn4_fuel_stored 15
+  217 op land __tmp136 false __tmp135
   218 jump __label163 equal __tmp136 false
-    * control enabled __fn4_reactor false
+  219 control enabled reactor1 false
   220 print "STOP system fuel low\n"
   221 jump __label178 always
   222 label __label163
   223 jump __label164 greaterThan __fn4_fuel 1
-    * control enabled __fn4_reactor false
+  224 control enabled reactor1 false
   225 print "STOP fuel low\n"
   226 jump __label177 always
   227 label __label164
-    * jump __label165 greaterThan __fn4_cryo CRYO_ABORT
-    * control enabled __fn4_reactor false
+  228 jump __label165 greaterThan __fn4_cryo 1
+  229 control enabled reactor1 false
   230 print "STOP out of cryo\n"
   231 jump __label176 always
   232 label __label165
   233 jump __label172 greaterThanEq __fn4_secs 30
   234 label __label166
-    * op sub __tmp103 @tick __fn4_t_startup
+  235 op sub __tmp103 @tick t_startup1
   236 op idiv __fn3_secs __tmp103 60
   237 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn4_reactor @enabled
+  238 sensor __tmp106 reactor1 @enabled
   239 op equal __tmp107 __tmp106 false
   240 op or __tmp108 __tmp105 __tmp107
   241 jump __label167 equal __tmp108 false
 
   250 jump __label169 always
   251 label __label169
   252 op sub __tmp144 __fn4_charge __fn3retval
-    * op lessThan __tmp145 __tmp144 PWR_ABORT
-    * op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  253 op lessThan __tmp145 __tmp144 5000
+  254 op lessThan __tmp146 __fn4_surplus -500
   255 op land __tmp147 __tmp145 __tmp146
   256 jump __label170 equal __tmp147 false
-    * control enabled __fn4_reactor false
+  257 control enabled reactor1 false
   258 print "START FAIL battery\n"
   259 set __fn4_supply_fuel false
   260 jump __label171 always
 
   268 label __label171
   269 jump __label175 always
   270 label __label172
-    * op lessThan __tmp150 __fn4_charge PWR_ABANDON
-    * op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  271 op lessThan __tmp150 __fn4_charge 2000
+  272 op lessThan __tmp151 __fn4_surplus -500
   273 op land __tmp152 __tmp150 __tmp151
   274 jump __label173 equal __tmp152 false
-    * control enabled __fn4_reactor false
+  275 control enabled reactor1 false
   276 print "ABANDON - battery crit\n"
   277 set __fn4_supply_fuel false
   278 jump __label174 always
 
   291 jump __label193 always
   292 label __label180
   293 op sub __tmp156 __fn4_charge START_POWER_REQ
-    * op sub __tmp157 __tmp156 PWR_ABORT
-    * op div __tmp158 __tmp157 PWR_REQ
-    * op mul __fn4_charge_units __tmp158 PWR_RESERVE
-    * op div __tmp160 __fn4_surplus FLOW_REQ
+  294 op sub __tmp157 __tmp156 5000
+  295 op div __tmp158 __tmp157 23000
+  296 op mul __fn4_charge_units __tmp158 0.6
+  297 op div __tmp160 __fn4_surplus 2000
   298 op max __fn4_flow_units -0.1 __tmp160
-    * op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
-    * op add __fn4_cryo_req CRYO_REQ __tmp162
-    * jump __label181 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  299 op mul __tmp162 2 1
+  300 op add __fn4_cryo_req 3 2
+  301 jump __label181 greaterThanEq REACTORS_DESIRED 1
   302 print "IDLE\n"
   303 set __fn4_supply_fuel false
   304 jump __label192 always
 
   317 set __fn4_supply_fuel false
   318 jump __label191 always
   319 label __label182
-    * op lessThan __tmp175 __fn4_fuel FUEL_REQ
-    * op land __tmp176 __fn4_fuel_on __tmp175
+  320 op lessThan __tmp175 __fn4_fuel 10
+  321 op land __tmp176 fuel_1 __tmp175
   322 jump __label185 equal __tmp176 false
   323 op add __tmp178 __fn4_fuel __fn4_fuel_stored
-    * jump __label183 lessThanEq __tmp178 FUEL_REQ
+  324 jump __label183 lessThanEq __tmp178 10
   325 print "WAIT fuel\n"
   326 jump __label184 always
   327 label __label183
 
   329 label __label184
   330 jump __label190 always
   331 label __label185
-    * op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
-    * jump __label186 greaterThanEq __fn4_fuel_stored __tmp181
+  332 op mul __tmp181 45 1
+  333 jump __label186 greaterThanEq __fn4_fuel_stored 45
   334 print "WAIT buffer fuel\n"
   335 jump __label189 always
   336 label __label186
-    * jump __label187 greaterThanEq __fn4_cryo __fn4_cryo_req
+  337 jump __label187 greaterThanEq __fn4_cryo 5
   338 print "WAIT cryo\n"
   339 jump __label188 always
   340 label __label187
   341 print "STARTUP\n"
-    * op add START_POWER_REQ START_POWER_REQ PWR_REQ
-    * control enabled __fn4_reactor true
+  342 op add START_POWER_REQ START_POWER_REQ 23000
+  343 control enabled reactor1 true
   344 label __label188
   345 label __label189
   346 label __label190
 
   348 label __label192
   349 label __label193
   350 label __label194
-    * sensor __tmp187 __fn4_reactor @enabled
+  351 sensor __tmp187 reactor1 @enabled
   352 jump __label195 equal __fn4_enabled __tmp187
   353 set RET_T_STARTUP @tick
   354 label __label195
   355 label __label196
   356 set __fn4retval __fn4_supply_fuel
   357 jump __label197 always
-    * set __fn4retval null
   358 label __label197
-    * set fuel_1 __fn4retval
+  359 set fuel_1 __fn4_supply_fuel
   360 set t_startup1 RET_T_STARTUP
   361 label __label110
-    * jump __label111 equal __fn4retval false
+  362 jump __label111 equal __fn4_supply_fuel false
   363 control config unloader1 @blast-compound
   364 jump __label112 always
   365 label __label111
   366 control config unloader1 @scrap
   367 label __label112
-    * jump __label113 notEqual __fn4retval false
+  368 jump __label113 notEqual __fn4_supply_fuel false
   369 control config unloader2 @blast-compound
   370 jump __label114 always
   371 label __label113

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   173 jump __label155 always
   174 label __label155
   175 op add START_POWER_REQ START_POWER_REQ __fn3retval
-    * set __fn4_reactor reactor1
-    * set __fn4_reactor_num 1
-    * set __fn4_emerg_shutdown emerg_shutdown
-    * set __fn4_fuel_on fuel_1
-    * set __fn4_t_startup t_startup1
   176 label __label160
   177 set RET_T_STARTUP t_startup1
   178 op sub __tmp114 @tick t_startup1
 
   288 op sub __tmp156 __fn4_charge START_POWER_REQ
   289 op sub __tmp157 __tmp156 5000
   290 op div __tmp158 __tmp157 23000
-    * op mul __fn4_charge_units __tmp158 0.6
+  291 op div __fn4_charge_units __tmp157 38333.333333333336
   292 op div __tmp160 __fn4_surplus 2000
   293 op max __fn4_flow_units -0.1 __tmp160
   294 op mul __tmp162 2 1
 
   348 set RET_T_STARTUP @tick
   349 label __label195
   350 label __label196
-    * set __fn4retval __fn4_supply_fuel
   351 jump __label197 always
   352 label __label197
   353 set fuel_1 __fn4_supply_fuel

Modifications by Function Inlining: inline function call at line 84 (+139 instructions):
 
   371 set __fn4_emerg_shutdown emerg_shutdown
   372 set __fn4_fuel_on fuel_2
   373 set __fn4_t_startup t_startup2
-    * setaddr __fn4retaddr __label22
-    * call __label4 __fn4retval
-    * gotolabel __label22 __fn4
+  374 label __label198
+  375 set RET_T_STARTUP __fn4_t_startup
+  376 op sub __tmp114 @tick __fn4_t_startup
+  377 op idiv __fn4_secs __tmp114 60
+  378 sensor __fn4_fuel __fn4_reactor @blast-compound
+  379 set __fn4_supply_fuel true
+  380 sensor __fn4_fuel_stored CONTAINER @blast-compound
+  381 sensor __fn4_cryo __fn4_reactor @cryofluid
+  382 sensor __tmp119 NODE @powerNetStored
+  383 op floor __fn4_charge __tmp119
+  384 sensor __tmp121 NODE @powerNetIn
+  385 sensor __tmp122 NODE @powerNetOut
+  386 op sub __tmp123 __tmp121 __tmp122
+  387 op floor __fn4_surplus __tmp123
+  388 op mul __tmp125 AVG_SURPLUS 0.8
+  389 op mul __tmp126 __fn4_surplus 0.2
+  390 op add AVG_SURPLUS __tmp125 __tmp126
+  391 sensor __fn4_enabled __fn4_reactor @enabled
+  392 print "#"
+  393 print __fn4_reactor_num
+  394 print " - "
+  395 jump __label199 equal __fn4_emerg_shutdown false
+  396 control enabled __fn4_reactor false
+  397 print "emergency mode\n"
+  398 set __fn4_supply_fuel false
+  399 jump __label232 always
+  400 label __label199
+  401 jump __label218 equal __fn4_enabled false
+  402 jump __label200 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  403 control enabled __fn4_reactor false
+  404 print "STOP unwanted\n"
+  405 jump __label217 always
+  406 label __label200
+  407 op greaterThan __tmp133 __fn4_reactor_num 1
+  408 op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
+  409 op lessThan __tmp135 __fn4_fuel_stored __tmp134
+  410 op land __tmp136 __tmp133 __tmp135
+  411 jump __label201 equal __tmp136 false
+  412 control enabled __fn4_reactor false
+  413 print "STOP system fuel low\n"
+  414 jump __label216 always
+  415 label __label201
+  416 jump __label202 greaterThan __fn4_fuel 1
+  417 control enabled __fn4_reactor false
+  418 print "STOP fuel low\n"
+  419 jump __label215 always
+  420 label __label202
+  421 jump __label203 greaterThan __fn4_cryo CRYO_ABORT
+  422 control enabled __fn4_reactor false
+  423 print "STOP out of cryo\n"
+  424 jump __label214 always
+  425 label __label203
+  426 jump __label210 greaterThanEq __fn4_secs 30
+  427 label __label204
+  428 op sub __tmp103 @tick __fn4_t_startup
+  429 op idiv __fn3_secs __tmp103 60
+  430 op greaterThan __tmp105 __fn3_secs 30
+  431 sensor __tmp106 __fn4_reactor @enabled
+  432 op equal __tmp107 __tmp106 false
+  433 op or __tmp108 __tmp105 __tmp107
+  434 jump __label205 equal __tmp108 false
+  435 set __fn3retval 0
+  436 jump __label207 always
+  437 label __label205
+  438 label __label206
+  439 op sub __fn3_time_left 30 __fn3_secs
+  440 op mul __tmp111 __fn3_time_left __fn3_time_left
+  441 op idiv __fn3_charge_req __tmp111 0.04
+  442 set __fn3retval __fn3_charge_req
+  443 jump __label207 always
+  444 label __label207
+  445 op sub __tmp144 __fn4_charge __fn3retval
+  446 op lessThan __tmp145 __tmp144 PWR_ABORT
+  447 op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  448 op land __tmp147 __tmp145 __tmp146
+  449 jump __label208 equal __tmp147 false
+  450 control enabled __fn4_reactor false
+  451 print "START FAIL battery\n"
+  452 set __fn4_supply_fuel false
+  453 jump __label209 always
+  454 label __label208
+  455 op sub __fn4_time_left 30 __fn4_secs
+  456 print "Starting "
+  457 print __fn4_time_left
+  458 print " secs, req "
+  459 print __fn3retval
+  460 print "J\n"
+  461 label __label209
+  462 jump __label213 always
+  463 label __label210
+  464 op lessThan __tmp150 __fn4_charge PWR_ABANDON
+  465 op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  466 op land __tmp152 __tmp150 __tmp151
+  467 jump __label211 equal __tmp152 false
+  468 control enabled __fn4_reactor false
+  469 print "ABANDON - battery crit\n"
+  470 set __fn4_supply_fuel false
+  471 jump __label212 always
+  472 label __label211
+  473 op idiv __fn4_mins __fn4_secs 6
+  474 op div __fn4_mins __fn4_mins 10
+  475 print "RUN "
+  476 print __fn4_mins
+  477 print " mins\n"
+  478 label __label212
+  479 label __label213
+  480 label __label214
+  481 label __label215
+  482 label __label216
+  483 label __label217
+  484 jump __label231 always
+  485 label __label218
+  486 op sub __tmp156 __fn4_charge START_POWER_REQ
+  487 op sub __tmp157 __tmp156 PWR_ABORT
+  488 op div __tmp158 __tmp157 PWR_REQ
+  489 op mul __fn4_charge_units __tmp158 PWR_RESERVE
+  490 op div __tmp160 __fn4_surplus FLOW_REQ
+  491 op max __fn4_flow_units -0.1 __tmp160
+  492 op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
+  493 op add __fn4_cryo_req CRYO_REQ __tmp162
+  494 jump __label219 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  495 print "IDLE\n"
+  496 set __fn4_supply_fuel false
+  497 jump __label230 always
+  498 label __label219
+  499 op add __tmp166 __fn4_flow_units __fn4_charge_units
+  500 jump __label220 greaterThanEq __tmp166 1
+  501 op idiv __tmp170 __fn4_flow_units 0.001
+  502 op div __fn4_flow __tmp170 10
+  503 op idiv __tmp173 __fn4_charge_units 0.001
+  504 op div __fn4_charge __tmp173 10
+  505 print "WAIT power. (%"
+  506 print __fn4_charge
+  507 print "J + %"
+  508 print __fn4_flow
+  509 print "W)\n"
+  510 set __fn4_supply_fuel false
+  511 jump __label229 always
+  512 label __label220
+  513 op lessThan __tmp175 __fn4_fuel FUEL_REQ
+  514 op land __tmp176 __fn4_fuel_on __tmp175
+  515 jump __label223 equal __tmp176 false
+  516 op add __tmp178 __fn4_fuel __fn4_fuel_stored
+  517 jump __label221 lessThanEq __tmp178 FUEL_REQ
+  518 print "WAIT fuel\n"
+  519 jump __label222 always
+  520 label __label221
+  521 print "WAIT system fuel\n"
+  522 label __label222
+  523 jump __label228 always
+  524 label __label223
+  525 op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
+  526 jump __label224 greaterThanEq __fn4_fuel_stored __tmp181
+  527 print "WAIT buffer fuel\n"
+  528 jump __label227 always
+  529 label __label224
+  530 jump __label225 greaterThanEq __fn4_cryo __fn4_cryo_req
+  531 print "WAIT cryo\n"
+  532 jump __label226 always
+  533 label __label225
+  534 print "STARTUP\n"
+  535 op add START_POWER_REQ START_POWER_REQ PWR_REQ
+  536 control enabled __fn4_reactor true
+  537 label __label226
+  538 label __label227
+  539 label __label228
+  540 label __label229
+  541 label __label230
+  542 label __label231
+  543 label __label232
+  544 sensor __tmp187 __fn4_reactor @enabled
+  545 jump __label233 equal __fn4_enabled __tmp187
+  546 set RET_T_STARTUP @tick
+  547 label __label233
+  548 label __label234
+  549 set __fn4retval __fn4_supply_fuel
+  550 jump __label235 always
+  551 set __fn4retval null
+  552 label __label235
   553 set fuel_2 __fn4retval
   554 set t_startup2 RET_T_STARTUP
   555 label __label116

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
   372 set __fn4_fuel_on fuel_2
   373 set __fn4_t_startup t_startup2
   374 label __label198
-    * set RET_T_STARTUP __fn4_t_startup
-    * op sub __tmp114 @tick __fn4_t_startup
+  375 set RET_T_STARTUP t_startup2
+  376 op sub __tmp114 @tick t_startup2
   377 op idiv __fn4_secs __tmp114 60
-    * sensor __fn4_fuel __fn4_reactor @blast-compound
+  378 sensor __fn4_fuel reactor2 @blast-compound
   379 set __fn4_supply_fuel true
-    * sensor __fn4_fuel_stored CONTAINER @blast-compound
-    * sensor __fn4_cryo __fn4_reactor @cryofluid
-    * sensor __tmp119 NODE @powerNetStored
+  380 sensor __fn4_fuel_stored vault1 @blast-compound
+  381 sensor __fn4_cryo reactor2 @cryofluid
+  382 sensor __tmp119 node1 @powerNetStored
   383 op floor __fn4_charge __tmp119
-    * sensor __tmp121 NODE @powerNetIn
-    * sensor __tmp122 NODE @powerNetOut
+  384 sensor __tmp121 node1 @powerNetIn
+  385 sensor __tmp122 node1 @powerNetOut
   386 op sub __tmp123 __tmp121 __tmp122
   387 op floor __fn4_surplus __tmp123
   388 op mul __tmp125 AVG_SURPLUS 0.8
   389 op mul __tmp126 __fn4_surplus 0.2
   390 op add AVG_SURPLUS __tmp125 __tmp126
-    * sensor __fn4_enabled __fn4_reactor @enabled
+  391 sensor __fn4_enabled reactor2 @enabled
   392 print "#"
-    * print __fn4_reactor_num
+  393 print 2
   394 print " - "
-    * jump __label199 equal __fn4_emerg_shutdown false
-    * control enabled __fn4_reactor false
+  395 jump __label199 equal emerg_shutdown false
+  396 control enabled reactor2 false
   397 print "emergency mode\n"
   398 set __fn4_supply_fuel false
   399 jump __label232 always
   400 label __label199
   401 jump __label218 equal __fn4_enabled false
-    * jump __label200 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
-    * control enabled __fn4_reactor false
+  402 jump __label200 greaterThanEq REACTORS_DESIRED 2
+  403 control enabled reactor2 false
   404 print "STOP unwanted\n"
   405 jump __label217 always
   406 label __label200
-    * op greaterThan __tmp133 __fn4_reactor_num 1
-    * op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
-    * op lessThan __tmp135 __fn4_fuel_stored __tmp134
-    * op land __tmp136 __tmp133 __tmp135
+  407 op greaterThan __tmp133 2 1
+  408 op mul __tmp134 15 2
+  409 op lessThan __tmp135 __fn4_fuel_stored 30
+  410 op land __tmp136 true __tmp135
   411 jump __label201 equal __tmp136 false
-    * control enabled __fn4_reactor false
+  412 control enabled reactor2 false
   413 print "STOP system fuel low\n"
   414 jump __label216 always
   415 label __label201
   416 jump __label202 greaterThan __fn4_fuel 1
-    * control enabled __fn4_reactor false
+  417 control enabled reactor2 false
   418 print "STOP fuel low\n"
   419 jump __label215 always
   420 label __label202
-    * jump __label203 greaterThan __fn4_cryo CRYO_ABORT
-    * control enabled __fn4_reactor false
+  421 jump __label203 greaterThan __fn4_cryo 1
+  422 control enabled reactor2 false
   423 print "STOP out of cryo\n"
   424 jump __label214 always
   425 label __label203
   426 jump __label210 greaterThanEq __fn4_secs 30
   427 label __label204
-    * op sub __tmp103 @tick __fn4_t_startup
+  428 op sub __tmp103 @tick t_startup2
   429 op idiv __fn3_secs __tmp103 60
   430 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn4_reactor @enabled
+  431 sensor __tmp106 reactor2 @enabled
   432 op equal __tmp107 __tmp106 false
   433 op or __tmp108 __tmp105 __tmp107
   434 jump __label205 equal __tmp108 false
 
   443 jump __label207 always
   444 label __label207
   445 op sub __tmp144 __fn4_charge __fn3retval
-    * op lessThan __tmp145 __tmp144 PWR_ABORT
-    * op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  446 op lessThan __tmp145 __tmp144 5000
+  447 op lessThan __tmp146 __fn4_surplus -500
   448 op land __tmp147 __tmp145 __tmp146
   449 jump __label208 equal __tmp147 false
-    * control enabled __fn4_reactor false
+  450 control enabled reactor2 false
   451 print "START FAIL battery\n"
   452 set __fn4_supply_fuel false
   453 jump __label209 always
 
   461 label __label209
   462 jump __label213 always
   463 label __label210
-    * op lessThan __tmp150 __fn4_charge PWR_ABANDON
-    * op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  464 op lessThan __tmp150 __fn4_charge 2000
+  465 op lessThan __tmp151 __fn4_surplus -500
   466 op land __tmp152 __tmp150 __tmp151
   467 jump __label211 equal __tmp152 false
-    * control enabled __fn4_reactor false
+  468 control enabled reactor2 false
   469 print "ABANDON - battery crit\n"
   470 set __fn4_supply_fuel false
   471 jump __label212 always
 
   484 jump __label231 always
   485 label __label218
   486 op sub __tmp156 __fn4_charge START_POWER_REQ
-    * op sub __tmp157 __tmp156 PWR_ABORT
-    * op div __tmp158 __tmp157 PWR_REQ
-    * op mul __fn4_charge_units __tmp158 PWR_RESERVE
-    * op div __tmp160 __fn4_surplus FLOW_REQ
+  487 op sub __tmp157 __tmp156 5000
+  488 op div __tmp158 __tmp157 23000
+  489 op mul __fn4_charge_units __tmp158 0.6
+  490 op div __tmp160 __fn4_surplus 2000
   491 op max __fn4_flow_units -0.1 __tmp160
-    * op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
-    * op add __fn4_cryo_req CRYO_REQ __tmp162
-    * jump __label219 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  492 op mul __tmp162 2 2
+  493 op add __fn4_cryo_req 3 4
+  494 jump __label219 greaterThanEq REACTORS_DESIRED 2
   495 print "IDLE\n"
   496 set __fn4_supply_fuel false
   497 jump __label230 always
 
   510 set __fn4_supply_fuel false
   511 jump __label229 always
   512 label __label220
-    * op lessThan __tmp175 __fn4_fuel FUEL_REQ
-    * op land __tmp176 __fn4_fuel_on __tmp175
+  513 op lessThan __tmp175 __fn4_fuel 10
+  514 op land __tmp176 fuel_2 __tmp175
   515 jump __label223 equal __tmp176 false
   516 op add __tmp178 __fn4_fuel __fn4_fuel_stored
-    * jump __label221 lessThanEq __tmp178 FUEL_REQ
+  517 jump __label221 lessThanEq __tmp178 10
   518 print "WAIT fuel\n"
   519 jump __label222 always
   520 label __label221
 
   522 label __label222
   523 jump __label228 always
   524 label __label223
-    * op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
-    * jump __label224 greaterThanEq __fn4_fuel_stored __tmp181
+  525 op mul __tmp181 45 2
+  526 jump __label224 greaterThanEq __fn4_fuel_stored 90
   527 print "WAIT buffer fuel\n"
   528 jump __label227 always
   529 label __label224
-    * jump __label225 greaterThanEq __fn4_cryo __fn4_cryo_req
+  530 jump __label225 greaterThanEq __fn4_cryo 7
   531 print "WAIT cryo\n"
   532 jump __label226 always
   533 label __label225
   534 print "STARTUP\n"
-    * op add START_POWER_REQ START_POWER_REQ PWR_REQ
-    * control enabled __fn4_reactor true
+  535 op add START_POWER_REQ START_POWER_REQ 23000
+  536 control enabled reactor2 true
   537 label __label226
   538 label __label227
   539 label __label228
 
   541 label __label230
   542 label __label231
   543 label __label232
-    * sensor __tmp187 __fn4_reactor @enabled
+  544 sensor __tmp187 reactor2 @enabled
   545 jump __label233 equal __fn4_enabled __tmp187
   546 set RET_T_STARTUP @tick
   547 label __label233
   548 label __label234
   549 set __fn4retval __fn4_supply_fuel
   550 jump __label235 always
-    * set __fn4retval null
   551 label __label235
-    * set fuel_2 __fn4retval
+  552 set fuel_2 __fn4_supply_fuel
   553 set t_startup2 RET_T_STARTUP
   554 label __label116
-    * jump __label117 equal __fn4retval false
+  555 jump __label117 equal __fn4_supply_fuel false
   556 control config unloader3 @blast-compound
   557 jump __label118 always
   558 label __label117
   559 control config unloader3 @scrap
   560 label __label118
-    * jump __label119 notEqual __fn4retval false
+  561 jump __label119 notEqual __fn4_supply_fuel false
   562 control config unloader4 @blast-compound
   563 jump __label120 always
   564 label __label119

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   366 control config unloader2 @scrap
   367 label __label114
   368 label __label115
-    * set __fn4_reactor reactor2
-    * set __fn4_reactor_num 2
-    * set __fn4_emerg_shutdown emerg_shutdown
-    * set __fn4_fuel_on fuel_2
-    * set __fn4_t_startup t_startup2
   369 label __label198
   370 set RET_T_STARTUP t_startup2
   371 op sub __tmp114 @tick t_startup2
 
   481 op sub __tmp156 __fn4_charge START_POWER_REQ
   482 op sub __tmp157 __tmp156 5000
   483 op div __tmp158 __tmp157 23000
-    * op mul __fn4_charge_units __tmp158 0.6
+  484 op div __fn4_charge_units __tmp157 38333.333333333336
   485 op div __tmp160 __fn4_surplus 2000
   486 op max __fn4_flow_units -0.1 __tmp160
   487 op mul __tmp162 2 2
 
   541 set RET_T_STARTUP @tick
   542 label __label233
   543 label __label234
-    * set __fn4retval __fn4_supply_fuel
   544 jump __label235 always
   545 label __label235
   546 set fuel_2 __fn4_supply_fuel

Modifications by Function Inlining: inline function call at line 89 (+139 instructions):
 
   592 set __fn4_emerg_shutdown emerg_shutdown
   593 set __fn4_fuel_on fuel_3
   594 set __fn4_t_startup t_startup3
-    * setaddr __fn4retaddr __label25
-    * call __label4 __fn4retval
-    * gotolabel __label25 __fn4
+  595 label __label236
+  596 set RET_T_STARTUP __fn4_t_startup
+  597 op sub __tmp114 @tick __fn4_t_startup
+  598 op idiv __fn4_secs __tmp114 60
+  599 sensor __fn4_fuel __fn4_reactor @blast-compound
+  600 set __fn4_supply_fuel true
+  601 sensor __fn4_fuel_stored CONTAINER @blast-compound
+  602 sensor __fn4_cryo __fn4_reactor @cryofluid
+  603 sensor __tmp119 NODE @powerNetStored
+  604 op floor __fn4_charge __tmp119
+  605 sensor __tmp121 NODE @powerNetIn
+  606 sensor __tmp122 NODE @powerNetOut
+  607 op sub __tmp123 __tmp121 __tmp122
+  608 op floor __fn4_surplus __tmp123
+  609 op mul __tmp125 AVG_SURPLUS 0.8
+  610 op mul __tmp126 __fn4_surplus 0.2
+  611 op add AVG_SURPLUS __tmp125 __tmp126
+  612 sensor __fn4_enabled __fn4_reactor @enabled
+  613 print "#"
+  614 print __fn4_reactor_num
+  615 print " - "
+  616 jump __label237 equal __fn4_emerg_shutdown false
+  617 control enabled __fn4_reactor false
+  618 print "emergency mode\n"
+  619 set __fn4_supply_fuel false
+  620 jump __label270 always
+  621 label __label237
+  622 jump __label256 equal __fn4_enabled false
+  623 jump __label238 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  624 control enabled __fn4_reactor false
+  625 print "STOP unwanted\n"
+  626 jump __label255 always
+  627 label __label238
+  628 op greaterThan __tmp133 __fn4_reactor_num 1
+  629 op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
+  630 op lessThan __tmp135 __fn4_fuel_stored __tmp134
+  631 op land __tmp136 __tmp133 __tmp135
+  632 jump __label239 equal __tmp136 false
+  633 control enabled __fn4_reactor false
+  634 print "STOP system fuel low\n"
+  635 jump __label254 always
+  636 label __label239
+  637 jump __label240 greaterThan __fn4_fuel 1
+  638 control enabled __fn4_reactor false
+  639 print "STOP fuel low\n"
+  640 jump __label253 always
+  641 label __label240
+  642 jump __label241 greaterThan __fn4_cryo CRYO_ABORT
+  643 control enabled __fn4_reactor false
+  644 print "STOP out of cryo\n"
+  645 jump __label252 always
+  646 label __label241
+  647 jump __label248 greaterThanEq __fn4_secs 30
+  648 label __label242
+  649 op sub __tmp103 @tick __fn4_t_startup
+  650 op idiv __fn3_secs __tmp103 60
+  651 op greaterThan __tmp105 __fn3_secs 30
+  652 sensor __tmp106 __fn4_reactor @enabled
+  653 op equal __tmp107 __tmp106 false
+  654 op or __tmp108 __tmp105 __tmp107
+  655 jump __label243 equal __tmp108 false
+  656 set __fn3retval 0
+  657 jump __label245 always
+  658 label __label243
+  659 label __label244
+  660 op sub __fn3_time_left 30 __fn3_secs
+  661 op mul __tmp111 __fn3_time_left __fn3_time_left
+  662 op idiv __fn3_charge_req __tmp111 0.04
+  663 set __fn3retval __fn3_charge_req
+  664 jump __label245 always
+  665 label __label245
+  666 op sub __tmp144 __fn4_charge __fn3retval
+  667 op lessThan __tmp145 __tmp144 PWR_ABORT
+  668 op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  669 op land __tmp147 __tmp145 __tmp146
+  670 jump __label246 equal __tmp147 false
+  671 control enabled __fn4_reactor false
+  672 print "START FAIL battery\n"
+  673 set __fn4_supply_fuel false
+  674 jump __label247 always
+  675 label __label246
+  676 op sub __fn4_time_left 30 __fn4_secs
+  677 print "Starting "
+  678 print __fn4_time_left
+  679 print " secs, req "
+  680 print __fn3retval
+  681 print "J\n"
+  682 label __label247
+  683 jump __label251 always
+  684 label __label248
+  685 op lessThan __tmp150 __fn4_charge PWR_ABANDON
+  686 op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  687 op land __tmp152 __tmp150 __tmp151
+  688 jump __label249 equal __tmp152 false
+  689 control enabled __fn4_reactor false
+  690 print "ABANDON - battery crit\n"
+  691 set __fn4_supply_fuel false
+  692 jump __label250 always
+  693 label __label249
+  694 op idiv __fn4_mins __fn4_secs 6
+  695 op div __fn4_mins __fn4_mins 10
+  696 print "RUN "
+  697 print __fn4_mins
+  698 print " mins\n"
+  699 label __label250
+  700 label __label251
+  701 label __label252
+  702 label __label253
+  703 label __label254
+  704 label __label255
+  705 jump __label269 always
+  706 label __label256
+  707 op sub __tmp156 __fn4_charge START_POWER_REQ
+  708 op sub __tmp157 __tmp156 PWR_ABORT
+  709 op div __tmp158 __tmp157 PWR_REQ
+  710 op mul __fn4_charge_units __tmp158 PWR_RESERVE
+  711 op div __tmp160 __fn4_surplus FLOW_REQ
+  712 op max __fn4_flow_units -0.1 __tmp160
+  713 op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
+  714 op add __fn4_cryo_req CRYO_REQ __tmp162
+  715 jump __label257 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  716 print "IDLE\n"
+  717 set __fn4_supply_fuel false
+  718 jump __label268 always
+  719 label __label257
+  720 op add __tmp166 __fn4_flow_units __fn4_charge_units
+  721 jump __label258 greaterThanEq __tmp166 1
+  722 op idiv __tmp170 __fn4_flow_units 0.001
+  723 op div __fn4_flow __tmp170 10
+  724 op idiv __tmp173 __fn4_charge_units 0.001
+  725 op div __fn4_charge __tmp173 10
+  726 print "WAIT power. (%"
+  727 print __fn4_charge
+  728 print "J + %"
+  729 print __fn4_flow
+  730 print "W)\n"
+  731 set __fn4_supply_fuel false
+  732 jump __label267 always
+  733 label __label258
+  734 op lessThan __tmp175 __fn4_fuel FUEL_REQ
+  735 op land __tmp176 __fn4_fuel_on __tmp175
+  736 jump __label261 equal __tmp176 false
+  737 op add __tmp178 __fn4_fuel __fn4_fuel_stored
+  738 jump __label259 lessThanEq __tmp178 FUEL_REQ
+  739 print "WAIT fuel\n"
+  740 jump __label260 always
+  741 label __label259
+  742 print "WAIT system fuel\n"
+  743 label __label260
+  744 jump __label266 always
+  745 label __label261
+  746 op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
+  747 jump __label262 greaterThanEq __fn4_fuel_stored __tmp181
+  748 print "WAIT buffer fuel\n"
+  749 jump __label265 always
+  750 label __label262
+  751 jump __label263 greaterThanEq __fn4_cryo __fn4_cryo_req
+  752 print "WAIT cryo\n"
+  753 jump __label264 always
+  754 label __label263
+  755 print "STARTUP\n"
+  756 op add START_POWER_REQ START_POWER_REQ PWR_REQ
+  757 control enabled __fn4_reactor true
+  758 label __label264
+  759 label __label265
+  760 label __label266
+  761 label __label267
+  762 label __label268
+  763 label __label269
+  764 label __label270
+  765 sensor __tmp187 __fn4_reactor @enabled
+  766 jump __label271 equal __fn4_enabled __tmp187
+  767 set RET_T_STARTUP @tick
+  768 label __label271
+  769 label __label272
+  770 set __fn4retval __fn4_supply_fuel
+  771 jump __label273 always
+  772 set __fn4retval null
+  773 label __label273
   774 set fuel_3 __fn4retval
   775 set t_startup3 RET_T_STARTUP
   776 set __fn4_reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
   593 set __fn4_fuel_on fuel_3
   594 set __fn4_t_startup t_startup3
   595 label __label236
-    * set RET_T_STARTUP __fn4_t_startup
-    * op sub __tmp114 @tick __fn4_t_startup
+  596 set RET_T_STARTUP t_startup3
+  597 op sub __tmp114 @tick t_startup3
   598 op idiv __fn4_secs __tmp114 60
-    * sensor __fn4_fuel __fn4_reactor @blast-compound
+  599 sensor __fn4_fuel reactor3 @blast-compound
   600 set __fn4_supply_fuel true
-    * sensor __fn4_fuel_stored CONTAINER @blast-compound
-    * sensor __fn4_cryo __fn4_reactor @cryofluid
-    * sensor __tmp119 NODE @powerNetStored
+  601 sensor __fn4_fuel_stored vault1 @blast-compound
+  602 sensor __fn4_cryo reactor3 @cryofluid
+  603 sensor __tmp119 node1 @powerNetStored
   604 op floor __fn4_charge __tmp119
-    * sensor __tmp121 NODE @powerNetIn
-    * sensor __tmp122 NODE @powerNetOut
+  605 sensor __tmp121 node1 @powerNetIn
+  606 sensor __tmp122 node1 @powerNetOut
   607 op sub __tmp123 __tmp121 __tmp122
   608 op floor __fn4_surplus __tmp123
   609 op mul __tmp125 AVG_SURPLUS 0.8
   610 op mul __tmp126 __fn4_surplus 0.2
   611 op add AVG_SURPLUS __tmp125 __tmp126
-    * sensor __fn4_enabled __fn4_reactor @enabled
+  612 sensor __fn4_enabled reactor3 @enabled
   613 print "#"
-    * print __fn4_reactor_num
+  614 print 3
   615 print " - "
-    * jump __label237 equal __fn4_emerg_shutdown false
-    * control enabled __fn4_reactor false
+  616 jump __label237 equal emerg_shutdown false
+  617 control enabled reactor3 false
   618 print "emergency mode\n"
   619 set __fn4_supply_fuel false
   620 jump __label270 always
   621 label __label237
   622 jump __label256 equal __fn4_enabled false
-    * jump __label238 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
-    * control enabled __fn4_reactor false
+  623 jump __label238 greaterThanEq REACTORS_DESIRED 3
+  624 control enabled reactor3 false
   625 print "STOP unwanted\n"
   626 jump __label255 always
   627 label __label238
-    * op greaterThan __tmp133 __fn4_reactor_num 1
-    * op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
-    * op lessThan __tmp135 __fn4_fuel_stored __tmp134
-    * op land __tmp136 __tmp133 __tmp135
+  628 op greaterThan __tmp133 3 1
+  629 op mul __tmp134 15 3
+  630 op lessThan __tmp135 __fn4_fuel_stored 45
+  631 op land __tmp136 true __tmp135
   632 jump __label239 equal __tmp136 false
-    * control enabled __fn4_reactor false
+  633 control enabled reactor3 false
   634 print "STOP system fuel low\n"
   635 jump __label254 always
   636 label __label239
   637 jump __label240 greaterThan __fn4_fuel 1
-    * control enabled __fn4_reactor false
+  638 control enabled reactor3 false
   639 print "STOP fuel low\n"
   640 jump __label253 always
   641 label __label240
-    * jump __label241 greaterThan __fn4_cryo CRYO_ABORT
-    * control enabled __fn4_reactor false
+  642 jump __label241 greaterThan __fn4_cryo 1
+  643 control enabled reactor3 false
   644 print "STOP out of cryo\n"
   645 jump __label252 always
   646 label __label241
   647 jump __label248 greaterThanEq __fn4_secs 30
   648 label __label242
-    * op sub __tmp103 @tick __fn4_t_startup
+  649 op sub __tmp103 @tick t_startup3
   650 op idiv __fn3_secs __tmp103 60
   651 op greaterThan __tmp105 __fn3_secs 30
-    * sensor __tmp106 __fn4_reactor @enabled
+  652 sensor __tmp106 reactor3 @enabled
   653 op equal __tmp107 __tmp106 false
   654 op or __tmp108 __tmp105 __tmp107
   655 jump __label243 equal __tmp108 false
 
   664 jump __label245 always
   665 label __label245
   666 op sub __tmp144 __fn4_charge __fn3retval
-    * op lessThan __tmp145 __tmp144 PWR_ABORT
-    * op lessThan __tmp146 __fn4_surplus FLOW_ABORT
+  667 op lessThan __tmp145 __tmp144 5000
+  668 op lessThan __tmp146 __fn4_surplus -500
   669 op land __tmp147 __tmp145 __tmp146
   670 jump __label246 equal __tmp147 false
-    * control enabled __fn4_reactor false
+  671 control enabled reactor3 false
   672 print "START FAIL battery\n"
   673 set __fn4_supply_fuel false
   674 jump __label247 always
 
   682 label __label247
   683 jump __label251 always
   684 label __label248
-    * op lessThan __tmp150 __fn4_charge PWR_ABANDON
-    * op lessThan __tmp151 __fn4_surplus FLOW_ABORT
+  685 op lessThan __tmp150 __fn4_charge 2000
+  686 op lessThan __tmp151 __fn4_surplus -500
   687 op land __tmp152 __tmp150 __tmp151
   688 jump __label249 equal __tmp152 false
-    * control enabled __fn4_reactor false
+  689 control enabled reactor3 false
   690 print "ABANDON - battery crit\n"
   691 set __fn4_supply_fuel false
   692 jump __label250 always
 
   705 jump __label269 always
   706 label __label256
   707 op sub __tmp156 __fn4_charge START_POWER_REQ
-    * op sub __tmp157 __tmp156 PWR_ABORT
-    * op div __tmp158 __tmp157 PWR_REQ
-    * op mul __fn4_charge_units __tmp158 PWR_RESERVE
-    * op div __tmp160 __fn4_surplus FLOW_REQ
+  708 op sub __tmp157 __tmp156 5000
+  709 op div __tmp158 __tmp157 23000
+  710 op mul __fn4_charge_units __tmp158 0.6
+  711 op div __tmp160 __fn4_surplus 2000
   712 op max __fn4_flow_units -0.1 __tmp160
-    * op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
-    * op add __fn4_cryo_req CRYO_REQ __tmp162
-    * jump __label257 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
+  713 op mul __tmp162 2 3
+  714 op add __fn4_cryo_req 3 6
+  715 jump __label257 greaterThanEq REACTORS_DESIRED 3
   716 print "IDLE\n"
   717 set __fn4_supply_fuel false
   718 jump __label268 always
 
   731 set __fn4_supply_fuel false
   732 jump __label267 always
   733 label __label258
-    * op lessThan __tmp175 __fn4_fuel FUEL_REQ
-    * op land __tmp176 __fn4_fuel_on __tmp175
+  734 op lessThan __tmp175 __fn4_fuel 10
+  735 op land __tmp176 fuel_3 __tmp175
   736 jump __label261 equal __tmp176 false
   737 op add __tmp178 __fn4_fuel __fn4_fuel_stored
-    * jump __label259 lessThanEq __tmp178 FUEL_REQ
+  738 jump __label259 lessThanEq __tmp178 10
   739 print "WAIT fuel\n"
   740 jump __label260 always
   741 label __label259
 
   743 label __label260
   744 jump __label266 always
   745 label __label261
-    * op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
-    * jump __label262 greaterThanEq __fn4_fuel_stored __tmp181
+  746 op mul __tmp181 45 3
+  747 jump __label262 greaterThanEq __fn4_fuel_stored 135
   748 print "WAIT buffer fuel\n"
   749 jump __label265 always
   750 label __label262
-    * jump __label263 greaterThanEq __fn4_cryo __fn4_cryo_req
+  751 jump __label263 greaterThanEq __fn4_cryo 9
   752 print "WAIT cryo\n"
   753 jump __label264 always
   754 label __label263
   755 print "STARTUP\n"
-    * op add START_POWER_REQ START_POWER_REQ PWR_REQ
-    * control enabled __fn4_reactor true
+  756 op add START_POWER_REQ START_POWER_REQ 23000
+  757 control enabled reactor3 true
   758 label __label264
   759 label __label265
   760 label __label266
 
   762 label __label268
   763 label __label269
   764 label __label270
-    * sensor __tmp187 __fn4_reactor @enabled
+  765 sensor __tmp187 reactor3 @enabled
   766 jump __label271 equal __fn4_enabled __tmp187
   767 set RET_T_STARTUP @tick
   768 label __label271
   769 label __label272
   770 set __fn4retval __fn4_supply_fuel
   771 jump __label273 always
-    * set __fn4retval null
   772 label __label273
-    * set fuel_3 __fn4retval
+  773 set fuel_3 __fn4_supply_fuel
   774 set t_startup3 RET_T_STARTUP
   775 set __fn4_reactor reactor4
   776 set __fn4_reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   587 label __label134
   588 label __label135
   589 op or emerg_shutdown emerg_shutdown __fn2retval
-    * set __fn4_reactor reactor3
-    * set __fn4_reactor_num 3
-    * set __fn4_emerg_shutdown emerg_shutdown
-    * set __fn4_fuel_on fuel_3
-    * set __fn4_t_startup t_startup3
   590 label __label236
   591 set RET_T_STARTUP t_startup3
   592 op sub __tmp114 @tick t_startup3
 
   702 op sub __tmp156 __fn4_charge START_POWER_REQ
   703 op sub __tmp157 __tmp156 5000
   704 op div __tmp158 __tmp157 23000
-    * op mul __fn4_charge_units __tmp158 0.6
+  705 op div __fn4_charge_units __tmp157 38333.333333333336
   706 op div __tmp160 __fn4_surplus 2000
   707 op max __fn4_flow_units -0.1 __tmp160
   708 op mul __tmp162 2 3
 
   762 set RET_T_STARTUP @tick
   763 label __label271
   764 label __label272
-    * set __fn4retval __fn4_supply_fuel
   765 jump __label273 always
   766 label __label273
   767 set fuel_3 __fn4_supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-19 instructions):
 
    59 control enabled projector1 false
    60 control enabled projector2 false
    61 set __fn2retval false
-    * jump __label131 always
    62 label __label130
    63 label __label131
    64 label __label11
 
    74 label __label13
    75 label __label14
    76 set __tmp8 false
-    * jump __label12 always
    77 label __label12
    78 op or emerg_shutdown __fn2retval __tmp8
    79 label __label136
 
    92 op mul __tmp111 __fn3_time_left __fn3_time_left
    93 op idiv __fn3_charge_req __tmp111 0.04
    94 set __fn3retval __fn3_charge_req
-    * jump __label139 always
    95 label __label139
    96 set START_POWER_REQ __fn3retval
    97 label __label140
 
   110 op mul __tmp111 __fn3_time_left __fn3_time_left
   111 op idiv __fn3_charge_req __tmp111 0.04
   112 set __fn3retval __fn3_charge_req
-    * jump __label143 always
   113 label __label143
   114 op add START_POWER_REQ START_POWER_REQ __fn3retval
   115 label __label144
 
   128 op mul __tmp111 __fn3_time_left __fn3_time_left
   129 op idiv __fn3_charge_req __tmp111 0.04
   130 set __fn3retval __fn3_charge_req
-    * jump __label147 always
   131 label __label147
   132 op add START_POWER_REQ START_POWER_REQ __fn3retval
   133 label __label148
 
   146 op mul __tmp111 __fn3_time_left __fn3_time_left
   147 op idiv __fn3_charge_req __tmp111 0.04
   148 set __fn3retval __fn3_charge_req
-    * jump __label151 always
   149 label __label151
   150 op add START_POWER_REQ START_POWER_REQ __fn3retval
   151 label __label152
 
   164 op mul __tmp111 __fn3_time_left __fn3_time_left
   165 op idiv __fn3_charge_req __tmp111 0.04
   166 set __fn3retval __fn3_charge_req
-    * jump __label155 always
   167 label __label155
   168 op add START_POWER_REQ START_POWER_REQ __fn3retval
   169 label __label160
 
   235 op mul __tmp111 __fn3_time_left __fn3_time_left
   236 op idiv __fn3_charge_req __tmp111 0.04
   237 set __fn3retval __fn3_charge_req
-    * jump __label169 always
   238 label __label169
   239 op sub __tmp144 __fn4_charge __fn3retval
   240 op lessThan __tmp145 __tmp144 5000
 
   340 set RET_T_STARTUP @tick
   341 label __label195
   342 label __label196
-    * jump __label197 always
   343 label __label197
   344 set fuel_1 __fn4_supply_fuel
   345 set t_startup1 RET_T_STARTUP
 
   426 op mul __tmp111 __fn3_time_left __fn3_time_left
   427 op idiv __fn3_charge_req __tmp111 0.04
   428 set __fn3retval __fn3_charge_req
-    * jump __label207 always
   429 label __label207
   430 op sub __tmp144 __fn4_charge __fn3retval
   431 op lessThan __tmp145 __tmp144 5000
 
   531 set RET_T_STARTUP @tick
   532 label __label233
   533 label __label234
-    * jump __label235 always
   534 label __label235
   535 set fuel_2 __fn4_supply_fuel
   536 set t_startup2 RET_T_STARTUP
 
   572 control enabled projector1 false
   573 control enabled projector2 false
   574 set __fn2retval false
-    * jump __label135 always
   575 label __label134
   576 label __label135
   577 op or emerg_shutdown emerg_shutdown __fn2retval
 
   644 op mul __tmp111 __fn3_time_left __fn3_time_left
   645 op idiv __fn3_charge_req __tmp111 0.04
   646 set __fn3retval __fn3_charge_req
-    * jump __label245 always
   647 label __label245
   648 op sub __tmp144 __fn4_charge __fn3retval
   649 op lessThan __tmp145 __tmp144 5000
 
   749 set RET_T_STARTUP @tick
   750 label __label271
   751 label __label272
-    * jump __label273 always
   752 label __label273
   753 set fuel_3 __fn4_supply_fuel
   754 set t_startup3 RET_T_STARTUP
 
   835 label __label36
   836 label __label32
   837 op lessThan __tmp38 __fn6_fuel_stored __fn6_limit
-    * jump __label30 always
   838 label __label30
   839 jump __label37 equal __tmp38 false
   840 control config unloader7 @pyratite
 
   862 label __label104
   863 op idiv __tmp95 AVG_SURPLUS 100
   864 op div __fn0retval __tmp95 10
-    * jump __label105 always
   865 label __label105
   866 set surplus __fn0retval
   867 sensor __fn0_val node1 @powerNetStored
   868 label __label106
   869 op idiv __tmp95 __fn0_val 100
   870 op div __fn0retval __tmp95 10
-    * jump __label107 always
   871 label __label107
   872 set charge __fn0retval
   873 jump __label45 lessThanEq START_POWER_REQ 0
   874 label __label108
   875 op idiv __tmp95 START_POWER_REQ 100
   876 op div __fn0retval __tmp95 10
-    * jump __label109 always
   877 label __label109
   878 print "Req "
   879 print __fn0retval
 
   997 op mul __tmp111 __fn3_time_left __fn3_time_left
   998 op idiv __fn3_charge_req __tmp111 0.04
   999 set __fn3retval __fn3_charge_req
-    * jump __label159 always
  1000 label __label159
  1001 op sub __tmp144 __fn4_charge __fn3retval
  1002 op lessThan __tmp145 __tmp144 PWR_ABORT

Modifications by Final phase, Jump Threading, iteration 1:
 
   197 jump __label162 greaterThanEq REACTORS_DESIRED 1
   198 control enabled reactor1 false
   199 print "STOP unwanted\n"
-    * jump __label179 always
+  200 jump __label193 always
   201 label __label162
   202 op greaterThan __tmp133 1 1
   203 op mul __tmp134 15 1
 
   206 jump __label163 equal __tmp136 false
   207 control enabled reactor1 false
   208 print "STOP system fuel low\n"
-    * jump __label178 always
+  209 jump __label193 always
   210 label __label163
   211 jump __label164 greaterThan __fn4_fuel 1
   212 control enabled reactor1 false
   213 print "STOP fuel low\n"
-    * jump __label177 always
+  214 jump __label193 always
   215 label __label164
   216 jump __label165 greaterThan __fn4_cryo 1
   217 control enabled reactor1 false
   218 print "STOP out of cryo\n"
-    * jump __label176 always
+  219 jump __label193 always
   220 label __label165
   221 jump __label172 greaterThanEq __fn4_secs 30
   222 label __label166
 
   244 control enabled reactor1 false
   245 print "START FAIL battery\n"
   246 set __fn4_supply_fuel false
-    * jump __label171 always
+  247 jump __label193 always
   248 label __label170
   249 op sub __fn4_time_left 30 __fn4_secs
   250 print "Starting "
 
   253 print __fn3retval
   254 print "J\n"
   255 label __label171
-    * jump __label175 always
+  256 jump __label193 always
   257 label __label172
   258 op lessThan __tmp150 __fn4_charge 2000
   259 op lessThan __tmp151 __fn4_surplus -500
 
   262 control enabled reactor1 false
   263 print "ABANDON - battery crit\n"
   264 set __fn4_supply_fuel false
-    * jump __label174 always
+  265 jump __label193 always
   266 label __label173
   267 op idiv __fn4_mins __fn4_secs 6
   268 op div __fn4_mins __fn4_mins 10
 
   310 op add __tmp178 __fn4_fuel __fn4_fuel_stored
   311 jump __label183 lessThanEq __tmp178 10
   312 print "WAIT fuel\n"
-    * jump __label184 always
+  313 jump __label190 always
   314 label __label183
   315 print "WAIT system fuel\n"
   316 label __label184
 
   388 jump __label200 greaterThanEq REACTORS_DESIRED 2
   389 control enabled reactor2 false
   390 print "STOP unwanted\n"
-    * jump __label217 always
+  391 jump __label231 always
   392 label __label200
   393 op greaterThan __tmp133 2 1
   394 op mul __tmp134 15 2
 
   397 jump __label201 equal __tmp136 false
   398 control enabled reactor2 false
   399 print "STOP system fuel low\n"
-    * jump __label216 always
+  400 jump __label231 always
   401 label __label201
   402 jump __label202 greaterThan __fn4_fuel 1
   403 control enabled reactor2 false
   404 print "STOP fuel low\n"
-    * jump __label215 always
+  405 jump __label231 always
   406 label __label202
   407 jump __label203 greaterThan __fn4_cryo 1
   408 control enabled reactor2 false
   409 print "STOP out of cryo\n"
-    * jump __label214 always
+  410 jump __label231 always
   411 label __label203
   412 jump __label210 greaterThanEq __fn4_secs 30
   413 label __label204
 
   435 control enabled reactor2 false
   436 print "START FAIL battery\n"
   437 set __fn4_supply_fuel false
-    * jump __label209 always
+  438 jump __label231 always
   439 label __label208
   440 op sub __fn4_time_left 30 __fn4_secs
   441 print "Starting "
 
   444 print __fn3retval
   445 print "J\n"
   446 label __label209
-    * jump __label213 always
+  447 jump __label231 always
   448 label __label210
   449 op lessThan __tmp150 __fn4_charge 2000
   450 op lessThan __tmp151 __fn4_surplus -500
 
   453 control enabled reactor2 false
   454 print "ABANDON - battery crit\n"
   455 set __fn4_supply_fuel false
-    * jump __label212 always
+  456 jump __label231 always
   457 label __label211
   458 op idiv __fn4_mins __fn4_secs 6
   459 op div __fn4_mins __fn4_mins 10
 
   501 op add __tmp178 __fn4_fuel __fn4_fuel_stored
   502 jump __label221 lessThanEq __tmp178 10
   503 print "WAIT fuel\n"
-    * jump __label222 always
+  504 jump __label228 always
   505 label __label221
   506 print "WAIT system fuel\n"
   507 label __label222
 
   606 jump __label238 greaterThanEq REACTORS_DESIRED 3
   607 control enabled reactor3 false
   608 print "STOP unwanted\n"
-    * jump __label255 always
+  609 jump __label269 always
   610 label __label238
   611 op greaterThan __tmp133 3 1
   612 op mul __tmp134 15 3
 
   615 jump __label239 equal __tmp136 false
   616 control enabled reactor3 false
   617 print "STOP system fuel low\n"
-    * jump __label254 always
+  618 jump __label269 always
   619 label __label239
   620 jump __label240 greaterThan __fn4_fuel 1
   621 control enabled reactor3 false
   622 print "STOP fuel low\n"
-    * jump __label253 always
+  623 jump __label269 always
   624 label __label240
   625 jump __label241 greaterThan __fn4_cryo 1
   626 control enabled reactor3 false
   627 print "STOP out of cryo\n"
-    * jump __label252 always
+  628 jump __label269 always
   629 label __label241
   630 jump __label248 greaterThanEq __fn4_secs 30
   631 label __label242
 
   653 control enabled reactor3 false
   654 print "START FAIL battery\n"
   655 set __fn4_supply_fuel false
-    * jump __label247 always
+  656 jump __label269 always
   657 label __label246
   658 op sub __fn4_time_left 30 __fn4_secs
   659 print "Starting "
 
   662 print __fn3retval
   663 print "J\n"
   664 label __label247
-    * jump __label251 always
+  665 jump __label269 always
   666 label __label248
   667 op lessThan __tmp150 __fn4_charge 2000
   668 op lessThan __tmp151 __fn4_surplus -500
 
   671 control enabled reactor3 false
   672 print "ABANDON - battery crit\n"
   673 set __fn4_supply_fuel false
-    * jump __label250 always
+  674 jump __label269 always
   675 label __label249
   676 op idiv __fn4_mins __fn4_secs 6
   677 op div __fn4_mins __fn4_mins 10
 
   719 op add __tmp178 __fn4_fuel __fn4_fuel_stored
   720 jump __label259 lessThanEq __tmp178 10
   721 print "WAIT fuel\n"
-    * jump __label260 always
+  722 jump __label266 always
   723 label __label259
   724 print "WAIT system fuel\n"
   725 label __label260
 
   811 print " - "
   812 jump __label33 equal emerg_shutdown false
   813 print " Enemies detected.\n"
-    * jump __label34 always
+  814 jump __label32 always
   815 label __label33
   816 print " Critical power.\n"
   817 label __label34
 
   959 jump __label75 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
   960 control enabled __fn4_reactor false
   961 print "STOP unwanted\n"
-    * jump __label76 always
+  962 jump __label74 always
   963 label __label75
   964 op greaterThan __tmp133 __fn4_reactor_num 1
   965 op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
 
   968 jump __label77 equal __tmp136 false
   969 control enabled __fn4_reactor false
   970 print "STOP system fuel low\n"
-    * jump __label78 always
+  971 jump __label74 always
   972 label __label77
   973 jump __label79 greaterThan __fn4_fuel 1
   974 control enabled __fn4_reactor false
   975 print "STOP fuel low\n"
-    * jump __label80 always
+  976 jump __label74 always
   977 label __label79
   978 jump __label81 greaterThan __fn4_cryo CRYO_ABORT
   979 control enabled __fn4_reactor false
   980 print "STOP out of cryo\n"
-    * jump __label82 always
+  981 jump __label74 always
   982 label __label81
   983 jump __label83 greaterThanEq __fn4_secs 30
   984 label __label156
 
  1006 control enabled __fn4_reactor false
  1007 print "START FAIL battery\n"
  1008 set __fn4_supply_fuel false
-    * jump __label87 always
+ 1009 jump __label74 always
  1010 label __label86
  1011 op sub __fn4_time_left 30 __fn4_secs
  1012 print "Starting "
 
  1015 print __fn3retval
  1016 print "J\n"
  1017 label __label87
-    * jump __label84 always
+ 1018 jump __label74 always
  1019 label __label83
  1020 op lessThan __tmp150 __fn4_charge PWR_ABANDON
  1021 op lessThan __tmp151 __fn4_surplus FLOW_ABORT
 
  1024 control enabled __fn4_reactor false
  1025 print "ABANDON - battery crit\n"
  1026 set __fn4_supply_fuel false
-    * jump __label89 always
+ 1027 jump __label74 always
  1028 label __label88
  1029 op idiv __fn4_mins __fn4_secs 6
  1030 op div __fn4_mins __fn4_mins 10
 
  1072 op add __tmp178 __fn4_fuel __fn4_fuel_stored
  1073 jump __label96 lessThanEq __tmp178 FUEL_REQ
  1074 print "WAIT fuel\n"
-    * jump __label97 always
+ 1075 jump __label95 always
  1076 label __label96
  1077 print "WAIT system fuel\n"
  1078 label __label97

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-5 instructions):
 
    54 control enabled reactor5 false
    55 set __fn2retval true
    56 jump __label131 always
-    * jump __label130 always
    57 label __label129
    58 control enabled projector1 false
    59 control enabled projector2 false
 
   566 control enabled reactor5 false
   567 set __fn2retval true
   568 jump __label135 always
-    * jump __label134 always
   569 label __label133
   570 control enabled projector1 false
   571 control enabled projector2 false
 
   924 printflush message1
   925 label __label8
   926 jump __label7 always
-    * label __label9
-    * end
   927 label __label4
   928 set RET_T_STARTUP __fn4_t_startup
   929 op sub __tmp114 @tick __fn4_t_startup
 
  1100 label __label103
  1101 set __fn4retval __fn4_supply_fuel
  1102 jump __label70 always
-    * set __fn4retval null
  1103 label __label70
  1104 goto __fn4retaddr __fn4
-    * end

Modifications by Final phase, Single Step Elimination, iteration 1 (-1 instructions):
 
  1099 label __label102
  1100 label __label103
  1101 set __fn4retval __fn4_supply_fuel
-    * jump __label70 always
  1102 label __label70
  1103 goto __fn4retaddr __fn4

Final code before resolving virtual instructions:

printflush message1
set PWR_REQ 23000
set FLOW_REQ 2000
set PWR_ABANDON 2000
set PWR_ABORT 5000
set PWR_RESERVE 0.6
set FLOW_ABORT -500
set FUEL_REQ 10
set FUEL_TOT_REQ 45
set FUEL_TOT_ABORT 15
set CRYO_REQ 3
set CRYO_REQ_EA 2
set CRYO_ABORT 1
set fuel_1 false
set fuel_2 false
set fuel_3 false
set fuel_4 false
set fuel_5 false
sensor __tmp0 node1 @powerNetIn
sensor __tmp1 node1 @powerNetOut
op sub __tmp2 __tmp0 __tmp1
op floor surplus __tmp2 0
jump __label5 lessThanEq surplus 10000
op sub __tmp5 @tick 3600
jump __label6 always 0 0
label __label5
set __tmp5 @tick
label __label6
set t_startup1 __tmp5
set t_startup2 __tmp5
set t_startup3 __tmp5
set t_startup4 __tmp5
set t_startup5 __tmp5
set REACTORS_DESIRED 5
set AVG_SURPLUS 500
label __label7
set CONTAINER vault1
set NODE node1
radar enemy any any health cyclone1 1 __fn2_enemy_found
jump __label129 equal __fn2_enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set __fn2retval true
jump __label131 always 0 0
label __label129
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set __fn2retval false
label __label131
op notEqual __tmp9 switch1 null
sensor __tmp10 switch1 @enabled
op equal __tmp11 __tmp10 false
op land __tmp12 __tmp9 __tmp11
jump __label13 equal __tmp12 false
print "User has disabled emergency switch"
print "\n"
set __tmp8 true
jump __label12 always 0 0
label __label13
set __tmp8 false
label __label12
op or emerg_shutdown __fn2retval __tmp8
op sub __tmp103 @tick t_startup1
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor1 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label137 equal __tmp108 false
set __fn3retval 0
jump __label139 always 0 0
label __label137
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label139
set START_POWER_REQ __fn3retval
op sub __tmp103 @tick t_startup2
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor2 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label141 equal __tmp108 false
set __fn3retval 0
jump __label143 always 0 0
label __label141
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label143
op add START_POWER_REQ START_POWER_REQ __fn3retval
op sub __tmp103 @tick t_startup3
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor3 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label145 equal __tmp108 false
set __fn3retval 0
jump __label147 always 0 0
label __label145
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label147
op add START_POWER_REQ START_POWER_REQ __fn3retval
op sub __tmp103 @tick t_startup4
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor4 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label149 equal __tmp108 false
set __fn3retval 0
jump __label151 always 0 0
label __label149
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label151
op add START_POWER_REQ START_POWER_REQ __fn3retval
op sub __tmp103 @tick t_startup5
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor5 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label153 equal __tmp108 false
set __fn3retval 0
jump __label155 always 0 0
label __label153
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label155
op add START_POWER_REQ START_POWER_REQ __fn3retval
set RET_T_STARTUP t_startup1
op sub __tmp114 @tick t_startup1
op idiv __fn4_secs __tmp114 60
sensor __fn4_fuel reactor1 @blast-compound
set __fn4_supply_fuel true
sensor __fn4_fuel_stored vault1 @blast-compound
sensor __fn4_cryo reactor1 @cryofluid
sensor __tmp119 node1 @powerNetStored
op floor __fn4_charge __tmp119 0
sensor __tmp121 node1 @powerNetIn
sensor __tmp122 node1 @powerNetOut
op sub __tmp123 __tmp121 __tmp122
op floor __fn4_surplus __tmp123 0
op mul __tmp125 AVG_SURPLUS 0.8
op mul __tmp126 __fn4_surplus 0.2
op add AVG_SURPLUS __tmp125 __tmp126
sensor __fn4_enabled reactor1 @enabled
print "#"
print 1
print " - "
jump __label161 equal emerg_shutdown false
control enabled reactor1 false 0 0 0
print "emergency mode\n"
set __fn4_supply_fuel false
jump __label194 always 0 0
label __label161
jump __label180 equal __fn4_enabled false
jump __label162 greaterThanEq REACTORS_DESIRED 1
control enabled reactor1 false 0 0 0
print "STOP unwanted\n"
jump __label193 always 0 0
label __label162
op greaterThan __tmp133 1 1
op mul __tmp134 15 1
op lessThan __tmp135 __fn4_fuel_stored 15
op land __tmp136 false __tmp135
jump __label163 equal __tmp136 false
control enabled reactor1 false 0 0 0
print "STOP system fuel low\n"
jump __label193 always 0 0
label __label163
jump __label164 greaterThan __fn4_fuel 1
control enabled reactor1 false 0 0 0
print "STOP fuel low\n"
jump __label193 always 0 0
label __label164
jump __label165 greaterThan __fn4_cryo 1
control enabled reactor1 false 0 0 0
print "STOP out of cryo\n"
jump __label193 always 0 0
label __label165
jump __label172 greaterThanEq __fn4_secs 30
op sub __tmp103 @tick t_startup1
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor1 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label167 equal __tmp108 false
set __fn3retval 0
jump __label169 always 0 0
label __label167
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label169
op sub __tmp144 __fn4_charge __fn3retval
op lessThan __tmp145 __tmp144 5000
op lessThan __tmp146 __fn4_surplus -500
op land __tmp147 __tmp145 __tmp146
jump __label170 equal __tmp147 false
control enabled reactor1 false 0 0 0
print "START FAIL battery\n"
set __fn4_supply_fuel false
jump __label193 always 0 0
label __label170
op sub __fn4_time_left 30 __fn4_secs
print "Starting "
print __fn4_time_left
print " secs, req "
print __fn3retval
print "J\n"
jump __label193 always 0 0
label __label172
op lessThan __tmp150 __fn4_charge 2000
op lessThan __tmp151 __fn4_surplus -500
op land __tmp152 __tmp150 __tmp151
jump __label173 equal __tmp152 false
control enabled reactor1 false 0 0 0
print "ABANDON - battery crit\n"
set __fn4_supply_fuel false
jump __label193 always 0 0
label __label173
op idiv __fn4_mins __fn4_secs 6
op div __fn4_mins __fn4_mins 10
print "RUN "
print __fn4_mins
print " mins\n"
jump __label193 always 0 0
label __label180
op sub __tmp156 __fn4_charge START_POWER_REQ
op sub __tmp157 __tmp156 5000
op div __tmp158 __tmp157 23000
op div __fn4_charge_units __tmp157 38333.333333333336
op div __tmp160 __fn4_surplus 2000
op max __fn4_flow_units -0.1 __tmp160
op mul __tmp162 2 1
op add __fn4_cryo_req 3 2
jump __label181 greaterThanEq REACTORS_DESIRED 1
print "IDLE\n"
set __fn4_supply_fuel false
jump __label192 always 0 0
label __label181
op add __tmp166 __fn4_flow_units __fn4_charge_units
jump __label182 greaterThanEq __tmp166 1
op idiv __tmp170 __fn4_flow_units 0.001
op div __fn4_flow __tmp170 10
op idiv __tmp173 __fn4_charge_units 0.001
op div __fn4_charge __tmp173 10
print "WAIT power. (%"
print __fn4_charge
print "J + %"
print __fn4_flow
print "W)\n"
set __fn4_supply_fuel false
jump __label191 always 0 0
label __label182
op lessThan __tmp175 __fn4_fuel 10
op land __tmp176 fuel_1 __tmp175
jump __label185 equal __tmp176 false
op add __tmp178 __fn4_fuel __fn4_fuel_stored
jump __label183 lessThanEq __tmp178 10
print "WAIT fuel\n"
jump __label190 always 0 0
label __label183
print "WAIT system fuel\n"
jump __label190 always 0 0
label __label185
op mul __tmp181 45 1
jump __label186 greaterThanEq __fn4_fuel_stored 45
print "WAIT buffer fuel\n"
jump __label189 always 0 0
label __label186
jump __label187 greaterThanEq __fn4_cryo 5
print "WAIT cryo\n"
jump __label188 always 0 0
label __label187
print "STARTUP\n"
op add START_POWER_REQ START_POWER_REQ 23000
control enabled reactor1 true 0 0 0
label __label188
label __label189
label __label190
label __label191
label __label192
label __label193
label __label194
sensor __tmp187 reactor1 @enabled
jump __label195 equal __fn4_enabled __tmp187
set RET_T_STARTUP @tick
label __label195
set fuel_1 __fn4_supply_fuel
set t_startup1 RET_T_STARTUP
jump __label111 equal __fn4_supply_fuel false
control config unloader1 @blast-compound 0 0 0
jump __label112 always 0 0
label __label111
control config unloader1 @scrap 0 0 0
label __label112
jump __label113 notEqual __fn4_supply_fuel false
control config unloader2 @blast-compound 0 0 0
jump __label114 always 0 0
label __label113
control config unloader2 @scrap 0 0 0
label __label114
set RET_T_STARTUP t_startup2
op sub __tmp114 @tick t_startup2
op idiv __fn4_secs __tmp114 60
sensor __fn4_fuel reactor2 @blast-compound
set __fn4_supply_fuel true
sensor __fn4_fuel_stored vault1 @blast-compound
sensor __fn4_cryo reactor2 @cryofluid
sensor __tmp119 node1 @powerNetStored
op floor __fn4_charge __tmp119 0
sensor __tmp121 node1 @powerNetIn
sensor __tmp122 node1 @powerNetOut
op sub __tmp123 __tmp121 __tmp122
op floor __fn4_surplus __tmp123 0
op mul __tmp125 AVG_SURPLUS 0.8
op mul __tmp126 __fn4_surplus 0.2
op add AVG_SURPLUS __tmp125 __tmp126
sensor __fn4_enabled reactor2 @enabled
print "#"
print 2
print " - "
jump __label199 equal emerg_shutdown false
control enabled reactor2 false 0 0 0
print "emergency mode\n"
set __fn4_supply_fuel false
jump __label232 always 0 0
label __label199
jump __label218 equal __fn4_enabled false
jump __label200 greaterThanEq REACTORS_DESIRED 2
control enabled reactor2 false 0 0 0
print "STOP unwanted\n"
jump __label231 always 0 0
label __label200
op greaterThan __tmp133 2 1
op mul __tmp134 15 2
op lessThan __tmp135 __fn4_fuel_stored 30
op land __tmp136 true __tmp135
jump __label201 equal __tmp136 false
control enabled reactor2 false 0 0 0
print "STOP system fuel low\n"
jump __label231 always 0 0
label __label201
jump __label202 greaterThan __fn4_fuel 1
control enabled reactor2 false 0 0 0
print "STOP fuel low\n"
jump __label231 always 0 0
label __label202
jump __label203 greaterThan __fn4_cryo 1
control enabled reactor2 false 0 0 0
print "STOP out of cryo\n"
jump __label231 always 0 0
label __label203
jump __label210 greaterThanEq __fn4_secs 30
op sub __tmp103 @tick t_startup2
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor2 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label205 equal __tmp108 false
set __fn3retval 0
jump __label207 always 0 0
label __label205
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label207
op sub __tmp144 __fn4_charge __fn3retval
op lessThan __tmp145 __tmp144 5000
op lessThan __tmp146 __fn4_surplus -500
op land __tmp147 __tmp145 __tmp146
jump __label208 equal __tmp147 false
control enabled reactor2 false 0 0 0
print "START FAIL battery\n"
set __fn4_supply_fuel false
jump __label231 always 0 0
label __label208
op sub __fn4_time_left 30 __fn4_secs
print "Starting "
print __fn4_time_left
print " secs, req "
print __fn3retval
print "J\n"
jump __label231 always 0 0
label __label210
op lessThan __tmp150 __fn4_charge 2000
op lessThan __tmp151 __fn4_surplus -500
op land __tmp152 __tmp150 __tmp151
jump __label211 equal __tmp152 false
control enabled reactor2 false 0 0 0
print "ABANDON - battery crit\n"
set __fn4_supply_fuel false
jump __label231 always 0 0
label __label211
op idiv __fn4_mins __fn4_secs 6
op div __fn4_mins __fn4_mins 10
print "RUN "
print __fn4_mins
print " mins\n"
jump __label231 always 0 0
label __label218
op sub __tmp156 __fn4_charge START_POWER_REQ
op sub __tmp157 __tmp156 5000
op div __tmp158 __tmp157 23000
op div __fn4_charge_units __tmp157 38333.333333333336
op div __tmp160 __fn4_surplus 2000
op max __fn4_flow_units -0.1 __tmp160
op mul __tmp162 2 2
op add __fn4_cryo_req 3 4
jump __label219 greaterThanEq REACTORS_DESIRED 2
print "IDLE\n"
set __fn4_supply_fuel false
jump __label230 always 0 0
label __label219
op add __tmp166 __fn4_flow_units __fn4_charge_units
jump __label220 greaterThanEq __tmp166 1
op idiv __tmp170 __fn4_flow_units 0.001
op div __fn4_flow __tmp170 10
op idiv __tmp173 __fn4_charge_units 0.001
op div __fn4_charge __tmp173 10
print "WAIT power. (%"
print __fn4_charge
print "J + %"
print __fn4_flow
print "W)\n"
set __fn4_supply_fuel false
jump __label229 always 0 0
label __label220
op lessThan __tmp175 __fn4_fuel 10
op land __tmp176 fuel_2 __tmp175
jump __label223 equal __tmp176 false
op add __tmp178 __fn4_fuel __fn4_fuel_stored
jump __label221 lessThanEq __tmp178 10
print "WAIT fuel\n"
jump __label228 always 0 0
label __label221
print "WAIT system fuel\n"
jump __label228 always 0 0
label __label223
op mul __tmp181 45 2
jump __label224 greaterThanEq __fn4_fuel_stored 90
print "WAIT buffer fuel\n"
jump __label227 always 0 0
label __label224
jump __label225 greaterThanEq __fn4_cryo 7
print "WAIT cryo\n"
jump __label226 always 0 0
label __label225
print "STARTUP\n"
op add START_POWER_REQ START_POWER_REQ 23000
control enabled reactor2 true 0 0 0
label __label226
label __label227
label __label228
label __label229
label __label230
label __label231
label __label232
sensor __tmp187 reactor2 @enabled
jump __label233 equal __fn4_enabled __tmp187
set RET_T_STARTUP @tick
label __label233
set fuel_2 __fn4_supply_fuel
set t_startup2 RET_T_STARTUP
jump __label117 equal __fn4_supply_fuel false
control config unloader3 @blast-compound 0 0 0
jump __label118 always 0 0
label __label117
control config unloader3 @scrap 0 0 0
label __label118
jump __label119 notEqual __fn4_supply_fuel false
control config unloader4 @blast-compound 0 0 0
jump __label120 always 0 0
label __label119
control config unloader4 @scrap 0 0 0
label __label120
radar enemy any any health cyclone1 1 __fn2_enemy_found
jump __label133 equal __fn2_enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set __fn2retval true
jump __label135 always 0 0
label __label133
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set __fn2retval false
label __label135
op or emerg_shutdown emerg_shutdown __fn2retval
set RET_T_STARTUP t_startup3
op sub __tmp114 @tick t_startup3
op idiv __fn4_secs __tmp114 60
sensor __fn4_fuel reactor3 @blast-compound
set __fn4_supply_fuel true
sensor __fn4_fuel_stored vault1 @blast-compound
sensor __fn4_cryo reactor3 @cryofluid
sensor __tmp119 node1 @powerNetStored
op floor __fn4_charge __tmp119 0
sensor __tmp121 node1 @powerNetIn
sensor __tmp122 node1 @powerNetOut
op sub __tmp123 __tmp121 __tmp122
op floor __fn4_surplus __tmp123 0
op mul __tmp125 AVG_SURPLUS 0.8
op mul __tmp126 __fn4_surplus 0.2
op add AVG_SURPLUS __tmp125 __tmp126
sensor __fn4_enabled reactor3 @enabled
print "#"
print 3
print " - "
jump __label237 equal emerg_shutdown false
control enabled reactor3 false 0 0 0
print "emergency mode\n"
set __fn4_supply_fuel false
jump __label270 always 0 0
label __label237
jump __label256 equal __fn4_enabled false
jump __label238 greaterThanEq REACTORS_DESIRED 3
control enabled reactor3 false 0 0 0
print "STOP unwanted\n"
jump __label269 always 0 0
label __label238
op greaterThan __tmp133 3 1
op mul __tmp134 15 3
op lessThan __tmp135 __fn4_fuel_stored 45
op land __tmp136 true __tmp135
jump __label239 equal __tmp136 false
control enabled reactor3 false 0 0 0
print "STOP system fuel low\n"
jump __label269 always 0 0
label __label239
jump __label240 greaterThan __fn4_fuel 1
control enabled reactor3 false 0 0 0
print "STOP fuel low\n"
jump __label269 always 0 0
label __label240
jump __label241 greaterThan __fn4_cryo 1
control enabled reactor3 false 0 0 0
print "STOP out of cryo\n"
jump __label269 always 0 0
label __label241
jump __label248 greaterThanEq __fn4_secs 30
op sub __tmp103 @tick t_startup3
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 reactor3 @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label243 equal __tmp108 false
set __fn3retval 0
jump __label245 always 0 0
label __label243
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label245
op sub __tmp144 __fn4_charge __fn3retval
op lessThan __tmp145 __tmp144 5000
op lessThan __tmp146 __fn4_surplus -500
op land __tmp147 __tmp145 __tmp146
jump __label246 equal __tmp147 false
control enabled reactor3 false 0 0 0
print "START FAIL battery\n"
set __fn4_supply_fuel false
jump __label269 always 0 0
label __label246
op sub __fn4_time_left 30 __fn4_secs
print "Starting "
print __fn4_time_left
print " secs, req "
print __fn3retval
print "J\n"
jump __label269 always 0 0
label __label248
op lessThan __tmp150 __fn4_charge 2000
op lessThan __tmp151 __fn4_surplus -500
op land __tmp152 __tmp150 __tmp151
jump __label249 equal __tmp152 false
control enabled reactor3 false 0 0 0
print "ABANDON - battery crit\n"
set __fn4_supply_fuel false
jump __label269 always 0 0
label __label249
op idiv __fn4_mins __fn4_secs 6
op div __fn4_mins __fn4_mins 10
print "RUN "
print __fn4_mins
print " mins\n"
jump __label269 always 0 0
label __label256
op sub __tmp156 __fn4_charge START_POWER_REQ
op sub __tmp157 __tmp156 5000
op div __tmp158 __tmp157 23000
op div __fn4_charge_units __tmp157 38333.333333333336
op div __tmp160 __fn4_surplus 2000
op max __fn4_flow_units -0.1 __tmp160
op mul __tmp162 2 3
op add __fn4_cryo_req 3 6
jump __label257 greaterThanEq REACTORS_DESIRED 3
print "IDLE\n"
set __fn4_supply_fuel false
jump __label268 always 0 0
label __label257
op add __tmp166 __fn4_flow_units __fn4_charge_units
jump __label258 greaterThanEq __tmp166 1
op idiv __tmp170 __fn4_flow_units 0.001
op div __fn4_flow __tmp170 10
op idiv __tmp173 __fn4_charge_units 0.001
op div __fn4_charge __tmp173 10
print "WAIT power. (%"
print __fn4_charge
print "J + %"
print __fn4_flow
print "W)\n"
set __fn4_supply_fuel false
jump __label267 always 0 0
label __label258
op lessThan __tmp175 __fn4_fuel 10
op land __tmp176 fuel_3 __tmp175
jump __label261 equal __tmp176 false
op add __tmp178 __fn4_fuel __fn4_fuel_stored
jump __label259 lessThanEq __tmp178 10
print "WAIT fuel\n"
jump __label266 always 0 0
label __label259
print "WAIT system fuel\n"
jump __label266 always 0 0
label __label261
op mul __tmp181 45 3
jump __label262 greaterThanEq __fn4_fuel_stored 135
print "WAIT buffer fuel\n"
jump __label265 always 0 0
label __label262
jump __label263 greaterThanEq __fn4_cryo 9
print "WAIT cryo\n"
jump __label264 always 0 0
label __label263
print "STARTUP\n"
op add START_POWER_REQ START_POWER_REQ 23000
control enabled reactor3 true 0 0 0
label __label264
label __label265
label __label266
label __label267
label __label268
label __label269
label __label270
sensor __tmp187 reactor3 @enabled
jump __label271 equal __fn4_enabled __tmp187
set RET_T_STARTUP @tick
label __label271
set fuel_3 __fn4_supply_fuel
set t_startup3 RET_T_STARTUP
set __fn4_reactor reactor4
set __fn4_reactor_num 4
set __fn4_emerg_shutdown emerg_shutdown
set __fn4_fuel_on fuel_4
set __fn4_t_startup t_startup4
setaddr __fn4retaddr __label26
call __label4 __fn4retval
gotolabel __label26 __fn4
set fuel_4 __fn4retval
set t_startup4 RET_T_STARTUP
set __fn4_reactor reactor5
set __fn4_reactor_num 5
set __fn4_emerg_shutdown emerg_shutdown
set __fn4_fuel_on fuel_5
set __fn4_t_startup t_startup5
setaddr __fn4retaddr __label27
call __label4 __fn4retval
gotolabel __label27 __fn4
set fuel_5 __fn4retval
set t_startup5 RET_T_STARTUP
op or __tmp33 fuel_3 fuel_4
op or fuel_many __tmp33 __fn4retval
jump __label123 equal fuel_many false
control config unloader5 @blast-compound 0 0 0
jump __label124 always 0 0
label __label123
control config unloader5 @scrap 0 0 0
label __label124
jump __label125 notEqual fuel_many false
control config unloader6 @blast-compound 0 0 0
jump __label126 always 0 0
label __label125
control config unloader6 @scrap 0 0 0
label __label126
op or __tmp36 fuel_1 fuel_2
op or __tmp37 __tmp36 fuel_many
sensor __tmp39 node1 @powerNetStored
op floor __fn6_charge __tmp39 0
sensor __tmp41 node1 @powerNetIn
sensor __tmp42 node1 @powerNetOut
op sub __tmp43 __tmp41 __tmp42
op floor __fn6_surplus __tmp43 0
sensor __fn6_fuel_stored vault1 @blast-compound
op lessThan __tmp46 __fn6_charge 5000
op lessThan __tmp47 __fn6_surplus -500
op land __tmp48 __tmp46 __tmp47
op or __tmp49 __tmp48 emerg_shutdown
jump __label31 equal __tmp49 false
set __fn6_limit 0
print "Central Fuel at "
print __fn6_fuel_stored
print " / "
print 0
print " - "
jump __label33 equal emerg_shutdown false
print " Enemies detected.\n"
jump __label32 always 0 0
label __label33
print " Critical power.\n"
jump __label32 always 0 0
label __label31
jump __label35 notEqual __tmp37 false
set __fn6_limit 150
print "Fuel "
print __fn6_fuel_stored
print " / "
print 150
print " (due to emergency)\n"
jump __label36 always 0 0
label __label35
set __fn6_limit 800
print "Fuel "
print __fn6_fuel_stored
print " / "
print 800
print "\n"
label __label36
label __label32
op lessThan __tmp38 __fn6_fuel_stored __fn6_limit
jump __label37 equal __tmp38 false
control config unloader7 @pyratite 0 0 0
jump __label38 always 0 0
label __label37
control config unloader7 @scrap 0 0 0
label __label38
sensor __tmp57 node1 @powerNetStored
sensor __tmp58 node1 @powerNetCapacity
op div __fn7_stored_pc __tmp57 __tmp58
op greaterThan __tmp60 __fn7_stored_pc 0.9
op lessThan __tmp61 START_POWER_REQ 10
op land __tmp62 __tmp60 __tmp61
jump __label41 equal __tmp62 false
print "Differential now idle.\n"
control enabled generator1 false 0 0 0
control enabled generator2 false 0 0 0
jump __label42 always 0 0
label __label41
control enabled generator1 true 0 0 0
control enabled generator2 true 0 0 0
label __label42
op idiv __tmp95 AVG_SURPLUS 100
op div __fn0retval __tmp95 10
set surplus __fn0retval
sensor __fn0_val node1 @powerNetStored
op idiv __tmp95 __fn0_val 100
op div __fn0retval __tmp95 10
set charge __fn0retval
jump __label45 lessThanEq START_POWER_REQ 0
op idiv __tmp95 START_POWER_REQ 100
op div __fn0retval __tmp95 10
print "Req "
print __fn0retval
print "kJ / "
print charge
print "kJ. "
print surplus
print "kW flow.\n"
jump __label46 always 0 0
label __label45
print "Power "
print surplus
print "kW, "
print __fn0retval
print "kJ\n"
sensor __tmp71 node1 @powerNetStored
sensor __tmp72 node1 @powerNetCapacity
op div __fn8_stored __tmp71 __tmp72
op greaterThan __tmp74 __fn8_stored 0.98
op greaterThan __tmp76 AVG_SURPLUS 16500
op land __tmp77 __tmp74 __tmp76
jump __label50 equal __tmp77 false
jump __label52 lessThanEq REACTORS_DESIRED 2
op sub REACTORS_DESIRED REACTORS_DESIRED 1
op sub AVG_SURPLUS AVG_SURPLUS 6500
label __label52
label __label50
op lessThan __tmp83 __fn8_stored 0.8
op lessThan __tmp85 AVG_SURPLUS 8000
op land __tmp86 __tmp83 __tmp85
jump __label54 equal __tmp86 false
op sub __tmp88 AVG_SURPLUS 10000
op idiv __tmp89 __tmp88 6500
op max __fn8_needed 1 __tmp89
op add __tmp91 __fn8_needed REACTORS_DESIRED
op min REACTORS_DESIRED 5 __tmp91
label __label54
label __label46
jump __label56 equal REACTORS_DESIRED 5
print "Require only "
print REACTORS_DESIRED
print "/5 reactors.\n"
label __label56
printflush message1
jump __label7 always 0 0
label __label4
set RET_T_STARTUP __fn4_t_startup
op sub __tmp114 @tick __fn4_t_startup
op idiv __fn4_secs __tmp114 60
sensor __fn4_fuel __fn4_reactor @blast-compound
set __fn4_supply_fuel true
sensor __fn4_fuel_stored CONTAINER @blast-compound
sensor __fn4_cryo __fn4_reactor @cryofluid
sensor __tmp119 NODE @powerNetStored
op floor __fn4_charge __tmp119 0
sensor __tmp121 NODE @powerNetIn
sensor __tmp122 NODE @powerNetOut
op sub __tmp123 __tmp121 __tmp122
op floor __fn4_surplus __tmp123 0
op mul __tmp125 AVG_SURPLUS 0.8
op mul __tmp126 __fn4_surplus 0.2
op add AVG_SURPLUS __tmp125 __tmp126
sensor __fn4_enabled __fn4_reactor @enabled
print "#"
print __fn4_reactor_num
print " - "
jump __label71 equal __fn4_emerg_shutdown false
control enabled __fn4_reactor false 0 0 0
print "emergency mode\n"
set __fn4_supply_fuel false
jump __label72 always 0 0
label __label71
jump __label73 equal __fn4_enabled false
jump __label75 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
control enabled __fn4_reactor false 0 0 0
print "STOP unwanted\n"
jump __label74 always 0 0
label __label75
op greaterThan __tmp133 __fn4_reactor_num 1
op mul __tmp134 FUEL_TOT_ABORT __fn4_reactor_num
op lessThan __tmp135 __fn4_fuel_stored __tmp134
op land __tmp136 __tmp133 __tmp135
jump __label77 equal __tmp136 false
control enabled __fn4_reactor false 0 0 0
print "STOP system fuel low\n"
jump __label74 always 0 0
label __label77
jump __label79 greaterThan __fn4_fuel 1
control enabled __fn4_reactor false 0 0 0
print "STOP fuel low\n"
jump __label74 always 0 0
label __label79
jump __label81 greaterThan __fn4_cryo CRYO_ABORT
control enabled __fn4_reactor false 0 0 0
print "STOP out of cryo\n"
jump __label74 always 0 0
label __label81
jump __label83 greaterThanEq __fn4_secs 30
op sub __tmp103 @tick __fn4_t_startup
op idiv __fn3_secs __tmp103 60
op greaterThan __tmp105 __fn3_secs 30
sensor __tmp106 __fn4_reactor @enabled
op equal __tmp107 __tmp106 false
op or __tmp108 __tmp105 __tmp107
jump __label157 equal __tmp108 false
set __fn3retval 0
jump __label159 always 0 0
label __label157
op sub __fn3_time_left 30 __fn3_secs
op mul __tmp111 __fn3_time_left __fn3_time_left
op idiv __fn3_charge_req __tmp111 0.04
set __fn3retval __fn3_charge_req
label __label159
op sub __tmp144 __fn4_charge __fn3retval
op lessThan __tmp145 __tmp144 PWR_ABORT
op lessThan __tmp146 __fn4_surplus FLOW_ABORT
op land __tmp147 __tmp145 __tmp146
jump __label86 equal __tmp147 false
control enabled __fn4_reactor false 0 0 0
print "START FAIL battery\n"
set __fn4_supply_fuel false
jump __label74 always 0 0
label __label86
op sub __fn4_time_left 30 __fn4_secs
print "Starting "
print __fn4_time_left
print " secs, req "
print __fn3retval
print "J\n"
jump __label74 always 0 0
label __label83
op lessThan __tmp150 __fn4_charge PWR_ABANDON
op lessThan __tmp151 __fn4_surplus FLOW_ABORT
op land __tmp152 __tmp150 __tmp151
jump __label88 equal __tmp152 false
control enabled __fn4_reactor false 0 0 0
print "ABANDON - battery crit\n"
set __fn4_supply_fuel false
jump __label74 always 0 0
label __label88
op idiv __fn4_mins __fn4_secs 6
op div __fn4_mins __fn4_mins 10
print "RUN "
print __fn4_mins
print " mins\n"
jump __label74 always 0 0
label __label73
op sub __tmp156 __fn4_charge START_POWER_REQ
op sub __tmp157 __tmp156 PWR_ABORT
op div __tmp158 __tmp157 PWR_REQ
op mul __fn4_charge_units __tmp158 PWR_RESERVE
op div __tmp160 __fn4_surplus FLOW_REQ
op max __fn4_flow_units -0.1 __tmp160
op mul __tmp162 CRYO_REQ_EA __fn4_reactor_num
op add __fn4_cryo_req CRYO_REQ __tmp162
jump __label90 greaterThanEq REACTORS_DESIRED __fn4_reactor_num
print "IDLE\n"
set __fn4_supply_fuel false
jump __label91 always 0 0
label __label90
op add __tmp166 __fn4_flow_units __fn4_charge_units
jump __label92 greaterThanEq __tmp166 1
op idiv __tmp170 __fn4_flow_units 0.001
op div __fn4_flow __tmp170 10
op idiv __tmp173 __fn4_charge_units 0.001
op div __fn4_charge __tmp173 10
print "WAIT power. (%"
print __fn4_charge
print "J + %"
print __fn4_flow
print "W)\n"
set __fn4_supply_fuel false
jump __label93 always 0 0
label __label92
op lessThan __tmp175 __fn4_fuel FUEL_REQ
op land __tmp176 __fn4_fuel_on __tmp175
jump __label94 equal __tmp176 false
op add __tmp178 __fn4_fuel __fn4_fuel_stored
jump __label96 lessThanEq __tmp178 FUEL_REQ
print "WAIT fuel\n"
jump __label95 always 0 0
label __label96
print "WAIT system fuel\n"
jump __label95 always 0 0
label __label94
op mul __tmp181 FUEL_TOT_REQ __fn4_reactor_num
jump __label98 greaterThanEq __fn4_fuel_stored __tmp181
print "WAIT buffer fuel\n"
jump __label99 always 0 0
label __label98
jump __label100 greaterThanEq __fn4_cryo __fn4_cryo_req
print "WAIT cryo\n"
jump __label101 always 0 0
label __label100
print "STARTUP\n"
op add START_POWER_REQ START_POWER_REQ PWR_REQ
control enabled __fn4_reactor true 0 0 0
label __label101
label __label99
label __label95
label __label93
label __label91
label __label74
label __label72
sensor __tmp187 __fn4_reactor @enabled
jump __label102 equal __fn4_enabled __tmp187
set RET_T_STARTUP @tick
label __label102
set __fn4retval __fn4_supply_fuel
goto __fn4retaddr __fn4
