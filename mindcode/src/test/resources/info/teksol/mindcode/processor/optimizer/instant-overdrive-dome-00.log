   454 instructions before optimizations.
    33 instructions eliminated by Temp Variables Elimination.
    63 instructions eliminated by Dead Code Elimination (6 iterations).
     2 instructions eliminated by Jump Normalization (4 iterations).
    22 instructions eliminated by Jump Optimization (4 iterations).
    23 instructions eliminated by Single Step Elimination (2 passes, 6 iterations).
     2 instructions eliminated by If Expression Optimization (3 iterations).
    28 instructions eliminated by Data Flow Optimization (4 passes, 16 iterations).
     2 instructions added by Loop Optimization (3 iterations).
     3 loops improved by Loop Optimization.
   357 instructions added by Function Inlining (9 iterations).
    11 function calls inlined by Function Inlining.
     2 instructions eliminated by Jump Straightening (4 iterations).
     8 instructions updated by PropagateJumpTargets.
     4 instructions eliminated by Unreachable Code Elimination.
     1 instructions eliminated by Print Merging.
   633 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 689):
  * Loop Optimization: replicate condition at line 38            cost     1, benefit       25,0, efficiency       25,0 (+1 instructions)
    Loop Optimization: replicate condition at line 115           cost     1, benefit       25,0, efficiency       25,0
    Function Inlining: inline function processUnit               cost   257, benefit      375,0, efficiency        1,5
    Function Inlining: inline function findUnit                  cost    67, benefit      117,0, efficiency        1,7
    Function Inlining: inline function printDomeStatus           cost     8, benefit      200,0, efficiency       25,0
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 120          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 121          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 123          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 127          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 128          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 130          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 191          cost    17, benefit      112,5, efficiency        6,6

Pass 1: speed optimization selection (cost limit 688):
  * Loop Optimization: replicate condition at line 115           cost     1, benefit       25,0, efficiency       25,0 (+1 instructions)
    Function Inlining: inline function processUnit               cost   257, benefit      375,0, efficiency        1,5
    Function Inlining: inline function findUnit                  cost    67, benefit      117,0, efficiency        1,7
    Function Inlining: inline function printDomeStatus           cost     8, benefit      200,0, efficiency       25,0
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 120          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 121          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 123          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 127          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 128          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 130          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 191          cost    17, benefit      112,5, efficiency        6,6

Pass 1: speed optimization selection (cost limit 687):
    Function Inlining: inline function processUnit               cost   257, benefit      375,0, efficiency        1,5
    Function Inlining: inline function findUnit                  cost    67, benefit      117,0, efficiency        1,7
  * Function Inlining: inline function printDomeStatus           cost     8, benefit      200,0, efficiency       25,0 (+0 instructions)
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 120          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 121          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 123          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 127          cost     9, benefit      100,0, efficiency       11,1
    Function Inlining: inline function call at line 128          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 130          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 191          cost    17, benefit      112,5, efficiency        6,6

Pass 1: speed optimization selection (cost limit 687):
    Function Inlining: inline function processUnit               cost   257, benefit      375,0, efficiency        1,5
    Function Inlining: inline function findUnit                  cost    67, benefit      117,0, efficiency        1,7
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 121          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 123          cost    86, benefit       62,5, efficiency        0,7
    Function Inlining: inline function call at line 128          cost    86, benefit      125,0, efficiency        1,5
    Function Inlining: inline function call at line 130          cost    86, benefit       62,5, efficiency        0,7
  * Function Inlining: inline function call at line 191          cost    17, benefit      112,5, efficiency        6,6 (+14 instructions)

Pass 1: speed optimization selection (cost limit 673):
  * Function Inlining: inline function processUnit               cost   299, benefit      375,0, efficiency        1,3 (+273 instructions)
    Function Inlining: inline function findUnit                  cost    50, benefit        4,5, efficiency        0,1
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 121          cost   100, benefit      125,0, efficiency        1,3
    Function Inlining: inline function call at line 123          cost   100, benefit       62,5, efficiency        0,6
    Function Inlining: inline function call at line 128          cost   100, benefit      125,0, efficiency        1,3
    Function Inlining: inline function call at line 130          cost   100, benefit       62,5, efficiency        0,6

Pass 1: speed optimization selection (cost limit 400):
  * Function Inlining: inline function findUnit                  cost    50, benefit        4,5, efficiency        0,1 (+44 instructions)
    Function Inlining: inline function call at line 50           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 51           cost    17, benefit        1,5, efficiency        0,1
    Function Inlining: inline function call at line 84           cost    17, benefit        0,8, efficiency        0,0
    Function Inlining: inline function call at line 85           cost    17, benefit        0,8, efficiency        0,0

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-33 instructions):
 
    31 ubind UNIT
    32 op notEqual __tmp4 @unit null
    33 jump __label14 equal __tmp4 false
-    * set __tmp6 @unit
-    * set __fn3_first_unit __tmp6
+   34 set __fn3_first_unit @unit
    35 jump __label13 always
    36 set __tmp5 null
    37 jump __label15 always
 
    45 label __label12
    46 jump __label11 always
    47 label __label13
-    * set __tmp7 @unit
-    * set __fn3_first_unit __tmp7
+   48 set __fn3_first_unit @unit
    49 label __label16
    50 sensor __tmp8 @unit @controller
    51 op equal __tmp9 __tmp8 @this
    52 jump __label19 equal __tmp9 false
-    * op add __tmp11 __fn3_count 1
-    * set __fn3_count __tmp11
+   53 op add __fn3_count __fn3_count 1
    54 ucontrol flag 1
    55 set UNIT_S2 UNIT_P2
    56 set UNIT_P2 UNIT_S1
    57 set UNIT_S1 UNIT_P1
-    * set __tmp12 @unit
-    * set UNIT_P1 __tmp12
+   58 set UNIT_P1 @unit
    59 op notEqual __tmp13 UNIT_S2 null
    60 jump __label21 equal __tmp13 false
    61 jump __label18 always
 
    86 setaddr __fn1retaddr __label25
    87 call __label1 __fn1retval
    88 gotolabel __label25 __fn1
-    * set __tmp21 __fn1retval
-    * set UNIT_S1 __tmp21
+   89 set UNIT_S1 __fn1retval
    90 set __tmp20 UNIT_S1
    91 jump __label24 always
    92 label __label23
 
    97 setaddr __fn1retaddr __label28
    98 call __label1 __fn1retval
    99 gotolabel __label28 __fn1
-    * set __tmp24 __fn1retval
-    * set UNIT_P1 __tmp24
+  100 set UNIT_P1 __fn1retval
   101 set __tmp23 UNIT_P1
   102 jump __label27 always
   103 label __label26
 
   117 label __label29
   118 set __tmp30 null
   119 label __label30
-    * sensor __tmp31 UNIT_S1 @itemCapacity
-    * set UNIT_CAPACITY __tmp31
-    * sensor __tmp32 UNIT_S1 @speed
-    * set SPEED __tmp32
-    * op div __tmp33 SPEED 10
-    * set SPEED_TENTHS __tmp33
+  120 sensor UNIT_CAPACITY UNIT_S1 @itemCapacity
+  121 sensor SPEED UNIT_S1 @speed
+  122 op div SPEED_TENTHS SPEED 10
   123 print "[gold]Locating core..."
   124 printflush message1
   125 label __label31
-    * ulocate building core false @copper __tmp35 __tmp36 __tmp37 __tmp34
-    * set CORE __tmp34
+  126 ulocate building core false @copper __tmp35 __tmp36 __tmp37 CORE
   127 label __label32
   128 op equal __tmp38 CORE null
   129 jump __label31 notEqual __tmp38 false
   130 label __label33
-    * sensor __tmp39 CORE @x
-    * set CORE_X __tmp39
-    * sensor __tmp40 CORE @y
-    * set CORE_Y __tmp40
-    * sensor __tmp41 DOME @x
-    * set DOME_X __tmp41
-    * sensor __tmp42 DOME @y
-    * set DOME_Y __tmp42
+  131 sensor CORE_X CORE @x
+  132 sensor CORE_Y CORE @y
+  133 sensor DOME_X DOME @x
+  134 sensor DOME_Y DOME @y
   135 op sub __tmp43 DOME_X CORE_X
   136 op sub __tmp44 DOME_Y CORE_Y
   137 op len __tmp45 __tmp43 __tmp44
   138 op mul __tmp46 2 __tmp45
-    * op div __tmp47 __tmp46 SPEED
-    * set travel_time __tmp47
-    * op greaterThanEq __tmp48 travel_time 47
-    * set FOUR_UNITS __tmp48
+  139 op div travel_time __tmp46 SPEED
+  140 op greaterThanEq FOUR_UNITS travel_time 47
   141 jump __label34 equal FOUR_UNITS false
   142 op equal __tmp50 UNIT_S2 null
   143 jump __label36 equal __tmp50 false
   144 setaddr __fn1retaddr __label38
   145 call __label1 __fn1retval
   146 gotolabel __label38 __fn1
-    * set __tmp52 __fn1retval
-    * set UNIT_S2 __tmp52
+  147 set UNIT_S2 __fn1retval
   148 set __tmp51 UNIT_S2
   149 jump __label37 always
   150 label __label36
 
   155 setaddr __fn1retaddr __label41
   156 call __label1 __fn1retval
   157 gotolabel __label41 __fn1
-    * set __tmp55 __fn1retval
-    * set UNIT_P2 __tmp55
+  158 set UNIT_P2 __fn1retval
   159 set __tmp54 UNIT_P2
   160 jump __label40 always
   161 label __label39
 
   207 sensor __tmp69 UNIT_S1 @totalItems
   208 sensor __tmp70 UNIT_S2 @totalItems
   209 op lessThan __tmp71 __tmp69 __tmp70
-    * op or __tmp72 __tmp68 __tmp71
-    * set SUPPLY_S_FIRST __tmp72
+  210 op or SUPPLY_S_FIRST __tmp68 __tmp71
   211 op equal __tmp73 FOUR_UNITS false
   212 sensor __tmp74 UNIT_P1 @totalItems
   213 sensor __tmp75 UNIT_P2 @totalItems
   214 op lessThan __tmp76 __tmp74 __tmp75
-    * op or __tmp77 __tmp73 __tmp76
-    * set SUPPLY_P_FIRST __tmp77
+  215 op or SUPPLY_P_FIRST __tmp73 __tmp76
   216 label __label46
   217 sensor __tmp78 switch1 @enabled
   218 jump __label48 equal __tmp78 false
-    * set __tmp79 @time
-    * set start __tmp79
+  219 set start @time
   220 print " === [gold]Supplying Overdrive Dome[] === "
   221 print "\n"
   222 set __fn2_item @silicon
 
   232 setaddr __fn0retaddr __label50
   233 call __label0 __fn0retval
   234 gotolabel __label50 __fn0
-    * set __tmp81 __fn0retval
-    * set UNIT_S1 __tmp81
+  235 set UNIT_S1 __fn0retval
   236 jump __label51 equal FOUR_UNITS false
   237 op equal __tmp83 SUPPLY_S_FIRST false
   238 set __fn0_unit UNIT_S2
 
   242 setaddr __fn0retaddr __label53
   243 call __label0 __fn0retval
   244 gotolabel __label53 __fn0
-    * set __tmp84 __fn0retval
-    * set UNIT_S2 __tmp84
+  245 set UNIT_S2 __fn0retval
   246 jump __label54 equal SUPPLY_S_FIRST false
   247 sensor __tmp86 UNIT_S1 @totalItems
-    * op greaterThan __tmp87 __tmp86 0
-    * set __tmp85 __tmp87
+  248 op greaterThan __tmp85 __tmp86 0
   249 jump __label55 always
   250 label __label54
   251 sensor __tmp88 UNIT_S2 @totalItems
-    * op equal __tmp89 __tmp88 0
-    * set __tmp85 __tmp89
+  252 op equal __tmp85 __tmp88 0
   253 label __label55
   254 set SUPPLY_S_FIRST __tmp85
   255 set __tmp82 SUPPLY_S_FIRST
 
   270 setaddr __fn0retaddr __label57
   271 call __label0 __fn0retval
   272 gotolabel __label57 __fn0
-    * set __tmp91 __fn0retval
-    * set UNIT_P1 __tmp91
+  273 set UNIT_P1 __fn0retval
   274 jump __label58 equal FOUR_UNITS false
   275 op equal __tmp93 SUPPLY_P_FIRST false
   276 set __fn0_unit UNIT_P2
 
   280 setaddr __fn0retaddr __label60
   281 call __label0 __fn0retval
   282 gotolabel __label60 __fn0
-    * set __tmp94 __fn0retval
-    * set UNIT_P2 __tmp94
+  283 set UNIT_P2 __fn0retval
   284 jump __label61 equal SUPPLY_P_FIRST false
   285 sensor __tmp96 UNIT_P1 @totalItems
-    * op greaterThan __tmp97 __tmp96 0
-    * set __tmp95 __tmp97
+  286 op greaterThan __tmp95 __tmp96 0
   287 jump __label62 always
   288 label __label61
   289 sensor __tmp98 UNIT_P2 @totalItems
-    * op equal __tmp99 __tmp98 0
-    * set __tmp95 __tmp99
+  290 op equal __tmp95 __tmp98 0
   291 label __label62
   292 set SUPPLY_P_FIRST __tmp95
   293 set __tmp92 SUPPLY_P_FIRST
 
   321 label __label64
   322 set __tmp107 null
   323 label __label65
-    * sensor __tmp108 @unit @flag
-    * set __fn0_state __tmp108
+  324 sensor __fn0_state @unit @flag
   325 set __fn0_distance -1
   326 set __fn0_color "gold"
   327 op equal __tmp109 __fn0_state 1
 
   386 op sub __tmp129 CORE_Y __tmp128
   387 op len __tmp130 __tmp127 __tmp129
   388 op idiv __tmp131 __tmp130 SPEED_TENTHS
-    * op div __tmp132 __tmp131 10
-    * set __fn0_distance __tmp132
+  389 op div __fn0_distance __tmp131 10
   390 set __tmp122 __fn0_distance
   391 label __label78
   392 set __tmp120 __tmp122
 
   430 op sub __tmp144 DOME_Y __tmp143
   431 op len __tmp145 __tmp142 __tmp144
   432 op idiv __tmp146 __tmp145 SPEED_TENTHS
-    * op div __tmp147 __tmp146 10
-    * set __fn0_distance __tmp147
+  433 op div __fn0_distance __tmp146 10
   434 set __tmp136 __fn0_distance
   435 label __label84
   436 set __tmp134 __tmp136
 
   502 end
   503 label __label2
   504 print __fn2_text
-    * sensor __tmp156 DOME __fn2_item
-    * set __fn2_level __tmp156
+  505 sensor __fn2_level DOME __fn2_item
   506 op greaterThan __tmp157 __fn2_level 3
   507 jump __label100 equal __tmp157 false
   508 print "  dome:  [green]"

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-42 instructions):
 
    33 jump __label14 equal __tmp4 false
    34 set __fn3_first_unit @unit
    35 jump __label13 always
-    * set __tmp5 null
    36 jump __label15 always
    37 label __label14
-    * set __tmp5 null
    38 label __label15
    39 print "[salmon]No unit of type "
    40 print UNIT
 
    62 label __label21
    63 set __tmp14 null
    64 label __label22
-    * set __tmp10 __tmp14
    65 jump __label20 always
    66 label __label19
-    * set __tmp10 null
    67 label __label20
    68 ubind UNIT
    69 label __label17
 
    73 op land __tmp18 __tmp15 __tmp17
    74 jump __label16 notEqual __tmp18 false
    75 label __label18
-    * set __tmp3 __fn3_count
    76 jump __label10 always
-    * set __tmp3 null
    77 label __label10
    78 op equal __tmp19 UNIT_S1 null
    79 jump __label23 equal __tmp19 false
 
    81 call __label1 __fn1retval
    82 gotolabel __label25 __fn1
    83 set UNIT_S1 __fn1retval
-    * set __tmp20 UNIT_S1
    84 jump __label24 always
    85 label __label23
-    * set __tmp20 null
    86 label __label24
    87 op equal __tmp22 UNIT_P1 null
    88 jump __label26 equal __tmp22 false
 
    90 call __label1 __fn1retval
    91 gotolabel __label28 __fn1
    92 set UNIT_P1 __fn1retval
-    * set __tmp23 UNIT_P1
    93 jump __label27 always
    94 label __label26
-    * set __tmp23 null
    95 label __label27
    96 sensor __tmp25 UNIT_S1 @firstItem
    97 op equal __tmp26 __tmp25 @phase-fabric
 
   102 set u UNIT_S1
   103 set UNIT_S1 UNIT_P1
   104 set UNIT_P1 u
-    * set __tmp30 UNIT_P1
   105 jump __label30 always
   106 label __label29
-    * set __tmp30 null
   107 label __label30
   108 sensor UNIT_CAPACITY UNIT_S1 @itemCapacity
   109 sensor SPEED UNIT_S1 @speed
 
   133 call __label1 __fn1retval
   134 gotolabel __label38 __fn1
   135 set UNIT_S2 __fn1retval
-    * set __tmp51 UNIT_S2
   136 jump __label37 always
   137 label __label36
-    * set __tmp51 null
   138 label __label37
   139 op equal __tmp53 UNIT_P2 null
   140 jump __label39 equal __tmp53 false
 
   142 call __label1 __fn1retval
   143 gotolabel __label41 __fn1
   144 set UNIT_P2 __fn1retval
-    * set __tmp54 UNIT_P2
   145 jump __label40 always
   146 label __label39
-    * set __tmp54 null
   147 label __label40
   148 sensor __tmp56 UNIT_S1 @firstItem
   149 op equal __tmp57 __tmp56 @phase-fabric
 
   154 set u UNIT_S1
   155 set UNIT_S1 UNIT_P2
   156 set UNIT_P2 u
-    * set __tmp61 UNIT_P2
   157 jump __label43 always
   158 label __label42
-    * set __tmp61 null
   159 label __label43
   160 sensor __tmp62 UNIT_S2 @firstItem
   161 op equal __tmp63 __tmp62 @phase-fabric
 
   166 set u UNIT_S2
   167 set UNIT_S2 UNIT_P2
   168 set UNIT_P2 u
-    * set __tmp67 UNIT_P2
   169 jump __label45 always
   170 label __label44
-    * set __tmp67 null
   171 label __label45
   172 set GROUP1 "probe  1"
   173 set GROUP2 "probe 2"
-    * set __tmp49 GROUP2
   174 jump __label35 always
   175 label __label34
   176 ubind UNIT_S2
 
   180 ucontrol unbind
   181 set UNIT_P2 null
   182 set GROUP1 "probe"
-    * set __tmp49 GROUP1
   183 label __label35
   184 op equal __tmp68 FOUR_UNITS false
   185 sensor __tmp69 UNIT_S1 @totalItems
 
   202 setaddr __fn2retaddr __label49
   203 call __label2 __fn2retval
   204 gotolabel __label49 __fn2
-    * set __tmp80 __fn2retval
   205 set __fn0_unit UNIT_S1
   206 set __fn0_item @silicon
   207 set __fn0_group GROUP1
 
   229 op equal __tmp85 __tmp88 0
   230 label __label55
   231 set SUPPLY_S_FIRST __tmp85
-    * set __tmp82 SUPPLY_S_FIRST
   232 jump __label52 always
   233 label __label51
-    * set __tmp82 null
   234 label __label52
   235 set __fn2_item @phase-fabric
   236 set __fn2_text "\n[green]Phase fabric[] status:\n"
   237 setaddr __fn2retaddr __label56
   238 call __label2 __fn2retval
   239 gotolabel __label56 __fn2
-    * set __tmp90 __fn2retval
   240 set __fn0_unit UNIT_P1
   241 set __fn0_item @phase-fabric
   242 set __fn0_group GROUP1
 
   264 op equal __tmp95 __tmp98 0
   265 label __label62
   266 set SUPPLY_P_FIRST __tmp95
-    * set __tmp92 SUPPLY_P_FIRST
   267 jump __label59 always
   268 label __label58
-    * set __tmp92 null
   269 label __label59
   270 op sub __tmp100 @time start
   271 op floor __tmp101 __tmp100
 
   288 setaddr __fn1retaddr __label66
   289 call __label1 __fn1retval
   290 gotolabel __label66 __fn1
-    * set __tmp107 __fn1retval
   291 jump __label65 always
   292 label __label64
-    * set __tmp107 null
   293 label __label65
   294 sensor __fn0_state @unit @flag
   295 set __fn0_distance -1
 
   324 label __label72
   325 set __tmp113 __tmp116
   326 label __label70
-    * set __tmp110 __tmp113
   327 jump __label68 always
   328 label __label67
-    * set __tmp110 null
   329 label __label68
   330 op equal __tmp119 __fn0_state 2
   331 jump __label75 equal __tmp119 false
 
   357 op div __fn0_distance __tmp131 10
   358 set __tmp122 __fn0_distance
   359 label __label78
-    * set __tmp120 __tmp122
   360 jump __label76 always
   361 label __label75
-    * set __tmp120 null
   362 label __label76
   363 op equal __tmp133 __fn0_state 3
   364 jump __label81 equal __tmp133 false
 
   368 ucontrol itemDrop DOME UNIT_CAPACITY
   369 set MSG ", supplying\n"
   370 set __fn0_color "green"
-    * set __tmp137 __fn0_color
   371 jump __label86 always
   372 label __label85
   373 ucontrol approach DOME_X DOME_Y 6
   374 set MSG ", waiting\n"
-    * set __tmp137 MSG
   375 label __label86
   376 sensor __tmp138 @unit @totalItems
   377 op lessThanEq __tmp139 __tmp138 0
 
   397 op div __fn0_distance __tmp146 10
   398 set __tmp136 __fn0_distance
   399 label __label84
-    * set __tmp134 __tmp136
   400 jump __label82 always
   401 label __label81
-    * set __tmp134 null
   402 label __label82
   403 ucontrol flag __fn0_state
   404 sensor __tmp148 @unit @totalItems
 
   414 print MSG
   415 print __fn0_distance
   416 print "[] sec\n"
-    * set __tmp150 null
   417 jump __label90 always
   418 label __label89
   419 print MSG
-    * set __tmp150 MSG
   420 label __label90
   421 set __fn0retval @unit
   422 jump __label63 always
 
   433 print "[salmon]No unit of type "
   434 print UNIT
   435 print " found..."
-    * set __tmp152 null
   436 jump __label96 always
   437 label __label95
   438 sensor __tmp153 @unit @controlled
 
   449 jump __label91 always
   450 set __tmp155 null
   451 label __label98
-    * set __tmp152 __tmp155
   452 label __label96
   453 printflush message1
   454 label __label93

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-11 instructions):
 
    57 op notEqual __tmp13 UNIT_S2 null
    58 jump __label21 equal __tmp13 false
    59 jump __label18 always
-    * set __tmp14 null
    60 jump __label22 always
    61 label __label21
-    * set __tmp14 null
    62 label __label22
    63 jump __label20 always
    64 label __label19
 
   298 op equal __tmp112 __tmp111 __fn0_item
   299 jump __label69 equal __tmp112 false
   300 set __fn0_state 3
-    * set __tmp113 __fn0_state
   301 jump __label70 always
   302 label __label69
   303 sensor __tmp114 @unit @totalItems
 
   319 label __label74
   320 set __tmp116 __tmp118
   321 label __label72
-    * set __tmp113 __tmp116
   322 label __label70
   323 jump __label68 always
   324 label __label67
 
   339 set MSG ", loading\n"
   340 set __tmp125 MSG
   341 label __label80
-    * set __tmp122 __tmp125
   342 jump __label78 always
   343 label __label77
   344 ucontrol approach CORE_X CORE_Y 6
 
   350 op len __tmp130 __tmp127 __tmp129
   351 op idiv __tmp131 __tmp130 SPEED_TENTHS
   352 op div __fn0_distance __tmp131 10
-    * set __tmp122 __fn0_distance
   353 label __label78
   354 jump __label76 always
   355 label __label75
 
   377 label __label87
   378 set __tmp140 null
   379 label __label88
-    * set __tmp136 __tmp140
   380 jump __label84 always
   381 label __label83
   382 ucontrol approach DOME_X DOME_Y 6
 
   388 op len __tmp145 __tmp142 __tmp144
   389 op idiv __tmp146 __tmp145 SPEED_TENTHS
   390 op div __fn0_distance __tmp146 10
-    * set __tmp136 __fn0_distance
   391 label __label84
   392 jump __label82 always
   393 label __label81
 
   433 print "[salmon]Looking for a free "
   434 print UNIT
   435 print "..."
-    * set __tmp155 null
   436 jump __label98 always
   437 label __label97
   438 ucontrol flag 1
   439 set __fn1retval @unit
   440 jump __label91 always
-    * set __tmp155 null
   441 label __label98
   442 label __label96
   443 printflush message1
 
   464 print "[]\n"
   465 set __tmp158 null
   466 label __label101
-    * set __fn2retval __tmp158
   467 label __label99
   468 goto __fn2retaddr __fn2
   469 end

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-8 instructions):
 
   304 op equal __tmp115 __tmp114 0
   305 jump __label71 equal __tmp115 false
   306 set __fn0_state 2
-    * set __tmp116 __fn0_state
   307 jump __label72 always
   308 label __label71
   309 set MSG ", initializing\n"
 
   316 label __label73
   317 set __tmp118 null
   318 label __label74
-    * set __tmp116 __tmp118
   319 label __label72
   320 label __label70
   321 jump __label68 always
 
   331 jump __label79 equal __tmp124 false
   332 ucontrol approach DOME_X DOME_Y 6
   333 set __fn0_state 3
-    * set __tmp125 __fn0_state
   334 jump __label80 always
   335 label __label79
   336 set MSG ", loading\n"
-    * set __tmp125 MSG
   337 label __label80
   338 jump __label78 always
   339 label __label77
 
   368 jump __label87 equal __tmp139 false
   369 ucontrol approach CORE_X CORE_Y 6
   370 set __fn0_state 2
-    * set __tmp140 __fn0_state
   371 jump __label88 always
   372 label __label87
-    * set __tmp140 null
   373 label __label88
   374 jump __label84 always
   375 label __label83
 
   450 print "  dome:  [green]"
   451 print __fn2_level
   452 print "[]\n"
-    * set __tmp158 null
   453 jump __label101 always
   454 label __label100
   455 print "  dome:  [coral]"
   456 print __fn2_level
   457 print "[]\n"
-    * set __tmp158 null
   458 label __label101
   459 label __label99
   460 goto __fn2retaddr __fn2

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-2 instructions):
 
   311 ucontrol within CORE_X CORE_Y 8 __tmp117
   312 jump __label73 equal __tmp117 false
   313 ucontrol itemDrop CORE UNIT_CAPACITY
-    * set __tmp118 null
   314 jump __label74 always
   315 label __label73
-    * set __tmp118 null
   316 label __label74
   317 label __label72
   318 label __label70

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-2 instructions):
 
    27 set UNIT_S1 UNIT_P1
    28 set __fn3_count 0
    29 label __label11
-    * jump __label13 equal true false
    30 ubind UNIT
    31 op notEqual __tmp4 @unit null
    32 jump __label14 equal __tmp4 false
 
   409 end
   410 label __label1
   411 label __label92
-    * jump __label94 equal true false
   412 ubind UNIT
   413 op equal __tmp151 @unit null
   414 jump __label95 equal __tmp151 false

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-22 instructions):
     0 set UNIT @flare
     1 set DOME dome1
     2 label __label3
-    * op equal __tmp0 DOME null
-    * jump __label5 equal __tmp0 false
+    3 jump __label5 notEqual DOME null
     4 print "[gold]Waiting for an overdrive dome to be connected..."
     5 printflush message1
     6 set DOME dome1
 
     9 label __label5
    10 label __label6
    11 sensor __tmp1 switch1 @enabled
-    * op equal __tmp2 __tmp1 false
-    * jump __label8 equal __tmp2 false
+   12 jump __label8 notEqual __tmp1 false
    13 print "[coral]Activate switch to begin supplying overdrive dome..."
    14 print "\n"
    15 printflush message1
 
    26 set __fn3_count 0
    27 label __label11
    28 ubind UNIT
-    * op notEqual __tmp4 @unit null
-    * jump __label14 equal __tmp4 false
+   29 jump __label14 equal @unit null
    30 set __fn3_first_unit @unit
    31 jump __label13 always
    32 jump __label15 always
 
    42 set __fn3_first_unit @unit
    43 label __label16
    44 sensor __tmp8 @unit @controller
-    * op equal __tmp9 __tmp8 @this
-    * jump __label19 equal __tmp9 false
+   45 jump __label19 notEqual __tmp8 @this
    46 op add __fn3_count __fn3_count 1
    47 ucontrol flag 1
    48 set UNIT_S2 UNIT_P2
    49 set UNIT_P2 UNIT_S1
    50 set UNIT_S1 UNIT_P1
    51 set UNIT_P1 @unit
-    * op notEqual __tmp13 UNIT_S2 null
-    * jump __label21 equal __tmp13 false
+   52 jump __label21 equal UNIT_S2 null
    53 jump __label18 always
    54 jump __label22 always
    55 label __label21
 
    67 label __label18
    68 jump __label10 always
    69 label __label10
-    * op equal __tmp19 UNIT_S1 null
-    * jump __label23 equal __tmp19 false
+   70 jump __label23 notEqual UNIT_S1 null
    71 setaddr __fn1retaddr __label25
    72 call __label1 __fn1retval
    73 gotolabel __label25 __fn1
 
    75 jump __label24 always
    76 label __label23
    77 label __label24
-    * op equal __tmp22 UNIT_P1 null
-    * jump __label26 equal __tmp22 false
+   78 jump __label26 notEqual UNIT_P1 null
    79 setaddr __fn1retaddr __label28
    80 call __label1 __fn1retval
    81 gotolabel __label28 __fn1
 
   103 label __label31
   104 ulocate building core false @copper __tmp35 __tmp36 __tmp37 CORE
   105 label __label32
-    * op equal __tmp38 CORE null
-    * jump __label31 notEqual __tmp38 false
+  106 jump __label31 equal CORE null
   107 label __label33
   108 sensor CORE_X CORE @x
   109 sensor CORE_Y CORE @y
 
   116 op div travel_time __tmp46 SPEED
   117 op greaterThanEq FOUR_UNITS travel_time 47
   118 jump __label34 equal FOUR_UNITS false
-    * op equal __tmp50 UNIT_S2 null
-    * jump __label36 equal __tmp50 false
+  119 jump __label36 notEqual UNIT_S2 null
   120 setaddr __fn1retaddr __label38
   121 call __label1 __fn1retval
   122 gotolabel __label38 __fn1
 
   124 jump __label37 always
   125 label __label36
   126 label __label37
-    * op equal __tmp53 UNIT_P2 null
-    * jump __label39 equal __tmp53 false
+  127 jump __label39 notEqual UNIT_P2 null
   128 setaddr __fn1retaddr __label41
   129 call __label1 __fn1retval
   130 gotolabel __label41 __fn1
 
   270 op strictEqual __tmp103 __tmp102 0
   271 sensor __tmp104 @unit @controller
   272 op notEqual __tmp105 __tmp104 @this
-    * op lessThanEq __tmp106 __tmp103 __tmp105
-    * jump __label64 equal __tmp106 false
+  273 jump __label64 greaterThan __tmp103 __tmp105
   274 setaddr __fn1retaddr __label66
   275 call __label1 __fn1retval
   276 gotolabel __label66 __fn1
 
   280 sensor __fn0_state @unit @flag
   281 set __fn0_distance -1
   282 set __fn0_color "gold"
-    * op equal __tmp109 __fn0_state 1
-    * jump __label67 equal __tmp109 false
+  283 jump __label67 notEqual __fn0_state 1
   284 sensor __tmp111 @unit @firstItem
-    * op equal __tmp112 __tmp111 __fn0_item
-    * jump __label69 equal __tmp112 false
+  285 jump __label69 notEqual __tmp111 __fn0_item
   286 set __fn0_state 3
   287 jump __label70 always
   288 label __label69
   289 sensor __tmp114 @unit @totalItems
-    * op equal __tmp115 __tmp114 0
-    * jump __label71 equal __tmp115 false
+  290 jump __label71 notEqual __tmp114 0
   291 set __fn0_state 2
   292 jump __label72 always
   293 label __label71
 
   304 jump __label68 always
   305 label __label67
   306 label __label68
-    * op equal __tmp119 __fn0_state 2
-    * jump __label75 equal __tmp119 false
+  307 jump __label75 notEqual __fn0_state 2
   308 ucontrol within CORE_X CORE_Y 8 __tmp121
   309 jump __label77 equal __tmp121 false
   310 ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
   311 sensor __tmp123 @unit @totalItems
-    * op greaterThanEq __tmp124 __tmp123 UNIT_CAPACITY
-    * jump __label79 equal __tmp124 false
+  312 jump __label79 lessThan __tmp123 UNIT_CAPACITY
   313 ucontrol approach DOME_X DOME_Y 6
   314 set __fn0_state 3
   315 jump __label80 always
 
   331 jump __label76 always
   332 label __label75
   333 label __label76
-    * op equal __tmp133 __fn0_state 3
-    * jump __label81 equal __tmp133 false
+  334 jump __label81 notEqual __fn0_state 3
   335 ucontrol within DOME_X DOME_Y 8 __tmp135
   336 jump __label83 equal __tmp135 false
   337 jump __label85 equal __fn0_supply false
 
   344 set MSG ", waiting\n"
   345 label __label86
   346 sensor __tmp138 @unit @totalItems
-    * op lessThanEq __tmp139 __tmp138 0
-    * jump __label87 equal __tmp139 false
+  347 jump __label87 greaterThan __tmp138 0
   348 ucontrol approach CORE_X CORE_Y 6
   349 set __fn0_state 2
   350 jump __label88 always
 
   374 print "]"
   375 print __tmp148
   376 print "[]"
-    * op greaterThanEq __tmp149 __fn0_distance 0
-    * jump __label89 equal __tmp149 false
+  377 jump __label89 lessThan __fn0_distance 0
   378 print MSG
   379 print __fn0_distance
   380 print "[] sec\n"
 
   391 label __label1
   392 label __label92
   393 ubind UNIT
-    * op equal __tmp151 @unit null
-    * jump __label95 equal __tmp151 false
+  394 jump __label95 notEqual @unit null
   395 print "[salmon]No unit of type "
   396 print UNIT
   397 print " found..."
   398 jump __label96 always
   399 label __label95
   400 sensor __tmp153 @unit @controlled
-    * op notEqual __tmp154 __tmp153 0
-    * jump __label97 equal __tmp154 false
+  401 jump __label97 equal __tmp153 0
   402 print "[salmon]Looking for a free "
   403 print UNIT
   404 print "..."
 
   420 label __label2
   421 print __fn2_text
   422 sensor __fn2_level DOME __fn2_item
-    * op greaterThan __tmp157 __fn2_level 3
-    * jump __label100 equal __tmp157 false
+  423 jump __label100 lessThanEq __fn2_level 3
   424 print "  dome:  [green]"
   425 print __fn2_level
   426 print "[]\n"

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-19 instructions):
 
    29 jump __label14 equal @unit null
    30 set __fn3_first_unit @unit
    31 jump __label13 always
-    * jump __label15 always
    32 label __label14
    33 label __label15
    34 print "[salmon]No unit of type "
 
    50 set UNIT_P1 @unit
    51 jump __label21 equal UNIT_S2 null
    52 jump __label18 always
-    * jump __label22 always
    53 label __label21
    54 label __label22
-    * jump __label20 always
    55 label __label19
    56 label __label20
    57 ubind UNIT
 
    62 op land __tmp18 __tmp15 __tmp17
    63 jump __label16 notEqual __tmp18 false
    64 label __label18
-    * jump __label10 always
    65 label __label10
    66 jump __label23 notEqual UNIT_S1 null
    67 setaddr __fn1retaddr __label25
    68 call __label1 __fn1retval
    69 gotolabel __label25 __fn1
    70 set UNIT_S1 __fn1retval
-    * jump __label24 always
    71 label __label23
    72 label __label24
    73 jump __label26 notEqual UNIT_P1 null
 
    75 call __label1 __fn1retval
    76 gotolabel __label28 __fn1
    77 set UNIT_P1 __fn1retval
-    * jump __label27 always
    78 label __label26
    79 label __label27
    80 sensor __tmp25 UNIT_S1 @firstItem
 
    86 set u UNIT_S1
    87 set UNIT_S1 UNIT_P1
    88 set UNIT_P1 u
-    * jump __label30 always
    89 label __label29
    90 label __label30
    91 sensor UNIT_CAPACITY UNIT_S1 @itemCapacity
 
   114 call __label1 __fn1retval
   115 gotolabel __label38 __fn1
   116 set UNIT_S2 __fn1retval
-    * jump __label37 always
   117 label __label36
   118 label __label37
   119 jump __label39 notEqual UNIT_P2 null
 
   121 call __label1 __fn1retval
   122 gotolabel __label41 __fn1
   123 set UNIT_P2 __fn1retval
-    * jump __label40 always
   124 label __label39
   125 label __label40
   126 sensor __tmp56 UNIT_S1 @firstItem
 
   132 set u UNIT_S1
   133 set UNIT_S1 UNIT_P2
   134 set UNIT_P2 u
-    * jump __label43 always
   135 label __label42
   136 label __label43
   137 sensor __tmp62 UNIT_S2 @firstItem
 
   143 set u UNIT_S2
   144 set UNIT_S2 UNIT_P2
   145 set UNIT_P2 u
-    * jump __label45 always
   146 label __label44
   147 label __label45
   148 set GROUP1 "probe  1"
 
   205 op equal __tmp85 __tmp88 0
   206 label __label55
   207 set SUPPLY_S_FIRST __tmp85
-    * jump __label52 always
   208 label __label51
   209 label __label52
   210 set __fn2_item @phase-fabric
 
   239 op equal __tmp95 __tmp98 0
   240 label __label62
   241 set SUPPLY_P_FIRST __tmp95
-    * jump __label59 always
   242 label __label58
   243 label __label59
   244 op sub __tmp100 @time start
 
   261 setaddr __fn1retaddr __label66
   262 call __label1 __fn1retval
   263 gotolabel __label66 __fn1
-    * jump __label65 always
   264 label __label64
   265 label __label65
   266 sensor __fn0_state @unit @flag
 
   282 ucontrol within CORE_X CORE_Y 8 __tmp117
   283 jump __label73 equal __tmp117 false
   284 ucontrol itemDrop CORE UNIT_CAPACITY
-    * jump __label74 always
   285 label __label73
   286 label __label74
   287 label __label72
   288 label __label70
-    * jump __label68 always
   289 label __label67
   290 label __label68
   291 jump __label75 notEqual __fn0_state 2
 
   312 op idiv __tmp131 __tmp130 SPEED_TENTHS
   313 op div __fn0_distance __tmp131 10
   314 label __label78
-    * jump __label76 always
   315 label __label75
   316 label __label76
   317 jump __label81 notEqual __fn0_state 3
 
   330 jump __label87 greaterThan __tmp138 0
   331 ucontrol approach CORE_X CORE_Y 6
   332 set __fn0_state 2
-    * jump __label88 always
   333 label __label87
   334 label __label88
   335 jump __label84 always
 
   344 op idiv __tmp146 __tmp145 SPEED_TENTHS
   345 op div __fn0_distance __tmp146 10
   346 label __label84
-    * jump __label82 always
   347 label __label81
   348 label __label82
   349 ucontrol flag __fn0_state

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
   198 set UNIT_S2 __fn0retval
   199 jump __label54 equal SUPPLY_S_FIRST false
   200 sensor __tmp86 UNIT_S1 @totalItems
-    * op greaterThan __tmp85 __tmp86 0
+  201 op greaterThan SUPPLY_S_FIRST __tmp86 0
   202 jump __label55 always
   203 label __label54
   204 sensor __tmp88 UNIT_S2 @totalItems
-    * op equal __tmp85 __tmp88 0
+  205 op equal SUPPLY_S_FIRST __tmp88 0
   206 label __label55
-    * set SUPPLY_S_FIRST __tmp85
   207 label __label51
   208 label __label52
   209 set __fn2_item @phase-fabric
 
   231 set UNIT_P2 __fn0retval
   232 jump __label61 equal SUPPLY_P_FIRST false
   233 sensor __tmp96 UNIT_P1 @totalItems
-    * op greaterThan __tmp95 __tmp96 0
+  234 op greaterThan SUPPLY_P_FIRST __tmp96 0
   235 jump __label62 always
   236 label __label61
   237 sensor __tmp98 UNIT_P2 @totalItems
-    * op equal __tmp95 __tmp98 0
+  238 op equal SUPPLY_P_FIRST __tmp98 0
   239 label __label62
-    * set SUPPLY_P_FIRST __tmp95
   240 label __label58
   241 label __label59
   242 op sub __tmp100 @time start

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    27 label __label11
    28 ubind UNIT
    29 jump __label14 equal @unit null
-    * set __fn3_first_unit @unit
    30 jump __label13 always
    31 label __label14
    32 label __label15
 
   165 sensor __tmp74 UNIT_P1 @totalItems
   166 sensor __tmp75 UNIT_P2 @totalItems
   167 op lessThan __tmp76 __tmp74 __tmp75
-    * op or SUPPLY_P_FIRST __tmp73 __tmp76
+  168 op or SUPPLY_P_FIRST __tmp68 __tmp76
   169 label __label46
   170 sensor __tmp78 switch1 @enabled
   171 jump __label48 equal __tmp78 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-1 instructions):
 
   161 sensor __tmp70 UNIT_S2 @totalItems
   162 op lessThan __tmp71 __tmp69 __tmp70
   163 op or SUPPLY_S_FIRST __tmp68 __tmp71
-    * op equal __tmp73 FOUR_UNITS false
   164 sensor __tmp74 UNIT_P1 @totalItems
   165 sensor __tmp75 UNIT_P2 @totalItems
   166 op lessThan __tmp76 __tmp74 __tmp75

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1:
 
     1 set DOME dome1
     2 label __label3
     3 jump __label5 notEqual DOME null
+    4 label __label102
     5 print "[gold]Waiting for an overdrive dome to be connected..."
     6 printflush message1
     7 set DOME dome1
     8 label __label4
-    * jump __label3 always
+    9 jump __label102 equal DOME null
    10 label __label5
    11 label __label6
    12 sensor __tmp1 switch1 @enabled

Modifications by Loop Optimization: replicate condition at line 38 (+1 instructions):
 
    11 label __label6
    12 sensor __tmp1 switch1 @enabled
    13 jump __label8 notEqual __tmp1 false
+   14 label __label103
    15 print "[coral]Activate switch to begin supplying overdrive dome..."
    16 print "\n"
    17 printflush message1
    18 label __label7
-    * jump __label6 always
+   19 sensor __tmp1 switch1 @enabled
+   20 jump __label103 equal __tmp1 false
    21 label __label8
    22 print "[gold]Binding units..."
    23 printflush message1

Modifications by Loop Optimization: replicate condition at line 115 (+1 instructions):
 
   171 label __label46
   172 sensor __tmp78 switch1 @enabled
   173 jump __label48 equal __tmp78 false
+  174 label __label104
   175 set start @time
   176 print " === [gold]Supplying Overdrive Dome[] === "
   177 print "\n"
 
   248 print " ms"
   249 printflush message1
   250 label __label47
-    * jump __label46 always
+  251 sensor __tmp78 switch1 @enabled
+  252 jump __label104 notEqual __tmp78 false
   253 label __label48
   254 end
   255 label __label0

Modifications by Function Inlining: inline function printDomeStatus (+4 instructions):
 
   177 print "\n"
   178 set __fn2_item @silicon
   179 set __fn2_text "\n[green]Silicon[] status:\n"
-    * setaddr __fn2retaddr __label49
-    * call __label2 __fn2retval
-    * gotolabel __label49 __fn2
+  180 label __label105
+  181 print __fn2_text
+  182 sensor __fn2_level DOME __fn2_item
+  183 jump __label106 lessThanEq __fn2_level 3
+  184 print "  dome:  [green]"
+  185 print __fn2_level
+  186 print "[]\n"
+  187 jump __label107 always
+  188 label __label106
+  189 print "  dome:  [coral]"
+  190 print __fn2_level
+  191 print "[]\n"
+  192 label __label107
+  193 label __label108
   194 set __fn0_unit UNIT_S1
   195 set __fn0_item @silicon
   196 set __fn0_group GROUP1
 
   221 label __label52
   222 set __fn2_item @phase-fabric
   223 set __fn2_text "\n[green]Phase fabric[] status:\n"
-    * setaddr __fn2retaddr __label56
-    * call __label2 __fn2retval
-    * gotolabel __label56 __fn2
+  224 label __label109
+  225 print __fn2_text
+  226 sensor __fn2_level DOME __fn2_item
+  227 jump __label110 lessThanEq __fn2_level 3
+  228 print "  dome:  [green]"
+  229 print __fn2_level
+  230 print "[]\n"
+  231 jump __label111 always
+  232 label __label110
+  233 print "  dome:  [coral]"
+  234 print __fn2_level
+  235 print "[]\n"
+  236 label __label111
+  237 label __label112
   238 set __fn0_unit UNIT_P1
   239 set __fn0_item @phase-fabric
   240 set __fn0_group GROUP1
 
   421 label __label91
   422 goto __fn1retaddr __fn1
   423 end
-    * label __label2
-    * print __fn2_text
-    * sensor __fn2_level DOME __fn2_item
-    * jump __label100 lessThanEq __fn2_level 3
-    * print "  dome:  [green]"
-    * print __fn2_level
-    * print "[]\n"
-    * jump __label101 always
-    * label __label100
-    * print "  dome:  [coral]"
-    * print __fn2_level
-    * print "[]\n"
-    * label __label101
-    * label __label99
-    * goto __fn2retaddr __fn2
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   178 set __fn2_item @silicon
   179 set __fn2_text "\n[green]Silicon[] status:\n"
   180 label __label105
-    * print __fn2_text
-    * sensor __fn2_level DOME __fn2_item
+  181 print "\n[green]Silicon[] status:\n"
+  182 sensor __fn2_level DOME @silicon
   183 jump __label106 lessThanEq __fn2_level 3
   184 print "  dome:  [green]"
   185 print __fn2_level
 
   222 set __fn2_item @phase-fabric
   223 set __fn2_text "\n[green]Phase fabric[] status:\n"
   224 label __label109
-    * print __fn2_text
-    * sensor __fn2_level DOME __fn2_item
+  225 print "\n[green]Phase fabric[] status:\n"
+  226 sensor __fn2_level DOME @phase-fabric
   227 jump __label110 lessThanEq __fn2_level 3
   228 print "  dome:  [green]"
   229 print __fn2_level

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-4 instructions):
 
   175 set start @time
   176 print " === [gold]Supplying Overdrive Dome[] === "
   177 print "\n"
-    * set __fn2_item @silicon
-    * set __fn2_text "\n[green]Silicon[] status:\n"
   178 label __label105
   179 print "\n[green]Silicon[] status:\n"
   180 sensor __fn2_level DOME @silicon
 
   217 label __label55
   218 label __label51
   219 label __label52
-    * set __fn2_item @phase-fabric
-    * set __fn2_text "\n[green]Phase fabric[] status:\n"
   220 label __label109
   221 print "\n[green]Phase fabric[] status:\n"
   222 sensor __fn2_level DOME @phase-fabric

Modifications by Function Inlining: inline function call at line 191 (+16 instructions):
 
   277 sensor __tmp104 @unit @controller
   278 op notEqual __tmp105 __tmp104 @this
   279 jump __label64 greaterThan __tmp103 __tmp105
-    * setaddr __fn1retaddr __label66
-    * call __label1 __fn1retval
-    * gotolabel __label66 __fn1
+  280 label __label113
+  281 label __label114
+  282 ubind UNIT
+  283 jump __label115 notEqual @unit null
+  284 print "[salmon]No unit of type "
+  285 print UNIT
+  286 print " found..."
+  287 jump __label118 always
+  288 label __label115
+  289 sensor __tmp153 @unit @controlled
+  290 jump __label116 equal __tmp153 0
+  291 print "[salmon]Looking for a free "
+  292 print UNIT
+  293 print "..."
+  294 jump __label117 always
+  295 label __label116
+  296 ucontrol flag 1
+  297 set __fn1retval @unit
+  298 jump __label121 always
+  299 label __label117
+  300 label __label118
+  301 printflush message1
+  302 label __label119
+  303 jump __label114 always
+  304 label __label120
+  305 set __fn1retval null
+  306 label __label121
   307 label __label64
   308 label __label65
   309 sensor __fn0_state @unit @flag

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-2 instructions):
 
   294 jump __label117 always
   295 label __label116
   296 ucontrol flag 1
-    * set __fn1retval @unit
   297 jump __label121 always
   298 label __label117
   299 label __label118
 
   301 label __label119
   302 jump __label114 always
   303 label __label120
-    * set __fn1retval null
   304 label __label121
   305 label __label64
   306 label __label65

Modifications by Function Inlining: inline function processUnit (+293 instructions):
 
   193 set __fn0_item @silicon
   194 set __fn0_group GROUP1
   195 set __fn0_supply SUPPLY_S_FIRST
-    * setaddr __fn0retaddr __label50
-    * call __label0 __fn0retval
-    * gotolabel __label50 __fn0
+  196 label __label122
+  197 ubind __fn0_unit
+  198 sensor __tmp102 @unit @dead
+  199 op strictEqual __tmp103 __tmp102 0
+  200 sensor __tmp104 @unit @controller
+  201 op notEqual __tmp105 __tmp104 @this
+  202 jump __label132 greaterThan __tmp103 __tmp105
+  203 label __label123
+  204 label __label124
+  205 ubind UNIT
+  206 jump __label125 notEqual @unit null
+  207 print "[salmon]No unit of type "
+  208 print UNIT
+  209 print " found..."
+  210 jump __label128 always
+  211 label __label125
+  212 sensor __tmp153 @unit @controlled
+  213 jump __label126 equal __tmp153 0
+  214 print "[salmon]Looking for a free "
+  215 print UNIT
+  216 print "..."
+  217 jump __label127 always
+  218 label __label126
+  219 ucontrol flag 1
+  220 jump __label131 always
+  221 label __label127
+  222 label __label128
+  223 printflush message1
+  224 label __label129
+  225 jump __label124 always
+  226 label __label130
+  227 label __label131
+  228 label __label132
+  229 label __label133
+  230 sensor __fn0_state @unit @flag
+  231 set __fn0_distance -1
+  232 set __fn0_color "gold"
+  233 jump __label140 notEqual __fn0_state 1
+  234 sensor __tmp111 @unit @firstItem
+  235 jump __label134 notEqual __tmp111 __fn0_item
+  236 set __fn0_state 3
+  237 jump __label139 always
+  238 label __label134
+  239 sensor __tmp114 @unit @totalItems
+  240 jump __label135 notEqual __tmp114 0
+  241 set __fn0_state 2
+  242 jump __label138 always
+  243 label __label135
+  244 set MSG ", initializing\n"
+  245 ucontrol approach CORE_X CORE_Y 6
+  246 ucontrol within CORE_X CORE_Y 8 __tmp117
+  247 jump __label136 equal __tmp117 false
+  248 ucontrol itemDrop CORE UNIT_CAPACITY
+  249 label __label136
+  250 label __label137
+  251 label __label138
+  252 label __label139
+  253 label __label140
+  254 label __label141
+  255 jump __label146 notEqual __fn0_state 2
+  256 ucontrol within CORE_X CORE_Y 8 __tmp121
+  257 jump __label144 equal __tmp121 false
+  258 ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  259 sensor __tmp123 @unit @totalItems
+  260 jump __label142 lessThan __tmp123 UNIT_CAPACITY
+  261 ucontrol approach DOME_X DOME_Y 6
+  262 set __fn0_state 3
+  263 jump __label143 always
+  264 label __label142
+  265 set MSG ", loading\n"
+  266 label __label143
+  267 jump __label145 always
+  268 label __label144
+  269 ucontrol approach CORE_X CORE_Y 6
+  270 set MSG ", fetching in [gold]"
+  271 sensor __tmp126 @unit @x
+  272 op sub __tmp127 CORE_X __tmp126
+  273 sensor __tmp128 @unit @y
+  274 op sub __tmp129 CORE_Y __tmp128
+  275 op len __tmp130 __tmp127 __tmp129
+  276 op idiv __tmp131 __tmp130 SPEED_TENTHS
+  277 op div __fn0_distance __tmp131 10
+  278 label __label145
+  279 label __label146
+  280 label __label147
+  281 jump __label154 notEqual __fn0_state 3
+  282 ucontrol within DOME_X DOME_Y 8 __tmp135
+  283 jump __label152 equal __tmp135 false
+  284 jump __label148 equal __fn0_supply false
+  285 ucontrol itemDrop DOME UNIT_CAPACITY
+  286 set MSG ", supplying\n"
+  287 set __fn0_color "green"
+  288 jump __label149 always
+  289 label __label148
+  290 ucontrol approach DOME_X DOME_Y 6
+  291 set MSG ", waiting\n"
+  292 label __label149
+  293 sensor __tmp138 @unit @totalItems
+  294 jump __label150 greaterThan __tmp138 0
+  295 ucontrol approach CORE_X CORE_Y 6
+  296 set __fn0_state 2
+  297 label __label150
+  298 label __label151
+  299 jump __label153 always
+  300 label __label152
+  301 ucontrol approach DOME_X DOME_Y 6
+  302 set MSG ", returning in [gold]"
+  303 sensor __tmp141 @unit @x
+  304 op sub __tmp142 DOME_X __tmp141
+  305 sensor __tmp143 @unit @y
+  306 op sub __tmp144 DOME_Y __tmp143
+  307 op len __tmp145 __tmp142 __tmp144
+  308 op idiv __tmp146 __tmp145 SPEED_TENTHS
+  309 op div __fn0_distance __tmp146 10
+  310 label __label153
+  311 label __label154
+  312 label __label155
+  313 ucontrol flag __fn0_state
+  314 sensor __tmp148 @unit @totalItems
+  315 print "  "
+  316 print __fn0_group
+  317 print ": ["
+  318 print __fn0_color
+  319 print "]"
+  320 print __tmp148
+  321 print "[]"
+  322 jump __label156 lessThan __fn0_distance 0
+  323 print MSG
+  324 print __fn0_distance
+  325 print "[] sec\n"
+  326 jump __label157 always
+  327 label __label156
+  328 print MSG
+  329 label __label157
+  330 set __fn0retval @unit
+  331 jump __label158 always
+  332 set __fn0retval null
+  333 label __label158
   334 set UNIT_S1 __fn0retval
   335 jump __label51 equal FOUR_UNITS false
   336 op equal __tmp83 SUPPLY_S_FIRST false
 
   338 set __fn0_item @silicon
   339 set __fn0_group GROUP2
   340 set __fn0_supply __tmp83
-    * setaddr __fn0retaddr __label53
-    * call __label0 __fn0retval
-    * gotolabel __label53 __fn0
+  341 label __label159
+  342 ubind __fn0_unit
+  343 sensor __tmp102 @unit @dead
+  344 op strictEqual __tmp103 __tmp102 0
+  345 sensor __tmp104 @unit @controller
+  346 op notEqual __tmp105 __tmp104 @this
+  347 jump __label169 greaterThan __tmp103 __tmp105
+  348 label __label160
+  349 label __label161
+  350 ubind UNIT
+  351 jump __label162 notEqual @unit null
+  352 print "[salmon]No unit of type "
+  353 print UNIT
+  354 print " found..."
+  355 jump __label165 always
+  356 label __label162
+  357 sensor __tmp153 @unit @controlled
+  358 jump __label163 equal __tmp153 0
+  359 print "[salmon]Looking for a free "
+  360 print UNIT
+  361 print "..."
+  362 jump __label164 always
+  363 label __label163
+  364 ucontrol flag 1
+  365 jump __label168 always
+  366 label __label164
+  367 label __label165
+  368 printflush message1
+  369 label __label166
+  370 jump __label161 always
+  371 label __label167
+  372 label __label168
+  373 label __label169
+  374 label __label170
+  375 sensor __fn0_state @unit @flag
+  376 set __fn0_distance -1
+  377 set __fn0_color "gold"
+  378 jump __label177 notEqual __fn0_state 1
+  379 sensor __tmp111 @unit @firstItem
+  380 jump __label171 notEqual __tmp111 __fn0_item
+  381 set __fn0_state 3
+  382 jump __label176 always
+  383 label __label171
+  384 sensor __tmp114 @unit @totalItems
+  385 jump __label172 notEqual __tmp114 0
+  386 set __fn0_state 2
+  387 jump __label175 always
+  388 label __label172
+  389 set MSG ", initializing\n"
+  390 ucontrol approach CORE_X CORE_Y 6
+  391 ucontrol within CORE_X CORE_Y 8 __tmp117
+  392 jump __label173 equal __tmp117 false
+  393 ucontrol itemDrop CORE UNIT_CAPACITY
+  394 label __label173
+  395 label __label174
+  396 label __label175
+  397 label __label176
+  398 label __label177
+  399 label __label178
+  400 jump __label183 notEqual __fn0_state 2
+  401 ucontrol within CORE_X CORE_Y 8 __tmp121
+  402 jump __label181 equal __tmp121 false
+  403 ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  404 sensor __tmp123 @unit @totalItems
+  405 jump __label179 lessThan __tmp123 UNIT_CAPACITY
+  406 ucontrol approach DOME_X DOME_Y 6
+  407 set __fn0_state 3
+  408 jump __label180 always
+  409 label __label179
+  410 set MSG ", loading\n"
+  411 label __label180
+  412 jump __label182 always
+  413 label __label181
+  414 ucontrol approach CORE_X CORE_Y 6
+  415 set MSG ", fetching in [gold]"
+  416 sensor __tmp126 @unit @x
+  417 op sub __tmp127 CORE_X __tmp126
+  418 sensor __tmp128 @unit @y
+  419 op sub __tmp129 CORE_Y __tmp128
+  420 op len __tmp130 __tmp127 __tmp129
+  421 op idiv __tmp131 __tmp130 SPEED_TENTHS
+  422 op div __fn0_distance __tmp131 10
+  423 label __label182
+  424 label __label183
+  425 label __label184
+  426 jump __label191 notEqual __fn0_state 3
+  427 ucontrol within DOME_X DOME_Y 8 __tmp135
+  428 jump __label189 equal __tmp135 false
+  429 jump __label185 equal __fn0_supply false
+  430 ucontrol itemDrop DOME UNIT_CAPACITY
+  431 set MSG ", supplying\n"
+  432 set __fn0_color "green"
+  433 jump __label186 always
+  434 label __label185
+  435 ucontrol approach DOME_X DOME_Y 6
+  436 set MSG ", waiting\n"
+  437 label __label186
+  438 sensor __tmp138 @unit @totalItems
+  439 jump __label187 greaterThan __tmp138 0
+  440 ucontrol approach CORE_X CORE_Y 6
+  441 set __fn0_state 2
+  442 label __label187
+  443 label __label188
+  444 jump __label190 always
+  445 label __label189
+  446 ucontrol approach DOME_X DOME_Y 6
+  447 set MSG ", returning in [gold]"
+  448 sensor __tmp141 @unit @x
+  449 op sub __tmp142 DOME_X __tmp141
+  450 sensor __tmp143 @unit @y
+  451 op sub __tmp144 DOME_Y __tmp143
+  452 op len __tmp145 __tmp142 __tmp144
+  453 op idiv __tmp146 __tmp145 SPEED_TENTHS
+  454 op div __fn0_distance __tmp146 10
+  455 label __label190
+  456 label __label191
+  457 label __label192
+  458 ucontrol flag __fn0_state
+  459 sensor __tmp148 @unit @totalItems
+  460 print "  "
+  461 print __fn0_group
+  462 print ": ["
+  463 print __fn0_color
+  464 print "]"
+  465 print __tmp148
+  466 print "[]"
+  467 jump __label193 lessThan __fn0_distance 0
+  468 print MSG
+  469 print __fn0_distance
+  470 print "[] sec\n"
+  471 jump __label194 always
+  472 label __label193
+  473 print MSG
+  474 label __label194
+  475 set __fn0retval @unit
+  476 jump __label195 always
+  477 set __fn0retval null
+  478 label __label195
   479 set UNIT_S2 __fn0retval
   480 jump __label54 equal SUPPLY_S_FIRST false
   481 sensor __tmp86 UNIT_S1 @totalItems
 
   505 set __fn0_item @phase-fabric
   506 set __fn0_group GROUP1
   507 set __fn0_supply SUPPLY_P_FIRST
-    * setaddr __fn0retaddr __label57
-    * call __label0 __fn0retval
-    * gotolabel __label57 __fn0
+  508 label __label196
+  509 ubind __fn0_unit
+  510 sensor __tmp102 @unit @dead
+  511 op strictEqual __tmp103 __tmp102 0
+  512 sensor __tmp104 @unit @controller
+  513 op notEqual __tmp105 __tmp104 @this
+  514 jump __label206 greaterThan __tmp103 __tmp105
+  515 label __label197
+  516 label __label198
+  517 ubind UNIT
+  518 jump __label199 notEqual @unit null
+  519 print "[salmon]No unit of type "
+  520 print UNIT
+  521 print " found..."
+  522 jump __label202 always
+  523 label __label199
+  524 sensor __tmp153 @unit @controlled
+  525 jump __label200 equal __tmp153 0
+  526 print "[salmon]Looking for a free "
+  527 print UNIT
+  528 print "..."
+  529 jump __label201 always
+  530 label __label200
+  531 ucontrol flag 1
+  532 jump __label205 always
+  533 label __label201
+  534 label __label202
+  535 printflush message1
+  536 label __label203
+  537 jump __label198 always
+  538 label __label204
+  539 label __label205
+  540 label __label206
+  541 label __label207
+  542 sensor __fn0_state @unit @flag
+  543 set __fn0_distance -1
+  544 set __fn0_color "gold"
+  545 jump __label214 notEqual __fn0_state 1
+  546 sensor __tmp111 @unit @firstItem
+  547 jump __label208 notEqual __tmp111 __fn0_item
+  548 set __fn0_state 3
+  549 jump __label213 always
+  550 label __label208
+  551 sensor __tmp114 @unit @totalItems
+  552 jump __label209 notEqual __tmp114 0
+  553 set __fn0_state 2
+  554 jump __label212 always
+  555 label __label209
+  556 set MSG ", initializing\n"
+  557 ucontrol approach CORE_X CORE_Y 6
+  558 ucontrol within CORE_X CORE_Y 8 __tmp117
+  559 jump __label210 equal __tmp117 false
+  560 ucontrol itemDrop CORE UNIT_CAPACITY
+  561 label __label210
+  562 label __label211
+  563 label __label212
+  564 label __label213
+  565 label __label214
+  566 label __label215
+  567 jump __label220 notEqual __fn0_state 2
+  568 ucontrol within CORE_X CORE_Y 8 __tmp121
+  569 jump __label218 equal __tmp121 false
+  570 ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  571 sensor __tmp123 @unit @totalItems
+  572 jump __label216 lessThan __tmp123 UNIT_CAPACITY
+  573 ucontrol approach DOME_X DOME_Y 6
+  574 set __fn0_state 3
+  575 jump __label217 always
+  576 label __label216
+  577 set MSG ", loading\n"
+  578 label __label217
+  579 jump __label219 always
+  580 label __label218
+  581 ucontrol approach CORE_X CORE_Y 6
+  582 set MSG ", fetching in [gold]"
+  583 sensor __tmp126 @unit @x
+  584 op sub __tmp127 CORE_X __tmp126
+  585 sensor __tmp128 @unit @y
+  586 op sub __tmp129 CORE_Y __tmp128
+  587 op len __tmp130 __tmp127 __tmp129
+  588 op idiv __tmp131 __tmp130 SPEED_TENTHS
+  589 op div __fn0_distance __tmp131 10
+  590 label __label219
+  591 label __label220
+  592 label __label221
+  593 jump __label228 notEqual __fn0_state 3
+  594 ucontrol within DOME_X DOME_Y 8 __tmp135
+  595 jump __label226 equal __tmp135 false
+  596 jump __label222 equal __fn0_supply false
+  597 ucontrol itemDrop DOME UNIT_CAPACITY
+  598 set MSG ", supplying\n"
+  599 set __fn0_color "green"
+  600 jump __label223 always
+  601 label __label222
+  602 ucontrol approach DOME_X DOME_Y 6
+  603 set MSG ", waiting\n"
+  604 label __label223
+  605 sensor __tmp138 @unit @totalItems
+  606 jump __label224 greaterThan __tmp138 0
+  607 ucontrol approach CORE_X CORE_Y 6
+  608 set __fn0_state 2
+  609 label __label224
+  610 label __label225
+  611 jump __label227 always
+  612 label __label226
+  613 ucontrol approach DOME_X DOME_Y 6
+  614 set MSG ", returning in [gold]"
+  615 sensor __tmp141 @unit @x
+  616 op sub __tmp142 DOME_X __tmp141
+  617 sensor __tmp143 @unit @y
+  618 op sub __tmp144 DOME_Y __tmp143
+  619 op len __tmp145 __tmp142 __tmp144
+  620 op idiv __tmp146 __tmp145 SPEED_TENTHS
+  621 op div __fn0_distance __tmp146 10
+  622 label __label227
+  623 label __label228
+  624 label __label229
+  625 ucontrol flag __fn0_state
+  626 sensor __tmp148 @unit @totalItems
+  627 print "  "
+  628 print __fn0_group
+  629 print ": ["
+  630 print __fn0_color
+  631 print "]"
+  632 print __tmp148
+  633 print "[]"
+  634 jump __label230 lessThan __fn0_distance 0
+  635 print MSG
+  636 print __fn0_distance
+  637 print "[] sec\n"
+  638 jump __label231 always
+  639 label __label230
+  640 print MSG
+  641 label __label231
+  642 set __fn0retval @unit
+  643 jump __label232 always
+  644 set __fn0retval null
+  645 label __label232
   646 set UNIT_P1 __fn0retval
   647 jump __label58 equal FOUR_UNITS false
   648 op equal __tmp93 SUPPLY_P_FIRST false
 
   650 set __fn0_item @phase-fabric
   651 set __fn0_group GROUP2
   652 set __fn0_supply __tmp93
-    * setaddr __fn0retaddr __label60
-    * call __label0 __fn0retval
-    * gotolabel __label60 __fn0
+  653 label __label233
+  654 ubind __fn0_unit
+  655 sensor __tmp102 @unit @dead
+  656 op strictEqual __tmp103 __tmp102 0
+  657 sensor __tmp104 @unit @controller
+  658 op notEqual __tmp105 __tmp104 @this
+  659 jump __label243 greaterThan __tmp103 __tmp105
+  660 label __label234
+  661 label __label235
+  662 ubind UNIT
+  663 jump __label236 notEqual @unit null
+  664 print "[salmon]No unit of type "
+  665 print UNIT
+  666 print " found..."
+  667 jump __label239 always
+  668 label __label236
+  669 sensor __tmp153 @unit @controlled
+  670 jump __label237 equal __tmp153 0
+  671 print "[salmon]Looking for a free "
+  672 print UNIT
+  673 print "..."
+  674 jump __label238 always
+  675 label __label237
+  676 ucontrol flag 1
+  677 jump __label242 always
+  678 label __label238
+  679 label __label239
+  680 printflush message1
+  681 label __label240
+  682 jump __label235 always
+  683 label __label241
+  684 label __label242
+  685 label __label243
+  686 label __label244
+  687 sensor __fn0_state @unit @flag
+  688 set __fn0_distance -1
+  689 set __fn0_color "gold"
+  690 jump __label251 notEqual __fn0_state 1
+  691 sensor __tmp111 @unit @firstItem
+  692 jump __label245 notEqual __tmp111 __fn0_item
+  693 set __fn0_state 3
+  694 jump __label250 always
+  695 label __label245
+  696 sensor __tmp114 @unit @totalItems
+  697 jump __label246 notEqual __tmp114 0
+  698 set __fn0_state 2
+  699 jump __label249 always
+  700 label __label246
+  701 set MSG ", initializing\n"
+  702 ucontrol approach CORE_X CORE_Y 6
+  703 ucontrol within CORE_X CORE_Y 8 __tmp117
+  704 jump __label247 equal __tmp117 false
+  705 ucontrol itemDrop CORE UNIT_CAPACITY
+  706 label __label247
+  707 label __label248
+  708 label __label249
+  709 label __label250
+  710 label __label251
+  711 label __label252
+  712 jump __label257 notEqual __fn0_state 2
+  713 ucontrol within CORE_X CORE_Y 8 __tmp121
+  714 jump __label255 equal __tmp121 false
+  715 ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  716 sensor __tmp123 @unit @totalItems
+  717 jump __label253 lessThan __tmp123 UNIT_CAPACITY
+  718 ucontrol approach DOME_X DOME_Y 6
+  719 set __fn0_state 3
+  720 jump __label254 always
+  721 label __label253
+  722 set MSG ", loading\n"
+  723 label __label254
+  724 jump __label256 always
+  725 label __label255
+  726 ucontrol approach CORE_X CORE_Y 6
+  727 set MSG ", fetching in [gold]"
+  728 sensor __tmp126 @unit @x
+  729 op sub __tmp127 CORE_X __tmp126
+  730 sensor __tmp128 @unit @y
+  731 op sub __tmp129 CORE_Y __tmp128
+  732 op len __tmp130 __tmp127 __tmp129
+  733 op idiv __tmp131 __tmp130 SPEED_TENTHS
+  734 op div __fn0_distance __tmp131 10
+  735 label __label256
+  736 label __label257
+  737 label __label258
+  738 jump __label265 notEqual __fn0_state 3
+  739 ucontrol within DOME_X DOME_Y 8 __tmp135
+  740 jump __label263 equal __tmp135 false
+  741 jump __label259 equal __fn0_supply false
+  742 ucontrol itemDrop DOME UNIT_CAPACITY
+  743 set MSG ", supplying\n"
+  744 set __fn0_color "green"
+  745 jump __label260 always
+  746 label __label259
+  747 ucontrol approach DOME_X DOME_Y 6
+  748 set MSG ", waiting\n"
+  749 label __label260
+  750 sensor __tmp138 @unit @totalItems
+  751 jump __label261 greaterThan __tmp138 0
+  752 ucontrol approach CORE_X CORE_Y 6
+  753 set __fn0_state 2
+  754 label __label261
+  755 label __label262
+  756 jump __label264 always
+  757 label __label263
+  758 ucontrol approach DOME_X DOME_Y 6
+  759 set MSG ", returning in [gold]"
+  760 sensor __tmp141 @unit @x
+  761 op sub __tmp142 DOME_X __tmp141
+  762 sensor __tmp143 @unit @y
+  763 op sub __tmp144 DOME_Y __tmp143
+  764 op len __tmp145 __tmp142 __tmp144
+  765 op idiv __tmp146 __tmp145 SPEED_TENTHS
+  766 op div __fn0_distance __tmp146 10
+  767 label __label264
+  768 label __label265
+  769 label __label266
+  770 ucontrol flag __fn0_state
+  771 sensor __tmp148 @unit @totalItems
+  772 print "  "
+  773 print __fn0_group
+  774 print ": ["
+  775 print __fn0_color
+  776 print "]"
+  777 print __tmp148
+  778 print "[]"
+  779 jump __label267 lessThan __fn0_distance 0
+  780 print MSG
+  781 print __fn0_distance
+  782 print "[] sec\n"
+  783 jump __label268 always
+  784 label __label267
+  785 print MSG
+  786 label __label268
+  787 set __fn0retval @unit
+  788 jump __label269 always
+  789 set __fn0retval null
+  790 label __label269
   791 set UNIT_P2 __fn0retval
   792 jump __label61 equal SUPPLY_P_FIRST false
   793 sensor __tmp96 UNIT_P1 @totalItems
 
   810 jump __label104 notEqual __tmp78 false
   811 label __label48
   812 end
-    * label __label0
-    * ubind __fn0_unit
-    * sensor __tmp102 @unit @dead
-    * op strictEqual __tmp103 __tmp102 0
-    * sensor __tmp104 @unit @controller
-    * op notEqual __tmp105 __tmp104 @this
-    * jump __label64 greaterThan __tmp103 __tmp105
-    * label __label113
-    * label __label114
-    * ubind UNIT
-    * jump __label115 notEqual @unit null
-    * print "[salmon]No unit of type "
-    * print UNIT
-    * print " found..."
-    * jump __label118 always
-    * label __label115
-    * sensor __tmp153 @unit @controlled
-    * jump __label116 equal __tmp153 0
-    * print "[salmon]Looking for a free "
-    * print UNIT
-    * print "..."
-    * jump __label117 always
-    * label __label116
-    * ucontrol flag 1
-    * jump __label121 always
-    * label __label117
-    * label __label118
-    * printflush message1
-    * label __label119
-    * jump __label114 always
-    * label __label120
-    * label __label121
-    * label __label64
-    * label __label65
-    * sensor __fn0_state @unit @flag
-    * set __fn0_distance -1
-    * set __fn0_color "gold"
-    * jump __label67 notEqual __fn0_state 1
-    * sensor __tmp111 @unit @firstItem
-    * jump __label69 notEqual __tmp111 __fn0_item
-    * set __fn0_state 3
-    * jump __label70 always
-    * label __label69
-    * sensor __tmp114 @unit @totalItems
-    * jump __label71 notEqual __tmp114 0
-    * set __fn0_state 2
-    * jump __label72 always
-    * label __label71
-    * set MSG ", initializing\n"
-    * ucontrol approach CORE_X CORE_Y 6
-    * ucontrol within CORE_X CORE_Y 8 __tmp117
-    * jump __label73 equal __tmp117 false
-    * ucontrol itemDrop CORE UNIT_CAPACITY
-    * label __label73
-    * label __label74
-    * label __label72
-    * label __label70
-    * label __label67
-    * label __label68
-    * jump __label75 notEqual __fn0_state 2
-    * ucontrol within CORE_X CORE_Y 8 __tmp121
-    * jump __label77 equal __tmp121 false
-    * ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
-    * sensor __tmp123 @unit @totalItems
-    * jump __label79 lessThan __tmp123 UNIT_CAPACITY
-    * ucontrol approach DOME_X DOME_Y 6
-    * set __fn0_state 3
-    * jump __label80 always
-    * label __label79
-    * set MSG ", loading\n"
-    * label __label80
-    * jump __label78 always
-    * label __label77
-    * ucontrol approach CORE_X CORE_Y 6
-    * set MSG ", fetching in [gold]"
-    * sensor __tmp126 @unit @x
-    * op sub __tmp127 CORE_X __tmp126
-    * sensor __tmp128 @unit @y
-    * op sub __tmp129 CORE_Y __tmp128
-    * op len __tmp130 __tmp127 __tmp129
-    * op idiv __tmp131 __tmp130 SPEED_TENTHS
-    * op div __fn0_distance __tmp131 10
-    * label __label78
-    * label __label75
-    * label __label76
-    * jump __label81 notEqual __fn0_state 3
-    * ucontrol within DOME_X DOME_Y 8 __tmp135
-    * jump __label83 equal __tmp135 false
-    * jump __label85 equal __fn0_supply false
-    * ucontrol itemDrop DOME UNIT_CAPACITY
-    * set MSG ", supplying\n"
-    * set __fn0_color "green"
-    * jump __label86 always
-    * label __label85
-    * ucontrol approach DOME_X DOME_Y 6
-    * set MSG ", waiting\n"
-    * label __label86
-    * sensor __tmp138 @unit @totalItems
-    * jump __label87 greaterThan __tmp138 0
-    * ucontrol approach CORE_X CORE_Y 6
-    * set __fn0_state 2
-    * label __label87
-    * label __label88
-    * jump __label84 always
-    * label __label83
-    * ucontrol approach DOME_X DOME_Y 6
-    * set MSG ", returning in [gold]"
-    * sensor __tmp141 @unit @x
-    * op sub __tmp142 DOME_X __tmp141
-    * sensor __tmp143 @unit @y
-    * op sub __tmp144 DOME_Y __tmp143
-    * op len __tmp145 __tmp142 __tmp144
-    * op idiv __tmp146 __tmp145 SPEED_TENTHS
-    * op div __fn0_distance __tmp146 10
-    * label __label84
-    * label __label81
-    * label __label82
-    * ucontrol flag __fn0_state
-    * sensor __tmp148 @unit @totalItems
-    * print "  "
-    * print __fn0_group
-    * print ": ["
-    * print __fn0_color
-    * print "]"
-    * print __tmp148
-    * print "[]"
-    * jump __label89 lessThan __fn0_distance 0
-    * print MSG
-    * print __fn0_distance
-    * print "[] sec\n"
-    * jump __label90 always
-    * label __label89
-    * print MSG
-    * label __label90
-    * set __fn0retval @unit
-    * jump __label63 always
-    * set __fn0retval null
-    * label __label63
-    * goto __fn0retaddr __fn0
-    * end
   813 label __label1
   814 label __label92
   815 ubind UNIT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-4 instructions):
 
   194 set __fn0_group GROUP1
   195 set __fn0_supply SUPPLY_S_FIRST
   196 label __label122
-    * ubind __fn0_unit
+  197 ubind UNIT_S1
   198 sensor __tmp102 @unit @dead
   199 op strictEqual __tmp103 __tmp102 0
   200 sensor __tmp104 @unit @controller
 
   232 set __fn0_color "gold"
   233 jump __label140 notEqual __fn0_state 1
   234 sensor __tmp111 @unit @firstItem
-    * jump __label134 notEqual __tmp111 __fn0_item
+  235 jump __label134 notEqual __tmp111 @silicon
   236 set __fn0_state 3
   237 jump __label139 always
   238 label __label134
 
   255 jump __label146 notEqual __fn0_state 2
   256 ucontrol within CORE_X CORE_Y 8 __tmp121
   257 jump __label144 equal __tmp121 false
-    * ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  258 ucontrol itemTake CORE @silicon UNIT_CAPACITY
   259 sensor __tmp123 @unit @totalItems
   260 jump __label142 lessThan __tmp123 UNIT_CAPACITY
   261 ucontrol approach DOME_X DOME_Y 6
 
   281 jump __label154 notEqual __fn0_state 3
   282 ucontrol within DOME_X DOME_Y 8 __tmp135
   283 jump __label152 equal __tmp135 false
-    * jump __label148 equal __fn0_supply false
+  284 jump __label148 equal SUPPLY_S_FIRST false
   285 ucontrol itemDrop DOME UNIT_CAPACITY
   286 set MSG ", supplying\n"
   287 set __fn0_color "green"
 
   313 ucontrol flag __fn0_state
   314 sensor __tmp148 @unit @totalItems
   315 print "  "
-    * print __fn0_group
+  316 print GROUP1
   317 print ": ["
   318 print __fn0_color
   319 print "]"
 
   329 label __label157
   330 set __fn0retval @unit
   331 jump __label158 always
-    * set __fn0retval null
   332 label __label158
   333 set UNIT_S1 __fn0retval
   334 jump __label51 equal FOUR_UNITS false
 
   338 set __fn0_group GROUP2
   339 set __fn0_supply __tmp83
   340 label __label159
-    * ubind __fn0_unit
+  341 ubind UNIT_S2
   342 sensor __tmp102 @unit @dead
   343 op strictEqual __tmp103 __tmp102 0
   344 sensor __tmp104 @unit @controller
 
   376 set __fn0_color "gold"
   377 jump __label177 notEqual __fn0_state 1
   378 sensor __tmp111 @unit @firstItem
-    * jump __label171 notEqual __tmp111 __fn0_item
+  379 jump __label171 notEqual __tmp111 @silicon
   380 set __fn0_state 3
   381 jump __label176 always
   382 label __label171
 
   399 jump __label183 notEqual __fn0_state 2
   400 ucontrol within CORE_X CORE_Y 8 __tmp121
   401 jump __label181 equal __tmp121 false
-    * ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  402 ucontrol itemTake CORE @silicon UNIT_CAPACITY
   403 sensor __tmp123 @unit @totalItems
   404 jump __label179 lessThan __tmp123 UNIT_CAPACITY
   405 ucontrol approach DOME_X DOME_Y 6
 
   425 jump __label191 notEqual __fn0_state 3
   426 ucontrol within DOME_X DOME_Y 8 __tmp135
   427 jump __label189 equal __tmp135 false
-    * jump __label185 equal __fn0_supply false
+  428 jump __label185 equal __tmp83 false
   429 ucontrol itemDrop DOME UNIT_CAPACITY
   430 set MSG ", supplying\n"
   431 set __fn0_color "green"
 
   457 ucontrol flag __fn0_state
   458 sensor __tmp148 @unit @totalItems
   459 print "  "
-    * print __fn0_group
+  460 print GROUP2
   461 print ": ["
   462 print __fn0_color
   463 print "]"
 
   473 label __label194
   474 set __fn0retval @unit
   475 jump __label195 always
-    * set __fn0retval null
   476 label __label195
   477 set UNIT_S2 __fn0retval
   478 jump __label54 equal SUPPLY_S_FIRST false
 
   504 set __fn0_group GROUP1
   505 set __fn0_supply SUPPLY_P_FIRST
   506 label __label196
-    * ubind __fn0_unit
+  507 ubind UNIT_P1
   508 sensor __tmp102 @unit @dead
   509 op strictEqual __tmp103 __tmp102 0
   510 sensor __tmp104 @unit @controller
 
   542 set __fn0_color "gold"
   543 jump __label214 notEqual __fn0_state 1
   544 sensor __tmp111 @unit @firstItem
-    * jump __label208 notEqual __tmp111 __fn0_item
+  545 jump __label208 notEqual __tmp111 @phase-fabric
   546 set __fn0_state 3
   547 jump __label213 always
   548 label __label208
 
   565 jump __label220 notEqual __fn0_state 2
   566 ucontrol within CORE_X CORE_Y 8 __tmp121
   567 jump __label218 equal __tmp121 false
-    * ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  568 ucontrol itemTake CORE @phase-fabric UNIT_CAPACITY
   569 sensor __tmp123 @unit @totalItems
   570 jump __label216 lessThan __tmp123 UNIT_CAPACITY
   571 ucontrol approach DOME_X DOME_Y 6
 
   591 jump __label228 notEqual __fn0_state 3
   592 ucontrol within DOME_X DOME_Y 8 __tmp135
   593 jump __label226 equal __tmp135 false
-    * jump __label222 equal __fn0_supply false
+  594 jump __label222 equal SUPPLY_P_FIRST false
   595 ucontrol itemDrop DOME UNIT_CAPACITY
   596 set MSG ", supplying\n"
   597 set __fn0_color "green"
 
   623 ucontrol flag __fn0_state
   624 sensor __tmp148 @unit @totalItems
   625 print "  "
-    * print __fn0_group
+  626 print GROUP1
   627 print ": ["
   628 print __fn0_color
   629 print "]"
 
   639 label __label231
   640 set __fn0retval @unit
   641 jump __label232 always
-    * set __fn0retval null
   642 label __label232
   643 set UNIT_P1 __fn0retval
   644 jump __label58 equal FOUR_UNITS false
 
   648 set __fn0_group GROUP2
   649 set __fn0_supply __tmp93
   650 label __label233
-    * ubind __fn0_unit
+  651 ubind UNIT_P2
   652 sensor __tmp102 @unit @dead
   653 op strictEqual __tmp103 __tmp102 0
   654 sensor __tmp104 @unit @controller
 
   686 set __fn0_color "gold"
   687 jump __label251 notEqual __fn0_state 1
   688 sensor __tmp111 @unit @firstItem
-    * jump __label245 notEqual __tmp111 __fn0_item
+  689 jump __label245 notEqual __tmp111 @phase-fabric
   690 set __fn0_state 3
   691 jump __label250 always
   692 label __label245
 
   709 jump __label257 notEqual __fn0_state 2
   710 ucontrol within CORE_X CORE_Y 8 __tmp121
   711 jump __label255 equal __tmp121 false
-    * ucontrol itemTake CORE __fn0_item UNIT_CAPACITY
+  712 ucontrol itemTake CORE @phase-fabric UNIT_CAPACITY
   713 sensor __tmp123 @unit @totalItems
   714 jump __label253 lessThan __tmp123 UNIT_CAPACITY
   715 ucontrol approach DOME_X DOME_Y 6
 
   735 jump __label265 notEqual __fn0_state 3
   736 ucontrol within DOME_X DOME_Y 8 __tmp135
   737 jump __label263 equal __tmp135 false
-    * jump __label259 equal __fn0_supply false
+  738 jump __label259 equal __tmp93 false
   739 ucontrol itemDrop DOME UNIT_CAPACITY
   740 set MSG ", supplying\n"
   741 set __fn0_color "green"
 
   767 ucontrol flag __fn0_state
   768 sensor __tmp148 @unit @totalItems
   769 print "  "
-    * print __fn0_group
+  770 print GROUP2
   771 print ": ["
   772 print __fn0_color
   773 print "]"
 
   783 label __label268
   784 set __fn0retval @unit
   785 jump __label269 always
-    * set __fn0retval null
   786 label __label269
   787 set UNIT_P2 __fn0retval
   788 jump __label61 equal SUPPLY_P_FIRST false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
 
   189 print "[]\n"
   190 label __label107
   191 label __label108
-    * set __fn0_unit UNIT_S1
-    * set __fn0_item @silicon
-    * set __fn0_group GROUP1
-    * set __fn0_supply SUPPLY_S_FIRST
   192 label __label122
   193 ubind UNIT_S1
   194 sensor __tmp102 @unit @dead
 
   329 set UNIT_S1 __fn0retval
   330 jump __label51 equal FOUR_UNITS false
   331 op equal __tmp83 SUPPLY_S_FIRST false
-    * set __fn0_unit UNIT_S2
-    * set __fn0_item @silicon
-    * set __fn0_group GROUP2
-    * set __fn0_supply __tmp83
   332 label __label159
   333 ubind UNIT_S2
   334 sensor __tmp102 @unit @dead
 
   491 print "[]\n"
   492 label __label111
   493 label __label112
-    * set __fn0_unit UNIT_P1
-    * set __fn0_item @phase-fabric
-    * set __fn0_group GROUP1
-    * set __fn0_supply SUPPLY_P_FIRST
   494 label __label196
   495 ubind UNIT_P1
   496 sensor __tmp102 @unit @dead
 
   631 set UNIT_P1 __fn0retval
   632 jump __label58 equal FOUR_UNITS false
   633 op equal __tmp93 SUPPLY_P_FIRST false
-    * set __fn0_unit UNIT_P2
-    * set __fn0_item @phase-fabric
-    * set __fn0_group GROUP2
-    * set __fn0_supply __tmp93
   634 label __label233
   635 ubind UNIT_P2
   636 sensor __tmp102 @unit @dead

Modifications by Function Inlining: inline function findUnit (+44 instructions):
 
    66 label __label18
    67 label __label10
    68 jump __label23 notEqual UNIT_S1 null
-    * setaddr __fn1retaddr __label25
-    * call __label1 __fn1retval
-    * gotolabel __label25 __fn1
+   69 label __label270
+   70 label __label271
+   71 ubind UNIT
+   72 jump __label272 notEqual @unit null
+   73 print "[salmon]No unit of type "
+   74 print UNIT
+   75 print " found..."
+   76 jump __label275 always
+   77 label __label272
+   78 sensor __tmp153 @unit @controlled
+   79 jump __label273 equal __tmp153 0
+   80 print "[salmon]Looking for a free "
+   81 print UNIT
+   82 print "..."
+   83 jump __label274 always
+   84 label __label273
+   85 ucontrol flag 1
+   86 set __fn1retval @unit
+   87 jump __label278 always
+   88 label __label274
+   89 label __label275
+   90 printflush message1
+   91 label __label276
+   92 jump __label271 always
+   93 label __label277
+   94 set __fn1retval null
+   95 label __label278
    96 set UNIT_S1 __fn1retval
    97 label __label23
    98 label __label24
    99 jump __label26 notEqual UNIT_P1 null
-    * setaddr __fn1retaddr __label28
-    * call __label1 __fn1retval
-    * gotolabel __label28 __fn1
+  100 label __label279
+  101 label __label280
+  102 ubind UNIT
+  103 jump __label281 notEqual @unit null
+  104 print "[salmon]No unit of type "
+  105 print UNIT
+  106 print " found..."
+  107 jump __label284 always
+  108 label __label281
+  109 sensor __tmp153 @unit @controlled
+  110 jump __label282 equal __tmp153 0
+  111 print "[salmon]Looking for a free "
+  112 print UNIT
+  113 print "..."
+  114 jump __label283 always
+  115 label __label282
+  116 ucontrol flag 1
+  117 set __fn1retval @unit
+  118 jump __label287 always
+  119 label __label283
+  120 label __label284
+  121 printflush message1
+  122 label __label285
+  123 jump __label280 always
+  124 label __label286
+  125 set __fn1retval null
+  126 label __label287
   127 set UNIT_P1 __fn1retval
   128 label __label26
   129 label __label27
 
   160 op greaterThanEq FOUR_UNITS travel_time 47
   161 jump __label34 equal FOUR_UNITS false
   162 jump __label36 notEqual UNIT_S2 null
-    * setaddr __fn1retaddr __label38
-    * call __label1 __fn1retval
-    * gotolabel __label38 __fn1
+  163 label __label288
+  164 label __label289
+  165 ubind UNIT
+  166 jump __label290 notEqual @unit null
+  167 print "[salmon]No unit of type "
+  168 print UNIT
+  169 print " found..."
+  170 jump __label293 always
+  171 label __label290
+  172 sensor __tmp153 @unit @controlled
+  173 jump __label291 equal __tmp153 0
+  174 print "[salmon]Looking for a free "
+  175 print UNIT
+  176 print "..."
+  177 jump __label292 always
+  178 label __label291
+  179 ucontrol flag 1
+  180 set __fn1retval @unit
+  181 jump __label296 always
+  182 label __label292
+  183 label __label293
+  184 printflush message1
+  185 label __label294
+  186 jump __label289 always
+  187 label __label295
+  188 set __fn1retval null
+  189 label __label296
   190 set UNIT_S2 __fn1retval
   191 label __label36
   192 label __label37
   193 jump __label39 notEqual UNIT_P2 null
-    * setaddr __fn1retaddr __label41
-    * call __label1 __fn1retval
-    * gotolabel __label41 __fn1
+  194 label __label297
+  195 label __label298
+  196 ubind UNIT
+  197 jump __label299 notEqual @unit null
+  198 print "[salmon]No unit of type "
+  199 print UNIT
+  200 print " found..."
+  201 jump __label302 always
+  202 label __label299
+  203 sensor __tmp153 @unit @controlled
+  204 jump __label300 equal __tmp153 0
+  205 print "[salmon]Looking for a free "
+  206 print UNIT
+  207 print "..."
+  208 jump __label301 always
+  209 label __label300
+  210 ucontrol flag 1
+  211 set __fn1retval @unit
+  212 jump __label305 always
+  213 label __label301
+  214 label __label302
+  215 printflush message1
+  216 label __label303
+  217 jump __label298 always
+  218 label __label304
+  219 set __fn1retval null
+  220 label __label305
   221 set UNIT_P2 __fn1retval
   222 label __label39
   223 label __label40
 
   886 jump __label104 notEqual __tmp78 false
   887 label __label48
   888 end
-    * label __label1
-    * label __label92
-    * ubind UNIT
-    * jump __label95 notEqual @unit null
-    * print "[salmon]No unit of type "
-    * print UNIT
-    * print " found..."
-    * jump __label96 always
-    * label __label95
-    * sensor __tmp153 @unit @controlled
-    * jump __label97 equal __tmp153 0
-    * print "[salmon]Looking for a free "
-    * print UNIT
-    * print "..."
-    * jump __label98 always
-    * label __label97
-    * ucontrol flag 1
-    * set __fn1retval @unit
-    * jump __label91 always
-    * label __label98
-    * label __label96
-    * printflush message1
-    * label __label93
-    * jump __label92 always
-    * label __label94
-    * set __fn1retval null
-    * label __label91
-    * goto __fn1retaddr __fn1
-    * end

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-4 instructions):
 
   420 print MSG
   421 label __label157
   422 set __fn0retval @unit
-    * jump __label158 always
   423 label __label158
   424 set UNIT_S1 __fn0retval
   425 jump __label51 equal FOUR_UNITS false
 
   559 print MSG
   560 label __label194
   561 set __fn0retval @unit
-    * jump __label195 always
   562 label __label195
   563 set UNIT_S2 __fn0retval
   564 jump __label54 equal SUPPLY_S_FIRST false
 
   720 print MSG
   721 label __label231
   722 set __fn0retval @unit
-    * jump __label232 always
   723 label __label232
   724 set UNIT_P1 __fn0retval
   725 jump __label58 equal FOUR_UNITS false
 
   859 print MSG
   860 label __label268
   861 set __fn0retval @unit
-    * jump __label269 always
   862 label __label269
   863 set UNIT_P2 __fn0retval
   864 jump __label61 equal SUPPLY_P_FIRST false

Modifications by Final phase, Jump Straightening, iteration 1 (-2 instructions):
 
    29 set __fn3_count 0
    30 label __label11
    31 ubind UNIT
-    * jump __label14 equal @unit null
-    * jump __label13 always
+   32 jump __label13 notEqual @unit null
    33 label __label14
    34 label __label15
    35 print "[salmon]No unit of type "
 
    49 set UNIT_P2 UNIT_S1
    50 set UNIT_S1 UNIT_P1
    51 set UNIT_P1 @unit
-    * jump __label21 equal UNIT_S2 null
-    * jump __label18 always
+   52 jump __label18 notEqual UNIT_S2 null
    53 label __label21
    54 label __label22
    55 label __label19

Modifications by Final phase, Jump Threading, iteration 1:
 
   350 jump __label142 lessThan __tmp123 UNIT_CAPACITY
   351 ucontrol approach DOME_X DOME_Y 6
   352 set __fn0_state 3
-    * jump __label143 always
+  353 jump __label145 always
   354 label __label142
   355 set MSG ", loading\n"
   356 label __label143
 
   381 set MSG ", waiting\n"
   382 label __label149
   383 sensor __tmp138 @unit @totalItems
-    * jump __label150 greaterThan __tmp138 0
+  384 jump __label153 greaterThan __tmp138 0
   385 ucontrol approach CORE_X CORE_Y 6
   386 set __fn0_state 2
   387 label __label150
 
   489 jump __label179 lessThan __tmp123 UNIT_CAPACITY
   490 ucontrol approach DOME_X DOME_Y 6
   491 set __fn0_state 3
-    * jump __label180 always
+  492 jump __label182 always
   493 label __label179
   494 set MSG ", loading\n"
   495 label __label180
 
   520 set MSG ", waiting\n"
   521 label __label186
   522 sensor __tmp138 @unit @totalItems
-    * jump __label187 greaterThan __tmp138 0
+  523 jump __label190 greaterThan __tmp138 0
   524 ucontrol approach CORE_X CORE_Y 6
   525 set __fn0_state 2
   526 label __label187
 
   650 jump __label216 lessThan __tmp123 UNIT_CAPACITY
   651 ucontrol approach DOME_X DOME_Y 6
   652 set __fn0_state 3
-    * jump __label217 always
+  653 jump __label219 always
   654 label __label216
   655 set MSG ", loading\n"
   656 label __label217
 
   681 set MSG ", waiting\n"
   682 label __label223
   683 sensor __tmp138 @unit @totalItems
-    * jump __label224 greaterThan __tmp138 0
+  684 jump __label227 greaterThan __tmp138 0
   685 ucontrol approach CORE_X CORE_Y 6
   686 set __fn0_state 2
   687 label __label224
 
   789 jump __label253 lessThan __tmp123 UNIT_CAPACITY
   790 ucontrol approach DOME_X DOME_Y 6
   791 set __fn0_state 3
-    * jump __label254 always
+  792 jump __label256 always
   793 label __label253
   794 set MSG ", loading\n"
   795 label __label254
 
   820 set MSG ", waiting\n"
   821 label __label260
   822 sensor __tmp138 @unit @totalItems
-    * jump __label261 greaterThan __tmp138 0
+  823 jump __label264 greaterThan __tmp138 0
   824 ucontrol approach CORE_X CORE_Y 6
   825 set __fn0_state 2
   826 label __label261

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-4 instructions):
 
    88 printflush message1
    89 label __label276
    90 jump __label271 always
-    * label __label277
-    * set __fn1retval null
    91 label __label278
    92 set UNIT_S1 __fn1retval
    93 label __label23
 
   117 printflush message1
   118 label __label285
   119 jump __label280 always
-    * label __label286
-    * set __fn1retval null
   120 label __label287
   121 set UNIT_P1 __fn1retval
   122 label __label26
 
   178 printflush message1
   179 label __label294
   180 jump __label289 always
-    * label __label295
-    * set __fn1retval null
   181 label __label296
   182 set UNIT_S2 __fn1retval
   183 label __label36
 
   207 printflush message1
   208 label __label303
   209 jump __label298 always
-    * label __label304
-    * set __fn1retval null
   210 label __label305
   211 set UNIT_P2 __fn1retval
   212 label __label39
 
   305 printflush message1
   306 label __label129
   307 jump __label124 always
-    * label __label130
   308 label __label131
   309 label __label132
   310 label __label133
 
   443 printflush message1
   444 label __label166
   445 jump __label161 always
-    * label __label167
   446 label __label168
   447 label __label169
   448 label __label170
 
   603 printflush message1
   604 label __label203
   605 jump __label198 always
-    * label __label204
   606 label __label205
   607 label __label206
   608 label __label207
 
   741 printflush message1
   742 label __label240
   743 jump __label235 always
-    * label __label241
   744 label __label242
   745 label __label243
   746 label __label244

Modifications by Final phase, Print Merging, iteration 1 (-1 instructions):
 
   260 label __label104
   261 set start @time
   262 print " === [gold]Supplying Overdrive Dome[] === "
-    * print "\n"
   263 label __label105
-    * print "\n[green]Silicon[] status:\n"
+  264 print "\n\n[green]Silicon[] status:\n"
   265 sensor __fn2_level DOME @silicon
   266 jump __label106 lessThanEq __fn2_level 3
   267 print "  dome:  [green]"

Final code before resolving virtual instructions:

set UNIT @flare
set DOME dome1
jump __label5 notEqual DOME null
label __label102
print "[gold]Waiting for an overdrive dome to be connected..."
printflush message1
set DOME dome1
jump __label102 equal DOME null
label __label5
sensor __tmp1 switch1 @enabled
jump __label8 notEqual __tmp1 false
label __label103
print "[coral]Activate switch to begin supplying overdrive dome..."
print "\n"
printflush message1
sensor __tmp1 switch1 @enabled
jump __label103 equal __tmp1 false
label __label8
print "[gold]Binding units..."
printflush message1
set UNIT_P2 null
set UNIT_S2 UNIT_P2
set UNIT_P1 UNIT_S2
set UNIT_S1 UNIT_P1
set __fn3_count 0
label __label11
ubind UNIT
jump __label13 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found. 1"
printflush message1
jump __label11 always 0 0
label __label13
set __fn3_first_unit @unit
label __label16
sensor __tmp8 @unit @controller
jump __label19 notEqual __tmp8 @this
op add __fn3_count __fn3_count 1
ucontrol flag 1 0 0 0 0
set UNIT_S2 UNIT_P2
set UNIT_P2 UNIT_S1
set UNIT_S1 UNIT_P1
set UNIT_P1 @unit
jump __label18 notEqual UNIT_S2 null
label __label19
ubind UNIT
op notEqual __tmp15 @unit __fn3_first_unit
sensor __tmp16 __fn3_first_unit @dead
op strictEqual __tmp17 __tmp16 0
op land __tmp18 __tmp15 __tmp17
jump __label16 notEqual __tmp18 false
label __label18
jump __label23 notEqual UNIT_S1 null
label __label271
ubind UNIT
jump __label272 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label275 always 0 0
label __label272
sensor __tmp153 @unit @controlled
jump __label273 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label274 always 0 0
label __label273
ucontrol flag 1 0 0 0 0
set __fn1retval @unit
jump __label278 always 0 0
label __label274
label __label275
printflush message1
jump __label271 always 0 0
label __label278
set UNIT_S1 __fn1retval
label __label23
jump __label26 notEqual UNIT_P1 null
label __label280
ubind UNIT
jump __label281 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label284 always 0 0
label __label281
sensor __tmp153 @unit @controlled
jump __label282 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label283 always 0 0
label __label282
ucontrol flag 1 0 0 0 0
set __fn1retval @unit
jump __label287 always 0 0
label __label283
label __label284
printflush message1
jump __label280 always 0 0
label __label287
set UNIT_P1 __fn1retval
label __label26
sensor __tmp25 UNIT_S1 @firstItem
op equal __tmp26 __tmp25 @phase-fabric
sensor __tmp27 UNIT_P1 @firstItem
op equal __tmp28 __tmp27 @silicon
op or __tmp29 __tmp26 __tmp28
jump __label29 equal __tmp29 false
set u UNIT_S1
set UNIT_S1 UNIT_P1
set UNIT_P1 u
label __label29
sensor UNIT_CAPACITY UNIT_S1 @itemCapacity
sensor SPEED UNIT_S1 @speed
op div SPEED_TENTHS SPEED 10
print "[gold]Locating core..."
printflush message1
label __label31
ulocate building core false @copper __tmp35 __tmp36 __tmp37 CORE
jump __label31 equal CORE null
sensor CORE_X CORE @x
sensor CORE_Y CORE @y
sensor DOME_X DOME @x
sensor DOME_Y DOME @y
op sub __tmp43 DOME_X CORE_X
op sub __tmp44 DOME_Y CORE_Y
op len __tmp45 __tmp43 __tmp44
op mul __tmp46 2 __tmp45
op div travel_time __tmp46 SPEED
op greaterThanEq FOUR_UNITS travel_time 47
jump __label34 equal FOUR_UNITS false
jump __label36 notEqual UNIT_S2 null
label __label289
ubind UNIT
jump __label290 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label293 always 0 0
label __label290
sensor __tmp153 @unit @controlled
jump __label291 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label292 always 0 0
label __label291
ucontrol flag 1 0 0 0 0
set __fn1retval @unit
jump __label296 always 0 0
label __label292
label __label293
printflush message1
jump __label289 always 0 0
label __label296
set UNIT_S2 __fn1retval
label __label36
jump __label39 notEqual UNIT_P2 null
label __label298
ubind UNIT
jump __label299 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label302 always 0 0
label __label299
sensor __tmp153 @unit @controlled
jump __label300 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label301 always 0 0
label __label300
ucontrol flag 1 0 0 0 0
set __fn1retval @unit
jump __label305 always 0 0
label __label301
label __label302
printflush message1
jump __label298 always 0 0
label __label305
set UNIT_P2 __fn1retval
label __label39
sensor __tmp56 UNIT_S1 @firstItem
op equal __tmp57 __tmp56 @phase-fabric
sensor __tmp58 UNIT_P2 @firstItem
op notEqual __tmp59 __tmp58 @phase-fabric
op land __tmp60 __tmp57 __tmp59
jump __label42 equal __tmp60 false
set u UNIT_S1
set UNIT_S1 UNIT_P2
set UNIT_P2 u
label __label42
sensor __tmp62 UNIT_S2 @firstItem
op equal __tmp63 __tmp62 @phase-fabric
sensor __tmp64 UNIT_P2 @firstItem
op equal __tmp65 __tmp64 @silicon
op or __tmp66 __tmp63 __tmp65
jump __label44 equal __tmp66 false
set u UNIT_S2
set UNIT_S2 UNIT_P2
set UNIT_P2 u
label __label44
set GROUP1 "probe  1"
set GROUP2 "probe 2"
jump __label35 always 0 0
label __label34
ubind UNIT_S2
ucontrol unbind 0 0 0 0 0
set UNIT_S2 null
ubind UNIT_P2
ucontrol unbind 0 0 0 0 0
set UNIT_P2 null
set GROUP1 "probe"
label __label35
op equal __tmp68 FOUR_UNITS false
sensor __tmp69 UNIT_S1 @totalItems
sensor __tmp70 UNIT_S2 @totalItems
op lessThan __tmp71 __tmp69 __tmp70
op or SUPPLY_S_FIRST __tmp68 __tmp71
sensor __tmp74 UNIT_P1 @totalItems
sensor __tmp75 UNIT_P2 @totalItems
op lessThan __tmp76 __tmp74 __tmp75
op or SUPPLY_P_FIRST __tmp68 __tmp76
sensor __tmp78 switch1 @enabled
jump __label48 equal __tmp78 false
label __label104
set start @time
print " === [gold]Supplying Overdrive Dome[] === "
print "\n\n[green]Silicon[] status:\n"
sensor __fn2_level DOME @silicon
jump __label106 lessThanEq __fn2_level 3
print "  dome:  [green]"
print __fn2_level
print "[]\n"
jump __label107 always 0 0
label __label106
print "  dome:  [coral]"
print __fn2_level
print "[]\n"
label __label107
ubind UNIT_S1
sensor __tmp102 @unit @dead
op strictEqual __tmp103 __tmp102 0
sensor __tmp104 @unit @controller
op notEqual __tmp105 __tmp104 @this
jump __label132 greaterThan __tmp103 __tmp105
label __label124
ubind UNIT
jump __label125 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label128 always 0 0
label __label125
sensor __tmp153 @unit @controlled
jump __label126 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label127 always 0 0
label __label126
ucontrol flag 1 0 0 0 0
jump __label131 always 0 0
label __label127
label __label128
printflush message1
jump __label124 always 0 0
label __label131
label __label132
sensor __fn0_state @unit @flag
set __fn0_distance -1
set __fn0_color "gold"
jump __label140 notEqual __fn0_state 1
sensor __tmp111 @unit @firstItem
jump __label134 notEqual __tmp111 @silicon
set __fn0_state 3
jump __label139 always 0 0
label __label134
sensor __tmp114 @unit @totalItems
jump __label135 notEqual __tmp114 0
set __fn0_state 2
jump __label138 always 0 0
label __label135
set MSG ", initializing\n"
ucontrol approach CORE_X CORE_Y 6 0 0
ucontrol within CORE_X CORE_Y 8 __tmp117 0
jump __label136 equal __tmp117 false
ucontrol itemDrop CORE UNIT_CAPACITY 0 0 0
label __label136
label __label138
label __label139
label __label140
jump __label146 notEqual __fn0_state 2
ucontrol within CORE_X CORE_Y 8 __tmp121 0
jump __label144 equal __tmp121 false
ucontrol itemTake CORE @silicon UNIT_CAPACITY 0 0
sensor __tmp123 @unit @totalItems
jump __label142 lessThan __tmp123 UNIT_CAPACITY
ucontrol approach DOME_X DOME_Y 6 0 0
set __fn0_state 3
jump __label145 always 0 0
label __label142
set MSG ", loading\n"
jump __label145 always 0 0
label __label144
ucontrol approach CORE_X CORE_Y 6 0 0
set MSG ", fetching in [gold]"
sensor __tmp126 @unit @x
op sub __tmp127 CORE_X __tmp126
sensor __tmp128 @unit @y
op sub __tmp129 CORE_Y __tmp128
op len __tmp130 __tmp127 __tmp129
op idiv __tmp131 __tmp130 SPEED_TENTHS
op div __fn0_distance __tmp131 10
label __label145
label __label146
jump __label154 notEqual __fn0_state 3
ucontrol within DOME_X DOME_Y 8 __tmp135 0
jump __label152 equal __tmp135 false
jump __label148 equal SUPPLY_S_FIRST false
ucontrol itemDrop DOME UNIT_CAPACITY 0 0 0
set MSG ", supplying\n"
set __fn0_color "green"
jump __label149 always 0 0
label __label148
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", waiting\n"
label __label149
sensor __tmp138 @unit @totalItems
jump __label153 greaterThan __tmp138 0
ucontrol approach CORE_X CORE_Y 6 0 0
set __fn0_state 2
jump __label153 always 0 0
label __label152
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", returning in [gold]"
sensor __tmp141 @unit @x
op sub __tmp142 DOME_X __tmp141
sensor __tmp143 @unit @y
op sub __tmp144 DOME_Y __tmp143
op len __tmp145 __tmp142 __tmp144
op idiv __tmp146 __tmp145 SPEED_TENTHS
op div __fn0_distance __tmp146 10
label __label153
label __label154
ucontrol flag __fn0_state 0 0 0 0
sensor __tmp148 @unit @totalItems
print "  "
print GROUP1
print ": ["
print __fn0_color
print "]"
print __tmp148
print "[]"
jump __label156 lessThan __fn0_distance 0
print MSG
print __fn0_distance
print "[] sec\n"
jump __label157 always 0 0
label __label156
print MSG
label __label157
set __fn0retval @unit
set UNIT_S1 __fn0retval
jump __label51 equal FOUR_UNITS false
op equal __tmp83 SUPPLY_S_FIRST false
ubind UNIT_S2
sensor __tmp102 @unit @dead
op strictEqual __tmp103 __tmp102 0
sensor __tmp104 @unit @controller
op notEqual __tmp105 __tmp104 @this
jump __label169 greaterThan __tmp103 __tmp105
label __label161
ubind UNIT
jump __label162 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label165 always 0 0
label __label162
sensor __tmp153 @unit @controlled
jump __label163 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label164 always 0 0
label __label163
ucontrol flag 1 0 0 0 0
jump __label168 always 0 0
label __label164
label __label165
printflush message1
jump __label161 always 0 0
label __label168
label __label169
sensor __fn0_state @unit @flag
set __fn0_distance -1
set __fn0_color "gold"
jump __label177 notEqual __fn0_state 1
sensor __tmp111 @unit @firstItem
jump __label171 notEqual __tmp111 @silicon
set __fn0_state 3
jump __label176 always 0 0
label __label171
sensor __tmp114 @unit @totalItems
jump __label172 notEqual __tmp114 0
set __fn0_state 2
jump __label175 always 0 0
label __label172
set MSG ", initializing\n"
ucontrol approach CORE_X CORE_Y 6 0 0
ucontrol within CORE_X CORE_Y 8 __tmp117 0
jump __label173 equal __tmp117 false
ucontrol itemDrop CORE UNIT_CAPACITY 0 0 0
label __label173
label __label175
label __label176
label __label177
jump __label183 notEqual __fn0_state 2
ucontrol within CORE_X CORE_Y 8 __tmp121 0
jump __label181 equal __tmp121 false
ucontrol itemTake CORE @silicon UNIT_CAPACITY 0 0
sensor __tmp123 @unit @totalItems
jump __label179 lessThan __tmp123 UNIT_CAPACITY
ucontrol approach DOME_X DOME_Y 6 0 0
set __fn0_state 3
jump __label182 always 0 0
label __label179
set MSG ", loading\n"
jump __label182 always 0 0
label __label181
ucontrol approach CORE_X CORE_Y 6 0 0
set MSG ", fetching in [gold]"
sensor __tmp126 @unit @x
op sub __tmp127 CORE_X __tmp126
sensor __tmp128 @unit @y
op sub __tmp129 CORE_Y __tmp128
op len __tmp130 __tmp127 __tmp129
op idiv __tmp131 __tmp130 SPEED_TENTHS
op div __fn0_distance __tmp131 10
label __label182
label __label183
jump __label191 notEqual __fn0_state 3
ucontrol within DOME_X DOME_Y 8 __tmp135 0
jump __label189 equal __tmp135 false
jump __label185 equal __tmp83 false
ucontrol itemDrop DOME UNIT_CAPACITY 0 0 0
set MSG ", supplying\n"
set __fn0_color "green"
jump __label186 always 0 0
label __label185
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", waiting\n"
label __label186
sensor __tmp138 @unit @totalItems
jump __label190 greaterThan __tmp138 0
ucontrol approach CORE_X CORE_Y 6 0 0
set __fn0_state 2
jump __label190 always 0 0
label __label189
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", returning in [gold]"
sensor __tmp141 @unit @x
op sub __tmp142 DOME_X __tmp141
sensor __tmp143 @unit @y
op sub __tmp144 DOME_Y __tmp143
op len __tmp145 __tmp142 __tmp144
op idiv __tmp146 __tmp145 SPEED_TENTHS
op div __fn0_distance __tmp146 10
label __label190
label __label191
ucontrol flag __fn0_state 0 0 0 0
sensor __tmp148 @unit @totalItems
print "  "
print GROUP2
print ": ["
print __fn0_color
print "]"
print __tmp148
print "[]"
jump __label193 lessThan __fn0_distance 0
print MSG
print __fn0_distance
print "[] sec\n"
jump __label194 always 0 0
label __label193
print MSG
label __label194
set __fn0retval @unit
set UNIT_S2 __fn0retval
jump __label54 equal SUPPLY_S_FIRST false
sensor __tmp86 UNIT_S1 @totalItems
op greaterThan SUPPLY_S_FIRST __tmp86 0
jump __label55 always 0 0
label __label54
sensor __tmp88 UNIT_S2 @totalItems
op equal SUPPLY_S_FIRST __tmp88 0
label __label55
label __label51
print "\n[green]Phase fabric[] status:\n"
sensor __fn2_level DOME @phase-fabric
jump __label110 lessThanEq __fn2_level 3
print "  dome:  [green]"
print __fn2_level
print "[]\n"
jump __label111 always 0 0
label __label110
print "  dome:  [coral]"
print __fn2_level
print "[]\n"
label __label111
ubind UNIT_P1
sensor __tmp102 @unit @dead
op strictEqual __tmp103 __tmp102 0
sensor __tmp104 @unit @controller
op notEqual __tmp105 __tmp104 @this
jump __label206 greaterThan __tmp103 __tmp105
label __label198
ubind UNIT
jump __label199 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label202 always 0 0
label __label199
sensor __tmp153 @unit @controlled
jump __label200 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label201 always 0 0
label __label200
ucontrol flag 1 0 0 0 0
jump __label205 always 0 0
label __label201
label __label202
printflush message1
jump __label198 always 0 0
label __label205
label __label206
sensor __fn0_state @unit @flag
set __fn0_distance -1
set __fn0_color "gold"
jump __label214 notEqual __fn0_state 1
sensor __tmp111 @unit @firstItem
jump __label208 notEqual __tmp111 @phase-fabric
set __fn0_state 3
jump __label213 always 0 0
label __label208
sensor __tmp114 @unit @totalItems
jump __label209 notEqual __tmp114 0
set __fn0_state 2
jump __label212 always 0 0
label __label209
set MSG ", initializing\n"
ucontrol approach CORE_X CORE_Y 6 0 0
ucontrol within CORE_X CORE_Y 8 __tmp117 0
jump __label210 equal __tmp117 false
ucontrol itemDrop CORE UNIT_CAPACITY 0 0 0
label __label210
label __label212
label __label213
label __label214
jump __label220 notEqual __fn0_state 2
ucontrol within CORE_X CORE_Y 8 __tmp121 0
jump __label218 equal __tmp121 false
ucontrol itemTake CORE @phase-fabric UNIT_CAPACITY 0 0
sensor __tmp123 @unit @totalItems
jump __label216 lessThan __tmp123 UNIT_CAPACITY
ucontrol approach DOME_X DOME_Y 6 0 0
set __fn0_state 3
jump __label219 always 0 0
label __label216
set MSG ", loading\n"
jump __label219 always 0 0
label __label218
ucontrol approach CORE_X CORE_Y 6 0 0
set MSG ", fetching in [gold]"
sensor __tmp126 @unit @x
op sub __tmp127 CORE_X __tmp126
sensor __tmp128 @unit @y
op sub __tmp129 CORE_Y __tmp128
op len __tmp130 __tmp127 __tmp129
op idiv __tmp131 __tmp130 SPEED_TENTHS
op div __fn0_distance __tmp131 10
label __label219
label __label220
jump __label228 notEqual __fn0_state 3
ucontrol within DOME_X DOME_Y 8 __tmp135 0
jump __label226 equal __tmp135 false
jump __label222 equal SUPPLY_P_FIRST false
ucontrol itemDrop DOME UNIT_CAPACITY 0 0 0
set MSG ", supplying\n"
set __fn0_color "green"
jump __label223 always 0 0
label __label222
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", waiting\n"
label __label223
sensor __tmp138 @unit @totalItems
jump __label227 greaterThan __tmp138 0
ucontrol approach CORE_X CORE_Y 6 0 0
set __fn0_state 2
jump __label227 always 0 0
label __label226
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", returning in [gold]"
sensor __tmp141 @unit @x
op sub __tmp142 DOME_X __tmp141
sensor __tmp143 @unit @y
op sub __tmp144 DOME_Y __tmp143
op len __tmp145 __tmp142 __tmp144
op idiv __tmp146 __tmp145 SPEED_TENTHS
op div __fn0_distance __tmp146 10
label __label227
label __label228
ucontrol flag __fn0_state 0 0 0 0
sensor __tmp148 @unit @totalItems
print "  "
print GROUP1
print ": ["
print __fn0_color
print "]"
print __tmp148
print "[]"
jump __label230 lessThan __fn0_distance 0
print MSG
print __fn0_distance
print "[] sec\n"
jump __label231 always 0 0
label __label230
print MSG
label __label231
set __fn0retval @unit
set UNIT_P1 __fn0retval
jump __label58 equal FOUR_UNITS false
op equal __tmp93 SUPPLY_P_FIRST false
ubind UNIT_P2
sensor __tmp102 @unit @dead
op strictEqual __tmp103 __tmp102 0
sensor __tmp104 @unit @controller
op notEqual __tmp105 __tmp104 @this
jump __label243 greaterThan __tmp103 __tmp105
label __label235
ubind UNIT
jump __label236 notEqual @unit null
print "[salmon]No unit of type "
print UNIT
print " found..."
jump __label239 always 0 0
label __label236
sensor __tmp153 @unit @controlled
jump __label237 equal __tmp153 0
print "[salmon]Looking for a free "
print UNIT
print "..."
jump __label238 always 0 0
label __label237
ucontrol flag 1 0 0 0 0
jump __label242 always 0 0
label __label238
label __label239
printflush message1
jump __label235 always 0 0
label __label242
label __label243
sensor __fn0_state @unit @flag
set __fn0_distance -1
set __fn0_color "gold"
jump __label251 notEqual __fn0_state 1
sensor __tmp111 @unit @firstItem
jump __label245 notEqual __tmp111 @phase-fabric
set __fn0_state 3
jump __label250 always 0 0
label __label245
sensor __tmp114 @unit @totalItems
jump __label246 notEqual __tmp114 0
set __fn0_state 2
jump __label249 always 0 0
label __label246
set MSG ", initializing\n"
ucontrol approach CORE_X CORE_Y 6 0 0
ucontrol within CORE_X CORE_Y 8 __tmp117 0
jump __label247 equal __tmp117 false
ucontrol itemDrop CORE UNIT_CAPACITY 0 0 0
label __label247
label __label249
label __label250
label __label251
jump __label257 notEqual __fn0_state 2
ucontrol within CORE_X CORE_Y 8 __tmp121 0
jump __label255 equal __tmp121 false
ucontrol itemTake CORE @phase-fabric UNIT_CAPACITY 0 0
sensor __tmp123 @unit @totalItems
jump __label253 lessThan __tmp123 UNIT_CAPACITY
ucontrol approach DOME_X DOME_Y 6 0 0
set __fn0_state 3
jump __label256 always 0 0
label __label253
set MSG ", loading\n"
jump __label256 always 0 0
label __label255
ucontrol approach CORE_X CORE_Y 6 0 0
set MSG ", fetching in [gold]"
sensor __tmp126 @unit @x
op sub __tmp127 CORE_X __tmp126
sensor __tmp128 @unit @y
op sub __tmp129 CORE_Y __tmp128
op len __tmp130 __tmp127 __tmp129
op idiv __tmp131 __tmp130 SPEED_TENTHS
op div __fn0_distance __tmp131 10
label __label256
label __label257
jump __label265 notEqual __fn0_state 3
ucontrol within DOME_X DOME_Y 8 __tmp135 0
jump __label263 equal __tmp135 false
jump __label259 equal __tmp93 false
ucontrol itemDrop DOME UNIT_CAPACITY 0 0 0
set MSG ", supplying\n"
set __fn0_color "green"
jump __label260 always 0 0
label __label259
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", waiting\n"
label __label260
sensor __tmp138 @unit @totalItems
jump __label264 greaterThan __tmp138 0
ucontrol approach CORE_X CORE_Y 6 0 0
set __fn0_state 2
jump __label264 always 0 0
label __label263
ucontrol approach DOME_X DOME_Y 6 0 0
set MSG ", returning in [gold]"
sensor __tmp141 @unit @x
op sub __tmp142 DOME_X __tmp141
sensor __tmp143 @unit @y
op sub __tmp144 DOME_Y __tmp143
op len __tmp145 __tmp142 __tmp144
op idiv __tmp146 __tmp145 SPEED_TENTHS
op div __fn0_distance __tmp146 10
label __label264
label __label265
ucontrol flag __fn0_state 0 0 0 0
sensor __tmp148 @unit @totalItems
print "  "
print GROUP2
print ": ["
print __fn0_color
print "]"
print __tmp148
print "[]"
jump __label267 lessThan __fn0_distance 0
print MSG
print __fn0_distance
print "[] sec\n"
jump __label268 always 0 0
label __label267
print MSG
label __label268
set __fn0retval @unit
set UNIT_P2 __fn0retval
jump __label61 equal SUPPLY_P_FIRST false
sensor __tmp96 UNIT_P1 @totalItems
op greaterThan SUPPLY_P_FIRST __tmp96 0
jump __label62 always 0 0
label __label61
sensor __tmp98 UNIT_P2 @totalItems
op equal SUPPLY_P_FIRST __tmp98 0
label __label62
label __label58
op sub __tmp100 @time start
op floor __tmp101 __tmp100 0
print "\n[lightgray]Loop time: "
print __tmp101
print " ms"
printflush message1
sensor __tmp78 switch1 @enabled
jump __label104 notEqual __tmp78 false
label __label48
end
