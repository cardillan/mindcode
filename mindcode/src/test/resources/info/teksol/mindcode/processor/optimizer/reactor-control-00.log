   661 instructions before optimizations.
    73 instructions eliminated by Temp Variables Elimination.
     2 instructions eliminated by Case Expression Optimization.
    87 instructions eliminated by Dead Code Elimination (6 iterations).
     1 instructions eliminated by Jump Normalization (4 iterations).
    25 instructions eliminated by Jump Optimization (4 iterations).
    32 instructions eliminated by Single Step Elimination (2 passes, 6 iterations).
     3 instructions eliminated by If Expression Optimization (3 iterations).
     2 instructions eliminated by Data Flow Optimization (2 passes, 5 iterations).
     1 instructions eliminated by Loop Optimization (3 iterations).
     3 loops improved by Loop Optimization.
    11 instructions eliminated by Jump Straightening (4 iterations).
    10 instructions updated by PropagateJumpTargets.
     1 instructions eliminated by Unreachable Code Elimination.
     2 instructions eliminated by Print Merging.
   421 instructions after optimizations.

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-73 instructions):
 
    29 set SAFETY_MARGIN 1000
    30 set STARTUP_TIME 5
    31 set RAMP_TIME 70
-    * op sub __tmp0 0 STARTUP_TIME
-    * set COEF_A1 __tmp0
+   32 op sub COEF_A1 0 STARTUP_TIME
+   33 noop
    34 op mul __tmp1 MAX_PRODUCTION 2
-    * op div __tmp2 RAMP_TIME __tmp1
-    * set COEF_A2 __tmp2
+   35 op div COEF_A2 RAMP_TIME __tmp1
+   36 noop
    37 set reactors 0
    38 label __label0
    39 op equal __tmp3 reactors 0
    40 jump __label2 equal __tmp3 false
    41 set reactors 0
-    * set __tmp4 @links
-    * set n __tmp4
+   42 set n @links
+   43 noop
    44 label __label3
    45 op greaterThan __tmp5 n 0
    46 jump __label5 equal __tmp5 false
-    * op sub __tmp6 n 1
-    * set n __tmp6
-    * getlink __tmp7 n
-    * set block __tmp7
+   47 op sub n n 1
+   48 noop
+   49 getlink block n
+   50 noop
    51 print "Found: "
    52 print block
    53 print "\n"
-    * sensor __tmp8 block @type
-    * set __ast0 __tmp8
+   54 sensor __ast0 block @type
+   55 noop
    56 jump __label8 equal __ast0 @impact-reactor
    57 jump __label7 always
    58 label __label8
    59 set START n
-    * op add __tmp10 reactors 1
-    * set reactors __tmp10
+   60 op add reactors reactors 1
+   61 noop
    62 set __tmp9 reactors
    63 jump __label6 always
    64 label __label7
 
    76 jump __label3 always
    77 label __label5
    78 read __tmp11 cell2 CELL_REMOTE_REACTORS
-    * op add __tmp12 reactors __tmp11
-    * set reactors __tmp12
+   79 op add reactors reactors __tmp11
+   80 noop
    81 op equal __tmp13 reactors 0
    82 jump __label11 equal __tmp13 false
    83 print "No reactor."
 
    90 label __label1
    91 jump __label0 always
    92 label __label2
-    * read __tmp15 cell1 0
-    * set MODE __tmp15
-    * read __tmp16 cell1 1
-    * set OUTPUT_1 __tmp16
-    * read __tmp17 cell1 2
-    * set OUTPUT_2 __tmp17
-    * read __tmp18 cell1 3
-    * set OUTPUT_3 __tmp18
-    * read __tmp19 cell1 4
-    * set REACTORS_ON __tmp19
-    * read __tmp20 cell1 5
-    * set OVERDRIVE __tmp20
-    * read __tmp21 cell1 6
-    * set GENERATOR __tmp21
-    * read __tmp22 cell1 7
-    * set CAN_COMMIT __tmp22
-    * read __tmp23 cell1 8
-    * set STARTUPS __tmp23
-    * read __tmp24 cell1 9
-    * set RESETS __tmp24
-    * read __tmp25 cell1 10
-    * set COMMITS __tmp25
+   93 read MODE cell1 0
+   94 noop
+   95 read OUTPUT_1 cell1 1
+   96 noop
+   97 read OUTPUT_2 cell1 2
+   98 noop
+   99 read OUTPUT_3 cell1 3
+  100 noop
+  101 read REACTORS_ON cell1 4
+  102 noop
+  103 read OVERDRIVE cell1 5
+  104 noop
+  105 read GENERATOR cell1 6
+  106 noop
+  107 read CAN_COMMIT cell1 7
+  108 noop
+  109 read STARTUPS cell1 8
+  110 noop
+  111 read RESETS cell1 9
+  112 noop
+  113 read COMMITS cell1 10
+  114 noop
   115 set reactors REACTORS_ON
   116 op equal __tmp26 MODE SHUTDOWN
   117 jump __label13 equal __tmp26 false
 
   127 set failure_cnt 0
   128 set boosts 0
   129 set nextStart 0
-    * op add __tmp30 @time DECOMMIT_DELAY
-    * set nextDecommit __tmp30
+  130 op add nextDecommit @time DECOMMIT_DELAY
+  131 noop
   132 label __label15
   133 jump __label17 equal true false
   134 sensor __tmp31 battery1 @totalPower
-    * op floor __tmp32 __tmp31
-    * set battery_level __tmp32
-    * op idiv __tmp33 battery_level 1000
-    * set battery_level_str __tmp33
+  135 op floor battery_level __tmp31
+  136 noop
+  137 op idiv battery_level_str battery_level 1000
+  138 noop
   139 sensor __tmp34 battery1 @powerNetStored
-    * op floor __tmp35 __tmp34
-    * set total_battery __tmp35
-    * op idiv __tmp36 total_battery 1000
-    * set total_battery_str __tmp36
-    * sensor __tmp37 battery1 @powerNetOut
-    * set consumption __tmp37
-    * read __tmp38 bank1 PRODUCTION_INDEX
-    * set production __tmp38
-    * read __tmp39 bank1 NET_POWER_INDEX
-    * set net_power __tmp39
-    * read __tmp40 bank1 BATTERY_CHANGE_INDEX
-    * set battery_change __tmp40
-    * sensor __tmp41 battery1 @powerNetCapacity
-    * set total_capacity __tmp41
-    * op idiv __tmp42 total_capacity 1000
-    * set total_capacity_str __tmp42
-    * op mul __tmp43 BATTERY_PER_REACTOR reactors
-    * set required_capacity __tmp43
-    * op greaterThanEq __tmp44 total_capacity required_capacity
-    * set enough_battery __tmp44
+  140 op floor total_battery __tmp34
+  141 noop
+  142 op idiv total_battery_str total_battery 1000
+  143 noop
+  144 sensor consumption battery1 @powerNetOut
+  145 noop
+  146 read production bank1 PRODUCTION_INDEX
+  147 noop
+  148 read net_power bank1 NET_POWER_INDEX
+  149 noop
+  150 read battery_change bank1 BATTERY_CHANGE_INDEX
+  151 noop
+  152 sensor total_capacity battery1 @powerNetCapacity
+  153 noop
+  154 op idiv total_capacity_str total_capacity 1000
+  155 noop
+  156 op mul required_capacity BATTERY_PER_REACTOR reactors
+  157 noop
+  158 op greaterThanEq enough_battery total_capacity required_capacity
+  159 noop
   160 op sub __tmp45 required_capacity total_capacity
   161 op div __tmp46 __tmp45 1000
-    * op ceil __tmp47 __tmp46
-    * set missing_battery __tmp47
+  162 op ceil missing_battery __tmp46
+  163 noop
   164 op notEqual __tmp48 MODE SHUTDOWN
   165 jump __label18 equal __tmp48 false
   166 sensor __tmp50 switch1 @enabled
 
   171 set __tmp52 REASON
   172 jump __label21 always
   173 label __label20
-    * op mul __tmp53 REACTORS_ON MIN_CONS_REACTOR
-    * set min_consumption __tmp53
-    * op lessThan __tmp54 consumption min_consumption
-    * set failure1 __tmp54
+  174 op mul min_consumption REACTORS_ON MIN_CONS_REACTOR
+  175 noop
+  176 op lessThan failure1 consumption min_consumption
+  177 noop
   178 op equal __tmp55 battery_level 0
   179 op greaterThan __tmp56 consumption 0
   180 op land __tmp57 __tmp55 __tmp56
   181 op equal __tmp58 production 0
-    * op land __tmp59 __tmp57 __tmp58
-    * set failure2 __tmp59
+  182 op land failure2 __tmp57 __tmp58
+  183 noop
   184 op or __tmp60 failure1 failure2
   185 jump __label22 equal __tmp60 false
-    * op add __tmp62 failure_cnt 1
-    * set failure_cnt __tmp62
+  186 op add failure_cnt failure_cnt 1
+  187 noop
   188 read __tmp63 cell2 CELL_REMOTE_REACTORS
   189 op add __tmp64 10 __tmp63
   190 op greaterThan __tmp65 failure_cnt __tmp64
 
   248 op div __tmp70 __tmp69 REACTORS_ON
   249 op add __tmp71 __tmp70 0.5
   250 op floor __tmp72 __tmp71
-    * op div __tmp73 __tmp72 100
-    * set multiplier __tmp73
+  251 op div multiplier __tmp72 100
+  252 noop
   253 print " ([gold]"
   254 print multiplier
   255 print "x[])"
 
   313 set OUTPUT_3 0
   314 op greaterThanEq __tmp83 net_power -150
   315 op lessThan __tmp84 total_battery BATTERY_SAT
-    * op land __tmp85 __tmp83 __tmp84
-    * set GENERATOR __tmp85
+  316 op land GENERATOR __tmp83 __tmp84
+  317 noop
   318 print "\nShutdown reason: [gold]"
   319 print REASON
   320 print "[]"
   321 sensor __tmp86 switch1 @enabled
   322 jump __label44 equal __tmp86 false
   323 set MODE STARTUP
-    * op add __tmp88 STARTUPS 1
-    * set STARTUPS __tmp88
+  324 op add STARTUPS STARTUPS 1
+  325 noop
   326 set nextStart 0
   327 set failure_cnt 0
   328 set GENERATOR true
 
   354 sensor __tmp91 nextBattery @powerNetOut
   355 op mul __tmp92 __tmp91 POWER_MARGIN
   356 op floor __tmp93 __tmp92
-    * op max __tmp94 __tmp93 1000
-    * set neededPower __tmp94
+  357 op max neededPower __tmp93 1000
+  358 noop
   359 op equal __tmp95 REACTORS_ON 0
   360 jump __label52 equal __tmp95 false
   361 op greaterThanEq __tmp97 total_battery STARTUP_BAT_ENERGY
   362 jump __label54 equal __tmp97 false
   363 set REACTORS_ON 1
-    * op add __tmp99 @time STARTUP_DELAY
-    * set nextStart __tmp99
+  364 op add nextStart @time STARTUP_DELAY
+  365 noop
   366 set __tmp98 nextStart
   367 jump __label55 always
   368 label __label54
 
   376 jump __label53 always
   377 label __label52
   378 op add __tmp101 OUTPUT_1 OUTPUT_2
-    * op add __tmp102 __tmp101 OUTPUT_3
-    * set outputs __tmp102
+  379 op add outputs __tmp101 OUTPUT_3
+  380 noop
   381 print "\n[gold]"
   382 print outputs
   383 print "[] surge tower(s) online"
 
   403 op greaterThan __tmp108 net_power 1000
   404 op land __tmp109 __tmp107 __tmp108
   405 op greaterThanEq __tmp110 total_battery STARTUP_BAT_ENERGY
-    * op land __tmp111 __tmp109 __tmp110
-    * set canStart __tmp111
+  406 op land canStart __tmp109 __tmp110
+  407 noop
   408 op greaterThanEq __tmp112 net_power neededPower
   409 jump __label60 equal __tmp112 false
   410 set OUTPUT_3 OUTPUT_2
 
   417 label __label61
   418 op equal __tmp114 OUTPUT_1 0
   419 jump __label62 equal __tmp114 false
-    * op mul __tmp116 REACTOR_OUTPUT boosts
-    * set availablePower __tmp116
-    * op div __tmp117 neededPower availablePower
-    * set ratio __tmp117
+  420 op mul availablePower REACTOR_OUTPUT boosts
+  421 noop
+  422 op div ratio neededPower availablePower
+  423 noop
   424 op lessThan __tmp118 ratio 1
   425 jump __label64 equal __tmp118 false
-    * op add __tmp120 @time STARTUP_DELAY
-    * set nextStart __tmp120
+  426 op add nextStart @time STARTUP_DELAY
+  427 noop
   428 set __tmp119 nextStart
   429 jump __label65 always
   430 label __label64
 
   439 op land __tmp122 canStart __tmp121
   440 jump __label66 equal __tmp122 false
   441 jump __label68 equal FAST_START false
-    * op idiv __tmp125 total_battery STARTUP_BAT_ENERGY
-    * set __tmp124 __tmp125
+  442 op idiv __tmp124 total_battery STARTUP_BAT_ENERGY
+  443 noop
   444 jump __label69 always
   445 label __label68
   446 set __tmp124 1
   447 label __label69
   448 set start_at_once __tmp124
   449 op add __tmp126 REACTORS_ON start_at_once
-    * op min __tmp127 __tmp126 reactors
-    * set REACTORS_ON __tmp127
-    * op add __tmp128 @time STARTUP_DELAY
-    * set nextStart __tmp128
+  450 op min REACTORS_ON __tmp126 reactors
+  451 noop
+  452 op add nextStart @time STARTUP_DELAY
+  453 noop
   454 set __tmp123 nextStart
   455 jump __label67 always
   456 label __label66
 
   463 op land __tmp133 __tmp131 __tmp132
   464 jump __label70 equal __tmp133 false
   465 set MODE RUNNING
-    * op add __tmp135 @time DECOMMIT_DELAY
-    * set nextDecommit __tmp135
+  466 op add nextDecommit @time DECOMMIT_DELAY
+  467 noop
   468 set COOLANT_FLAG 0
   469 set FUEL_FLAG 0
   470 set GENERATOR false
 
   507 label __label77
   508 sensor __tmp144 tank1 @totalLiquids
   509 op greaterThan __tmp145 __tmp144 COOLANT_SAT
-    * op or __tmp146 COOLANT_FLAG __tmp145
-    * set COOLANT_FLAG __tmp146
+  510 op or COOLANT_FLAG COOLANT_FLAG __tmp145
+  511 noop
   512 sensor __tmp147 vault1 @blast-compound
   513 op greaterThan __tmp148 __tmp147 FUEL_SAT
-    * op or __tmp149 FUEL_FLAG __tmp148
-    * set FUEL_FLAG __tmp149
+  514 op or FUEL_FLAG FUEL_FLAG __tmp148
+  515 noop
   516 sensor __tmp150 switch2 @enabled
   517 op land __tmp151 enough_battery __tmp150
   518 jump __label78 equal __tmp151 false
-    * op mul __tmp153 BATTERY_CRITICAL required_capacity
-    * set min_level __tmp153
+  519 op mul min_level BATTERY_CRITICAL required_capacity
+  520 noop
   521 set commit_level 0
   522 op lessThan __tmp154 battery_change 0
   523 op land __tmp155 CAN_COMMIT __tmp154
 
   525 op land __tmp157 __tmp155 __tmp156
   526 jump __label80 equal __tmp157 false
   527 op sub __tmp159 battery_change OWN_CONSUMPTION
-    * op sub __tmp160 __tmp159 SAFETY_MARGIN
-    * set p __tmp160
+  528 op sub p __tmp159 SAFETY_MARGIN
+  529 noop
   530 op mul __tmp161 p COEF_A2
   531 op add __tmp162 COEF_A1 __tmp161
   532 op mul __tmp163 p __tmp162
-    * op add __tmp164 STARTUP_BAT_ENERGY __tmp163
-    * set commit_margin __tmp164
-    * op add __tmp165 min_level commit_margin
-    * set commit_level __tmp165
+  533 op add commit_margin STARTUP_BAT_ENERGY __tmp163
+  534 noop
+  535 op add commit_level min_level commit_margin
+  536 noop
   537 op idiv __tmp166 commit_level 1000
   538 print "\nCommit threshold:   [gold]"
   539 print __tmp166
 
   559 op or __tmp173 __tmp170 __tmp172
   560 jump __label84 equal __tmp173 false
   561 op equal __tmp175 OVERDRIVE false
-    * op add __tmp176 RESETS __tmp175
-    * set RESETS __tmp176
+  562 op add RESETS RESETS __tmp175
+  563 noop
   564 set OVERDRIVE true
   565 set REACTORS_ON reactors
-    * op add __tmp177 @time DECOMMIT_DELAY
-    * set nextDecommit __tmp177
+  566 op add nextDecommit @time DECOMMIT_DELAY
+  567 noop
   568 set __tmp174 nextDecommit
   569 jump __label85 always
   570 label __label84
 
   572 op lessThan __tmp179 battery_change -100
   573 op or __tmp180 __tmp178 __tmp179
   574 jump __label86 equal __tmp180 false
-    * op add __tmp182 @time DECOMMIT_DELAY
-    * set nextDecommit __tmp182
+  575 op add nextDecommit @time DECOMMIT_DELAY
+  576 noop
   577 set __tmp181 nextDecommit
   578 jump __label87 always
   579 label __label86
 
   587 jump __label91 always
   588 label __label90
   589 op sub __tmp186 REACTORS_ON 1
-    * op max __tmp187 __tmp186 1
-    * set REACTORS_ON __tmp187
+  590 op max REACTORS_ON __tmp186 1
+  591 noop
   592 set CAN_COMMIT true
   593 set __tmp185 CAN_COMMIT
   594 label __label91
-    * op add __tmp188 @time DECOMMIT_DELAY
-    * set nextDecommit __tmp188
+  595 op add nextDecommit @time DECOMMIT_DELAY
+  596 noop
   597 set __tmp184 nextDecommit
   598 jump __label89 always
   599 label __label88
   600 op lessThan __tmp189 total_battery commit_level
   601 jump __label92 equal __tmp189 false
-    * op add __tmp191 REACTORS_ON 1
-    * set REACTORS_ON __tmp191
-    * op add __tmp192 COMMITS 1
-    * set COMMITS __tmp192
+  602 op add REACTORS_ON REACTORS_ON 1
+  603 noop
+  604 op add COMMITS COMMITS 1
+  605 noop
   606 set CAN_COMMIT false
   607 set __tmp190 CAN_COMMIT
   608 jump __label93 always
 
   673 control enabled diode3 OUTPUT_3
   674 control enabled generator1 GENERATOR
   675 control enabled generator2 GENERATOR
-    * op equal __tmp202 MODE STARTUP
-    * set startup __tmp202
+  676 op equal startup MODE STARTUP
+  677 noop
   678 set reactors 0
   679 set boosts 0
   680 set enabled true
 
   682 set n START
   683 label __label102
   684 jump __label104 greaterThanEq n __tmp203
-    * getlink __tmp204 n
-    * set block __tmp204
-    * sensor __tmp205 block @type
-    * set __ast3 __tmp205
+  685 getlink block n
+  686 noop
+  687 sensor __ast3 block @type
+  688 noop
   689 jump __label107 equal __ast3 @impact-reactor
   690 jump __label106 always
   691 label __label107
-    * op add __tmp207 reactors 1
-    * set reactors __tmp207
-    * op lessThanEq __tmp208 reactors REACTORS_ON
-    * set enabled __tmp208
+  692 op add reactors reactors 1
+  693 noop
+  694 op lessThanEq enabled reactors REACTORS_ON
+  695 noop
   696 control enabled block enabled
   697 jump __label108 equal enabled false
   698 sensor __tmp210 block @timescale
-    * op add __tmp211 boosts __tmp210
-    * set boosts __tmp211
+  699 op add boosts boosts __tmp210
+  700 noop
   701 set __tmp209 boosts
   702 jump __label109 always
   703 label __label108
 
   739 write REACTORS_ON cell2 CELL_REACTORS_ON
   740 write OVERDRIVE cell2 CELL_OVERDRIVE
   741 read __tmp214 cell2 CELL_REMOTE_REACTORS
-    * op add __tmp215 reactors __tmp214
-    * set reactors __tmp215
+  742 op add reactors reactors __tmp214
+  743 noop
   744 read __tmp216 cell2 CELL_BOOSTS
-    * op add __tmp217 boosts __tmp216
-    * set boosts __tmp217
+  745 op add boosts boosts __tmp216
+  746 noop
   747 set __tmp213 boosts
   748 jump __label115 always
   749 label __label114
   750 set __tmp213 null
   751 label __label115
-    * op min __tmp218 REACTORS_ON reactors
-    * set REACTORS_ON __tmp218
+  752 op min REACTORS_ON REACTORS_ON reactors
+  753 noop
   754 op equal __tmp219 cell1 null
   755 jump __label116 equal __tmp219 false
   756 set STARTUPS 0

Modifications by Initial phase, Case Expression Optimization, iteration 1 (-2 instructions):
 
   215 label __label18
   216 set __tmp49 null
   217 label __label19
-    * set __ast1 MODE
-    * jump __label28 equal __ast1 SHUTDOWN
+  218 jump __label28 equal MODE SHUTDOWN
   219 jump __label27 always
   220 label __label28
   221 set __tmp67 "[salmon]SHUTDOWN[]"
   222 jump __label26 always
   223 label __label27
-    * jump __label30 equal __ast1 STARTUP
+  224 jump __label30 equal MODE STARTUP
   225 jump __label29 always
   226 label __label30
   227 set __tmp67 "[gold]STARTUP[]"
   228 jump __label26 always
   229 label __label29
-    * jump __label32 equal __ast1 RUNNING
+  230 jump __label32 equal MODE RUNNING
   231 jump __label31 always
   232 label __label32
   233 set __tmp67 "[green]RUNNING[]"
 
   301 print "\nPower balance:       [gold]"
   302 print net_power
   303 print "[]"
-    * set __ast2 MODE
-    * jump __label43 equal __ast2 SHUTDOWN
+  304 jump __label43 equal MODE SHUTDOWN
   305 jump __label42 always
   306 label __label43
   307 set REACTORS_ON 0
 
   333 set __tmp82 __tmp87
   334 jump __label41 always
   335 label __label42
-    * jump __label47 equal __ast2 STARTUP
+  336 jump __label47 equal MODE STARTUP
   337 jump __label46 always
   338 label __label47
   339 jump __label48 equal OUTPUT_1 false
 
   476 set __tmp82 __tmp96
   477 jump __label41 always
   478 label __label46
-    * jump __label73 equal __ast2 RUNNING
+  479 jump __label73 equal MODE RUNNING
   480 jump __label72 always
   481 label __label73
   482 sensor __tmp136 tank1 @totalLiquids

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-59 instructions):
 
    59 set START n
    60 op add reactors reactors 1
    61 noop
-    * set __tmp9 reactors
+   62 noop
    63 jump __label6 always
    64 label __label7
    65 jump __label10 equal __ast0 @overdrive-projector
 
    67 jump __label9 always
    68 label __label10
    69 set START n
-    * set __tmp9 START
+   70 noop
    71 jump __label6 always
    72 label __label9
-    * set __tmp9 null
+   73 noop
    74 label __label6
    75 label __label4
    76 jump __label3 always
 
    81 op equal __tmp13 reactors 0
    82 jump __label11 equal __tmp13 false
    83 print "No reactor."
-    * set __tmp14 "No reactor."
+   84 noop
    85 jump __label12 always
    86 label __label11
-    * set __tmp14 null
+   87 noop
    88 label __label12
    89 printflush message1
    90 label __label1
 
   116 op equal __tmp26 MODE SHUTDOWN
   117 jump __label13 equal __tmp26 false
   118 set REASON "Processor reset"
-    * set __tmp27 REASON
+  119 noop
   120 jump __label14 always
   121 label __label13
   122 set REASON "Reason unknown -- out of power?"
-    * set __tmp27 REASON
+  123 noop
   124 label __label14
-    * sensor __tmp28 switch1 @enabled
-    * op notEqual __tmp29 MODE SHUTDOWN
+  125 noop
+  126 noop
   127 set failure_cnt 0
   128 set boosts 0
   129 set nextStart 0
 
   210 label __label23
   211 set __tmp52 __tmp61
   212 label __label21
-    * set __tmp49 __tmp52
+  213 noop
   214 jump __label19 always
   215 label __label18
-    * set __tmp49 null
+  216 noop
   217 label __label19
   218 jump __label28 equal MODE SHUTDOWN
   219 jump __label27 always
 
   252 print " ([gold]"
   253 print multiplier
   254 print "x[])"
-    * set __tmp68 "x[])"
+  255 noop
   256 jump __label34 always
   257 label __label33
-    * set __tmp68 null
+  258 noop
   259 label __label34
   260 print "\n=================================="
   261 sensor __tmp74 tank1 @totalLiquids
   262 op lessThan __tmp75 __tmp74 COOLANT_CUTOFF
   263 jump __label35 equal __tmp75 false
   264 print "\n[salmon]Cryofluid level critical![]"
-    * set __tmp76 "\n[salmon]Cryofluid level critical![]"
+  265 noop
   266 jump __label36 always
   267 label __label35
-    * set __tmp76 null
+  268 noop
   269 label __label36
   270 sensor __tmp77 vault1 @blast-compound
   271 op lessThan __tmp78 __tmp77 FUEL_CUTOFF
   272 jump __label37 equal __tmp78 false
   273 print "\n[salmon]Blast compound level critical![]"
-    * set __tmp79 "\n[salmon]Blast compound level critical![]"
+  274 noop
   275 jump __label38 always
   276 label __label37
-    * set __tmp79 null
+  277 noop
   278 label __label38
   279 op equal __tmp80 enough_battery false
   280 jump __label39 equal __tmp80 false
 
   282 print "\nLink [gold]"
   283 print missing_battery
   284 print " K[] of additional storage to internal battery."
-    * set __tmp81 null
+  285 noop
   286 jump __label40 always
   287 label __label39
-    * set __tmp81 null
+  288 noop
   289 label __label40
   290 print "\nInternal battery:    [gold]"
   291 print battery_level_str
 
   330 label __label44
   331 set __tmp87 null
   332 label __label45
-    * set __tmp82 __tmp87
+  333 noop
   334 jump __label41 always
   335 label __label42
   336 jump __label47 equal MODE STARTUP
 
   384 print "\nRequired power level: [gold]"
   385 print neededPower
   386 print "[]"
-    * set __tmp104 null
+  387 noop
   388 jump __label57 always
   389 label __label56
-    * set __tmp104 null
+  390 noop
   391 label __label57
   392 op greaterThan __tmp105 net_power 100
   393 jump __label58 equal __tmp105 false
   394 set OVERDRIVE true
-    * set __tmp106 OVERDRIVE
+  395 noop
   396 jump __label59 always
   397 label __label58
-    * set __tmp106 null
+  398 noop
   399 label __label59
   400 op lessThan __tmp107 REACTORS_ON reactors
   401 op greaterThan __tmp108 net_power 1000
 
   408 set OUTPUT_3 OUTPUT_2
   409 set OUTPUT_2 OUTPUT_1
   410 set OUTPUT_1 1
-    * set __tmp113 OUTPUT_1
+  411 noop
   412 jump __label61 always
   413 label __label60
-    * set __tmp113 null
+  414 noop
   415 label __label61
   416 op equal __tmp114 OUTPUT_1 0
   417 jump __label62 equal __tmp114 false
 
   428 label __label64
   429 set __tmp119 null
   430 label __label65
-    * set __tmp115 __tmp119
+  431 noop
   432 jump __label63 always
   433 label __label62
-    * set __tmp115 null
+  434 noop
   435 label __label63
   436 op greaterThan __tmp121 @time nextStart
   437 op land __tmp122 canStart __tmp121
 
   449 noop
   450 op add nextStart @time STARTUP_DELAY
   451 noop
-    * set __tmp123 nextStart
+  452 noop
   453 jump __label67 always
   454 label __label66
-    * set __tmp123 null
+  455 noop
   456 label __label67
   457 op greaterThanEq __tmp129 REACTORS_ON reactors
   458 op greaterThan __tmp130 @time nextStart
 
   473 label __label71
   474 set __tmp96 __tmp134
   475 label __label53
-    * set __tmp82 __tmp96
+  476 noop
   477 jump __label41 always
   478 label __label46
   479 jump __label73 equal MODE RUNNING
 
   486 set MODE SHUTDOWN
   487 control enabled switch1 false
   488 set REASON "Cryo level too low"
-    * set __tmp139 REASON
+  489 noop
   490 jump __label75 always
   491 label __label74
-    * set __tmp139 null
+  492 noop
   493 label __label75
   494 sensor __tmp140 vault1 @blast-compound
   495 op lessThan __tmp141 __tmp140 FUEL_CUTOFF
 
   498 set MODE SHUTDOWN
   499 control enabled switch1 false
   500 set REASON "Blast compound level too low"
-    * set __tmp143 REASON
+  501 noop
   502 jump __label77 always
   503 label __label76
-    * set __tmp143 null
+  504 noop
   505 label __label77
   506 sensor __tmp144 tank1 @totalLiquids
   507 op greaterThan __tmp145 __tmp144 COOLANT_SAT
 
   535 op idiv __tmp166 commit_level 1000
   536 print "\nCommit threshold:   [gold]"
   537 print __tmp166
-    * set __tmp158 __tmp166
+  538 noop
   539 jump __label81 always
   540 label __label80
-    * set __tmp158 null
+  541 noop
   542 label __label81
   543 op equal __tmp167 commit_level 0
   544 jump __label82 equal __tmp167 false
   545 op idiv __tmp169 min_level 1000
   546 print "\nRestart threshold: [gold]"
   547 print __tmp169
-    * set __tmp168 __tmp169
+  548 noop
   549 jump __label83 always
   550 label __label82
-    * set __tmp168 null
+  551 noop
   552 label __label83
   553 print "[] K"
   554 op lessThan __tmp170 total_battery min_level
 
   572 jump __label86 equal __tmp180 false
   573 op add nextDecommit @time DECOMMIT_DELAY
   574 noop
-    * set __tmp181 nextDecommit
+  575 noop
   576 jump __label87 always
   577 label __label86
-    * set __tmp181 null
+  578 noop
   579 label __label87
   580 op greaterThan __tmp183 @time nextDecommit
   581 jump __label88 equal __tmp183 false
   582 jump __label90 equal OVERDRIVE false
   583 set OVERDRIVE false
-    * set __tmp185 OVERDRIVE
+  584 noop
   585 jump __label91 always
   586 label __label90
   587 op sub __tmp186 REACTORS_ON 1
   588 op max REACTORS_ON __tmp186 1
   589 noop
   590 set CAN_COMMIT true
-    * set __tmp185 CAN_COMMIT
+  591 noop
   592 label __label91
   593 op add nextDecommit @time DECOMMIT_DELAY
   594 noop
 
   611 label __label89
   612 set __tmp174 __tmp184
   613 label __label85
-    * set __tmp152 __tmp174
+  614 noop
   615 jump __label79 always
   616 label __label78
   617 sensor __tmp193 switch2 @enabled
   618 jump __label94 equal __tmp193 false
   619 print "\n[salmon]Load adapting not possible.[]"
-    * set __tmp194 "\n[salmon]Load adapting not possible.[]"
+  620 noop
   621 jump __label95 always
   622 label __label94
   623 print "\n[gold]Load adapting not active.[]"
-    * set __tmp194 "\n[gold]Load adapting not active.[]"
+  624 noop
   625 label __label95
   626 set REACTORS_ON reactors
   627 set OVERDRIVE true
-    * set __tmp152 OVERDRIVE
+  628 noop
   629 label __label79
   630 op mul __tmp195 PLANT_PROTECTION BATTERY_SAT
   631 op lessThan __tmp196 total_battery __tmp195
   632 jump __label96 equal __tmp196 false
   633 set OUTPUT_2 0
   634 set OUTPUT_3 0
-    * set __tmp197 OUTPUT_3
+  635 noop
   636 jump __label97 always
   637 label __label96
-    * set __tmp197 null
+  638 noop
   639 label __label97
   640 op equal __tmp198 OUTPUT_2 0
   641 jump __label98 equal __tmp198 false
 
   654 label __label98
   655 set __tmp199 null
   656 label __label99
-    * set __tmp82 __tmp199
+  657 noop
   658 jump __label41 always
   659 label __label72
-    * set __tmp82 null
+  660 noop
   661 label __label41
   662 print "\n"
   663 print STARTUPS
 
   701 label __label108
   702 set __tmp209 null
   703 label __label109
-    * set __tmp206 __tmp209
+  704 noop
   705 jump __label105 always
   706 label __label106
   707 jump __label111 equal __ast3 @overdrive-projector
 
   709 jump __label110 always
   710 label __label111
   711 control enabled block OVERDRIVE
-    * set __tmp206 OVERDRIVE
+  712 noop
   713 jump __label105 always
   714 label __label110
   715 jump __label113 equal __ast3 @conduit
 
   722 jump __label112 always
   723 label __label113
   724 control enabled block startup
-    * set __tmp206 startup
+  725 noop
   726 jump __label105 always
   727 label __label112
-    * set __tmp206 null
+  728 noop
   729 label __label105
   730 label __label103
   731 op add n n 1
 
   742 read __tmp216 cell2 CELL_BOOSTS
   743 op add boosts boosts __tmp216
   744 noop
-    * set __tmp213 boosts
+  745 noop
   746 jump __label115 always
   747 label __label114
-    * set __tmp213 null
+  748 noop
   749 label __label115
   750 op min REACTORS_ON REACTORS_ON reactors
   751 noop
 
   754 set STARTUPS 0
   755 set RESETS 0
   756 set COMMITS 0
-    * set __tmp220 COMMITS
+  757 noop
   758 jump __label117 always
   759 label __label116
   760 write MODE cell1 0
 
   768 write STARTUPS cell1 8
   769 write RESETS cell1 9
   770 write COMMITS cell1 10
-    * set __tmp220 COMMITS
+  771 noop
   772 label __label117
   773 label __label16
   774 jump __label15 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-14 instructions):
 
   168 jump __label20 equal __tmp51 false
   169 set MODE SHUTDOWN
   170 set REASON "Manual power off"
-    * set __tmp52 REASON
+  171 noop
   172 jump __label21 always
   173 label __label20
   174 op mul min_consumption REACTORS_ON MIN_CONS_REACTOR
 
   208 set failure_cnt 0
   209 set __tmp61 failure_cnt
   210 label __label23
-    * set __tmp52 __tmp61
+  211 noop
   212 label __label21
   213 noop
   214 jump __label19 always
 
   325 set failure_cnt 0
   326 set GENERATOR true
   327 set REASON "Unknown -- out of power?"
-    * set __tmp87 REASON
+  328 noop
   329 jump __label45 always
   330 label __label44
-    * set __tmp87 null
+  331 noop
   332 label __label45
   333 noop
   334 jump __label41 always
 
   370 print " K[]"
   371 set __tmp98 " K[]"
   372 label __label55
-    * set __tmp96 __tmp98
+  373 noop
   374 jump __label53 always
   375 label __label52
   376 op add __tmp101 OUTPUT_1 OUTPUT_2
 
   423 jump __label64 equal __tmp118 false
   424 op add nextStart @time STARTUP_DELAY
   425 noop
-    * set __tmp119 nextStart
+  426 noop
   427 jump __label65 always
   428 label __label64
-    * set __tmp119 null
+  429 noop
   430 label __label65
   431 noop
   432 jump __label63 always
 
   471 label __label70
   472 set __tmp134 null
   473 label __label71
-    * set __tmp96 __tmp134
+  474 noop
   475 label __label53
   476 noop
   477 jump __label41 always
 
   563 set REACTORS_ON reactors
   564 op add nextDecommit @time DECOMMIT_DELAY
   565 noop
-    * set __tmp174 nextDecommit
+  566 noop
   567 jump __label85 always
   568 label __label84
   569 op lessThan __tmp178 battery_level BATTERY_SAT
 
   609 label __label93
   610 set __tmp184 __tmp190
   611 label __label89
-    * set __tmp174 __tmp184
+  612 noop
   613 label __label85
   614 noop
   615 jump __label79 always
 
   649 print "\n*** [gold]Surge tower 2 offline[] ***"
   650 set __tmp201 "\n*** [gold]Surge tower 2 offline[] ***"
   651 label __label101
-    * set __tmp199 __tmp201
+  652 noop
   653 jump __label99 always
   654 label __label98
-    * set __tmp199 null
+  655 noop
   656 label __label99
   657 noop
   658 jump __label41 always
 
   696 sensor __tmp210 block @timescale
   697 op add boosts boosts __tmp210
   698 noop
-    * set __tmp209 boosts
+  699 noop
   700 jump __label109 always
   701 label __label108
-    * set __tmp209 null
+  702 noop
   703 label __label109
   704 noop
   705 jump __label105 always

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-10 instructions):
 
   202 label __label24
   203 set __tmp66 null
   204 label __label25
-    * set __tmp61 __tmp66
+  205 noop
   206 jump __label23 always
   207 label __label22
   208 set failure_cnt 0
-    * set __tmp61 failure_cnt
+  209 noop
   210 label __label23
   211 noop
   212 label __label21
 
   361 set REACTORS_ON 1
   362 op add nextStart @time STARTUP_DELAY
   363 noop
-    * set __tmp98 nextStart
+  364 noop
   365 jump __label55 always
   366 label __label54
   367 op idiv __tmp100 STARTUP_BAT_ENERGY 1000
   368 print "\nRequired startup energy: [gold]"
   369 print __tmp100
   370 print " K[]"
-    * set __tmp98 " K[]"
+  371 noop
   372 label __label55
   373 noop
   374 jump __label53 always
 
   466 set COOLANT_FLAG 0
   467 set FUEL_FLAG 0
   468 set GENERATOR false
-    * set __tmp134 GENERATOR
+  469 noop
   470 jump __label71 always
   471 label __label70
-    * set __tmp134 null
+  472 noop
   473 label __label71
   474 noop
   475 label __label53
 
   592 label __label91
   593 op add nextDecommit @time DECOMMIT_DELAY
   594 noop
-    * set __tmp184 nextDecommit
+  595 noop
   596 jump __label89 always
   597 label __label88
   598 op lessThan __tmp189 total_battery commit_level
 
   607 label __label92
   608 set __tmp190 null
   609 label __label93
-    * set __tmp184 __tmp190
+  610 noop
   611 label __label89
   612 noop
   613 label __label85
 
   643 jump __label100 equal __tmp200 false
   644 set OUTPUT_2 1
   645 set OUTPUT_3 1
-    * set __tmp201 OUTPUT_3
+  646 noop
   647 jump __label101 always
   648 label __label100
   649 print "\n*** [gold]Surge tower 2 offline[] ***"
-    * set __tmp201 "\n*** [gold]Surge tower 2 offline[] ***"
+  650 noop
   651 label __label101
   652 noop
   653 jump __label99 always

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   197 print "\nMin. consumption: "
   198 print min_consumption
   199 printflush message2
-    * set __tmp66 null
+  200 noop
   201 jump __label25 always
   202 label __label24
-    * set __tmp66 null
+  203 noop
   204 label __label25
   205 noop
   206 jump __label23 always
 
   602 op add COMMITS COMMITS 1
   603 noop
   604 set CAN_COMMIT false
-    * set __tmp190 CAN_COMMIT
+  605 noop
   606 jump __label93 always
   607 label __label92
-    * set __tmp190 null
+  608 noop
   609 label __label93
   610 noop
   611 label __label89

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
   130 op add nextDecommit @time DECOMMIT_DELAY
   131 noop
   132 label __label15
-    * jump __label17 equal true false
+  133 noop
   134 sensor __tmp31 battery1 @totalPower
   135 op floor battery_level __tmp31
   136 noop

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-11 instructions):
 
    53 print "\n"
    54 sensor __ast0 block @type
    55 noop
-    * jump __label8 equal __ast0 @impact-reactor
-    * jump __label7 always
+   56 jump __label7 notEqual __ast0 @impact-reactor
+   57 noop
    58 label __label8
    59 set START n
    60 op add reactors reactors 1
 
    63 jump __label6 always
    64 label __label7
    65 jump __label10 equal __ast0 @overdrive-projector
-    * jump __label10 equal __ast0 @overdrive-dome
-    * jump __label9 always
+   66 jump __label9 notEqual __ast0 @overdrive-dome
+   67 noop
    68 label __label10
    69 set START n
    70 noop
 
   215 label __label18
   216 noop
   217 label __label19
-    * jump __label28 equal MODE SHUTDOWN
-    * jump __label27 always
+  218 jump __label27 notEqual MODE SHUTDOWN
+  219 noop
   220 label __label28
   221 set __tmp67 "[salmon]SHUTDOWN[]"
   222 jump __label26 always
   223 label __label27
-    * jump __label30 equal MODE STARTUP
-    * jump __label29 always
+  224 jump __label29 notEqual MODE STARTUP
+  225 noop
   226 label __label30
   227 set __tmp67 "[gold]STARTUP[]"
   228 jump __label26 always
   229 label __label29
-    * jump __label32 equal MODE RUNNING
-    * jump __label31 always
+  230 jump __label31 notEqual MODE RUNNING
+  231 noop
   232 label __label32
   233 set __tmp67 "[green]RUNNING[]"
   234 jump __label26 always
 
   301 print "\nPower balance:       [gold]"
   302 print net_power
   303 print "[]"
-    * jump __label43 equal MODE SHUTDOWN
-    * jump __label42 always
+  304 jump __label42 notEqual MODE SHUTDOWN
+  305 noop
   306 label __label43
   307 set REACTORS_ON 0
   308 set OVERDRIVE 0
 
   333 noop
   334 jump __label41 always
   335 label __label42
-    * jump __label47 equal MODE STARTUP
-    * jump __label46 always
+  336 jump __label46 notEqual MODE STARTUP
+  337 noop
   338 label __label47
   339 jump __label48 equal OUTPUT_1 false
   340 jump __label50 equal OUTPUT_2 false
 
   476 noop
   477 jump __label41 always
   478 label __label46
-    * jump __label73 equal MODE RUNNING
-    * jump __label72 always
+  479 jump __label72 notEqual MODE RUNNING
+  480 noop
   481 label __label73
   482 sensor __tmp136 tank1 @totalLiquids
   483 op lessThan __tmp137 __tmp136 COOLANT_CUTOFF
 
   684 noop
   685 sensor __ast3 block @type
   686 noop
-    * jump __label107 equal __ast3 @impact-reactor
-    * jump __label106 always
+  687 jump __label106 notEqual __ast3 @impact-reactor
+  688 noop
   689 label __label107
   690 op add reactors reactors 1
   691 noop
 
   705 jump __label105 always
   706 label __label106
   707 jump __label111 equal __ast3 @overdrive-projector
-    * jump __label111 equal __ast3 @overdrive-dome
-    * jump __label110 always
+  708 jump __label110 notEqual __ast3 @overdrive-dome
+  709 noop
   710 label __label111
   711 control enabled block OVERDRIVE
   712 noop
 
   718 jump __label113 equal __ast3 @conveyor
   719 jump __label113 equal __ast3 @titanium-conveyor
   720 jump __label113 equal __ast3 @plastanium-conveyor
-    * jump __label113 equal __ast3 @armored-conveyor
-    * jump __label112 always
+  721 jump __label112 notEqual __ast3 @armored-conveyor
+  722 noop
   723 label __label113
   724 control enabled block startup
   725 noop

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-25 instructions):
 
    36 noop
    37 set reactors 0
    38 label __label0
-    * op equal __tmp3 reactors 0
-    * jump __label2 equal __tmp3 false
+   39 jump __label2 notEqual reactors 0
    40 set reactors 0
    41 set n @links
    42 noop
    43 label __label3
-    * op greaterThan __tmp5 n 0
-    * jump __label5 equal __tmp5 false
+   44 jump __label5 lessThanEq n 0
    45 op sub n n 1
    46 noop
    47 getlink block n
 
    76 read __tmp11 cell2 CELL_REMOTE_REACTORS
    77 op add reactors reactors __tmp11
    78 noop
-    * op equal __tmp13 reactors 0
-    * jump __label11 equal __tmp13 false
+   79 jump __label11 notEqual reactors 0
    80 print "No reactor."
    81 noop
    82 jump __label12 always
 
   110 read COMMITS cell1 10
   111 noop
   112 set reactors REACTORS_ON
-    * op equal __tmp26 MODE SHUTDOWN
-    * jump __label13 equal __tmp26 false
+  113 jump __label13 notEqual MODE SHUTDOWN
   114 set REASON "Processor reset"
   115 noop
   116 jump __label14 always
 
   157 op div __tmp46 __tmp45 1000
   158 op ceil missing_battery __tmp46
   159 noop
-    * op notEqual __tmp48 MODE SHUTDOWN
-    * jump __label18 equal __tmp48 false
+  160 jump __label18 equal MODE SHUTDOWN
   161 sensor __tmp50 switch1 @enabled
-    * op equal __tmp51 __tmp50 false
-    * jump __label20 equal __tmp51 false
+  162 jump __label20 notEqual __tmp50 false
   163 set MODE SHUTDOWN
   164 set REASON "Manual power off"
   165 noop
 
   181 noop
   182 read __tmp63 cell2 CELL_REMOTE_REACTORS
   183 op add __tmp64 10 __tmp63
-    * op greaterThan __tmp65 failure_cnt __tmp64
-    * jump __label24 equal __tmp65 false
+  184 jump __label24 lessThanEq failure_cnt __tmp64
   185 set MODE SHUTDOWN
   186 control enabled switch1 false
   187 set REASON "Unknown -- out of power?"
 
   252 label __label34
   253 print "\n=================================="
   254 sensor __tmp74 tank1 @totalLiquids
-    * op lessThan __tmp75 __tmp74 COOLANT_CUTOFF
-    * jump __label35 equal __tmp75 false
+  255 jump __label35 greaterThanEq __tmp74 COOLANT_CUTOFF
   256 print "\n[salmon]Cryofluid level critical![]"
   257 noop
   258 jump __label36 always
 
   260 noop
   261 label __label36
   262 sensor __tmp77 vault1 @blast-compound
-    * op lessThan __tmp78 __tmp77 FUEL_CUTOFF
-    * jump __label37 equal __tmp78 false
+  263 jump __label37 greaterThanEq __tmp77 FUEL_CUTOFF
   264 print "\n[salmon]Blast compound level critical![]"
   265 noop
   266 jump __label38 always
   267 label __label37
   268 noop
   269 label __label38
-    * op equal __tmp80 enough_battery false
-    * jump __label39 equal __tmp80 false
+  270 jump __label39 notEqual enough_battery false
   271 print "\n[salmon]Insufficient battery storage![]"
   272 print "\nLink [gold]"
   273 print missing_battery
 
   344 op floor __tmp93 __tmp92
   345 op max neededPower __tmp93 1000
   346 noop
-    * op equal __tmp95 REACTORS_ON 0
-    * jump __label52 equal __tmp95 false
-    * op greaterThanEq __tmp97 total_battery STARTUP_BAT_ENERGY
-    * jump __label54 equal __tmp97 false
+  347 jump __label52 notEqual REACTORS_ON 0
+  348 jump __label54 lessThan total_battery STARTUP_BAT_ENERGY
   349 set REACTORS_ON 1
   350 op add nextStart @time STARTUP_DELAY
   351 noop
 
   367 print "\n[gold]"
   368 print outputs
   369 print "[] surge tower(s) online"
-    * op equal __tmp103 OUTPUT_3 0
-    * jump __label56 equal __tmp103 false
+  370 jump __label56 notEqual OUTPUT_3 0
   371 print "\nRequired power level: [gold]"
   372 print neededPower
   373 print "[]"
 
   376 label __label56
   377 noop
   378 label __label57
-    * op greaterThan __tmp105 net_power 100
-    * jump __label58 equal __tmp105 false
+  379 jump __label58 lessThanEq net_power 100
   380 set OVERDRIVE true
   381 noop
   382 jump __label59 always
 
   389 op greaterThanEq __tmp110 total_battery STARTUP_BAT_ENERGY
   390 op land canStart __tmp109 __tmp110
   391 noop
-    * op greaterThanEq __tmp112 net_power neededPower
-    * jump __label60 equal __tmp112 false
+  392 jump __label60 lessThan net_power neededPower
   393 set OUTPUT_3 OUTPUT_2
   394 set OUTPUT_2 OUTPUT_1
   395 set OUTPUT_1 1
 
   398 label __label60
   399 noop
   400 label __label61
-    * op equal __tmp114 OUTPUT_1 0
-    * jump __label62 equal __tmp114 false
+  401 jump __label62 notEqual OUTPUT_1 0
   402 op mul availablePower REACTOR_OUTPUT boosts
   403 noop
   404 op div ratio neededPower availablePower
   405 noop
-    * op lessThan __tmp118 ratio 1
-    * jump __label64 equal __tmp118 false
+  406 jump __label64 greaterThanEq ratio 1
   407 op add nextStart @time STARTUP_DELAY
   408 noop
   409 noop
 
   523 label __label80
   524 noop
   525 label __label81
-    * op equal __tmp167 commit_level 0
-    * jump __label82 equal __tmp167 false
+  526 jump __label82 notEqual commit_level 0
   527 op idiv __tmp169 min_level 1000
   528 print "\nRestart threshold: [gold]"
   529 print __tmp169
 
   559 label __label86
   560 noop
   561 label __label87
-    * op greaterThan __tmp183 @time nextDecommit
-    * jump __label88 equal __tmp183 false
+  562 jump __label88 lessThanEq @time nextDecommit
   563 jump __label90 equal OVERDRIVE false
   564 set OVERDRIVE false
   565 noop
 
   576 noop
   577 jump __label89 always
   578 label __label88
-    * op lessThan __tmp189 total_battery commit_level
-    * jump __label92 equal __tmp189 false
+  579 jump __label92 greaterThanEq total_battery commit_level
   580 op add REACTORS_ON REACTORS_ON 1
   581 noop
   582 op add COMMITS COMMITS 1
 
   608 noop
   609 label __label79
   610 op mul __tmp195 PLANT_PROTECTION BATTERY_SAT
-    * op lessThan __tmp196 total_battery __tmp195
-    * jump __label96 equal __tmp196 false
+  611 jump __label96 greaterThanEq total_battery __tmp195
   612 set OUTPUT_2 0
   613 set OUTPUT_3 0
   614 noop
 
   616 label __label96
   617 noop
   618 label __label97
-    * op equal __tmp198 OUTPUT_2 0
-    * jump __label98 equal __tmp198 false
-    * op greaterThan __tmp200 total_battery BATTERY_SAT
-    * jump __label100 equal __tmp200 false
+  619 jump __label98 notEqual OUTPUT_2 0
+  620 jump __label100 lessThanEq total_battery BATTERY_SAT
   621 set OUTPUT_2 1
   622 set OUTPUT_3 1
   623 noop
 
   708 op add n n 1
   709 jump __label102 always
   710 label __label104
-    * op notEqual __tmp212 cell2 null
-    * jump __label114 equal __tmp212 false
+  711 jump __label114 equal cell2 null
   712 write reactors cell2 CELL_PRIOR_REACTORS
   713 write REACTORS_ON cell2 CELL_REACTORS_ON
   714 write OVERDRIVE cell2 CELL_OVERDRIVE
 
   725 label __label115
   726 op min REACTORS_ON REACTORS_ON reactors
   727 noop
-    * op equal __tmp219 cell1 null
-    * jump __label116 equal __tmp219 false
+  728 jump __label116 notEqual cell1 null
   729 set STARTUPS 0
   730 set RESETS 0
   731 set COMMITS 0

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-28 instructions):
 
    66 label __label10
    67 set START n
    68 noop
-    * jump __label6 always
+   69 noop
    70 label __label9
    71 noop
    72 label __label6
 
    79 jump __label11 notEqual reactors 0
    80 print "No reactor."
    81 noop
-    * jump __label12 always
+   82 noop
    83 label __label11
    84 noop
    85 label __label12
 
   191 print min_consumption
   192 printflush message2
   193 noop
-    * jump __label25 always
+  194 noop
   195 label __label24
   196 noop
   197 label __label25
 
   204 noop
   205 label __label21
   206 noop
-    * jump __label19 always
+  207 noop
   208 label __label18
   209 noop
   210 label __label19
 
   246 print multiplier
   247 print "x[])"
   248 noop
-    * jump __label34 always
+  249 noop
   250 label __label33
   251 noop
   252 label __label34
 
   255 jump __label35 greaterThanEq __tmp74 COOLANT_CUTOFF
   256 print "\n[salmon]Cryofluid level critical![]"
   257 noop
-    * jump __label36 always
+  258 noop
   259 label __label35
   260 noop
   261 label __label36
 
   263 jump __label37 greaterThanEq __tmp77 FUEL_CUTOFF
   264 print "\n[salmon]Blast compound level critical![]"
   265 noop
-    * jump __label38 always
+  266 noop
   267 label __label37
   268 noop
   269 label __label38
 
   273 print missing_battery
   274 print " K[] of additional storage to internal battery."
   275 noop
-    * jump __label40 always
+  276 noop
   277 label __label39
   278 noop
   279 label __label40
 
   316 set GENERATOR true
   317 set REASON "Unknown -- out of power?"
   318 noop
-    * jump __label45 always
+  319 noop
   320 label __label44
   321 noop
   322 label __label45
 
   372 print neededPower
   373 print "[]"
   374 noop
-    * jump __label57 always
+  375 noop
   376 label __label56
   377 noop
   378 label __label57
   379 jump __label58 lessThanEq net_power 100
   380 set OVERDRIVE true
   381 noop
-    * jump __label59 always
+  382 noop
   383 label __label58
   384 noop
   385 label __label59
 
   394 set OUTPUT_2 OUTPUT_1
   395 set OUTPUT_1 1
   396 noop
-    * jump __label61 always
+  397 noop
   398 label __label60
   399 noop
   400 label __label61
 
   407 op add nextStart @time STARTUP_DELAY
   408 noop
   409 noop
-    * jump __label65 always
+  410 noop
   411 label __label64
   412 noop
   413 label __label65
   414 noop
-    * jump __label63 always
+  415 noop
   416 label __label62
   417 noop
   418 label __label63
 
   433 op add nextStart @time STARTUP_DELAY
   434 noop
   435 noop
-    * jump __label67 always
+  436 noop
   437 label __label66
   438 noop
   439 label __label67
 
   450 set FUEL_FLAG 0
   451 set GENERATOR false
   452 noop
-    * jump __label71 always
+  453 noop
   454 label __label70
   455 noop
   456 label __label71
 
   470 control enabled switch1 false
   471 set REASON "Cryo level too low"
   472 noop
-    * jump __label75 always
+  473 noop
   474 label __label74
   475 noop
   476 label __label75
 
   482 control enabled switch1 false
   483 set REASON "Blast compound level too low"
   484 noop
-    * jump __label77 always
+  485 noop
   486 label __label76
   487 noop
   488 label __label77
 
   519 print "\nCommit threshold:   [gold]"
   520 print __tmp166
   521 noop
-    * jump __label81 always
+  522 noop
   523 label __label80
   524 noop
   525 label __label81
 
   528 print "\nRestart threshold: [gold]"
   529 print __tmp169
   530 noop
-    * jump __label83 always
+  531 noop
   532 label __label82
   533 noop
   534 label __label83
 
   555 op add nextDecommit @time DECOMMIT_DELAY
   556 noop
   557 noop
-    * jump __label87 always
+  558 noop
   559 label __label86
   560 noop
   561 label __label87
 
   583 noop
   584 set CAN_COMMIT false
   585 noop
-    * jump __label93 always
+  586 noop
   587 label __label92
   588 noop
   589 label __label93
 
   612 set OUTPUT_2 0
   613 set OUTPUT_3 0
   614 noop
-    * jump __label97 always
+  615 noop
   616 label __label96
   617 noop
   618 label __label97
 
   627 noop
   628 label __label101
   629 noop
-    * jump __label99 always
+  630 noop
   631 label __label98
   632 noop
   633 label __label99
   634 noop
-    * jump __label41 always
+  635 noop
   636 label __label72
   637 noop
   638 label __label41
 
   674 op add boosts boosts __tmp210
   675 noop
   676 noop
-    * jump __label109 always
+  677 noop
   678 label __label108
   679 noop
   680 label __label109
 
   700 label __label113
   701 control enabled block startup
   702 noop
-    * jump __label105 always
+  703 noop
   704 label __label112
   705 noop
   706 label __label105
 
   719 op add boosts boosts __tmp216
   720 noop
   721 noop
-    * jump __label115 always
+  722 noop
   723 label __label114
   724 noop
   725 label __label115

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   110 read COMMITS cell1 10
   111 noop
   112 set reactors REACTORS_ON
-    * jump __label13 notEqual MODE SHUTDOWN
+  113 set REASON "Reason unknown -- out of power?"
+  114 noop
+  115 jump __label14 notEqual MODE SHUTDOWN
   116 set REASON "Processor reset"
   117 noop
   118 jump __label14 always
-    * label __label13
-    * set REASON "Reason unknown -- out of power?"
-    * noop
   119 label __label14
   120 noop
   121 noop
 
   325 jump __label46 notEqual MODE STARTUP
   326 noop
   327 label __label47
-    * jump __label48 equal OUTPUT_1 false
-    * jump __label50 equal OUTPUT_2 false
-    * set __tmp90 battery4
+  328 set nextBattery battery2
+  329 jump __label49 equal OUTPUT_1 false
+  330 set nextBattery battery3
+  331 jump __label51 equal OUTPUT_2 false
+  332 set nextBattery battery4
   333 jump __label51 always
-    * label __label50
-    * set __tmp90 battery3
   334 label __label51
-    * set __tmp89 __tmp90
   335 jump __label49 always
-    * label __label48
-    * set __tmp89 battery2
   336 label __label49
-    * set nextBattery __tmp89
   337 sensor __tmp91 nextBattery @powerNetOut
   338 op mul __tmp92 __tmp91 POWER_MARGIN
   339 op floor __tmp93 __tmp92
 
   414 op greaterThan __tmp121 @time nextStart
   415 op land __tmp122 canStart __tmp121
   416 jump __label66 equal __tmp122 false
-    * jump __label68 equal FAST_START false
-    * op idiv __tmp124 total_battery STARTUP_BAT_ENERGY
+  417 set start_at_once 1
+  418 jump __label69 equal FAST_START false
+  419 op idiv start_at_once total_battery STARTUP_BAT_ENERGY
   420 noop
   421 jump __label69 always
-    * label __label68
-    * set __tmp124 1
   422 label __label69
-    * set start_at_once __tmp124
   423 op add __tmp126 REACTORS_ON start_at_once
   424 op min REACTORS_ON __tmp126 reactors
   425 noop

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
   645 noop
   646 set reactors 0
   647 set boosts 0
-    * set enabled true
   648 set __tmp203 @links
   649 set n START
   650 label __label102

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1 (-1 instructions):
 
    36 noop
    37 set reactors 0
    38 label __label0
-    * jump __label2 notEqual reactors 0
+   39 label __label118
    40 set reactors 0
    41 set n @links
    42 noop
    43 label __label3
    44 jump __label5 lessThanEq n 0
+   45 label __label119
    46 op sub n n 1
    47 noop
    48 getlink block n
 
    72 noop
    73 label __label6
    74 label __label4
-    * jump __label3 always
+   75 jump __label119 greaterThan n 0
    76 label __label5
    77 read __tmp11 cell2 CELL_REMOTE_REACTORS
    78 op add reactors reactors __tmp11
 
    86 label __label12
    87 printflush message1
    88 label __label1
-    * jump __label0 always
+   89 jump __label118 equal reactors 0
    90 label __label2
    91 read MODE cell1 0
    92 noop
 
   650 set n START
   651 label __label102
   652 jump __label104 greaterThanEq n __tmp203
+  653 label __label120
   654 getlink block n
   655 noop
   656 sensor __ast3 block @type
 
   700 label __label105
   701 label __label103
   702 op add n n 1
-    * jump __label102 always
+  703 jump __label120 lessThan n __tmp203
   704 label __label104
   705 jump __label114 equal cell2 null
   706 write reactors cell2 CELL_PRIOR_REACTORS

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-4 instructions):
 
   116 jump __label14 notEqual MODE SHUTDOWN
   117 set REASON "Processor reset"
   118 noop
-    * jump __label14 always
+  119 noop
   120 label __label14
   121 noop
   122 noop
 
   331 set nextBattery battery3
   332 jump __label51 equal OUTPUT_2 false
   333 set nextBattery battery4
-    * jump __label51 always
+  334 noop
   335 label __label51
-    * jump __label49 always
+  336 noop
   337 label __label49
   338 sensor __tmp91 nextBattery @powerNetOut
   339 op mul __tmp92 __tmp91 POWER_MARGIN
 
   419 jump __label69 equal FAST_START false
   420 op idiv start_at_once total_battery STARTUP_BAT_ENERGY
   421 noop
-    * jump __label69 always
+  422 noop
   423 label __label69
   424 op add __tmp126 REACTORS_ON start_at_once
   425 op min REACTORS_ON __tmp126 reactors

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-1 instructions):
 
    34 op mul __tmp1 MAX_PRODUCTION 2
    35 op div COEF_A2 RAMP_TIME __tmp1
    36 noop
-    * set reactors 0
    37 label __label0
    38 label __label118
    39 set reactors 0
 
   648 set __tmp203 @links
   649 set n START
   650 label __label102
-    * jump __label104 greaterThanEq n __tmp203
+  651 jump __label104 greaterThanEq START __tmp203
   652 label __label120
   653 getlink block n
   654 noop

Modifications by Final phase, Jump Threading, iteration 1:
 
   180 noop
   181 read __tmp63 cell2 CELL_REMOTE_REACTORS
   182 op add __tmp64 10 __tmp63
-    * jump __label24 lessThanEq failure_cnt __tmp64
+  183 jump __label23 lessThanEq failure_cnt __tmp64
   184 set MODE SHUTDOWN
   185 control enabled switch1 false
   186 set REASON "Unknown -- out of power?"
 
   306 print REASON
   307 print "[]"
   308 sensor __tmp86 switch1 @enabled
-    * jump __label44 equal __tmp86 false
+  309 jump __label41 equal __tmp86 false
   310 set MODE STARTUP
   311 op add STARTUPS STARTUPS 1
   312 noop
 
   345 op add nextStart @time STARTUP_DELAY
   346 noop
   347 noop
-    * jump __label55 always
+  348 jump __label41 always
   349 label __label54
   350 op idiv __tmp100 STARTUP_BAT_ENERGY 1000
   351 print "\nRequired startup energy: [gold]"
 
   354 noop
   355 label __label55
   356 noop
-    * jump __label53 always
+  357 jump __label41 always
   358 label __label52
   359 op add __tmp101 OUTPUT_1 OUTPUT_2
   360 op add outputs __tmp101 OUTPUT_3
 
   435 op land __tmp131 __tmp129 __tmp130
   436 op greaterThan __tmp132 OUTPUT_3 0
   437 op land __tmp133 __tmp131 __tmp132
-    * jump __label70 equal __tmp133 false
+  438 jump __label41 equal __tmp133 false
   439 set MODE RUNNING
   440 op add nextDecommit @time DECOMMIT_DELAY
   441 noop
 
   539 op add nextDecommit @time DECOMMIT_DELAY
   540 noop
   541 noop
-    * jump __label85 always
+  542 jump __label79 always
   543 label __label84
   544 op lessThan __tmp178 battery_level BATTERY_SAT
   545 op lessThan __tmp179 battery_change -100
 
   567 op add nextDecommit @time DECOMMIT_DELAY
   568 noop
   569 noop
-    * jump __label89 always
+  570 jump __label79 always
   571 label __label88
-    * jump __label92 greaterThanEq total_battery commit_level
+  572 jump __label79 greaterThanEq total_battery commit_level
   573 op add REACTORS_ON REACTORS_ON 1
   574 noop
   575 op add COMMITS COMMITS 1
 
   662 op lessThanEq enabled reactors REACTORS_ON
   663 noop
   664 control enabled block enabled
-    * jump __label108 equal enabled false
+  665 jump __label105 equal enabled false
   666 sensor __tmp210 block @timescale
   667 op add boosts boosts __tmp210
   668 noop
 
   723 set RESETS 0
   724 set COMMITS 0
   725 noop
-    * jump __label117 always
+  726 jump __label15 always
   727 label __label116
   728 write MODE cell1 0
   729 write OUTPUT_1 cell1 1

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-1 instructions):
 
   740 label __label117
   741 label __label16
   742 jump __label15 always
-    * label __label17
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-2 instructions):
 
   283 print total_battery_str
   284 print "[]/[green]"
   285 print total_capacity_str
-    * print "[] K"
-    * print "\nBattery change:     [gold]"
+  286 print "[] K\nBattery change:     [gold]"
   287 print battery_change
-    * print "[]"
-    * print "\nPower balance:       [gold]"
+  288 print "[]\nPower balance:       [gold]"
   289 print net_power
   290 print "[]"
   291 jump __label42 notEqual MODE SHUTDOWN

Final code before resolving virtual instructions:

set PLANT_PROTECTION 1
set FAST_START 1
set PRODUCTION_INDEX 509
set NET_POWER_INDEX 510
set BATTERY_CHANGE_INDEX 511
set CELL_PRIOR_REACTORS 0
set CELL_REMOTE_REACTORS 1
set CELL_REACTORS_ON 2
set CELL_OVERDRIVE 3
set CELL_BOOSTS 4
set SHUTDOWN 0
set STARTUP 1
set RUNNING 2
set BATTERY_SAT 47500
set BATTERY_PER_REACTOR 100000
set MIN_CONS_REACTOR 1200
set POWER_MARGIN 1.05
set STARTUP_DELAY 2000
set STARTUP_BAT_ENERGY 25000
set REACTOR_OUTPUT 6300
set COOLANT_CUTOFF 750
set COOLANT_SAT 1000
set FUEL_CUTOFF 700
set FUEL_SAT 800
set DECOMMIT_DELAY 6000
set PANIC_ENERGY_DROP -2500
set BATTERY_CRITICAL 0.5
set OWN_CONSUMPTION 1500
set MAX_PRODUCTION 7400
set SAFETY_MARGIN 1000
set STARTUP_TIME 5
set RAMP_TIME 70
op sub COEF_A1 0 STARTUP_TIME
op mul __tmp1 MAX_PRODUCTION 2
op div COEF_A2 RAMP_TIME __tmp1
label __label118
set reactors 0
set n @links
jump __label5 lessThanEq n 0
label __label119
op sub n n 1
getlink block n
print "Found: "
print block
print "\n"
sensor __ast0 block @type
jump __label7 notEqual __ast0 @impact-reactor
set START n
op add reactors reactors 1
jump __label6 always 0 0
label __label7
jump __label10 equal __ast0 @overdrive-projector
jump __label9 notEqual __ast0 @overdrive-dome
label __label10
set START n
label __label9
label __label6
jump __label119 greaterThan n 0
label __label5
read __tmp11 cell2 CELL_REMOTE_REACTORS
op add reactors reactors __tmp11
jump __label11 notEqual reactors 0
print "No reactor."
label __label11
printflush message1
jump __label118 equal reactors 0
read MODE cell1 0
read OUTPUT_1 cell1 1
read OUTPUT_2 cell1 2
read OUTPUT_3 cell1 3
read REACTORS_ON cell1 4
read OVERDRIVE cell1 5
read GENERATOR cell1 6
read CAN_COMMIT cell1 7
read STARTUPS cell1 8
read RESETS cell1 9
read COMMITS cell1 10
set reactors REACTORS_ON
set REASON "Reason unknown -- out of power?"
jump __label14 notEqual MODE SHUTDOWN
set REASON "Processor reset"
label __label14
set failure_cnt 0
set boosts 0
set nextStart 0
op add nextDecommit @time DECOMMIT_DELAY
label __label15
sensor __tmp31 battery1 @totalPower
op floor battery_level __tmp31 0
op idiv battery_level_str battery_level 1000
sensor __tmp34 battery1 @powerNetStored
op floor total_battery __tmp34 0
op idiv total_battery_str total_battery 1000
sensor consumption battery1 @powerNetOut
read production bank1 PRODUCTION_INDEX
read net_power bank1 NET_POWER_INDEX
read battery_change bank1 BATTERY_CHANGE_INDEX
sensor total_capacity battery1 @powerNetCapacity
op idiv total_capacity_str total_capacity 1000
op mul required_capacity BATTERY_PER_REACTOR reactors
op greaterThanEq enough_battery total_capacity required_capacity
op sub __tmp45 required_capacity total_capacity
op div __tmp46 __tmp45 1000
op ceil missing_battery __tmp46 0
jump __label18 equal MODE SHUTDOWN
sensor __tmp50 switch1 @enabled
jump __label20 notEqual __tmp50 false
set MODE SHUTDOWN
set REASON "Manual power off"
jump __label21 always 0 0
label __label20
op mul min_consumption REACTORS_ON MIN_CONS_REACTOR
op lessThan failure1 consumption min_consumption
op equal __tmp55 battery_level 0
op greaterThan __tmp56 consumption 0
op land __tmp57 __tmp55 __tmp56
op equal __tmp58 production 0
op land failure2 __tmp57 __tmp58
op or __tmp60 failure1 failure2
jump __label22 equal __tmp60 false
op add failure_cnt failure_cnt 1
read __tmp63 cell2 CELL_REMOTE_REACTORS
op add __tmp64 10 __tmp63
jump __label23 lessThanEq failure_cnt __tmp64
set MODE SHUTDOWN
control enabled switch1 false 0 0 0
set REASON "Unknown -- out of power?"
print "Consumption: "
print consumption
print "\nMin. consumption: "
print min_consumption
printflush message2
jump __label23 always 0 0
label __label22
set failure_cnt 0
label __label23
label __label21
label __label18
jump __label27 notEqual MODE SHUTDOWN
set __tmp67 "[salmon]SHUTDOWN[]"
jump __label26 always 0 0
label __label27
jump __label29 notEqual MODE STARTUP
set __tmp67 "[gold]STARTUP[]"
jump __label26 always 0 0
label __label29
jump __label31 notEqual MODE RUNNING
set __tmp67 "[green]RUNNING[]"
jump __label26 always 0 0
label __label31
set __tmp67 null
label __label26
set STR_MODE __tmp67
print STR_MODE
print ", reactors [green]"
print REACTORS_ON
print "/"
print reactors
print "[]"
jump __label33 equal OVERDRIVE false
op mul __tmp69 100 boosts
op div __tmp70 __tmp69 REACTORS_ON
op add __tmp71 __tmp70 0.5
op floor __tmp72 __tmp71 0
op div multiplier __tmp72 100
print " ([gold]"
print multiplier
print "x[])"
label __label33
print "\n=================================="
sensor __tmp74 tank1 @totalLiquids
jump __label35 greaterThanEq __tmp74 COOLANT_CUTOFF
print "\n[salmon]Cryofluid level critical![]"
label __label35
sensor __tmp77 vault1 @blast-compound
jump __label37 greaterThanEq __tmp77 FUEL_CUTOFF
print "\n[salmon]Blast compound level critical![]"
label __label37
jump __label39 notEqual enough_battery false
print "\n[salmon]Insufficient battery storage![]"
print "\nLink [gold]"
print missing_battery
print " K[] of additional storage to internal battery."
label __label39
print "\nInternal battery:    [gold]"
print battery_level_str
print "[]/[green]50[] K"
print "\nTotal battery:        [gold]"
print total_battery_str
print "[]/[green]"
print total_capacity_str
print "[] K\nBattery change:     [gold]"
print battery_change
print "[]\nPower balance:       [gold]"
print net_power
print "[]"
jump __label42 notEqual MODE SHUTDOWN
set REACTORS_ON 0
set OVERDRIVE 0
set OUTPUT_1 0
set OUTPUT_2 0
set OUTPUT_3 0
op greaterThanEq __tmp83 net_power -150
op lessThan __tmp84 total_battery BATTERY_SAT
op land GENERATOR __tmp83 __tmp84
print "\nShutdown reason: [gold]"
print REASON
print "[]"
sensor __tmp86 switch1 @enabled
jump __label41 equal __tmp86 false
set MODE STARTUP
op add STARTUPS STARTUPS 1
set nextStart 0
set failure_cnt 0
set GENERATOR true
set REASON "Unknown -- out of power?"
jump __label41 always 0 0
label __label42
jump __label46 notEqual MODE STARTUP
set nextBattery battery2
jump __label49 equal OUTPUT_1 false
set nextBattery battery3
jump __label51 equal OUTPUT_2 false
set nextBattery battery4
label __label51
label __label49
sensor __tmp91 nextBattery @powerNetOut
op mul __tmp92 __tmp91 POWER_MARGIN
op floor __tmp93 __tmp92 0
op max neededPower __tmp93 1000
jump __label52 notEqual REACTORS_ON 0
jump __label54 lessThan total_battery STARTUP_BAT_ENERGY
set REACTORS_ON 1
op add nextStart @time STARTUP_DELAY
jump __label41 always 0 0
label __label54
op idiv __tmp100 STARTUP_BAT_ENERGY 1000
print "\nRequired startup energy: [gold]"
print __tmp100
print " K[]"
jump __label41 always 0 0
label __label52
op add __tmp101 OUTPUT_1 OUTPUT_2
op add outputs __tmp101 OUTPUT_3
print "\n[gold]"
print outputs
print "[] surge tower(s) online"
jump __label56 notEqual OUTPUT_3 0
print "\nRequired power level: [gold]"
print neededPower
print "[]"
label __label56
jump __label58 lessThanEq net_power 100
set OVERDRIVE true
label __label58
op lessThan __tmp107 REACTORS_ON reactors
op greaterThan __tmp108 net_power 1000
op land __tmp109 __tmp107 __tmp108
op greaterThanEq __tmp110 total_battery STARTUP_BAT_ENERGY
op land canStart __tmp109 __tmp110
jump __label60 lessThan net_power neededPower
set OUTPUT_3 OUTPUT_2
set OUTPUT_2 OUTPUT_1
set OUTPUT_1 1
label __label60
jump __label62 notEqual OUTPUT_1 0
op mul availablePower REACTOR_OUTPUT boosts
op div ratio neededPower availablePower
jump __label64 greaterThanEq ratio 1
op add nextStart @time STARTUP_DELAY
label __label64
label __label62
op greaterThan __tmp121 @time nextStart
op land __tmp122 canStart __tmp121
jump __label66 equal __tmp122 false
set start_at_once 1
jump __label69 equal FAST_START false
op idiv start_at_once total_battery STARTUP_BAT_ENERGY
label __label69
op add __tmp126 REACTORS_ON start_at_once
op min REACTORS_ON __tmp126 reactors
op add nextStart @time STARTUP_DELAY
label __label66
op greaterThanEq __tmp129 REACTORS_ON reactors
op greaterThan __tmp130 @time nextStart
op land __tmp131 __tmp129 __tmp130
op greaterThan __tmp132 OUTPUT_3 0
op land __tmp133 __tmp131 __tmp132
jump __label41 equal __tmp133 false
set MODE RUNNING
op add nextDecommit @time DECOMMIT_DELAY
set COOLANT_FLAG 0
set FUEL_FLAG 0
set GENERATOR false
jump __label41 always 0 0
label __label46
jump __label72 notEqual MODE RUNNING
sensor __tmp136 tank1 @totalLiquids
op lessThan __tmp137 __tmp136 COOLANT_CUTOFF
op land __tmp138 COOLANT_FLAG __tmp137
jump __label74 equal __tmp138 false
set MODE SHUTDOWN
control enabled switch1 false 0 0 0
set REASON "Cryo level too low"
label __label74
sensor __tmp140 vault1 @blast-compound
op lessThan __tmp141 __tmp140 FUEL_CUTOFF
op land __tmp142 FUEL_FLAG __tmp141
jump __label76 equal __tmp142 false
set MODE SHUTDOWN
control enabled switch1 false 0 0 0
set REASON "Blast compound level too low"
label __label76
sensor __tmp144 tank1 @totalLiquids
op greaterThan __tmp145 __tmp144 COOLANT_SAT
op or COOLANT_FLAG COOLANT_FLAG __tmp145
sensor __tmp147 vault1 @blast-compound
op greaterThan __tmp148 __tmp147 FUEL_SAT
op or FUEL_FLAG FUEL_FLAG __tmp148
sensor __tmp150 switch2 @enabled
op land __tmp151 enough_battery __tmp150
jump __label78 equal __tmp151 false
op mul min_level BATTERY_CRITICAL required_capacity
set commit_level 0
op lessThan __tmp154 battery_change 0
op land __tmp155 CAN_COMMIT __tmp154
op lessThan __tmp156 REACTORS_ON reactors
op land __tmp157 __tmp155 __tmp156
jump __label80 equal __tmp157 false
op sub __tmp159 battery_change OWN_CONSUMPTION
op sub p __tmp159 SAFETY_MARGIN
op mul __tmp161 p COEF_A2
op add __tmp162 COEF_A1 __tmp161
op mul __tmp163 p __tmp162
op add commit_margin STARTUP_BAT_ENERGY __tmp163
op add commit_level min_level commit_margin
op idiv __tmp166 commit_level 1000
print "\nCommit threshold:   [gold]"
print __tmp166
label __label80
jump __label82 notEqual commit_level 0
op idiv __tmp169 min_level 1000
print "\nRestart threshold: [gold]"
print __tmp169
label __label82
print "[] K"
op lessThan __tmp170 total_battery min_level
op mul __tmp171 REACTORS_ON PANIC_ENERGY_DROP
op lessThan __tmp172 battery_change __tmp171
op or __tmp173 __tmp170 __tmp172
jump __label84 equal __tmp173 false
op equal __tmp175 OVERDRIVE false
op add RESETS RESETS __tmp175
set OVERDRIVE true
set REACTORS_ON reactors
op add nextDecommit @time DECOMMIT_DELAY
jump __label79 always 0 0
label __label84
op lessThan __tmp178 battery_level BATTERY_SAT
op lessThan __tmp179 battery_change -100
op or __tmp180 __tmp178 __tmp179
jump __label86 equal __tmp180 false
op add nextDecommit @time DECOMMIT_DELAY
label __label86
jump __label88 lessThanEq @time nextDecommit
jump __label90 equal OVERDRIVE false
set OVERDRIVE false
jump __label91 always 0 0
label __label90
op sub __tmp186 REACTORS_ON 1
op max REACTORS_ON __tmp186 1
set CAN_COMMIT true
label __label91
op add nextDecommit @time DECOMMIT_DELAY
jump __label79 always 0 0
label __label88
jump __label79 greaterThanEq total_battery commit_level
op add REACTORS_ON REACTORS_ON 1
op add COMMITS COMMITS 1
set CAN_COMMIT false
jump __label79 always 0 0
label __label78
sensor __tmp193 switch2 @enabled
jump __label94 equal __tmp193 false
print "\n[salmon]Load adapting not possible.[]"
jump __label95 always 0 0
label __label94
print "\n[gold]Load adapting not active.[]"
label __label95
set REACTORS_ON reactors
set OVERDRIVE true
label __label79
op mul __tmp195 PLANT_PROTECTION BATTERY_SAT
jump __label96 greaterThanEq total_battery __tmp195
set OUTPUT_2 0
set OUTPUT_3 0
label __label96
jump __label98 notEqual OUTPUT_2 0
jump __label100 lessThanEq total_battery BATTERY_SAT
set OUTPUT_2 1
set OUTPUT_3 1
jump __label101 always 0 0
label __label100
print "\n*** [gold]Surge tower 2 offline[] ***"
label __label101
label __label98
label __label72
label __label41
print "\n"
print STARTUPS
print "-"
print RESETS
print "-"
print COMMITS
printflush message1
control enabled diode1 OUTPUT_1 0 0 0
control enabled diode2 OUTPUT_2 0 0 0
control enabled diode3 OUTPUT_3 0 0 0
control enabled generator1 GENERATOR 0 0 0
control enabled generator2 GENERATOR 0 0 0
op equal startup MODE STARTUP
set reactors 0
set boosts 0
set __tmp203 @links
set n START
jump __label104 greaterThanEq START __tmp203
label __label120
getlink block n
sensor __ast3 block @type
jump __label106 notEqual __ast3 @impact-reactor
op add reactors reactors 1
op lessThanEq enabled reactors REACTORS_ON
control enabled block enabled 0 0 0
jump __label105 equal enabled false
sensor __tmp210 block @timescale
op add boosts boosts __tmp210
jump __label105 always 0 0
label __label106
jump __label111 equal __ast3 @overdrive-projector
jump __label110 notEqual __ast3 @overdrive-dome
label __label111
control enabled block OVERDRIVE 0 0 0
jump __label105 always 0 0
label __label110
jump __label113 equal __ast3 @conduit
jump __label113 equal __ast3 @pulse-conduit
jump __label113 equal __ast3 @plated-conduit
jump __label113 equal __ast3 @conveyor
jump __label113 equal __ast3 @titanium-conveyor
jump __label113 equal __ast3 @plastanium-conveyor
jump __label112 notEqual __ast3 @armored-conveyor
label __label113
control enabled block startup 0 0 0
label __label112
label __label105
op add n n 1
jump __label120 lessThan n __tmp203
label __label104
jump __label114 equal cell2 null
write reactors cell2 CELL_PRIOR_REACTORS
write REACTORS_ON cell2 CELL_REACTORS_ON
write OVERDRIVE cell2 CELL_OVERDRIVE
read __tmp214 cell2 CELL_REMOTE_REACTORS
op add reactors reactors __tmp214
read __tmp216 cell2 CELL_BOOSTS
op add boosts boosts __tmp216
label __label114
op min REACTORS_ON REACTORS_ON reactors
jump __label116 notEqual cell1 null
set STARTUPS 0
set RESETS 0
set COMMITS 0
jump __label15 always 0 0
label __label116
write MODE cell1 0
write OUTPUT_1 cell1 1
write OUTPUT_2 cell1 2
write OUTPUT_3 cell1 3
write REACTORS_ON cell1 4
write OVERDRIVE cell1 5
write GENERATOR cell1 6
write CAN_COMMIT cell1 7
write STARTUPS cell1 8
write RESETS cell1 9
write COMMITS cell1 10
jump __label15 always 0 0
