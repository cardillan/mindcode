   290 instructions before optimizations.
    38 instructions eliminated by Temp Variables Elimination.
    32 instructions eliminated by Dead Code Elimination (4 iterations).
    15 instructions eliminated by Jump Optimization (4 iterations).
    12 instructions eliminated by Single Step Elimination (2 passes, 6 iterations).
     2 instructions eliminated by Expression Optimization (3 iterations).
     2 instructions eliminated by If Expression Optimization (3 iterations).
     1 instructions eliminated by Data Flow Optimization (2 passes, 7 iterations).
     1 instructions added by Loop Optimization (3 iterations).
     2 loops improved by Loop Optimization.
     1 instructions updated by PropagateJumpTargets.
     1 instructions eliminated by Print Merging.
   188 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 810):
  * Loop Optimization: replicate condition at line 26            cost     1, benefit       25,0, efficiency       25,0 (+1 instructions)

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-38 instructions):
     0 set FROM_INDEX 0
     1 set EXPECTED_BOOST 1.5
     2 op mul __tmp0 EXPECTED_BOOST 16
-    * op div __tmp1 __tmp0 75
-    * set EXPECTED_FLOW __tmp1
+    3 op div EXPECTED_FLOW __tmp0 75
     4 op mul __tmp2 EXPECTED_FLOW 3600
-    * op floor __tmp3 __tmp2
-    * set EXPECTED_FLOW_STR __tmp3
+    5 op floor EXPECTED_FLOW_STR __tmp2
     6 op notEqual __tmp4 bank1 null
     7 jump __label0 equal __tmp4 false
     8 set BAR_LENGTH 53
 
    27 jump __label5 equal __tmp8 false
    28 op equal __tmp10 FROM_INDEX 0
    29 jump __label7 equal __tmp10 false
-    * read __tmp12 bank1 511
-    * set rate __tmp12
+   30 read rate bank1 511
    31 op notEqual __tmp13 lastRate rate
    32 jump __label9 equal __tmp13 false
    33 draw clear 0 0 80
 
    48 op sub __tmp15 rate EXPECTED_FLOW
    49 op mul __tmp16 84 __tmp15
    50 op div __tmp17 __tmp16 EXPECTED_FLOW
-    * op add __tmp18 88 __tmp17
-    * set pos __tmp18
+   51 op add pos 88 __tmp17
    52 op max __tmp19 pos 4
-    * op min __tmp20 __tmp19 170
-    * set pos __tmp20
-    * op add __tmp21 pos 7
-    * set pos1 __tmp21
-    * op sub __tmp22 pos 7
-    * set pos2 __tmp22
+   53 op min pos __tmp19 170
+   54 op add pos1 pos 7
+   55 op sub pos2 pos 7
    56 draw color 255 255 16 255
    57 draw triangle 156 pos1 164 pos 156 pos2
    58 op mul __tmp23 3600 rate
-    * op floor __tmp24 __tmp23
-    * set flow_str __tmp24
+   59 op floor flow_str __tmp23
    60 set __tmp14 flow_str
    61 jump __label10 always
    62 label __label9
 
    80 label __label5
    81 set __tmp9 null
    82 label __label6
-    * set __tmp25 @time
-    * set start __tmp25
+   83 set start @time
    84 draw stroke 2
    85 set index FROM_INDEX
    86 set n 0
    87 label __label11
    88 op lessThan __tmp26 n @links
    89 jump __label13 equal __tmp26 false
-    * getlink __tmp27 n
-    * set smelter __tmp27
+   90 getlink smelter n
    91 sensor __tmp28 smelter @type
    92 op equal __tmp29 __tmp28 @surge-smelter
    93 jump __label14 equal __tmp29 false
    94 set minimum 21
-    * sensor __tmp31 smelter @titanium
-    * set t __tmp31
-    * sensor __tmp32 smelter @copper
-    * set c __tmp32
-    * sensor __tmp33 smelter @lead
-    * set l __tmp33
-    * sensor __tmp34 smelter @silicon
-    * set s __tmp34
-    * sensor __tmp35 smelter @surge-alloy
-    * set a __tmp35
-    * sensor __tmp36 smelter @enabled
-    * set e __tmp36
-    * sensor __tmp37 smelter @totalPower
-    * set power __tmp37
-    * sensor __tmp38 smelter @timescale
-    * set boost __tmp38
+   95 sensor t smelter @titanium
+   96 sensor c smelter @copper
+   97 sensor l smelter @lead
+   98 sensor s smelter @silicon
+   99 sensor a smelter @surge-alloy
+  100 sensor e smelter @enabled
+  101 sensor power smelter @totalPower
+  102 sensor boost smelter @timescale
   103 op lessThan __tmp39 l minimum
   104 jump __label16 equal __tmp39 false
   105 set minimum l
 
   139 op greaterThan __tmp47 a 5
   140 op sub __tmp48 21 a
   141 op lessThan __tmp49 __tmp48 minimum
-    * op land __tmp50 __tmp47 __tmp49
-    * set showa __tmp50
+  142 op land showa __tmp47 __tmp49
   143 jump __label24 equal showa false
   144 set icon @surge-alloy
   145 set __tmp51 icon
 
   147 label __label24
   148 set __tmp51 null
   149 label __label25
-    * op mod __tmp52 index 2
-    * set column __tmp52
-    * op idiv __tmp53 index 2
-    * set row __tmp53
+  150 op mod column index 2
+  151 op idiv row index 2
   152 op mul __tmp54 column BAR_SPACE
-    * op add __tmp55 5 __tmp54
-    * set x __tmp55
+  153 op add x 5 __tmp54
   154 op mul __tmp56 row 22
-    * op add __tmp57 4 __tmp56
-    * set y __tmp57
-    * op sub __tmp58 x 1
-    * set xm1 __tmp58
-    * op sub __tmp59 y 1
-    * set ym1 __tmp59
+  155 op add y 4 __tmp56
+  156 op sub xm1 x 1
+  157 op sub ym1 y 1
   158 draw color 0 0 80 255
   159 draw rect xm1 ym1 BAR_SPACE 16
   160 op greaterThan __tmp60 minimum 16
 
   177 set __tmp66 null
   178 jump __label31 always
   179 label __label30
-    * op add __tmp69 x 12
-    * set x12 __tmp69
-    * op add __tmp70 y 3
-    * set y3 __tmp70
+  180 op add x12 x 12
+  181 op add y3 y 3
   182 draw color 255 80 80 255
   183 draw rect x y3 14 8
   184 draw color 0 0 0 255
 
   197 set __tmp64 __tmp66
   198 jump __label29 always
   199 label __label28
-    * op add __tmp76 x 2
-    * set x2 __tmp76
-    * op add __tmp77 y 2
-    * set y2 __tmp77
-    * op add __tmp78 x 12
-    * set x12 __tmp78
-    * op add __tmp79 y 12
-    * set y12 __tmp79
+  200 op add x2 x 2
+  201 op add y2 y 2
+  202 op add x12 x 12
+  203 op add y12 y 12
   204 draw color 255 80 80 255
   205 draw stroke 3
   206 draw line x2 y12 x12 y2
 
   210 draw stroke 2
   211 set __tmp64 null
   212 label __label29
-    * op add __tmp80 x 16
-    * set x __tmp80
+  213 op add x x 16
   214 op mul __tmp81 power e
   215 op equal __tmp82 __tmp81 0
   216 jump __label32 equal __tmp82 false
 
   253 label __label33
   254 op greaterThan __tmp91 boost EXPECTED_BOOST
   255 jump __label40 equal __tmp91 false
-    * op max __tmp93 192 red
-    * set red __tmp93
-    * op max __tmp94 192 green
-    * set green __tmp94
-    * op max __tmp95 192 blue
-    * set blue __tmp95
+  256 op max red 192 red
+  257 op max green 192 green
+  258 op max blue 192 blue
   259 set boost EXPECTED_BOOST
   260 set __tmp92 boost
   261 jump __label41 always
 
   263 set __tmp92 null
   264 label __label41
   265 op mul __tmp96 BAR_LENGTH boost
-    * op idiv __tmp97 __tmp96 EXPECTED_BOOST
-    * set length __tmp97
+  266 op idiv length __tmp96 EXPECTED_BOOST
   267 draw color red green blue 128
   268 op mul __tmp98 minimum length
   269 op idiv __tmp99 __tmp98 20
   270 draw rect x y __tmp99 14
   271 draw color red green blue 255
   272 draw lineRect x y length 14
-    * op add __tmp100 index 1
-    * set index __tmp100
+  273 op add index index 1
   274 set __tmp30 index
   275 jump __label15 always
   276 label __label14
   277 set __tmp30 null
   278 label __label15
   279 label __label12
-    * op add __tmp101 n 1
-    * set n __tmp101
+  280 op add n n 1
   281 jump __label11 always
   282 label __label13
   283 drawflush display1

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-26 instructions):
 
     7 jump __label0 equal __tmp4 false
     8 set BAR_LENGTH 53
     9 set BAR_SPACE 74
-    * set __tmp5 BAR_SPACE
    10 jump __label1 always
    11 label __label0
    12 set BAR_LENGTH 61
    13 set BAR_SPACE 88
-    * set __tmp5 BAR_SPACE
    14 label __label1
    15 set lastRate null
    16 set icon lastRate
 
    62 draw rect 0 0 156 176
    63 set __tmp14 null
    64 label __label10
-    * set __tmp11 __tmp14
    65 jump __label8 always
    66 label __label7
-    * set __tmp11 null
    67 label __label8
    68 print "\nNominal production: "
    69 print EXPECTED_FLOW_STR
 
    71 print "\nActual production: "
    72 print flow_str
    73 print "/min"
-    * set __tmp9 null
    74 jump __label6 always
    75 label __label5
-    * set __tmp9 null
    76 label __label6
    77 set start @time
    78 draw stroke 2
 
    98 jump __label16 equal __tmp39 false
    99 set minimum l
   100 set icon @lead
-    * set __tmp40 icon
   101 jump __label17 always
   102 label __label16
-    * set __tmp40 null
   103 label __label17
   104 op lessThan __tmp41 s minimum
   105 jump __label18 equal __tmp41 false
   106 set minimum s
   107 set icon @silicon
-    * set __tmp42 icon
   108 jump __label19 always
   109 label __label18
-    * set __tmp42 null
   110 label __label19
   111 op lessThan __tmp43 c minimum
   112 jump __label20 equal __tmp43 false
   113 set minimum c
   114 set icon @copper
-    * set __tmp44 icon
   115 jump __label21 always
   116 label __label20
-    * set __tmp44 null
   117 label __label21
   118 op lessThan __tmp45 t minimum
   119 jump __label22 equal __tmp45 false
   120 set minimum t
   121 set icon @titanium
-    * set __tmp46 icon
   122 jump __label23 always
   123 label __label22
-    * set __tmp46 null
   124 label __label23
   125 op greaterThan __tmp47 a 5
   126 op sub __tmp48 21 a
 
   128 op land showa __tmp47 __tmp49
   129 jump __label24 equal showa false
   130 set icon @surge-alloy
-    * set __tmp51 icon
   131 jump __label25 always
   132 label __label24
-    * set __tmp51 null
   133 label __label25
   134 op mod column index 2
   135 op idiv row index 2
 
   146 op land __tmp62 __tmp60 __tmp61
   147 jump __label26 equal __tmp62 false
   148 set icon @surge-smelter
-    * set __tmp63 icon
   149 jump __label27 always
   150 label __label26
-    * set __tmp63 null
   151 label __label27
   152 draw color 255 255 255 255
   153 jump __label28 equal e false
 
   176 draw rect __tmp74 __tmp75 2 2
   177 set __tmp66 null
   178 label __label31
-    * set __tmp64 __tmp66
   179 jump __label29 always
   180 label __label28
   181 op add x2 x 2
 
   189 draw color 0 0 0 255
   190 draw lineRect xm1 ym1 16 16
   191 draw stroke 2
-    * set __tmp64 null
   192 label __label29
   193 op add x x 16
   194 op mul __tmp81 power e
 
   197 set red 255
   198 set green 0
   199 set blue 0
-    * set __tmp83 blue
   200 jump __label33 always
   201 label __label32
   202 jump __label34 equal showa false
 
   228 set blue 0
   229 set __tmp84 blue
   230 label __label35
-    * set __tmp83 __tmp84
   231 label __label33
   232 op greaterThan __tmp91 boost EXPECTED_BOOST
   233 jump __label40 equal __tmp91 false
 
   235 op max green 192 green
   236 op max blue 192 blue
   237 set boost EXPECTED_BOOST
-    * set __tmp92 boost
   238 jump __label41 always
   239 label __label40
-    * set __tmp92 null
   240 label __label41
   241 op mul __tmp96 BAR_LENGTH boost
   242 op idiv length __tmp96 EXPECTED_BOOST
 
   247 draw color red green blue 255
   248 draw lineRect x y length 14
   249 op add index index 1
-    * set __tmp30 index
   250 jump __label15 always
   251 label __label14
-    * set __tmp30 null
   252 label __label15
   253 label __label12
   254 op add n n 1

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-6 instructions):
 
    55 draw triangle 156 pos1 164 pos 156 pos2
    56 op mul __tmp23 3600 rate
    57 op floor flow_str __tmp23
-    * set __tmp14 flow_str
    58 jump __label10 always
    59 label __label9
    60 draw color 0 0 80 255
    61 draw rect 0 0 156 176
-    * set __tmp14 null
    62 label __label10
    63 jump __label8 always
    64 label __label7
 
   154 op add __tmp67 x 7
   155 op add __tmp68 y 7
   156 draw image __tmp67 __tmp68 icon 16 0
-    * set __tmp66 null
   157 jump __label31 always
   158 label __label30
   159 op add x12 x 12
 
   171 op add __tmp74 x 4
   172 op add __tmp75 y 6
   173 draw rect __tmp74 __tmp75 2 2
-    * set __tmp66 null
   174 label __label31
   175 jump __label29 always
   176 label __label28
 
   200 set green 0
   201 set blue 255
   202 set minimum a
-    * set __tmp84 minimum
   203 jump __label35 always
   204 label __label34
   205 op greaterThan __tmp85 minimum 14
 
   221 label __label39
   222 set green __tmp90
   223 set blue 0
-    * set __tmp84 blue
   224 label __label35
   225 label __label33
   226 op greaterThan __tmp91 boost EXPECTED_BOOST

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-15 instructions):
 
     3 op div EXPECTED_FLOW __tmp0 75
     4 op mul __tmp2 EXPECTED_FLOW 3600
     5 op floor EXPECTED_FLOW_STR __tmp2
-    * op notEqual __tmp4 bank1 null
-    * jump __label0 equal __tmp4 false
+    6 jump __label0 equal bank1 null
     7 set BAR_LENGTH 53
     8 set BAR_SPACE 74
     9 jump __label1 always
 
    17 control enabled switch1 0
    18 label __label2
    19 sensor __tmp6 switch1 @enabled
-    * op equal __tmp7 __tmp6 0
-    * jump __label4 equal __tmp7 false
+   20 jump __label4 notEqual __tmp6 0
    21 print "Surge Alloy Factory Monitor"
-    * op notEqual __tmp8 bank1 null
-    * jump __label5 equal __tmp8 false
-    * op equal __tmp10 FROM_INDEX 0
-    * jump __label7 equal __tmp10 false
+   22 jump __label5 equal bank1 null
+   23 jump __label7 notEqual FROM_INDEX 0
    24 read rate bank1 511
-    * op notEqual __tmp13 lastRate rate
-    * jump __label9 equal __tmp13 false
+   25 jump __label9 equal lastRate rate
    26 draw clear 0 0 80
    27 set lastRate rate
    28 draw color 0 0 80 255
 
    72 set index FROM_INDEX
    73 set n 0
    74 label __label11
-    * op lessThan __tmp26 n @links
-    * jump __label13 equal __tmp26 false
+   75 jump __label13 greaterThanEq n @links
    76 getlink smelter n
    77 sensor __tmp28 smelter @type
-    * op equal __tmp29 __tmp28 @surge-smelter
-    * jump __label14 equal __tmp29 false
+   78 jump __label14 notEqual __tmp28 @surge-smelter
    79 set minimum 21
    80 sensor t smelter @titanium
    81 sensor c smelter @copper
 
    85 sensor e smelter @enabled
    86 sensor power smelter @totalPower
    87 sensor boost smelter @timescale
-    * op lessThan __tmp39 l minimum
-    * jump __label16 equal __tmp39 false
+   88 jump __label16 greaterThanEq l minimum
    89 set minimum l
    90 set icon @lead
    91 jump __label17 always
    92 label __label16
    93 label __label17
-    * op lessThan __tmp41 s minimum
-    * jump __label18 equal __tmp41 false
+   94 jump __label18 greaterThanEq s minimum
    95 set minimum s
    96 set icon @silicon
    97 jump __label19 always
    98 label __label18
    99 label __label19
-    * op lessThan __tmp43 c minimum
-    * jump __label20 equal __tmp43 false
+  100 jump __label20 greaterThanEq c minimum
   101 set minimum c
   102 set icon @copper
   103 jump __label21 always
   104 label __label20
   105 label __label21
-    * op lessThan __tmp45 t minimum
-    * jump __label22 equal __tmp45 false
+  106 jump __label22 greaterThanEq t minimum
   107 set minimum t
   108 set icon @titanium
   109 jump __label23 always
 
   138 label __label27
   139 draw color 255 255 255 255
   140 jump __label28 equal e false
-    * op greaterThan __tmp65 power 0
-    * jump __label30 equal __tmp65 false
+  141 jump __label30 lessThanEq power 0
   142 op add __tmp67 x 7
   143 op add __tmp68 y 7
   144 draw image __tmp67 __tmp68 icon 16 0
 
   176 label __label29
   177 op add x x 16
   178 op mul __tmp81 power e
-    * op equal __tmp82 __tmp81 0
-    * jump __label32 equal __tmp82 false
+  179 jump __label32 notEqual __tmp81 0
   180 set red 255
   181 set green 0
   182 set blue 0
 
   199 set __tmp88 255
   200 label __label37
   201 set red __tmp88
-    * op greaterThan __tmp89 minimum 7
-    * jump __label38 equal __tmp89 false
+  202 jump __label38 lessThanEq minimum 7
   203 set __tmp90 255
   204 jump __label39 always
   205 label __label38
 
   209 set blue 0
   210 label __label35
   211 label __label33
-    * op greaterThan __tmp91 boost EXPECTED_BOOST
-    * jump __label40 equal __tmp91 false
+  212 jump __label40 lessThanEq boost EXPECTED_BOOST
   213 op max red 192 red
   214 op max green 192 green
   215 op max blue 192 blue

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-10 instructions):
 
    55 draw color 0 0 80 255
    56 draw rect 0 0 156 176
    57 label __label10
-    * jump __label8 always
    58 label __label7
    59 label __label8
    60 print "\nNominal production: "
 
    63 print "\nActual production: "
    64 print flow_str
    65 print "/min"
-    * jump __label6 always
    66 label __label5
    67 label __label6
    68 set start @time
 
    86 jump __label16 greaterThanEq l minimum
    87 set minimum l
    88 set icon @lead
-    * jump __label17 always
    89 label __label16
    90 label __label17
    91 jump __label18 greaterThanEq s minimum
    92 set minimum s
    93 set icon @silicon
-    * jump __label19 always
    94 label __label18
    95 label __label19
    96 jump __label20 greaterThanEq c minimum
    97 set minimum c
    98 set icon @copper
-    * jump __label21 always
    99 label __label20
   100 label __label21
   101 jump __label22 greaterThanEq t minimum
   102 set minimum t
   103 set icon @titanium
-    * jump __label23 always
   104 label __label22
   105 label __label23
   106 op greaterThan __tmp47 a 5
 
   109 op land showa __tmp47 __tmp49
   110 jump __label24 equal showa false
   111 set icon @surge-alloy
-    * jump __label25 always
   112 label __label24
   113 label __label25
   114 op mod column index 2
 
   126 op land __tmp62 __tmp60 __tmp61
   127 jump __label26 equal __tmp62 false
   128 set icon @surge-smelter
-    * jump __label27 always
   129 label __label26
   130 label __label27
   131 draw color 255 255 255 255
 
   206 op max green 192 green
   207 op max blue 192 blue
   208 set boost EXPECTED_BOOST
-    * jump __label41 always
   209 label __label40
   210 label __label41
   211 op mul __tmp96 BAR_LENGTH boost
 
   217 draw color red green blue 255
   218 draw lineRect x y length 14
   219 op add index index 1
-    * jump __label15 always
   220 label __label14
   221 label __label15
   222 label __label12

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
     1 set EXPECTED_BOOST 1.5
     2 op mul __tmp0 EXPECTED_BOOST 16
     3 op div EXPECTED_FLOW __tmp0 75
-    * op mul __tmp2 EXPECTED_FLOW 3600
-    * op floor EXPECTED_FLOW_STR __tmp2
+    4 op idiv EXPECTED_FLOW_STR EXPECTED_FLOW 0.0002777777777777778
     5 jump __label0 equal bank1 null
     6 set BAR_LENGTH 53
     7 set BAR_SPACE 74
 
    47 op sub pos2 pos 7
    48 draw color 255 255 16 255
    49 draw triangle 156 pos1 164 pos 156 pos2
-    * op mul __tmp23 3600 rate
-    * op floor flow_str __tmp23
+   50 op idiv flow_str rate 0.0002777777777777778
    51 jump __label10 always
    52 label __label9
    53 draw color 0 0 80 255

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
   179 set minimum a
   180 jump __label35 always
   181 label __label34
+  182 set red 255
   183 op greaterThan __tmp85 minimum 14
   184 op greaterThanEq __tmp86 boost EXPECTED_BOOST
   185 op land __tmp87 __tmp85 __tmp86
-    * jump __label36 equal __tmp87 false
-    * set __tmp88 0
+  186 jump __label37 equal __tmp87 false
+  187 set red 0
   188 jump __label37 always
-    * label __label36
-    * set __tmp88 255
   189 label __label37
-    * set red __tmp88
-    * jump __label38 lessThanEq minimum 7
-    * set __tmp90 255
+  190 set green 0
+  191 jump __label39 lessThanEq minimum 7
+  192 set green 255
   193 jump __label39 always
-    * label __label38
-    * set __tmp90 0
   194 label __label39
-    * set green __tmp90
   195 set blue 0
   196 label __label35
   197 label __label33

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
     0 set FROM_INDEX 0
     1 set EXPECTED_BOOST 1.5
     2 op mul __tmp0 EXPECTED_BOOST 16
-    * op div EXPECTED_FLOW __tmp0 75
+    3 op div EXPECTED_FLOW EXPECTED_BOOST 4.6875
     4 op idiv EXPECTED_FLOW_STR EXPECTED_FLOW 0.0002777777777777778
     5 jump __label0 equal bank1 null
     6 set BAR_LENGTH 53
 
    11 set BAR_SPACE 88
    12 label __label1
    13 set lastRate null
-    * set icon lastRate
-    * set flow_str icon
+   14 set icon null
+   15 set flow_str lastRate
    16 control enabled switch1 0
    17 label __label2
    18 sensor __tmp6 switch1 @enabled
 
    81 sensor e smelter @enabled
    82 sensor power smelter @totalPower
    83 sensor boost smelter @timescale
-    * jump __label16 greaterThanEq l minimum
+   84 jump __label16 greaterThanEq l 21
    85 set minimum l
    86 set icon @lead
    87 label __label16

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-1 instructions):
     0 set FROM_INDEX 0
     1 set EXPECTED_BOOST 1.5
-    * op mul __tmp0 EXPECTED_BOOST 16
     2 op div EXPECTED_FLOW EXPECTED_BOOST 4.6875
     3 op idiv EXPECTED_FLOW_STR EXPECTED_FLOW 0.0002777777777777778
     4 jump __label0 equal bank1 null
 
    11 label __label1
    12 set lastRate null
    13 set icon null
-    * set flow_str lastRate
+   14 set flow_str null
    15 control enabled switch1 0
    16 label __label2
    17 sensor __tmp6 switch1 @enabled

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1:
 
    68 set n 0
    69 label __label11
    70 jump __label13 greaterThanEq n @links
+   71 label __label42
    72 getlink smelter n
    73 sensor __tmp28 smelter @type
    74 jump __label14 notEqual __tmp28 @surge-smelter
 
   215 label __label15
   216 label __label12
   217 op add n n 1
-    * jump __label11 always
+  218 jump __label42 lessThan n @links
   219 label __label13
   220 drawflush display1
   221 op sub __tmp102 @time start

Modifications by Loop Optimization: replicate condition at line 26 (+1 instructions):
 
    16 label __label2
    17 sensor __tmp6 switch1 @enabled
    18 jump __label4 notEqual __tmp6 0
+   19 label __label43
    20 print "Surge Alloy Factory Monitor"
    21 jump __label5 equal bank1 null
    22 jump __label7 notEqual FROM_INDEX 0
 
   226 print " ms"
   227 printflush message1
   228 label __label3
-    * jump __label2 always
+  229 sensor __tmp6 switch1 @enabled
+  230 jump __label43 equal __tmp6 0
   231 label __label4
   232 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    68 set index FROM_INDEX
    69 set n 0
    70 label __label11
-    * jump __label13 greaterThanEq n @links
+   71 jump __label13 greaterThanEq 0 @links
    72 label __label42
    73 getlink smelter n
    74 sensor __tmp28 smelter @type

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-2 instructions):
 
   186 op land __tmp87 __tmp85 __tmp86
   187 jump __label37 equal __tmp87 false
   188 set red 0
-    * jump __label37 always
   189 label __label37
   190 set green 0
   191 jump __label39 lessThanEq minimum 7
   192 set green 255
-    * jump __label39 always
   193 label __label39
   194 set blue 0
   195 label __label35

Modifications by Final phase, Jump Threading, iteration 1:
 
   133 op add __tmp67 x 7
   134 op add __tmp68 y 7
   135 draw image __tmp67 __tmp68 icon 16 0
-    * jump __label31 always
+  136 jump __label29 always
   137 label __label30
   138 op add x12 x 12
   139 op add y3 y 3

Modifications by Final phase, Print Merging, iteration 1 (-1 instructions):
 
    57 label __label8
    58 print "\nNominal production: "
    59 print EXPECTED_FLOW_STR
-    * print "/min"
-    * print "\nActual production: "
+   60 print "/min\nActual production: "
    61 print flow_str
    62 print "/min"
    63 label __label5

Final code before resolving virtual instructions:

set FROM_INDEX 0
set EXPECTED_BOOST 1.5
op div EXPECTED_FLOW EXPECTED_BOOST 4.6875
op idiv EXPECTED_FLOW_STR EXPECTED_FLOW 0.0002777777777777778
jump __label0 equal bank1 null
set BAR_LENGTH 53
set BAR_SPACE 74
jump __label1 always 0 0
label __label0
set BAR_LENGTH 61
set BAR_SPACE 88
label __label1
set lastRate null
set icon null
set flow_str null
control enabled switch1 0 0 0 0
sensor __tmp6 switch1 @enabled
jump __label4 notEqual __tmp6 0
label __label43
print "Surge Alloy Factory Monitor"
jump __label5 equal bank1 null
jump __label7 notEqual FROM_INDEX 0
read rate bank1 511
jump __label9 equal lastRate rate
draw clear 0 0 80 0 0 0
set lastRate rate
draw color 0 0 80 255 0 0
draw rect 156 0 16 176 0 0
draw color 255 128 128 255 0 0
draw rect 164 4 8 84 0 0
draw color 128 255 128 255 0 0
draw rect 164 89 8 84 0 0
draw stroke 1 0 0 0 0 0
draw color 255 0 0 255 0 0
draw lineRect 164 4 8 84 0 0
draw color 0 255 0 255 0 0
draw lineRect 164 89 8 84 0 0
draw color 0 0 80 255 0 0
draw rect 164 4 2 170 0 0
op sub __tmp15 rate EXPECTED_FLOW
op mul __tmp16 84 __tmp15
op div __tmp17 __tmp16 EXPECTED_FLOW
op add pos 88 __tmp17
op max __tmp19 pos 4
op min pos __tmp19 170
op add pos1 pos 7
op sub pos2 pos 7
draw color 255 255 16 255 0 0
draw triangle 156 pos1 164 pos 156 pos2
op idiv flow_str rate 0.0002777777777777778
jump __label10 always 0 0
label __label9
draw color 0 0 80 255 0 0
draw rect 0 0 156 176 0 0
label __label10
label __label7
print "\nNominal production: "
print EXPECTED_FLOW_STR
print "/min\nActual production: "
print flow_str
print "/min"
label __label5
set start @time
draw stroke 2 0 0 0 0 0
set index FROM_INDEX
set n 0
jump __label13 greaterThanEq 0 @links
label __label42
getlink smelter n
sensor __tmp28 smelter @type
jump __label14 notEqual __tmp28 @surge-smelter
set minimum 21
sensor t smelter @titanium
sensor c smelter @copper
sensor l smelter @lead
sensor s smelter @silicon
sensor a smelter @surge-alloy
sensor e smelter @enabled
sensor power smelter @totalPower
sensor boost smelter @timescale
jump __label16 greaterThanEq l 21
set minimum l
set icon @lead
label __label16
jump __label18 greaterThanEq s minimum
set minimum s
set icon @silicon
label __label18
jump __label20 greaterThanEq c minimum
set minimum c
set icon @copper
label __label20
jump __label22 greaterThanEq t minimum
set minimum t
set icon @titanium
label __label22
op greaterThan __tmp47 a 5
op sub __tmp48 21 a
op lessThan __tmp49 __tmp48 minimum
op land showa __tmp47 __tmp49
jump __label24 equal showa false
set icon @surge-alloy
label __label24
op mod column index 2
op idiv row index 2
op mul __tmp54 column BAR_SPACE
op add x 5 __tmp54
op mul __tmp56 row 22
op add y 4 __tmp56
op sub xm1 x 1
op sub ym1 y 1
draw color 0 0 80 255 0 0
draw rect xm1 ym1 BAR_SPACE 16 0 0
op greaterThan __tmp60 minimum 16
op equal __tmp61 showa 0
op land __tmp62 __tmp60 __tmp61
jump __label26 equal __tmp62 false
set icon @surge-smelter
label __label26
draw color 255 255 255 255 0 0
jump __label28 equal e false
jump __label30 lessThanEq power 0
op add __tmp67 x 7
op add __tmp68 y 7
draw image __tmp67 __tmp68 icon 16 0 0
jump __label29 always 0 0
label __label30
op add x12 x 12
op add y3 y 3
draw color 255 80 80 255 0 0
draw rect x y3 14 8 0 0
draw color 0 0 0 255 0 0
op add __tmp71 x 2
op add __tmp72 y 5
draw rect __tmp71 __tmp72 8 4 0 0
draw rect x12 y3 2 2 0 0
op add __tmp73 y 9
draw rect x12 __tmp73 2 2 0 0
draw color 255 80 80 255 0 0
op add __tmp74 x 4
op add __tmp75 y 6
draw rect __tmp74 __tmp75 2 2 0 0
jump __label29 always 0 0
label __label28
op add x2 x 2
op add y2 y 2
op add x12 x 12
op add y12 y 12
draw color 255 80 80 255 0 0
draw stroke 3 0 0 0 0 0
draw line x2 y12 x12 y2 0 0
draw line x2 y2 x12 y12 0 0
draw color 0 0 0 255 0 0
draw lineRect xm1 ym1 16 16 0 0
draw stroke 2 0 0 0 0 0
label __label29
op add x x 16
op mul __tmp81 power e
jump __label32 notEqual __tmp81 0
set red 255
set green 0
set blue 0
jump __label33 always 0 0
label __label32
jump __label34 equal showa false
set red 255
set green 0
set blue 255
set minimum a
jump __label35 always 0 0
label __label34
set red 255
op greaterThan __tmp85 minimum 14
op greaterThanEq __tmp86 boost EXPECTED_BOOST
op land __tmp87 __tmp85 __tmp86
jump __label37 equal __tmp87 false
set red 0
label __label37
set green 0
jump __label39 lessThanEq minimum 7
set green 255
label __label39
set blue 0
label __label35
label __label33
jump __label40 lessThanEq boost EXPECTED_BOOST
op max red 192 red
op max green 192 green
op max blue 192 blue
set boost EXPECTED_BOOST
label __label40
op mul __tmp96 BAR_LENGTH boost
op idiv length __tmp96 EXPECTED_BOOST
draw color red green blue 128 0 0
op mul __tmp98 minimum length
op idiv __tmp99 __tmp98 20
draw rect x y __tmp99 14 0 0
draw color red green blue 255 0 0
draw lineRect x y length 14 0 0
op add index index 1
label __label14
op add n n 1
jump __label42 lessThan n @links
label __label13
drawflush display1
op sub __tmp102 @time start
op floor __tmp103 __tmp102 0
print "\nUpdate time: "
print __tmp103
print " ms"
printflush message1
sensor __tmp6 switch1 @enabled
jump __label43 equal __tmp6 0
label __label4
end
