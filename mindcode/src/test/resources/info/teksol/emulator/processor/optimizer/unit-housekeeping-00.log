   174 instructions before optimizations.
    12 instructions eliminated by Temp Variables Elimination.
     2 instructions eliminated by Case Expression Optimization.
    30 instructions eliminated by Dead Code Elimination (6 iterations).
     1 instructions eliminated by Jump Normalization (3 iterations).
     6 instructions eliminated by Jump Optimization (3 iterations).
    10 instructions eliminated by Single Step Elimination (4 iterations).
     2 instructions modified by Expression Optimization (2 iterations).
     2 instructions eliminated by Data Flow Optimization (4 iterations).
     7 instructions eliminated by Jump Straightening (3 iterations).
     2 instructions updated by PropagateJumpTargets.
     1 instructions eliminated by Unreachable Code Elimination.
   103 instructions after optimizations.

Final code before resolving virtual instructions:

set UNIT @mega
set first_unit null
set index 1
label __label0
sensor __tmp2 switch2 @enabled
jump __label3 equal __tmp2 false
jump __label6 notEqual UNIT @flare
set __tmp4 @mono
jump __label5 always 0 0
label __label6
jump __label8 notEqual UNIT @mono
set __tmp4 @poly
jump __label5 always 0 0
label __label8
jump __label10 notEqual UNIT @poly
set __tmp4 @mega
jump __label5 always 0 0
label __label10
jump __label12 notEqual UNIT @mega
set __tmp4 @flare
jump __label5 always 0 0
label __label12
set __tmp4 null
label __label5
set UNIT __tmp4
set first_unit null
control enabled switch2 false 0 0 0
print __tmp4
print ": gathering information..."
label __label3
ubind UNIT
jump __label14 notEqual @unit null
print UNIT
print ": no active unit found."
printflush message1
jump __label0 always 0 0
label __label14
op strictEqual __tmp7 @unit first_unit
op strictEqual __tmp8 first_unit null
op or __tmp9 __tmp7 __tmp8
jump __label16 equal __tmp9 false
printflush message1
set first_unit @unit
set index 1
print UNIT
sensor __tmp12 switch1 @enabled
jump __label18 equal __tmp12 false
print " (cleanup active)"
label __label18
label __label16
sensor controlled @unit @controlled
sensor flag @unit @flag
sensor items @unit @totalItems
sensor item @unit @firstItem
sensor __tmp18 @unit @controller
jump __label20 notEqual __tmp18 @this
set controlled 0
label __label20
op notEqual __tmp21 flag 0
op greaterThan __tmp22 items 0
op or __tmp23 __tmp21 __tmp22
op notEqual __tmp24 controlled 0
sensor __tmp25 @unit @controller
op notEqual __tmp26 __tmp25 @this
op land __tmp27 __tmp24 __tmp26
op or __tmp28 __tmp23 __tmp27
jump __label22 equal __tmp28 false
print "\n"
print index
jump __label25 notEqual controlled @ctrlProcessor
sensor controller @unit @controller
sensor __tmp32 controller @x
op floor x __tmp32 0
sensor __tmp34 controller @y
op floor y __tmp34 0
print ", "
print x
print ";"
print y
jump __label24 always 0 0
label __label25
jump __label27 notEqual controlled @ctrlPlayer
print ", player"
jump __label24 always 0 0
label __label27
jump __label29 notEqual controlled @ctrlFormation
print ", group"
label __label29
label __label24
jump __label31 equal flag 0
print ", F"
print flag
label __label31
jump __label33 lessThanEq items 0
print ", "
print items
print " "
print item
label __label33
label __label22
op equal __tmp40 controlled 0
sensor __tmp41 switch1 @enabled
op land __tmp42 __tmp40 __tmp41
jump __label35 equal __tmp42 false
jump __label37 lessThanEq items 0
ucontrol flag 1 0 0 0 0
ulocate building core false @copper CORE_X CORE_Y 0 CORE
ucontrol within CORE_X CORE_Y 8 __tmp48 0
jump __label39 equal __tmp48 false
ucontrol itemDrop CORE items 0 0 0
jump __label38 always 0 0
label __label39
ucontrol approach CORE_X CORE_Y 4 0 0
jump __label38 always 0 0
label __label37
jump __label41 equal flag 0
ucontrol within @thisx @thisy 8 __tmp52 0
jump __label43 equal __tmp52 false
ucontrol flag 0 0 0 0 0
jump __label44 always 0 0
label __label43
ucontrol approach @thisx @thisy 4 0 0
label __label44
label __label41
label __label38
label __label35
op add index index 1
jump __label0 always 0 0
