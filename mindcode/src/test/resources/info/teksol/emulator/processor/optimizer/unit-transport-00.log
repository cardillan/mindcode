  1126 instructions before optimizations.
   119 instructions eliminated by Temp Variables Elimination.
     2 instructions eliminated by Case Expression Optimization.
   126 instructions eliminated by Dead Code Elimination (5 iterations).
     2 instructions eliminated by Jump Normalization (5 iterations).
    62 instructions eliminated by Jump Optimization (5 iterations).
    52 instructions eliminated by Single Step Elimination (4 passes, 9 iterations).
     2 instructions eliminated by Expression Optimization (4 iterations).
     5 instructions eliminated by If Expression Optimization (2 passes, 4 iterations).
    21 instructions eliminated by Data Flow Optimization (4 passes, 18 iterations).
     1 loops improved by Loop Hoisting.
    15 instructions added by Loop Optimization (4 iterations).
    13 loops improved by Loop Optimization.
    21 instructions eliminated by Jump Straightening (2 passes, 5 iterations).
     7 instructions updated by PropagateJumpTargets.
     2 instructions eliminated by Unreachable Code Elimination.
     1 instructions eliminated by Print Merging.
   726 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 276):
  * Loop Optimization: replicate condition at line 173           cost     1, benefit      312.5, efficiency      312.5 (+0 instructions)
    Loop Optimization: replicate condition at line 177           cost     4, benefit      312.5, efficiency       78.1
    Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 276):
  * Loop Optimization: replicate condition at line 177           cost     4, benefit      312.5, efficiency       78.1 (+4 instructions)
    Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 272):
  * Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3 (+5 instructions)
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 267):
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
  * Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5 (+1 instructions)
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 266):
  * Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3 (+3 instructions)
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 263):
  * Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2 (+3 instructions)

Final code before resolving virtual instructions:

set LINK_ID 0
set AUTO_ALLOCATION true
set MAX_UNITS 24
set HOUSEKEEPING true
set LOCAL_LIMIT 100
set REMOTE_LIMIT 100
set OVERALLOCATION_LOW 0.25
set OVERALLOCATION_HIGH 0.75
set STABILIZATION false
set STATE_LIMIT null
set ITEM_ICON null
set ITEM null
set CORE_Y null
set CORE_X null
set CONTAINER_INDEX null
set MESSAGE ""
jump __label0 equal cell1 null
read __tmp2 cell1 0
jump __label2 notEqual __tmp2 2
read LINK_ID cell1 1
read AUTO_ALLOCATION cell1 2
read MAX_UNITS cell1 3
read HOUSEKEEPING cell1 4
read LOCAL_LIMIT cell1 5
read REMOTE_LIMIT cell1 6
read OVERALLOCATION_LOW cell1 7
read OVERALLOCATION_HIGH cell1 8
read STABILIZATION cell1 9
set MESSAGE "[green]Settings restored from memory.[]\n"
jump __label3 always 0 0
label __label2
write 2 cell1 0
write 0 cell1 1
write true cell1 2
write 24 cell1 3
write true cell1 4
write 100 cell1 5
write 100 cell1 6
write 0.25 cell1 7
write 0.75 cell1 8
write false cell1 9
set MESSAGE "[green]Settings saved to memory.[]\n"
label __label3
label __label0
op max LOCAL_LIMIT LOCAL_LIMIT 20
op max REMOTE_LIMIT REMOTE_LIMIT 20
op mul S_UNUSED -1 HOUSEKEEPING
op add DEC_OVERALLOCATION 1 OVERALLOCATION_HIGH
ubind @mega
jump __label6 notEqual @unit null
label __label219
print "[salmon]No unit of type "
print @mega
print " found."
printflush message1
ubind @mega
jump __label219 equal @unit null
label __label6
set first_unit @unit
sensor __tmp22 @unit @speed
op div SPEED_SEC __tmp22 10
sensor __tmp24 @unit @speed
op div SPEED __tmp24 1000
set TARGET 0
label __label220
sensor __tmp26 @unit @controller
jump __label10 notEqual __tmp26 @this
sensor state @unit @flag
op greaterThanEq __tmp30 state 1
op lessThan __tmp31 state 6
op land __tmp32 __tmp30 __tmp31
op add TARGET TARGET __tmp32
label __label10
ubind @mega
op notEqual __tmp34 @unit first_unit
sensor __tmp35 first_unit @dead
op strictEqual __tmp36 __tmp35 0
op land repeat __tmp34 __tmp36
jump __label220 notEqual repeat false
set CHANGE 0
set active TARGET
set DEC_LIMIT 0
set INC_LIMIT 0
sensor UNIT_CAPACITY @unit @itemCapacity
set first_unit null
label __label12
set CONTAINER null
set DROP_TARGET null
set n @links
jump __label17 lessThanEq n 0
label __label221
op sub n n 1
getlink block n
sensor __tmp43 block @type
jump __label20 equal __tmp43 @vault
jump __label19 notEqual __tmp43 @container
label __label20
set DROP_TARGET CONTAINER
set CONTAINER block
set CONTAINER_INDEX n
label __label19
jump __label221 greaterThan n 0
label __label17
jump __label14 notEqual CONTAINER null
print "[salmon]No vault or container."
printflush message1
jump __label12 always 0 0
label __label14
set CORE null
jump __label23 notEqual LINK_ID 0
label __label222
print "[green]Locating core..."
printflush message1
ubind @mega
sensor __tmp50 @unit @controlled
jump __label28 notEqual __tmp50 0
ulocate building core false @copper CORE_X CORE_Y 0 CORE
ucontrol flag S_UNUSED 0 0 0 0
label __label28
jump __label222 equal CORE null
set DISCARD_UNIT_MAX_ITEMS UNIT_CAPACITY
jump __label24 always 0 0
label __label23
printflush message2
print "[green]Locating vault #"
print LINK_ID
print "..."
printflush message1
op add QUERY_FLAG 99999900 LINK_ID
label __label223
set flag QUERY_FLAG
ubind @mega
sensor __tmp57 @unit @controlled
jump __label35 equal __tmp57 0
label __label226
ubind @mega
sensor __tmp57 @unit @controlled
jump __label226 notEqual __tmp57 0
label __label35
ucontrol flag QUERY_FLAG 0 0 0 0
op equal __tmp59 QUERY_FLAG QUERY_FLAG
sensor __tmp60 @unit @dead
op equal __tmp61 __tmp60 0
op land __tmp62 __tmp59 __tmp61
jump __label38 equal __tmp62 false
label __label227
ucontrol stop 0 0 0 0 0
sensor flag @unit @flag
op equal __tmp59 flag QUERY_FLAG
sensor __tmp60 @unit @dead
op equal __tmp61 __tmp60 0
op land __tmp62 __tmp59 __tmp61
jump __label227 notEqual __tmp62 false
label __label38
jump __label39 equal flag QUERY_FLAG
op idiv position flag 100
op mod CORE_X position @mapw
op idiv CORE_Y position @mapw
sensor __tmp69 @unit @dead
op equal __tmp70 __tmp69 0
ucontrol within CORE_X CORE_Y 8 __tmp71 0
op equal __tmp72 __tmp71 false
op land __tmp73 __tmp70 __tmp72
jump __label43 equal __tmp73 false
label __label228
ucontrol approach CORE_X CORE_Y 6 0 0
sensor __tmp69 @unit @dead
op equal __tmp70 __tmp69 0
ucontrol within CORE_X CORE_Y 8 __tmp71 0
op equal __tmp72 __tmp71 false
op land __tmp73 __tmp70 __tmp72
jump __label228 notEqual __tmp73 false
label __label43
ucontrol getBlock CORE_X CORE_Y b_type CORE 0
jump __label44 equal b_type @vault
print "[salmon]Building at "
print CORE_X
print ", "
print CORE_Y
print " is not a vault!"
printflush message2
set CORE null
label __label44
label __label39
ucontrol flag S_UNUSED 0 0 0 0
jump __label223 equal CORE null
set DISCARD_UNIT_MAX_ITEMS 0
label __label24
set SORTER sorter1
sensor sorter_type sorter1 @type
op notEqual __tmp79 sorter_type @sorter
op notEqual __tmp80 sorter_type @inverted-sorter
op land __tmp81 __tmp79 __tmp80
jump __label48 equal __tmp81 false
label __label230
print "[salmon]Block sorter1 is neither a sorter, nor an inverted sorter."
print "\n"
jump __label49 equal SORTER null
print "Block found: "
print SORTER
label __label49
printflush message1
set SORTER sorter1
sensor sorter_type sorter1 @type
op notEqual __tmp79 sorter_type @sorter
op notEqual __tmp80 sorter_type @inverted-sorter
op land __tmp81 __tmp79 __tmp80
jump __label230 notEqual __tmp81 false
label __label48
jump __label51 notEqual sorter_type @sorter
set SHOW_REMOTE_LEVEL true
set SRC CORE
set DST CONTAINER
sensor src_capacity CORE @itemCapacity
sensor dst_capacity CONTAINER @itemCapacity
op sub __tmp89 100 REMOTE_LIMIT
op mul __tmp90 src_capacity __tmp89
op idiv LOAD_LEVEL __tmp90 100
op mul __tmp92 dst_capacity LOCAL_LIMIT
op idiv DROP_LEVEL __tmp92 100
set LOCAL_MARGIN DROP_LEVEL
set REMOTE_MARGIN LOAD_LEVEL
op mul LOW_LEVEL_TRIGGER dst_capacity 0.09999999999999998
set HIGH_LEVEL_TRIGGER dst_capacity
set FLOW_CORR_SIGN 1
set SRC_REMOTE_WAIT 1
set DST_REMOTE_WAIT 0
set DIRECTION " from vault #"
jump __label52 notEqual LINK_ID 0
set DIRECTION " from core"
jump __label52 always 0 0
label __label51
op greaterThan SHOW_REMOTE_LEVEL LINK_ID 0
set SRC CONTAINER
set DST CORE
sensor src_capacity CONTAINER @itemCapacity
sensor dst_capacity CORE @itemCapacity
op sub __tmp101 100 LOCAL_LIMIT
op mul __tmp102 src_capacity __tmp101
op idiv LOAD_LEVEL __tmp102 100
op mul __tmp104 dst_capacity REMOTE_LIMIT
op idiv __tmp105 __tmp104 100
op equal __tmp106 LINK_ID 0
op mul __tmp107 __tmp106 UNIT_CAPACITY
op add DROP_LEVEL __tmp105 __tmp107
set LOCAL_MARGIN LOAD_LEVEL
set REMOTE_MARGIN DROP_LEVEL
op mul HIGH_LEVEL_TRIGGER src_capacity 0.9
set LOW_LEVEL_TRIGGER 0
set FLOW_CORR_SIGN -1
set SRC_REMOTE_WAIT 0
set DST_REMOTE_WAIT 1
set DIRECTION " to vault #"
jump __label56 notEqual LINK_ID 0
set DIRECTION " to core"
label __label56
label __label52
set __tmp113 LINK_ID
jump __label58 notEqual LINK_ID 0
set __tmp113 ""
label __label58
op sub __tmp114 src_capacity LOAD_LEVEL
op min LOAD_PACK UNIT_CAPACITY __tmp114
op min DROP_PACK UNIT_CAPACITY DROP_LEVEL
sensor SRC_X SRC @x
sensor SRC_Y SRC @y
sensor DST_X DST @x
sensor DST_Y DST @y
op sub __tmp121 DST_X SRC_X
op sub __tmp122 DST_Y SRC_Y
op len __tmp123 __tmp121 __tmp122
op sub DISTANCE __tmp123 14
op max __tmp126 DISTANCE 10
op mul __tmp127 2 __tmp126
op div TRAVEL_TIME __tmp127 SPEED
jump __label59 notEqual DROP_TARGET null
set DROP_TARGET CORE
set DROP_X CORE_X
set DROP_Y CORE_Y
op add PARK_X CORE_X -15
sensor __tmp136 CONTAINER @x
jump __label62 greaterThanEq __tmp136 CORE_X
op add PARK_X CORE_X 15
label __label62
op add PARK_Y CORE_Y -15
sensor __tmp140 CONTAINER @y
jump __label64 greaterThanEq __tmp140 CORE_Y
op add PARK_Y CORE_Y 15
label __label64
op equal __tmp144 LINK_ID 0
op mul PARK_ITEM_LIMIT __tmp144 UNIT_CAPACITY
jump __label60 always 0 0
label __label59
sensor DROP_X DROP_TARGET @x
sensor DROP_Y DROP_TARGET @y
set PARK_X DROP_X
set PARK_Y DROP_Y
set PARK_ITEM_LIMIT 0
label __label60
set TRANSFER_START @tick
op sub LOOP_START @tick 60
set LAST_ITEM @mono
op add MESSAGE_TIMEOUT @tick 600
set WAIT_LIMIT 30000
set items_in_transit 0
set items_per_min_unit "--"
set items_per_min "-- "
set turnaround_str "--"
set elapsed_str "--"
set wait_time_str 0
set wait_time 0
set transfers 0
set transferred 0
set total_flow_2 0
set total_flow_1 0
set remote_wait_time 0
set min_level 0
set max_level 0
set loop_time_ms 0
set last_level 0
jump __label65 equal AUTO_ALLOCATION false
set CORR_SIGN "[]([green]+"
set corr_per_min 0
set SPEED_UNIT_TXT "[])/min"
set AUTO_ALLOCATION_TXT "\n=== [gold]Gathering statistics[] ==="
jump __label66 always 0 0
label __label65
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set AUTO_ALLOCATION_TXT ""
label __label66
label __label67
ubind @mega
jump __label72 notEqual @unit null
label __label224
print "No unit of type "
print @mega
print " found."
printflush message1
ubind @mega
jump __label224 equal @unit null
label __label72
sensor __tmp153 switch1 @enabled
jump __label73 equal __tmp153 false
control enabled switch1 false 0 0 0
set AUTO_ALLOCATION false
set AUTO_ALLOCATION_TXT ""
op add __tmp155 TARGET 1
op min TARGET __tmp155 MAX_UNITS
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set WAIT_LIMIT 30000
label __label73
sensor __tmp157 switch2 @enabled
jump __label75 equal __tmp157 false
control enabled switch2 false 0 0 0
jump __label77 greaterThanEq TARGET 1
set AUTO_ALLOCATION true
set TARGET 1
set DEC_LIMIT 0
set INC_LIMIT 0
set CORR_SIGN "[]([green]+"
set corr_per_min 0
set SPEED_UNIT_TXT "[])/min"
jump __label78 always 0 0
label __label77
set AUTO_ALLOCATION false
op sub __tmp161 TARGET 1
op max TARGET __tmp161 0
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set AUTO_ALLOCATION_TXT ""
jump __label80 notEqual TARGET 0
set AUTO_ALLOCATION_TXT "\n=== [salmon]Transport deactivated[] ==="
label __label80
label __label78
set WAIT_LIMIT 30000
label __label75
sensor __tmp165 first_unit @dead
op strictEqual alive __tmp165 0
op strictEqual __tmp167 @unit first_unit
jump __label81 greaterThan alive __tmp167
jump __label83 notEqual active 0
print "\n[salmon]No active units.[]"
label __label83
printflush message2
set STATE_LIMIT 6
sensor ITEM SORTER @config
jump __label85 equal ITEM LAST_ITEM
jump __label89 notEqual ITEM null
label __label225
print "[salmon]No item type selected for transport.[]"
printflush message1
sensor ITEM SORTER @config
jump __label225 equal ITEM null
label __label89
set LAST_ITEM ITEM
jump __label93 notEqual ITEM @blast-compound
set __tmp178 "[]"
jump __label92 always 0 0
label __label93
jump __label95 notEqual ITEM @coal
set __tmp178 "[]"
jump __label92 always 0 0
label __label95
jump __label97 notEqual ITEM @copper
set __tmp178 "[]"
jump __label92 always 0 0
label __label97
jump __label99 notEqual ITEM @graphite
set __tmp178 "[]"
jump __label92 always 0 0
label __label99
jump __label101 notEqual ITEM @lead
set __tmp178 "[]"
jump __label92 always 0 0
label __label101
jump __label103 notEqual ITEM @metaglass
set __tmp178 "[]"
jump __label92 always 0 0
label __label103
jump __label105 notEqual ITEM @phase-fabric
set __tmp178 "[]"
jump __label92 always 0 0
label __label105
jump __label107 notEqual ITEM @plastanium
set __tmp178 "[]"
jump __label92 always 0 0
label __label107
jump __label109 notEqual ITEM @pyratite
set __tmp178 "[]"
jump __label92 always 0 0
label __label109
jump __label111 notEqual ITEM @sand
set __tmp178 "[]"
jump __label92 always 0 0
label __label111
jump __label113 notEqual ITEM @scrap
set __tmp178 "[]"
jump __label92 always 0 0
label __label113
jump __label115 notEqual ITEM @silicon
set __tmp178 "[]"
jump __label92 always 0 0
label __label115
jump __label117 notEqual ITEM @spore-pod
set __tmp178 "[]"
jump __label92 always 0 0
label __label117
jump __label119 notEqual ITEM @surge-alloy
set __tmp178 "[]"
jump __label92 always 0 0
label __label119
jump __label121 notEqual ITEM @thorium
set __tmp178 "[]"
jump __label92 always 0 0
label __label121
jump __label123 notEqual ITEM @titanium
set __tmp178 "[]"
jump __label92 always 0 0
label __label123
set __tmp178 null
label __label92
set ITEM_ICON __tmp178
set STATE_LIMIT 1
sensor last_level CONTAINER ITEM
set min_level 999999
set max_level 0
label __label85
sensor container_items CONTAINER ITEM
op min min_level min_level container_items
op max max_level max_level container_items
op sub loop_time @tick LOOP_START
set LOOP_START @tick
op mul __tmp185 loop_time 100
op idiv loop_time_ms __tmp185 6
op greaterThanEq __tmp187 transfers active
op greaterThan __tmp188 wait_time WAIT_LIMIT
op or __tmp189 __tmp187 __tmp188
jump __label125 equal __tmp189 false
op div __tmp191 wait_time 100
op ceil __tmp192 __tmp191 0
op div wait_time_str __tmp192 10
op sub elapsed_ticks @tick TRANSFER_START
set TRANSFER_START @tick
op div elapsed_ms elapsed_ticks 0.06
op idiv __tmp197 elapsed_ms 100
op div elapsed_str __tmp197 10
op div items_per_ms transferred elapsed_ms
op idiv items_per_min items_per_ms 0.000016666666666666667
set transferred 0
set transfers 0
jump __label127 equal AUTO_ALLOCATION false
set AUTO_ALLOCATION_TXT "\n=== [gold]Unit auto allocation[] ==="
op mul __tmp202 16.666666666666668 loop_time
op add turnaround_ms TRAVEL_TIME __tmp202
op mul WAIT_LIMIT turnaround_ms DEC_OVERALLOCATION
op idiv __tmp205 turnaround_ms 100
op div turnaround_str __tmp205 10
op div items_per_ms_unit UNIT_CAPACITY turnaround_ms
op idiv items_per_min_unit items_per_ms_unit 0.000016666666666666667
op add __tmp210 min_level max_level
op div this_level __tmp210 2
op sub __tmp212 last_level this_level
op mul corr __tmp212 FLOW_CORR_SIGN
op div corr_per_ms corr elapsed_ms
set last_level this_level
op add total_flow_per_ms items_per_ms corr_per_ms
op idiv corr_per_min corr_per_ms 0.000016666666666666667
set CORR_SIGN "[]([green]"
jump __label129 lessThan corr_per_min 0
set CORR_SIGN "[]([green]+"
label __label129
set SPEED_UNIT_TXT "[])/min"
jump __label131 equal alive false
op lessThan __tmp221 min_level LOW_LEVEL_TRIGGER
op greaterThan __tmp222 max_level HIGH_LEVEL_TRIGGER
op or trigger __tmp221 __tmp222
op equal __tmp224 wait_time 0
op greaterThan __tmp225 trigger remote_wait_time
op or __tmp226 __tmp224 __tmp225
jump __label133 equal __tmp226 false
jump __label135 equal STABILIZATION false
set total_flow_3 total_flow_2
set total_flow_2 total_flow_1
set total_flow_1 total_flow_per_ms
op add __tmp229 total_flow_3 total_flow_2
op add __tmp230 __tmp229 total_flow_per_ms
op div total_flow_per_ms __tmp230 3
label __label135
op div __tmp232 total_flow_per_ms items_per_ms_unit
op add __tmp233 __tmp232 OVERALLOCATION_LOW
op ceil new_target __tmp233 0
op mul level_boost 2 trigger
op add __tmp236 new_target level_boost
op min new_target __tmp236 MAX_UNITS
op sub __tmp238 new_target active
op max __tmp239 __tmp238 0
op min new_change __tmp239 INC_LIMIT
set INC_LIMIT 6
op lessThanEq __tmp241 new_change 0
op mul DEC_LIMIT __tmp241 -1
jump __label134 always 0 0
label __label133
op idiv __tmp243 wait_time WAIT_LIMIT
op mul __tmp244 -1 __tmp243
op max new_change __tmp244 DEC_LIMIT
op greaterThanEq __tmp246 new_change 0
op mul INC_LIMIT __tmp246 6
set DEC_LIMIT -1
label __label134
op add __tmp248 active new_change
op max TARGET __tmp248 1
jump __label132 always 0 0
label __label131
set INC_LIMIT 0
set DEC_LIMIT 0
label __label132
set min_level 999999
set max_level 0
label __label127
set wait_time 0
set remote_wait_time 0
jump __label137 lessThan @tick MESSAGE_TIMEOUT
set MESSAGE ""
label __label137
label __label125
print MESSAGE
print "Moving [green]"
print ITEM
print "[]"
print DIRECTION
print __tmp113
print AUTO_ALLOCATION_TXT
jump __label139 lessThanEq TARGET 0
jump __label141 lessThan active TARGET
print "\nUsing [green]"
print active
print "/"
print TARGET
print "[] units ("
print @mega
print ") [gold]+"
print items_in_transit
jump __label142 always 0 0
label __label141
print "\nUsing [salmon]"
print active
print "/"
print TARGET
print "[] units ("
print @mega
print ") [gold]+"
print items_in_transit
label __label142
jump __label143 lessThanEq CHANGE 0
print "\n[][salmon]Cannot acquire additional units![]"
label __label143
label __label139
print "\n[]Local items: [gold]"
print container_items
jump __label145 greaterThanEq LOCAL_LIMIT 100
print "[] (limit [orange]"
print LOCAL_MARGIN
print "[])"
label __label145
jump __label147 equal SHOW_REMOTE_LEVEL false
sensor remote_level CORE ITEM
print "\n[]Remote items: [gold]"
print remote_level
jump __label149 greaterThanEq REMOTE_LIMIT 100
print "[] (limit [orange]"
print REMOTE_MARGIN
print "[])"
label __label149
label __label147
jump __label151 lessThanEq TARGET 0
print "\n[]Speed: [green]"
print items_per_min
print CORR_SIGN
print corr_per_min
print SPEED_UNIT_TXT
jump __label153 equal AUTO_ALLOCATION false
print "\nUnit throughput: [green]"
print items_per_min_unit
print "[]/min\nMin/last round: [green]"
print turnaround_str
print "[]/[green]"
print elapsed_str
print "[] s"
jump __label154 always 0 0
label __label153
print "\nLast round: [green]"
print elapsed_str
print "[] s"
label __label154
print "\nTotal wait time: [green]"
print wait_time_str
print "[] s"
label __label151
print "\n[lightgray]Loop: "
print loop_time_ms
print " ms"
printflush message1
op sub CHANGE TARGET active
set active 0
set first_unit @unit
set items_in_transit 0
print "Unit status:"
sensor __tmp269 SRC @dead
jump __label69 notEqual __tmp269 0
sensor __tmp272 DST @dead
jump __label69 notEqual __tmp272 0
sensor __tmp275 SORTER @dead
jump __label69 notEqual __tmp275 0
getlink __tmp278 CONTAINER_INDEX
jump __label69 notEqual CONTAINER __tmp278
label __label81
jump __label163 lessThanEq CHANGE 0
sensor __tmp283 @unit @controlled
jump __label165 notEqual __tmp283 0
op sub CHANGE CHANGE 1
ucontrol flag 1 0 0 0 0
label __label165
label __label163
sensor __tmp287 @unit @controller
jump __label67 notEqual __tmp287 @this
sensor state @unit @flag
jump __label67 equal state S_UNUSED
op max __tmp293 state 1
op min state __tmp293 STATE_LIMIT
jump __label171 greaterThanEq CHANGE 0
jump __label173 equal state 6
sensor __tmp299 @unit @totalItems
jump __label175 greaterThan __tmp299 DISCARD_UNIT_MAX_ITEMS
op add CHANGE CHANGE 1
set state 6
label __label175
label __label173
label __label171
jump __label177 notEqual state 1
sensor __tmp305 @unit @totalItems
jump __label179 notEqual __tmp305 0
set state 2
jump __label180 always 0 0
label __label179
sensor __tmp308 @unit @firstItem
jump __label181 notEqual __tmp308 ITEM
set state 4
jump __label182 always 0 0
label __label181
ucontrol approach DROP_X DROP_Y 6 0 0
ucontrol within DROP_X DROP_Y 8 __tmp311 0
jump __label183 equal __tmp311 false
ucontrol itemDrop DROP_TARGET UNIT_CAPACITY 0 0 0
label __label183
print "[]\nUnloading previous items: [green]"
label __label182
label __label180
label __label177
jump __label185 notEqual state 2
ucontrol approach SRC_X SRC_Y 6 0 0
ucontrol within SRC_X SRC_Y 8 __tmp315 0
jump __label187 equal __tmp315 false
set state 3
jump __label188 always 0 0
label __label187
sensor __tmp317 @unit @x
op sub __tmp318 SRC_X __tmp317
sensor __tmp319 @unit @y
op sub __tmp320 SRC_Y __tmp319
op len __tmp321 __tmp318 __tmp320
op idiv __tmp322 __tmp321 SPEED_SEC
op div __tmp323 __tmp322 10
print "[]\n[gold]"
print __tmp323
print " sec[] to source: [green]"
label __label188
label __label185
jump __label189 notEqual state 3
sensor __tmp326 SRC ITEM
op sub max_load __tmp326 LOAD_LEVEL
jump __label191 lessThan max_load LOAD_PACK
ucontrol itemTake SRC ITEM max_load 0 0
label __label191
sensor __tmp330 @unit @totalItems
jump __label193 lessThan __tmp330 UNIT_CAPACITY
set state 4
jump __label194 always 0 0
label __label193
print "[]\nWaiting at source: [green]"
ucontrol approach SRC_X SRC_Y 6 0 0
op add wait_time wait_time loop_time_ms
op mul __tmp334 loop_time_ms SRC_REMOTE_WAIT
op add remote_wait_time remote_wait_time __tmp334
label __label194
label __label189
jump __label195 notEqual state 4
ucontrol approach DST_X DST_Y 6 0 0
ucontrol within DST_X DST_Y 8 __tmp338 0
jump __label197 equal __tmp338 false
sensor __tmp340 @unit @totalItems
op add transferred transferred __tmp340
op add transfers transfers 1
set state 5
jump __label198 always 0 0
label __label197
sensor __tmp343 @unit @x
op sub __tmp344 DST_X __tmp343
sensor __tmp345 @unit @y
op sub __tmp346 DST_Y __tmp345
op len __tmp347 __tmp344 __tmp346
op idiv __tmp348 __tmp347 SPEED_SEC
op div __tmp349 __tmp348 10
print "[]\n[gold]"
print __tmp349
print " sec[] to destination: [green]"
label __label198
label __label195
jump __label199 notEqual state 5
sensor __tmp352 DST ITEM
op sub max_drop DROP_LEVEL __tmp352
jump __label201 lessThan max_drop DROP_PACK
ucontrol itemDrop DST max_drop 0 0 0
label __label201
sensor __tmp356 @unit @totalItems
jump __label203 greaterThan __tmp356 0
set state 2
ucontrol approach SRC_X SRC_Y 6 0 0
sensor __tmp359 @unit @x
op sub __tmp360 SRC_X __tmp359
sensor __tmp361 @unit @y
op sub __tmp362 SRC_Y __tmp361
op len __tmp363 __tmp360 __tmp362
op idiv __tmp364 __tmp363 SPEED_SEC
op div __tmp365 __tmp364 10
print "[]\n[gold]"
print __tmp365
print " sec[] to source: [green]"
jump __label204 always 0 0
label __label203
print "[]\nWaiting at destination: [green]"
ucontrol approach DST_X DST_Y 6 0 0
op add wait_time wait_time loop_time_ms
op mul __tmp367 loop_time_ms DST_REMOTE_WAIT
op add remote_wait_time remote_wait_time __tmp367
label __label204
label __label199
sensor items @unit @totalItems
op add items_in_transit items_in_transit items
jump __label205 notEqual state 6
print "[]\nParking: [green]"
ucontrol approach DROP_X DROP_Y 6 0 0
ucontrol within DROP_X DROP_Y 8 __tmp373 0
jump __label206 equal __tmp373 false
ucontrol itemDrop DROP_TARGET UNIT_CAPACITY 0 0 0
sensor items @unit @totalItems
jump __label206 greaterThan items PARK_ITEM_LIMIT
ucontrol move PARK_X PARK_Y 0 0 0
set state S_UNUSED
jump __label206 always 0 0
label __label205
op add active active 1
label __label206
print items
print ITEM_ICON
ucontrol flag state 0 0 0 0
jump __label67 always 0 0
label __label69
sensor __tmp379 SORTER @dead
op strictEqual __tmp380 __tmp379 0
jump __label213 notEqual __tmp380 false
label __label229
print "[salmon]sorter1 is missing![]\nPlease place and link sorter or inverted sorter to the processor."
printflush message1
printflush message2
sensor __tmp379 sorter1 @dead
op strictEqual __tmp380 __tmp379 0
jump __label229 equal __tmp380 false
label __label213
sensor __tmp382 SRC @dead
op strictEqual __tmp383 __tmp382 0
op equal __tmp384 __tmp383 false
sensor __tmp385 DST @dead
op strictEqual __tmp386 __tmp385 0
op equal __tmp387 __tmp386 false
op or __tmp388 __tmp384 __tmp387
jump __label214 equal __tmp388 false
sensor __tmp390 switch1 @enabled
sensor __tmp391 switch2 @enabled
op or __tmp392 __tmp390 __tmp391
jump __label218 notEqual __tmp392 false
label __label231
print "[salmon]Local or remote container became invalid.\nPlease fix and press any button to reinitialize."
printflush message1
printflush message2
sensor __tmp390 switch1 @enabled
sensor __tmp391 switch2 @enabled
op or __tmp392 __tmp390 __tmp391
jump __label231 equal __tmp392 false
label __label218
label __label214
control enabled switch1 false 0 0 0
control enabled switch2 false 0 0 0
