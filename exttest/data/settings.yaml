# GLOBAL TEST FRAMEWORK SETTINGS

# Number of tests to run in parallel
threads: 24

# Name of the section containing list of tests to execute
# Several sections can be present in the config file, the active one is selected here
#test-suite: single-source
test-suite: all-sources

# Where to put all the output files
# When not set, test-specific output files will be generated in the directory containing the source file
# Global output files will be generated in current directory.
output-path: .

# 'true' to run all possible configurations for all tests, 'false' to run the given number of samples
# (full tests would typically take many hours to complete)
full-tests: false

# Number of samples configured to run per test will be multiplied by this
sample-multiplier: 3

# DEFAULT TEST SETTINGS
# All values specified here may be overridden for specific tests
defaults:
  # Number of test cases to execute
  samples: 500

  # When number of failures encountered while executing a test exceeds the given value, the test is stopped
  # Prevents creation of too large output files and saves CPU time when too may tests fail
  failure-limit: 500

  # 'true' to compile, optimize and run the code, 'false' to just compile and optimize.
  run: false

  # List of goal settings to use
  goal: [ speed, size ]

  # List of optimization levels for each given optimization
  case-expression-optimization: [ none, basic ]
  case-switching: [ none, basic ]
  data-flow-optimization: [ none, basic, advanced, experimental ]
  dead-code-elimination: [ none, basic, advanced ]
  expression-optimization: [ none, basic, advanced ]
  function-inlining: [ none, basic, advanced ]
  if-expression-optimization: [ none, basic, experimental ]
  jump-normalization: [ none, basic ]
  jump-optimization: [ none, basic ]
  jump-straightening: [ none, basic ]
  jump-threading: [ none, basic, advanced ]
  loop-hoisting: [ none, basic, advanced ]
  loop-optimization: [ none, basic ]
  loop-unrolling: [ none, basic, advanced ]
  print-merging: [ none, basic, advanced, experimental ]
  return-optimization: [ none, basic ]
  single-step-elimination: [ none, basic, advanced, experimental ]
  stack-optimization: [ none, basic ]
  temp-variables-elimination: [ none, basic ]
  unreachable-code-elimination: [ none, basic, advanced ]

# LIST OF SOURCES

# A single file to test
# Unspecified settings are inherited from default
single-source:
  - source: impact-reactor-logic.mnd
    samples: 100

# List of all files to test
all-sources:
  - source: math.mnd
    samples: 200
    run: true
    case-expression-optimization: [ basic ]
    case-switching: [ basic ]
    stack-optimization: [ basic ]
  - source: printing.mnd
    samples: 400
    run: true
    case-expression-optimization: [ basic ]
    case-switching: [ basic ]
    stack-optimization: [ basic ]
  - source: quick-sort.mnd
    samples: 5000
    run: true
    case-expression-optimization: [ basic ]
    case-switching: [ basic ]
  - source: bubble-sort.mnd
    samples: 2000
    run: true
    case-expression-optimization: [ basic ]
    case-switching: [ basic ]
    stack-optimization: [ basic ]
  - source: impact-reactor-logic.mnd
    samples: 125
  - source: "C:\Home\golem\mindcode\breakout.mnd"
    samples: 1200
  - source: "C:\Home\golem\mindcode\factory-monitor.mnd"
    samples: 500
  - source: "C:\Home\golem\mindcode\mandelbrot-compute.mnd"
    samples: 250
  - source: "C:\Home\golem\mindcode\unit-transport.mnd"
    samples: 80
