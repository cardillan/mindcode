  1086 instructions before optimizations.
   110 instructions eliminated by Temp Variables Elimination.
     2 instructions eliminated by Case Expression Optimization.
   122 instructions eliminated by Dead Code Elimination (5 iterations).
     2 instructions eliminated by Jump Normalization (5 iterations).
    60 instructions eliminated by Jump Optimization (5 iterations).
    52 instructions eliminated by Single Step Elimination (4 passes, 9 iterations).
     2 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
     5 instructions eliminated by If Expression Optimization (2 passes, 4 iterations).
    24 instructions eliminated by Data Flow Optimization (5 passes, 20 iterations).
     1 loops improved by Loop Hoisting.
    15 instructions added by Loop Optimization (4 iterations).
    13 loops improved by Loop Optimization.
    21 instructions eliminated by Jump Straightening (2 passes, 5 iterations).
     7 instructions updated by JumpThreading.
     2 instructions eliminated by Unreachable Code Elimination.
     2 instructions eliminated by Print Merging.
   697 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 301):
  * Loop Optimization: replicate condition at line 174           cost     1, benefit      312.5, efficiency      312.5 (+0 instructions)
    Loop Optimization: replicate condition at line 178           cost     4, benefit      312.5, efficiency       78.1
    Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 301):
  * Loop Optimization: replicate condition at line 178           cost     4, benefit      312.5, efficiency       78.1 (+4 instructions)
    Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 297):
  * Loop Optimization: replicate condition at line 186           cost     5, benefit      156.3, efficiency       31.3 (+5 instructions)
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
    Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 292):
    Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3
  * Loop Optimization: replicate condition at line 694           cost     2, benefit       25.0, efficiency       12.5 (+1 instructions)
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 291):
  * Loop Optimization: replicate condition at line 205           cost     3, benefit       25.0, efficiency        8.3 (+3 instructions)
    Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2

Pass 1: speed optimization selection (cost limit 288):
  * Loop Optimization: replicate condition at line 702           cost     3, benefit       12.5, efficiency        4.2 (+3 instructions)

Modifications by Initial phase, Case Expression Optimization, iteration 1 (-2 instructions):
 
   101 getlink __tmp28 n
   102 set block __tmp28
   103 sensor __tmp29 block @type
-    * set __ast0 __tmp29
-    * jump __label16 equal __ast0 @vault
-    * jump __label16 equal __ast0 @container
+  104 jump __label16 equal __tmp29 @vault
+  105 jump __label16 equal __tmp29 @container
   106 jump __label15 always
   107 label __label16
   108 set DROP_TARGET CONTAINER
 
   551 set LAST_ITEM ITEM
   552 label __label86
   553 set __fn0_itemType ITEM
-    * set __ast1 __fn0_itemType
-    * jump __label90 equal __ast1 @blast-compound
+  554 jump __label90 equal __fn0_itemType @blast-compound
   555 jump __label89 always
   556 label __label90
   557 set __tmp164 "[]"
   558 jump __label88 always
   559 label __label89
-    * jump __label92 equal __ast1 @coal
+  560 jump __label92 equal __fn0_itemType @coal
   561 jump __label91 always
   562 label __label92
   563 set __tmp164 "[]"
   564 jump __label88 always
   565 label __label91
-    * jump __label94 equal __ast1 @copper
+  566 jump __label94 equal __fn0_itemType @copper
   567 jump __label93 always
   568 label __label94
   569 set __tmp164 "[]"
   570 jump __label88 always
   571 label __label93
-    * jump __label96 equal __ast1 @graphite
+  572 jump __label96 equal __fn0_itemType @graphite
   573 jump __label95 always
   574 label __label96
   575 set __tmp164 "[]"
   576 jump __label88 always
   577 label __label95
-    * jump __label98 equal __ast1 @lead
+  578 jump __label98 equal __fn0_itemType @lead
   579 jump __label97 always
   580 label __label98
   581 set __tmp164 "[]"
   582 jump __label88 always
   583 label __label97
-    * jump __label100 equal __ast1 @metaglass
+  584 jump __label100 equal __fn0_itemType @metaglass
   585 jump __label99 always
   586 label __label100
   587 set __tmp164 "[]"
   588 jump __label88 always
   589 label __label99
-    * jump __label102 equal __ast1 @phase-fabric
+  590 jump __label102 equal __fn0_itemType @phase-fabric
   591 jump __label101 always
   592 label __label102
   593 set __tmp164 "[]"
   594 jump __label88 always
   595 label __label101
-    * jump __label104 equal __ast1 @plastanium
+  596 jump __label104 equal __fn0_itemType @plastanium
   597 jump __label103 always
   598 label __label104
   599 set __tmp164 "[]"
   600 jump __label88 always
   601 label __label103
-    * jump __label106 equal __ast1 @pyratite
+  602 jump __label106 equal __fn0_itemType @pyratite
   603 jump __label105 always
   604 label __label106
   605 set __tmp164 "[]"
   606 jump __label88 always
   607 label __label105
-    * jump __label108 equal __ast1 @sand
+  608 jump __label108 equal __fn0_itemType @sand
   609 jump __label107 always
   610 label __label108
   611 set __tmp164 "[]"
   612 jump __label88 always
   613 label __label107
-    * jump __label110 equal __ast1 @scrap
+  614 jump __label110 equal __fn0_itemType @scrap
   615 jump __label109 always
   616 label __label110
   617 set __tmp164 "[]"
   618 jump __label88 always
   619 label __label109
-    * jump __label112 equal __ast1 @silicon
+  620 jump __label112 equal __fn0_itemType @silicon
   621 jump __label111 always
   622 label __label112
   623 set __tmp164 "[]"
   624 jump __label88 always
   625 label __label111
-    * jump __label114 equal __ast1 @spore-pod
+  626 jump __label114 equal __fn0_itemType @spore-pod
   627 jump __label113 always
   628 label __label114
   629 set __tmp164 "[]"
   630 jump __label88 always
   631 label __label113
-    * jump __label116 equal __ast1 @surge-alloy
+  632 jump __label116 equal __fn0_itemType @surge-alloy
   633 jump __label115 always
   634 label __label116
   635 set __tmp164 "[]"
   636 jump __label88 always
   637 label __label115
-    * jump __label118 equal __ast1 @thorium
+  638 jump __label118 equal __fn0_itemType @thorium
   639 jump __label117 always
   640 label __label118
   641 set __tmp164 "[]"
   642 jump __label88 always
   643 label __label117
-    * jump __label120 equal __ast1 @titanium
+  644 jump __label120 equal __fn0_itemType @titanium
   645 jump __label119 always
   646 label __label120
   647 set __tmp164 "[]"

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-88 instructions):
 
    66 op land __tmp18 __tmp16 __tmp17
    67 op add __tmp19 TARGET __tmp18
    68 set TARGET __tmp19
-    * set __tmp14 TARGET
    69 jump __label7 always
    70 label __label6
-    * set __tmp14 null
    71 label __label7
    72 ubind UNIT
    73 op notEqual __tmp20 @unit first_unit
 
   106 set DROP_TARGET CONTAINER
   107 set CONTAINER block
   108 set CONTAINER_INDEX n
-    * set __tmp30 CONTAINER_INDEX
   109 jump __label14 always
   110 label __label15
-    * set __tmp30 null
   111 label __label14
   112 label __label12
   113 jump __label11 always
 
   116 jump __label17 equal __tmp31 false
   117 print "[salmon]No vault or container."
   118 printflush message1
-    * set __tmp32 null
   119 jump __label18 always
   120 label __label17
   121 jump __label10 always
-    * set __tmp32 null
   122 label __label18
   123 label __label9
   124 jump __label8 always
 
   138 ulocate building core false @copper CORE_X CORE_Y __tmp40 __tmp39
   139 set CORE __tmp39
   140 ucontrol flag S_UNUSED
-    * set __tmp38 null
   141 jump __label25 always
   142 label __label24
-    * set __tmp38 null
   143 label __label25
   144 label __label22
   145 jump __label21 always
   146 label __label23
   147 set DISCARD_UNIT_MAX_ITEMS UNIT_CAPACITY
-    * set __tmp34 DISCARD_UNIT_MAX_ITEMS
   148 jump __label20 always
   149 label __label19
   150 printflush message2
 
   215 label __label40
   216 set __tmp63 null
   217 label __label41
-    * set __tmp51 __tmp63
   218 jump __label36 always
   219 label __label35
-    * set __tmp51 null
   220 label __label36
   221 ucontrol flag S_UNUSED
   222 label __label27
   223 jump __label26 always
   224 label __label28
   225 set DISCARD_UNIT_MAX_ITEMS 0
-    * set __tmp34 DISCARD_UNIT_MAX_ITEMS
   226 label __label20
   227 set SORTER sorter1
   228 sensor __tmp64 SORTER @type
 
   238 jump __label45 equal __tmp68 false
   239 print "Block found: "
   240 print SORTER
-    * set __tmp69 SORTER
   241 jump __label46 always
   242 label __label45
-    * set __tmp69 null
   243 label __label46
   244 printflush message1
   245 set SORTER sorter1
 
   281 set __tmp83 " from vault #"
   282 label __label50
   283 set DIRECTION __tmp83
-    * set __tmp72 DIRECTION
   284 jump __label48 always
   285 label __label47
   286 op greaterThan __tmp84 LINK_ID 0
 
   317 set __tmp97 " to vault #"
   318 label __label52
   319 set DIRECTION __tmp97
-    * set __tmp72 DIRECTION
   320 label __label48
   321 op equal __tmp98 LINK_ID 0
   322 jump __label53 equal __tmp98 false
 
   383 op equal __tmp130 LINK_ID 0
   384 op mul __tmp131 __tmp130 UNIT_CAPACITY
   385 set PARK_ITEM_LIMIT __tmp131
-    * set __tmp121 PARK_ITEM_LIMIT
   386 jump __label56 always
   387 label __label55
   388 sensor __tmp132 DROP_TARGET @x
 
   392 set PARK_X DROP_X
   393 set PARK_Y DROP_Y
   394 set PARK_ITEM_LIMIT 0
-    * set __tmp121 PARK_ITEM_LIMIT
   395 label __label56
   396 set __tmp134 @tick
   397 set TRANSFER_START __tmp134
 
   422 set corr_per_min 0
   423 set SPEED_UNIT_TXT "[])/min"
   424 set AUTO_ALLOCATION_TXT "\n=== [gold]Gathering statistics[] ==="
-    * set __tmp137 AUTO_ALLOCATION_TXT
   425 jump __label62 always
   426 label __label61
   427 set CORR_SIGN "[]"
   428 set corr_per_min ""
   429 set SPEED_UNIT_TXT "/min"
   430 set AUTO_ALLOCATION_TXT ""
-    * set __tmp137 AUTO_ALLOCATION_TXT
   431 label __label62
   432 label __label63
   433 jump __label65 equal true false
 
   455 set corr_per_min ""
   456 set SPEED_UNIT_TXT "/min"
   457 set WAIT_LIMIT 30000
-    * set __tmp140 WAIT_LIMIT
   458 jump __label70 always
   459 label __label69
-    * set __tmp140 null
   460 label __label70
   461 sensor __tmp143 switch2 @enabled
   462 jump __label71 equal __tmp143 false
 
   470 set CORR_SIGN "[]([green]+"
   471 set corr_per_min 0
   472 set SPEED_UNIT_TXT "[])/min"
-    * set __tmp146 SPEED_UNIT_TXT
   473 jump __label74 always
   474 label __label73
   475 set EFF_AUTO_ALLOCATION false
 
   487 set __tmp150 ""
   488 label __label76
   489 set AUTO_ALLOCATION_TXT __tmp150
-    * set __tmp146 AUTO_ALLOCATION_TXT
   490 label __label74
   491 set WAIT_LIMIT 30000
-    * set __tmp144 WAIT_LIMIT
   492 jump __label72 always
   493 label __label71
-    * set __tmp144 null
   494 label __label72
   495 sensor __tmp151 first_unit @dead
   496 op strictEqual __tmp152 __tmp151 0
 
   501 op equal __tmp156 active 0
   502 jump __label79 equal __tmp156 false
   503 print "\n[salmon]No active units.[]"
-    * set __tmp157 "\n[salmon]No active units.[]"
   504 jump __label80 always
   505 label __label79
-    * set __tmp157 null
   506 label __label80
   507 printflush message2
   508 set STATE_LIMIT 6
 
   629 set last_level __tmp165
   630 set min_level 999999
   631 set max_level 0
-    * set __tmp160 max_level
   632 jump __label82 always
   633 label __label81
-    * set __tmp160 null
   634 label __label82
   635 sensor __tmp166 CONTAINER ITEM
   636 set container_items __tmp166
 
   701 op greaterThanEq __tmp204 corr_per_min 0
   702 jump __label125 equal __tmp204 false
   703 set CORR_SIGN "[]([green]+"
-    * set __tmp205 CORR_SIGN
   704 jump __label126 always
   705 label __label125
-    * set __tmp205 null
   706 label __label126
   707 set SPEED_UNIT_TXT "[])/min"
   708 jump __label127 equal alive false
 
   722 op add __tmp216 __tmp215 total_flow_1
   723 op div __tmp217 __tmp216 3
   724 set total_flow_per_ms __tmp217
-    * set __tmp214 total_flow_per_ms
   725 jump __label132 always
   726 label __label131
-    * set __tmp214 null
   727 label __label132
   728 op div __tmp218 total_flow_per_ms items_per_ms_unit
   729 op add __tmp219 __tmp218 INC_OVERALLOCATION
 
   742 op lessThanEq __tmp227 new_change 0
   743 op mul __tmp228 __tmp227 DEC_MAX
   744 set DEC_LIMIT __tmp228
-    * set __tmp213 DEC_LIMIT
   745 jump __label130 always
   746 label __label129
   747 op idiv __tmp229 wait_time WAIT_LIMIT
 
   752 op mul __tmp233 __tmp232 INC_MAX
   753 set INC_LIMIT __tmp233
   754 set DEC_LIMIT DEC_MAX
-    * set __tmp213 DEC_LIMIT
   755 label __label130
   756 op add __tmp234 active new_change
   757 op max __tmp235 __tmp234 1
   758 set TARGET __tmp235
-    * set __tmp206 TARGET
   759 jump __label128 always
   760 label __label127
   761 set INC_LIMIT 0
   762 set DEC_LIMIT 0
-    * set __tmp206 DEC_LIMIT
   763 label __label128
   764 set min_level 999999
   765 set max_level 0
-    * set __tmp187 max_level
   766 jump __label124 always
   767 label __label123
-    * set __tmp187 null
   768 label __label124
   769 set wait_time 0
   770 set remote_wait_time 0
 
   776 label __label133
   777 set __tmp237 null
   778 label __label134
-    * set __tmp176 __tmp237
   779 jump __label122 always
   780 label __label121
-    * set __tmp176 null
   781 label __label122
   782 print MESSAGE
   783 print "Moving [green]"
 
   798 print UNIT
   799 print ") [gold]+"
   800 print items_in_transit
-    * set __tmp241 null
   801 jump __label138 always
   802 label __label137
   803 print "\nUsing [salmon]"
 
   808 print UNIT
   809 print ") [gold]+"
   810 print items_in_transit
-    * set __tmp241 null
   811 label __label138
   812 op greaterThan __tmp242 CHANGE 0
   813 jump __label139 equal __tmp242 false
 
   817 label __label139
   818 set __tmp243 null
   819 label __label140
-    * set __tmp239 __tmp243
   820 jump __label136 always
   821 label __label135
-    * set __tmp239 null
   822 label __label136
   823 print "\n[]Local items: [gold]"
   824 print container_items
 
   827 print "[] (limit [orange]"
   828 print LOCAL_MARGIN
   829 print "[])"
-    * set __tmp245 null
   830 jump __label142 always
   831 label __label141
-    * set __tmp245 null
   832 label __label142
   833 jump __label143 equal SHOW_REMOTE_LEVEL false
   834 sensor __tmp247 CORE ITEM
 
   845 label __label145
   846 set __tmp249 null
   847 label __label146
-    * set __tmp246 __tmp249
   848 jump __label144 always
   849 label __label143
-    * set __tmp246 null
   850 label __label144
   851 op greaterThan __tmp250 TARGET 0
   852 jump __label147 equal __tmp250 false
 
   864 print "[]/[green]"
   865 print elapsed_str
   866 print "[] s"
-    * set __tmp252 null
   867 jump __label150 always
   868 label __label149
   869 print "\nLast round: [green]"
   870 print elapsed_str
   871 print "[] s"
-    * set __tmp252 null
   872 label __label150
   873 print "\nTotal wait time: [green]"
   874 print wait_time_str
   875 print "[] s"
-    * set __tmp251 null
   876 jump __label148 always
   877 label __label147
-    * set __tmp251 null
   878 label __label148
   879 print "\n[lightgray]Loop: "
   880 print loop_time_ms
 
   891 op notEqual __tmp256 __tmp255 0
   892 jump __label151 equal __tmp256 false
   893 jump __label65 always
-    * set __tmp257 null
   894 jump __label152 always
   895 label __label151
-    * set __tmp257 null
   896 label __label152
   897 sensor __tmp258 DST @dead
   898 op notEqual __tmp259 __tmp258 0
   899 jump __label153 equal __tmp259 false
   900 jump __label65 always
-    * set __tmp260 null
   901 jump __label154 always
   902 label __label153
-    * set __tmp260 null
   903 label __label154
   904 sensor __tmp261 SORTER @dead
   905 op notEqual __tmp262 __tmp261 0
   906 jump __label155 equal __tmp262 false
   907 jump __label65 always
-    * set __tmp263 null
   908 jump __label156 always
   909 label __label155
-    * set __tmp263 null
   910 label __label156
   911 getlink __tmp264 CONTAINER_INDEX
   912 op notEqual __tmp265 CONTAINER __tmp264
 
   917 label __label157
   918 set __tmp266 null
   919 label __label158
-    * set __tmp155 __tmp266
   920 jump __label78 always
   921 label __label77
-    * set __tmp155 null
   922 label __label78
   923 op greaterThan __tmp267 CHANGE 0
   924 jump __label159 equal __tmp267 false
 
   933 label __label161
   934 set __tmp271 null
   935 label __label162
-    * set __tmp268 __tmp271
   936 jump __label160 always
   937 label __label159
-    * set __tmp268 null
   938 label __label160
   939 sensor __tmp273 @unit @controller
   940 op equal __tmp274 __tmp273 @this
 
   966 label __label169
   967 set __tmp284 null
   968 label __label170
-    * set __tmp282 __tmp284
   969 jump __label168 always
   970 label __label167
-    * set __tmp282 null
   971 label __label168
   972 op equal __tmp289 state 1
   973 jump __label173 equal __tmp289 false
 
   989 ucontrol within DROP_X DROP_Y 8 __tmp297
   990 jump __label179 equal __tmp297 false
   991 ucontrol itemDrop DROP_TARGET UNIT_CAPACITY
-    * set __tmp298 null
   992 jump __label180 always
   993 label __label179
-    * set __tmp298 null
   994 label __label180
   995 print "[]\nUnloading previous items: [green]"
   996 set __tmp296 null
   997 label __label178
   998 set __tmp293 __tmp296
   999 label __label176
-    * set __tmp290 __tmp293
  1000 jump __label174 always
  1001 label __label173
-    * set __tmp290 null
  1002 label __label174
  1003 op equal __tmp299 state 2
  1004 jump __label181 equal __tmp299 false
 
  1021 print " sec[] to source: [green]"
  1022 set __tmp302 null
  1023 label __label184
-    * set __tmp300 __tmp302
  1024 jump __label182 always
  1025 label __label181
-    * set __tmp300 null
  1026 label __label182
  1027 op equal __tmp310 state 3
  1028 jump __label185 equal __tmp310 false
 
  1032 op greaterThanEq __tmp314 max_load LOAD_PACK
  1033 jump __label187 equal __tmp314 false
  1034 ucontrol itemTake SRC ITEM max_load
-    * set __tmp315 null
  1035 jump __label188 always
  1036 label __label187
-    * set __tmp315 null
  1037 label __label188
  1038 sensor __tmp316 @unit @totalItems
  1039 op greaterThanEq __tmp317 __tmp316 UNIT_CAPACITY
 
  1051 set remote_wait_time __tmp321
  1052 set __tmp318 remote_wait_time
  1053 label __label190
-    * set __tmp311 __tmp318
  1054 jump __label186 always
  1055 label __label185
-    * set __tmp311 null
  1056 label __label186
  1057 op equal __tmp322 state 4
  1058 jump __label191 equal __tmp322 false
 
  1080 print " sec[] to destination: [green]"
  1081 set __tmp325 null
  1082 label __label194
-    * set __tmp323 __tmp325
  1083 jump __label192 always
  1084 label __label191
-    * set __tmp323 null
  1085 label __label192
  1086 op equal __tmp336 state 5
  1087 jump __label195 equal __tmp336 false
 
  1091 op greaterThanEq __tmp340 max_drop DROP_PACK
  1092 jump __label197 equal __tmp340 false
  1093 ucontrol itemDrop DST max_drop
-    * set __tmp341 null
  1094 jump __label198 always
  1095 label __label197
-    * set __tmp341 null
  1096 label __label198
  1097 sensor __tmp342 @unit @totalItems
  1098 op lessThanEq __tmp343 __tmp342 0
 
  1121 set remote_wait_time __tmp354
  1122 set __tmp344 remote_wait_time
  1123 label __label200
-    * set __tmp337 __tmp344
  1124 jump __label196 always
  1125 label __label195
-    * set __tmp337 null
  1126 label __label196
  1127 sensor __tmp355 @unit @totalItems
  1128 set items __tmp355
 
  1151 label __label203
  1152 set __tmp360 null
  1153 label __label204
-    * set __tmp358 __tmp360
  1154 jump __label202 always
  1155 label __label201
  1156 op add __tmp364 active 1
  1157 set active __tmp364
-    * set __tmp358 active
  1158 label __label202
  1159 print items
  1160 print ITEM_ICON
 
  1164 label __label165
  1165 set __tmp278 null
  1166 label __label166
-    * set __tmp275 __tmp278
  1167 jump __label164 always
  1168 label __label163
-    * set __tmp275 null
  1169 label __label164
  1170 label __label64
  1171 jump __label63 always
 
  1202 label __label213
  1203 jump __label212 always
  1204 label __label214
-    * set __tmp375 null
  1205 jump __label211 always
  1206 label __label210
-    * set __tmp375 null
  1207 label __label211
  1208 control enabled switch1 false
  1209 control enabled switch2 false

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-28 instructions):
 
   210 print " is not a vault!"
   211 printflush message2
   212 set CORE null
-    * set __tmp63 CORE
   213 jump __label41 always
   214 label __label40
-    * set __tmp63 null
   215 label __label41
   216 jump __label36 always
   217 label __label35
 
   769 op greaterThanEq __tmp236 @tick MESSAGE_TIMEOUT
   770 jump __label133 equal __tmp236 false
   771 set MESSAGE ""
-    * set __tmp237 MESSAGE
   772 jump __label134 always
   773 label __label133
-    * set __tmp237 null
   774 label __label134
   775 jump __label122 always
   776 label __label121
 
   808 op greaterThan __tmp242 CHANGE 0
   809 jump __label139 equal __tmp242 false
   810 print "\n[][salmon]Cannot acquire additional units![]"
-    * set __tmp243 "\n[][salmon]Cannot acquire additional units![]"
   811 jump __label140 always
   812 label __label139
-    * set __tmp243 null
   813 label __label140
   814 jump __label136 always
   815 label __label135
 
   834 print "[] (limit [orange]"
   835 print REMOTE_MARGIN
   836 print "[])"
-    * set __tmp249 null
   837 jump __label146 always
   838 label __label145
-    * set __tmp249 null
   839 label __label146
   840 jump __label144 always
   841 label __label143
 
   904 op notEqual __tmp265 CONTAINER __tmp264
   905 jump __label157 equal __tmp265 false
   906 jump __label65 always
-    * set __tmp266 null
   907 jump __label158 always
   908 label __label157
-    * set __tmp266 null
   909 label __label158
   910 jump __label78 always
   911 label __label77
 
   918 op sub __tmp272 CHANGE 1
   919 set CHANGE __tmp272
   920 ucontrol flag 1
-    * set __tmp271 null
   921 jump __label162 always
   922 label __label161
-    * set __tmp271 null
   923 label __label162
   924 jump __label160 always
   925 label __label159
 
   949 label __label171
   950 set __tmp287 null
   951 label __label172
-    * set __tmp284 __tmp287
   952 jump __label170 always
   953 label __label169
-    * set __tmp284 null
   954 label __label170
   955 jump __label168 always
   956 label __label167
 
   961 op equal __tmp292 __tmp291 0
   962 jump __label175 equal __tmp292 false
   963 set state 2
-    * set __tmp293 state
   964 jump __label176 always
   965 label __label175
   966 sensor __tmp294 @unit @firstItem
 
   980 print "[]\nUnloading previous items: [green]"
   981 set __tmp296 null
   982 label __label178
-    * set __tmp293 __tmp296
   983 label __label176
   984 jump __label174 always
   985 label __label173
 
   990 ucontrol within SRC_X SRC_Y 8 __tmp301
   991 jump __label183 equal __tmp301 false
   992 set state 3
-    * set __tmp302 state
   993 jump __label184 always
   994 label __label183
   995 sensor __tmp303 @unit @x
 
  1002 print "[]\n[gold]"
  1003 print __tmp309
  1004 print " sec[] to source: [green]"
-    * set __tmp302 null
  1005 label __label184
  1006 jump __label182 always
  1007 label __label181
 
  1021 op greaterThanEq __tmp317 __tmp316 UNIT_CAPACITY
  1022 jump __label189 equal __tmp317 false
  1023 set state 4
-    * set __tmp318 state
  1024 jump __label190 always
  1025 label __label189
  1026 print "[]\nWaiting at source: [green]"
 
  1030 op mul __tmp320 loop_time_ms SRC_REMOTE_WAIT
  1031 op add __tmp321 remote_wait_time __tmp320
  1032 set remote_wait_time __tmp321
-    * set __tmp318 remote_wait_time
  1033 label __label190
  1034 jump __label186 always
  1035 label __label185
 
  1045 op add __tmp328 transfers 1
  1046 set transfers __tmp328
  1047 set state 5
-    * set __tmp325 state
  1048 jump __label194 always
  1049 label __label193
  1050 sensor __tmp329 @unit @x
 
  1057 print "[]\n[gold]"
  1058 print __tmp335
  1059 print " sec[] to destination: [green]"
-    * set __tmp325 null
  1060 label __label194
  1061 jump __label192 always
  1062 label __label191
 
  1087 print "[]\n[gold]"
  1088 print __tmp351
  1089 print " sec[] to source: [green]"
-    * set __tmp344 null
  1090 jump __label200 always
  1091 label __label199
  1092 print "[]\nWaiting at destination: [green]"
 
  1096 op mul __tmp353 loop_time_ms DST_REMOTE_WAIT
  1097 op add __tmp354 remote_wait_time __tmp353
  1098 set remote_wait_time __tmp354
-    * set __tmp344 remote_wait_time
  1099 label __label200
  1100 jump __label196 always
  1101 label __label195
 
  1122 label __label205
  1123 set __tmp363 null
  1124 label __label206
-    * set __tmp360 __tmp363
  1125 jump __label204 always
  1126 label __label203
-    * set __tmp360 null
  1127 label __label204
  1128 jump __label202 always
  1129 label __label201
 
  1133 print items
  1134 print ITEM_ICON
  1135 ucontrol flag state
-    * set __tmp278 null
  1136 jump __label166 always
  1137 label __label165
-    * set __tmp278 null
  1138 label __label166
  1139 jump __label164 always
  1140 label __label163

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   944 op add __tmp288 CHANGE 1
   945 set CHANGE __tmp288
   946 set state 6
-    * set __tmp287 state
   947 jump __label172 always
   948 label __label171
-    * set __tmp287 null
   949 label __label172
   950 jump __label170 always
   951 label __label169
 
   965 op equal __tmp295 __tmp294 ITEM
   966 jump __label177 equal __tmp295 false
   967 set state 4
-    * set __tmp296 state
   968 jump __label178 always
   969 label __label177
   970 ucontrol approach DROP_X DROP_Y 6
 
   975 label __label179
   976 label __label180
   977 print "[]\nUnloading previous items: [green]"
-    * set __tmp296 null
   978 label __label178
   979 label __label176
   980 jump __label174 always
 
  1113 jump __label205 equal __tmp362 false
  1114 ucontrol move PARK_X PARK_Y
  1115 set state S_UNUSED
-    * set __tmp363 state
  1116 jump __label206 always
  1117 label __label205
-    * set __tmp363 null
  1118 label __label206
  1119 jump __label204 always
  1120 label __label203

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-110 instructions):
 
    14 set CORE_X CORE_Y
    15 set CONTAINER_INDEX CORE_X
    16 set MESSAGE ""
-    * op max __tmp0 LOCAL_LIMIT 20
-    * set EFF_LOCAL_LIMIT __tmp0
-    * op max __tmp1 REMOTE_LIMIT 20
-    * set EFF_REMOTE_LIMIT __tmp1
+   17 op max EFF_LOCAL_LIMIT LOCAL_LIMIT 20
+   18 op max EFF_REMOTE_LIMIT REMOTE_LIMIT 20
    19 set EFF_AUTO_ALLOCATION AUTO_ALLOCATION
    20 set TRIGGER_LEVEL 0.9
-    * op mul __tmp2 -1 HOUSEKEEPING
-    * set S_UNUSED __tmp2
+   21 op mul S_UNUSED -1 HOUSEKEEPING
    22 set LOOPS 1
    23 op mul __tmp3 LOOPS 1000
-    * op div __tmp4 __tmp3 60
-    * set LOOPS_TICKS_TO_MS __tmp4
+   24 op div LOOPS_TICKS_TO_MS __tmp3 60
    25 set INC_OVERALLOCATION OVERALLOCATION_LOW
-    * op add __tmp5 1 OVERALLOCATION_HIGH
-    * set DEC_OVERALLOCATION __tmp5
+   26 op add DEC_OVERALLOCATION 1 OVERALLOCATION_HIGH
    27 set TRIGGER_BOOST 2
    28 set INC_MAX 6
    29 set DEC_MAX -1
 
    39 label __label1
    40 jump __label0 always
    41 label __label2
-    * set __tmp7 @unit
-    * set first_unit __tmp7
+   42 set first_unit @unit
    43 sensor __tmp8 @unit @speed
-    * op div __tmp9 __tmp8 10
-    * set SPEED_SEC __tmp9
+   44 op div SPEED_SEC __tmp8 10
    45 sensor __tmp10 @unit @speed
-    * op div __tmp11 __tmp10 1000
-    * set SPEED __tmp11
+   46 op div SPEED __tmp10 1000
    47 set TARGET 0
    48 set repeat true
    49 label __label3
 
    51 sensor __tmp12 @unit @controller
    52 op equal __tmp13 __tmp12 @this
    53 jump __label6 equal __tmp13 false
-    * sensor __tmp15 @unit @flag
-    * set state __tmp15
+   54 sensor state @unit @flag
    55 op greaterThanEq __tmp16 state 1
    56 op lessThan __tmp17 state 6
    57 op land __tmp18 __tmp16 __tmp17
-    * op add __tmp19 TARGET __tmp18
-    * set TARGET __tmp19
+   58 op add TARGET TARGET __tmp18
    59 jump __label7 always
    60 label __label6
    61 label __label7
 
    63 op notEqual __tmp20 @unit first_unit
    64 sensor __tmp21 first_unit @dead
    65 op strictEqual __tmp22 __tmp21 0
-    * op land __tmp23 __tmp20 __tmp22
-    * set repeat __tmp23
+   66 op land repeat __tmp20 __tmp22
    67 label __label4
    68 jump __label3 always
    69 label __label5
 
    71 set active TARGET
    72 set DEC_LIMIT 0
    73 set INC_LIMIT 0
-    * sensor __tmp24 @unit @itemCapacity
-    * set UNIT_CAPACITY __tmp24
+   74 sensor UNIT_CAPACITY @unit @itemCapacity
    75 set first_unit null
    76 label __label8
    77 jump __label10 equal true false
    78 set CONTAINER null
    79 set DROP_TARGET null
-    * set __tmp25 @links
-    * set n __tmp25
+   80 set n @links
    81 label __label11
    82 op greaterThan __tmp26 n 0
    83 jump __label13 equal __tmp26 false
-    * op sub __tmp27 n 1
-    * set n __tmp27
-    * getlink __tmp28 n
-    * set block __tmp28
+   84 op sub n n 1
+   85 getlink block n
    86 sensor __tmp29 block @type
    87 jump __label16 equal __tmp29 @vault
    88 jump __label16 equal __tmp29 @container
 
   120 sensor __tmp36 @unit @controlled
   121 op equal __tmp37 __tmp36 0
   122 jump __label24 equal __tmp37 false
-    * ulocate building core false @copper CORE_X CORE_Y __tmp40 __tmp39
-    * set CORE __tmp39
+  123 ulocate building core false @copper CORE_X CORE_Y 0 CORE
   124 ucontrol flag S_UNUSED
   125 jump __label25 always
   126 label __label24
 
   139 label __label26
   140 op equal __tmp41 CORE null
   141 jump __label28 equal __tmp41 false
-    * op add __tmp42 99999900 LINK_ID
-    * set QUERY_FLAG __tmp42
+  142 op add QUERY_FLAG 99999900 LINK_ID
   143 set flag QUERY_FLAG
   144 ubind UNIT
   145 label __label29
 
   158 op land __tmp48 __tmp45 __tmp47
   159 jump __label34 equal __tmp48 false
   160 ucontrol stop
-    * sensor __tmp49 @unit @flag
-    * set flag __tmp49
+  161 sensor flag @unit @flag
   162 label __label33
   163 jump __label32 always
   164 label __label34
   165 op notEqual __tmp50 flag QUERY_FLAG
   166 jump __label35 equal __tmp50 false
-    * op idiv __tmp52 flag 100
-    * set position __tmp52
-    * op mod __tmp53 position @mapw
-    * set CORE_X __tmp53
-    * op idiv __tmp54 position @mapw
-    * set CORE_Y __tmp54
+  167 op idiv position flag 100
+  168 op mod CORE_X position @mapw
+  169 op idiv CORE_Y position @mapw
   170 label __label37
   171 sensor __tmp55 @unit @dead
   172 op equal __tmp56 __tmp55 0
 
   178 label __label38
   179 jump __label37 always
   180 label __label39
-    * ucontrol getBlock CORE_X CORE_Y b_type __tmp60 __tmp61
-    * set CORE __tmp60
+  181 ucontrol getBlock CORE_X CORE_Y b_type CORE 0
   182 op notEqual __tmp62 b_type @vault
   183 jump __label40 equal __tmp62 false
   184 print "[salmon]Building at "
 
   201 set DISCARD_UNIT_MAX_ITEMS 0
   202 label __label20
   203 set SORTER sorter1
-    * sensor __tmp64 SORTER @type
-    * set sorter_type __tmp64
+  204 sensor sorter_type SORTER @type
   205 label __label42
   206 op notEqual __tmp65 sorter_type @sorter
   207 op notEqual __tmp66 sorter_type @inverted-sorter
 
   218 label __label46
   219 printflush message1
   220 set SORTER sorter1
-    * sensor __tmp70 SORTER @type
-    * set sorter_type __tmp70
+  221 sensor sorter_type SORTER @type
   222 label __label43
   223 jump __label42 always
   224 label __label44
 
   227 set SHOW_REMOTE_LEVEL true
   228 set SRC CORE
   229 set DST CONTAINER
-    * sensor __tmp73 SRC @itemCapacity
-    * set src_capacity __tmp73
-    * sensor __tmp74 DST @itemCapacity
-    * set dst_capacity __tmp74
+  230 sensor src_capacity SRC @itemCapacity
+  231 sensor dst_capacity DST @itemCapacity
   232 op sub __tmp75 100 EFF_REMOTE_LIMIT
   233 op mul __tmp76 src_capacity __tmp75
-    * op idiv __tmp77 __tmp76 100
-    * set LOAD_LEVEL __tmp77
+  234 op idiv LOAD_LEVEL __tmp76 100
   235 op mul __tmp78 dst_capacity EFF_LOCAL_LIMIT
-    * op idiv __tmp79 __tmp78 100
-    * set DROP_LEVEL __tmp79
+  236 op idiv DROP_LEVEL __tmp78 100
   237 set LOCAL_MARGIN DROP_LEVEL
   238 set REMOTE_MARGIN LOAD_LEVEL
   239 op sub __tmp80 1 TRIGGER_LEVEL
-    * op mul __tmp81 dst_capacity __tmp80
-    * set LOW_LEVEL_TRIGGER __tmp81
+  240 op mul LOW_LEVEL_TRIGGER dst_capacity __tmp80
   241 set HIGH_LEVEL_TRIGGER dst_capacity
   242 set FLOW_CORR_SIGN 1
   243 set SRC_REMOTE_WAIT 1
 
   252 set DIRECTION __tmp83
   253 jump __label48 always
   254 label __label47
-    * op greaterThan __tmp84 LINK_ID 0
-    * set SHOW_REMOTE_LEVEL __tmp84
+  255 op greaterThan SHOW_REMOTE_LEVEL LINK_ID 0
   256 set SRC CONTAINER
   257 set DST CORE
-    * sensor __tmp85 SRC @itemCapacity
-    * set src_capacity __tmp85
-    * sensor __tmp86 DST @itemCapacity
-    * set dst_capacity __tmp86
+  258 sensor src_capacity SRC @itemCapacity
+  259 sensor dst_capacity DST @itemCapacity
   260 op sub __tmp87 100 EFF_LOCAL_LIMIT
   261 op mul __tmp88 src_capacity __tmp87
-    * op idiv __tmp89 __tmp88 100
-    * set LOAD_LEVEL __tmp89
+  262 op idiv LOAD_LEVEL __tmp88 100
   263 op mul __tmp90 dst_capacity EFF_REMOTE_LIMIT
   264 op idiv __tmp91 __tmp90 100
   265 op equal __tmp92 LINK_ID 0
   266 op mul __tmp93 __tmp92 UNIT_CAPACITY
-    * op add __tmp94 __tmp91 __tmp93
-    * set DROP_LEVEL __tmp94
+  267 op add DROP_LEVEL __tmp91 __tmp93
   268 set LOCAL_MARGIN LOAD_LEVEL
   269 set REMOTE_MARGIN DROP_LEVEL
-    * op mul __tmp95 src_capacity TRIGGER_LEVEL
-    * set HIGH_LEVEL_TRIGGER __tmp95
+  270 op mul HIGH_LEVEL_TRIGGER src_capacity TRIGGER_LEVEL
   271 set LOW_LEVEL_TRIGGER 0
   272 set FLOW_CORR_SIGN -1
   273 set SRC_REMOTE_WAIT 0
 
   290 label __label54
   291 set LINK_TXT __tmp99
   292 op sub __tmp100 src_capacity LOAD_LEVEL
-    * op min __tmp101 UNIT_CAPACITY __tmp100
-    * set LOAD_PACK __tmp101
-    * op min __tmp102 UNIT_CAPACITY DROP_LEVEL
-    * set DROP_PACK __tmp102
-    * sensor __tmp103 SRC @x
-    * set SRC_X __tmp103
-    * sensor __tmp104 SRC @y
-    * set SRC_Y __tmp104
-    * sensor __tmp105 DST @x
-    * set DST_X __tmp105
-    * sensor __tmp106 DST @y
-    * set DST_Y __tmp106
+  293 op min LOAD_PACK UNIT_CAPACITY __tmp100
+  294 op min DROP_PACK UNIT_CAPACITY DROP_LEVEL
+  295 sensor SRC_X SRC @x
+  296 sensor SRC_Y SRC @y
+  297 sensor DST_X DST @x
+  298 sensor DST_Y DST @y
   299 op sub __tmp107 DST_X SRC_X
   300 op sub __tmp108 DST_Y SRC_Y
   301 op len __tmp109 __tmp107 __tmp108
   302 op sub __tmp110 __tmp109 6
-    * op sub __tmp111 __tmp110 8
-    * set DISTANCE __tmp111
+  303 op sub DISTANCE __tmp110 8
   304 op max __tmp112 DISTANCE 10
   305 op mul __tmp113 2 __tmp112
-    * op div __tmp114 __tmp113 SPEED
-    * set TRAVEL_TIME __tmp114
+  306 op div TRAVEL_TIME __tmp113 SPEED
   307 op sub __tmp115 DST_X SRC_X
   308 op sub __tmp116 DST_Y SRC_Y
   309 op len __tmp117 __tmp115 __tmp116
   310 op sub __tmp118 __tmp117 6
-    * op div __tmp119 __tmp118 100
-    * set DISTANCE __tmp119
+  311 op div DISTANCE __tmp118 100
   312 op equal __tmp120 DROP_TARGET null
   313 jump __label55 equal __tmp120 false
   314 set DROP_TARGET CORE
 
   322 label __label57
   323 set __tmp124 -15
   324 label __label58
-    * op add __tmp125 CORE_X __tmp124
-    * set PARK_X __tmp125
+  325 op add PARK_X CORE_X __tmp124
   326 sensor __tmp126 CONTAINER @y
   327 op lessThan __tmp127 __tmp126 CORE_Y
   328 jump __label59 equal __tmp127 false
 
   331 label __label59
   332 set __tmp128 -15
   333 label __label60
-    * op add __tmp129 CORE_Y __tmp128
-    * set PARK_Y __tmp129
+  334 op add PARK_Y CORE_Y __tmp128
   335 op equal __tmp130 LINK_ID 0
-    * op mul __tmp131 __tmp130 UNIT_CAPACITY
-    * set PARK_ITEM_LIMIT __tmp131
+  336 op mul PARK_ITEM_LIMIT __tmp130 UNIT_CAPACITY
   337 jump __label56 always
   338 label __label55
-    * sensor __tmp132 DROP_TARGET @x
-    * set DROP_X __tmp132
-    * sensor __tmp133 DROP_TARGET @y
-    * set DROP_Y __tmp133
+  339 sensor DROP_X DROP_TARGET @x
+  340 sensor DROP_Y DROP_TARGET @y
   341 set PARK_X DROP_X
   342 set PARK_Y DROP_Y
   343 set PARK_ITEM_LIMIT 0
   344 label __label56
-    * set __tmp134 @tick
-    * set TRANSFER_START __tmp134
-    * op sub __tmp135 @tick 60
-    * set LOOP_START __tmp135
+  345 set TRANSFER_START @tick
+  346 op sub LOOP_START @tick 60
   347 set LAST_ITEM @mono
-    * op add __tmp136 @tick 600
-    * set MESSAGE_TIMEOUT __tmp136
+  348 op add MESSAGE_TIMEOUT @tick 600
   349 set WAIT_LIMIT 30000
   350 set items_in_transit 0
   351 set items_per_min_unit "--"
 
   395 set EFF_AUTO_ALLOCATION false
   396 set AUTO_ALLOCATION_TXT ""
   397 op add __tmp141 TARGET 1
-    * op min __tmp142 __tmp141 MAX_UNITS
-    * set TARGET __tmp142
+  398 op min TARGET __tmp141 MAX_UNITS
   399 set CORR_SIGN "[]"
   400 set corr_per_min ""
   401 set SPEED_UNIT_TXT "/min"
 
   419 label __label73
   420 set EFF_AUTO_ALLOCATION false
   421 op sub __tmp147 TARGET 1
-    * op max __tmp148 __tmp147 0
-    * set TARGET __tmp148
+  422 op max TARGET __tmp147 0
   423 set CORR_SIGN "[]"
   424 set corr_per_min ""
   425 set SPEED_UNIT_TXT "/min"
 
   437 label __label71
   438 label __label72
   439 sensor __tmp151 first_unit @dead
-    * op strictEqual __tmp152 __tmp151 0
-    * set alive __tmp152
+  440 op strictEqual alive __tmp151 0
   441 op strictEqual __tmp153 @unit first_unit
   442 op lessThanEq __tmp154 alive __tmp153
   443 jump __label77 equal __tmp154 false
 
   449 label __label80
   450 printflush message2
   451 set STATE_LIMIT 6
-    * sensor __tmp158 SORTER @config
-    * set ITEM __tmp158
+  452 sensor ITEM SORTER @config
   453 op notEqual __tmp159 ITEM LAST_ITEM
   454 jump __label81 equal __tmp159 false
   455 label __label83
 
   457 jump __label85 equal __tmp161 false
   458 print "[salmon]No item type selected for transport.[]"
   459 printflush message1
-    * sensor __tmp162 SORTER @config
-    * set ITEM __tmp162
+  460 sensor ITEM SORTER @config
   461 label __label84
   462 jump __label83 always
   463 label __label85
 
   566 label __label87
   567 set ITEM_ICON __tmp163
   568 set STATE_LIMIT 1
-    * sensor __tmp165 CONTAINER ITEM
-    * set last_level __tmp165
+  569 sensor last_level CONTAINER ITEM
   570 set min_level 999999
   571 set max_level 0
   572 jump __label82 always
   573 label __label81
   574 label __label82
-    * sensor __tmp166 CONTAINER ITEM
-    * set container_items __tmp166
-    * op min __tmp167 min_level container_items
-    * set min_level __tmp167
-    * op max __tmp168 max_level container_items
-    * set max_level __tmp168
-    * op sub __tmp169 @tick LOOP_START
-    * set loop_time __tmp169
-    * set __tmp170 @tick
-    * set LOOP_START __tmp170
+  575 sensor container_items CONTAINER ITEM
+  576 op min min_level min_level container_items
+  577 op max max_level max_level container_items
+  578 op sub loop_time @tick LOOP_START
+  579 set LOOP_START @tick
   580 op mul __tmp171 loop_time 100
-    * op idiv __tmp172 __tmp171 6
-    * set loop_time_ms __tmp172
+  581 op idiv loop_time_ms __tmp171 6
   582 op greaterThanEq __tmp173 transfers active
   583 op greaterThan __tmp174 wait_time WAIT_LIMIT
   584 op or __tmp175 __tmp173 __tmp174
   585 jump __label121 equal __tmp175 false
   586 op div __tmp177 wait_time 100
   587 op ceil __tmp178 __tmp177
-    * op div __tmp179 __tmp178 10
-    * set wait_time_str __tmp179
-    * op sub __tmp180 @tick TRANSFER_START
-    * set elapsed_ticks __tmp180
-    * set __tmp181 @tick
-    * set TRANSFER_START __tmp181
-    * op div __tmp182 elapsed_ticks 0.06
-    * set elapsed_ms __tmp182
+  588 op div wait_time_str __tmp178 10
+  589 op sub elapsed_ticks @tick TRANSFER_START
+  590 set TRANSFER_START @tick
+  591 op div elapsed_ms elapsed_ticks 0.06
   592 op idiv __tmp183 elapsed_ms 100
-    * op div __tmp184 __tmp183 10
-    * set elapsed_str __tmp184
-    * op div __tmp185 transferred elapsed_ms
-    * set items_per_ms __tmp185
-    * op idiv __tmp186 items_per_ms 0.000016666666666666667
-    * set items_per_min __tmp186
+  593 op div elapsed_str __tmp183 10
+  594 op div items_per_ms transferred elapsed_ms
+  595 op idiv items_per_min items_per_ms 0.000016666666666666667
   596 set transferred 0
   597 set transfers 0
   598 jump __label123 equal EFF_AUTO_ALLOCATION false
   599 set AUTO_ALLOCATION_TXT "\n=== [gold]Unit auto allocation[] ==="
   600 op mul __tmp188 LOOPS_TICKS_TO_MS loop_time
-    * op add __tmp189 TRAVEL_TIME __tmp188
-    * set turnaround_ms __tmp189
-    * op mul __tmp190 turnaround_ms DEC_OVERALLOCATION
-    * set WAIT_LIMIT __tmp190
+  601 op add turnaround_ms TRAVEL_TIME __tmp188
+  602 op mul WAIT_LIMIT turnaround_ms DEC_OVERALLOCATION
   603 op idiv __tmp191 turnaround_ms 100
-    * op div __tmp192 __tmp191 10
-    * set turnaround_str __tmp192
-    * op div __tmp193 UNIT_CAPACITY turnaround_ms
-    * set items_per_ms_unit __tmp193
+  604 op div turnaround_str __tmp191 10
+  605 op div items_per_ms_unit UNIT_CAPACITY turnaround_ms
   606 op mul __tmp194 items_per_ms_unit 60000
-    * op floor __tmp195 __tmp194
-    * set items_per_min_unit __tmp195
+  607 op floor items_per_min_unit __tmp194
   608 op add __tmp196 min_level max_level
-    * op div __tmp197 __tmp196 2
-    * set this_level __tmp197
+  609 op div this_level __tmp196 2
   610 op sub __tmp198 last_level this_level
-    * op mul __tmp199 __tmp198 FLOW_CORR_SIGN
-    * set corr __tmp199
-    * op div __tmp200 corr elapsed_ms
-    * set corr_per_ms __tmp200
+  611 op mul corr __tmp198 FLOW_CORR_SIGN
+  612 op div corr_per_ms corr elapsed_ms
   613 set last_level this_level
-    * op add __tmp201 items_per_ms corr_per_ms
-    * set total_flow_per_ms __tmp201
+  614 op add total_flow_per_ms items_per_ms corr_per_ms
   615 op mul __tmp202 60000 corr_per_ms
-    * op floor __tmp203 __tmp202
-    * set corr_per_min __tmp203
+  616 op floor corr_per_min __tmp202
   617 set CORR_SIGN "[]([green]"
   618 op greaterThanEq __tmp204 corr_per_min 0
   619 jump __label125 equal __tmp204 false
 
   625 jump __label127 equal alive false
   626 op lessThan __tmp207 min_level LOW_LEVEL_TRIGGER
   627 op greaterThan __tmp208 max_level HIGH_LEVEL_TRIGGER
-    * op or __tmp209 __tmp207 __tmp208
-    * set trigger __tmp209
+  628 op or trigger __tmp207 __tmp208
   629 op equal __tmp210 wait_time 0
   630 op greaterThan __tmp211 trigger remote_wait_time
   631 op or __tmp212 __tmp210 __tmp211
 
   636 set total_flow_1 total_flow_per_ms
   637 op add __tmp215 total_flow_3 total_flow_2
   638 op add __tmp216 __tmp215 total_flow_1
-    * op div __tmp217 __tmp216 3
-    * set total_flow_per_ms __tmp217
+  639 op div total_flow_per_ms __tmp216 3
   640 jump __label132 always
   641 label __label131
   642 label __label132
   643 op div __tmp218 total_flow_per_ms items_per_ms_unit
   644 op add __tmp219 __tmp218 INC_OVERALLOCATION
-    * op ceil __tmp220 __tmp219
-    * set new_target __tmp220
-    * op mul __tmp221 TRIGGER_BOOST trigger
-    * set level_boost __tmp221
+  645 op ceil new_target __tmp219
+  646 op mul level_boost TRIGGER_BOOST trigger
   647 op add __tmp222 new_target level_boost
-    * op min __tmp223 __tmp222 MAX_UNITS
-    * set new_target __tmp223
+  648 op min new_target __tmp222 MAX_UNITS
   649 op sub __tmp224 new_target active
   650 op max __tmp225 __tmp224 0
-    * op min __tmp226 __tmp225 INC_LIMIT
-    * set new_change __tmp226
+  651 op min new_change __tmp225 INC_LIMIT
   652 set INC_LIMIT INC_MAX
   653 op lessThanEq __tmp227 new_change 0
-    * op mul __tmp228 __tmp227 DEC_MAX
-    * set DEC_LIMIT __tmp228
+  654 op mul DEC_LIMIT __tmp227 DEC_MAX
   655 jump __label130 always
   656 label __label129
   657 op idiv __tmp229 wait_time WAIT_LIMIT
   658 op mul __tmp230 -1 __tmp229
-    * op max __tmp231 __tmp230 DEC_LIMIT
-    * set new_change __tmp231
+  659 op max new_change __tmp230 DEC_LIMIT
   660 op greaterThanEq __tmp232 new_change 0
-    * op mul __tmp233 __tmp232 INC_MAX
-    * set INC_LIMIT __tmp233
+  661 op mul INC_LIMIT __tmp232 INC_MAX
   662 set DEC_LIMIT DEC_MAX
   663 label __label130
   664 op add __tmp234 active new_change
-    * op max __tmp235 __tmp234 1
-    * set TARGET __tmp235
+  665 op max TARGET __tmp234 1
   666 jump __label128 always
   667 label __label127
   668 set INC_LIMIT 0
 
   734 label __label141
   735 label __label142
   736 jump __label143 equal SHOW_REMOTE_LEVEL false
-    * sensor __tmp247 CORE ITEM
-    * set remote_level __tmp247
+  737 sensor remote_level CORE ITEM
   738 print "\n[]Remote items: [gold]"
   739 print remote_level
   740 op lessThan __tmp248 EFF_REMOTE_LIMIT 100
 
   780 print loop_time_ms
   781 print " ms"
   782 printflush message1
-    * op sub __tmp253 TARGET active
-    * set CHANGE __tmp253
+  783 op sub CHANGE TARGET active
   784 set active 0
-    * set __tmp254 @unit
-    * set first_unit __tmp254
+  785 set first_unit @unit
   786 set items_in_transit 0
   787 print "Unit status:"
   788 sensor __tmp255 SRC @dead
 
   821 sensor __tmp269 @unit @controlled
   822 op equal __tmp270 __tmp269 0
   823 jump __label161 equal __tmp270 false
-    * op sub __tmp272 CHANGE 1
-    * set CHANGE __tmp272
+  824 op sub CHANGE CHANGE 1
   825 ucontrol flag 1
   826 jump __label162 always
   827 label __label161
 
   832 sensor __tmp273 @unit @controller
   833 op equal __tmp274 __tmp273 @this
   834 jump __label163 equal __tmp274 false
-    * sensor __tmp276 @unit @flag
-    * set state __tmp276
+  835 sensor state @unit @flag
   836 op notEqual __tmp277 state S_UNUSED
   837 jump __label165 equal __tmp277 false
   838 op max __tmp279 state 1
-    * op min __tmp280 __tmp279 STATE_LIMIT
-    * set state __tmp280
+  839 op min state __tmp279 STATE_LIMIT
   840 op lessThan __tmp281 CHANGE 0
   841 jump __label167 equal __tmp281 false
   842 op notEqual __tmp283 state 6
 
   844 sensor __tmp285 @unit @totalItems
   845 op lessThanEq __tmp286 __tmp285 DISCARD_UNIT_MAX_ITEMS
   846 jump __label171 equal __tmp286 false
-    * op add __tmp288 CHANGE 1
-    * set CHANGE __tmp288
+  847 op add CHANGE CHANGE 1
   848 set state 6
   849 jump __label172 always
   850 label __label171
 
   907 op equal __tmp310 state 3
   908 jump __label185 equal __tmp310 false
   909 sensor __tmp312 SRC ITEM
-    * op sub __tmp313 __tmp312 LOAD_LEVEL
-    * set max_load __tmp313
+  910 op sub max_load __tmp312 LOAD_LEVEL
   911 op greaterThanEq __tmp314 max_load LOAD_PACK
   912 jump __label187 equal __tmp314 false
   913 ucontrol itemTake SRC ITEM max_load
 
   922 label __label189
   923 print "[]\nWaiting at source: [green]"
   924 ucontrol approach SRC_X SRC_Y 6
-    * op add __tmp319 wait_time loop_time_ms
-    * set wait_time __tmp319
+  925 op add wait_time wait_time loop_time_ms
   926 op mul __tmp320 loop_time_ms SRC_REMOTE_WAIT
-    * op add __tmp321 remote_wait_time __tmp320
-    * set remote_wait_time __tmp321
+  927 op add remote_wait_time remote_wait_time __tmp320
   928 label __label190
   929 jump __label186 always
   930 label __label185
 
   935 ucontrol within DST_X DST_Y 8 __tmp324
   936 jump __label193 equal __tmp324 false
   937 sensor __tmp326 @unit @totalItems
-    * op add __tmp327 transferred __tmp326
-    * set transferred __tmp327
-    * op add __tmp328 transfers 1
-    * set transfers __tmp328
+  938 op add transferred transferred __tmp326
+  939 op add transfers transfers 1
   940 set state 5
   941 jump __label194 always
   942 label __label193
 
   957 op equal __tmp336 state 5
   958 jump __label195 equal __tmp336 false
   959 sensor __tmp338 DST ITEM
-    * op sub __tmp339 DROP_LEVEL __tmp338
-    * set max_drop __tmp339
+  960 op sub max_drop DROP_LEVEL __tmp338
   961 op greaterThanEq __tmp340 max_drop DROP_PACK
   962 jump __label197 equal __tmp340 false
   963 ucontrol itemDrop DST max_drop
 
   983 label __label199
   984 print "[]\nWaiting at destination: [green]"
   985 ucontrol approach DST_X DST_Y 6
-    * op add __tmp352 wait_time loop_time_ms
-    * set wait_time __tmp352
+  986 op add wait_time wait_time loop_time_ms
   987 op mul __tmp353 loop_time_ms DST_REMOTE_WAIT
-    * op add __tmp354 remote_wait_time __tmp353
-    * set remote_wait_time __tmp354
+  988 op add remote_wait_time remote_wait_time __tmp353
   989 label __label200
   990 jump __label196 always
   991 label __label195
   992 label __label196
-    * sensor __tmp355 @unit @totalItems
-    * set items __tmp355
-    * op add __tmp356 items_in_transit items
-    * set items_in_transit __tmp356
+  993 sensor items @unit @totalItems
+  994 op add items_in_transit items_in_transit items
   995 op equal __tmp357 state 6
   996 jump __label201 equal __tmp357 false
   997 print "[]\nParking: [green]"
 
   999 ucontrol within DROP_X DROP_Y 8 __tmp359
  1000 jump __label203 equal __tmp359 false
  1001 ucontrol itemDrop DROP_TARGET UNIT_CAPACITY
-    * sensor __tmp361 @unit @totalItems
-    * set items __tmp361
+ 1002 sensor items @unit @totalItems
  1003 op lessThanEq __tmp362 items PARK_ITEM_LIMIT
  1004 jump __label205 equal __tmp362 false
  1005 ucontrol move PARK_X PARK_Y
 
  1012 label __label204
  1013 jump __label202 always
  1014 label __label201
-    * op add __tmp364 active 1
-    * set active __tmp364
+ 1015 op add active active 1
  1016 label __label202
  1017 print items
  1018 print ITEM_ICON

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-2 instructions):
 
    74 sensor UNIT_CAPACITY @unit @itemCapacity
    75 set first_unit null
    76 label __label8
-    * jump __label10 equal true false
    77 set CONTAINER null
    78 set DROP_TARGET null
    79 set n @links
 
   375 set AUTO_ALLOCATION_TXT ""
   376 label __label62
   377 label __label63
-    * jump __label65 equal true false
   378 ubind UNIT
   379 label __label66
   380 op equal __tmp138 @unit null

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-17 instructions):
 
    84 getlink block n
    85 sensor __tmp29 block @type
    86 jump __label16 equal __tmp29 @vault
-    * jump __label16 equal __tmp29 @container
-    * jump __label15 always
+   87 jump __label15 notEqual __tmp29 @container
    88 label __label16
    89 set DROP_TARGET CONTAINER
    90 set CONTAINER block
 
   461 set LAST_ITEM ITEM
   462 label __label86
   463 set __fn0_itemType ITEM
-    * jump __label90 equal __fn0_itemType @blast-compound
-    * jump __label89 always
+  464 jump __label89 notEqual __fn0_itemType @blast-compound
   465 label __label90
   466 set __tmp164 "[]"
   467 jump __label88 always
   468 label __label89
-    * jump __label92 equal __fn0_itemType @coal
-    * jump __label91 always
+  469 jump __label91 notEqual __fn0_itemType @coal
   470 label __label92
   471 set __tmp164 "[]"
   472 jump __label88 always
   473 label __label91
-    * jump __label94 equal __fn0_itemType @copper
-    * jump __label93 always
+  474 jump __label93 notEqual __fn0_itemType @copper
   475 label __label94
   476 set __tmp164 "[]"
   477 jump __label88 always
   478 label __label93
-    * jump __label96 equal __fn0_itemType @graphite
-    * jump __label95 always
+  479 jump __label95 notEqual __fn0_itemType @graphite
   480 label __label96
   481 set __tmp164 "[]"
   482 jump __label88 always
   483 label __label95
-    * jump __label98 equal __fn0_itemType @lead
-    * jump __label97 always
+  484 jump __label97 notEqual __fn0_itemType @lead
   485 label __label98
   486 set __tmp164 "[]"
   487 jump __label88 always
   488 label __label97
-    * jump __label100 equal __fn0_itemType @metaglass
-    * jump __label99 always
+  489 jump __label99 notEqual __fn0_itemType @metaglass
   490 label __label100
   491 set __tmp164 "[]"
   492 jump __label88 always
   493 label __label99
-    * jump __label102 equal __fn0_itemType @phase-fabric
-    * jump __label101 always
+  494 jump __label101 notEqual __fn0_itemType @phase-fabric
   495 label __label102
   496 set __tmp164 "[]"
   497 jump __label88 always
   498 label __label101
-    * jump __label104 equal __fn0_itemType @plastanium
-    * jump __label103 always
+  499 jump __label103 notEqual __fn0_itemType @plastanium
   500 label __label104
   501 set __tmp164 "[]"
   502 jump __label88 always
   503 label __label103
-    * jump __label106 equal __fn0_itemType @pyratite
-    * jump __label105 always
+  504 jump __label105 notEqual __fn0_itemType @pyratite
   505 label __label106
   506 set __tmp164 "[]"
   507 jump __label88 always
   508 label __label105
-    * jump __label108 equal __fn0_itemType @sand
-    * jump __label107 always
+  509 jump __label107 notEqual __fn0_itemType @sand
   510 label __label108
   511 set __tmp164 "[]"
   512 jump __label88 always
   513 label __label107
-    * jump __label110 equal __fn0_itemType @scrap
-    * jump __label109 always
+  514 jump __label109 notEqual __fn0_itemType @scrap
   515 label __label110
   516 set __tmp164 "[]"
   517 jump __label88 always
   518 label __label109
-    * jump __label112 equal __fn0_itemType @silicon
-    * jump __label111 always
+  519 jump __label111 notEqual __fn0_itemType @silicon
   520 label __label112
   521 set __tmp164 "[]"
   522 jump __label88 always
   523 label __label111
-    * jump __label114 equal __fn0_itemType @spore-pod
-    * jump __label113 always
+  524 jump __label113 notEqual __fn0_itemType @spore-pod
   525 label __label114
   526 set __tmp164 "[]"
   527 jump __label88 always
   528 label __label113
-    * jump __label116 equal __fn0_itemType @surge-alloy
-    * jump __label115 always
+  529 jump __label115 notEqual __fn0_itemType @surge-alloy
   530 label __label116
   531 set __tmp164 "[]"
   532 jump __label88 always
   533 label __label115
-    * jump __label118 equal __fn0_itemType @thorium
-    * jump __label117 always
+  534 jump __label117 notEqual __fn0_itemType @thorium
   535 label __label118
   536 set __tmp164 "[]"
   537 jump __label88 always
   538 label __label117
-    * jump __label120 equal __fn0_itemType @titanium
-    * jump __label119 always
+  539 jump __label119 notEqual __fn0_itemType @titanium
   540 label __label120
   541 set __tmp164 "[]"
   542 jump __label88 always

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-60 instructions):
 
    29 set DEC_MAX -1
    30 ubind UNIT
    31 label __label0
-    * op equal __tmp6 @unit null
-    * jump __label2 equal __tmp6 false
+   32 jump __label2 notEqual @unit null
    33 print "[salmon]No unit of type "
    34 print UNIT
    35 print " found."
 
    48 label __label3
    49 jump __label5 equal repeat false
    50 sensor __tmp12 @unit @controller
-    * op equal __tmp13 __tmp12 @this
-    * jump __label6 equal __tmp13 false
+   51 jump __label6 notEqual __tmp12 @this
    52 sensor state @unit @flag
    53 op greaterThanEq __tmp16 state 1
    54 op lessThan __tmp17 state 6
 
    76 set DROP_TARGET null
    77 set n @links
    78 label __label11
-    * op greaterThan __tmp26 n 0
-    * jump __label13 equal __tmp26 false
+   79 jump __label13 lessThanEq n 0
    80 op sub n n 1
    81 getlink block n
    82 sensor __tmp29 block @type
 
    92 label __label12
    93 jump __label11 always
    94 label __label13
-    * op equal __tmp31 CONTAINER null
-    * jump __label17 equal __tmp31 false
+   95 jump __label17 notEqual CONTAINER null
    96 print "[salmon]No vault or container."
    97 printflush message1
    98 jump __label18 always
 
   103 jump __label8 always
   104 label __label10
   105 set CORE null
-    * op equal __tmp33 LINK_ID 0
-    * jump __label19 equal __tmp33 false
+  106 jump __label19 notEqual LINK_ID 0
   107 label __label21
-    * op equal __tmp35 CORE null
-    * jump __label23 equal __tmp35 false
+  108 jump __label23 notEqual CORE null
   109 print "[green]Locating core..."
   110 printflush message1
   111 ubind UNIT
   112 sensor __tmp36 @unit @controlled
-    * op equal __tmp37 __tmp36 0
-    * jump __label24 equal __tmp37 false
+  113 jump __label24 notEqual __tmp36 0
   114 ulocate building core false @copper CORE_X CORE_Y 0 CORE
   115 ucontrol flag S_UNUSED
   116 jump __label25 always
 
   128 print "..."
   129 printflush message1
   130 label __label26
-    * op equal __tmp41 CORE null
-    * jump __label28 equal __tmp41 false
+  131 jump __label28 notEqual CORE null
   132 op add QUERY_FLAG 99999900 LINK_ID
   133 set flag QUERY_FLAG
   134 ubind UNIT
   135 label __label29
   136 sensor __tmp43 @unit @controlled
-    * op notEqual __tmp44 __tmp43 0
-    * jump __label31 equal __tmp44 false
+  137 jump __label31 equal __tmp43 0
   138 ubind UNIT
   139 label __label30
   140 jump __label29 always
 
   151 label __label33
   152 jump __label32 always
   153 label __label34
-    * op notEqual __tmp50 flag QUERY_FLAG
-    * jump __label35 equal __tmp50 false
+  154 jump __label35 equal flag QUERY_FLAG
   155 op idiv position flag 100
   156 op mod CORE_X position @mapw
   157 op idiv CORE_Y position @mapw
 
   167 jump __label37 always
   168 label __label39
   169 ucontrol getBlock CORE_X CORE_Y b_type CORE 0
-    * op notEqual __tmp62 b_type @vault
-    * jump __label40 equal __tmp62 false
+  170 jump __label40 equal b_type @vault
   171 print "[salmon]Building at "
   172 print CORE_X
   173 print ", "
 
   196 jump __label44 equal __tmp67 false
   197 print "[salmon]Block sorter1 is neither a sorter, nor an inverted sorter."
   198 print "\n"
-    * op notEqual __tmp68 SORTER null
-    * jump __label45 equal __tmp68 false
+  199 jump __label45 equal SORTER null
   200 print "Block found: "
   201 print SORTER
   202 jump __label46 always
 
   208 label __label43
   209 jump __label42 always
   210 label __label44
-    * op equal __tmp71 sorter_type @sorter
-    * jump __label47 equal __tmp71 false
+  211 jump __label47 notEqual sorter_type @sorter
   212 set SHOW_REMOTE_LEVEL true
   213 set SRC CORE
   214 set DST CONTAINER
 
   227 set FLOW_CORR_SIGN 1
   228 set SRC_REMOTE_WAIT 1
   229 set DST_REMOTE_WAIT 0
-    * op equal __tmp82 LINK_ID 0
-    * jump __label49 equal __tmp82 false
+  230 jump __label49 notEqual LINK_ID 0
   231 set __tmp83 " from core"
   232 jump __label50 always
   233 label __label49
 
   256 set FLOW_CORR_SIGN -1
   257 set SRC_REMOTE_WAIT 0
   258 set DST_REMOTE_WAIT 1
-    * op equal __tmp96 LINK_ID 0
-    * jump __label51 equal __tmp96 false
+  259 jump __label51 notEqual LINK_ID 0
   260 set __tmp97 " to core"
   261 jump __label52 always
   262 label __label51
 
   264 label __label52
   265 set DIRECTION __tmp97
   266 label __label48
-    * op equal __tmp98 LINK_ID 0
-    * jump __label53 equal __tmp98 false
+  267 jump __label53 notEqual LINK_ID 0
   268 set __tmp99 ""
   269 jump __label54 always
   270 label __label53
 
   291 op len __tmp117 __tmp115 __tmp116
   292 op sub __tmp118 __tmp117 6
   293 op div DISTANCE __tmp118 100
-    * op equal __tmp120 DROP_TARGET null
-    * jump __label55 equal __tmp120 false
+  294 jump __label55 notEqual DROP_TARGET null
   295 set DROP_TARGET CORE
   296 set DROP_X CORE_X
   297 set DROP_Y CORE_Y
   298 sensor __tmp122 CONTAINER @x
-    * op lessThan __tmp123 __tmp122 CORE_X
-    * jump __label57 equal __tmp123 false
+  299 jump __label57 greaterThanEq __tmp122 CORE_X
   300 set __tmp124 15
   301 jump __label58 always
   302 label __label57
 
   304 label __label58
   305 op add PARK_X CORE_X __tmp124
   306 sensor __tmp126 CONTAINER @y
-    * op lessThan __tmp127 __tmp126 CORE_Y
-    * jump __label59 equal __tmp127 false
+  307 jump __label59 greaterThanEq __tmp126 CORE_Y
   308 set __tmp128 15
   309 jump __label60 always
   310 label __label59
 
   357 label __label63
   358 ubind UNIT
   359 label __label66
-    * op equal __tmp138 @unit null
-    * jump __label68 equal __tmp138 false
+  360 jump __label68 notEqual @unit null
   361 print "No unit of type "
   362 print UNIT
   363 print " found."
 
   383 sensor __tmp143 switch2 @enabled
   384 jump __label71 equal __tmp143 false
   385 control enabled switch2 false
-    * op lessThan __tmp145 TARGET 1
-    * jump __label73 equal __tmp145 false
+  386 jump __label73 greaterThanEq TARGET 1
   387 set EFF_AUTO_ALLOCATION true
   388 set TARGET 1
   389 set DEC_LIMIT 0
 
   399 set CORR_SIGN "[]"
   400 set corr_per_min ""
   401 set SPEED_UNIT_TXT "/min"
-    * op equal __tmp149 TARGET 0
-    * jump __label75 equal __tmp149 false
+  402 jump __label75 notEqual TARGET 0
   403 set __tmp150 "\n=== [salmon]Transport deactivated[] ==="
   404 jump __label76 always
   405 label __label75
 
   414 sensor __tmp151 first_unit @dead
   415 op strictEqual alive __tmp151 0
   416 op strictEqual __tmp153 @unit first_unit
-    * op lessThanEq __tmp154 alive __tmp153
-    * jump __label77 equal __tmp154 false
-    * op equal __tmp156 active 0
-    * jump __label79 equal __tmp156 false
+  417 jump __label77 greaterThan alive __tmp153
+  418 jump __label79 notEqual active 0
   419 print "\n[salmon]No active units.[]"
   420 jump __label80 always
   421 label __label79
 
   423 printflush message2
   424 set STATE_LIMIT 6
   425 sensor ITEM SORTER @config
-    * op notEqual __tmp159 ITEM LAST_ITEM
-    * jump __label81 equal __tmp159 false
+  426 jump __label81 equal ITEM LAST_ITEM
   427 label __label83
-    * op equal __tmp161 ITEM null
-    * jump __label85 equal __tmp161 false
+  428 jump __label85 notEqual ITEM null
   429 print "[salmon]No item type selected for transport.[]"
   430 printflush message1
   431 sensor ITEM SORTER @config
 
   570 op mul __tmp202 60000 corr_per_ms
   571 op floor corr_per_min __tmp202
   572 set CORR_SIGN "[]([green]"
-    * op greaterThanEq __tmp204 corr_per_min 0
-    * jump __label125 equal __tmp204 false
+  573 jump __label125 lessThan corr_per_min 0
   574 set CORR_SIGN "[]([green]+"
   575 jump __label126 always
   576 label __label125
 
   629 label __label124
   630 set wait_time 0
   631 set remote_wait_time 0
-    * op greaterThanEq __tmp236 @tick MESSAGE_TIMEOUT
-    * jump __label133 equal __tmp236 false
+  632 jump __label133 lessThan @tick MESSAGE_TIMEOUT
   633 set MESSAGE ""
   634 jump __label134 always
   635 label __label133
 
   644 print DIRECTION
   645 print LINK_TXT
   646 print AUTO_ALLOCATION_TXT
-    * op greaterThan __tmp238 TARGET 0
-    * jump __label135 equal __tmp238 false
-    * op greaterThanEq __tmp240 active TARGET
-    * jump __label137 equal __tmp240 false
+  647 jump __label135 lessThanEq TARGET 0
+  648 jump __label137 lessThan active TARGET
   649 print "\nUsing [green]"
   650 print active
   651 print "/"
 
   665 print ") [gold]+"
   666 print items_in_transit
   667 label __label138
-    * op greaterThan __tmp242 CHANGE 0
-    * jump __label139 equal __tmp242 false
+  668 jump __label139 lessThanEq CHANGE 0
   669 print "\n[][salmon]Cannot acquire additional units![]"
   670 jump __label140 always
   671 label __label139
 
   675 label __label136
   676 print "\n[]Local items: [gold]"
   677 print container_items
-    * op lessThan __tmp244 EFF_LOCAL_LIMIT 100
-    * jump __label141 equal __tmp244 false
+  678 jump __label141 greaterThanEq EFF_LOCAL_LIMIT 100
   679 print "[] (limit [orange]"
   680 print LOCAL_MARGIN
   681 print "[])"
 
   686 sensor remote_level CORE ITEM
   687 print "\n[]Remote items: [gold]"
   688 print remote_level
-    * op lessThan __tmp248 EFF_REMOTE_LIMIT 100
-    * jump __label145 equal __tmp248 false
+  689 jump __label145 greaterThanEq EFF_REMOTE_LIMIT 100
   690 print "[] (limit [orange]"
   691 print REMOTE_MARGIN
   692 print "[])"
 
   696 jump __label144 always
   697 label __label143
   698 label __label144
-    * op greaterThan __tmp250 TARGET 0
-    * jump __label147 equal __tmp250 false
+  699 jump __label147 lessThanEq TARGET 0
   700 print "\n[]Speed: [green]"
   701 print items_per_min
   702 print CORR_SIGN
 
   733 set items_in_transit 0
   734 print "Unit status:"
   735 sensor __tmp255 SRC @dead
-    * op notEqual __tmp256 __tmp255 0
-    * jump __label151 equal __tmp256 false
+  736 jump __label151 equal __tmp255 0
   737 jump __label65 always
   738 jump __label152 always
   739 label __label151
   740 label __label152
   741 sensor __tmp258 DST @dead
-    * op notEqual __tmp259 __tmp258 0
-    * jump __label153 equal __tmp259 false
+  742 jump __label153 equal __tmp258 0
   743 jump __label65 always
   744 jump __label154 always
   745 label __label153
   746 label __label154
   747 sensor __tmp261 SORTER @dead
-    * op notEqual __tmp262 __tmp261 0
-    * jump __label155 equal __tmp262 false
+  748 jump __label155 equal __tmp261 0
   749 jump __label65 always
   750 jump __label156 always
   751 label __label155
   752 label __label156
   753 getlink __tmp264 CONTAINER_INDEX
-    * op notEqual __tmp265 CONTAINER __tmp264
-    * jump __label157 equal __tmp265 false
+  754 jump __label157 equal CONTAINER __tmp264
   755 jump __label65 always
   756 jump __label158 always
   757 label __label157
 
   759 jump __label78 always
   760 label __label77
   761 label __label78
-    * op greaterThan __tmp267 CHANGE 0
-    * jump __label159 equal __tmp267 false
+  762 jump __label159 lessThanEq CHANGE 0
   763 sensor __tmp269 @unit @controlled
-    * op equal __tmp270 __tmp269 0
-    * jump __label161 equal __tmp270 false
+  764 jump __label161 notEqual __tmp269 0
   765 op sub CHANGE CHANGE 1
   766 ucontrol flag 1
   767 jump __label162 always
 
   771 label __label159
   772 label __label160
   773 sensor __tmp273 @unit @controller
-    * op equal __tmp274 __tmp273 @this
-    * jump __label163 equal __tmp274 false
+  774 jump __label163 notEqual __tmp273 @this
   775 sensor state @unit @flag
-    * op notEqual __tmp277 state S_UNUSED
-    * jump __label165 equal __tmp277 false
+  776 jump __label165 equal state S_UNUSED
   777 op max __tmp279 state 1
   778 op min state __tmp279 STATE_LIMIT
-    * op lessThan __tmp281 CHANGE 0
-    * jump __label167 equal __tmp281 false
-    * op notEqual __tmp283 state 6
-    * jump __label169 equal __tmp283 false
+  779 jump __label167 greaterThanEq CHANGE 0
+  780 jump __label169 equal state 6
   781 sensor __tmp285 @unit @totalItems
-    * op lessThanEq __tmp286 __tmp285 DISCARD_UNIT_MAX_ITEMS
-    * jump __label171 equal __tmp286 false
+  782 jump __label171 greaterThan __tmp285 DISCARD_UNIT_MAX_ITEMS
   783 op add CHANGE CHANGE 1
   784 set state 6
   785 jump __label172 always
 
   791 jump __label168 always
   792 label __label167
   793 label __label168
-    * op equal __tmp289 state 1
-    * jump __label173 equal __tmp289 false
+  794 jump __label173 notEqual state 1
   795 sensor __tmp291 @unit @totalItems
-    * op equal __tmp292 __tmp291 0
-    * jump __label175 equal __tmp292 false
+  796 jump __label175 notEqual __tmp291 0
   797 set state 2
   798 jump __label176 always
   799 label __label175
   800 sensor __tmp294 @unit @firstItem
-    * op equal __tmp295 __tmp294 ITEM
-    * jump __label177 equal __tmp295 false
+  801 jump __label177 notEqual __tmp294 ITEM
   802 set state 4
   803 jump __label178 always
   804 label __label177
 
   815 jump __label174 always
   816 label __label173
   817 label __label174
-    * op equal __tmp299 state 2
-    * jump __label181 equal __tmp299 false
+  818 jump __label181 notEqual state 2
   819 ucontrol approach SRC_X SRC_Y 6
   820 ucontrol within SRC_X SRC_Y 8 __tmp301
   821 jump __label183 equal __tmp301 false
 
   836 jump __label182 always
   837 label __label181
   838 label __label182
-    * op equal __tmp310 state 3
-    * jump __label185 equal __tmp310 false
+  839 jump __label185 notEqual state 3
   840 sensor __tmp312 SRC ITEM
   841 op sub max_load __tmp312 LOAD_LEVEL
-    * op greaterThanEq __tmp314 max_load LOAD_PACK
-    * jump __label187 equal __tmp314 false
+  842 jump __label187 lessThan max_load LOAD_PACK
   843 ucontrol itemTake SRC ITEM max_load
   844 jump __label188 always
   845 label __label187
   846 label __label188
   847 sensor __tmp316 @unit @totalItems
-    * op greaterThanEq __tmp317 __tmp316 UNIT_CAPACITY
-    * jump __label189 equal __tmp317 false
+  848 jump __label189 lessThan __tmp316 UNIT_CAPACITY
   849 set state 4
   850 jump __label190 always
   851 label __label189
 
   858 jump __label186 always
   859 label __label185
   860 label __label186
-    * op equal __tmp322 state 4
-    * jump __label191 equal __tmp322 false
+  861 jump __label191 notEqual state 4
   862 ucontrol approach DST_X DST_Y 6
   863 ucontrol within DST_X DST_Y 8 __tmp324
   864 jump __label193 equal __tmp324 false
 
   882 jump __label192 always
   883 label __label191
   884 label __label192
-    * op equal __tmp336 state 5
-    * jump __label195 equal __tmp336 false
+  885 jump __label195 notEqual state 5
   886 sensor __tmp338 DST ITEM
   887 op sub max_drop DROP_LEVEL __tmp338
-    * op greaterThanEq __tmp340 max_drop DROP_PACK
-    * jump __label197 equal __tmp340 false
+  888 jump __label197 lessThan max_drop DROP_PACK
   889 ucontrol itemDrop DST max_drop
   890 jump __label198 always
   891 label __label197
   892 label __label198
   893 sensor __tmp342 @unit @totalItems
-    * op lessThanEq __tmp343 __tmp342 0
-    * jump __label199 equal __tmp343 false
+  894 jump __label199 greaterThan __tmp342 0
   895 set state 2
   896 ucontrol approach SRC_X SRC_Y 6
   897 sensor __tmp345 @unit @x
 
   917 label __label196
   918 sensor items @unit @totalItems
   919 op add items_in_transit items_in_transit items
-    * op equal __tmp357 state 6
-    * jump __label201 equal __tmp357 false
+  920 jump __label201 notEqual state 6
   921 print "[]\nParking: [green]"
   922 ucontrol approach DROP_X DROP_Y 6
   923 ucontrol within DROP_X DROP_Y 8 __tmp359
   924 jump __label203 equal __tmp359 false
   925 ucontrol itemDrop DROP_TARGET UNIT_CAPACITY
   926 sensor items @unit @totalItems
-    * op lessThanEq __tmp362 items PARK_ITEM_LIMIT
-    * jump __label205 equal __tmp362 false
+  927 jump __label205 greaterThan items PARK_ITEM_LIMIT
   928 ucontrol move PARK_X PARK_Y
   929 set state S_UNUSED
   930 jump __label206 always
 
   952 label __label207
   953 sensor __tmp365 SORTER @dead
   954 op strictEqual __tmp366 __tmp365 0
-    * op equal __tmp367 __tmp366 false
-    * jump __label209 equal __tmp367 false
+  955 jump __label209 notEqual __tmp366 false
   956 print "[salmon]sorter1 is missing![]\nPlease place and link sorter or inverted sorter to the processor."
   957 printflush message1
   958 printflush message2
 
   972 sensor __tmp376 switch1 @enabled
   973 sensor __tmp377 switch2 @enabled
   974 op or __tmp378 __tmp376 __tmp377
-    * op equal __tmp379 __tmp378 false
-    * jump __label214 equal __tmp379 false
+  975 jump __label214 notEqual __tmp378 false
   976 print "[salmon]Local or remote container became invalid.\nPlease fix and press any button to reinitialize."
   977 printflush message1
   978 printflush message2

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-44 instructions):
 
    54 op lessThan __tmp17 state 6
    55 op land __tmp18 __tmp16 __tmp17
    56 op add TARGET TARGET __tmp18
-    * jump __label7 always
    57 label __label6
    58 label __label7
    59 ubind UNIT
 
    85 set DROP_TARGET CONTAINER
    86 set CONTAINER block
    87 set CONTAINER_INDEX n
-    * jump __label14 always
    88 label __label15
    89 label __label14
    90 label __label12
 
   111 jump __label24 notEqual __tmp36 0
   112 ulocate building core false @copper CORE_X CORE_Y 0 CORE
   113 ucontrol flag S_UNUSED
-    * jump __label25 always
   114 label __label24
   115 label __label25
   116 label __label22
 
   172 print " is not a vault!"
   173 printflush message2
   174 set CORE null
-    * jump __label41 always
   175 label __label40
   176 label __label41
-    * jump __label36 always
   177 label __label35
   178 label __label36
   179 ucontrol flag S_UNUSED
 
   194 jump __label45 equal SORTER null
   195 print "Block found: "
   196 print SORTER
-    * jump __label46 always
   197 label __label45
   198 label __label46
   199 printflush message1
 
   371 set corr_per_min ""
   372 set SPEED_UNIT_TXT "/min"
   373 set WAIT_LIMIT 30000
-    * jump __label70 always
   374 label __label69
   375 label __label70
   376 sensor __tmp143 switch2 @enabled
 
   401 set AUTO_ALLOCATION_TXT __tmp150
   402 label __label74
   403 set WAIT_LIMIT 30000
-    * jump __label72 always
   404 label __label71
   405 label __label72
   406 sensor __tmp151 first_unit @dead
 
   409 jump __label77 greaterThan alive __tmp153
   410 jump __label79 notEqual active 0
   411 print "\n[salmon]No active units.[]"
-    * jump __label80 always
   412 label __label79
   413 label __label80
   414 printflush message2
 
   515 sensor last_level CONTAINER ITEM
   516 set min_level 999999
   517 set max_level 0
-    * jump __label82 always
   518 label __label81
   519 label __label82
   520 sensor container_items CONTAINER ITEM
 
   562 set CORR_SIGN "[]([green]"
   563 jump __label125 lessThan corr_per_min 0
   564 set CORR_SIGN "[]([green]+"
-    * jump __label126 always
   565 label __label125
   566 label __label126
   567 set SPEED_UNIT_TXT "[])/min"
 
   580 op add __tmp215 total_flow_3 total_flow_2
   581 op add __tmp216 __tmp215 total_flow_1
   582 op div total_flow_per_ms __tmp216 3
-    * jump __label132 always
   583 label __label131
   584 label __label132
   585 op div __tmp218 total_flow_per_ms items_per_ms_unit
 
   612 label __label128
   613 set min_level 999999
   614 set max_level 0
-    * jump __label124 always
   615 label __label123
   616 label __label124
   617 set wait_time 0
   618 set remote_wait_time 0
   619 jump __label133 lessThan @tick MESSAGE_TIMEOUT
   620 set MESSAGE ""
-    * jump __label134 always
   621 label __label133
   622 label __label134
-    * jump __label122 always
   623 label __label121
   624 label __label122
   625 print MESSAGE
 
   652 label __label138
   653 jump __label139 lessThanEq CHANGE 0
   654 print "\n[][salmon]Cannot acquire additional units![]"
-    * jump __label140 always
   655 label __label139
   656 label __label140
-    * jump __label136 always
   657 label __label135
   658 label __label136
   659 print "\n[]Local items: [gold]"
 
   662 print "[] (limit [orange]"
   663 print LOCAL_MARGIN
   664 print "[])"
-    * jump __label142 always
   665 label __label141
   666 label __label142
   667 jump __label143 equal SHOW_REMOTE_LEVEL false
 
   672 print "[] (limit [orange]"
   673 print REMOTE_MARGIN
   674 print "[])"
-    * jump __label146 always
   675 label __label145
   676 label __label146
-    * jump __label144 always
   677 label __label143
   678 label __label144
   679 jump __label147 lessThanEq TARGET 0
 
   700 print "\nTotal wait time: [green]"
   701 print wait_time_str
   702 print "[] s"
-    * jump __label148 always
   703 label __label147
   704 label __label148
   705 print "\n[lightgray]Loop: "
 
   714 sensor __tmp255 SRC @dead
   715 jump __label151 equal __tmp255 0
   716 jump __label65 always
-    * jump __label152 always
   717 label __label151
   718 label __label152
   719 sensor __tmp258 DST @dead
   720 jump __label153 equal __tmp258 0
   721 jump __label65 always
-    * jump __label154 always
   722 label __label153
   723 label __label154
   724 sensor __tmp261 SORTER @dead
   725 jump __label155 equal __tmp261 0
   726 jump __label65 always
-    * jump __label156 always
   727 label __label155
   728 label __label156
   729 getlink __tmp264 CONTAINER_INDEX
   730 jump __label157 equal CONTAINER __tmp264
   731 jump __label65 always
-    * jump __label158 always
   732 label __label157
   733 label __label158
-    * jump __label78 always
   734 label __label77
   735 label __label78
   736 jump __label159 lessThanEq CHANGE 0
 
   738 jump __label161 notEqual __tmp269 0
   739 op sub CHANGE CHANGE 1
   740 ucontrol flag 1
-    * jump __label162 always
   741 label __label161
   742 label __label162
-    * jump __label160 always
   743 label __label159
   744 label __label160
   745 sensor __tmp273 @unit @controller
 
   754 jump __label171 greaterThan __tmp285 DISCARD_UNIT_MAX_ITEMS
   755 op add CHANGE CHANGE 1
   756 set state 6
-    * jump __label172 always
   757 label __label171
   758 label __label172
-    * jump __label170 always
   759 label __label169
   760 label __label170
-    * jump __label168 always
   761 label __label167
   762 label __label168
   763 jump __label173 notEqual state 1
 
   775 ucontrol within DROP_X DROP_Y 8 __tmp297
   776 jump __label179 equal __tmp297 false
   777 ucontrol itemDrop DROP_TARGET UNIT_CAPACITY
-    * jump __label180 always
   778 label __label179
   779 label __label180
   780 print "[]\nUnloading previous items: [green]"
   781 label __label178
   782 label __label176
-    * jump __label174 always
   783 label __label173
   784 label __label174
   785 jump __label181 notEqual state 2
 
   800 print __tmp309
   801 print " sec[] to source: [green]"
   802 label __label184
-    * jump __label182 always
   803 label __label181
   804 label __label182
   805 jump __label185 notEqual state 3
 
   807 op sub max_load __tmp312 LOAD_LEVEL
   808 jump __label187 lessThan max_load LOAD_PACK
   809 ucontrol itemTake SRC ITEM max_load
-    * jump __label188 always
   810 label __label187
   811 label __label188
   812 sensor __tmp316 @unit @totalItems
 
   820 op mul __tmp320 loop_time_ms SRC_REMOTE_WAIT
   821 op add remote_wait_time remote_wait_time __tmp320
   822 label __label190
-    * jump __label186 always
   823 label __label185
   824 label __label186
   825 jump __label191 notEqual state 4
 
   843 print __tmp335
   844 print " sec[] to destination: [green]"
   845 label __label194
-    * jump __label192 always
   846 label __label191
   847 label __label192
   848 jump __label195 notEqual state 5
 
   850 op sub max_drop DROP_LEVEL __tmp338
   851 jump __label197 lessThan max_drop DROP_PACK
   852 ucontrol itemDrop DST max_drop
-    * jump __label198 always
   853 label __label197
   854 label __label198
   855 sensor __tmp342 @unit @totalItems
 
   874 op mul __tmp353 loop_time_ms DST_REMOTE_WAIT
   875 op add remote_wait_time remote_wait_time __tmp353
   876 label __label200
-    * jump __label196 always
   877 label __label195
   878 label __label196
   879 sensor items @unit @totalItems
 
   888 jump __label205 greaterThan items PARK_ITEM_LIMIT
   889 ucontrol move PARK_X PARK_Y
   890 set state S_UNUSED
-    * jump __label206 always
   891 label __label205
   892 label __label206
-    * jump __label204 always
   893 label __label203
   894 label __label204
   895 jump __label202 always
 
   899 print items
   900 print ITEM_ICON
   901 ucontrol flag state
-    * jump __label166 always
   902 label __label165
   903 label __label166
-    * jump __label164 always
   904 label __label163
   905 label __label164
   906 label __label64
 
   936 label __label213
   937 jump __label212 always
   938 label __label214
-    * jump __label211 always
   939 label __label210
   940 label __label211
   941 control enabled switch1 false

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
   548 op idiv __tmp191 turnaround_ms 100
   549 op div turnaround_str __tmp191 10
   550 op div items_per_ms_unit UNIT_CAPACITY turnaround_ms
-    * op mul __tmp194 items_per_ms_unit 60000
-    * op floor items_per_min_unit __tmp194
+  551 op idiv items_per_min_unit items_per_ms_unit 0.000016666666666666667
   552 op add __tmp196 min_level max_level
   553 op div this_level __tmp196 2
   554 op sub __tmp198 last_level this_level
 
   556 op div corr_per_ms corr elapsed_ms
   557 set last_level this_level
   558 op add total_flow_per_ms items_per_ms corr_per_ms
-    * op mul __tmp202 60000 corr_per_ms
-    * op floor corr_per_min __tmp202
+  559 op idiv corr_per_min corr_per_ms 0.000016666666666666667
   560 set CORR_SIGN "[]([green]"
   561 jump __label125 lessThan corr_per_min 0
   562 set CORR_SIGN "[]([green]+"

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
     8 set OVERALLOCATION_HIGH 0.75
     9 set STABILIZATION false
    10 set STATE_LIMIT null
-    * set ITEM_ICON STATE_LIMIT
-    * set ITEM ITEM_ICON
-    * set CORE_Y ITEM
-    * set CORE_X CORE_Y
-    * set CONTAINER_INDEX CORE_X
+   11 set ITEM_ICON null
+   12 set ITEM STATE_LIMIT
+   13 set CORE_Y ITEM_ICON
+   14 set CORE_X ITEM
+   15 set CONTAINER_INDEX CORE_Y
    16 set MESSAGE ""
    17 op max EFF_LOCAL_LIMIT LOCAL_LIMIT 20
    18 op max EFF_REMOTE_LIMIT REMOTE_LIMIT 20
 
    20 set TRIGGER_LEVEL 0.9
    21 op mul S_UNUSED -1 HOUSEKEEPING
    22 set LOOPS 1
-    * op mul __tmp3 LOOPS 1000
-    * op div LOOPS_TICKS_TO_MS __tmp3 60
+   23 op mul __tmp3 1 1000
+   24 op div LOOPS_TICKS_TO_MS 1000 60
    25 set INC_OVERALLOCATION OVERALLOCATION_LOW
    26 op add DEC_OVERALLOCATION 1 OVERALLOCATION_HIGH
    27 set TRIGGER_BOOST 2
 
   136 label __label30
   137 jump __label29 always
   138 label __label31
-    * ucontrol flag flag
+  139 ucontrol flag QUERY_FLAG
   140 label __label32
   141 op equal __tmp45 flag QUERY_FLAG
   142 sensor __tmp46 @unit @dead
 
   183 set DISCARD_UNIT_MAX_ITEMS 0
   184 label __label20
   185 set SORTER sorter1
-    * sensor sorter_type SORTER @type
+  186 sensor sorter_type sorter1 @type
   187 label __label42
   188 op notEqual __tmp65 sorter_type @sorter
   189 op notEqual __tmp66 sorter_type @inverted-sorter
 
   198 label __label46
   199 printflush message1
   200 set SORTER sorter1
-    * sensor sorter_type SORTER @type
+  201 sensor sorter_type sorter1 @type
   202 label __label43
   203 jump __label42 always
   204 label __label44
 
   206 set SHOW_REMOTE_LEVEL true
   207 set SRC CORE
   208 set DST CONTAINER
-    * sensor src_capacity SRC @itemCapacity
-    * sensor dst_capacity DST @itemCapacity
+  209 sensor src_capacity CORE @itemCapacity
+  210 sensor dst_capacity CONTAINER @itemCapacity
   211 op sub __tmp75 100 EFF_REMOTE_LIMIT
   212 op mul __tmp76 src_capacity __tmp75
   213 op idiv LOAD_LEVEL __tmp76 100
 
   215 op idiv DROP_LEVEL __tmp78 100
   216 set LOCAL_MARGIN DROP_LEVEL
   217 set REMOTE_MARGIN LOAD_LEVEL
-    * op sub __tmp80 1 TRIGGER_LEVEL
-    * op mul LOW_LEVEL_TRIGGER dst_capacity __tmp80
+  218 op sub __tmp80 1 0.9
+  219 op mul LOW_LEVEL_TRIGGER dst_capacity 0.09999999999999998
   220 set HIGH_LEVEL_TRIGGER dst_capacity
   221 set FLOW_CORR_SIGN 1
   222 set SRC_REMOTE_WAIT 1
 
   233 op greaterThan SHOW_REMOTE_LEVEL LINK_ID 0
   234 set SRC CONTAINER
   235 set DST CORE
-    * sensor src_capacity SRC @itemCapacity
-    * sensor dst_capacity DST @itemCapacity
+  236 sensor src_capacity CONTAINER @itemCapacity
+  237 sensor dst_capacity CORE @itemCapacity
   238 op sub __tmp87 100 EFF_LOCAL_LIMIT
   239 op mul __tmp88 src_capacity __tmp87
   240 op idiv LOAD_LEVEL __tmp88 100
 
   245 op add DROP_LEVEL __tmp91 __tmp93
   246 set LOCAL_MARGIN LOAD_LEVEL
   247 set REMOTE_MARGIN DROP_LEVEL
-    * op mul HIGH_LEVEL_TRIGGER src_capacity TRIGGER_LEVEL
+  248 op mul HIGH_LEVEL_TRIGGER src_capacity 0.9
   249 set LOW_LEVEL_TRIGGER 0
   250 set FLOW_CORR_SIGN -1
   251 set SRC_REMOTE_WAIT 0
 
   276 op sub __tmp108 DST_Y SRC_Y
   277 op len __tmp109 __tmp107 __tmp108
   278 op sub __tmp110 __tmp109 6
-    * op sub DISTANCE __tmp110 8
+  279 op sub DISTANCE __tmp109 14
   280 op max __tmp112 DISTANCE 10
   281 op mul __tmp113 2 __tmp112
   282 op div TRAVEL_TIME __tmp113 SPEED
   283 op sub __tmp115 DST_X SRC_X
   284 op sub __tmp116 DST_Y SRC_Y
-    * op len __tmp117 __tmp115 __tmp116
-    * op sub __tmp118 __tmp117 6
-    * op div DISTANCE __tmp118 100
+  285 op len __tmp117 __tmp107 __tmp108
+  286 op sub __tmp118 __tmp109 6
+  287 op div DISTANCE __tmp110 100
   288 jump __label55 notEqual DROP_TARGET null
   289 set DROP_TARGET CORE
   290 set DROP_X CORE_X
 
   327 set elapsed_str "--"
   328 set wait_time_str 0
   329 set wait_time 0
-    * set transfers wait_time
-    * set transferred transfers
-    * set total_flow_2 transferred
-    * set total_flow_1 total_flow_2
-    * set remote_wait_time total_flow_1
-    * set min_level remote_wait_time
-    * set max_level min_level
-    * set loop_time_ms max_level
-    * set last_level loop_time_ms
-    * jump __label61 equal EFF_AUTO_ALLOCATION false
+  330 set transfers 0
+  331 set transferred wait_time
+  332 set total_flow_2 transfers
+  333 set total_flow_1 transferred
+  334 set remote_wait_time total_flow_2
+  335 set min_level total_flow_1
+  336 set max_level remote_wait_time
+  337 set loop_time_ms min_level
+  338 set last_level max_level
+  339 jump __label61 equal AUTO_ALLOCATION false
   340 set CORR_SIGN "[]([green]+"
   341 set corr_per_min 0
   342 set SPEED_UNIT_TXT "[])/min"
 
   426 set LAST_ITEM ITEM
   427 label __label86
   428 set __fn0_itemType ITEM
-    * jump __label89 notEqual __fn0_itemType @blast-compound
+  429 jump __label89 notEqual ITEM @blast-compound
   430 label __label90
   431 set __tmp164 "[]"
   432 jump __label88 always
   433 label __label89
-    * jump __label91 notEqual __fn0_itemType @coal
+  434 jump __label91 notEqual ITEM @coal
   435 label __label92
   436 set __tmp164 "[]"
   437 jump __label88 always
   438 label __label91
-    * jump __label93 notEqual __fn0_itemType @copper
+  439 jump __label93 notEqual ITEM @copper
   440 label __label94
   441 set __tmp164 "[]"
   442 jump __label88 always
   443 label __label93
-    * jump __label95 notEqual __fn0_itemType @graphite
+  444 jump __label95 notEqual ITEM @graphite
   445 label __label96
   446 set __tmp164 "[]"
   447 jump __label88 always
   448 label __label95
-    * jump __label97 notEqual __fn0_itemType @lead
+  449 jump __label97 notEqual ITEM @lead
   450 label __label98
   451 set __tmp164 "[]"
   452 jump __label88 always
   453 label __label97
-    * jump __label99 notEqual __fn0_itemType @metaglass
+  454 jump __label99 notEqual ITEM @metaglass
   455 label __label100
   456 set __tmp164 "[]"
   457 jump __label88 always
   458 label __label99
-    * jump __label101 notEqual __fn0_itemType @phase-fabric
+  459 jump __label101 notEqual ITEM @phase-fabric
   460 label __label102
   461 set __tmp164 "[]"
   462 jump __label88 always
   463 label __label101
-    * jump __label103 notEqual __fn0_itemType @plastanium
+  464 jump __label103 notEqual ITEM @plastanium
   465 label __label104
   466 set __tmp164 "[]"
   467 jump __label88 always
   468 label __label103
-    * jump __label105 notEqual __fn0_itemType @pyratite
+  469 jump __label105 notEqual ITEM @pyratite
   470 label __label106
   471 set __tmp164 "[]"
   472 jump __label88 always
   473 label __label105
-    * jump __label107 notEqual __fn0_itemType @sand
+  474 jump __label107 notEqual ITEM @sand
   475 label __label108
   476 set __tmp164 "[]"
   477 jump __label88 always
   478 label __label107
-    * jump __label109 notEqual __fn0_itemType @scrap
+  479 jump __label109 notEqual ITEM @scrap
   480 label __label110
   481 set __tmp164 "[]"
   482 jump __label88 always
   483 label __label109
-    * jump __label111 notEqual __fn0_itemType @silicon
+  484 jump __label111 notEqual ITEM @silicon
   485 label __label112
   486 set __tmp164 "[]"
   487 jump __label88 always
   488 label __label111
-    * jump __label113 notEqual __fn0_itemType @spore-pod
+  489 jump __label113 notEqual ITEM @spore-pod
   490 label __label114
   491 set __tmp164 "[]"
   492 jump __label88 always
   493 label __label113
-    * jump __label115 notEqual __fn0_itemType @surge-alloy
+  494 jump __label115 notEqual ITEM @surge-alloy
   495 label __label116
   496 set __tmp164 "[]"
   497 jump __label88 always
   498 label __label115
-    * jump __label117 notEqual __fn0_itemType @thorium
+  499 jump __label117 notEqual ITEM @thorium
   500 label __label118
   501 set __tmp164 "[]"
   502 jump __label88 always
   503 label __label117
-    * jump __label119 notEqual __fn0_itemType @titanium
+  504 jump __label119 notEqual ITEM @titanium
   505 label __label120
   506 set __tmp164 "[]"
   507 jump __label88 always
 
   510 label __label88
   511 set __tmp163 __tmp164
   512 label __label87
-    * set ITEM_ICON __tmp163
+  513 set ITEM_ICON __tmp164
   514 set STATE_LIMIT 1
   515 sensor last_level CONTAINER ITEM
   516 set min_level 999999
 
   542 set transfers 0
   543 jump __label123 equal EFF_AUTO_ALLOCATION false
   544 set AUTO_ALLOCATION_TXT "\n=== [gold]Unit auto allocation[] ==="
-    * op mul __tmp188 LOOPS_TICKS_TO_MS loop_time
+  545 op mul __tmp188 16.666666666666668 loop_time
   546 op add turnaround_ms TRAVEL_TIME __tmp188
   547 op mul WAIT_LIMIT turnaround_ms DEC_OVERALLOCATION
   548 op idiv __tmp191 turnaround_ms 100
 
   576 set total_flow_2 total_flow_1
   577 set total_flow_1 total_flow_per_ms
   578 op add __tmp215 total_flow_3 total_flow_2
-    * op add __tmp216 __tmp215 total_flow_1
+  579 op add __tmp216 __tmp215 total_flow_per_ms
   580 op div total_flow_per_ms __tmp216 3
   581 label __label131
   582 label __label132
   583 op div __tmp218 total_flow_per_ms items_per_ms_unit
-    * op add __tmp219 __tmp218 INC_OVERALLOCATION
+  584 op add __tmp219 __tmp218 OVERALLOCATION_LOW
   585 op ceil new_target __tmp219
-    * op mul level_boost TRIGGER_BOOST trigger
+  586 op mul level_boost 2 trigger
   587 op add __tmp222 new_target level_boost
   588 op min new_target __tmp222 MAX_UNITS
   589 op sub __tmp224 new_target active
   590 op max __tmp225 __tmp224 0
   591 op min new_change __tmp225 INC_LIMIT
-    * set INC_LIMIT INC_MAX
+  592 set INC_LIMIT 6
   593 op lessThanEq __tmp227 new_change 0
-    * op mul DEC_LIMIT __tmp227 DEC_MAX
+  594 op mul DEC_LIMIT __tmp227 -1
   595 jump __label130 always
   596 label __label129
   597 op idiv __tmp229 wait_time WAIT_LIMIT
   598 op mul __tmp230 -1 __tmp229
   599 op max new_change __tmp230 DEC_LIMIT
   600 op greaterThanEq __tmp232 new_change 0
-    * op mul INC_LIMIT __tmp232 INC_MAX
-    * set DEC_LIMIT DEC_MAX
+  601 op mul INC_LIMIT __tmp232 6
+  602 set DEC_LIMIT -1
   603 label __label130
   604 op add __tmp234 active new_change
   605 op max TARGET __tmp234 1
 
   620 label __label134
   621 label __label121
   622 label __label122
-    * print MESSAGE
+  623 print ""
   624 print "Moving [green]"
   625 print ITEM
   626 print "[]"
   627 print DIRECTION
-    * print LINK_TXT
+  628 print __tmp99
   629 print AUTO_ALLOCATION_TXT
   630 jump __label135 lessThanEq TARGET 0
   631 jump __label137 lessThan active TARGET

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-19 instructions):
 
     9 set STABILIZATION false
    10 set STATE_LIMIT null
    11 set ITEM_ICON null
-    * set ITEM STATE_LIMIT
-    * set CORE_Y ITEM_ICON
-    * set CORE_X ITEM
-    * set CONTAINER_INDEX CORE_Y
-    * set MESSAGE ""
+   12 set ITEM null
+   13 set CORE_Y null
+   14 set CORE_X STATE_LIMIT
+   15 set CONTAINER_INDEX ITEM_ICON
    16 op max EFF_LOCAL_LIMIT LOCAL_LIMIT 20
    17 op max EFF_REMOTE_LIMIT REMOTE_LIMIT 20
    18 set EFF_AUTO_ALLOCATION AUTO_ALLOCATION
-    * set TRIGGER_LEVEL 0.9
    19 op mul S_UNUSED -1 HOUSEKEEPING
-    * set LOOPS 1
-    * op mul __tmp3 1 1000
-    * op div LOOPS_TICKS_TO_MS 1000 60
-    * set INC_OVERALLOCATION OVERALLOCATION_LOW
    20 op add DEC_OVERALLOCATION 1 OVERALLOCATION_HIGH
-    * set TRIGGER_BOOST 2
-    * set INC_MAX 6
-    * set DEC_MAX -1
    21 ubind UNIT
    22 label __label0
    23 jump __label2 notEqual @unit null
 
   206 op idiv DROP_LEVEL __tmp78 100
   207 set LOCAL_MARGIN DROP_LEVEL
   208 set REMOTE_MARGIN LOAD_LEVEL
-    * op sub __tmp80 1 0.9
   209 op mul LOW_LEVEL_TRIGGER dst_capacity 0.09999999999999998
   210 set HIGH_LEVEL_TRIGGER dst_capacity
   211 set FLOW_CORR_SIGN 1
 
   254 label __label53
   255 set __tmp99 LINK_ID
   256 label __label54
-    * set LINK_TXT __tmp99
   257 op sub __tmp100 src_capacity LOAD_LEVEL
   258 op min LOAD_PACK UNIT_CAPACITY __tmp100
   259 op min DROP_PACK UNIT_CAPACITY DROP_LEVEL
 
   269 op max __tmp112 DISTANCE 10
   270 op mul __tmp113 2 __tmp112
   271 op div TRAVEL_TIME __tmp113 SPEED
-    * op sub __tmp115 DST_X SRC_X
-    * op sub __tmp116 DST_Y SRC_Y
-    * op len __tmp117 __tmp107 __tmp108
-    * op sub __tmp118 __tmp109 6
-    * op div DISTANCE __tmp110 100
   272 jump __label55 notEqual DROP_TARGET null
   273 set DROP_TARGET CORE
   274 set DROP_X CORE_X
 
   312 set wait_time_str 0
   313 set wait_time 0
   314 set transfers 0
-    * set transferred wait_time
-    * set total_flow_2 transfers
-    * set total_flow_1 transferred
-    * set remote_wait_time total_flow_2
-    * set min_level total_flow_1
-    * set max_level remote_wait_time
-    * set loop_time_ms min_level
-    * set last_level max_level
+  315 set transferred 0
+  316 set total_flow_2 0
+  317 set total_flow_1 wait_time
+  318 set remote_wait_time transfers
+  319 set min_level transferred
+  320 set max_level total_flow_2
+  321 set loop_time_ms total_flow_1
+  322 set last_level remote_wait_time
   323 jump __label61 equal AUTO_ALLOCATION false
   324 set CORR_SIGN "[]([green]+"
   325 set corr_per_min 0
 
   409 label __label85
   410 set LAST_ITEM ITEM
   411 label __label86
-    * set __fn0_itemType ITEM
   412 jump __label89 notEqual ITEM @blast-compound
   413 label __label90
   414 set __tmp164 "[]"
 
   491 label __label119
   492 set __tmp164 null
   493 label __label88
-    * set __tmp163 __tmp164
   494 label __label87
   495 set ITEM_ICON __tmp164
   496 set STATE_LIMIT 1
 
   597 set wait_time 0
   598 set remote_wait_time 0
   599 jump __label133 lessThan @tick MESSAGE_TIMEOUT
-    * set MESSAGE ""
   600 label __label133
   601 label __label134
   602 label __label121

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-1 instructions):
 
    11 set ITEM_ICON null
    12 set ITEM null
    13 set CORE_Y null
-    * set CORE_X STATE_LIMIT
-    * set CONTAINER_INDEX ITEM_ICON
+   14 set CORE_X null
+   15 set CONTAINER_INDEX null
    16 op max EFF_LOCAL_LIMIT LOCAL_LIMIT 20
    17 op max EFF_REMOTE_LIMIT REMOTE_LIMIT 20
    18 set EFF_AUTO_ALLOCATION AUTO_ALLOCATION
 
   264 op sub __tmp107 DST_X SRC_X
   265 op sub __tmp108 DST_Y SRC_Y
   266 op len __tmp109 __tmp107 __tmp108
-    * op sub __tmp110 __tmp109 6
   267 op sub DISTANCE __tmp109 14
   268 op max __tmp112 DISTANCE 10
   269 op mul __tmp113 2 __tmp112
 
   313 set transfers 0
   314 set transferred 0
   315 set total_flow_2 0
-    * set total_flow_1 wait_time
-    * set remote_wait_time transfers
-    * set min_level transferred
-    * set max_level total_flow_2
-    * set loop_time_ms total_flow_1
-    * set last_level remote_wait_time
+  316 set total_flow_1 0
+  317 set remote_wait_time 0
+  318 set min_level 0
+  319 set max_level 0
+  320 set loop_time_ms wait_time
+  321 set last_level transfers
   322 jump __label61 equal AUTO_ALLOCATION false
   323 set CORR_SIGN "[]([green]+"
   324 set corr_per_min 0

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 4:
 
   317 set remote_wait_time 0
   318 set min_level 0
   319 set max_level 0
-    * set loop_time_ms wait_time
-    * set last_level transfers
+  320 set loop_time_ms 0
+  321 set last_level 0
   322 jump __label61 equal AUTO_ALLOCATION false
   323 set CORR_SIGN "[]([green]+"
   324 set corr_per_min 0

Modifications by Iterated phase, Loop Hoisting, pass 1, iteration 1:
 
   115 print LINK_ID
   116 print "..."
   117 printflush message1
+  118 op add QUERY_FLAG 99999900 LINK_ID
   119 label __label26
   120 jump __label28 notEqual CORE null
-    * op add QUERY_FLAG 99999900 LINK_ID
   121 set flag QUERY_FLAG
   122 ubind UNIT
   123 label __label29

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1 (-3 instructions):
 
    21 ubind UNIT
    22 label __label0
    23 jump __label2 notEqual @unit null
+   24 label __label215
    25 print "[salmon]No unit of type "
    26 print UNIT
    27 print " found."
    28 printflush message1
    29 ubind UNIT
    30 label __label1
-    * jump __label0 always
+   31 jump __label215 equal @unit null
    32 label __label2
    33 set first_unit @unit
    34 sensor __tmp8 @unit @speed
 
    38 set TARGET 0
    39 set repeat true
    40 label __label3
-    * jump __label5 equal repeat false
+   41 label __label216
    42 sensor __tmp12 @unit @controller
    43 jump __label6 notEqual __tmp12 @this
    44 sensor state @unit @flag
 
    54 op strictEqual __tmp22 __tmp21 0
    55 op land repeat __tmp20 __tmp22
    56 label __label4
-    * jump __label3 always
+   57 jump __label216 notEqual repeat false
    58 label __label5
    59 set CHANGE 0
    60 set active TARGET
 
    68 set n @links
    69 label __label11
    70 jump __label13 lessThanEq n 0
+   71 label __label217
    72 op sub n n 1
    73 getlink block n
    74 sensor __tmp29 block @type
 
    81 label __label15
    82 label __label14
    83 label __label12
-    * jump __label11 always
+   84 jump __label217 greaterThan n 0
    85 label __label13
    86 jump __label17 notEqual CONTAINER null
    87 print "[salmon]No vault or container."
 
    96 set CORE null
    97 jump __label19 notEqual LINK_ID 0
    98 label __label21
-    * jump __label23 notEqual CORE null
+   99 label __label218
   100 print "[green]Locating core..."
   101 printflush message1
   102 ubind UNIT
 
   107 label __label24
   108 label __label25
   109 label __label22
-    * jump __label21 always
+  110 jump __label218 equal CORE null
   111 label __label23
   112 set DISCARD_UNIT_MAX_ITEMS UNIT_CAPACITY
   113 jump __label20 always
 
   119 printflush message1
   120 op add QUERY_FLAG 99999900 LINK_ID
   121 label __label26
-    * jump __label28 notEqual CORE null
+  122 label __label219
   123 set flag QUERY_FLAG
   124 ubind UNIT
   125 label __label29
 
   171 label __label36
   172 ucontrol flag S_UNUSED
   173 label __label27
-    * jump __label26 always
+  174 jump __label219 equal CORE null
   175 label __label28
   176 set DISCARD_UNIT_MAX_ITEMS 0
   177 label __label20
 
   337 ubind UNIT
   338 label __label66
   339 jump __label68 notEqual @unit null
+  340 label __label220
   341 print "No unit of type "
   342 print UNIT
   343 print " found."
   344 printflush message1
   345 ubind UNIT
   346 label __label67
-    * jump __label66 always
+  347 jump __label220 equal @unit null
   348 label __label68
   349 sensor __tmp139 switch1 @enabled
   350 jump __label69 equal __tmp139 false
 
   403 jump __label81 equal ITEM LAST_ITEM
   404 label __label83
   405 jump __label85 notEqual ITEM null
+  406 label __label221
   407 print "[salmon]No item type selected for transport.[]"
   408 printflush message1
   409 sensor ITEM SORTER @config
   410 label __label84
-    * jump __label83 always
+  411 jump __label221 equal ITEM null
   412 label __label85
   413 set LAST_ITEM ITEM
   414 label __label86

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-5 instructions):
 
   213 set FLOW_CORR_SIGN 1
   214 set SRC_REMOTE_WAIT 1
   215 set DST_REMOTE_WAIT 0
-    * jump __label49 notEqual LINK_ID 0
-    * set __tmp83 " from core"
+  216 set DIRECTION " from vault #"
+  217 jump __label50 notEqual LINK_ID 0
+  218 set DIRECTION " from core"
   219 jump __label50 always
-    * label __label49
-    * set __tmp83 " from vault #"
   220 label __label50
-    * set DIRECTION __tmp83
   221 jump __label48 always
   222 label __label47
   223 op greaterThan SHOW_REMOTE_LEVEL LINK_ID 0
 
   240 set FLOW_CORR_SIGN -1
   241 set SRC_REMOTE_WAIT 0
   242 set DST_REMOTE_WAIT 1
-    * jump __label51 notEqual LINK_ID 0
-    * set __tmp97 " to core"
+  243 set DIRECTION " to vault #"
+  244 jump __label52 notEqual LINK_ID 0
+  245 set DIRECTION " to core"
   246 jump __label52 always
-    * label __label51
-    * set __tmp97 " to vault #"
   247 label __label52
-    * set DIRECTION __tmp97
   248 label __label48
-    * jump __label53 notEqual LINK_ID 0
+  249 set __tmp99 LINK_ID
+  250 jump __label54 notEqual LINK_ID 0
   251 set __tmp99 ""
   252 jump __label54 always
-    * label __label53
-    * set __tmp99 LINK_ID
   253 label __label54
   254 op sub __tmp100 src_capacity LOAD_LEVEL
   255 op min LOAD_PACK UNIT_CAPACITY __tmp100
 
   271 set DROP_Y CORE_Y
   272 sensor __tmp122 CONTAINER @x
   273 jump __label57 greaterThanEq __tmp122 CORE_X
-    * set __tmp124 15
+  274 op add PARK_X CORE_X 15
   275 jump __label58 always
   276 label __label57
-    * set __tmp124 -15
+  277 op add PARK_X CORE_X -15
   278 label __label58
-    * op add PARK_X CORE_X __tmp124
   279 sensor __tmp126 CONTAINER @y
   280 jump __label59 greaterThanEq __tmp126 CORE_Y
-    * set __tmp128 15
+  281 op add PARK_Y CORE_Y 15
   282 jump __label60 always
   283 label __label59
-    * set __tmp128 -15
+  284 op add PARK_Y CORE_Y -15
   285 label __label60
-    * op add PARK_Y CORE_Y __tmp128
   286 op equal __tmp130 LINK_ID 0
   287 op mul PARK_ITEM_LIMIT __tmp130 UNIT_CAPACITY
   288 jump __label56 always
 
   371 set CORR_SIGN "[]"
   372 set corr_per_min ""
   373 set SPEED_UNIT_TXT "/min"
-    * jump __label75 notEqual TARGET 0
-    * set __tmp150 "\n=== [salmon]Transport deactivated[] ==="
+  374 set AUTO_ALLOCATION_TXT ""
+  375 jump __label76 notEqual TARGET 0
+  376 set AUTO_ALLOCATION_TXT "\n=== [salmon]Transport deactivated[] ==="
   377 jump __label76 always
-    * label __label75
-    * set __tmp150 ""
   378 label __label76
-    * set AUTO_ALLOCATION_TXT __tmp150
   379 label __label74
   380 set WAIT_LIMIT 30000
   381 label __label71

Modifications by Loop Optimization: replicate condition at line 174 (+1 instructions):
 
   125 label __label29
   126 sensor __tmp43 @unit @controlled
   127 jump __label31 equal __tmp43 0
+  128 label __label222
   129 ubind UNIT
   130 label __label30
-    * jump __label29 always
+  131 sensor __tmp43 @unit @controlled
+  132 jump __label222 notEqual __tmp43 0
   133 label __label31
   134 ucontrol flag QUERY_FLAG
   135 label __label32

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    36 sensor __tmp10 @unit @speed
    37 op div SPEED __tmp10 1000
    38 set TARGET 0
-    * set repeat true
    39 label __label3
    40 label __label216
    41 sensor __tmp12 @unit @controller

Modifications by Loop Optimization: replicate condition at line 178 (+4 instructions):
 
   137 op equal __tmp47 __tmp46 0
   138 op land __tmp48 __tmp45 __tmp47
   139 jump __label34 equal __tmp48 false
+  140 label __label223
   141 ucontrol stop
   142 sensor flag @unit @flag
   143 label __label33
-    * jump __label32 always
+  144 op equal __tmp45 flag QUERY_FLAG
+  145 sensor __tmp46 @unit @dead
+  146 op equal __tmp47 __tmp46 0
+  147 op land __tmp48 __tmp45 __tmp47
+  148 jump __label223 notEqual __tmp48 false
   149 label __label34
   150 jump __label35 equal flag QUERY_FLAG
   151 op idiv position flag 100

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   132 label __label31
   133 ucontrol flag QUERY_FLAG
   134 label __label32
-    * op equal __tmp45 flag QUERY_FLAG
+  135 op equal __tmp45 QUERY_FLAG QUERY_FLAG
   136 sensor __tmp46 @unit @dead
   137 op equal __tmp47 __tmp46 0
   138 op land __tmp48 __tmp45 __tmp47

Modifications by Loop Optimization: replicate condition at line 186 (+5 instructions):
 
   158 op equal __tmp58 __tmp57 false
   159 op land __tmp59 __tmp56 __tmp58
   160 jump __label39 equal __tmp59 false
+  161 label __label224
   162 ucontrol approach CORE_X CORE_Y 6
   163 label __label38
-    * jump __label37 always
+  164 sensor __tmp55 @unit @dead
+  165 op equal __tmp56 __tmp55 0
+  166 ucontrol within CORE_X CORE_Y 8 __tmp57
+  167 op equal __tmp58 __tmp57 false
+  168 op land __tmp59 __tmp56 __tmp58
+  169 jump __label224 notEqual __tmp59 false
   170 label __label39
   171 ucontrol getBlock CORE_X CORE_Y b_type CORE 0
   172 jump __label40 equal b_type @vault

Modifications by Loop Optimization: replicate condition at line 694 (+2 instructions):
 
   895 sensor __tmp365 SORTER @dead
   896 op strictEqual __tmp366 __tmp365 0
   897 jump __label209 notEqual __tmp366 false
+  898 label __label225
   899 print "[salmon]sorter1 is missing![]\nPlease place and link sorter or inverted sorter to the processor."
   900 printflush message1
   901 printflush message2
   902 set SORTER sorter1
   903 label __label208
-    * jump __label207 always
+  904 sensor __tmp365 SORTER @dead
+  905 op strictEqual __tmp366 __tmp365 0
+  906 jump __label225 equal __tmp366 false
   907 label __label209
   908 sensor __tmp368 SRC @dead
   909 op strictEqual __tmp369 __tmp368 0

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   901 printflush message2
   902 set SORTER sorter1
   903 label __label208
-    * sensor __tmp365 SORTER @dead
+  904 sensor __tmp365 sorter1 @dead
   905 op strictEqual __tmp366 __tmp365 0
   906 jump __label225 equal __tmp366 false
   907 label __label209

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-1 instructions):
 
   899 print "[salmon]sorter1 is missing![]\nPlease place and link sorter or inverted sorter to the processor."
   900 printflush message1
   901 printflush message2
-    * set SORTER sorter1
   902 label __label208
   903 sensor __tmp365 sorter1 @dead
   904 op strictEqual __tmp366 __tmp365 0

Modifications by Loop Optimization: replicate condition at line 205 (+3 instructions):
 
   194 op notEqual __tmp66 sorter_type @inverted-sorter
   195 op land __tmp67 __tmp65 __tmp66
   196 jump __label44 equal __tmp67 false
+  197 label __label226
   198 print "[salmon]Block sorter1 is neither a sorter, nor an inverted sorter."
   199 print "\n"
   200 jump __label45 equal SORTER null
 
   206 set SORTER sorter1
   207 sensor sorter_type sorter1 @type
   208 label __label43
-    * jump __label42 always
+  209 op notEqual __tmp65 sorter_type @sorter
+  210 op notEqual __tmp66 sorter_type @inverted-sorter
+  211 op land __tmp67 __tmp65 __tmp66
+  212 jump __label226 notEqual __tmp67 false
   213 label __label44
   214 jump __label47 notEqual sorter_type @sorter
   215 set SHOW_REMOTE_LEVEL true

Modifications by Loop Optimization: replicate condition at line 702 (+3 instructions):
 
   921 sensor __tmp377 switch2 @enabled
   922 op or __tmp378 __tmp376 __tmp377
   923 jump __label214 notEqual __tmp378 false
+  924 label __label227
   925 print "[salmon]Local or remote container became invalid.\nPlease fix and press any button to reinitialize."
   926 printflush message1
   927 printflush message2
   928 label __label213
-    * jump __label212 always
+  929 sensor __tmp376 switch1 @enabled
+  930 sensor __tmp377 switch2 @enabled
+  931 op or __tmp378 __tmp376 __tmp377
+  932 jump __label227 equal __tmp378 false
   933 label __label214
   934 label __label210
   935 label __label211

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-5 instructions):
 
   232 set DIRECTION " from vault #"
   233 jump __label50 notEqual LINK_ID 0
   234 set DIRECTION " from core"
-    * jump __label50 always
   235 label __label50
   236 jump __label48 always
   237 label __label47
 
   258 set DIRECTION " to vault #"
   259 jump __label52 notEqual LINK_ID 0
   260 set DIRECTION " to core"
-    * jump __label52 always
   261 label __label52
   262 label __label48
   263 set __tmp99 LINK_ID
   264 jump __label54 notEqual LINK_ID 0
   265 set __tmp99 ""
-    * jump __label54 always
   266 label __label54
   267 op sub __tmp100 src_capacity LOAD_LEVEL
   268 op min LOAD_PACK UNIT_CAPACITY __tmp100
 
   387 set AUTO_ALLOCATION_TXT ""
   388 jump __label76 notEqual TARGET 0
   389 set AUTO_ALLOCATION_TXT "\n=== [salmon]Transport deactivated[] ==="
-    * jump __label76 always
   390 label __label76
   391 label __label74
   392 set WAIT_LIMIT 30000
 
   602 label __label124
   603 set wait_time 0
   604 set remote_wait_time 0
-    * jump __label133 lessThan @tick MESSAGE_TIMEOUT
   605 label __label133
   606 label __label134
   607 label __label121

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   132 label __label31
   133 ucontrol flag QUERY_FLAG
   134 label __label32
-    * op equal __tmp45 QUERY_FLAG QUERY_FLAG
+  135 set __tmp45 true
   136 sensor __tmp46 @unit @dead
   137 op equal __tmp47 __tmp46 0
   138 op land __tmp48 __tmp45 __tmp47

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-1 instructions):
 
   135 set __tmp45 true
   136 sensor __tmp46 @unit @dead
   137 op equal __tmp47 __tmp46 0
-    * op land __tmp48 __tmp45 __tmp47
+  138 op land __tmp48 true __tmp47
   139 jump __label34 equal __tmp48 false
   140 label __label223
   141 ucontrol stop
 
   309 set TRANSFER_START @tick
   310 op sub LOOP_START @tick 60
   311 set LAST_ITEM @mono
-    * op add MESSAGE_TIMEOUT @tick 600
   312 set WAIT_LIMIT 30000
   313 set items_in_transit 0
   314 set items_per_min_unit "--"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2 (-1 instructions):
 
   132 label __label31
   133 ucontrol flag QUERY_FLAG
   134 label __label32
-    * set __tmp45 true
   135 sensor __tmp46 @unit @dead
   136 op equal __tmp47 __tmp46 0
   137 op land __tmp48 true __tmp47

Modifications by Iterated phase, If Expression Optimization, pass 2, iteration 1:
 
   281 set DROP_TARGET CORE
   282 set DROP_X CORE_X
   283 set DROP_Y CORE_Y
+  284 op add PARK_X CORE_X -15
   285 sensor __tmp122 CONTAINER @x
-    * jump __label57 greaterThanEq __tmp122 CORE_X
+  286 jump __label58 greaterThanEq __tmp122 CORE_X
   287 op add PARK_X CORE_X 15
   288 jump __label58 always
-    * label __label57
-    * op add PARK_X CORE_X -15
   289 label __label58
+  290 op add PARK_Y CORE_Y -15
   291 sensor __tmp126 CONTAINER @y
-    * jump __label59 greaterThanEq __tmp126 CORE_Y
+  292 jump __label60 greaterThanEq __tmp126 CORE_Y
   293 op add PARK_Y CORE_Y 15
   294 jump __label60 always
-    * label __label59
-    * op add PARK_Y CORE_Y -15
   295 label __label60
   296 op equal __tmp130 LINK_ID 0
   297 op mul PARK_ITEM_LIMIT __tmp130 UNIT_CAPACITY

Modifications by Iterated phase, Single Step Elimination, pass 3, iteration 1 (-2 instructions):
 
   285 sensor __tmp122 CONTAINER @x
   286 jump __label58 greaterThanEq __tmp122 CORE_X
   287 op add PARK_X CORE_X 15
-    * jump __label58 always
   288 label __label58
   289 op add PARK_Y CORE_Y -15
   290 sensor __tmp126 CONTAINER @y
   291 jump __label60 greaterThanEq __tmp126 CORE_Y
   292 op add PARK_Y CORE_Y 15
-    * jump __label60 always
   293 label __label60
   294 op equal __tmp130 LINK_ID 0
   295 op mul PARK_ITEM_LIMIT __tmp130 UNIT_CAPACITY

Modifications by Final phase, Jump Straightening, iteration 1 (-4 instructions):
 
   690 set items_in_transit 0
   691 print "Unit status:"
   692 sensor __tmp255 SRC @dead
-    * jump __label151 equal __tmp255 0
-    * jump __label65 always
+  693 jump __label65 notEqual __tmp255 0
   694 label __label151
   695 label __label152
   696 sensor __tmp258 DST @dead
-    * jump __label153 equal __tmp258 0
-    * jump __label65 always
+  697 jump __label65 notEqual __tmp258 0
   698 label __label153
   699 label __label154
   700 sensor __tmp261 SORTER @dead
-    * jump __label155 equal __tmp261 0
-    * jump __label65 always
+  701 jump __label65 notEqual __tmp261 0
   702 label __label155
   703 label __label156
   704 getlink __tmp264 CONTAINER_INDEX
-    * jump __label157 equal CONTAINER __tmp264
-    * jump __label65 always
+  705 jump __label65 notEqual CONTAINER __tmp264
   706 label __label157
   707 label __label158
   708 label __label77

Modifications by Final phase, Jump Threading, iteration 1:
 
    82 label __label12
    83 jump __label217 greaterThan n 0
    84 label __label13
-    * jump __label17 notEqual CONTAINER null
+   85 jump __label10 notEqual CONTAINER null
    86 print "[salmon]No vault or container."
    87 printflush message1
-    * jump __label18 always
+   88 jump __label8 always
    89 label __label17
    90 jump __label10 always
    91 label __label18
 
   229 set SRC_REMOTE_WAIT 1
   230 set DST_REMOTE_WAIT 0
   231 set DIRECTION " from vault #"
-    * jump __label50 notEqual LINK_ID 0
+  232 jump __label48 notEqual LINK_ID 0
   233 set DIRECTION " from core"
   234 label __label50
   235 jump __label48 always
 
   717 label __label159
   718 label __label160
   719 sensor __tmp273 @unit @controller
-    * jump __label163 notEqual __tmp273 @this
+  720 jump __label63 notEqual __tmp273 @this
   721 sensor state @unit @flag
-    * jump __label165 equal state S_UNUSED
+  722 jump __label63 equal state S_UNUSED
   723 op max __tmp279 state 1
   724 op min state __tmp279 STATE_LIMIT
   725 jump __label167 greaterThanEq CHANGE 0
 
   856 print "[]\nParking: [green]"
   857 ucontrol approach DROP_X DROP_Y 6
   858 ucontrol within DROP_X DROP_Y 8 __tmp359
-    * jump __label203 equal __tmp359 false
+  859 jump __label202 equal __tmp359 false
   860 ucontrol itemDrop DROP_TARGET UNIT_CAPACITY
   861 sensor items @unit @totalItems
-    * jump __label205 greaterThan items PARK_ITEM_LIMIT
+  862 jump __label202 greaterThan items PARK_ITEM_LIMIT
   863 ucontrol move PARK_X PARK_Y
   864 set state S_UNUSED
   865 label __label205

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-2 instructions):
 
    86 print "[salmon]No vault or container."
    87 printflush message1
    88 jump __label8 always
-    * label __label17
-    * jump __label10 always
-    * label __label18
-    * label __label9
-    * jump __label8 always
    89 label __label10
    90 set CORE null
    91 jump __label19 notEqual LINK_ID 0

Modifications by Final phase, Single Step Elimination, iteration 1 (-1 instructions):
 
   915 label __label211
   916 control enabled switch1 false
   917 control enabled switch2 false
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-2 instructions):
 
   595 label __label134
   596 label __label121
   597 label __label122
-    * print ""
-    * print "Moving [green]"
+  598 print "Moving [green]"
   599 print ITEM
   600 print "[]"
   601 print DIRECTION
 
   657 jump __label149 equal EFF_AUTO_ALLOCATION false
   658 print "\nUnit throughput: [green]"
   659 print items_per_min_unit
-    * print "[]/min"
-    * print "\nMin/last round: [green]"
+  660 print "[]/min\nMin/last round: [green]"
   661 print turnaround_str
   662 print "[]/[green]"
   663 print elapsed_str

Final code before resolving virtual instructions:

set UNIT @mega
set LINK_ID 0
set AUTO_ALLOCATION true
set MAX_UNITS 24
set HOUSEKEEPING true
set LOCAL_LIMIT 100
set REMOTE_LIMIT 100
set OVERALLOCATION_LOW 0.25
set OVERALLOCATION_HIGH 0.75
set STABILIZATION false
set STATE_LIMIT null
set ITEM_ICON null
set ITEM null
set CORE_Y null
set CORE_X null
set CONTAINER_INDEX null
op max EFF_LOCAL_LIMIT LOCAL_LIMIT 20
op max EFF_REMOTE_LIMIT REMOTE_LIMIT 20
set EFF_AUTO_ALLOCATION AUTO_ALLOCATION
op mul S_UNUSED -1 HOUSEKEEPING
op add DEC_OVERALLOCATION 1 OVERALLOCATION_HIGH
ubind UNIT
jump __label2 notEqual @unit null
label __label215
print "[salmon]No unit of type "
print UNIT
print " found."
printflush message1
ubind UNIT
jump __label215 equal @unit null
label __label2
set first_unit @unit
sensor __tmp8 @unit @speed
op div SPEED_SEC __tmp8 10
sensor __tmp10 @unit @speed
op div SPEED __tmp10 1000
set TARGET 0
label __label216
sensor __tmp12 @unit @controller
jump __label6 notEqual __tmp12 @this
sensor state @unit @flag
op greaterThanEq __tmp16 state 1
op lessThan __tmp17 state 6
op land __tmp18 __tmp16 __tmp17
op add TARGET TARGET __tmp18
label __label6
ubind UNIT
op notEqual __tmp20 @unit first_unit
sensor __tmp21 first_unit @dead
op strictEqual __tmp22 __tmp21 0
op land repeat __tmp20 __tmp22
jump __label216 notEqual repeat false
set CHANGE 0
set active TARGET
set DEC_LIMIT 0
set INC_LIMIT 0
sensor UNIT_CAPACITY @unit @itemCapacity
set first_unit null
label __label8
set CONTAINER null
set DROP_TARGET null
set n @links
jump __label13 lessThanEq n 0
label __label217
op sub n n 1
getlink block n
sensor __tmp29 block @type
jump __label16 equal __tmp29 @vault
jump __label15 notEqual __tmp29 @container
label __label16
set DROP_TARGET CONTAINER
set CONTAINER block
set CONTAINER_INDEX n
label __label15
jump __label217 greaterThan n 0
label __label13
jump __label10 notEqual CONTAINER null
print "[salmon]No vault or container."
printflush message1
jump __label8 always 0 0
label __label10
set CORE null
jump __label19 notEqual LINK_ID 0
label __label218
print "[green]Locating core..."
printflush message1
ubind UNIT
sensor __tmp36 @unit @controlled
jump __label24 notEqual __tmp36 0
ulocate building core false @copper CORE_X CORE_Y 0 CORE
ucontrol flag S_UNUSED 0 0 0 0
label __label24
jump __label218 equal CORE null
set DISCARD_UNIT_MAX_ITEMS UNIT_CAPACITY
jump __label20 always 0 0
label __label19
printflush message2
print "[green]Locating vault #"
print LINK_ID
print "..."
printflush message1
op add QUERY_FLAG 99999900 LINK_ID
label __label219
set flag QUERY_FLAG
ubind UNIT
sensor __tmp43 @unit @controlled
jump __label31 equal __tmp43 0
label __label222
ubind UNIT
sensor __tmp43 @unit @controlled
jump __label222 notEqual __tmp43 0
label __label31
ucontrol flag QUERY_FLAG 0 0 0 0
sensor __tmp46 @unit @dead
op equal __tmp47 __tmp46 0
op land __tmp48 true __tmp47
jump __label34 equal __tmp48 false
label __label223
ucontrol stop 0 0 0 0 0
sensor flag @unit @flag
op equal __tmp45 flag QUERY_FLAG
sensor __tmp46 @unit @dead
op equal __tmp47 __tmp46 0
op land __tmp48 __tmp45 __tmp47
jump __label223 notEqual __tmp48 false
label __label34
jump __label35 equal flag QUERY_FLAG
op idiv position flag 100
op mod CORE_X position @mapw
op idiv CORE_Y position @mapw
sensor __tmp55 @unit @dead
op equal __tmp56 __tmp55 0
ucontrol within CORE_X CORE_Y 8 __tmp57 0
op equal __tmp58 __tmp57 false
op land __tmp59 __tmp56 __tmp58
jump __label39 equal __tmp59 false
label __label224
ucontrol approach CORE_X CORE_Y 6 0 0
sensor __tmp55 @unit @dead
op equal __tmp56 __tmp55 0
ucontrol within CORE_X CORE_Y 8 __tmp57 0
op equal __tmp58 __tmp57 false
op land __tmp59 __tmp56 __tmp58
jump __label224 notEqual __tmp59 false
label __label39
ucontrol getBlock CORE_X CORE_Y b_type CORE 0
jump __label40 equal b_type @vault
print "[salmon]Building at "
print CORE_X
print ", "
print CORE_Y
print " is not a vault!"
printflush message2
set CORE null
label __label40
label __label35
ucontrol flag S_UNUSED 0 0 0 0
jump __label219 equal CORE null
set DISCARD_UNIT_MAX_ITEMS 0
label __label20
set SORTER sorter1
sensor sorter_type sorter1 @type
op notEqual __tmp65 sorter_type @sorter
op notEqual __tmp66 sorter_type @inverted-sorter
op land __tmp67 __tmp65 __tmp66
jump __label44 equal __tmp67 false
label __label226
print "[salmon]Block sorter1 is neither a sorter, nor an inverted sorter."
print "\n"
jump __label45 equal SORTER null
print "Block found: "
print SORTER
label __label45
printflush message1
set SORTER sorter1
sensor sorter_type sorter1 @type
op notEqual __tmp65 sorter_type @sorter
op notEqual __tmp66 sorter_type @inverted-sorter
op land __tmp67 __tmp65 __tmp66
jump __label226 notEqual __tmp67 false
label __label44
jump __label47 notEqual sorter_type @sorter
set SHOW_REMOTE_LEVEL true
set SRC CORE
set DST CONTAINER
sensor src_capacity CORE @itemCapacity
sensor dst_capacity CONTAINER @itemCapacity
op sub __tmp75 100 EFF_REMOTE_LIMIT
op mul __tmp76 src_capacity __tmp75
op idiv LOAD_LEVEL __tmp76 100
op mul __tmp78 dst_capacity EFF_LOCAL_LIMIT
op idiv DROP_LEVEL __tmp78 100
set LOCAL_MARGIN DROP_LEVEL
set REMOTE_MARGIN LOAD_LEVEL
op mul LOW_LEVEL_TRIGGER dst_capacity 0.09999999999999998
set HIGH_LEVEL_TRIGGER dst_capacity
set FLOW_CORR_SIGN 1
set SRC_REMOTE_WAIT 1
set DST_REMOTE_WAIT 0
set DIRECTION " from vault #"
jump __label48 notEqual LINK_ID 0
set DIRECTION " from core"
jump __label48 always 0 0
label __label47
op greaterThan SHOW_REMOTE_LEVEL LINK_ID 0
set SRC CONTAINER
set DST CORE
sensor src_capacity CONTAINER @itemCapacity
sensor dst_capacity CORE @itemCapacity
op sub __tmp87 100 EFF_LOCAL_LIMIT
op mul __tmp88 src_capacity __tmp87
op idiv LOAD_LEVEL __tmp88 100
op mul __tmp90 dst_capacity EFF_REMOTE_LIMIT
op idiv __tmp91 __tmp90 100
op equal __tmp92 LINK_ID 0
op mul __tmp93 __tmp92 UNIT_CAPACITY
op add DROP_LEVEL __tmp91 __tmp93
set LOCAL_MARGIN LOAD_LEVEL
set REMOTE_MARGIN DROP_LEVEL
op mul HIGH_LEVEL_TRIGGER src_capacity 0.9
set LOW_LEVEL_TRIGGER 0
set FLOW_CORR_SIGN -1
set SRC_REMOTE_WAIT 0
set DST_REMOTE_WAIT 1
set DIRECTION " to vault #"
jump __label52 notEqual LINK_ID 0
set DIRECTION " to core"
label __label52
label __label48
set __tmp99 LINK_ID
jump __label54 notEqual LINK_ID 0
set __tmp99 ""
label __label54
op sub __tmp100 src_capacity LOAD_LEVEL
op min LOAD_PACK UNIT_CAPACITY __tmp100
op min DROP_PACK UNIT_CAPACITY DROP_LEVEL
sensor SRC_X SRC @x
sensor SRC_Y SRC @y
sensor DST_X DST @x
sensor DST_Y DST @y
op sub __tmp107 DST_X SRC_X
op sub __tmp108 DST_Y SRC_Y
op len __tmp109 __tmp107 __tmp108
op sub DISTANCE __tmp109 14
op max __tmp112 DISTANCE 10
op mul __tmp113 2 __tmp112
op div TRAVEL_TIME __tmp113 SPEED
jump __label55 notEqual DROP_TARGET null
set DROP_TARGET CORE
set DROP_X CORE_X
set DROP_Y CORE_Y
op add PARK_X CORE_X -15
sensor __tmp122 CONTAINER @x
jump __label58 greaterThanEq __tmp122 CORE_X
op add PARK_X CORE_X 15
label __label58
op add PARK_Y CORE_Y -15
sensor __tmp126 CONTAINER @y
jump __label60 greaterThanEq __tmp126 CORE_Y
op add PARK_Y CORE_Y 15
label __label60
op equal __tmp130 LINK_ID 0
op mul PARK_ITEM_LIMIT __tmp130 UNIT_CAPACITY
jump __label56 always 0 0
label __label55
sensor DROP_X DROP_TARGET @x
sensor DROP_Y DROP_TARGET @y
set PARK_X DROP_X
set PARK_Y DROP_Y
set PARK_ITEM_LIMIT 0
label __label56
set TRANSFER_START @tick
op sub LOOP_START @tick 60
set LAST_ITEM @mono
set WAIT_LIMIT 30000
set items_in_transit 0
set items_per_min_unit "--"
set items_per_min "-- "
set turnaround_str "--"
set elapsed_str "--"
set wait_time_str 0
set wait_time 0
set transfers 0
set transferred 0
set total_flow_2 0
set total_flow_1 0
set remote_wait_time 0
set min_level 0
set max_level 0
set loop_time_ms 0
set last_level 0
jump __label61 equal AUTO_ALLOCATION false
set CORR_SIGN "[]([green]+"
set corr_per_min 0
set SPEED_UNIT_TXT "[])/min"
set AUTO_ALLOCATION_TXT "\n=== [gold]Gathering statistics[] ==="
jump __label62 always 0 0
label __label61
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set AUTO_ALLOCATION_TXT ""
label __label62
label __label63
ubind UNIT
jump __label68 notEqual @unit null
label __label220
print "No unit of type "
print UNIT
print " found."
printflush message1
ubind UNIT
jump __label220 equal @unit null
label __label68
sensor __tmp139 switch1 @enabled
jump __label69 equal __tmp139 false
control enabled switch1 false 0 0 0
set EFF_AUTO_ALLOCATION false
set AUTO_ALLOCATION_TXT ""
op add __tmp141 TARGET 1
op min TARGET __tmp141 MAX_UNITS
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set WAIT_LIMIT 30000
label __label69
sensor __tmp143 switch2 @enabled
jump __label71 equal __tmp143 false
control enabled switch2 false 0 0 0
jump __label73 greaterThanEq TARGET 1
set EFF_AUTO_ALLOCATION true
set TARGET 1
set DEC_LIMIT 0
set INC_LIMIT 0
set CORR_SIGN "[]([green]+"
set corr_per_min 0
set SPEED_UNIT_TXT "[])/min"
jump __label74 always 0 0
label __label73
set EFF_AUTO_ALLOCATION false
op sub __tmp147 TARGET 1
op max TARGET __tmp147 0
set CORR_SIGN "[]"
set corr_per_min ""
set SPEED_UNIT_TXT "/min"
set AUTO_ALLOCATION_TXT ""
jump __label76 notEqual TARGET 0
set AUTO_ALLOCATION_TXT "\n=== [salmon]Transport deactivated[] ==="
label __label76
label __label74
set WAIT_LIMIT 30000
label __label71
sensor __tmp151 first_unit @dead
op strictEqual alive __tmp151 0
op strictEqual __tmp153 @unit first_unit
jump __label77 greaterThan alive __tmp153
jump __label79 notEqual active 0
print "\n[salmon]No active units.[]"
label __label79
printflush message2
set STATE_LIMIT 6
sensor ITEM SORTER @config
jump __label81 equal ITEM LAST_ITEM
jump __label85 notEqual ITEM null
label __label221
print "[salmon]No item type selected for transport.[]"
printflush message1
sensor ITEM SORTER @config
jump __label221 equal ITEM null
label __label85
set LAST_ITEM ITEM
jump __label89 notEqual ITEM @blast-compound
set __tmp164 "[]"
jump __label88 always 0 0
label __label89
jump __label91 notEqual ITEM @coal
set __tmp164 "[]"
jump __label88 always 0 0
label __label91
jump __label93 notEqual ITEM @copper
set __tmp164 "[]"
jump __label88 always 0 0
label __label93
jump __label95 notEqual ITEM @graphite
set __tmp164 "[]"
jump __label88 always 0 0
label __label95
jump __label97 notEqual ITEM @lead
set __tmp164 "[]"
jump __label88 always 0 0
label __label97
jump __label99 notEqual ITEM @metaglass
set __tmp164 "[]"
jump __label88 always 0 0
label __label99
jump __label101 notEqual ITEM @phase-fabric
set __tmp164 "[]"
jump __label88 always 0 0
label __label101
jump __label103 notEqual ITEM @plastanium
set __tmp164 "[]"
jump __label88 always 0 0
label __label103
jump __label105 notEqual ITEM @pyratite
set __tmp164 "[]"
jump __label88 always 0 0
label __label105
jump __label107 notEqual ITEM @sand
set __tmp164 "[]"
jump __label88 always 0 0
label __label107
jump __label109 notEqual ITEM @scrap
set __tmp164 "[]"
jump __label88 always 0 0
label __label109
jump __label111 notEqual ITEM @silicon
set __tmp164 "[]"
jump __label88 always 0 0
label __label111
jump __label113 notEqual ITEM @spore-pod
set __tmp164 "[]"
jump __label88 always 0 0
label __label113
jump __label115 notEqual ITEM @surge-alloy
set __tmp164 "[]"
jump __label88 always 0 0
label __label115
jump __label117 notEqual ITEM @thorium
set __tmp164 "[]"
jump __label88 always 0 0
label __label117
jump __label119 notEqual ITEM @titanium
set __tmp164 "[]"
jump __label88 always 0 0
label __label119
set __tmp164 null
label __label88
set ITEM_ICON __tmp164
set STATE_LIMIT 1
sensor last_level CONTAINER ITEM
set min_level 999999
set max_level 0
label __label81
sensor container_items CONTAINER ITEM
op min min_level min_level container_items
op max max_level max_level container_items
op sub loop_time @tick LOOP_START
set LOOP_START @tick
op mul __tmp171 loop_time 100
op idiv loop_time_ms __tmp171 6
op greaterThanEq __tmp173 transfers active
op greaterThan __tmp174 wait_time WAIT_LIMIT
op or __tmp175 __tmp173 __tmp174
jump __label121 equal __tmp175 false
op div __tmp177 wait_time 100
op ceil __tmp178 __tmp177 0
op div wait_time_str __tmp178 10
op sub elapsed_ticks @tick TRANSFER_START
set TRANSFER_START @tick
op div elapsed_ms elapsed_ticks 0.06
op idiv __tmp183 elapsed_ms 100
op div elapsed_str __tmp183 10
op div items_per_ms transferred elapsed_ms
op idiv items_per_min items_per_ms 0.000016666666666666667
set transferred 0
set transfers 0
jump __label123 equal EFF_AUTO_ALLOCATION false
set AUTO_ALLOCATION_TXT "\n=== [gold]Unit auto allocation[] ==="
op mul __tmp188 16.666666666666668 loop_time
op add turnaround_ms TRAVEL_TIME __tmp188
op mul WAIT_LIMIT turnaround_ms DEC_OVERALLOCATION
op idiv __tmp191 turnaround_ms 100
op div turnaround_str __tmp191 10
op div items_per_ms_unit UNIT_CAPACITY turnaround_ms
op idiv items_per_min_unit items_per_ms_unit 0.000016666666666666667
op add __tmp196 min_level max_level
op div this_level __tmp196 2
op sub __tmp198 last_level this_level
op mul corr __tmp198 FLOW_CORR_SIGN
op div corr_per_ms corr elapsed_ms
set last_level this_level
op add total_flow_per_ms items_per_ms corr_per_ms
op idiv corr_per_min corr_per_ms 0.000016666666666666667
set CORR_SIGN "[]([green]"
jump __label125 lessThan corr_per_min 0
set CORR_SIGN "[]([green]+"
label __label125
set SPEED_UNIT_TXT "[])/min"
jump __label127 equal alive false
op lessThan __tmp207 min_level LOW_LEVEL_TRIGGER
op greaterThan __tmp208 max_level HIGH_LEVEL_TRIGGER
op or trigger __tmp207 __tmp208
op equal __tmp210 wait_time 0
op greaterThan __tmp211 trigger remote_wait_time
op or __tmp212 __tmp210 __tmp211
jump __label129 equal __tmp212 false
jump __label131 equal STABILIZATION false
set total_flow_3 total_flow_2
set total_flow_2 total_flow_1
set total_flow_1 total_flow_per_ms
op add __tmp215 total_flow_3 total_flow_2
op add __tmp216 __tmp215 total_flow_per_ms
op div total_flow_per_ms __tmp216 3
label __label131
op div __tmp218 total_flow_per_ms items_per_ms_unit
op add __tmp219 __tmp218 OVERALLOCATION_LOW
op ceil new_target __tmp219 0
op mul level_boost 2 trigger
op add __tmp222 new_target level_boost
op min new_target __tmp222 MAX_UNITS
op sub __tmp224 new_target active
op max __tmp225 __tmp224 0
op min new_change __tmp225 INC_LIMIT
set INC_LIMIT 6
op lessThanEq __tmp227 new_change 0
op mul DEC_LIMIT __tmp227 -1
jump __label130 always 0 0
label __label129
op idiv __tmp229 wait_time WAIT_LIMIT
op mul __tmp230 -1 __tmp229
op max new_change __tmp230 DEC_LIMIT
op greaterThanEq __tmp232 new_change 0
op mul INC_LIMIT __tmp232 6
set DEC_LIMIT -1
label __label130
op add __tmp234 active new_change
op max TARGET __tmp234 1
jump __label128 always 0 0
label __label127
set INC_LIMIT 0
set DEC_LIMIT 0
label __label128
set min_level 999999
set max_level 0
label __label123
set wait_time 0
set remote_wait_time 0
label __label121
print "Moving [green]"
print ITEM
print "[]"
print DIRECTION
print __tmp99
print AUTO_ALLOCATION_TXT
jump __label135 lessThanEq TARGET 0
jump __label137 lessThan active TARGET
print "\nUsing [green]"
print active
print "/"
print TARGET
print "[] units ("
print UNIT
print ") [gold]+"
print items_in_transit
jump __label138 always 0 0
label __label137
print "\nUsing [salmon]"
print active
print "/"
print TARGET
print "[] units ("
print UNIT
print ") [gold]+"
print items_in_transit
label __label138
jump __label139 lessThanEq CHANGE 0
print "\n[][salmon]Cannot acquire additional units![]"
label __label139
label __label135
print "\n[]Local items: [gold]"
print container_items
jump __label141 greaterThanEq EFF_LOCAL_LIMIT 100
print "[] (limit [orange]"
print LOCAL_MARGIN
print "[])"
label __label141
jump __label143 equal SHOW_REMOTE_LEVEL false
sensor remote_level CORE ITEM
print "\n[]Remote items: [gold]"
print remote_level
jump __label145 greaterThanEq EFF_REMOTE_LIMIT 100
print "[] (limit [orange]"
print REMOTE_MARGIN
print "[])"
label __label145
label __label143
jump __label147 lessThanEq TARGET 0
print "\n[]Speed: [green]"
print items_per_min
print CORR_SIGN
print corr_per_min
print SPEED_UNIT_TXT
jump __label149 equal EFF_AUTO_ALLOCATION false
print "\nUnit throughput: [green]"
print items_per_min_unit
print "[]/min\nMin/last round: [green]"
print turnaround_str
print "[]/[green]"
print elapsed_str
print "[] s"
jump __label150 always 0 0
label __label149
print "\nLast round: [green]"
print elapsed_str
print "[] s"
label __label150
print "\nTotal wait time: [green]"
print wait_time_str
print "[] s"
label __label147
print "\n[lightgray]Loop: "
print loop_time_ms
print " ms"
printflush message1
op sub CHANGE TARGET active
set active 0
set first_unit @unit
set items_in_transit 0
print "Unit status:"
sensor __tmp255 SRC @dead
jump __label65 notEqual __tmp255 0
sensor __tmp258 DST @dead
jump __label65 notEqual __tmp258 0
sensor __tmp261 SORTER @dead
jump __label65 notEqual __tmp261 0
getlink __tmp264 CONTAINER_INDEX
jump __label65 notEqual CONTAINER __tmp264
label __label77
jump __label159 lessThanEq CHANGE 0
sensor __tmp269 @unit @controlled
jump __label161 notEqual __tmp269 0
op sub CHANGE CHANGE 1
ucontrol flag 1 0 0 0 0
label __label161
label __label159
sensor __tmp273 @unit @controller
jump __label63 notEqual __tmp273 @this
sensor state @unit @flag
jump __label63 equal state S_UNUSED
op max __tmp279 state 1
op min state __tmp279 STATE_LIMIT
jump __label167 greaterThanEq CHANGE 0
jump __label169 equal state 6
sensor __tmp285 @unit @totalItems
jump __label171 greaterThan __tmp285 DISCARD_UNIT_MAX_ITEMS
op add CHANGE CHANGE 1
set state 6
label __label171
label __label169
label __label167
jump __label173 notEqual state 1
sensor __tmp291 @unit @totalItems
jump __label175 notEqual __tmp291 0
set state 2
jump __label176 always 0 0
label __label175
sensor __tmp294 @unit @firstItem
jump __label177 notEqual __tmp294 ITEM
set state 4
jump __label178 always 0 0
label __label177
ucontrol approach DROP_X DROP_Y 6 0 0
ucontrol within DROP_X DROP_Y 8 __tmp297 0
jump __label179 equal __tmp297 false
ucontrol itemDrop DROP_TARGET UNIT_CAPACITY 0 0 0
label __label179
print "[]\nUnloading previous items: [green]"
label __label178
label __label176
label __label173
jump __label181 notEqual state 2
ucontrol approach SRC_X SRC_Y 6 0 0
ucontrol within SRC_X SRC_Y 8 __tmp301 0
jump __label183 equal __tmp301 false
set state 3
jump __label184 always 0 0
label __label183
sensor __tmp303 @unit @x
op sub __tmp304 SRC_X __tmp303
sensor __tmp305 @unit @y
op sub __tmp306 SRC_Y __tmp305
op len __tmp307 __tmp304 __tmp306
op idiv __tmp308 __tmp307 SPEED_SEC
op div __tmp309 __tmp308 10
print "[]\n[gold]"
print __tmp309
print " sec[] to source: [green]"
label __label184
label __label181
jump __label185 notEqual state 3
sensor __tmp312 SRC ITEM
op sub max_load __tmp312 LOAD_LEVEL
jump __label187 lessThan max_load LOAD_PACK
ucontrol itemTake SRC ITEM max_load 0 0
label __label187
sensor __tmp316 @unit @totalItems
jump __label189 lessThan __tmp316 UNIT_CAPACITY
set state 4
jump __label190 always 0 0
label __label189
print "[]\nWaiting at source: [green]"
ucontrol approach SRC_X SRC_Y 6 0 0
op add wait_time wait_time loop_time_ms
op mul __tmp320 loop_time_ms SRC_REMOTE_WAIT
op add remote_wait_time remote_wait_time __tmp320
label __label190
label __label185
jump __label191 notEqual state 4
ucontrol approach DST_X DST_Y 6 0 0
ucontrol within DST_X DST_Y 8 __tmp324 0
jump __label193 equal __tmp324 false
sensor __tmp326 @unit @totalItems
op add transferred transferred __tmp326
op add transfers transfers 1
set state 5
jump __label194 always 0 0
label __label193
sensor __tmp329 @unit @x
op sub __tmp330 DST_X __tmp329
sensor __tmp331 @unit @y
op sub __tmp332 DST_Y __tmp331
op len __tmp333 __tmp330 __tmp332
op idiv __tmp334 __tmp333 SPEED_SEC
op div __tmp335 __tmp334 10
print "[]\n[gold]"
print __tmp335
print " sec[] to destination: [green]"
label __label194
label __label191
jump __label195 notEqual state 5
sensor __tmp338 DST ITEM
op sub max_drop DROP_LEVEL __tmp338
jump __label197 lessThan max_drop DROP_PACK
ucontrol itemDrop DST max_drop 0 0 0
label __label197
sensor __tmp342 @unit @totalItems
jump __label199 greaterThan __tmp342 0
set state 2
ucontrol approach SRC_X SRC_Y 6 0 0
sensor __tmp345 @unit @x
op sub __tmp346 SRC_X __tmp345
sensor __tmp347 @unit @y
op sub __tmp348 SRC_Y __tmp347
op len __tmp349 __tmp346 __tmp348
op idiv __tmp350 __tmp349 SPEED_SEC
op div __tmp351 __tmp350 10
print "[]\n[gold]"
print __tmp351
print " sec[] to source: [green]"
jump __label200 always 0 0
label __label199
print "[]\nWaiting at destination: [green]"
ucontrol approach DST_X DST_Y 6 0 0
op add wait_time wait_time loop_time_ms
op mul __tmp353 loop_time_ms DST_REMOTE_WAIT
op add remote_wait_time remote_wait_time __tmp353
label __label200
label __label195
sensor items @unit @totalItems
op add items_in_transit items_in_transit items
jump __label201 notEqual state 6
print "[]\nParking: [green]"
ucontrol approach DROP_X DROP_Y 6 0 0
ucontrol within DROP_X DROP_Y 8 __tmp359 0
jump __label202 equal __tmp359 false
ucontrol itemDrop DROP_TARGET UNIT_CAPACITY 0 0 0
sensor items @unit @totalItems
jump __label202 greaterThan items PARK_ITEM_LIMIT
ucontrol move PARK_X PARK_Y 0 0 0
set state S_UNUSED
jump __label202 always 0 0
label __label201
op add active active 1
label __label202
print items
print ITEM_ICON
ucontrol flag state 0 0 0 0
jump __label63 always 0 0
label __label65
sensor __tmp365 SORTER @dead
op strictEqual __tmp366 __tmp365 0
jump __label209 notEqual __tmp366 false
label __label225
print "[salmon]sorter1 is missing![]\nPlease place and link sorter or inverted sorter to the processor."
printflush message1
printflush message2
sensor __tmp365 sorter1 @dead
op strictEqual __tmp366 __tmp365 0
jump __label225 equal __tmp366 false
label __label209
sensor __tmp368 SRC @dead
op strictEqual __tmp369 __tmp368 0
op equal __tmp370 __tmp369 false
sensor __tmp371 DST @dead
op strictEqual __tmp372 __tmp371 0
op equal __tmp373 __tmp372 false
op or __tmp374 __tmp370 __tmp373
jump __label210 equal __tmp374 false
sensor __tmp376 switch1 @enabled
sensor __tmp377 switch2 @enabled
op or __tmp378 __tmp376 __tmp377
jump __label214 notEqual __tmp378 false
label __label227
print "[salmon]Local or remote container became invalid.\nPlease fix and press any button to reinitialize."
printflush message1
printflush message2
sensor __tmp376 switch1 @enabled
sensor __tmp377 switch2 @enabled
op or __tmp378 __tmp376 __tmp377
jump __label227 equal __tmp378 false
label __label214
label __label210
control enabled switch1 false 0 0 0
control enabled switch2 false 0 0 0
