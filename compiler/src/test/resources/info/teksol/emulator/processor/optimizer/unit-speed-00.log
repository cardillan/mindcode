    97 instructions before optimizations.
     6 instructions eliminated by Temp Variables Elimination.
     6 instructions eliminated by Jump Optimization (3 iterations).
     1 instructions eliminated by Single Step Elimination (4 iterations).
     1 instructions eliminated by Expression Optimization (2 iterations).
     7 instructions eliminated by Data Flow Optimization (9 iterations).
     5 instructions added by Loop Optimization (2 iterations).
     6 loops improved by Loop Optimization.
     3 instructions eliminated by Print Merging.
    78 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 923):
  * Loop Optimization: replicate condition at line 17            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)
    Loop Optimization: replicate condition at line 24            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 32            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 45            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 58            cost     1, benefit       25.0, efficiency       25.0

Pass 1: speed optimization selection (cost limit 922):
  * Loop Optimization: replicate condition at line 24            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)
    Loop Optimization: replicate condition at line 32            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 45            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 58            cost     1, benefit       25.0, efficiency       25.0

Pass 1: speed optimization selection (cost limit 921):
  * Loop Optimization: replicate condition at line 32            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)
    Loop Optimization: replicate condition at line 45            cost     1, benefit       25.0, efficiency       25.0
    Loop Optimization: replicate condition at line 58            cost     1, benefit       25.0, efficiency       25.0

Pass 1: speed optimization selection (cost limit 920):
  * Loop Optimization: replicate condition at line 45            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)
    Loop Optimization: replicate condition at line 58            cost     1, benefit       25.0, efficiency       25.0

Pass 1: speed optimization selection (cost limit 919):
  * Loop Optimization: replicate condition at line 58            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)

Final code before resolving virtual instructions:

set UNIT @flare
op sub DY @maph 10
op sub __tmp2 DY 10
op len __tmp3 0 __tmp2
op mul __tmp4 100 __tmp3
op add __tmp5 __tmp4 0.5
op floor __tmp6 __tmp5 0
op div __tmp7 __tmp6 100
op sub distance __tmp7 2
ubind UNIT
jump __label2 notEqual @unit null
label __label18
print UNIT
print ": no active unit found."
printflush message1
ubind UNIT
jump __label18 equal @unit null
label __label2
sensor __tmp10 switch1 @enabled
jump __label5 notEqual __tmp10 false
label __label19
print "Press button to start measuring "
print UNIT
print " speed."
printflush message1
sensor __tmp10 switch1 @enabled
jump __label19 equal __tmp10 false
label __label5
control enabled switch1 false 0 0 0
sensor __tmp12 @unit @controlled
jump __label8 equal __tmp12 0
label __label20
print "Searching free "
print UNIT
printflush message1
ubind UNIT
sensor __tmp12 @unit @controlled
jump __label20 notEqual __tmp12 0
label __label8
ucontrol flag 1 0 0 0 0
ucontrol within 10 10 1 __tmp14 0
jump __label11 notEqual __tmp14 false
label __label21
print "Moving to start"
printflush message1
ucontrol move 10 10 0 0 0
ucontrol within 10 10 1 __tmp14 0
jump __label21 equal __tmp14 false
label __label11
print "Moving to destination"
printflush message1
set start @time
ucontrol move 10 DY 0 0 0
ucontrol within 10 DY 1 __tmp17 0
jump __label14 notEqual __tmp17 false
label __label22
ucontrol move 10 DY 0 0 0
ucontrol within 10 DY 1 __tmp17 0
jump __label22 equal __tmp17 false
label __label14
set finish @time
op sub __tmp23 10 DY
op abs __tmp24 __tmp23 0
op div __tmp25 __tmp24 2
ucontrol move 0 __tmp25 0 0 0
ucontrol flag 0 0 0 0 0
op sub elapsed finish start
op div __tmp27 distance elapsed
op idiv __tmp29 __tmp27 0.00001
op div speed __tmp29 100
sensor __tmp31 switch1 @enabled
jump __label17 notEqual __tmp31 false
label __label23
print "Measurement results ("
print UNIT
print "):\nMap dimensions: "
print @mapw
print "x"
print @maph
print "\nElapsed time: "
print elapsed
print "ms\nDistance travelled: "
print distance
print "\nSpeed: "
print speed
print "tiles/s\nPress button to repeat"
printflush message1
sensor __tmp31 switch1 @enabled
jump __label23 equal __tmp31 false
label __label17
