   290 instructions before optimizations.
    38 instructions eliminated by Temp Variables Elimination.
    32 instructions eliminated by Dead Code Elimination (4 iterations).
    15 instructions eliminated by Jump Optimization (4 iterations).
    13 instructions eliminated by Single Step Elimination (3 passes, 7 iterations).
     2 instructions eliminated by Expression Optimization (3 iterations).
     2 instructions eliminated by If Expression Optimization (3 iterations).
     1 instructions eliminated by Data Flow Optimization (2 passes, 7 iterations).
     1 instructions added by Loop Optimization (3 iterations).
     2 loops improved by Loop Optimization.
     1 instructions updated by PropagateJumpTargets.
     1 instructions eliminated by Print Merging.
   187 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 810):
  * Loop Optimization: replicate condition at line 26            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)

Final code before resolving virtual instructions:

set FROM_INDEX 0
set EXPECTED_BOOST 1.5
op div EXPECTED_FLOW EXPECTED_BOOST 4.6875
op idiv EXPECTED_FLOW_STR EXPECTED_FLOW 0.0002777777777777778
jump __label0 equal bank1 null
set BAR_LENGTH 53
set BAR_SPACE 74
jump __label1 always 0 0
label __label0
set BAR_LENGTH 61
set BAR_SPACE 88
label __label1
set lastRate null
set icon null
set flow_str null
control enabled switch1 0 0 0 0
sensor __tmp6 switch1 @enabled
jump __label4 notEqual __tmp6 0
label __label43
print "Surge Alloy Factory Monitor"
jump __label5 equal bank1 null
jump __label7 notEqual FROM_INDEX 0
read rate bank1 511
jump __label9 equal lastRate rate
draw clear 0 0 80 0 0 0
set lastRate rate
draw color 0 0 80 255 0 0
draw rect 156 0 16 176 0 0
draw color 255 128 128 255 0 0
draw rect 164 4 8 84 0 0
draw color 128 255 128 255 0 0
draw rect 164 89 8 84 0 0
draw stroke 1 0 0 0 0 0
draw color 255 0 0 255 0 0
draw lineRect 164 4 8 84 0 0
draw color 0 255 0 255 0 0
draw lineRect 164 89 8 84 0 0
draw color 0 0 80 255 0 0
draw rect 164 4 2 170 0 0
op sub __tmp15 rate EXPECTED_FLOW
op mul __tmp16 84 __tmp15
op div __tmp17 __tmp16 EXPECTED_FLOW
op add pos 88 __tmp17
op max __tmp19 pos 4
op min pos __tmp19 170
op add pos1 pos 7
op sub pos2 pos 7
draw color 255 255 16 255 0 0
draw triangle 156 pos1 164 pos 156 pos2
op idiv flow_str rate 0.0002777777777777778
jump __label10 always 0 0
label __label9
draw color 0 0 80 255 0 0
draw rect 0 0 156 176 0 0
label __label10
label __label7
print "\nNominal production: "
print EXPECTED_FLOW_STR
print "/min\nActual production: "
print flow_str
print "/min"
label __label5
set start @time
draw stroke 2 0 0 0 0 0
set index FROM_INDEX
set n 0
jump __label13 greaterThanEq 0 @links
label __label42
getlink smelter n
sensor __tmp28 smelter @type
jump __label14 notEqual __tmp28 @surge-smelter
set minimum 21
sensor t smelter @titanium
sensor c smelter @copper
sensor l smelter @lead
sensor s smelter @silicon
sensor a smelter @surge-alloy
sensor e smelter @enabled
sensor power smelter @totalPower
sensor boost smelter @timescale
jump __label16 greaterThanEq l 21
set minimum l
set icon @lead
label __label16
jump __label18 greaterThanEq s minimum
set minimum s
set icon @silicon
label __label18
jump __label20 greaterThanEq c minimum
set minimum c
set icon @copper
label __label20
jump __label22 greaterThanEq t minimum
set minimum t
set icon @titanium
label __label22
op greaterThan __tmp47 a 5
op sub __tmp48 21 a
op lessThan __tmp49 __tmp48 minimum
op land showa __tmp47 __tmp49
jump __label24 equal showa false
set icon @surge-alloy
label __label24
op mod column index 2
op idiv row index 2
op mul __tmp54 column BAR_SPACE
op add x 5 __tmp54
op mul __tmp56 row 22
op add y 4 __tmp56
op sub xm1 x 1
op sub ym1 y 1
draw color 0 0 80 255 0 0
draw rect xm1 ym1 BAR_SPACE 16 0 0
op greaterThan __tmp60 minimum 16
op equal __tmp61 showa 0
op land __tmp62 __tmp60 __tmp61
jump __label26 equal __tmp62 false
set icon @surge-smelter
label __label26
draw color 255 255 255 255 0 0
jump __label28 equal e false
jump __label30 lessThanEq power 0
op add __tmp67 x 7
op add __tmp68 y 7
draw image __tmp67 __tmp68 icon 16 0 0
jump __label29 always 0 0
label __label30
op add x12 x 12
op add y3 y 3
draw color 255 80 80 255 0 0
draw rect x y3 14 8 0 0
draw color 0 0 0 255 0 0
op add __tmp71 x 2
op add __tmp72 y 5
draw rect __tmp71 __tmp72 8 4 0 0
draw rect x12 y3 2 2 0 0
op add __tmp73 y 9
draw rect x12 __tmp73 2 2 0 0
draw color 255 80 80 255 0 0
op add __tmp74 x 4
op add __tmp75 y 6
draw rect __tmp74 __tmp75 2 2 0 0
jump __label29 always 0 0
label __label28
op add x2 x 2
op add y2 y 2
op add x12 x 12
op add y12 y 12
draw color 255 80 80 255 0 0
draw stroke 3 0 0 0 0 0
draw line x2 y12 x12 y2 0 0
draw line x2 y2 x12 y12 0 0
draw color 0 0 0 255 0 0
draw lineRect xm1 ym1 16 16 0 0
draw stroke 2 0 0 0 0 0
label __label29
op add x x 16
op mul __tmp81 power e
jump __label32 notEqual __tmp81 0
set red 255
set green 0
set blue 0
jump __label33 always 0 0
label __label32
jump __label34 equal showa false
set red 255
set green 0
set blue 255
set minimum a
jump __label35 always 0 0
label __label34
set red 255
op greaterThan __tmp85 minimum 14
op greaterThanEq __tmp86 boost EXPECTED_BOOST
op land __tmp87 __tmp85 __tmp86
jump __label37 equal __tmp87 false
set red 0
label __label37
set green 0
jump __label39 lessThanEq minimum 7
set green 255
label __label39
set blue 0
label __label35
label __label33
jump __label40 lessThanEq boost EXPECTED_BOOST
op max red 192 red
op max green 192 green
op max blue 192 blue
set boost EXPECTED_BOOST
label __label40
op mul __tmp96 BAR_LENGTH boost
op idiv length __tmp96 EXPECTED_BOOST
draw color red green blue 128 0 0
op mul __tmp98 minimum length
op idiv __tmp99 __tmp98 20
draw rect x y __tmp99 14 0 0
draw color red green blue 255 0 0
draw lineRect x y length 14 0 0
op add index index 1
label __label14
op add n n 1
jump __label42 lessThan n @links
label __label13
drawflush display1
op sub __tmp102 @time start
op floor __tmp103 __tmp102 0
print "\nUpdate time: "
print __tmp103
print " ms"
printflush message1
sensor __tmp6 switch1 @enabled
jump __label43 equal __tmp6 0
label __label4
