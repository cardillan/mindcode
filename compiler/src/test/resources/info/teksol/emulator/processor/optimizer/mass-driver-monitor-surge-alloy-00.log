   166 instructions before optimizations.
    11 instructions eliminated by Temp Variables Elimination.
     2 instructions eliminated by Case Expression Optimization.
    10 instructions eliminated by Dead Code Elimination (4 iterations).
     2 instructions eliminated by Jump Optimization (3 iterations).
     2 instructions eliminated by Single Step Elimination (2 passes, 5 iterations).
    17 instructions eliminated by Data Flow Optimization (5 iterations).
     1 instructions added by Loop Optimization (2 iterations).
     2 loops improved by Loop Optimization.
     8 instructions eliminated by Jump Straightening (3 iterations).
     4 instructions updated by PropagateJumpTargets.
     9 instructions eliminated by Print Merging.
   106 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 885):
  * Loop Optimization: replicate condition at line 68            cost     1, benefit       25.0, efficiency       25.0 (+1 instructions)

Modifications by Initial phase, Case Expression Optimization, iteration 1 (-2 instructions):
 
    21 getlink __tmp3 n
    22 set block __tmp3
    23 sensor __tmp4 block @type
-    * set __ast0 __tmp4
-    * jump __label8 equal __ast0 @message
+   24 jump __label8 equal __tmp4 @message
    25 jump __label7 always
    26 label __label8
    27 set MESSAGE block
    28 set __tmp5 MESSAGE
    29 jump __label6 always
    30 label __label7
-    * jump __label10 equal __ast0 @switch
+   31 jump __label10 equal __tmp4 @switch
    32 jump __label9 always
    33 label __label10
    34 set SWITCH block
    35 set __tmp5 SWITCH
    36 jump __label6 always
    37 label __label9
-    * jump __label12 equal __ast0 @mass-driver
+   38 jump __label12 equal __tmp4 @mass-driver
    39 jump __label11 always
    40 label __label12
    41 sensor __tmp6 block @firstItem
-    * set __ast1 __tmp6
-    * jump __label15 equal __ast1 @titanium
+   42 jump __label15 equal __tmp6 @titanium
    43 jump __label14 always
    44 label __label15
    45 set TITANIUM block
    46 set __tmp7 TITANIUM
    47 jump __label13 always
    48 label __label14
-    * jump __label17 equal __ast1 @silicon
+   49 jump __label17 equal __tmp6 @silicon
    50 jump __label16 always
    51 label __label17
    52 set SILICON block
    53 set __tmp7 SILICON
    54 jump __label13 always
    55 label __label16
-    * jump __label19 equal __ast1 @copper
+   56 jump __label19 equal __tmp6 @copper
    57 jump __label18 always
    58 label __label19
    59 set COPPER block
    60 set __tmp7 COPPER
    61 jump __label13 always
    62 label __label18
-    * jump __label21 equal __ast1 @lead
+   63 jump __label21 equal __tmp6 @lead
    64 jump __label20 always
    65 label __label21
    66 set LEAD block
 
    72 set __tmp5 __tmp7
    73 jump __label6 always
    74 label __label11
-    * jump __label23 equal __ast0 @logic-display
+   75 jump __label23 equal __tmp4 @logic-display
    76 jump __label22 always
    77 label __label23
    78 set DISPLAY block

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-5 instructions):
 
    25 jump __label7 always
    26 label __label8
    27 set MESSAGE block
-    * set __tmp5 MESSAGE
    28 jump __label6 always
    29 label __label7
    30 jump __label10 equal __tmp4 @switch
    31 jump __label9 always
    32 label __label10
    33 set SWITCH block
-    * set __tmp5 SWITCH
    34 jump __label6 always
    35 label __label9
    36 jump __label12 equal __tmp4 @mass-driver
 
    67 label __label20
    68 set __tmp7 null
    69 label __label13
-    * set __tmp5 __tmp7
    70 jump __label6 always
    71 label __label11
    72 jump __label23 equal __tmp4 @logic-display
    73 jump __label22 always
    74 label __label23
    75 set DISPLAY block
-    * set __tmp5 DISPLAY
    76 jump __label6 always
    77 label __label22
    78 print "\n"
    79 print block
    80 print " is not supported."
-    * set __tmp5 " is not supported."
    81 label __label6
    82 print "\nNominal production: "
    83 print EXPECTED_FLOW_STR

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-5 instructions):
 
    41 jump __label14 always
    42 label __label15
    43 set TITANIUM block
-    * set __tmp7 TITANIUM
    44 jump __label13 always
    45 label __label14
    46 jump __label17 equal __tmp6 @silicon
    47 jump __label16 always
    48 label __label17
    49 set SILICON block
-    * set __tmp7 SILICON
    50 jump __label13 always
    51 label __label16
    52 jump __label19 equal __tmp6 @copper
    53 jump __label18 always
    54 label __label19
    55 set COPPER block
-    * set __tmp7 COPPER
    56 jump __label13 always
    57 label __label18
    58 jump __label21 equal __tmp6 @lead
    59 jump __label20 always
    60 label __label21
    61 set LEAD block
-    * set __tmp7 LEAD
    62 jump __label13 always
    63 label __label20
-    * set __tmp7 null
    64 label __label13
    65 jump __label6 always
    66 label __label11

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-11 instructions):
 
    11 print "\n"
    12 print "Configuring..."
    13 print "\n"
-    * set __tmp0 @links
-    * set n __tmp0
+   14 set n @links
    15 label __label3
    16 op greaterThan __tmp1 n 0
    17 jump __label5 equal __tmp1 false
-    * op sub __tmp2 n 1
-    * set n __tmp2
-    * getlink __tmp3 n
-    * set block __tmp3
+   18 op sub n n 1
+   19 getlink block n
    20 sensor __tmp4 block @type
    21 jump __label8 equal __tmp4 @message
    22 jump __label7 always
 
   117 set ICON_SIZE 16
   118 set ICON_X 11
   119 set ICON_Y1 11
-    * op add __tmp15 ICON_Y1 ROW_HEIGHT
-    * set ICON_Y2 __tmp15
-    * op add __tmp16 ICON_Y2 ROW_HEIGHT
-    * set ICON_Y3 __tmp16
-    * op add __tmp17 ICON_Y3 ROW_HEIGHT
-    * set ICON_Y4 __tmp17
+  120 op add ICON_Y2 ICON_Y1 ROW_HEIGHT
+  121 op add ICON_Y3 ICON_Y2 ROW_HEIGHT
+  122 op add ICON_Y4 ICON_Y3 ROW_HEIGHT
   123 set BAR_X 20
   124 set BAR_Y1 4
-    * op add __tmp18 BAR_Y1 ROW_HEIGHT
-    * set BAR_Y2 __tmp18
-    * op add __tmp19 BAR_Y2 ROW_HEIGHT
-    * set BAR_Y3 __tmp19
-    * op add __tmp20 BAR_Y3 ROW_HEIGHT
-    * set BAR_Y4 __tmp20
+  125 op add BAR_Y2 BAR_Y1 ROW_HEIGHT
+  126 op add BAR_Y3 BAR_Y2 ROW_HEIGHT
+  127 op add BAR_Y4 BAR_Y3 ROW_HEIGHT
   128 set BAR_LENGTH 56
-    * op div __tmp21 BAR_LENGTH 200
-    * set MULTIPLICATOR __tmp21
+  129 op div MULTIPLICATOR BAR_LENGTH 200
   130 control enabled SWITCH 0
   131 label __label24
   132 sensor __tmp22 SWITCH @enabled
   133 op equal __tmp23 __tmp22 0
   134 jump __label26 equal __tmp23 false
-    * set __tmp24 @time
-    * set start __tmp24
+  135 set start @time
   136 draw clear 0 0 80
   137 draw color 255 255 255 255
   138 draw image ICON_X ICON_Y4 @titanium ICON_SIZE 0

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-8 instructions):
 
    18 op sub n n 1
    19 getlink block n
    20 sensor __tmp4 block @type
-    * jump __label8 equal __tmp4 @message
-    * jump __label7 always
+   21 jump __label7 notEqual __tmp4 @message
    22 label __label8
    23 set MESSAGE block
    24 jump __label6 always
    25 label __label7
-    * jump __label10 equal __tmp4 @switch
-    * jump __label9 always
+   26 jump __label9 notEqual __tmp4 @switch
    27 label __label10
    28 set SWITCH block
    29 jump __label6 always
    30 label __label9
-    * jump __label12 equal __tmp4 @mass-driver
-    * jump __label11 always
+   31 jump __label11 notEqual __tmp4 @mass-driver
    32 label __label12
    33 sensor __tmp6 block @firstItem
-    * jump __label15 equal __tmp6 @titanium
-    * jump __label14 always
+   34 jump __label14 notEqual __tmp6 @titanium
    35 label __label15
    36 set TITANIUM block
    37 jump __label13 always
    38 label __label14
-    * jump __label17 equal __tmp6 @silicon
-    * jump __label16 always
+   39 jump __label16 notEqual __tmp6 @silicon
    40 label __label17
    41 set SILICON block
    42 jump __label13 always
    43 label __label16
-    * jump __label19 equal __tmp6 @copper
-    * jump __label18 always
+   44 jump __label18 notEqual __tmp6 @copper
    45 label __label19
    46 set COPPER block
    47 jump __label13 always
    48 label __label18
-    * jump __label21 equal __tmp6 @lead
-    * jump __label20 always
+   49 jump __label20 notEqual __tmp6 @lead
    50 label __label21
    51 set LEAD block
    52 jump __label13 always
 
    54 label __label13
    55 jump __label6 always
    56 label __label11
-    * jump __label23 equal __tmp4 @logic-display
-    * jump __label22 always
+   57 jump __label22 notEqual __tmp4 @logic-display
    58 label __label23
    59 set DISPLAY block
    60 jump __label6 always

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-2 instructions):
 
    13 print "\n"
    14 set n @links
    15 label __label3
-    * op greaterThan __tmp1 n 0
-    * jump __label5 equal __tmp1 false
+   16 jump __label5 lessThanEq n 0
    17 op sub n n 1
    18 getlink block n
    19 sensor __tmp4 block @type
 
   121 control enabled SWITCH 0
   122 label __label24
   123 sensor __tmp22 SWITCH @enabled
-    * op equal __tmp23 __tmp22 0
-    * jump __label26 equal __tmp23 false
+  124 jump __label26 notEqual __tmp22 0
   125 set start @time
   126 draw clear 0 0 80
   127 draw color 255 255 255 255

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-1 instructions):
 
    48 jump __label20 notEqual __tmp6 @lead
    49 label __label21
    50 set LEAD block
-    * jump __label13 always
    51 label __label20
    52 label __label13
    53 jump __label6 always

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
     0 set EXPECTED_FLOW_STR null
     1 set flow_str null
     2 set SWITCH null
-    * set DISPLAY SWITCH
-    * set MESSAGE DISPLAY
+    3 set DISPLAY null
+    4 set MESSAGE SWITCH
     5 label __label0
     6 set TITANIUM null
     7 set SILICON null
 
    62 print " is not supported."
    63 label __label6
    64 print "\nNominal production: "
-    * print EXPECTED_FLOW_STR
+   65 print null
    66 print "/min"
    67 print "\nActual production: "
-    * print flow_str
+   68 print null
    69 print "/min"
    70 label __label4
    71 jump __label3 always
 
   107 set ICON_SIZE 16
   108 set ICON_X 11
   109 set ICON_Y1 11
-    * op add ICON_Y2 ICON_Y1 ROW_HEIGHT
-    * op add ICON_Y3 ICON_Y2 ROW_HEIGHT
-    * op add ICON_Y4 ICON_Y3 ROW_HEIGHT
+  110 op add ICON_Y2 11 19
+  111 op add ICON_Y3 30 19
+  112 op add ICON_Y4 49 19
   113 set BAR_X 20
   114 set BAR_Y1 4
-    * op add BAR_Y2 BAR_Y1 ROW_HEIGHT
-    * op add BAR_Y3 BAR_Y2 ROW_HEIGHT
-    * op add BAR_Y4 BAR_Y3 ROW_HEIGHT
+  115 op add BAR_Y2 4 19
+  116 op add BAR_Y3 23 19
+  117 op add BAR_Y4 42 19
   118 set BAR_LENGTH 56
-    * op div MULTIPLICATOR BAR_LENGTH 200
+  119 op div MULTIPLICATOR 56 200
   120 control enabled SWITCH 0
   121 label __label24
   122 sensor __tmp22 SWITCH @enabled
 
   124 set start @time
   125 draw clear 0 0 80
   126 draw color 255 255 255 255
-    * draw image ICON_X ICON_Y4 @titanium ICON_SIZE 0
-    * draw image ICON_X ICON_Y3 @silicon ICON_SIZE 0
-    * draw image ICON_X ICON_Y2 @copper ICON_SIZE 0
-    * draw image ICON_X ICON_Y1 @lead ICON_SIZE 0
+  127 draw image 11 68 @titanium 16 0
+  128 draw image 11 49 @silicon 16 0
+  129 draw image 11 30 @copper 16 0
+  130 draw image 11 11 @lead 16 0
   131 draw color 0 128 0 255
   132 sensor __tmp25 TITANIUM @totalItems
-    * op mul __tmp26 __tmp25 MULTIPLICATOR
-    * draw rect BAR_X BAR_Y4 __tmp26 BAR_HEIGHT
+  133 op mul __tmp26 __tmp25 0.28
+  134 draw rect 20 61 __tmp26 14
   135 sensor __tmp27 SILICON @totalItems
-    * op mul __tmp28 __tmp27 MULTIPLICATOR
-    * draw rect BAR_X BAR_Y3 __tmp28 BAR_HEIGHT
+  136 op mul __tmp28 __tmp27 0.28
+  137 draw rect 20 42 __tmp28 14
   138 sensor __tmp29 COPPER @totalItems
-    * op mul __tmp30 __tmp29 MULTIPLICATOR
-    * draw rect BAR_X BAR_Y2 __tmp30 BAR_HEIGHT
+  139 op mul __tmp30 __tmp29 0.28
+  140 draw rect 20 23 __tmp30 14
   141 sensor __tmp31 LEAD @totalItems
-    * op mul __tmp32 __tmp31 MULTIPLICATOR
-    * draw rect BAR_X BAR_Y1 __tmp32 BAR_HEIGHT
+  142 op mul __tmp32 __tmp31 0.28
+  143 draw rect 20 4 __tmp32 14
   144 draw color 0 255 0 255
-    * draw lineRect BAR_X BAR_Y4 BAR_LENGTH BAR_HEIGHT
-    * draw lineRect BAR_X BAR_Y3 BAR_LENGTH BAR_HEIGHT
-    * draw lineRect BAR_X BAR_Y2 BAR_LENGTH BAR_HEIGHT
-    * draw lineRect BAR_X BAR_Y1 BAR_LENGTH BAR_HEIGHT
+  145 draw lineRect 20 61 56 14
+  146 draw lineRect 20 42 56 14
+  147 draw lineRect 20 23 56 14
+  148 draw lineRect 20 4 56 14
   149 drawflush DISPLAY
   150 print "Surge Alloy Factory Driver Monitor\nElapsed (ms): "
   151 op sub __tmp33 @time start

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-17 instructions):
-    * set EXPECTED_FLOW_STR null
-    * set flow_str null
     0 set SWITCH null
     1 set DISPLAY null
-    * set MESSAGE SWITCH
+    2 set MESSAGE null
     3 label __label0
     4 set TITANIUM null
     5 set SILICON null
 
   100 op or __tmp14 __tmp12 __tmp13
   101 jump __label0 notEqual __tmp14 false
   102 label __label2
-    * set ROW_HEIGHT 19
-    * set BAR_HEIGHT 14
-    * set ICON_SIZE 16
-    * set ICON_X 11
-    * set ICON_Y1 11
-    * op add ICON_Y2 11 19
-    * op add ICON_Y3 30 19
-    * op add ICON_Y4 49 19
-    * set BAR_X 20
-    * set BAR_Y1 4
-    * op add BAR_Y2 4 19
-    * op add BAR_Y3 23 19
-    * op add BAR_Y4 42 19
-    * set BAR_LENGTH 56
-    * op div MULTIPLICATOR 56 200
   103 control enabled SWITCH 0
   104 label __label24
   105 sensor __tmp22 SWITCH @enabled

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1:
 
    12 set n @links
    13 label __label3
    14 jump __label5 lessThanEq n 0
+   15 label __label27
    16 op sub n n 1
    17 getlink block n
    18 sensor __tmp4 block @type
 
    67 print null
    68 print "/min"
    69 label __label4
-    * jump __label3 always
+   70 jump __label27 greaterThan n 0
    71 label __label5
    72 print "Message: "
    73 print MESSAGE

Modifications by Loop Optimization: replicate condition at line 68 (+1 instructions):
 
   105 label __label24
   106 sensor __tmp22 SWITCH @enabled
   107 jump __label26 notEqual __tmp22 0
+  108 label __label28
   109 set start @time
   110 draw clear 0 0 80
   111 draw color 255 255 255 255
 
   138 print __tmp34
   139 printflush MESSAGE
   140 label __label25
-    * jump __label24 always
+  141 sensor __tmp22 SWITCH @enabled
+  142 jump __label28 equal __tmp22 0
   143 label __label26
   144 end

Modifications by Final phase, Jump Threading, iteration 1:
 
    32 jump __label14 notEqual __tmp6 @titanium
    33 label __label15
    34 set TITANIUM block
-    * jump __label13 always
+   35 jump __label6 always
    36 label __label14
    37 jump __label16 notEqual __tmp6 @silicon
    38 label __label17
    39 set SILICON block
-    * jump __label13 always
+   40 jump __label6 always
    41 label __label16
    42 jump __label18 notEqual __tmp6 @copper
    43 label __label19
    44 set COPPER block
-    * jump __label13 always
+   45 jump __label6 always
    46 label __label18
-    * jump __label20 notEqual __tmp6 @lead
+   47 jump __label6 notEqual __tmp6 @lead
    48 label __label21
    49 set LEAD block
    50 label __label20

Modifications by Final phase, Single Step Elimination, iteration 1 (-1 instructions):
 
   141 sensor __tmp22 SWITCH @enabled
   142 jump __label28 equal __tmp22 0
   143 label __label26
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-9 instructions):
 
     6 set COPPER null
     7 set LEAD null
     8 print "Surge Alloy Factory Driver Monitor"
-    * print "\n"
-    * print "Configuring..."
-    * print "\n"
+    9 print "\nConfiguring...\n"
    10 set n @links
    11 label __label3
    12 jump __label5 lessThanEq n 0
 
    60 label __label6
    61 print "\nNominal production: "
    62 print null
-    * print "/min"
-    * print "\nActual production: "
+   63 print "/min\nActual production: "
    64 print null
    65 print "/min"
    66 label __label4
 
    68 label __label5
    69 print "Message: "
    70 print MESSAGE
-    * print "\n"
-    * print "Switch: "
+   71 print "\nSwitch: "
    72 print SWITCH
-    * print "\n"
-    * print "Display: "
+   73 print "\nDisplay: "
    74 print DISPLAY
-    * print "\n"
-    * print "Titanium: "
+   75 print "\nTitanium: "
    76 print TITANIUM
-    * print "\n"
-    * print "Silicon: "
+   77 print "\nSilicon: "
    78 print SILICON
-    * print "\n"
-    * print "Copper: "
+   79 print "\nCopper: "
    80 print COPPER
-    * print "\n"
-    * print "Lead: "
+   81 print "\nLead: "
    82 print LEAD
    83 print "\n"
    84 printflush MESSAGE

Final code before resolving virtual instructions:

set SWITCH null
set DISPLAY null
set MESSAGE null
label __label0
set TITANIUM null
set SILICON null
set COPPER null
set LEAD null
print "Surge Alloy Factory Driver Monitor"
print "\nConfiguring...\n"
set n @links
jump __label5 lessThanEq n 0
label __label27
op sub n n 1
getlink block n
sensor __tmp4 block @type
jump __label7 notEqual __tmp4 @message
set MESSAGE block
jump __label6 always 0 0
label __label7
jump __label9 notEqual __tmp4 @switch
set SWITCH block
jump __label6 always 0 0
label __label9
jump __label11 notEqual __tmp4 @mass-driver
sensor __tmp6 block @firstItem
jump __label14 notEqual __tmp6 @titanium
set TITANIUM block
jump __label6 always 0 0
label __label14
jump __label16 notEqual __tmp6 @silicon
set SILICON block
jump __label6 always 0 0
label __label16
jump __label18 notEqual __tmp6 @copper
set COPPER block
jump __label6 always 0 0
label __label18
jump __label6 notEqual __tmp6 @lead
set LEAD block
jump __label6 always 0 0
label __label11
jump __label22 notEqual __tmp4 @logic-display
set DISPLAY block
jump __label6 always 0 0
label __label22
print "\n"
print block
print " is not supported."
label __label6
print "\nNominal production: "
print null
print "/min\nActual production: "
print null
print "/min"
jump __label27 greaterThan n 0
label __label5
print "Message: "
print MESSAGE
print "\nSwitch: "
print SWITCH
print "\nDisplay: "
print DISPLAY
print "\nTitanium: "
print TITANIUM
print "\nSilicon: "
print SILICON
print "\nCopper: "
print COPPER
print "\nLead: "
print LEAD
print "\n"
printflush MESSAGE
op equal __tmp8 TITANIUM null
op equal __tmp9 SILICON null
op or __tmp10 __tmp8 __tmp9
op equal __tmp11 COPPER null
op or __tmp12 __tmp10 __tmp11
op equal __tmp13 LEAD null
op or __tmp14 __tmp12 __tmp13
jump __label0 notEqual __tmp14 false
control enabled SWITCH 0 0 0 0
sensor __tmp22 SWITCH @enabled
jump __label26 notEqual __tmp22 0
label __label28
set start @time
draw clear 0 0 80 0 0 0
draw color 255 255 255 255 0 0
draw image 11 68 @titanium 16 0 0
draw image 11 49 @silicon 16 0 0
draw image 11 30 @copper 16 0 0
draw image 11 11 @lead 16 0 0
draw color 0 128 0 255 0 0
sensor __tmp25 TITANIUM @totalItems
op mul __tmp26 __tmp25 0.28
draw rect 20 61 __tmp26 14 0 0
sensor __tmp27 SILICON @totalItems
op mul __tmp28 __tmp27 0.28
draw rect 20 42 __tmp28 14 0 0
sensor __tmp29 COPPER @totalItems
op mul __tmp30 __tmp29 0.28
draw rect 20 23 __tmp30 14 0 0
sensor __tmp31 LEAD @totalItems
op mul __tmp32 __tmp31 0.28
draw rect 20 4 __tmp32 14 0 0
draw color 0 255 0 255 0 0
draw lineRect 20 61 56 14 0 0
draw lineRect 20 42 56 14 0 0
draw lineRect 20 23 56 14 0 0
draw lineRect 20 4 56 14 0 0
drawflush DISPLAY
print "Surge Alloy Factory Driver Monitor\nElapsed (ms): "
op sub __tmp33 @time start
op floor __tmp34 __tmp33 0
print __tmp34
printflush MESSAGE
sensor __tmp22 SWITCH @enabled
jump __label28 equal __tmp22 0
label __label26
