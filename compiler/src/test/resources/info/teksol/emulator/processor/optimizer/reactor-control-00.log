   628 instructions before optimizations.
    69 instructions eliminated by Temp Variables Elimination.
     4 instructions eliminated by Case Expression Optimization.
    85 instructions eliminated by Dead Code Elimination (6 iterations).
     1 instructions eliminated by Jump Normalization (5 iterations).
    25 instructions eliminated by Jump Optimization (5 iterations).
    32 instructions eliminated by Single Step Elimination (3 passes, 8 iterations).
     1 instructions eliminated by Expression Optimization (4 iterations).
     2 instructions eliminated by If Expression Optimization (2 passes, 4 iterations).
     6 instructions eliminated by Data Flow Optimization (2 passes, 7 iterations).
     1 instructions eliminated by Loop Optimization (4 iterations).
     3 loops improved by Loop Optimization.
    11 instructions eliminated by Jump Straightening (5 iterations).
    10 instructions updated by JumpThreading.
     1 instructions eliminated by Unreachable Code Elimination.
     2 instructions eliminated by Print Merging.
   388 instructions after optimizations.

Modifications by Initial phase, Case Expression Optimization, iteration 1 (-4 instructions):
 
    20 print block
    21 print "\n"
    22 sensor __tmp5 block @type
-    * set __ast0 __tmp5
-    * jump __label8 equal __ast0 @impact-reactor
+   23 jump __label8 equal __tmp5 @impact-reactor
    24 jump __label7 always
    25 label __label8
    26 set START n
 
    29 set __tmp6 reactors
    30 jump __label6 always
    31 label __label7
-    * jump __label10 equal __ast0 @overdrive-projector
-    * jump __label10 equal __ast0 @overdrive-dome
+   32 jump __label10 equal __tmp5 @overdrive-projector
+   33 jump __label10 equal __tmp5 @overdrive-dome
    34 jump __label9 always
    35 label __label10
    36 set START n
 
   182 label __label18
   183 set __tmp45 null
   184 label __label19
-    * set __ast1 MODE
-    * jump __label28 equal __ast1 0
+  185 jump __label28 equal MODE 0
   186 jump __label27 always
   187 label __label28
   188 set __tmp63 "[salmon]SHUTDOWN[]"
   189 jump __label26 always
   190 label __label27
-    * jump __label30 equal __ast1 1
+  191 jump __label30 equal MODE 1
   192 jump __label29 always
   193 label __label30
   194 set __tmp63 "[gold]STARTUP[]"
   195 jump __label26 always
   196 label __label29
-    * jump __label32 equal __ast1 2
+  197 jump __label32 equal MODE 2
   198 jump __label31 always
   199 label __label32
   200 set __tmp63 "[green]RUNNING[]"
 
   268 print "\nPower balance:       [gold]"
   269 print net_power
   270 print "[]"
-    * set __ast2 MODE
-    * jump __label43 equal __ast2 0
+  271 jump __label43 equal MODE 0
   272 jump __label42 always
   273 label __label43
   274 set REACTORS_ON 0
 
   300 set __tmp78 __tmp83
   301 jump __label41 always
   302 label __label42
-    * jump __label47 equal __ast2 1
+  303 jump __label47 equal MODE 1
   304 jump __label46 always
   305 label __label47
   306 jump __label48 equal OUTPUT_1 false
 
   442 set __tmp78 __tmp92
   443 jump __label41 always
   444 label __label46
-    * jump __label73 equal __ast2 2
+  445 jump __label73 equal MODE 2
   446 jump __label72 always
   447 label __label73
   448 sensor __tmp131 tank1 @totalLiquids
 
   649 getlink __tmp199 n
   650 set block __tmp199
   651 sensor __tmp200 block @type
-    * set __ast3 __tmp200
-    * jump __label107 equal __ast3 @impact-reactor
+  652 jump __label107 equal __tmp200 @impact-reactor
   653 jump __label106 always
   654 label __label107
   655 op add __tmp202 reactors 1
 
   669 set __tmp201 __tmp204
   670 jump __label105 always
   671 label __label106
-    * jump __label111 equal __ast3 @overdrive-projector
-    * jump __label111 equal __ast3 @overdrive-dome
+  672 jump __label111 equal __tmp200 @overdrive-projector
+  673 jump __label111 equal __tmp200 @overdrive-dome
   674 jump __label110 always
   675 label __label111
   676 control enabled block OVERDRIVE
   677 set __tmp201 OVERDRIVE
   678 jump __label105 always
   679 label __label110
-    * jump __label113 equal __ast3 @conduit
-    * jump __label113 equal __ast3 @pulse-conduit
-    * jump __label113 equal __ast3 @plated-conduit
-    * jump __label113 equal __ast3 @conveyor
-    * jump __label113 equal __ast3 @titanium-conveyor
-    * jump __label113 equal __ast3 @plastanium-conveyor
-    * jump __label113 equal __ast3 @armored-conveyor
+  680 jump __label113 equal __tmp200 @conduit
+  681 jump __label113 equal __tmp200 @pulse-conduit
+  682 jump __label113 equal __tmp200 @plated-conduit
+  683 jump __label113 equal __tmp200 @conveyor
+  684 jump __label113 equal __tmp200 @titanium-conveyor
+  685 jump __label113 equal __tmp200 @plastanium-conveyor
+  686 jump __label113 equal __tmp200 @armored-conveyor
   687 jump __label112 always
   688 label __label113
   689 control enabled block startup

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-57 instructions):
 
    26 set START n
    27 op add __tmp7 reactors 1
    28 set reactors __tmp7
-    * set __tmp6 reactors
    29 jump __label6 always
    30 label __label7
    31 jump __label10 equal __tmp5 @overdrive-projector
 
    33 jump __label9 always
    34 label __label10
    35 set START n
-    * set __tmp6 START
    36 jump __label6 always
    37 label __label9
-    * set __tmp6 null
    38 label __label6
    39 label __label4
    40 jump __label3 always
 
    45 op equal __tmp10 reactors 0
    46 jump __label11 equal __tmp10 false
    47 print "No reactor."
-    * set __tmp11 "No reactor."
    48 jump __label12 always
    49 label __label11
-    * set __tmp11 null
    50 label __label12
    51 printflush message1
    52 label __label1
 
    78 op equal __tmp23 MODE 0
    79 jump __label13 equal __tmp23 false
    80 set REASON "Processor reset"
-    * set __tmp24 REASON
    81 jump __label14 always
    82 label __label13
    83 set REASON "Reason unknown -- out of power?"
-    * set __tmp24 REASON
    84 label __label14
    85 op notEqual __tmp25 MODE 0
    86 control enabled switch1 __tmp25
 
   170 label __label23
   171 set __tmp48 __tmp57
   172 label __label21
-    * set __tmp45 __tmp48
   173 jump __label19 always
   174 label __label18
-    * set __tmp45 null
   175 label __label19
   176 jump __label28 equal MODE 0
   177 jump __label27 always
 
   210 print " ([gold]"
   211 print multiplier
   212 print "x[])"
-    * set __tmp64 "x[])"
   213 jump __label34 always
   214 label __label33
-    * set __tmp64 null
   215 label __label34
   216 print "\n=================================="
   217 sensor __tmp70 tank1 @totalLiquids
   218 op lessThan __tmp71 __tmp70 750
   219 jump __label35 equal __tmp71 false
   220 print "\n[salmon]Cryofluid level critical![]"
-    * set __tmp72 "\n[salmon]Cryofluid level critical![]"
   221 jump __label36 always
   222 label __label35
-    * set __tmp72 null
   223 label __label36
   224 sensor __tmp73 vault1 @blast-compound
   225 op lessThan __tmp74 __tmp73 700
   226 jump __label37 equal __tmp74 false
   227 print "\n[salmon]Blast compound level critical![]"
-    * set __tmp75 "\n[salmon]Blast compound level critical![]"
   228 jump __label38 always
   229 label __label37
-    * set __tmp75 null
   230 label __label38
   231 op equal __tmp76 enough_battery false
   232 jump __label39 equal __tmp76 false
 
   234 print "\nLink [gold]"
   235 print missing_battery
   236 print " K[] of additional storage to internal battery."
-    * set __tmp77 null
   237 jump __label40 always
   238 label __label39
-    * set __tmp77 null
   239 label __label40
   240 print "\nInternal battery:    [gold]"
   241 print battery_level_str
 
   280 label __label44
   281 set __tmp83 null
   282 label __label45
-    * set __tmp78 __tmp83
   283 jump __label41 always
   284 label __label42
   285 jump __label47 equal MODE 1
 
   332 print "\nRequired power level: [gold]"
   333 print neededPower
   334 print "[]"
-    * set __tmp99 null
   335 jump __label57 always
   336 label __label56
-    * set __tmp99 null
   337 label __label57
   338 op greaterThan __tmp100 net_power 100
   339 jump __label58 equal __tmp100 false
   340 set OVERDRIVE true
-    * set __tmp101 OVERDRIVE
   341 jump __label59 always
   342 label __label58
-    * set __tmp101 null
   343 label __label59
   344 op lessThan __tmp102 REACTORS_ON reactors
   345 op greaterThan __tmp103 net_power 1000
 
   352 set OUTPUT_3 OUTPUT_2
   353 set OUTPUT_2 OUTPUT_1
   354 set OUTPUT_1 1
-    * set __tmp108 OUTPUT_1
   355 jump __label61 always
   356 label __label60
-    * set __tmp108 null
   357 label __label61
   358 op equal __tmp109 OUTPUT_1 0
   359 jump __label62 equal __tmp109 false
 
   370 label __label64
   371 set __tmp114 null
   372 label __label65
-    * set __tmp110 __tmp114
   373 jump __label63 always
   374 label __label62
-    * set __tmp110 null
   375 label __label63
   376 op greaterThan __tmp116 @time nextStart
   377 op land __tmp117 canStart __tmp116
 
   389 set REACTORS_ON __tmp122
   390 op add __tmp123 @time 2000
   391 set nextStart __tmp123
-    * set __tmp118 nextStart
   392 jump __label67 always
   393 label __label66
-    * set __tmp118 null
   394 label __label67
   395 op greaterThanEq __tmp124 REACTORS_ON reactors
   396 op greaterThan __tmp125 @time nextStart
 
   411 label __label71
   412 set __tmp92 __tmp129
   413 label __label53
-    * set __tmp78 __tmp92
   414 jump __label41 always
   415 label __label46
   416 jump __label73 equal MODE 2
 
   423 set MODE 0
   424 control enabled switch1 false
   425 set REASON "Cryo level too low"
-    * set __tmp134 REASON
   426 jump __label75 always
   427 label __label74
-    * set __tmp134 null
   428 label __label75
   429 sensor __tmp135 vault1 @blast-compound
   430 op lessThan __tmp136 __tmp135 700
 
   433 set MODE 0
   434 control enabled switch1 false
   435 set REASON "Blast compound level too low"
-    * set __tmp138 REASON
   436 jump __label77 always
   437 label __label76
-    * set __tmp138 null
   438 label __label77
   439 sensor __tmp139 tank1 @totalLiquids
   440 op greaterThan __tmp140 __tmp139 1000
 
   468 op idiv __tmp161 commit_level 1000
   469 print "\nCommit threshold:   [gold]"
   470 print __tmp161
-    * set __tmp153 __tmp161
   471 jump __label81 always
   472 label __label80
-    * set __tmp153 null
   473 label __label81
   474 op equal __tmp162 commit_level 0
   475 jump __label82 equal __tmp162 false
   476 op idiv __tmp164 min_level 1000
   477 print "\nRestart threshold: [gold]"
   478 print __tmp164
-    * set __tmp163 __tmp164
   479 jump __label83 always
   480 label __label82
-    * set __tmp163 null
   481 label __label83
   482 print "[] K"
   483 op lessThan __tmp165 total_battery min_level
 
   501 jump __label86 equal __tmp175 false
   502 op add __tmp177 @time 6000
   503 set nextDecommit __tmp177
-    * set __tmp176 nextDecommit
   504 jump __label87 always
   505 label __label86
-    * set __tmp176 null
   506 label __label87
   507 op greaterThan __tmp178 @time nextDecommit
   508 jump __label88 equal __tmp178 false
   509 jump __label90 equal OVERDRIVE false
   510 set OVERDRIVE false
-    * set __tmp180 OVERDRIVE
   511 jump __label91 always
   512 label __label90
   513 op sub __tmp181 REACTORS_ON 1
   514 op max __tmp182 __tmp181 1
   515 set REACTORS_ON __tmp182
   516 set CAN_COMMIT true
-    * set __tmp180 CAN_COMMIT
   517 label __label91
   518 op add __tmp183 @time 6000
   519 set nextDecommit __tmp183
 
   536 label __label89
   537 set __tmp169 __tmp179
   538 label __label85
-    * set __tmp147 __tmp169
   539 jump __label79 always
   540 label __label78
   541 sensor __tmp188 switch2 @enabled
   542 jump __label94 equal __tmp188 false
   543 print "\n[salmon]Load adapting not possible.[]"
-    * set __tmp189 "\n[salmon]Load adapting not possible.[]"
   544 jump __label95 always
   545 label __label94
   546 print "\n[gold]Load adapting not active.[]"
-    * set __tmp189 "\n[gold]Load adapting not active.[]"
   547 label __label95
   548 set REACTORS_ON reactors
   549 set OVERDRIVE true
-    * set __tmp147 OVERDRIVE
   550 label __label79
   551 op mul __tmp190 PLANT_PROTECTION 47500
   552 op lessThan __tmp191 total_battery __tmp190
   553 jump __label96 equal __tmp191 false
   554 set OUTPUT_2 0
   555 set OUTPUT_3 0
-    * set __tmp192 OUTPUT_3
   556 jump __label97 always
   557 label __label96
-    * set __tmp192 null
   558 label __label97
   559 op equal __tmp193 OUTPUT_2 0
   560 jump __label98 equal __tmp193 false
 
   573 label __label98
   574 set __tmp194 null
   575 label __label99
-    * set __tmp78 __tmp194
   576 jump __label41 always
   577 label __label72
-    * set __tmp78 null
   578 label __label41
   579 print "\n"
   580 print STARTUPS
 
   617 label __label108
   618 set __tmp204 null
   619 label __label109
-    * set __tmp201 __tmp204
   620 jump __label105 always
   621 label __label106
   622 jump __label111 equal __tmp200 @overdrive-projector
 
   624 jump __label110 always
   625 label __label111
   626 control enabled block OVERDRIVE
-    * set __tmp201 OVERDRIVE
   627 jump __label105 always
   628 label __label110
   629 jump __label113 equal __tmp200 @conduit
 
   636 jump __label112 always
   637 label __label113
   638 control enabled block startup
-    * set __tmp201 startup
   639 jump __label105 always
   640 label __label112
-    * set __tmp201 null
   641 label __label105
   642 label __label103
   643 op add n n 1
 
   654 read __tmp211 cell2 4
   655 op add __tmp212 boosts __tmp211
   656 set boosts __tmp212
-    * set __tmp208 boosts
   657 jump __label115 always
   658 label __label114
-    * set __tmp208 null
   659 label __label115
   660 op min __tmp213 REACTORS_ON reactors
   661 set REACTORS_ON __tmp213
 
   664 set STARTUPS 0
   665 set RESETS 0
   666 set COMMITS 0
-    * set __tmp215 COMMITS
   667 jump __label117 always
   668 label __label116
   669 write MODE cell1 0
 
   677 write STARTUPS cell1 8
   678 write RESETS cell1 9
   679 write COMMITS cell1 10
-    * set __tmp215 COMMITS
   680 label __label117
   681 label __label16
   682 jump __label15 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-14 instructions):
 
   128 jump __label20 equal __tmp47 false
   129 set MODE 0
   130 set REASON "Manual power off"
-    * set __tmp48 REASON
   131 jump __label21 always
   132 label __label20
   133 op mul __tmp49 REACTORS_ON 1200
 
   167 set failure_cnt 0
   168 set __tmp57 failure_cnt
   169 label __label23
-    * set __tmp48 __tmp57
   170 label __label21
   171 jump __label19 always
   172 label __label18
 
   273 set failure_cnt 0
   274 set GENERATOR true
   275 set REASON "Unknown -- out of power?"
-    * set __tmp83 REASON
   276 jump __label45 always
   277 label __label44
-    * set __tmp83 null
   278 label __label45
   279 jump __label41 always
   280 label __label42
 
   314 print " K[]"
   315 set __tmp94 " K[]"
   316 label __label55
-    * set __tmp92 __tmp94
   317 jump __label53 always
   318 label __label52
   319 op add __tmp96 OUTPUT_1 OUTPUT_2
 
   360 jump __label64 equal __tmp113 false
   361 op add __tmp115 @time 2000
   362 set nextStart __tmp115
-    * set __tmp114 nextStart
   363 jump __label65 always
   364 label __label64
-    * set __tmp114 null
   365 label __label65
   366 jump __label63 always
   367 label __label62
 
   402 label __label70
   403 set __tmp129 null
   404 label __label71
-    * set __tmp92 __tmp129
   405 label __label53
   406 jump __label41 always
   407 label __label46
 
   484 set REACTORS_ON reactors
   485 op add __tmp172 @time 6000
   486 set nextDecommit __tmp172
-    * set __tmp169 nextDecommit
   487 jump __label85 always
   488 label __label84
   489 op lessThan __tmp173 battery_level 47500
 
   525 label __label93
   526 set __tmp179 __tmp185
   527 label __label89
-    * set __tmp169 __tmp179
   528 label __label85
   529 jump __label79 always
   530 label __label78
 
   558 print "\n*** [gold]Surge tower 2 offline[] ***"
   559 set __tmp196 "\n*** [gold]Surge tower 2 offline[] ***"
   560 label __label101
-    * set __tmp194 __tmp196
   561 jump __label99 always
   562 label __label98
-    * set __tmp194 null
   563 label __label99
   564 jump __label41 always
   565 label __label72
 
   600 sensor __tmp205 block @timescale
   601 op add __tmp206 boosts __tmp205
   602 set boosts __tmp206
-    * set __tmp204 boosts
   603 jump __label109 always
   604 label __label108
-    * set __tmp204 null
   605 label __label109
   606 jump __label105 always
   607 label __label106

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-10 instructions):
 
   161 label __label24
   162 set __tmp62 null
   163 label __label25
-    * set __tmp57 __tmp62
   164 jump __label23 always
   165 label __label22
   166 set failure_cnt 0
-    * set __tmp57 failure_cnt
   167 label __label23
   168 label __label21
   169 jump __label19 always
 
   304 set REACTORS_ON 1
   305 op add __tmp95 @time 2000
   306 set nextStart __tmp95
-    * set __tmp94 nextStart
   307 jump __label55 always
   308 label __label54
   309 print "\nRequired startup energy: [gold]"
   310 print 25
   311 print " K[]"
-    * set __tmp94 " K[]"
   312 label __label55
   313 jump __label53 always
   314 label __label52
 
   393 set COOLANT_FLAG 0
   394 set FUEL_FLAG 0
   395 set GENERATOR false
-    * set __tmp129 GENERATOR
   396 jump __label71 always
   397 label __label70
-    * set __tmp129 null
   398 label __label71
   399 label __label53
   400 jump __label41 always
 
   502 label __label91
   503 op add __tmp183 @time 6000
   504 set nextDecommit __tmp183
-    * set __tmp179 nextDecommit
   505 jump __label89 always
   506 label __label88
   507 op lessThan __tmp184 total_battery commit_level
 
   516 label __label92
   517 set __tmp185 null
   518 label __label93
-    * set __tmp179 __tmp185
   519 label __label89
   520 label __label85
   521 jump __label79 always
 
   544 jump __label100 equal __tmp195 false
   545 set OUTPUT_2 1
   546 set OUTPUT_3 1
-    * set __tmp196 OUTPUT_3
   547 jump __label101 always
   548 label __label100
   549 print "\n*** [gold]Surge tower 2 offline[] ***"
-    * set __tmp196 "\n*** [gold]Surge tower 2 offline[] ***"
   550 label __label101
   551 jump __label99 always
   552 label __label98

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   156 print "\nMin. consumption: "
   157 print min_consumption
   158 printflush message2
-    * set __tmp62 null
   159 jump __label25 always
   160 label __label24
-    * set __tmp62 null
   161 label __label25
   162 jump __label23 always
   163 label __label22
 
   509 op add __tmp187 COMMITS 1
   510 set COMMITS __tmp187
   511 set CAN_COMMIT false
-    * set __tmp185 CAN_COMMIT
   512 jump __label93 always
   513 label __label92
-    * set __tmp185 null
   514 label __label93
   515 label __label89
   516 label __label85

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-69 instructions):
 
     7 op equal __tmp0 reactors 0
     8 jump __label2 equal __tmp0 false
     9 set reactors 0
-    * set __tmp1 @links
-    * set n __tmp1
+   10 set n @links
    11 label __label3
    12 op greaterThan __tmp2 n 0
    13 jump __label5 equal __tmp2 false
-    * op sub __tmp3 n 1
-    * set n __tmp3
-    * getlink __tmp4 n
-    * set block __tmp4
+   14 op sub n n 1
+   15 getlink block n
    16 print "Found: "
    17 print block
    18 print "\n"
 
    21 jump __label7 always
    22 label __label8
    23 set START n
-    * op add __tmp7 reactors 1
-    * set reactors __tmp7
+   24 op add reactors reactors 1
    25 jump __label6 always
    26 label __label7
    27 jump __label10 equal __tmp5 @overdrive-projector
 
    36 jump __label3 always
    37 label __label5
    38 read __tmp8 cell2 1
-    * op add __tmp9 reactors __tmp8
-    * set reactors __tmp9
+   39 op add reactors reactors __tmp8
    40 op equal __tmp10 reactors 0
    41 jump __label11 equal __tmp10 false
    42 print "No reactor."
 
    47 label __label1
    48 jump __label0 always
    49 label __label2
-    * read __tmp12 cell1 0
-    * set MODE __tmp12
-    * read __tmp13 cell1 1
-    * set OUTPUT_1 __tmp13
-    * read __tmp14 cell1 2
-    * set OUTPUT_2 __tmp14
-    * read __tmp15 cell1 3
-    * set OUTPUT_3 __tmp15
-    * read __tmp16 cell1 4
-    * set REACTORS_ON __tmp16
-    * read __tmp17 cell1 5
-    * set OVERDRIVE __tmp17
-    * read __tmp18 cell1 6
-    * set GENERATOR __tmp18
-    * read __tmp19 cell1 7
-    * set CAN_COMMIT __tmp19
-    * read __tmp20 cell1 8
-    * set STARTUPS __tmp20
-    * read __tmp21 cell1 9
-    * set RESETS __tmp21
-    * read __tmp22 cell1 10
-    * set COMMITS __tmp22
+   50 read MODE cell1 0
+   51 read OUTPUT_1 cell1 1
+   52 read OUTPUT_2 cell1 2
+   53 read OUTPUT_3 cell1 3
+   54 read REACTORS_ON cell1 4
+   55 read OVERDRIVE cell1 5
+   56 read GENERATOR cell1 6
+   57 read CAN_COMMIT cell1 7
+   58 read STARTUPS cell1 8
+   59 read RESETS cell1 9
+   60 read COMMITS cell1 10
    61 set reactors REACTORS_ON
    62 op equal __tmp23 MODE 0
    63 jump __label13 equal __tmp23 false
 
    71 set failure_cnt 0
    72 set boosts 0
    73 set nextStart 0
-    * op add __tmp26 @time 6000
-    * set nextDecommit __tmp26
+   74 op add nextDecommit @time 6000
    75 label __label15
    76 jump __label17 equal true false
    77 sensor __tmp27 battery1 @totalPower
-    * op floor __tmp28 __tmp27
-    * set battery_level __tmp28
-    * op idiv __tmp29 battery_level 1000
-    * set battery_level_str __tmp29
+   78 op floor battery_level __tmp27
+   79 op idiv battery_level_str battery_level 1000
    80 sensor __tmp30 battery1 @powerNetStored
-    * op floor __tmp31 __tmp30
-    * set total_battery __tmp31
-    * op idiv __tmp32 total_battery 1000
-    * set total_battery_str __tmp32
-    * sensor __tmp33 battery1 @powerNetOut
-    * set consumption __tmp33
-    * read __tmp34 bank1 509
-    * set production __tmp34
-    * read __tmp35 bank1 510
-    * set net_power __tmp35
-    * read __tmp36 bank1 511
-    * set battery_change __tmp36
-    * sensor __tmp37 battery1 @powerNetCapacity
-    * set total_capacity __tmp37
-    * op idiv __tmp38 total_capacity 1000
-    * set total_capacity_str __tmp38
-    * op mul __tmp39 100000 reactors
-    * set required_capacity __tmp39
-    * op greaterThanEq __tmp40 total_capacity required_capacity
-    * set enough_battery __tmp40
+   81 op floor total_battery __tmp30
+   82 op idiv total_battery_str total_battery 1000
+   83 sensor consumption battery1 @powerNetOut
+   84 read production bank1 509
+   85 read net_power bank1 510
+   86 read battery_change bank1 511
+   87 sensor total_capacity battery1 @powerNetCapacity
+   88 op idiv total_capacity_str total_capacity 1000
+   89 op mul required_capacity 100000 reactors
+   90 op greaterThanEq enough_battery total_capacity required_capacity
    91 op sub __tmp41 required_capacity total_capacity
    92 op div __tmp42 __tmp41 1000
-    * op ceil __tmp43 __tmp42
-    * set missing_battery __tmp43
+   93 op ceil missing_battery __tmp42
    94 op notEqual __tmp44 MODE 0
    95 jump __label18 equal __tmp44 false
    96 sensor __tmp46 switch1 @enabled
 
   100 set REASON "Manual power off"
   101 jump __label21 always
   102 label __label20
-    * op mul __tmp49 REACTORS_ON 1200
-    * set min_consumption __tmp49
-    * op lessThan __tmp50 consumption min_consumption
-    * set failure1 __tmp50
+  103 op mul min_consumption REACTORS_ON 1200
+  104 op lessThan failure1 consumption min_consumption
   105 op equal __tmp51 battery_level 0
   106 op greaterThan __tmp52 consumption 0
   107 op land __tmp53 __tmp51 __tmp52
   108 op equal __tmp54 production 0
-    * op land __tmp55 __tmp53 __tmp54
-    * set failure2 __tmp55
+  109 op land failure2 __tmp53 __tmp54
   110 op or __tmp56 failure1 failure2
   111 jump __label22 equal __tmp56 false
-    * op add __tmp58 failure_cnt 1
-    * set failure_cnt __tmp58
+  112 op add failure_cnt failure_cnt 1
   113 read __tmp59 cell2 1
   114 op add __tmp60 10 __tmp59
   115 op greaterThan __tmp61 failure_cnt __tmp60
 
   165 op div __tmp66 __tmp65 REACTORS_ON
   166 op add __tmp67 __tmp66 0.5
   167 op floor __tmp68 __tmp67
-    * op div __tmp69 __tmp68 100
-    * set multiplier __tmp69
+  168 op div multiplier __tmp68 100
   169 print " ([gold]"
   170 print multiplier
   171 print "x[])"
 
   220 set OUTPUT_3 0
   221 op greaterThanEq __tmp79 net_power -150
   222 op lessThan __tmp80 total_battery 47500
-    * op land __tmp81 __tmp79 __tmp80
-    * set GENERATOR __tmp81
+  223 op land GENERATOR __tmp79 __tmp80
   224 print "\nShutdown reason: [gold]"
   225 print REASON
   226 print "[]"
   227 sensor __tmp82 switch1 @enabled
   228 jump __label44 equal __tmp82 false
   229 set MODE 1
-    * op add __tmp84 STARTUPS 1
-    * set STARTUPS __tmp84
+  230 op add STARTUPS STARTUPS 1
   231 set nextStart 0
   232 set failure_cnt 0
   233 set GENERATOR true
 
   256 sensor __tmp87 nextBattery @powerNetOut
   257 op mul __tmp88 __tmp87 1.05
   258 op floor __tmp89 __tmp88
-    * op max __tmp90 __tmp89 1000
-    * set neededPower __tmp90
+  259 op max neededPower __tmp89 1000
   260 op equal __tmp91 REACTORS_ON 0
   261 jump __label52 equal __tmp91 false
   262 op greaterThanEq __tmp93 total_battery 25000
   263 jump __label54 equal __tmp93 false
   264 set REACTORS_ON 1
-    * op add __tmp95 @time 2000
-    * set nextStart __tmp95
+  265 op add nextStart @time 2000
   266 jump __label55 always
   267 label __label54
   268 print "\nRequired startup energy: [gold]"
 
   272 jump __label53 always
   273 label __label52
   274 op add __tmp96 OUTPUT_1 OUTPUT_2
-    * op add __tmp97 __tmp96 OUTPUT_3
-    * set outputs __tmp97
+  275 op add outputs __tmp96 OUTPUT_3
   276 print "\n[gold]"
   277 print outputs
   278 print "[] surge tower(s) online"
 
   294 op greaterThan __tmp103 net_power 1000
   295 op land __tmp104 __tmp102 __tmp103
   296 op greaterThanEq __tmp105 total_battery 25000
-    * op land __tmp106 __tmp104 __tmp105
-    * set canStart __tmp106
+  297 op land canStart __tmp104 __tmp105
   298 op greaterThanEq __tmp107 net_power neededPower
   299 jump __label60 equal __tmp107 false
   300 set OUTPUT_3 OUTPUT_2
 
   305 label __label61
   306 op equal __tmp109 OUTPUT_1 0
   307 jump __label62 equal __tmp109 false
-    * op mul __tmp111 6300 boosts
-    * set availablePower __tmp111
-    * op div __tmp112 neededPower availablePower
-    * set ratio __tmp112
+  308 op mul availablePower 6300 boosts
+  309 op div ratio neededPower availablePower
   310 op lessThan __tmp113 ratio 1
   311 jump __label64 equal __tmp113 false
-    * op add __tmp115 @time 2000
-    * set nextStart __tmp115
+  312 op add nextStart @time 2000
   313 jump __label65 always
   314 label __label64
   315 label __label65
 
   320 op land __tmp117 canStart __tmp116
   321 jump __label66 equal __tmp117 false
   322 jump __label68 equal FAST_START false
-    * op idiv __tmp120 total_battery 25000
-    * set __tmp119 __tmp120
+  323 op idiv __tmp119 total_battery 25000
   324 jump __label69 always
   325 label __label68
   326 set __tmp119 1
   327 label __label69
   328 set start_at_once __tmp119
   329 op add __tmp121 REACTORS_ON start_at_once
-    * op min __tmp122 __tmp121 reactors
-    * set REACTORS_ON __tmp122
-    * op add __tmp123 @time 2000
-    * set nextStart __tmp123
+  330 op min REACTORS_ON __tmp121 reactors
+  331 op add nextStart @time 2000
   332 jump __label67 always
   333 label __label66
   334 label __label67
 
   339 op land __tmp128 __tmp126 __tmp127
   340 jump __label70 equal __tmp128 false
   341 set MODE 2
-    * op add __tmp130 @time 6000
-    * set nextDecommit __tmp130
+  342 op add nextDecommit @time 6000
   343 set COOLANT_FLAG 0
   344 set FUEL_FLAG 0
   345 set GENERATOR false
 
   374 label __label77
   375 sensor __tmp139 tank1 @totalLiquids
   376 op greaterThan __tmp140 __tmp139 1000
-    * op or __tmp141 COOLANT_FLAG __tmp140
-    * set COOLANT_FLAG __tmp141
+  377 op or COOLANT_FLAG COOLANT_FLAG __tmp140
   378 sensor __tmp142 vault1 @blast-compound
   379 op greaterThan __tmp143 __tmp142 800
-    * op or __tmp144 FUEL_FLAG __tmp143
-    * set FUEL_FLAG __tmp144
+  380 op or FUEL_FLAG FUEL_FLAG __tmp143
   381 sensor __tmp145 switch2 @enabled
   382 op land __tmp146 enough_battery __tmp145
   383 jump __label78 equal __tmp146 false
-    * op mul __tmp148 0.5 required_capacity
-    * set min_level __tmp148
+  384 op mul min_level 0.5 required_capacity
   385 set commit_level 0
   386 op lessThan __tmp149 battery_change 0
   387 op land __tmp150 CAN_COMMIT __tmp149
 
   389 op land __tmp152 __tmp150 __tmp151
   390 jump __label80 equal __tmp152 false
   391 op sub __tmp154 battery_change 1500
-    * op sub __tmp155 __tmp154 1000
-    * set p __tmp155
+  392 op sub p __tmp154 1000
   393 op mul __tmp156 p 0.00472972972972973
   394 op add __tmp157 -5 __tmp156
   395 op mul __tmp158 p __tmp157
-    * op add __tmp159 25000 __tmp158
-    * set commit_margin __tmp159
-    * op add __tmp160 min_level commit_margin
-    * set commit_level __tmp160
+  396 op add commit_margin 25000 __tmp158
+  397 op add commit_level min_level commit_margin
   398 op idiv __tmp161 commit_level 1000
   399 print "\nCommit threshold:   [gold]"
   400 print __tmp161
 
   416 op or __tmp168 __tmp165 __tmp167
   417 jump __label84 equal __tmp168 false
   418 op equal __tmp170 OVERDRIVE false
-    * op add __tmp171 RESETS __tmp170
-    * set RESETS __tmp171
+  419 op add RESETS RESETS __tmp170
   420 set OVERDRIVE true
   421 set REACTORS_ON reactors
-    * op add __tmp172 @time 6000
-    * set nextDecommit __tmp172
+  422 op add nextDecommit @time 6000
   423 jump __label85 always
   424 label __label84
   425 op lessThan __tmp173 battery_level 47500
   426 op lessThan __tmp174 battery_change -100
   427 op or __tmp175 __tmp173 __tmp174
   428 jump __label86 equal __tmp175 false
-    * op add __tmp177 @time 6000
-    * set nextDecommit __tmp177
+  429 op add nextDecommit @time 6000
   430 jump __label87 always
   431 label __label86
   432 label __label87
 
   437 jump __label91 always
   438 label __label90
   439 op sub __tmp181 REACTORS_ON 1
-    * op max __tmp182 __tmp181 1
-    * set REACTORS_ON __tmp182
+  440 op max REACTORS_ON __tmp181 1
   441 set CAN_COMMIT true
   442 label __label91
-    * op add __tmp183 @time 6000
-    * set nextDecommit __tmp183
+  443 op add nextDecommit @time 6000
   444 jump __label89 always
   445 label __label88
   446 op lessThan __tmp184 total_battery commit_level
   447 jump __label92 equal __tmp184 false
-    * op add __tmp186 REACTORS_ON 1
-    * set REACTORS_ON __tmp186
-    * op add __tmp187 COMMITS 1
-    * set COMMITS __tmp187
+  448 op add REACTORS_ON REACTORS_ON 1
+  449 op add COMMITS COMMITS 1
   450 set CAN_COMMIT false
   451 jump __label93 always
   452 label __label92
 
   501 control enabled diode3 OUTPUT_3
   502 control enabled generator1 GENERATOR
   503 control enabled generator2 GENERATOR
-    * op equal __tmp197 MODE 1
-    * set startup __tmp197
+  504 op equal startup MODE 1
   505 set reactors 0
   506 set boosts 0
   507 set enabled true
 
   509 set n START
   510 label __label102
   511 jump __label104 greaterThanEq n __tmp198
-    * getlink __tmp199 n
-    * set block __tmp199
+  512 getlink block n
   513 sensor __tmp200 block @type
   514 jump __label107 equal __tmp200 @impact-reactor
   515 jump __label106 always
   516 label __label107
-    * op add __tmp202 reactors 1
-    * set reactors __tmp202
-    * op lessThanEq __tmp203 reactors REACTORS_ON
-    * set enabled __tmp203
+  517 op add reactors reactors 1
+  518 op lessThanEq enabled reactors REACTORS_ON
   519 control enabled block enabled
   520 jump __label108 equal enabled false
   521 sensor __tmp205 block @timescale
-    * op add __tmp206 boosts __tmp205
-    * set boosts __tmp206
+  522 op add boosts boosts __tmp205
   523 jump __label109 always
   524 label __label108
   525 label __label109
 
   555 write REACTORS_ON cell2 2
   556 write OVERDRIVE cell2 3
   557 read __tmp209 cell2 1
-    * op add __tmp210 reactors __tmp209
-    * set reactors __tmp210
+  558 op add reactors reactors __tmp209
   559 read __tmp211 cell2 4
-    * op add __tmp212 boosts __tmp211
-    * set boosts __tmp212
+  560 op add boosts boosts __tmp211
   561 jump __label115 always
   562 label __label114
   563 label __label115
-    * op min __tmp213 REACTORS_ON reactors
-    * set REACTORS_ON __tmp213
+  564 op min REACTORS_ON REACTORS_ON reactors
   565 op equal __tmp214 cell1 null
   566 jump __label116 equal __tmp214 false
   567 set STARTUPS 0

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    73 set nextStart 0
    74 op add nextDecommit @time 6000
    75 label __label15
-    * jump __label17 equal true false
    76 sensor __tmp27 battery1 @totalPower
    77 op floor battery_level __tmp27
    78 op idiv battery_level_str battery_level 1000

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-11 instructions):
 
    17 print block
    18 print "\n"
    19 sensor __tmp5 block @type
-    * jump __label8 equal __tmp5 @impact-reactor
-    * jump __label7 always
+   20 jump __label7 notEqual __tmp5 @impact-reactor
    21 label __label8
    22 set START n
    23 op add reactors reactors 1
    24 jump __label6 always
    25 label __label7
    26 jump __label10 equal __tmp5 @overdrive-projector
-    * jump __label10 equal __tmp5 @overdrive-dome
-    * jump __label9 always
+   27 jump __label9 notEqual __tmp5 @overdrive-dome
    28 label __label10
    29 set START n
    30 jump __label6 always
 
   130 jump __label19 always
   131 label __label18
   132 label __label19
-    * jump __label28 equal MODE 0
-    * jump __label27 always
+  133 jump __label27 notEqual MODE 0
   134 label __label28
   135 set __tmp63 "[salmon]SHUTDOWN[]"
   136 jump __label26 always
   137 label __label27
-    * jump __label30 equal MODE 1
-    * jump __label29 always
+  138 jump __label29 notEqual MODE 1
   139 label __label30
   140 set __tmp63 "[gold]STARTUP[]"
   141 jump __label26 always
   142 label __label29
-    * jump __label32 equal MODE 2
-    * jump __label31 always
+  143 jump __label31 notEqual MODE 2
   144 label __label32
   145 set __tmp63 "[green]RUNNING[]"
   146 jump __label26 always
 
   204 print "\nPower balance:       [gold]"
   205 print net_power
   206 print "[]"
-    * jump __label43 equal MODE 0
-    * jump __label42 always
+  207 jump __label42 notEqual MODE 0
   208 label __label43
   209 set REACTORS_ON 0
   210 set OVERDRIVE 0
 
   230 label __label45
   231 jump __label41 always
   232 label __label42
-    * jump __label47 equal MODE 1
-    * jump __label46 always
+  233 jump __label46 notEqual MODE 1
   234 label __label47
   235 jump __label48 equal OUTPUT_1 false
   236 jump __label50 equal OUTPUT_2 false
 
   341 label __label53
   342 jump __label41 always
   343 label __label46
-    * jump __label73 equal MODE 2
-    * jump __label72 always
+  344 jump __label72 notEqual MODE 2
   345 label __label73
   346 sensor __tmp131 tank1 @totalLiquids
   347 op lessThan __tmp132 __tmp131 750
 
   502 jump __label104 greaterThanEq n __tmp198
   503 getlink block n
   504 sensor __tmp200 block @type
-    * jump __label107 equal __tmp200 @impact-reactor
-    * jump __label106 always
+  505 jump __label106 notEqual __tmp200 @impact-reactor
   506 label __label107
   507 op add reactors reactors 1
   508 op lessThanEq enabled reactors REACTORS_ON
 
   516 jump __label105 always
   517 label __label106
   518 jump __label111 equal __tmp200 @overdrive-projector
-    * jump __label111 equal __tmp200 @overdrive-dome
-    * jump __label110 always
+  519 jump __label110 notEqual __tmp200 @overdrive-dome
   520 label __label111
   521 control enabled block OVERDRIVE
   522 jump __label105 always
 
   527 jump __label113 equal __tmp200 @conveyor
   528 jump __label113 equal __tmp200 @titanium-conveyor
   529 jump __label113 equal __tmp200 @plastanium-conveyor
-    * jump __label113 equal __tmp200 @armored-conveyor
-    * jump __label112 always
+  530 jump __label112 notEqual __tmp200 @armored-conveyor
   531 label __label113
   532 control enabled block startup
   533 jump __label105 always

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-25 instructions):
 
     4 set COOLANT_FLAG FUEL_FLAG
     5 set reactors 0
     6 label __label0
-    * op equal __tmp0 reactors 0
-    * jump __label2 equal __tmp0 false
+    7 jump __label2 notEqual reactors 0
     8 set reactors 0
     9 set n @links
    10 label __label3
-    * op greaterThan __tmp2 n 0
-    * jump __label5 equal __tmp2 false
+   11 jump __label5 lessThanEq n 0
    12 op sub n n 1
    13 getlink block n
    14 print "Found: "
 
    33 label __label5
    34 read __tmp8 cell2 1
    35 op add reactors reactors __tmp8
-    * op equal __tmp10 reactors 0
-    * jump __label11 equal __tmp10 false
+   36 jump __label11 notEqual reactors 0
    37 print "No reactor."
    38 jump __label12 always
    39 label __label11
 
    54 read RESETS cell1 9
    55 read COMMITS cell1 10
    56 set reactors REACTORS_ON
-    * op equal __tmp23 MODE 0
-    * jump __label13 equal __tmp23 false
+   57 jump __label13 notEqual MODE 0
    58 set REASON "Processor reset"
    59 jump __label14 always
    60 label __label13
 
    84 op sub __tmp41 required_capacity total_capacity
    85 op div __tmp42 __tmp41 1000
    86 op ceil missing_battery __tmp42
-    * op notEqual __tmp44 MODE 0
-    * jump __label18 equal __tmp44 false
+   87 jump __label18 equal MODE 0
    88 sensor __tmp46 switch1 @enabled
-    * op equal __tmp47 __tmp46 false
-    * jump __label20 equal __tmp47 false
+   89 jump __label20 notEqual __tmp46 false
    90 set MODE 0
    91 set REASON "Manual power off"
    92 jump __label21 always
 
   103 op add failure_cnt failure_cnt 1
   104 read __tmp59 cell2 1
   105 op add __tmp60 10 __tmp59
-    * op greaterThan __tmp61 failure_cnt __tmp60
-    * jump __label24 equal __tmp61 false
+  106 jump __label24 lessThanEq failure_cnt __tmp60
   107 set MODE 0
   108 control enabled switch1 false
   109 set REASON "Unknown -- out of power?"
 
   161 label __label34
   162 print "\n=================================="
   163 sensor __tmp70 tank1 @totalLiquids
-    * op lessThan __tmp71 __tmp70 750
-    * jump __label35 equal __tmp71 false
+  164 jump __label35 greaterThanEq __tmp70 750
   165 print "\n[salmon]Cryofluid level critical![]"
   166 jump __label36 always
   167 label __label35
   168 label __label36
   169 sensor __tmp73 vault1 @blast-compound
-    * op lessThan __tmp74 __tmp73 700
-    * jump __label37 equal __tmp74 false
+  170 jump __label37 greaterThanEq __tmp73 700
   171 print "\n[salmon]Blast compound level critical![]"
   172 jump __label38 always
   173 label __label37
   174 label __label38
-    * op equal __tmp76 enough_battery false
-    * jump __label39 equal __tmp76 false
+  175 jump __label39 notEqual enough_battery false
   176 print "\n[salmon]Insufficient battery storage![]"
   177 print "\nLink [gold]"
   178 print missing_battery
 
   239 op mul __tmp88 __tmp87 1.05
   240 op floor __tmp89 __tmp88
   241 op max neededPower __tmp89 1000
-    * op equal __tmp91 REACTORS_ON 0
-    * jump __label52 equal __tmp91 false
-    * op greaterThanEq __tmp93 total_battery 25000
-    * jump __label54 equal __tmp93 false
+  242 jump __label52 notEqual REACTORS_ON 0
+  243 jump __label54 lessThan total_battery 25000
   244 set REACTORS_ON 1
   245 op add nextStart @time 2000
   246 jump __label55 always
 
   256 print "\n[gold]"
   257 print outputs
   258 print "[] surge tower(s) online"
-    * op equal __tmp98 OUTPUT_3 0
-    * jump __label56 equal __tmp98 false
+  259 jump __label56 notEqual OUTPUT_3 0
   260 print "\nRequired power level: [gold]"
   261 print neededPower
   262 print "[]"
   263 jump __label57 always
   264 label __label56
   265 label __label57
-    * op greaterThan __tmp100 net_power 100
-    * jump __label58 equal __tmp100 false
+  266 jump __label58 lessThanEq net_power 100
   267 set OVERDRIVE true
   268 jump __label59 always
   269 label __label58
 
   273 op land __tmp104 __tmp102 __tmp103
   274 op greaterThanEq __tmp105 total_battery 25000
   275 op land canStart __tmp104 __tmp105
-    * op greaterThanEq __tmp107 net_power neededPower
-    * jump __label60 equal __tmp107 false
+  276 jump __label60 lessThan net_power neededPower
   277 set OUTPUT_3 OUTPUT_2
   278 set OUTPUT_2 OUTPUT_1
   279 set OUTPUT_1 1
   280 jump __label61 always
   281 label __label60
   282 label __label61
-    * op equal __tmp109 OUTPUT_1 0
-    * jump __label62 equal __tmp109 false
+  283 jump __label62 notEqual OUTPUT_1 0
   284 op mul availablePower 6300 boosts
   285 op div ratio neededPower availablePower
-    * op lessThan __tmp113 ratio 1
-    * jump __label64 equal __tmp113 false
+  286 jump __label64 greaterThanEq ratio 1
   287 op add nextStart @time 2000
   288 jump __label65 always
   289 label __label64
 
   375 jump __label81 always
   376 label __label80
   377 label __label81
-    * op equal __tmp162 commit_level 0
-    * jump __label82 equal __tmp162 false
+  378 jump __label82 notEqual commit_level 0
   379 op idiv __tmp164 min_level 1000
   380 print "\nRestart threshold: [gold]"
   381 print __tmp164
 
   403 jump __label87 always
   404 label __label86
   405 label __label87
-    * op greaterThan __tmp178 @time nextDecommit
-    * jump __label88 equal __tmp178 false
+  406 jump __label88 lessThanEq @time nextDecommit
   407 jump __label90 equal OVERDRIVE false
   408 set OVERDRIVE false
   409 jump __label91 always
 
   415 op add nextDecommit @time 6000
   416 jump __label89 always
   417 label __label88
-    * op lessThan __tmp184 total_battery commit_level
-    * jump __label92 equal __tmp184 false
+  418 jump __label92 greaterThanEq total_battery commit_level
   419 op add REACTORS_ON REACTORS_ON 1
   420 op add COMMITS COMMITS 1
   421 set CAN_COMMIT false
 
   437 set OVERDRIVE true
   438 label __label79
   439 op mul __tmp190 PLANT_PROTECTION 47500
-    * op lessThan __tmp191 total_battery __tmp190
-    * jump __label96 equal __tmp191 false
+  440 jump __label96 greaterThanEq total_battery __tmp190
   441 set OUTPUT_2 0
   442 set OUTPUT_3 0
   443 jump __label97 always
   444 label __label96
   445 label __label97
-    * op equal __tmp193 OUTPUT_2 0
-    * jump __label98 equal __tmp193 false
-    * op greaterThan __tmp195 total_battery 47500
-    * jump __label100 equal __tmp195 false
+  446 jump __label98 notEqual OUTPUT_2 0
+  447 jump __label100 lessThanEq total_battery 47500
   448 set OUTPUT_2 1
   449 set OUTPUT_3 1
   450 jump __label101 always
 
   514 op add n n 1
   515 jump __label102 always
   516 label __label104
-    * op notEqual __tmp207 cell2 null
-    * jump __label114 equal __tmp207 false
+  517 jump __label114 equal cell2 null
   518 write reactors cell2 0
   519 write REACTORS_ON cell2 2
   520 write OVERDRIVE cell2 3
 
   526 label __label114
   527 label __label115
   528 op min REACTORS_ON REACTORS_ON reactors
-    * op equal __tmp214 cell1 null
-    * jump __label116 equal __tmp214 false
+  529 jump __label116 notEqual cell1 null
   530 set STARTUPS 0
   531 set RESETS 0
   532 set COMMITS 0

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-28 instructions):
 
    25 jump __label9 notEqual __tmp5 @overdrive-dome
    26 label __label10
    27 set START n
-    * jump __label6 always
    28 label __label9
    29 label __label6
    30 label __label4
 
    34 op add reactors reactors __tmp8
    35 jump __label11 notEqual reactors 0
    36 print "No reactor."
-    * jump __label12 always
    37 label __label11
    38 label __label12
    39 printflush message1
 
   110 print "\nMin. consumption: "
   111 print min_consumption
   112 printflush message2
-    * jump __label25 always
   113 label __label24
   114 label __label25
   115 jump __label23 always
 
   117 set failure_cnt 0
   118 label __label23
   119 label __label21
-    * jump __label19 always
   120 label __label18
   121 label __label19
   122 jump __label27 notEqual MODE 0
 
   152 print " ([gold]"
   153 print multiplier
   154 print "x[])"
-    * jump __label34 always
   155 label __label33
   156 label __label34
   157 print "\n=================================="
   158 sensor __tmp70 tank1 @totalLiquids
   159 jump __label35 greaterThanEq __tmp70 750
   160 print "\n[salmon]Cryofluid level critical![]"
-    * jump __label36 always
   161 label __label35
   162 label __label36
   163 sensor __tmp73 vault1 @blast-compound
   164 jump __label37 greaterThanEq __tmp73 700
   165 print "\n[salmon]Blast compound level critical![]"
-    * jump __label38 always
   166 label __label37
   167 label __label38
   168 jump __label39 notEqual enough_battery false
 
   170 print "\nLink [gold]"
   171 print missing_battery
   172 print " K[] of additional storage to internal battery."
-    * jump __label40 always
   173 label __label39
   174 label __label40
   175 print "\nInternal battery:    [gold]"
 
   207 set failure_cnt 0
   208 set GENERATOR true
   209 set REASON "Unknown -- out of power?"
-    * jump __label45 always
   210 label __label44
   211 label __label45
   212 jump __label41 always
 
   251 print "\nRequired power level: [gold]"
   252 print neededPower
   253 print "[]"
-    * jump __label57 always
   254 label __label56
   255 label __label57
   256 jump __label58 lessThanEq net_power 100
   257 set OVERDRIVE true
-    * jump __label59 always
   258 label __label58
   259 label __label59
   260 op lessThan __tmp102 REACTORS_ON reactors
 
   266 set OUTPUT_3 OUTPUT_2
   267 set OUTPUT_2 OUTPUT_1
   268 set OUTPUT_1 1
-    * jump __label61 always
   269 label __label60
   270 label __label61
   271 jump __label62 notEqual OUTPUT_1 0
 
   273 op div ratio neededPower availablePower
   274 jump __label64 greaterThanEq ratio 1
   275 op add nextStart @time 2000
-    * jump __label65 always
   276 label __label64
   277 label __label65
-    * jump __label63 always
   278 label __label62
   279 label __label63
   280 op greaterThan __tmp116 @time nextStart
 
   290 op add __tmp121 REACTORS_ON start_at_once
   291 op min REACTORS_ON __tmp121 reactors
   292 op add nextStart @time 2000
-    * jump __label67 always
   293 label __label66
   294 label __label67
   295 op greaterThanEq __tmp124 REACTORS_ON reactors
 
   303 set COOLANT_FLAG 0
   304 set FUEL_FLAG 0
   305 set GENERATOR false
-    * jump __label71 always
   306 label __label70
   307 label __label71
   308 label __label53
 
   317 set MODE 0
   318 control enabled switch1 false
   319 set REASON "Cryo level too low"
-    * jump __label75 always
   320 label __label74
   321 label __label75
   322 sensor __tmp135 vault1 @blast-compound
 
   326 set MODE 0
   327 control enabled switch1 false
   328 set REASON "Blast compound level too low"
-    * jump __label77 always
   329 label __label76
   330 label __label77
   331 sensor __tmp139 tank1 @totalLiquids
 
   354 op idiv __tmp161 commit_level 1000
   355 print "\nCommit threshold:   [gold]"
   356 print __tmp161
-    * jump __label81 always
   357 label __label80
   358 label __label81
   359 jump __label82 notEqual commit_level 0
   360 op idiv __tmp164 min_level 1000
   361 print "\nRestart threshold: [gold]"
   362 print __tmp164
-    * jump __label83 always
   363 label __label82
   364 label __label83
   365 print "[] K"
 
   380 op or __tmp175 __tmp173 __tmp174
   381 jump __label86 equal __tmp175 false
   382 op add nextDecommit @time 6000
-    * jump __label87 always
   383 label __label86
   384 label __label87
   385 jump __label88 lessThanEq @time nextDecommit
 
   398 op add REACTORS_ON REACTORS_ON 1
   399 op add COMMITS COMMITS 1
   400 set CAN_COMMIT false
-    * jump __label93 always
   401 label __label92
   402 label __label93
   403 label __label89
 
   418 jump __label96 greaterThanEq total_battery __tmp190
   419 set OUTPUT_2 0
   420 set OUTPUT_3 0
-    * jump __label97 always
   421 label __label96
   422 label __label97
   423 jump __label98 notEqual OUTPUT_2 0
 
   428 label __label100
   429 print "\n*** [gold]Surge tower 2 offline[] ***"
   430 label __label101
-    * jump __label99 always
   431 label __label98
   432 label __label99
-    * jump __label41 always
   433 label __label72
   434 label __label41
   435 print "\n"
 
   462 jump __label108 equal enabled false
   463 sensor __tmp205 block @timescale
   464 op add boosts boosts __tmp205
-    * jump __label109 always
   465 label __label108
   466 label __label109
   467 jump __label105 always
 
   481 jump __label112 notEqual __tmp200 @armored-conveyor
   482 label __label113
   483 control enabled block startup
-    * jump __label105 always
   484 label __label112
   485 label __label105
   486 label __label103
 
   495 op add reactors reactors __tmp209
   496 read __tmp211 cell2 4
   497 op add boosts boosts __tmp211
-    * jump __label115 always
   498 label __label114
   499 label __label115
   500 op min REACTORS_ON REACTORS_ON reactors

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-1 instructions):
 
   227 label __label49
   228 set nextBattery __tmp85
   229 sensor __tmp87 nextBattery @powerNetOut
-    * op mul __tmp88 __tmp87 1.05
-    * op floor __tmp89 __tmp88
+  230 op idiv __tmp89 __tmp87 0.9523809523809523
   231 op max neededPower __tmp89 1000
   232 jump __label52 notEqual REACTORS_ON 0
   233 jump __label54 lessThan total_battery 25000

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
     0 set PLANT_PROTECTION 1
     1 set FAST_START 1
     2 set START 0
-    * set FUEL_FLAG START
-    * set COOLANT_FLAG FUEL_FLAG
+    3 set FUEL_FLAG 0
+    4 set COOLANT_FLAG START
     5 set reactors 0
     6 label __label0
     7 jump __label2 notEqual reactors 0
 
   137 set __tmp63 null
   138 label __label26
   139 set STR_MODE __tmp63
-    * print STR_MODE
+  140 print __tmp63
   141 print ", reactors [green]"
   142 print REACTORS_ON
   143 print "/"
 
   226 set __tmp85 battery2
   227 label __label49
   228 set nextBattery __tmp85
-    * sensor __tmp87 nextBattery @powerNetOut
+  229 sensor __tmp87 __tmp85 @powerNetOut
   230 op idiv __tmp89 __tmp87 0.9523809523809523
   231 op max neededPower __tmp89 1000
   232 jump __label52 notEqual REACTORS_ON 0
 
   286 set __tmp119 1
   287 label __label69
   288 set start_at_once __tmp119
-    * op add __tmp121 REACTORS_ON start_at_once
+  289 op add __tmp121 REACTORS_ON __tmp119
   290 op min REACTORS_ON __tmp121 reactors
   291 op add nextStart @time 2000
   292 label __label66
 
   336 sensor __tmp145 switch2 @enabled
   337 op land __tmp146 enough_battery __tmp145
   338 jump __label78 equal __tmp146 false
-    * op mul min_level 0.5 required_capacity
+  339 op mul min_level reactors 50000
   340 set commit_level 0
   341 op lessThan __tmp149 battery_change 0
   342 op land __tmp150 CAN_COMMIT __tmp149
 
   344 op land __tmp152 __tmp150 __tmp151
   345 jump __label80 equal __tmp152 false
   346 op sub __tmp154 battery_change 1500
-    * op sub p __tmp154 1000
+  347 op sub p battery_change 2500
   348 op mul __tmp156 p 0.00472972972972973
   349 op add __tmp157 -5 __tmp156
   350 op mul __tmp158 p __tmp157
 
   446 op equal startup MODE 1
   447 set reactors 0
   448 set boosts 0
-    * set enabled true
   449 set __tmp198 @links
   450 set n START
   451 label __label102

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-4 instructions):
 
     1 set FAST_START 1
     2 set START 0
     3 set FUEL_FLAG 0
-    * set COOLANT_FLAG START
+    4 set COOLANT_FLAG 0
     5 set reactors 0
     6 label __label0
     7 jump __label2 notEqual reactors 0
 
   136 label __label31
   137 set __tmp63 null
   138 label __label26
-    * set STR_MODE __tmp63
   139 print __tmp63
   140 print ", reactors [green]"
   141 print REACTORS_ON
 
   224 label __label48
   225 set __tmp85 battery2
   226 label __label49
-    * set nextBattery __tmp85
   227 sensor __tmp87 __tmp85 @powerNetOut
   228 op idiv __tmp89 __tmp87 0.9523809523809523
   229 op max neededPower __tmp89 1000
 
   283 label __label68
   284 set __tmp119 1
   285 label __label69
-    * set start_at_once __tmp119
   286 op add __tmp121 REACTORS_ON __tmp119
   287 op min REACTORS_ON __tmp121 reactors
   288 op add nextStart @time 2000
 
   340 op lessThan __tmp151 REACTORS_ON reactors
   341 op land __tmp152 __tmp150 __tmp151
   342 jump __label80 equal __tmp152 false
-    * op sub __tmp154 battery_change 1500
   343 op sub p battery_change 2500
   344 op mul __tmp156 p 0.00472972972972973
   345 op add __tmp157 -5 __tmp156

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1 (-1 instructions):
 
     4 set COOLANT_FLAG 0
     5 set reactors 0
     6 label __label0
-    * jump __label2 notEqual reactors 0
+    7 label __label118
     8 set reactors 0
     9 set n @links
    10 label __label3
    11 jump __label5 lessThanEq n 0
+   12 label __label119
    13 op sub n n 1
    14 getlink block n
    15 print "Found: "
 
    29 label __label9
    30 label __label6
    31 label __label4
-    * jump __label3 always
+   32 jump __label119 greaterThan n 0
    33 label __label5
    34 read __tmp8 cell2 1
    35 op add reactors reactors __tmp8
 
    39 label __label12
    40 printflush message1
    41 label __label1
-    * jump __label0 always
+   42 jump __label118 equal reactors 0
    43 label __label2
    44 read MODE cell1 0
    45 read OUTPUT_1 cell1 1
 
   447 set n START
   448 label __label102
   449 jump __label104 greaterThanEq n __tmp198
+  450 label __label120
   451 getlink block n
   452 sensor __tmp200 block @type
   453 jump __label106 notEqual __tmp200 @impact-reactor
 
   481 label __label105
   482 label __label103
   483 op add n n 1
-    * jump __label102 always
+  484 jump __label120 lessThan n __tmp198
   485 label __label104
   486 jump __label114 equal cell2 null
   487 write reactors cell2 0

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
    53 read RESETS cell1 9
    54 read COMMITS cell1 10
    55 set reactors REACTORS_ON
-    * jump __label13 notEqual MODE 0
+   56 set REASON "Reason unknown -- out of power?"
+   57 jump __label14 notEqual MODE 0
    58 set REASON "Processor reset"
    59 jump __label14 always
-    * label __label13
-    * set REASON "Reason unknown -- out of power?"
    60 label __label14
    61 op notEqual __tmp25 MODE 0
    62 control enabled switch1 __tmp25
 
   214 label __label47
   215 jump __label48 equal OUTPUT_1 false
   216 jump __label50 equal OUTPUT_2 false
-    * set __tmp86 battery4
+  217 sensor __tmp87 battery4 @powerNetOut
   218 jump __label51 always
   219 label __label50
-    * set __tmp86 battery3
+  220 sensor __tmp87 battery3 @powerNetOut
   221 label __label51
-    * set __tmp85 __tmp86
   222 jump __label49 always
   223 label __label48
-    * set __tmp85 battery2
+  224 sensor __tmp87 battery2 @powerNetOut
   225 label __label49
-    * sensor __tmp87 __tmp85 @powerNetOut
   226 op idiv __tmp89 __tmp87 0.9523809523809523
   227 op max neededPower __tmp89 1000
   228 jump __label52 notEqual REACTORS_ON 0
 
   275 op greaterThan __tmp116 @time nextStart
   276 op land __tmp117 canStart __tmp116
   277 jump __label66 equal __tmp117 false
-    * jump __label68 equal FAST_START false
+  278 set __tmp119 1
+  279 jump __label69 equal FAST_START false
   280 op idiv __tmp119 total_battery 25000
   281 jump __label69 always
-    * label __label68
-    * set __tmp119 1
   282 label __label69
   283 op add __tmp121 REACTORS_ON __tmp119
   284 op min REACTORS_ON __tmp121 reactors

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-2 instructions):
 
    56 set REASON "Reason unknown -- out of power?"
    57 jump __label14 notEqual MODE 0
    58 set REASON "Processor reset"
-    * jump __label14 always
    59 label __label14
    60 op notEqual __tmp25 MODE 0
    61 control enabled switch1 __tmp25
 
   277 set __tmp119 1
   278 jump __label69 equal FAST_START false
   279 op idiv __tmp119 total_battery 25000
-    * jump __label69 always
   280 label __label69
   281 op add __tmp121 REACTORS_ON __tmp119
   282 op min REACTORS_ON __tmp121 reactors

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-1 instructions):
 
     2 set START 0
     3 set FUEL_FLAG 0
     4 set COOLANT_FLAG 0
-    * set reactors 0
     5 label __label0
     6 label __label118
     7 set reactors 0
 
   439 set __tmp198 @links
   440 set n START
   441 label __label102
-    * jump __label104 greaterThanEq n __tmp198
+  442 jump __label104 greaterThanEq START __tmp198
   443 label __label120
   444 getlink block n
   445 sensor __tmp200 block @type

Modifications by Iterated phase, If Expression Optimization, pass 2, iteration 1:
 
   210 label __label42
   211 jump __label46 notEqual MODE 1
   212 label __label47
-    * jump __label48 equal OUTPUT_1 false
-    * jump __label50 equal OUTPUT_2 false
+  213 sensor __tmp87 battery2 @powerNetOut
+  214 jump __label49 equal OUTPUT_1 false
+  215 sensor __tmp87 battery3 @powerNetOut
+  216 jump __label51 equal OUTPUT_2 false
   217 sensor __tmp87 battery4 @powerNetOut
   218 jump __label51 always
-    * label __label50
-    * sensor __tmp87 battery3 @powerNetOut
   219 label __label51
   220 jump __label49 always
-    * label __label48
-    * sensor __tmp87 battery2 @powerNetOut
   221 label __label49
   222 op idiv __tmp89 __tmp87 0.9523809523809523
   223 op max neededPower __tmp89 1000

Modifications by Iterated phase, Single Step Elimination, pass 3, iteration 1 (-2 instructions):
 
   215 sensor __tmp87 battery3 @powerNetOut
   216 jump __label51 equal OUTPUT_2 false
   217 sensor __tmp87 battery4 @powerNetOut
-    * jump __label51 always
   218 label __label51
-    * jump __label49 always
   219 label __label49
   220 op idiv __tmp89 __tmp87 0.9523809523809523
   221 op max neededPower __tmp89 1000

Modifications by Final phase, Jump Threading, iteration 1:
 
    99 op add failure_cnt failure_cnt 1
   100 read __tmp59 cell2 1
   101 op add __tmp60 10 __tmp59
-    * jump __label24 lessThanEq failure_cnt __tmp60
+  102 jump __label23 lessThanEq failure_cnt __tmp60
   103 set MODE 0
   104 control enabled switch1 false
   105 set REASON "Unknown -- out of power?"
 
   197 print REASON
   198 print "[]"
   199 sensor __tmp82 switch1 @enabled
-    * jump __label44 equal __tmp82 false
+  200 jump __label41 equal __tmp82 false
   201 set MODE 1
   202 op add STARTUPS STARTUPS 1
   203 set nextStart 0
 
   223 jump __label54 lessThan total_battery 25000
   224 set REACTORS_ON 1
   225 op add nextStart @time 2000
-    * jump __label55 always
+  226 jump __label41 always
   227 label __label54
   228 print "\nRequired startup energy: [gold]"
   229 print 25
   230 print " K[]"
   231 label __label55
-    * jump __label53 always
+  232 jump __label41 always
   233 label __label52
   234 op add __tmp96 OUTPUT_1 OUTPUT_2
   235 op add outputs __tmp96 OUTPUT_3
 
   283 op land __tmp126 __tmp124 __tmp125
   284 op greaterThan __tmp127 OUTPUT_3 0
   285 op land __tmp128 __tmp126 __tmp127
-    * jump __label70 equal __tmp128 false
+  286 jump __label41 equal __tmp128 false
   287 set MODE 2
   288 op add nextDecommit @time 6000
   289 set COOLANT_FLAG 0
 
   358 set OVERDRIVE true
   359 set REACTORS_ON reactors
   360 op add nextDecommit @time 6000
-    * jump __label85 always
+  361 jump __label79 always
   362 label __label84
   363 op lessThan __tmp173 battery_level 47500
   364 op lessThan __tmp174 battery_change -100
 
   377 set CAN_COMMIT true
   378 label __label91
   379 op add nextDecommit @time 6000
-    * jump __label89 always
+  380 jump __label79 always
   381 label __label88
-    * jump __label92 greaterThanEq total_battery commit_level
+  382 jump __label79 greaterThanEq total_battery commit_level
   383 op add REACTORS_ON REACTORS_ON 1
   384 op add COMMITS COMMITS 1
   385 set CAN_COMMIT false
 
   444 op add reactors reactors 1
   445 op lessThanEq enabled reactors REACTORS_ON
   446 control enabled block enabled
-    * jump __label108 equal enabled false
+  447 jump __label105 equal enabled false
   448 sensor __tmp205 block @timescale
   449 op add boosts boosts __tmp205
   450 label __label108
 
   487 set STARTUPS 0
   488 set RESETS 0
   489 set COMMITS 0
-    * jump __label117 always
+  490 jump __label15 always
   491 label __label116
   492 write MODE cell1 0
   493 write OUTPUT_1 cell1 1

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-1 instructions):
 
   503 label __label117
   504 label __label16
   505 jump __label15 always
-    * label __label17
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-2 instructions):
 
   176 print total_battery_str
   177 print "[]/[green]"
   178 print total_capacity_str
-    * print "[] K"
-    * print "\nBattery change:     [gold]"
+  179 print "[] K\nBattery change:     [gold]"
   180 print battery_change
-    * print "[]"
-    * print "\nPower balance:       [gold]"
+  181 print "[]\nPower balance:       [gold]"
   182 print net_power
   183 print "[]"
   184 jump __label42 notEqual MODE 0

Final code before resolving virtual instructions:

set PLANT_PROTECTION 1
set FAST_START 1
set START 0
set FUEL_FLAG 0
set COOLANT_FLAG 0
label __label118
set reactors 0
set n @links
jump __label5 lessThanEq n 0
label __label119
op sub n n 1
getlink block n
print "Found: "
print block
print "\n"
sensor __tmp5 block @type
jump __label7 notEqual __tmp5 @impact-reactor
set START n
op add reactors reactors 1
jump __label6 always 0 0
label __label7
jump __label10 equal __tmp5 @overdrive-projector
jump __label9 notEqual __tmp5 @overdrive-dome
label __label10
set START n
label __label9
label __label6
jump __label119 greaterThan n 0
label __label5
read __tmp8 cell2 1
op add reactors reactors __tmp8
jump __label11 notEqual reactors 0
print "No reactor."
label __label11
printflush message1
jump __label118 equal reactors 0
read MODE cell1 0
read OUTPUT_1 cell1 1
read OUTPUT_2 cell1 2
read OUTPUT_3 cell1 3
read REACTORS_ON cell1 4
read OVERDRIVE cell1 5
read GENERATOR cell1 6
read CAN_COMMIT cell1 7
read STARTUPS cell1 8
read RESETS cell1 9
read COMMITS cell1 10
set reactors REACTORS_ON
set REASON "Reason unknown -- out of power?"
jump __label14 notEqual MODE 0
set REASON "Processor reset"
label __label14
op notEqual __tmp25 MODE 0
control enabled switch1 __tmp25 0 0 0
set failure_cnt 0
set boosts 0
set nextStart 0
op add nextDecommit @time 6000
label __label15
sensor __tmp27 battery1 @totalPower
op floor battery_level __tmp27 0
op idiv battery_level_str battery_level 1000
sensor __tmp30 battery1 @powerNetStored
op floor total_battery __tmp30 0
op idiv total_battery_str total_battery 1000
sensor consumption battery1 @powerNetOut
read production bank1 509
read net_power bank1 510
read battery_change bank1 511
sensor total_capacity battery1 @powerNetCapacity
op idiv total_capacity_str total_capacity 1000
op mul required_capacity 100000 reactors
op greaterThanEq enough_battery total_capacity required_capacity
op sub __tmp41 required_capacity total_capacity
op div __tmp42 __tmp41 1000
op ceil missing_battery __tmp42 0
jump __label18 equal MODE 0
sensor __tmp46 switch1 @enabled
jump __label20 notEqual __tmp46 false
set MODE 0
set REASON "Manual power off"
jump __label21 always 0 0
label __label20
op mul min_consumption REACTORS_ON 1200
op lessThan failure1 consumption min_consumption
op equal __tmp51 battery_level 0
op greaterThan __tmp52 consumption 0
op land __tmp53 __tmp51 __tmp52
op equal __tmp54 production 0
op land failure2 __tmp53 __tmp54
op or __tmp56 failure1 failure2
jump __label22 equal __tmp56 false
op add failure_cnt failure_cnt 1
read __tmp59 cell2 1
op add __tmp60 10 __tmp59
jump __label23 lessThanEq failure_cnt __tmp60
set MODE 0
control enabled switch1 false 0 0 0
set REASON "Unknown -- out of power?"
print "Consumption: "
print consumption
print "\nMin. consumption: "
print min_consumption
printflush message2
jump __label23 always 0 0
label __label22
set failure_cnt 0
label __label23
label __label21
label __label18
jump __label27 notEqual MODE 0
set __tmp63 "[salmon]SHUTDOWN[]"
jump __label26 always 0 0
label __label27
jump __label29 notEqual MODE 1
set __tmp63 "[gold]STARTUP[]"
jump __label26 always 0 0
label __label29
jump __label31 notEqual MODE 2
set __tmp63 "[green]RUNNING[]"
jump __label26 always 0 0
label __label31
set __tmp63 null
label __label26
print __tmp63
print ", reactors [green]"
print REACTORS_ON
print "/"
print reactors
print "[]"
jump __label33 equal OVERDRIVE false
op mul __tmp65 100 boosts
op div __tmp66 __tmp65 REACTORS_ON
op add __tmp67 __tmp66 0.5
op floor __tmp68 __tmp67 0
op div multiplier __tmp68 100
print " ([gold]"
print multiplier
print "x[])"
label __label33
print "\n=================================="
sensor __tmp70 tank1 @totalLiquids
jump __label35 greaterThanEq __tmp70 750
print "\n[salmon]Cryofluid level critical![]"
label __label35
sensor __tmp73 vault1 @blast-compound
jump __label37 greaterThanEq __tmp73 700
print "\n[salmon]Blast compound level critical![]"
label __label37
jump __label39 notEqual enough_battery false
print "\n[salmon]Insufficient battery storage![]"
print "\nLink [gold]"
print missing_battery
print " K[] of additional storage to internal battery."
label __label39
print "\nInternal battery:    [gold]"
print battery_level_str
print "[]/[green]50[] K"
print "\nTotal battery:        [gold]"
print total_battery_str
print "[]/[green]"
print total_capacity_str
print "[] K\nBattery change:     [gold]"
print battery_change
print "[]\nPower balance:       [gold]"
print net_power
print "[]"
jump __label42 notEqual MODE 0
set REACTORS_ON 0
set OVERDRIVE 0
set OUTPUT_1 0
set OUTPUT_2 0
set OUTPUT_3 0
op greaterThanEq __tmp79 net_power -150
op lessThan __tmp80 total_battery 47500
op land GENERATOR __tmp79 __tmp80
print "\nShutdown reason: [gold]"
print REASON
print "[]"
sensor __tmp82 switch1 @enabled
jump __label41 equal __tmp82 false
set MODE 1
op add STARTUPS STARTUPS 1
set nextStart 0
set failure_cnt 0
set GENERATOR true
set REASON "Unknown -- out of power?"
jump __label41 always 0 0
label __label42
jump __label46 notEqual MODE 1
sensor __tmp87 battery2 @powerNetOut
jump __label49 equal OUTPUT_1 false
sensor __tmp87 battery3 @powerNetOut
jump __label51 equal OUTPUT_2 false
sensor __tmp87 battery4 @powerNetOut
label __label51
label __label49
op idiv __tmp89 __tmp87 0.9523809523809523
op max neededPower __tmp89 1000
jump __label52 notEqual REACTORS_ON 0
jump __label54 lessThan total_battery 25000
set REACTORS_ON 1
op add nextStart @time 2000
jump __label41 always 0 0
label __label54
print "\nRequired startup energy: [gold]"
print 25
print " K[]"
jump __label41 always 0 0
label __label52
op add __tmp96 OUTPUT_1 OUTPUT_2
op add outputs __tmp96 OUTPUT_3
print "\n[gold]"
print outputs
print "[] surge tower(s) online"
jump __label56 notEqual OUTPUT_3 0
print "\nRequired power level: [gold]"
print neededPower
print "[]"
label __label56
jump __label58 lessThanEq net_power 100
set OVERDRIVE true
label __label58
op lessThan __tmp102 REACTORS_ON reactors
op greaterThan __tmp103 net_power 1000
op land __tmp104 __tmp102 __tmp103
op greaterThanEq __tmp105 total_battery 25000
op land canStart __tmp104 __tmp105
jump __label60 lessThan net_power neededPower
set OUTPUT_3 OUTPUT_2
set OUTPUT_2 OUTPUT_1
set OUTPUT_1 1
label __label60
jump __label62 notEqual OUTPUT_1 0
op mul availablePower 6300 boosts
op div ratio neededPower availablePower
jump __label64 greaterThanEq ratio 1
op add nextStart @time 2000
label __label64
label __label62
op greaterThan __tmp116 @time nextStart
op land __tmp117 canStart __tmp116
jump __label66 equal __tmp117 false
set __tmp119 1
jump __label69 equal FAST_START false
op idiv __tmp119 total_battery 25000
label __label69
op add __tmp121 REACTORS_ON __tmp119
op min REACTORS_ON __tmp121 reactors
op add nextStart @time 2000
label __label66
op greaterThanEq __tmp124 REACTORS_ON reactors
op greaterThan __tmp125 @time nextStart
op land __tmp126 __tmp124 __tmp125
op greaterThan __tmp127 OUTPUT_3 0
op land __tmp128 __tmp126 __tmp127
jump __label41 equal __tmp128 false
set MODE 2
op add nextDecommit @time 6000
set COOLANT_FLAG 0
set FUEL_FLAG 0
set GENERATOR false
jump __label41 always 0 0
label __label46
jump __label72 notEqual MODE 2
sensor __tmp131 tank1 @totalLiquids
op lessThan __tmp132 __tmp131 750
op land __tmp133 COOLANT_FLAG __tmp132
jump __label74 equal __tmp133 false
set MODE 0
control enabled switch1 false 0 0 0
set REASON "Cryo level too low"
label __label74
sensor __tmp135 vault1 @blast-compound
op lessThan __tmp136 __tmp135 700
op land __tmp137 FUEL_FLAG __tmp136
jump __label76 equal __tmp137 false
set MODE 0
control enabled switch1 false 0 0 0
set REASON "Blast compound level too low"
label __label76
sensor __tmp139 tank1 @totalLiquids
op greaterThan __tmp140 __tmp139 1000
op or COOLANT_FLAG COOLANT_FLAG __tmp140
sensor __tmp142 vault1 @blast-compound
op greaterThan __tmp143 __tmp142 800
op or FUEL_FLAG FUEL_FLAG __tmp143
sensor __tmp145 switch2 @enabled
op land __tmp146 enough_battery __tmp145
jump __label78 equal __tmp146 false
op mul min_level reactors 50000
set commit_level 0
op lessThan __tmp149 battery_change 0
op land __tmp150 CAN_COMMIT __tmp149
op lessThan __tmp151 REACTORS_ON reactors
op land __tmp152 __tmp150 __tmp151
jump __label80 equal __tmp152 false
op sub p battery_change 2500
op mul __tmp156 p 0.00472972972972973
op add __tmp157 -5 __tmp156
op mul __tmp158 p __tmp157
op add commit_margin 25000 __tmp158
op add commit_level min_level commit_margin
op idiv __tmp161 commit_level 1000
print "\nCommit threshold:   [gold]"
print __tmp161
label __label80
jump __label82 notEqual commit_level 0
op idiv __tmp164 min_level 1000
print "\nRestart threshold: [gold]"
print __tmp164
label __label82
print "[] K"
op lessThan __tmp165 total_battery min_level
op mul __tmp166 REACTORS_ON -2500
op lessThan __tmp167 battery_change __tmp166
op or __tmp168 __tmp165 __tmp167
jump __label84 equal __tmp168 false
op equal __tmp170 OVERDRIVE false
op add RESETS RESETS __tmp170
set OVERDRIVE true
set REACTORS_ON reactors
op add nextDecommit @time 6000
jump __label79 always 0 0
label __label84
op lessThan __tmp173 battery_level 47500
op lessThan __tmp174 battery_change -100
op or __tmp175 __tmp173 __tmp174
jump __label86 equal __tmp175 false
op add nextDecommit @time 6000
label __label86
jump __label88 lessThanEq @time nextDecommit
jump __label90 equal OVERDRIVE false
set OVERDRIVE false
jump __label91 always 0 0
label __label90
op sub __tmp181 REACTORS_ON 1
op max REACTORS_ON __tmp181 1
set CAN_COMMIT true
label __label91
op add nextDecommit @time 6000
jump __label79 always 0 0
label __label88
jump __label79 greaterThanEq total_battery commit_level
op add REACTORS_ON REACTORS_ON 1
op add COMMITS COMMITS 1
set CAN_COMMIT false
jump __label79 always 0 0
label __label78
sensor __tmp188 switch2 @enabled
jump __label94 equal __tmp188 false
print "\n[salmon]Load adapting not possible.[]"
jump __label95 always 0 0
label __label94
print "\n[gold]Load adapting not active.[]"
label __label95
set REACTORS_ON reactors
set OVERDRIVE true
label __label79
op mul __tmp190 PLANT_PROTECTION 47500
jump __label96 greaterThanEq total_battery __tmp190
set OUTPUT_2 0
set OUTPUT_3 0
label __label96
jump __label98 notEqual OUTPUT_2 0
jump __label100 lessThanEq total_battery 47500
set OUTPUT_2 1
set OUTPUT_3 1
jump __label101 always 0 0
label __label100
print "\n*** [gold]Surge tower 2 offline[] ***"
label __label101
label __label98
label __label72
label __label41
print "\n"
print STARTUPS
print "-"
print RESETS
print "-"
print COMMITS
printflush message1
control enabled diode1 OUTPUT_1 0 0 0
control enabled diode2 OUTPUT_2 0 0 0
control enabled diode3 OUTPUT_3 0 0 0
control enabled generator1 GENERATOR 0 0 0
control enabled generator2 GENERATOR 0 0 0
op equal startup MODE 1
set reactors 0
set boosts 0
set __tmp198 @links
set n START
jump __label104 greaterThanEq START __tmp198
label __label120
getlink block n
sensor __tmp200 block @type
jump __label106 notEqual __tmp200 @impact-reactor
op add reactors reactors 1
op lessThanEq enabled reactors REACTORS_ON
control enabled block enabled 0 0 0
jump __label105 equal enabled false
sensor __tmp205 block @timescale
op add boosts boosts __tmp205
jump __label105 always 0 0
label __label106
jump __label111 equal __tmp200 @overdrive-projector
jump __label110 notEqual __tmp200 @overdrive-dome
label __label111
control enabled block OVERDRIVE 0 0 0
jump __label105 always 0 0
label __label110
jump __label113 equal __tmp200 @conduit
jump __label113 equal __tmp200 @pulse-conduit
jump __label113 equal __tmp200 @plated-conduit
jump __label113 equal __tmp200 @conveyor
jump __label113 equal __tmp200 @titanium-conveyor
jump __label113 equal __tmp200 @plastanium-conveyor
jump __label112 notEqual __tmp200 @armored-conveyor
label __label113
control enabled block startup 0 0 0
label __label112
label __label105
op add n n 1
jump __label120 lessThan n __tmp198
label __label104
jump __label114 equal cell2 null
write reactors cell2 0
write REACTORS_ON cell2 2
write OVERDRIVE cell2 3
read __tmp209 cell2 1
op add reactors reactors __tmp209
read __tmp211 cell2 4
op add boosts boosts __tmp211
label __label114
op min REACTORS_ON REACTORS_ON reactors
jump __label116 notEqual cell1 null
set STARTUPS 0
set RESETS 0
set COMMITS 0
jump __label15 always 0 0
label __label116
write MODE cell1 0
write OUTPUT_1 cell1 1
write OUTPUT_2 cell1 2
write OUTPUT_3 cell1 3
write REACTORS_ON cell1 4
write OVERDRIVE cell1 5
write GENERATOR cell1 6
write CAN_COMMIT cell1 7
write STARTUPS cell1 8
write RESETS cell1 9
write COMMITS cell1 10
jump __label15 always 0 0
