   661 instructions before optimizations.
    64 instructions eliminated by Temp Variables Elimination (7 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    12 instructions eliminated by If Expression Optimization (5 iterations).
    83 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   536 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   800 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 529):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 533):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 542):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 536):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+43 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 493):
  ! Inline function 'start_reactor' defined at line 140:1        size  +623, benefit      687.5, efficiency      1.104
  * Inline function call at line 80:14                           size  +156, benefit      137.5, efficiency      0.881 (+148 instructions)
    Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 345):
  ! Inline function 'start_reactor' defined at line 140:1        size  +467, benefit      550.0, efficiency      1.178
  * Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 196):
  ! Inline function 'start_reactor' defined at line 140:1        size  +311, benefit      412.5, efficiency      1.326
  * Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 47):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 2: speed optimization selection (cost limit 60):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 3: speed optimization selection (cost limit 60):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 4: speed optimization selection (cost limit 60):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    70 print "\n"
    71 set *tmp8 true
    72 jump *label10 always
-    * set *tmp13 null
    73 jump *label12 always
    74 label *label11
-    * set *tmp13 null
    75 label *label12
    76 set *tmp8 false
    77 jump *label10 always
 
   116 set :update_fuel:uld_in .ULD_IN_1
   117 set :update_fuel:uld_out .ULD_OUT_1
   118 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp20 :update_fuel*retval
   119 set :start_reactor:reactor reactor2
   120 set :start_reactor:reactor_num 2
   121 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   129 set :update_fuel:uld_in .ULD_IN_2
   130 set :update_fuel:uld_out .ULD_OUT_2
   131 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp22 :update_fuel*retval
   132 set :check_radar:unit .TOWER
   133 call *label4 :check_radar*retaddr :check_radar*retval
   134 set *tmp23 :check_radar*retval
 
   167 set :update_fuel:uld_in .ULD_IN_MANY
   168 set :update_fuel:uld_out .ULD_OUT_MANY
   169 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp29 :update_fuel*retval
   170 op or *tmp30 :fuel_1 :fuel_2
   171 op or *tmp31 *tmp30 :fuel_many
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   205 print "\n"
   206 set *tmp45 null
   207 label *label17
-    * set *tmp44 *tmp45
   208 jump *label15 always
   209 label *label14
   210 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   231 print "n"
   232 set *tmp47 null
   233 label *label19
-    * set *tmp44 *tmp47
   234 label *label15
   235 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   236 set *tmp32 *tmp48
 
   266 control enabled generator2 true
   267 set *tmp59 true
   268 label *label24
-    * set *tmp52 *tmp59
   269 label *label22
   270 set :kilo:val .AVG_SURPLUS
   271 call *label0 :kilo*retaddr :kilo*retval
 
   290 print :surplus
   291 print "kW flow."
   292 print "\n"
-    * set *tmp68 null
   293 jump *label26 always
   294 label *label25
   295 print "Power "
 
   317 label *label30
   318 set *tmp80 null
   319 label *label31
-    * set *tmp78 *tmp80
   320 jump *label29 always
   321 label *label28
-    * set *tmp78 null
   322 label *label29
   323 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   324 op mul *tmp82 .GOAL_BUFFER 0.8
 
   339 label *label33
   340 set *tmp70 *tmp85
   341 label *label27
-    * set *tmp68 *tmp70
   342 label *label26
   343 op notEqual *tmp91 .REACTORS_DESIRED 5
   344 jump *label34 equal *tmp91 false
 
   346 print .REACTORS_DESIRED
   347 print "/5 reactors."
   348 print "\n"
-    * set *tmp92 null
   349 jump *label35 always
   350 label *label34
-    * set *tmp92 null
   351 label *label35
   352 printflush message1
   353 label *label8
 
   399 jump *label43 equal *tmp107 false
   400 set :calc_charge_req*retval 0
   401 jump *label42 always
-    * set *tmp108 null
   402 jump *label44 always
   403 label *label43
-    * set *tmp108 null
   404 label *label44
   405 op sub *tmp109 30 :calc_charge_req:secs
   406 set :calc_charge_req:time_left *tmp109
 
   451 print "emergency mode"
   452 print "\n"
   453 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   454 jump *label47 always
   455 label *label46
   456 jump *label48 equal :start_reactor:enabled false
 
   652 label *label65
   653 set *tmp131 *tmp178
   654 label *label49
-    * set *tmp128 *tmp131
   655 label *label47
   656 sensor *tmp201 :start_reactor:reactor @enabled
   657 op notEqual *tmp202 :start_reactor:enabled *tmp201
   658 jump *label76 equal *tmp202 false
   659 set *tmp204 @tick
   660 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   661 jump *label77 always
   662 label *label76
-    * set *tmp203 null
   663 label *label77
   664 set :start_reactor*retval :start_reactor:supply_fuel
   665 jump *label45 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   198 jump *label16 equal :throttle_blast:emerg_shutdown false
   199 print " Enemies detected."
   200 print "\n"
-    * set *tmp45 null
   201 jump *label17 always
   202 label *label16
   203 print " Critical power."
   204 print "\n"
-    * set *tmp45 null
   205 label *label17
   206 jump *label15 always
   207 label *label14
 
   216 print " "
   217 print "(due to emergency)"
   218 print "\n"
-    * set *tmp47 null
   219 jump *label19 always
   220 label *label18
   221 set :throttle_blast:limit .FUEL_LIMIT
 
   226 print :throttle_blast:limit
   227 print "\"
   228 print "n"
-    * set *tmp47 null
   229 label *label19
   230 label *label15
   231 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   255 print "\n"
   256 control enabled generator1 false
   257 control enabled generator2 false
-    * set *tmp59 false
   258 jump *label24 always
   259 label *label23
   260 control enabled generator1 true
   261 control enabled generator2 true
-    * set *tmp59 true
   262 label *label24
   263 label *label22
   264 set :kilo:val .AVG_SURPLUS
 
   306 jump *label30 equal *tmp79 false
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   309 jump *label31 always
   310 label *label30
-    * set *tmp80 null
   311 label *label31
   312 jump *label29 always
   313 label *label28
 
   329 label *label32
   330 set *tmp85 null
   331 label *label33
-    * set *tmp70 *tmp85
   332 label *label27
   333 label *label26
   334 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   374 set *tmp101 .FUEL_OFF
   375 label *label41
   376 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   377 label *label37
   378 return :update_fuel*retaddr
   379 end
 
   549 label *label53
   550 set *tmp133 *tmp140
   551 label *label51
-    * set *tmp131 *tmp133
   552 jump *label49 always
   553 label *label48
   554 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   639 label *label67
   640 set *tmp178 *tmp181
   641 label *label65
-    * set *tmp131 *tmp178
   642 label *label49
   643 label *label47
   644 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   324 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   325 op min *tmp90 5 *tmp89
   326 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   327 jump *label33 always
   328 label *label32
-    * set *tmp85 null
   329 label *label33
   330 label *label27
   331 label *label26
 
   448 control enabled *tmp134 false
   449 print "STOP unwanted"
   450 print "\n"
-    * set *tmp133 null
   451 jump *label51 always
   452 label *label50
   453 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   544 label *label55
   545 set *tmp140 *tmp144
   546 label *label53
-    * set *tmp133 *tmp140
   547 label *label51
   548 jump *label49 always
   549 label *label48
 
   563 print "IDLE"
   564 print "\n"
   565 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   566 jump *label65 always
   567 label *label64
   568 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   632 label *label69
   633 set *tmp181 *tmp190
   634 label *label67
-    * set *tmp178 *tmp181
   635 label *label65
   636 label *label49
   637 label *label47

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   459 control enabled *tmp141 false
   460 print "STOP system fuel low"
   461 print "\n"
-    * set *tmp140 null
   462 jump *label53 always
   463 label *label52
   464 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   541 label *label57
   542 set *tmp144 *tmp148
   543 label *label55
-    * set *tmp140 *tmp144
   544 label *label53
   545 label *label51
   546 jump *label49 always
 
   581 print "W)"
   582 print "\n"
   583 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   584 jump *label67 always
   585 label *label66
   586 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   627 label *label73
   628 set *tmp190 *tmp196
   629 label *label69
-    * set *tmp181 *tmp190
   630 label *label67
   631 label *label65
   632 label *label49

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   467 control enabled *tmp145 false
   468 print "STOP fuel low"
   469 print "\n"
-    * set *tmp144 null
   470 jump *label55 always
   471 label *label54
   472 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   538 label *label59
   539 set *tmp148 *tmp152
   540 label *label57
-    * set *tmp144 *tmp148
   541 label *label55
   542 label *label53
   543 label *label51
 
   596 print "\n"
   597 set *tmp193 null
   598 label *label71
-    * set *tmp190 *tmp193
   599 jump *label69 always
   600 label *label68
   601 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   622 label *label75
   623 set *tmp196 *tmp198
   624 label *label73
-    * set *tmp190 *tmp196
   625 label *label69
   626 label *label67
   627 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   475 control enabled *tmp149 false
   476 print "STOP out of cryo"
   477 print "\n"
-    * set *tmp148 null
   478 jump *label57 always
   479 label *label56
   480 op lessThan *tmp151 :start_reactor:secs 30
 
   535 label *label63
   536 set *tmp152 *tmp164
   537 label *label59
-    * set *tmp148 *tmp152
   538 label *label57
   539 label *label55
   540 label *label53
 
   587 jump *label70 equal *tmp192 false
   588 print "WAIT fuel"
   589 print "\n"
-    * set *tmp193 null
   590 jump *label71 always
   591 label *label70
   592 print "WAIT system fuel"
   593 print "\n"
-    * set *tmp193 null
   594 label *label71
   595 jump *label69 always
   596 label *label68
 
   599 jump *label72 equal *tmp195 false
   600 print "WAIT buffer fuel"
   601 print "\n"
-    * set *tmp196 null
   602 jump *label73 always
   603 label *label72
   604 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   615 control enabled *tmp199 true
   616 set *tmp198 true
   617 label *label75
-    * set *tmp196 *tmp198
   618 label *label73
   619 label *label69
   620 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   507 print "\n"
   508 set *tmp157 null
   509 label *label61
-    * set *tmp152 *tmp157
   510 jump *label59 always
   511 label *label58
   512 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   532 print "\n"
   533 set *tmp164 null
   534 label *label63
-    * set *tmp152 *tmp164
   535 label *label59
   536 label *label57
   537 label *label55
 
   603 jump *label74 equal *tmp197 false
   604 print "WAIT cryo"
   605 print "\n"
-    * set *tmp198 null
   606 jump *label75 always
   607 label *label74
   608 print "STARTUP"
 
   610 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   611 set *tmp199 :start_reactor:reactor
   612 control enabled *tmp199 true
-    * set *tmp198 true
   613 label *label75
   614 label *label73
   615 label *label69

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   493 print "START FAIL battery"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   496 jump *label61 always
   497 label *label60
   498 op sub *tmp160 30 :start_reactor:secs
 
   504 print :start_reactor:charge_req
   505 print "J"
   506 print "\n"
-    * set *tmp157 null
   507 label *label61
   508 jump *label59 always
   509 label *label58
 
   516 print "ABANDON - battery crit"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   519 jump *label63 always
   520 label *label62
   521 op idiv *tmp167 :start_reactor:secs 6
 
   527 print " "
   528 print "mins"
   529 print "\n"
-    * set *tmp164 null
   530 label *label63
   531 label *label59
   532 label *label57

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-64 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
    78 set :calc_charge_req:reactor reactor1
    79 set :calc_charge_req:time :t_startup1
    80 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
    84 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   85 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    86 set :calc_charge_req:reactor reactor3
    87 set :calc_charge_req:time :t_startup3
    88 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   89 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    90 set :calc_charge_req:reactor reactor4
    91 set :calc_charge_req:time :t_startup4
    92 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    94 set :calc_charge_req:reactor reactor5
    95 set :calc_charge_req:time :t_startup5
    96 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+   97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    98 set :start_reactor:reactor reactor1
    99 set :start_reactor:reactor_num 1
   100 set :start_reactor:emerg_shutdown :emerg_shutdown
   101 set :start_reactor:fuel_on :fuel_1
   102 set :start_reactor:t_startup :t_startup1
   103 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  104 set :fuel_1 :start_reactor*retval
   105 set :t_startup1 .RET_T_STARTUP
   106 set :update_fuel:fuel :fuel_1
   107 set :update_fuel:uld_in .ULD_IN_1
 
   113 set :start_reactor:fuel_on :fuel_2
   114 set :start_reactor:t_startup :t_startup2
   115 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  116 set :fuel_2 :start_reactor*retval
   117 set :t_startup2 .RET_T_STARTUP
   118 set :update_fuel:fuel :fuel_2
   119 set :update_fuel:uld_in .ULD_IN_2
 
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
   122 set :check_radar:unit .TOWER
   123 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  124 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   125 set :start_reactor:reactor reactor3
   126 set :start_reactor:reactor_num 3
   127 set :start_reactor:emerg_shutdown :emerg_shutdown
   128 set :start_reactor:fuel_on :fuel_3
   129 set :start_reactor:t_startup :t_startup3
   130 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  131 set :fuel_3 :start_reactor*retval
   132 set :t_startup3 .RET_T_STARTUP
   133 set :start_reactor:reactor reactor4
   134 set :start_reactor:reactor_num 4
 
   136 set :start_reactor:fuel_on :fuel_4
   137 set :start_reactor:t_startup :t_startup4
   138 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  139 set :fuel_4 :start_reactor*retval
   140 set :t_startup4 .RET_T_STARTUP
   141 set :start_reactor:reactor reactor5
   142 set :start_reactor:reactor_num 5
 
   144 set :start_reactor:fuel_on :fuel_5
   145 set :start_reactor:t_startup :t_startup5
   146 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  147 set :fuel_5 :start_reactor*retval
   148 set :t_startup5 .RET_T_STARTUP
   149 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  150 op or :fuel_many *tmp27 :fuel_5
   151 set :update_fuel:fuel :fuel_many
   152 set :update_fuel:uld_in .ULD_IN_MANY
   153 set :update_fuel:uld_out .ULD_OUT_MANY
 
   158 set :throttle_blast:reactors_fueled *tmp31
   159 set :throttle_blast:emerg_shutdown :emerg_shutdown
   160 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  161 op floor :throttle_blast:charge *tmp33
   162 sensor *tmp35 .NODE @powerNetIn
   163 sensor *tmp36 .NODE @powerNetOut
   164 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  165 op floor :throttle_blast:surplus *tmp37
+  166 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   167 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   168 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   169 op land *tmp42 *tmp40 *tmp41
 
   210 print "n"
   211 label *label19
   212 label *label15
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  213 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   214 jump *label13 always
   215 set *tmp32 null
   216 label *label13
 
   226 # "Function: def diff_generators()"
   227 sensor *tmp53 .NODE @powerNetStored
   228 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  229 op div :diff_generators:stored_pc *tmp53 *tmp54
   230 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   231 op lessThan *tmp57 .START_POWER_REQ 10
   232 op land *tmp58 *tmp56 *tmp57
 
   243 label *label22
   244 set :kilo:val .AVG_SURPLUS
   245 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  246 set :surplus :kilo*retval
+  247 sensor :kilo:val .NODE @powerNetStored
   248 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  249 set :charge :kilo*retval
   250 op greaterThan *tmp67 .START_POWER_REQ 0
   251 jump *label25 equal *tmp67 false
   252 set :kilo:val .START_POWER_REQ
   253 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  254 set :req :kilo*retval
   255 print "Req "
   256 print :req
   257 print "kJ / "
 
   271 # "Function: def update_reactors_desired()"
   272 sensor *tmp71 .NODE @powerNetStored
   273 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  274 op div :update_reactors_desired:stored *tmp71 *tmp72
   275 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   276 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   277 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   294 jump *label32 equal *tmp84 false
   295 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   296 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  297 op max :update_reactors_desired:needed 1 *tmp87
   298 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  299 op min .REACTORS_DESIRED 5 *tmp89
   300 jump *label33 always
   301 label *label32
   302 label *label33
 
   319 label *label0
   320 # "Function: def kilo(in val)"
   321 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  322 op div :kilo*retval *tmp93 10
   323 jump *label36 always
   324 set :kilo*retval null
   325 label *label36
 
   350 label *label2
   351 # "Function: def calc_charge_req(in reactor, in time)"
   352 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  353 op idiv :calc_charge_req:secs *tmp102 60
   354 op greaterThan *tmp104 :calc_charge_req:secs 30
   355 sensor *tmp105 :calc_charge_req:reactor @enabled
   356 op equal *tmp106 *tmp105 false
 
   361 jump *label44 always
   362 label *label43
   363 label *label44
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  364 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   365 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   366 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  367 op floor :calc_charge_req:charge_req *tmp111
   368 set :calc_charge_req*retval :calc_charge_req:charge_req
   369 jump *label42 always
   370 set :calc_charge_req*retval null
 
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :start_reactor:t_startup
   377 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  378 op idiv :start_reactor:secs *tmp113 60
+  379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   380 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  381 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   383 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  384 op floor :start_reactor:charge *tmp118
   385 sensor *tmp120 .NODE @powerNetIn
   386 sensor *tmp121 .NODE @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  388 op floor :start_reactor:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   393 print "#"
   394 print :start_reactor:reactor_num
   395 print " "
   396 print "- "
   397 jump *label46 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  398 control enabled :start_reactor:reactor false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor:supply_fuel false
 
   404 jump *label48 equal :start_reactor:enabled false
   405 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   406 jump *label50 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  407 control enabled :start_reactor:reactor false
   408 print "STOP unwanted"
   409 print "\n"
   410 jump *label51 always
 
   414 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   415 op land *tmp139 *tmp136 *tmp138
   416 jump *label52 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  417 control enabled :start_reactor:reactor false
   418 print "STOP system fuel low"
   419 print "\n"
   420 jump *label53 always
   421 label *label52
   422 op lessThanEq *tmp143 :start_reactor:fuel 1
   423 jump *label54 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  424 control enabled :start_reactor:reactor false
   425 print "STOP fuel low"
   426 print "\n"
   427 jump *label55 always
   428 label *label54
   429 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   430 jump *label56 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  431 control enabled :start_reactor:reactor false
   432 print "STOP out of cryo"
   433 print "\n"
   434 jump *label57 always
 
   444 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   445 op land *tmp156 *tmp154 *tmp155
   446 jump *label60 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  447 control enabled :start_reactor:reactor false
   448 print "START FAIL battery"
   449 print "\n"
   450 set :start_reactor:supply_fuel false
   451 jump *label61 always
   452 label *label60
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  453 op sub :start_reactor:time_left 30 :start_reactor:secs
   454 print "Starting "
   455 print :start_reactor:time_left
   456 print " "
 
   465 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   466 op land *tmp163 *tmp161 *tmp162
   467 jump *label62 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  468 control enabled :start_reactor:reactor false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor:supply_fuel false
   472 jump *label63 always
   473 label *label62
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  474 op idiv :start_reactor:mins :start_reactor:secs 6
+  475 op div :start_reactor:mins :start_reactor:mins 10
   476 print "RUN "
   477 print :start_reactor:mins
   478 print " "
 
   489 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   490 op sub *tmp170 *tmp169 .PWR_ABORT
   491 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  492 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   493 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  494 op max :start_reactor:flow_units -0.1 *tmp173
   495 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  496 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   497 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   498 jump *label64 equal *tmp177 false
   499 print "IDLE"
 
   506 jump *label66 equal *tmp180 false
   507 op mul *tmp182 :start_reactor:flow_units 1000
   508 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  509 op div :start_reactor:flow *tmp183 10
   510 op mul *tmp185 :start_reactor:charge_units 1000
   511 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  512 op div :start_reactor:charge *tmp186 10
   513 print "WAIT power. (%"
   514 print :start_reactor:charge
   515 print "J + %"
 
   550 print "STARTUP"
   551 print "\n"
   552 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  553 control enabled :start_reactor:reactor true
   554 label *label75
   555 label *label73
   556 label *label69
 
   561 sensor *tmp201 :start_reactor:reactor @enabled
   562 op notEqual *tmp202 :start_reactor:enabled *tmp201
   563 jump *label76 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  564 set .RET_T_STARTUP @tick
   565 jump *label77 always
   566 label *label76
   567 label *label77
 
   573 end
   574 label *label4
   575 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  576 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   577 op notEqual *tmp206 :check_radar:enemy_found null
   578 jump *label79 equal *tmp206 false
   579 control enabled projector1 true
   580 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  581 control config .ULD_IN_1 .FUEL_OFF
+  582 control config .ULD_OUT_1 .FUEL
+  583 control config .ULD_IN_2 .FUEL_OFF
+  584 control config .ULD_OUT_2 .FUEL
+  585 control config .ULD_IN_MANY .FUEL_OFF
+  586 control config .ULD_OUT_MANY .FUEL
+  587 control config .ULD_MIXER .FUEL_OFF
   588 control enabled reactor1 false
   589 control enabled reactor2 false
   590 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   185 label *label17
   186 jump *label15 always
   187 label *label14
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label18 equal *tmp46 false
+  188 jump *label18 notEqual :throttle_blast:reactors_fueled false
   189 set :throttle_blast:limit .FUEL_LIMIT_LOW
   190 print "Fuel "
   191 print :throttle_blast:fuel_stored
 
   244 sensor :kilo:val .NODE @powerNetStored
   245 call *label0 :kilo*retaddr :kilo*retval
   246 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label25 equal *tmp67 false
+  247 jump *label25 lessThanEq .START_POWER_REQ 0
   248 set :kilo:val .START_POWER_REQ
   249 call *label0 :kilo*retaddr :kilo*retval
   250 set :req :kilo*retval
 
   273 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   274 op land *tmp77 *tmp74 *tmp76
   275 jump *label28 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label30 equal *tmp79 false
+  276 jump *label30 lessThanEq .REACTORS_DESIRED 2
   277 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   278 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   279 jump *label31 always
 
   297 label *label33
   298 label *label27
   299 label *label26
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label34 equal *tmp91 false
+  300 jump *label34 equal .REACTORS_DESIRED 5
   301 print "Require only "
   302 print .REACTORS_DESIRED
   303 print "/5 reactors."
 
   330 label *label39
   331 control config *tmp95 *tmp97
   332 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label40 equal *tmp100 false
+  333 jump *label40 notEqual :update_fuel:fuel false
   334 set *tmp101 .FUEL
   335 jump *label41 always
   336 label *label40
 
   395 jump *label47 always
   396 label *label46
   397 jump *label48 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label50 equal *tmp132 false
+  398 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   399 control enabled :start_reactor:reactor false
   400 print "STOP unwanted"
   401 print "\n"
 
   411 print "\n"
   412 jump *label53 always
   413 label *label52
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label54 equal *tmp143 false
+  414 jump *label54 greaterThan :start_reactor:fuel 1
   415 control enabled :start_reactor:reactor false
   416 print "STOP fuel low"
   417 print "\n"
   418 jump *label55 always
   419 label *label54
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label56 equal *tmp147 false
+  420 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   421 control enabled :start_reactor:reactor false
   422 print "STOP out of cryo"
   423 print "\n"
   424 jump *label57 always
   425 label *label56
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label58 equal *tmp151 false
+  426 jump *label58 greaterThanEq :start_reactor:secs 30
   427 set :calc_charge_req:reactor :start_reactor:reactor
   428 set :calc_charge_req:time :start_reactor:t_startup
   429 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
   483 op max :start_reactor:flow_units -0.1 *tmp173
   484 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   485 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label64 equal *tmp177 false
+  486 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   487 print "IDLE"
   488 print "\n"
   489 set :start_reactor:supply_fuel false
   490 jump *label65 always
   491 label *label64
   492 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label66 equal *tmp180 false
+  493 jump *label66 greaterThanEq *tmp179 1
   494 op mul *tmp182 :start_reactor:flow_units 1000
   495 op floor *tmp183 *tmp182
   496 op div :start_reactor:flow *tmp183 10
 
   510 op land *tmp189 :start_reactor:fuel_on *tmp188
   511 jump *label68 equal *tmp189 false
   512 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label70 equal *tmp192 false
+  513 jump *label70 lessThanEq *tmp191 .FUEL_REQ
   514 print "WAIT fuel"
   515 print "\n"
   516 jump *label71 always
 
   521 jump *label69 always
   522 label *label68
   523 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label72 equal *tmp195 false
+  524 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
   525 print "WAIT buffer fuel"
   526 print "\n"
   527 jump *label73 always
   528 label *label72
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label74 equal *tmp197 false
+  529 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   530 print "WAIT cryo"
   531 print "\n"
   532 jump *label75 always
 
   543 label *label49
   544 label *label47
   545 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label76 equal *tmp202 false
+  546 jump *label76 equal :start_reactor:enabled *tmp201
   547 set .RET_T_STARTUP @tick
   548 jump *label77 always
   549 label *label76
 
   557 label *label4
   558 # "Function: def check_radar(in unit)"
   559 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label79 equal *tmp206 false
+  560 jump *label79 equal :check_radar:enemy_found null
   561 control enabled projector1 true
   562 control enabled projector2 true
   563 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   275 jump *label30 lessThanEq .REACTORS_DESIRED 2
   276 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   277 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label31 always
   278 label *label30
   279 label *label31
-    * jump *label29 always
   280 label *label28
   281 label *label29
   282 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   289 op max :update_reactors_desired:needed 1 *tmp87
   290 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   291 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label33 always
   292 label *label32
   293 label *label33
   294 label *label27
 
   298 print .REACTORS_DESIRED
   299 print "/5 reactors."
   300 print "\n"
-    * jump *label35 always
   301 label *label34
   302 label *label35
   303 printflush message1
 
   346 jump *label43 equal *tmp107 false
   347 set :calc_charge_req*retval 0
   348 jump *label42 always
-    * jump *label44 always
   349 label *label43
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   539 sensor *tmp201 :start_reactor:reactor @enabled
   540 jump *label76 equal :start_reactor:enabled *tmp201
   541 set .RET_T_STARTUP @tick
-    * jump *label77 always
   542 label *label76
   543 label *label77
   544 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   352 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  353 op idiv :calc_charge_req:charge_req *tmp110 0.04
   354 set :calc_charge_req*retval :calc_charge_req:charge_req
   355 jump *label42 always
   356 set :calc_charge_req*retval null
 
   484 label *label64
   485 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   486 jump *label66 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  487 op idiv *tmp183 :start_reactor:flow_units 0.001
   488 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  489 op idiv *tmp186 :start_reactor:charge_units 0.001
   490 op div :start_reactor:charge *tmp186 10
   491 print "WAIT power. (%"
   492 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   143 set :fuel_5 :start_reactor*retval
   144 set :t_startup5 .RET_T_STARTUP
   145 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  146 op or :fuel_many *tmp27 :start_reactor*retval
   147 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  148 set :update_fuel:uld_in unloader5
+  149 set :update_fuel:uld_out unloader6
   150 call *label1 :update_fuel*retaddr :update_fuel*retval
   151 op or *tmp30 :fuel_1 :fuel_2
   152 op or *tmp31 *tmp30 :fuel_many
   153 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   154 set :throttle_blast:reactors_fueled *tmp31
   155 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  156 sensor *tmp33 node1 @powerNetStored
   157 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  158 sensor *tmp35 node1 @powerNetIn
+  159 sensor *tmp36 node1 @powerNetOut
   160 op sub *tmp37 *tmp35 *tmp36
   161 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  162 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  163 op lessThan *tmp40 :throttle_blast:charge 5000
+  164 op lessThan *tmp41 :throttle_blast:surplus -500
   165 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  166 op or *tmp43 *tmp42 :emerg_shutdown
   167 jump *label14 equal *tmp43 false
   168 set :throttle_blast:limit 0
   169 print "Central Fuel at "
   170 print :throttle_blast:fuel_stored
   171 print " "
   172 print "/ "
-    * print :throttle_blast:limit
+  173 print 0
   174 print " "
   175 print "- "
-    * jump *label16 equal :throttle_blast:emerg_shutdown false
+  176 jump *label16 equal :emerg_shutdown false
   177 print " Enemies detected."
   178 print "\n"
   179 jump *label17 always
 
   183 label *label17
   184 jump *label15 always
   185 label *label14
-    * jump *label18 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  186 jump *label18 notEqual *tmp31 false
+  187 set :throttle_blast:limit 150
   188 print "Fuel "
   189 print :throttle_blast:fuel_stored
   190 print " "
   191 print "/ "
-    * print :throttle_blast:limit
+  192 print .FUEL_LIMIT_LOW
   193 print " "
   194 print "(due to emergency)"
   195 print "\n"
   196 jump *label19 always
   197 label *label18
-    * set :throttle_blast:limit .FUEL_LIMIT
+  198 set :throttle_blast:limit 800
   199 print "Fuel "
   200 print :throttle_blast:fuel_stored
   201 print " "
   202 print "/ "
-    * print :throttle_blast:limit
+  203 print .FUEL_LIMIT
   204 print "\"
   205 print "n"
   206 label *label19
   207 label *label15
   208 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   209 jump *label13 always
-    * set *tmp32 null
   210 label *label13
   211 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label20 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  212 set *tmp49 unloader7
+  213 jump *label20 equal *tmp32 false
+  214 set *tmp51 @pyratite
   215 jump *label21 always
   216 label *label20
-    * set *tmp51 .FUEL_OFF
+  217 set *tmp51 @scrap
   218 label *label21
-    * control config *tmp49 *tmp51
+  219 control config .ULD_MIXER *tmp51
   220 # "Function: def diff_generators()"
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  221 sensor *tmp53 node1 @powerNetStored
+  222 sensor *tmp54 node1 @powerNetCapacity
   223 op div :diff_generators:stored_pc *tmp53 *tmp54
   224 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   225 op lessThan *tmp57 .START_POWER_REQ 10
 
   238 set :kilo:val .AVG_SURPLUS
   239 call *label0 :kilo*retaddr :kilo*retval
   240 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  241 sensor :kilo:val node1 @powerNetStored
   242 call *label0 :kilo*retaddr :kilo*retval
   243 set :charge :kilo*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
 
   246 call *label0 :kilo*retaddr :kilo*retval
   247 set :req :kilo*retval
   248 print "Req "
-    * print :req
+  249 print :kilo*retval
   250 print "kJ / "
   251 print :charge
   252 print "kJ. "
 
   258 print "Power "
   259 print :surplus
   260 print "kW, "
-    * print :charge
+  261 print :kilo*retval
   262 print "kJ"
   263 print "\n"
   264 # "Function: def update_reactors_desired()"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  265 sensor *tmp71 node1 @powerNetStored
+  266 sensor *tmp72 node1 @powerNetCapacity
   267 op div :update_reactors_desired:stored *tmp71 *tmp72
   268 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  269 op add *tmp75 6500 10000
+  270 op greaterThan *tmp76 .AVG_SURPLUS 16500
   271 op land *tmp77 *tmp74 *tmp76
   272 jump *label28 equal *tmp77 false
   273 jump *label30 lessThanEq .REACTORS_DESIRED 2
   274 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  275 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   276 label *label30
   277 label *label31
   278 label *label28
   279 label *label29
   280 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  281 op mul *tmp82 10000 0.8
+  282 op lessThan *tmp83 .AVG_SURPLUS 8000
   283 op land *tmp84 *tmp81 *tmp83
   284 jump *label32 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  285 op sub *tmp86 .AVG_SURPLUS 10000
+  286 op idiv *tmp87 *tmp86 6500
   287 op max :update_reactors_desired:needed 1 *tmp87
   288 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   289 op min .REACTORS_DESIRED 5 *tmp89
 
   308 op idiv *tmp93 :kilo:val 100
   309 op div :kilo*retval *tmp93 10
   310 jump *label36 always
-    * set :kilo*retval null
   311 label *label36
   312 return :kilo*retaddr
   313 end
 
   320 label *label38
   321 set *tmp97 .FUEL_OFF
   322 label *label39
-    * control config *tmp95 *tmp97
+  323 control config :update_fuel:uld_in *tmp97
   324 set *tmp98 :update_fuel:uld_out
   325 jump *label40 notEqual :update_fuel:fuel false
   326 set *tmp101 .FUEL
 
   328 label *label40
   329 set *tmp101 .FUEL_OFF
   330 label *label41
-    * control config *tmp98 *tmp101
+  331 control config :update_fuel:uld_out *tmp101
   332 label *label37
   333 return :update_fuel*retaddr
   334 end
 
   350 op idiv :calc_charge_req:charge_req *tmp110 0.04
   351 set :calc_charge_req*retval :calc_charge_req:charge_req
   352 jump *label42 always
-    * set :calc_charge_req*retval null
   353 label *label42
   354 return :calc_charge_req*retaddr
   355 end
 
   417 set :calc_charge_req:time :start_reactor:t_startup
   418 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   419 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  420 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   421 op lessThan *tmp154 *tmp153 .PWR_ABORT
   422 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   423 op land *tmp156 *tmp154 *tmp155
 
   433 print :start_reactor:time_left
   434 print " "
   435 print "secs, req "
-    * print :start_reactor:charge_req
+  436 print :calc_charge_req*retval
   437 print "J"
   438 print "\n"
   439 label *label61
 
   536 label *label77
   537 set :start_reactor*retval :start_reactor:supply_fuel
   538 jump *label45 always
-    * set :start_reactor*retval null
   539 label *label45
   540 return :start_reactor*retaddr
   541 end
 
   559 control enabled reactor5 false
   560 set :check_radar*retval true
   561 jump *label78 always
-    * set *tmp207 null
   562 jump *label80 always
   563 label *label79
   564 control enabled projector1 false
   565 control enabled projector2 false
   566 set :check_radar*retval false
   567 jump *label78 always
-    * set *tmp207 null
   568 label *label80
-    * set :check_radar*retval *tmp207
+  569 set :check_radar*retval null
   570 label *label78
   571 return :check_radar*retaddr
   572 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    53 # "Function: def check_manual_shutdown()"
    54 op notEqual *tmp9 switch1 null
    55 sensor *tmp10 switch1 @enabled
 
   146 op or *tmp30 :fuel_1 :fuel_2
   147 op or *tmp31 *tmp30 :fuel_many
   148 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp31
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   149 sensor *tmp33 node1 @powerNetStored
   150 op floor :throttle_blast:charge *tmp33
   151 sensor *tmp35 node1 @powerNetIn
 
   182 print :throttle_blast:fuel_stored
   183 print " "
   184 print "/ "
-    * print .FUEL_LIMIT_LOW
+  185 print 150
   186 print " "
   187 print "(due to emergency)"
   188 print "\n"
 
   193 print :throttle_blast:fuel_stored
   194 print " "
   195 print "/ "
-    * print .FUEL_LIMIT
+  196 print 800
   197 print "\"
   198 print "n"
   199 label *label19
 
   201 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   202 jump *label13 always
   203 label *label13
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   204 jump *label20 equal *tmp32 false
   205 set *tmp51 @pyratite
   206 jump *label21 always
   207 label *label20
   208 set *tmp51 @scrap
   209 label *label21
-    * control config .ULD_MIXER *tmp51
+  210 control config unloader7 *tmp51
   211 # "Function: def diff_generators()"
   212 sensor *tmp53 node1 @powerNetStored
   213 sensor *tmp54 node1 @powerNetCapacity
 
   235 jump *label25 lessThanEq .START_POWER_REQ 0
   236 set :kilo:val .START_POWER_REQ
   237 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   238 print "Req "
   239 print :kilo*retval
   240 print "kJ / "
 
   256 sensor *tmp72 node1 @powerNetCapacity
   257 op div :update_reactors_desired:stored *tmp71 *tmp72
   258 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   259 op greaterThan *tmp76 .AVG_SURPLUS 16500
   260 op land *tmp77 *tmp74 *tmp76
   261 jump *label28 equal *tmp77 false
 
   267 label *label28
   268 label *label29
   269 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   270 op lessThan *tmp83 .AVG_SURPLUS 8000
   271 op land *tmp84 *tmp81 *tmp83
   272 jump *label32 equal *tmp84 false
 
   301 end
   302 label *label1
   303 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp95 :update_fuel:uld_in
   304 jump *label38 equal :update_fuel:fuel false
   305 set *tmp97 .FUEL
   306 jump *label39 always
 
   308 set *tmp97 .FUEL_OFF
   309 label *label39
   310 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   311 jump *label40 notEqual :update_fuel:fuel false
   312 set *tmp101 .FUEL
   313 jump *label41 always
 
   402 set :calc_charge_req:reactor :start_reactor:reactor
   403 set :calc_charge_req:time :start_reactor:t_startup
   404 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   405 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   406 op lessThan *tmp154 *tmp153 .PWR_ABORT
   407 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   551 set :check_radar*retval false
   552 jump *label78 always
   553 label *label80
-    * set :check_radar*retval null
   554 label *label78
   555 return :check_radar*retaddr
   556 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-12 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp231 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
   194 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   195 jump *label13 always
   196 label *label13
-    * jump *label20 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label21 always
-    * label *label20
-    * set *tmp51 @scrap
-    * label *label21
+  197 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   198 control config unloader7 *tmp51
   199 # "Function: def diff_generators()"
   200 sensor *tmp53 node1 @powerNetStored
 
   289 end
   290 label *label1
   291 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label38 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label39 always
-    * label *label38
-    * set *tmp97 .FUEL_OFF
-    * label *label39
+  292 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   293 control config :update_fuel:uld_in *tmp97
-    * jump *label40 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label41 always
-    * label *label40
-    * set *tmp101 .FUEL_OFF
-    * label *label41
+  294 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   295 control config :update_fuel:uld_out *tmp101
   296 label *label37
   297 return :update_fuel*retaddr
 
   492 label *label65
   493 label *label49
   494 label *label47
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label76 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
-    * label *label76
-    * label *label77
+  495 sensor *tmp201 :start_reactor:reactor @enabled
+  496 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   497 set :start_reactor*retval :start_reactor:supply_fuel
   498 jump *label45 always
   499 label *label45

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   215 label *label24
   216 label *label22
   217 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  218 label *label81
+  219 # "Function: def kilo(in val)"
+  220 op idiv *tmp93 :kilo:val 100
+  221 op div :kilo*retval *tmp93 10
+  222 jump *label82 always
+  223 label *label82
   224 set :surplus :kilo*retval
   225 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  226 label *label83
+  227 # "Function: def kilo(in val)"
+  228 op idiv *tmp93 :kilo:val 100
+  229 op div :kilo*retval *tmp93 10
+  230 jump *label84 always
+  231 label *label84
   232 set :charge :kilo*retval
   233 jump *label25 lessThanEq .START_POWER_REQ 0
   234 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  235 label *label85
+  236 # "Function: def kilo(in val)"
+  237 op idiv *tmp93 :kilo:val 100
+  238 op div :kilo*retval *tmp93 10
+  239 jump *label86 always
+  240 label *label86
   241 print "Req "
   242 print :kilo*retval
   243 print "kJ / "
 
   294 jump *label7 always
   295 label *label9
   296 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label36 always
-    * label *label36
-    * return :kilo*retaddr
-    * end
   297 label *label1
   298 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   299 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   217 set :kilo:val .AVG_SURPLUS
   218 label *label81
   219 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  220 op idiv *tmp93 .AVG_SURPLUS 100
   221 op div :kilo*retval *tmp93 10
   222 jump *label82 always
   223 label *label82
 
   234 set :kilo:val .START_POWER_REQ
   235 label *label85
   236 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  237 op idiv *tmp93 .START_POWER_REQ 100
   238 op div :kilo*retval *tmp93 10
   239 jump *label86 always
   240 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   214 control enabled generator2 true
   215 label *label24
   216 label *label22
-    * set :kilo:val .AVG_SURPLUS
   217 label *label81
   218 # "Function: def kilo(in val)"
   219 op idiv *tmp93 .AVG_SURPLUS 100
 
   230 label *label84
   231 set :charge :kilo*retval
   232 jump *label25 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   233 label *label85
   234 # "Function: def kilo(in val)"
   235 op idiv *tmp93 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
    90 set :update_fuel:fuel :start_reactor*retval
    91 set :update_fuel:uld_in unloader1
    92 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   93 label *label87
+   94 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   95 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+   96 control config :update_fuel:uld_in *tmp97
+   97 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+   98 control config :update_fuel:uld_out *tmp101
+   99 label *label88
   100 set :start_reactor:reactor reactor2
   101 set :start_reactor:reactor_num 2
   102 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   108 set :update_fuel:fuel :start_reactor*retval
   109 set :update_fuel:uld_in unloader3
   110 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  111 label *label89
+  112 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  113 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  114 control config :update_fuel:uld_in *tmp97
+  115 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  116 control config :update_fuel:uld_out *tmp101
+  117 label *label90
   118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   147 set :update_fuel:fuel :fuel_many
   148 set :update_fuel:uld_in unloader5
   149 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  150 label *label91
+  151 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  152 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  153 control config :update_fuel:uld_in *tmp97
+  154 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  155 control config :update_fuel:uld_out *tmp101
+  156 label *label92
   157 op or *tmp30 :fuel_1 :fuel_2
   158 op or *tmp31 *tmp30 :fuel_many
   159 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   310 jump *label7 always
   311 label *label9
   312 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
-    * label *label37
-    * return :update_fuel*retaddr
-    * end
   313 label *label2
   314 # "Function: def calc_charge_req(in reactor, in time)"
   315 op sub *tmp102 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    92 set :update_fuel:uld_out unloader2
    93 label *label87
    94 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+   95 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+   96 control config unloader1 *tmp97
+   97 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+   98 control config unloader2 *tmp101
    99 label *label88
   100 set :start_reactor:reactor reactor2
   101 set :start_reactor:reactor_num 2
 
   110 set :update_fuel:uld_out unloader4
   111 label *label89
   112 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  113 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  114 control config unloader3 *tmp97
+  115 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  116 control config unloader4 *tmp101
   117 label *label90
   118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
 
   149 set :update_fuel:uld_out unloader6
   150 label *label91
   151 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  152 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
+  153 control config unloader5 *tmp97
+  154 select *tmp101 equal :fuel_many false @blast-compound @scrap
+  155 control config unloader6 *tmp101
   156 label *label92
   157 op or *tmp30 :fuel_1 :fuel_2
   158 op or *tmp31 *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    87 call *label3 :start_reactor*retaddr :start_reactor*retval
    88 set :fuel_1 :start_reactor*retval
    89 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
    90 label *label87
    91 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    92 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   102 call *label3 :start_reactor*retaddr :start_reactor*retval
   103 set :fuel_2 :start_reactor*retval
   104 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   105 label *label89
   106 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   107 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   138 set :t_startup5 .RET_T_STARTUP
   139 op or *tmp27 :fuel_3 :fuel_4
   140 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   141 label *label91
   142 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   143 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    42 set .CONTAINER vault1
    43 set .NODE node1
    44 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   45 label *label93
+   46 # "Function: def check_radar(in unit)"
+   47 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   48 jump *label94 equal :check_radar:enemy_found null
+   49 control enabled projector1 true
+   50 control enabled projector2 true
+   51 control config .ULD_IN_1 .FUEL_OFF
+   52 control config .ULD_OUT_1 .FUEL
+   53 control config .ULD_IN_2 .FUEL_OFF
+   54 control config .ULD_OUT_2 .FUEL
+   55 control config .ULD_IN_MANY .FUEL_OFF
+   56 control config .ULD_OUT_MANY .FUEL
+   57 control config .ULD_MIXER .FUEL_OFF
+   58 control enabled reactor1 false
+   59 control enabled reactor2 false
+   60 control enabled reactor3 false
+   61 control enabled reactor4 false
+   62 control enabled reactor5 false
+   63 set :check_radar*retval true
+   64 jump *label96 always
+   65 jump *label95 always
+   66 label *label94
+   67 control enabled projector1 false
+   68 control enabled projector2 false
+   69 set :check_radar*retval false
+   70 jump *label96 always
+   71 label *label95
+   72 label *label96
    73 # "Function: def check_manual_shutdown()"
    74 op notEqual *tmp9 switch1 null
    75 sensor *tmp10 switch1 @enabled
 
   137 control config unloader4 *tmp101
   138 label *label90
   139 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  140 label *label97
+  141 # "Function: def check_radar(in unit)"
+  142 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  143 jump *label98 equal :check_radar:enemy_found null
+  144 control enabled projector1 true
+  145 control enabled projector2 true
+  146 control config .ULD_IN_1 .FUEL_OFF
+  147 control config .ULD_OUT_1 .FUEL
+  148 control config .ULD_IN_2 .FUEL_OFF
+  149 control config .ULD_OUT_2 .FUEL
+  150 control config .ULD_IN_MANY .FUEL_OFF
+  151 control config .ULD_OUT_MANY .FUEL
+  152 control config .ULD_MIXER .FUEL_OFF
+  153 control enabled reactor1 false
+  154 control enabled reactor2 false
+  155 control enabled reactor3 false
+  156 control enabled reactor4 false
+  157 control enabled reactor5 false
+  158 set :check_radar*retval true
+  159 jump *label100 always
+  160 jump *label99 always
+  161 label *label98
+  162 control enabled projector1 false
+  163 control enabled projector2 false
+  164 set :check_radar*retval false
+  165 jump *label100 always
+  166 label *label99
+  167 label *label100
   168 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   169 set :start_reactor:reactor reactor3
   170 set :start_reactor:reactor_num 3
 
   558 label *label45
   559 return :start_reactor*retaddr
   560 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label79 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label78 always
-    * jump *label80 always
-    * label *label79
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label78 always
-    * label *label80
-    * label *label78
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    44 set :check_radar:unit cyclone1
    45 label *label93
    46 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   47 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    48 jump *label94 equal :check_radar:enemy_found null
    49 control enabled projector1 true
    50 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   51 control config unloader1 @scrap
+   52 control config unloader2 @blast-compound
+   53 control config unloader3 @scrap
+   54 control config unloader4 @blast-compound
+   55 control config unloader5 @scrap
+   56 control config unloader6 @blast-compound
+   57 control config unloader7 @scrap
    58 control enabled reactor1 false
    59 control enabled reactor2 false
    60 control enabled reactor3 false
 
   139 set :check_radar:unit cyclone1
   140 label *label97
   141 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  142 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   143 jump *label98 equal :check_radar:enemy_found null
   144 control enabled projector1 true
   145 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  146 control config unloader1 @scrap
+  147 control config unloader2 @blast-compound
+  148 control config unloader3 @scrap
+  149 control config unloader4 @blast-compound
+  150 control config unloader5 @scrap
+  151 control config unloader6 @blast-compound
+  152 control config unloader7 @scrap
   153 control enabled reactor1 false
   154 control enabled reactor2 false
   155 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    30 set .REACTORS_DESIRED 5
    31 set .AVG_SURPLUS 500
    32 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    33 set .CONTAINER vault1
    34 set .NODE node1
-    * set :check_radar:unit cyclone1
    35 label *label93
    36 # "Function: def check_radar(in unit)"
    37 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   126 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   127 control config unloader4 *tmp101
   128 label *label90
-    * set :check_radar:unit cyclone1
   129 label *label97
   130 # "Function: def check_radar(in unit)"
   131 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    78 op or :emerg_shutdown :check_radar*retval *tmp8
    79 set :calc_charge_req:reactor reactor1
    80 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   81 label *label101
+   82 # "Function: def calc_charge_req(in reactor, in time)"
+   83 op sub *tmp102 @tick :calc_charge_req:time
+   84 op idiv :calc_charge_req:secs *tmp102 60
+   85 op greaterThan *tmp104 :calc_charge_req:secs 30
+   86 sensor *tmp105 :calc_charge_req:reactor @enabled
+   87 op equal *tmp106 *tmp105 false
+   88 op or *tmp107 *tmp104 *tmp106
+   89 jump *label102 equal *tmp107 false
+   90 set :calc_charge_req*retval 0
+   91 jump *label104 always
+   92 label *label102
+   93 label *label103
+   94 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   95 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+   96 op idiv :calc_charge_req:charge_req *tmp110 0.04
+   97 set :calc_charge_req*retval :calc_charge_req:charge_req
+   98 jump *label104 always
+   99 label *label104
   100 set .START_POWER_REQ :calc_charge_req*retval
   101 set :calc_charge_req:reactor reactor2
   102 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  103 label *label105
+  104 # "Function: def calc_charge_req(in reactor, in time)"
+  105 op sub *tmp102 @tick :calc_charge_req:time
+  106 op idiv :calc_charge_req:secs *tmp102 60
+  107 op greaterThan *tmp104 :calc_charge_req:secs 30
+  108 sensor *tmp105 :calc_charge_req:reactor @enabled
+  109 op equal *tmp106 *tmp105 false
+  110 op or *tmp107 *tmp104 *tmp106
+  111 jump *label106 equal *tmp107 false
+  112 set :calc_charge_req*retval 0
+  113 jump *label108 always
+  114 label *label106
+  115 label *label107
+  116 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  117 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  118 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  119 set :calc_charge_req*retval :calc_charge_req:charge_req
+  120 jump *label108 always
+  121 label *label108
   122 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   123 set :calc_charge_req:reactor reactor3
   124 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  125 label *label109
+  126 # "Function: def calc_charge_req(in reactor, in time)"
+  127 op sub *tmp102 @tick :calc_charge_req:time
+  128 op idiv :calc_charge_req:secs *tmp102 60
+  129 op greaterThan *tmp104 :calc_charge_req:secs 30
+  130 sensor *tmp105 :calc_charge_req:reactor @enabled
+  131 op equal *tmp106 *tmp105 false
+  132 op or *tmp107 *tmp104 *tmp106
+  133 jump *label110 equal *tmp107 false
+  134 set :calc_charge_req*retval 0
+  135 jump *label112 always
+  136 label *label110
+  137 label *label111
+  138 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  139 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  140 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  141 set :calc_charge_req*retval :calc_charge_req:charge_req
+  142 jump *label112 always
+  143 label *label112
   144 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   145 set :calc_charge_req:reactor reactor4
   146 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  147 label *label113
+  148 # "Function: def calc_charge_req(in reactor, in time)"
+  149 op sub *tmp102 @tick :calc_charge_req:time
+  150 op idiv :calc_charge_req:secs *tmp102 60
+  151 op greaterThan *tmp104 :calc_charge_req:secs 30
+  152 sensor *tmp105 :calc_charge_req:reactor @enabled
+  153 op equal *tmp106 *tmp105 false
+  154 op or *tmp107 *tmp104 *tmp106
+  155 jump *label114 equal *tmp107 false
+  156 set :calc_charge_req*retval 0
+  157 jump *label116 always
+  158 label *label114
+  159 label *label115
+  160 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  161 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  162 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  163 set :calc_charge_req*retval :calc_charge_req:charge_req
+  164 jump *label116 always
+  165 label *label116
   166 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   167 set :calc_charge_req:reactor reactor5
   168 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  169 label *label117
+  170 # "Function: def calc_charge_req(in reactor, in time)"
+  171 op sub *tmp102 @tick :calc_charge_req:time
+  172 op idiv :calc_charge_req:secs *tmp102 60
+  173 op greaterThan *tmp104 :calc_charge_req:secs 30
+  174 sensor *tmp105 :calc_charge_req:reactor @enabled
+  175 op equal *tmp106 *tmp105 false
+  176 op or *tmp107 *tmp104 *tmp106
+  177 jump *label118 equal *tmp107 false
+  178 set :calc_charge_req*retval 0
+  179 jump *label120 always
+  180 label *label118
+  181 label *label119
+  182 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  183 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  184 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  185 set :calc_charge_req*retval :calc_charge_req:charge_req
+  186 jump *label120 always
+  187 label *label120
   188 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   189 set :start_reactor:reactor reactor1
   190 set :start_reactor:reactor_num 1
 
   434 jump *label7 always
   435 label *label9
   436 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label43 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label42 always
-    * label *label43
-    * label *label44
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label42 always
-    * label *label42
-    * return :calc_charge_req*retaddr
-    * end
   437 label *label3
   438 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   439 set .RET_T_STARTUP :start_reactor:t_startup
 
   496 jump *label58 greaterThanEq :start_reactor:secs 30
   497 set :calc_charge_req:reactor :start_reactor:reactor
   498 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  499 label *label121
+  500 # "Function: def calc_charge_req(in reactor, in time)"
+  501 op sub *tmp102 @tick :calc_charge_req:time
+  502 op idiv :calc_charge_req:secs *tmp102 60
+  503 op greaterThan *tmp104 :calc_charge_req:secs 30
+  504 sensor *tmp105 :calc_charge_req:reactor @enabled
+  505 op equal *tmp106 *tmp105 false
+  506 op or *tmp107 *tmp104 *tmp106
+  507 jump *label122 equal *tmp107 false
+  508 set :calc_charge_req*retval 0
+  509 jump *label124 always
+  510 label *label122
+  511 label *label123
+  512 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  513 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  514 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  515 set :calc_charge_req*retval :calc_charge_req:charge_req
+  516 jump *label124 always
+  517 label *label124
   518 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   519 op lessThan *tmp154 *tmp153 .PWR_ABORT
   520 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    80 set :calc_charge_req:time :t_startup1
    81 label *label101
    82 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+   83 op sub *tmp102 @tick :t_startup1
    84 op idiv :calc_charge_req:secs *tmp102 60
    85 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+   86 sensor *tmp105 reactor1 @enabled
    87 op equal *tmp106 *tmp105 false
    88 op or *tmp107 *tmp104 *tmp106
    89 jump *label102 equal *tmp107 false
 
   102 set :calc_charge_req:time :t_startup2
   103 label *label105
   104 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  105 op sub *tmp102 @tick :t_startup2
   106 op idiv :calc_charge_req:secs *tmp102 60
   107 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  108 sensor *tmp105 reactor2 @enabled
   109 op equal *tmp106 *tmp105 false
   110 op or *tmp107 *tmp104 *tmp106
   111 jump *label106 equal *tmp107 false
 
   124 set :calc_charge_req:time :t_startup3
   125 label *label109
   126 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  127 op sub *tmp102 @tick :t_startup3
   128 op idiv :calc_charge_req:secs *tmp102 60
   129 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  130 sensor *tmp105 reactor3 @enabled
   131 op equal *tmp106 *tmp105 false
   132 op or *tmp107 *tmp104 *tmp106
   133 jump *label110 equal *tmp107 false
 
   146 set :calc_charge_req:time :t_startup4
   147 label *label113
   148 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  149 op sub *tmp102 @tick :t_startup4
   150 op idiv :calc_charge_req:secs *tmp102 60
   151 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  152 sensor *tmp105 reactor4 @enabled
   153 op equal *tmp106 *tmp105 false
   154 op or *tmp107 *tmp104 *tmp106
   155 jump *label114 equal *tmp107 false
 
   168 set :calc_charge_req:time :t_startup5
   169 label *label117
   170 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  171 op sub *tmp102 @tick :t_startup5
   172 op idiv :calc_charge_req:secs *tmp102 60
   173 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  174 sensor *tmp105 reactor5 @enabled
   175 op equal *tmp106 *tmp105 false
   176 op or *tmp107 *tmp104 *tmp106
   177 jump *label118 equal *tmp107 false
 
   498 set :calc_charge_req:time :start_reactor:t_startup
   499 label *label121
   500 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  501 op sub *tmp102 @tick :start_reactor:t_startup
   502 op idiv :calc_charge_req:secs *tmp102 60
   503 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  504 sensor *tmp105 :start_reactor:reactor @enabled
   505 op equal *tmp106 *tmp105 false
   506 op or *tmp107 *tmp104 *tmp106
   507 jump *label122 equal *tmp107 false
 
   628 label *label49
   629 label *label47
   630 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  631 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   632 set :start_reactor*retval :start_reactor:supply_fuel
   633 jump *label45 always
   634 label *label45

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    76 jump *label10 always
    77 label *label10
    78 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    79 label *label101
    80 # "Function: def calc_charge_req(in reactor, in time)"
    81 op sub *tmp102 @tick :t_startup1
 
    96 jump *label104 always
    97 label *label104
    98 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    99 label *label105
   100 # "Function: def calc_charge_req(in reactor, in time)"
   101 op sub *tmp102 @tick :t_startup2
 
   116 jump *label108 always
   117 label *label108
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   119 label *label109
   120 # "Function: def calc_charge_req(in reactor, in time)"
   121 op sub *tmp102 @tick :t_startup3
 
   136 jump *label112 always
   137 label *label112
   138 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   139 label *label113
   140 # "Function: def calc_charge_req(in reactor, in time)"
   141 op sub *tmp102 @tick :t_startup4
 
   156 jump *label116 always
   157 label *label116
   158 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   159 label *label117
   160 # "Function: def calc_charge_req(in reactor, in time)"
   161 op sub *tmp102 @tick :t_startup5
 
   426 end
   427 label *label3
   428 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
   429 op sub *tmp113 @tick :start_reactor:t_startup
   430 op idiv :start_reactor:secs *tmp113 60
   431 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   483 jump *label57 always
   484 label *label56
   485 jump *label58 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   486 label *label121
   487 # "Function: def calc_charge_req(in reactor, in time)"
   488 op sub *tmp102 @tick :start_reactor:t_startup

Modifications by Inline function call at line 80:14 (+155 instructions):
 
   181 set :start_reactor:emerg_shutdown :emerg_shutdown
   182 set :start_reactor:fuel_on :fuel_1
   183 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  184 label *label125
+  185 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  186 op sub *tmp113 @tick :start_reactor:t_startup
+  187 op idiv :start_reactor:secs *tmp113 60
+  188 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  189 set :start_reactor:supply_fuel true
+  190 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  191 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  192 sensor *tmp118 .NODE @powerNetStored
+  193 op floor :start_reactor:charge *tmp118
+  194 sensor *tmp120 .NODE @powerNetIn
+  195 sensor *tmp121 .NODE @powerNetOut
+  196 op sub *tmp122 *tmp120 *tmp121
+  197 op floor :start_reactor:surplus *tmp122
+  198 op mul *tmp124 .AVG_SURPLUS 0.8
+  199 op mul *tmp125 :start_reactor:surplus 0.2
+  200 op add .AVG_SURPLUS *tmp124 *tmp125
+  201 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  202 print "#"
+  203 print :start_reactor:reactor_num
+  204 print " "
+  205 print "- "
+  206 jump *label126 equal :start_reactor:emerg_shutdown false
+  207 control enabled :start_reactor:reactor false
+  208 print "emergency mode"
+  209 print "\n"
+  210 set :start_reactor:supply_fuel false
+  211 jump *label159 always
+  212 label *label126
+  213 jump *label145 equal :start_reactor:enabled false
+  214 jump *label127 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  215 control enabled :start_reactor:reactor false
+  216 print "STOP unwanted"
+  217 print "\n"
+  218 jump *label144 always
+  219 label *label127
+  220 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  221 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  222 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  223 op land *tmp139 *tmp136 *tmp138
+  224 jump *label128 equal *tmp139 false
+  225 control enabled :start_reactor:reactor false
+  226 print "STOP system fuel low"
+  227 print "\n"
+  228 jump *label143 always
+  229 label *label128
+  230 jump *label129 greaterThan :start_reactor:fuel 1
+  231 control enabled :start_reactor:reactor false
+  232 print "STOP fuel low"
+  233 print "\n"
+  234 jump *label142 always
+  235 label *label129
+  236 jump *label130 greaterThan :start_reactor:cryo .CRYO_ABORT
+  237 control enabled :start_reactor:reactor false
+  238 print "STOP out of cryo"
+  239 print "\n"
+  240 jump *label141 always
+  241 label *label130
+  242 jump *label137 greaterThanEq :start_reactor:secs 30
+  243 label *label131
+  244 # "Function: def calc_charge_req(in reactor, in time)"
+  245 op sub *tmp102 @tick :start_reactor:t_startup
+  246 op idiv :calc_charge_req:secs *tmp102 60
+  247 op greaterThan *tmp104 :calc_charge_req:secs 30
+  248 sensor *tmp105 :start_reactor:reactor @enabled
+  249 op equal *tmp106 *tmp105 false
+  250 op or *tmp107 *tmp104 *tmp106
+  251 jump *label132 equal *tmp107 false
+  252 set :calc_charge_req*retval 0
+  253 jump *label134 always
+  254 label *label132
+  255 label *label133
+  256 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  257 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  258 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  259 set :calc_charge_req*retval :calc_charge_req:charge_req
+  260 jump *label134 always
+  261 label *label134
+  262 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  263 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  264 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  265 op land *tmp156 *tmp154 *tmp155
+  266 jump *label135 equal *tmp156 false
+  267 control enabled :start_reactor:reactor false
+  268 print "START FAIL battery"
+  269 print "\n"
+  270 set :start_reactor:supply_fuel false
+  271 jump *label136 always
+  272 label *label135
+  273 op sub :start_reactor:time_left 30 :start_reactor:secs
+  274 print "Starting "
+  275 print :start_reactor:time_left
+  276 print " "
+  277 print "secs, req "
+  278 print :calc_charge_req*retval
+  279 print "J"
+  280 print "\n"
+  281 label *label136
+  282 jump *label140 always
+  283 label *label137
+  284 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  285 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  286 op land *tmp163 *tmp161 *tmp162
+  287 jump *label138 equal *tmp163 false
+  288 control enabled :start_reactor:reactor false
+  289 print "ABANDON - battery crit"
+  290 print "\n"
+  291 set :start_reactor:supply_fuel false
+  292 jump *label139 always
+  293 label *label138
+  294 op idiv :start_reactor:mins :start_reactor:secs 6
+  295 op div :start_reactor:mins :start_reactor:mins 10
+  296 print "RUN "
+  297 print :start_reactor:mins
+  298 print " "
+  299 print "mins"
+  300 print "\n"
+  301 label *label139
+  302 label *label140
+  303 label *label141
+  304 label *label142
+  305 label *label143
+  306 label *label144
+  307 jump *label158 always
+  308 label *label145
+  309 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  310 op sub *tmp170 *tmp169 .PWR_ABORT
+  311 op div *tmp171 *tmp170 .PWR_REQ
+  312 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  313 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  314 op max :start_reactor:flow_units -0.1 *tmp173
+  315 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  316 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  317 jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  318 print "IDLE"
+  319 print "\n"
+  320 set :start_reactor:supply_fuel false
+  321 jump *label157 always
+  322 label *label146
+  323 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  324 jump *label147 greaterThanEq *tmp179 1
+  325 op idiv *tmp183 :start_reactor:flow_units 0.001
+  326 op div :start_reactor:flow *tmp183 10
+  327 op idiv *tmp186 :start_reactor:charge_units 0.001
+  328 op div :start_reactor:charge *tmp186 10
+  329 print "WAIT power. (%"
+  330 print :start_reactor:charge
+  331 print "J + %"
+  332 print :start_reactor:flow
+  333 print "W)"
+  334 print "\n"
+  335 set :start_reactor:supply_fuel false
+  336 jump *label156 always
+  337 label *label147
+  338 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  339 op land *tmp189 :start_reactor:fuel_on *tmp188
+  340 jump *label150 equal *tmp189 false
+  341 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  342 jump *label148 lessThanEq *tmp191 .FUEL_REQ
+  343 print "WAIT fuel"
+  344 print "\n"
+  345 jump *label149 always
+  346 label *label148
+  347 print "WAIT system fuel"
+  348 print "\n"
+  349 label *label149
+  350 jump *label155 always
+  351 label *label150
+  352 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  353 jump *label151 greaterThanEq :start_reactor:fuel_stored *tmp194
+  354 print "WAIT buffer fuel"
+  355 print "\n"
+  356 jump *label154 always
+  357 label *label151
+  358 jump *label152 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  359 print "WAIT cryo"
+  360 print "\n"
+  361 jump *label153 always
+  362 label *label152
+  363 print "STARTUP"
+  364 print "\n"
+  365 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  366 control enabled :start_reactor:reactor true
+  367 label *label153
+  368 label *label154
+  369 label *label155
+  370 label *label156
+  371 label *label157
+  372 label *label158
+  373 label *label159
+  374 sensor *tmp201 :start_reactor:reactor @enabled
+  375 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  376 set :start_reactor*retval :start_reactor:supply_fuel
+  377 jump *label160 always
+  378 label *label160
   379 set :fuel_1 :start_reactor*retval
   380 set :t_startup1 .RET_T_STARTUP
   381 label *label87

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   182 set :start_reactor:t_startup :t_startup1
   183 label *label125
   184 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  185 op sub *tmp113 @tick :t_startup1
   186 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  187 sensor :start_reactor:fuel reactor1 @blast-compound
   188 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  189 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  190 sensor :start_reactor:cryo reactor1 @cryofluid
+  191 sensor *tmp118 node1 @powerNetStored
   192 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  193 sensor *tmp120 node1 @powerNetIn
+  194 sensor *tmp121 node1 @powerNetOut
   195 op sub *tmp122 *tmp120 *tmp121
   196 op floor :start_reactor:surplus *tmp122
   197 op mul *tmp124 .AVG_SURPLUS 0.8
   198 op mul *tmp125 :start_reactor:surplus 0.2
   199 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  200 sensor :start_reactor:enabled reactor1 @enabled
   201 print "#"
-    * print :start_reactor:reactor_num
+  202 print 1
   203 print " "
   204 print "- "
-    * jump *label126 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  205 jump *label126 equal :emerg_shutdown false
+  206 control enabled reactor1 false
   207 print "emergency mode"
   208 print "\n"
   209 set :start_reactor:supply_fuel false
   210 jump *label159 always
   211 label *label126
   212 jump *label145 equal :start_reactor:enabled false
-    * jump *label127 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  213 jump *label127 greaterThanEq .REACTORS_DESIRED 1
+  214 control enabled reactor1 false
   215 print "STOP unwanted"
   216 print "\n"
   217 jump *label144 always
   218 label *label127
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  219 op greaterThan *tmp136 1 1
+  220 op mul *tmp137 15 1
+  221 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  222 op land *tmp139 false *tmp138
   223 jump *label128 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  224 control enabled reactor1 false
   225 print "STOP system fuel low"
   226 print "\n"
   227 jump *label143 always
   228 label *label128
   229 jump *label129 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  230 control enabled reactor1 false
   231 print "STOP fuel low"
   232 print "\n"
   233 jump *label142 always
   234 label *label129
-    * jump *label130 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  235 jump *label130 greaterThan :start_reactor:cryo 1
+  236 control enabled reactor1 false
   237 print "STOP out of cryo"
   238 print "\n"
   239 jump *label141 always
 
   241 jump *label137 greaterThanEq :start_reactor:secs 30
   242 label *label131
   243 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  244 op sub *tmp102 @tick :t_startup1
   245 op idiv :calc_charge_req:secs *tmp102 60
   246 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  247 sensor *tmp105 reactor1 @enabled
   248 op equal *tmp106 *tmp105 false
   249 op or *tmp107 *tmp104 *tmp106
   250 jump *label132 equal *tmp107 false
 
   259 jump *label134 always
   260 label *label134
   261 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  262 op lessThan *tmp154 *tmp153 5000
+  263 op lessThan *tmp155 :start_reactor:surplus -500
   264 op land *tmp156 *tmp154 *tmp155
   265 jump *label135 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  266 control enabled reactor1 false
   267 print "START FAIL battery"
   268 print "\n"
   269 set :start_reactor:supply_fuel false
 
   280 label *label136
   281 jump *label140 always
   282 label *label137
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  283 op lessThan *tmp161 :start_reactor:charge 2000
+  284 op lessThan *tmp162 :start_reactor:surplus -500
   285 op land *tmp163 *tmp161 *tmp162
   286 jump *label138 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  287 control enabled reactor1 false
   288 print "ABANDON - battery crit"
   289 print "\n"
   290 set :start_reactor:supply_fuel false
 
   306 jump *label158 always
   307 label *label145
   308 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  309 op sub *tmp170 *tmp169 5000
+  310 op div *tmp171 *tmp170 23000
+  311 op mul :start_reactor:charge_units *tmp171 0.6
+  312 op div *tmp173 :start_reactor:surplus 2000
   313 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  314 op mul *tmp175 2 1
+  315 op add :start_reactor:cryo_req 3 2
+  316 jump *label146 greaterThanEq .REACTORS_DESIRED 1
   317 print "IDLE"
   318 print "\n"
   319 set :start_reactor:supply_fuel false
 
   334 set :start_reactor:supply_fuel false
   335 jump *label156 always
   336 label *label147
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  337 op lessThan *tmp188 :start_reactor:fuel 10
+  338 op land *tmp189 :fuel_1 *tmp188
   339 jump *label150 equal *tmp189 false
   340 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label148 lessThanEq *tmp191 .FUEL_REQ
+  341 jump *label148 lessThanEq *tmp191 10
   342 print "WAIT fuel"
   343 print "\n"
   344 jump *label149 always
 
   348 label *label149
   349 jump *label155 always
   350 label *label150
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label151 greaterThanEq :start_reactor:fuel_stored *tmp194
+  351 op mul *tmp194 45 1
+  352 jump *label151 greaterThanEq :start_reactor:fuel_stored 45
   353 print "WAIT buffer fuel"
   354 print "\n"
   355 jump *label154 always
   356 label *label151
-    * jump *label152 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  357 jump *label152 greaterThanEq :start_reactor:cryo 5
   358 print "WAIT cryo"
   359 print "\n"
   360 jump *label153 always
   361 label *label152
   362 print "STARTUP"
   363 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  364 op add .START_POWER_REQ .START_POWER_REQ 23000
+  365 control enabled reactor1 true
   366 label *label153
   367 label *label154
   368 label *label155
 
   370 label *label157
   371 label *label158
   372 label *label159
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  373 sensor *tmp201 reactor1 @enabled
+  374 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   375 set :start_reactor*retval :start_reactor:supply_fuel
   376 jump *label160 always
   377 label *label160
-    * set :fuel_1 :start_reactor*retval
+  378 set :fuel_1 :start_reactor:supply_fuel
   379 set :t_startup1 .RET_T_STARTUP
   380 label *label87
   381 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  382 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   383 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  384 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   385 control config unloader2 *tmp101
   386 label *label88
   387 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   175 jump *label120 always
   176 label *label120
   177 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   178 label *label125
   179 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   180 op sub *tmp113 @tick :t_startup1
 
   303 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   304 op sub *tmp170 *tmp169 5000
   305 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  306 op div :start_reactor:charge_units *tmp170 38333.333333333336
   307 op div *tmp173 :start_reactor:surplus 2000
   308 op max :start_reactor:flow_units -0.1 *tmp173
   309 op mul *tmp175 2 1
 
   367 label *label159
   368 sensor *tmp201 reactor1 @enabled
   369 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   370 jump *label160 always
   371 label *label160
   372 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+155 instructions):
 
   383 set :start_reactor:emerg_shutdown :emerg_shutdown
   384 set :start_reactor:fuel_on :fuel_2
   385 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  386 label *label161
+  387 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  388 op sub *tmp113 @tick :start_reactor:t_startup
+  389 op idiv :start_reactor:secs *tmp113 60
+  390 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  391 set :start_reactor:supply_fuel true
+  392 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  393 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  394 sensor *tmp118 .NODE @powerNetStored
+  395 op floor :start_reactor:charge *tmp118
+  396 sensor *tmp120 .NODE @powerNetIn
+  397 sensor *tmp121 .NODE @powerNetOut
+  398 op sub *tmp122 *tmp120 *tmp121
+  399 op floor :start_reactor:surplus *tmp122
+  400 op mul *tmp124 .AVG_SURPLUS 0.8
+  401 op mul *tmp125 :start_reactor:surplus 0.2
+  402 op add .AVG_SURPLUS *tmp124 *tmp125
+  403 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  404 print "#"
+  405 print :start_reactor:reactor_num
+  406 print " "
+  407 print "- "
+  408 jump *label162 equal :start_reactor:emerg_shutdown false
+  409 control enabled :start_reactor:reactor false
+  410 print "emergency mode"
+  411 print "\n"
+  412 set :start_reactor:supply_fuel false
+  413 jump *label195 always
+  414 label *label162
+  415 jump *label181 equal :start_reactor:enabled false
+  416 jump *label163 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  417 control enabled :start_reactor:reactor false
+  418 print "STOP unwanted"
+  419 print "\n"
+  420 jump *label180 always
+  421 label *label163
+  422 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  423 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  424 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  425 op land *tmp139 *tmp136 *tmp138
+  426 jump *label164 equal *tmp139 false
+  427 control enabled :start_reactor:reactor false
+  428 print "STOP system fuel low"
+  429 print "\n"
+  430 jump *label179 always
+  431 label *label164
+  432 jump *label165 greaterThan :start_reactor:fuel 1
+  433 control enabled :start_reactor:reactor false
+  434 print "STOP fuel low"
+  435 print "\n"
+  436 jump *label178 always
+  437 label *label165
+  438 jump *label166 greaterThan :start_reactor:cryo .CRYO_ABORT
+  439 control enabled :start_reactor:reactor false
+  440 print "STOP out of cryo"
+  441 print "\n"
+  442 jump *label177 always
+  443 label *label166
+  444 jump *label173 greaterThanEq :start_reactor:secs 30
+  445 label *label167
+  446 # "Function: def calc_charge_req(in reactor, in time)"
+  447 op sub *tmp102 @tick :start_reactor:t_startup
+  448 op idiv :calc_charge_req:secs *tmp102 60
+  449 op greaterThan *tmp104 :calc_charge_req:secs 30
+  450 sensor *tmp105 :start_reactor:reactor @enabled
+  451 op equal *tmp106 *tmp105 false
+  452 op or *tmp107 *tmp104 *tmp106
+  453 jump *label168 equal *tmp107 false
+  454 set :calc_charge_req*retval 0
+  455 jump *label170 always
+  456 label *label168
+  457 label *label169
+  458 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  459 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  460 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  461 set :calc_charge_req*retval :calc_charge_req:charge_req
+  462 jump *label170 always
+  463 label *label170
+  464 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  465 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  466 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  467 op land *tmp156 *tmp154 *tmp155
+  468 jump *label171 equal *tmp156 false
+  469 control enabled :start_reactor:reactor false
+  470 print "START FAIL battery"
+  471 print "\n"
+  472 set :start_reactor:supply_fuel false
+  473 jump *label172 always
+  474 label *label171
+  475 op sub :start_reactor:time_left 30 :start_reactor:secs
+  476 print "Starting "
+  477 print :start_reactor:time_left
+  478 print " "
+  479 print "secs, req "
+  480 print :calc_charge_req*retval
+  481 print "J"
+  482 print "\n"
+  483 label *label172
+  484 jump *label176 always
+  485 label *label173
+  486 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  487 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  488 op land *tmp163 *tmp161 *tmp162
+  489 jump *label174 equal *tmp163 false
+  490 control enabled :start_reactor:reactor false
+  491 print "ABANDON - battery crit"
+  492 print "\n"
+  493 set :start_reactor:supply_fuel false
+  494 jump *label175 always
+  495 label *label174
+  496 op idiv :start_reactor:mins :start_reactor:secs 6
+  497 op div :start_reactor:mins :start_reactor:mins 10
+  498 print "RUN "
+  499 print :start_reactor:mins
+  500 print " "
+  501 print "mins"
+  502 print "\n"
+  503 label *label175
+  504 label *label176
+  505 label *label177
+  506 label *label178
+  507 label *label179
+  508 label *label180
+  509 jump *label194 always
+  510 label *label181
+  511 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  512 op sub *tmp170 *tmp169 .PWR_ABORT
+  513 op div *tmp171 *tmp170 .PWR_REQ
+  514 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  515 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  516 op max :start_reactor:flow_units -0.1 *tmp173
+  517 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  518 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  519 jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  520 print "IDLE"
+  521 print "\n"
+  522 set :start_reactor:supply_fuel false
+  523 jump *label193 always
+  524 label *label182
+  525 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  526 jump *label183 greaterThanEq *tmp179 1
+  527 op idiv *tmp183 :start_reactor:flow_units 0.001
+  528 op div :start_reactor:flow *tmp183 10
+  529 op idiv *tmp186 :start_reactor:charge_units 0.001
+  530 op div :start_reactor:charge *tmp186 10
+  531 print "WAIT power. (%"
+  532 print :start_reactor:charge
+  533 print "J + %"
+  534 print :start_reactor:flow
+  535 print "W)"
+  536 print "\n"
+  537 set :start_reactor:supply_fuel false
+  538 jump *label192 always
+  539 label *label183
+  540 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  541 op land *tmp189 :start_reactor:fuel_on *tmp188
+  542 jump *label186 equal *tmp189 false
+  543 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  544 jump *label184 lessThanEq *tmp191 .FUEL_REQ
+  545 print "WAIT fuel"
+  546 print "\n"
+  547 jump *label185 always
+  548 label *label184
+  549 print "WAIT system fuel"
+  550 print "\n"
+  551 label *label185
+  552 jump *label191 always
+  553 label *label186
+  554 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  555 jump *label187 greaterThanEq :start_reactor:fuel_stored *tmp194
+  556 print "WAIT buffer fuel"
+  557 print "\n"
+  558 jump *label190 always
+  559 label *label187
+  560 jump *label188 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  561 print "WAIT cryo"
+  562 print "\n"
+  563 jump *label189 always
+  564 label *label188
+  565 print "STARTUP"
+  566 print "\n"
+  567 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  568 control enabled :start_reactor:reactor true
+  569 label *label189
+  570 label *label190
+  571 label *label191
+  572 label *label192
+  573 label *label193
+  574 label *label194
+  575 label *label195
+  576 sensor *tmp201 :start_reactor:reactor @enabled
+  577 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  578 set :start_reactor*retval :start_reactor:supply_fuel
+  579 jump *label196 always
+  580 label *label196
   581 set :fuel_2 :start_reactor*retval
   582 set :t_startup2 .RET_T_STARTUP
   583 label *label89

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   385 set :start_reactor:t_startup :t_startup2
   386 label *label161
   387 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  388 op sub *tmp113 @tick :t_startup2
   389 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  390 sensor :start_reactor:fuel reactor2 @blast-compound
   391 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  392 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  393 sensor :start_reactor:cryo reactor2 @cryofluid
+  394 sensor *tmp118 node1 @powerNetStored
   395 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  396 sensor *tmp120 node1 @powerNetIn
+  397 sensor *tmp121 node1 @powerNetOut
   398 op sub *tmp122 *tmp120 *tmp121
   399 op floor :start_reactor:surplus *tmp122
   400 op mul *tmp124 .AVG_SURPLUS 0.8
   401 op mul *tmp125 :start_reactor:surplus 0.2
   402 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  403 sensor :start_reactor:enabled reactor2 @enabled
   404 print "#"
-    * print :start_reactor:reactor_num
+  405 print 2
   406 print " "
   407 print "- "
-    * jump *label162 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  408 jump *label162 equal :emerg_shutdown false
+  409 control enabled reactor2 false
   410 print "emergency mode"
   411 print "\n"
   412 set :start_reactor:supply_fuel false
   413 jump *label195 always
   414 label *label162
   415 jump *label181 equal :start_reactor:enabled false
-    * jump *label163 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  416 jump *label163 greaterThanEq .REACTORS_DESIRED 2
+  417 control enabled reactor2 false
   418 print "STOP unwanted"
   419 print "\n"
   420 jump *label180 always
   421 label *label163
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  422 op greaterThan *tmp136 2 1
+  423 op mul *tmp137 15 2
+  424 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  425 op land *tmp139 true *tmp138
   426 jump *label164 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  427 control enabled reactor2 false
   428 print "STOP system fuel low"
   429 print "\n"
   430 jump *label179 always
   431 label *label164
   432 jump *label165 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  433 control enabled reactor2 false
   434 print "STOP fuel low"
   435 print "\n"
   436 jump *label178 always
   437 label *label165
-    * jump *label166 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  438 jump *label166 greaterThan :start_reactor:cryo 1
+  439 control enabled reactor2 false
   440 print "STOP out of cryo"
   441 print "\n"
   442 jump *label177 always
 
   444 jump *label173 greaterThanEq :start_reactor:secs 30
   445 label *label167
   446 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  447 op sub *tmp102 @tick :t_startup2
   448 op idiv :calc_charge_req:secs *tmp102 60
   449 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  450 sensor *tmp105 reactor2 @enabled
   451 op equal *tmp106 *tmp105 false
   452 op or *tmp107 *tmp104 *tmp106
   453 jump *label168 equal *tmp107 false
 
   462 jump *label170 always
   463 label *label170
   464 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  465 op lessThan *tmp154 *tmp153 5000
+  466 op lessThan *tmp155 :start_reactor:surplus -500
   467 op land *tmp156 *tmp154 *tmp155
   468 jump *label171 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  469 control enabled reactor2 false
   470 print "START FAIL battery"
   471 print "\n"
   472 set :start_reactor:supply_fuel false
 
   483 label *label172
   484 jump *label176 always
   485 label *label173
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  486 op lessThan *tmp161 :start_reactor:charge 2000
+  487 op lessThan *tmp162 :start_reactor:surplus -500
   488 op land *tmp163 *tmp161 *tmp162
   489 jump *label174 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  490 control enabled reactor2 false
   491 print "ABANDON - battery crit"
   492 print "\n"
   493 set :start_reactor:supply_fuel false
 
   509 jump *label194 always
   510 label *label181
   511 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  512 op sub *tmp170 *tmp169 5000
+  513 op div *tmp171 *tmp170 23000
+  514 op mul :start_reactor:charge_units *tmp171 0.6
+  515 op div *tmp173 :start_reactor:surplus 2000
   516 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  517 op mul *tmp175 2 2
+  518 op add :start_reactor:cryo_req 3 4
+  519 jump *label182 greaterThanEq .REACTORS_DESIRED 2
   520 print "IDLE"
   521 print "\n"
   522 set :start_reactor:supply_fuel false
 
   537 set :start_reactor:supply_fuel false
   538 jump *label192 always
   539 label *label183
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  540 op lessThan *tmp188 :start_reactor:fuel 10
+  541 op land *tmp189 :fuel_2 *tmp188
   542 jump *label186 equal *tmp189 false
   543 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label184 lessThanEq *tmp191 .FUEL_REQ
+  544 jump *label184 lessThanEq *tmp191 10
   545 print "WAIT fuel"
   546 print "\n"
   547 jump *label185 always
 
   551 label *label185
   552 jump *label191 always
   553 label *label186
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label187 greaterThanEq :start_reactor:fuel_stored *tmp194
+  554 op mul *tmp194 45 2
+  555 jump *label187 greaterThanEq :start_reactor:fuel_stored 90
   556 print "WAIT buffer fuel"
   557 print "\n"
   558 jump *label190 always
   559 label *label187
-    * jump *label188 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  560 jump *label188 greaterThanEq :start_reactor:cryo 7
   561 print "WAIT cryo"
   562 print "\n"
   563 jump *label189 always
   564 label *label188
   565 print "STARTUP"
   566 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  567 op add .START_POWER_REQ .START_POWER_REQ 23000
+  568 control enabled reactor2 true
   569 label *label189
   570 label *label190
   571 label *label191
 
   573 label *label193
   574 label *label194
   575 label *label195
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  576 sensor *tmp201 reactor2 @enabled
+  577 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   578 set :start_reactor*retval :start_reactor:supply_fuel
   579 jump *label196 always
   580 label *label196
-    * set :fuel_2 :start_reactor*retval
+  581 set :fuel_2 :start_reactor:supply_fuel
   582 set :t_startup2 .RET_T_STARTUP
   583 label *label89
   584 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  585 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   586 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  587 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   588 control config unloader4 *tmp101
   589 label *label90
   590 label *label97

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   378 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   379 control config unloader2 *tmp101
   380 label *label88
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   381 label *label161
   382 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   383 op sub *tmp113 @tick :t_startup2
 
   506 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   507 op sub *tmp170 *tmp169 5000
   508 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  509 op div :start_reactor:charge_units *tmp170 38333.333333333336
   510 op div *tmp173 :start_reactor:surplus 2000
   511 op max :start_reactor:flow_units -0.1 *tmp173
   512 op mul *tmp175 2 2
 
   570 label *label195
   571 sensor *tmp201 reactor2 @enabled
   572 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   573 jump *label196 always
   574 label *label196
   575 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+155 instructions):
 
   615 set :start_reactor:emerg_shutdown :emerg_shutdown
   616 set :start_reactor:fuel_on :fuel_3
   617 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  618 label *label197
+  619 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  620 op sub *tmp113 @tick :start_reactor:t_startup
+  621 op idiv :start_reactor:secs *tmp113 60
+  622 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  623 set :start_reactor:supply_fuel true
+  624 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  625 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  626 sensor *tmp118 .NODE @powerNetStored
+  627 op floor :start_reactor:charge *tmp118
+  628 sensor *tmp120 .NODE @powerNetIn
+  629 sensor *tmp121 .NODE @powerNetOut
+  630 op sub *tmp122 *tmp120 *tmp121
+  631 op floor :start_reactor:surplus *tmp122
+  632 op mul *tmp124 .AVG_SURPLUS 0.8
+  633 op mul *tmp125 :start_reactor:surplus 0.2
+  634 op add .AVG_SURPLUS *tmp124 *tmp125
+  635 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  636 print "#"
+  637 print :start_reactor:reactor_num
+  638 print " "
+  639 print "- "
+  640 jump *label198 equal :start_reactor:emerg_shutdown false
+  641 control enabled :start_reactor:reactor false
+  642 print "emergency mode"
+  643 print "\n"
+  644 set :start_reactor:supply_fuel false
+  645 jump *label231 always
+  646 label *label198
+  647 jump *label217 equal :start_reactor:enabled false
+  648 jump *label199 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  649 control enabled :start_reactor:reactor false
+  650 print "STOP unwanted"
+  651 print "\n"
+  652 jump *label216 always
+  653 label *label199
+  654 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  655 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  656 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  657 op land *tmp139 *tmp136 *tmp138
+  658 jump *label200 equal *tmp139 false
+  659 control enabled :start_reactor:reactor false
+  660 print "STOP system fuel low"
+  661 print "\n"
+  662 jump *label215 always
+  663 label *label200
+  664 jump *label201 greaterThan :start_reactor:fuel 1
+  665 control enabled :start_reactor:reactor false
+  666 print "STOP fuel low"
+  667 print "\n"
+  668 jump *label214 always
+  669 label *label201
+  670 jump *label202 greaterThan :start_reactor:cryo .CRYO_ABORT
+  671 control enabled :start_reactor:reactor false
+  672 print "STOP out of cryo"
+  673 print "\n"
+  674 jump *label213 always
+  675 label *label202
+  676 jump *label209 greaterThanEq :start_reactor:secs 30
+  677 label *label203
+  678 # "Function: def calc_charge_req(in reactor, in time)"
+  679 op sub *tmp102 @tick :start_reactor:t_startup
+  680 op idiv :calc_charge_req:secs *tmp102 60
+  681 op greaterThan *tmp104 :calc_charge_req:secs 30
+  682 sensor *tmp105 :start_reactor:reactor @enabled
+  683 op equal *tmp106 *tmp105 false
+  684 op or *tmp107 *tmp104 *tmp106
+  685 jump *label204 equal *tmp107 false
+  686 set :calc_charge_req*retval 0
+  687 jump *label206 always
+  688 label *label204
+  689 label *label205
+  690 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  691 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  692 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  693 set :calc_charge_req*retval :calc_charge_req:charge_req
+  694 jump *label206 always
+  695 label *label206
+  696 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  697 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  698 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  699 op land *tmp156 *tmp154 *tmp155
+  700 jump *label207 equal *tmp156 false
+  701 control enabled :start_reactor:reactor false
+  702 print "START FAIL battery"
+  703 print "\n"
+  704 set :start_reactor:supply_fuel false
+  705 jump *label208 always
+  706 label *label207
+  707 op sub :start_reactor:time_left 30 :start_reactor:secs
+  708 print "Starting "
+  709 print :start_reactor:time_left
+  710 print " "
+  711 print "secs, req "
+  712 print :calc_charge_req*retval
+  713 print "J"
+  714 print "\n"
+  715 label *label208
+  716 jump *label212 always
+  717 label *label209
+  718 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  719 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  720 op land *tmp163 *tmp161 *tmp162
+  721 jump *label210 equal *tmp163 false
+  722 control enabled :start_reactor:reactor false
+  723 print "ABANDON - battery crit"
+  724 print "\n"
+  725 set :start_reactor:supply_fuel false
+  726 jump *label211 always
+  727 label *label210
+  728 op idiv :start_reactor:mins :start_reactor:secs 6
+  729 op div :start_reactor:mins :start_reactor:mins 10
+  730 print "RUN "
+  731 print :start_reactor:mins
+  732 print " "
+  733 print "mins"
+  734 print "\n"
+  735 label *label211
+  736 label *label212
+  737 label *label213
+  738 label *label214
+  739 label *label215
+  740 label *label216
+  741 jump *label230 always
+  742 label *label217
+  743 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  744 op sub *tmp170 *tmp169 .PWR_ABORT
+  745 op div *tmp171 *tmp170 .PWR_REQ
+  746 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  747 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  748 op max :start_reactor:flow_units -0.1 *tmp173
+  749 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  750 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  751 jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  752 print "IDLE"
+  753 print "\n"
+  754 set :start_reactor:supply_fuel false
+  755 jump *label229 always
+  756 label *label218
+  757 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  758 jump *label219 greaterThanEq *tmp179 1
+  759 op idiv *tmp183 :start_reactor:flow_units 0.001
+  760 op div :start_reactor:flow *tmp183 10
+  761 op idiv *tmp186 :start_reactor:charge_units 0.001
+  762 op div :start_reactor:charge *tmp186 10
+  763 print "WAIT power. (%"
+  764 print :start_reactor:charge
+  765 print "J + %"
+  766 print :start_reactor:flow
+  767 print "W)"
+  768 print "\n"
+  769 set :start_reactor:supply_fuel false
+  770 jump *label228 always
+  771 label *label219
+  772 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  773 op land *tmp189 :start_reactor:fuel_on *tmp188
+  774 jump *label222 equal *tmp189 false
+  775 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  776 jump *label220 lessThanEq *tmp191 .FUEL_REQ
+  777 print "WAIT fuel"
+  778 print "\n"
+  779 jump *label221 always
+  780 label *label220
+  781 print "WAIT system fuel"
+  782 print "\n"
+  783 label *label221
+  784 jump *label227 always
+  785 label *label222
+  786 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  787 jump *label223 greaterThanEq :start_reactor:fuel_stored *tmp194
+  788 print "WAIT buffer fuel"
+  789 print "\n"
+  790 jump *label226 always
+  791 label *label223
+  792 jump *label224 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  793 print "WAIT cryo"
+  794 print "\n"
+  795 jump *label225 always
+  796 label *label224
+  797 print "STARTUP"
+  798 print "\n"
+  799 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  800 control enabled :start_reactor:reactor true
+  801 label *label225
+  802 label *label226
+  803 label *label227
+  804 label *label228
+  805 label *label229
+  806 label *label230
+  807 label *label231
+  808 sensor *tmp201 :start_reactor:reactor @enabled
+  809 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  810 set :start_reactor*retval :start_reactor:supply_fuel
+  811 jump *label232 always
+  812 label *label232
   813 set :fuel_3 :start_reactor*retval
   814 set :t_startup3 .RET_T_STARTUP
   815 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   617 set :start_reactor:t_startup :t_startup3
   618 label *label197
   619 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  620 op sub *tmp113 @tick :t_startup3
   621 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  622 sensor :start_reactor:fuel reactor3 @blast-compound
   623 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  624 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  625 sensor :start_reactor:cryo reactor3 @cryofluid
+  626 sensor *tmp118 node1 @powerNetStored
   627 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  628 sensor *tmp120 node1 @powerNetIn
+  629 sensor *tmp121 node1 @powerNetOut
   630 op sub *tmp122 *tmp120 *tmp121
   631 op floor :start_reactor:surplus *tmp122
   632 op mul *tmp124 .AVG_SURPLUS 0.8
   633 op mul *tmp125 :start_reactor:surplus 0.2
   634 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  635 sensor :start_reactor:enabled reactor3 @enabled
   636 print "#"
-    * print :start_reactor:reactor_num
+  637 print 3
   638 print " "
   639 print "- "
-    * jump *label198 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  640 jump *label198 equal :emerg_shutdown false
+  641 control enabled reactor3 false
   642 print "emergency mode"
   643 print "\n"
   644 set :start_reactor:supply_fuel false
   645 jump *label231 always
   646 label *label198
   647 jump *label217 equal :start_reactor:enabled false
-    * jump *label199 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  648 jump *label199 greaterThanEq .REACTORS_DESIRED 3
+  649 control enabled reactor3 false
   650 print "STOP unwanted"
   651 print "\n"
   652 jump *label216 always
   653 label *label199
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  654 op greaterThan *tmp136 3 1
+  655 op mul *tmp137 15 3
+  656 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  657 op land *tmp139 true *tmp138
   658 jump *label200 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  659 control enabled reactor3 false
   660 print "STOP system fuel low"
   661 print "\n"
   662 jump *label215 always
   663 label *label200
   664 jump *label201 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  665 control enabled reactor3 false
   666 print "STOP fuel low"
   667 print "\n"
   668 jump *label214 always
   669 label *label201
-    * jump *label202 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  670 jump *label202 greaterThan :start_reactor:cryo 1
+  671 control enabled reactor3 false
   672 print "STOP out of cryo"
   673 print "\n"
   674 jump *label213 always
 
   676 jump *label209 greaterThanEq :start_reactor:secs 30
   677 label *label203
   678 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  679 op sub *tmp102 @tick :t_startup3
   680 op idiv :calc_charge_req:secs *tmp102 60
   681 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  682 sensor *tmp105 reactor3 @enabled
   683 op equal *tmp106 *tmp105 false
   684 op or *tmp107 *tmp104 *tmp106
   685 jump *label204 equal *tmp107 false
 
   694 jump *label206 always
   695 label *label206
   696 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  697 op lessThan *tmp154 *tmp153 5000
+  698 op lessThan *tmp155 :start_reactor:surplus -500
   699 op land *tmp156 *tmp154 *tmp155
   700 jump *label207 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  701 control enabled reactor3 false
   702 print "START FAIL battery"
   703 print "\n"
   704 set :start_reactor:supply_fuel false
 
   715 label *label208
   716 jump *label212 always
   717 label *label209
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  718 op lessThan *tmp161 :start_reactor:charge 2000
+  719 op lessThan *tmp162 :start_reactor:surplus -500
   720 op land *tmp163 *tmp161 *tmp162
   721 jump *label210 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  722 control enabled reactor3 false
   723 print "ABANDON - battery crit"
   724 print "\n"
   725 set :start_reactor:supply_fuel false
 
   741 jump *label230 always
   742 label *label217
   743 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  744 op sub *tmp170 *tmp169 5000
+  745 op div *tmp171 *tmp170 23000
+  746 op mul :start_reactor:charge_units *tmp171 0.6
+  747 op div *tmp173 :start_reactor:surplus 2000
   748 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  749 op mul *tmp175 2 3
+  750 op add :start_reactor:cryo_req 3 6
+  751 jump *label218 greaterThanEq .REACTORS_DESIRED 3
   752 print "IDLE"
   753 print "\n"
   754 set :start_reactor:supply_fuel false
 
   769 set :start_reactor:supply_fuel false
   770 jump *label228 always
   771 label *label219
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  772 op lessThan *tmp188 :start_reactor:fuel 10
+  773 op land *tmp189 :fuel_3 *tmp188
   774 jump *label222 equal *tmp189 false
   775 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label220 lessThanEq *tmp191 .FUEL_REQ
+  776 jump *label220 lessThanEq *tmp191 10
   777 print "WAIT fuel"
   778 print "\n"
   779 jump *label221 always
 
   783 label *label221
   784 jump *label227 always
   785 label *label222
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label223 greaterThanEq :start_reactor:fuel_stored *tmp194
+  786 op mul *tmp194 45 3
+  787 jump *label223 greaterThanEq :start_reactor:fuel_stored 135
   788 print "WAIT buffer fuel"
   789 print "\n"
   790 jump *label226 always
   791 label *label223
-    * jump *label224 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  792 jump *label224 greaterThanEq :start_reactor:cryo 9
   793 print "WAIT cryo"
   794 print "\n"
   795 jump *label225 always
   796 label *label224
   797 print "STARTUP"
   798 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  799 op add .START_POWER_REQ .START_POWER_REQ 23000
+  800 control enabled reactor3 true
   801 label *label225
   802 label *label226
   803 label *label227
 
   805 label *label229
   806 label *label230
   807 label *label231
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  808 sensor *tmp201 reactor3 @enabled
+  809 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   810 set :start_reactor*retval :start_reactor:supply_fuel
   811 jump *label232 always
   812 label *label232
-    * set :fuel_3 :start_reactor*retval
+  813 set :fuel_3 :start_reactor:supply_fuel
   814 set :t_startup3 .RET_T_STARTUP
   815 set :start_reactor:reactor reactor4
   816 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   610 label *label99
   611 label *label100
   612 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   613 label *label197
   614 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   615 op sub *tmp113 @tick :t_startup3
 
   738 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   739 op sub *tmp170 *tmp169 5000
   740 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  741 op div :start_reactor:charge_units *tmp170 38333.333333333336
   742 op div *tmp173 :start_reactor:surplus 2000
   743 op max :start_reactor:flow_units -0.1 *tmp173
   744 op mul *tmp175 2 3
 
   802 label *label231
   803 sensor *tmp201 reactor3 @enabled
   804 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   805 jump *label232 always
   806 label *label232
   807 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    56 control enabled projector1 false
    57 control enabled projector2 false
    58 set :check_radar*retval false
-    * jump *label96 always
    59 label *label95
    60 label *label96
    61 # "Function: def check_manual_shutdown()"
 
   366 label *label159
   367 sensor *tmp201 reactor1 @enabled
   368 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * jump *label160 always
   369 label *label160
   370 set :fuel_1 :start_reactor:supply_fuel
   371 set :t_startup1 .RET_T_STARTUP
 
   568 label *label195
   569 sensor *tmp201 reactor2 @enabled
   570 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * jump *label196 always
   571 label *label196
   572 set :fuel_2 :start_reactor:supply_fuel
   573 set :t_startup2 .RET_T_STARTUP
 
   603 control enabled projector1 false
   604 control enabled projector2 false
   605 set :check_radar*retval false
-    * jump *label100 always
   606 label *label99
   607 label *label100
   608 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   798 label *label231
   799 sensor *tmp201 reactor3 @enabled
   800 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * jump *label232 always
   801 label *label232
   802 set :fuel_3 :start_reactor:supply_fuel
   803 set :t_startup3 .RET_T_STARTUP
 
   882 label *label19
   883 label *label15
   884 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label13 always
   885 label *label13
   886 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   887 control config unloader7 *tmp51
 
   907 # "Function: def kilo(in val)"
   908 op idiv *tmp93 .AVG_SURPLUS 100
   909 op div :kilo*retval *tmp93 10
-    * jump *label82 always
   910 label *label82
   911 set :surplus :kilo*retval
   912 sensor :kilo:val node1 @powerNetStored
 
   914 # "Function: def kilo(in val)"
   915 op idiv *tmp93 :kilo:val 100
   916 op div :kilo*retval *tmp93 10
-    * jump *label84 always
   917 label *label84
   918 set :charge :kilo*retval
   919 jump *label25 lessThanEq .START_POWER_REQ 0
 
   921 # "Function: def kilo(in val)"
   922 op idiv *tmp93 .START_POWER_REQ 100
   923 op div :kilo*retval *tmp93 10
-    * jump *label86 always
   924 label *label86
   925 print "Req "
   926 print :kilo*retval
 
  1171 sensor *tmp201 :start_reactor:reactor @enabled
  1172 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1173 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label45 always
  1174 label *label45
  1175 return :start_reactor*retaddr
  1176 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   213 op greaterThan *tmp136 1 1
   214 op mul *tmp137 15 1
   215 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  216 set *tmp139 false
   217 jump *label128 equal *tmp139 false
   218 control enabled reactor1 false
   219 print "STOP system fuel low"
 
   415 op greaterThan *tmp136 2 1
   416 op mul *tmp137 15 2
   417 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  418 set *tmp139 *tmp138
   419 jump *label164 equal *tmp139 false
   420 control enabled reactor2 false
   421 print "STOP system fuel low"
 
   645 op greaterThan *tmp136 3 1
   646 op mul *tmp137 15 3
   647 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  648 set *tmp139 *tmp138
   649 jump *label200 equal *tmp139 false
   650 control enabled reactor3 false
   651 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
    83 op equal *tmp106 *tmp105 false
    84 op or *tmp107 *tmp104 *tmp106
    85 jump *label102 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+   86 set .START_POWER_REQ 0
    87 jump *label104 always
    88 label *label102
    89 label *label103
    90 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    91 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    92 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+   93 set .START_POWER_REQ :calc_charge_req:charge_req
    94 jump *label104 always
    95 label *label104
-    * set .START_POWER_REQ :calc_charge_req*retval
    96 label *label105
    97 # "Function: def calc_charge_req(in reactor, in time)"
    98 op sub *tmp102 @tick :t_startup2
 
   905 label *label81
   906 # "Function: def kilo(in val)"
   907 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  908 op div :surplus *tmp93 10
   909 label *label82
-    * set :surplus :kilo*retval
   910 sensor :kilo:val node1 @powerNetStored
   911 label *label83
   912 # "Function: def kilo(in val)"
 
   981 op sub *tmp113 @tick :start_reactor:t_startup
   982 op idiv :start_reactor:secs *tmp113 60
   983 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  984 set :start_reactor*retval true
   985 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   986 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   987 sensor *tmp118 .NODE @powerNetStored
 
  1002 control enabled :start_reactor:reactor false
  1003 print "emergency mode"
  1004 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1005 set :start_reactor*retval false
  1006 jump *label47 always
  1007 label *label46
  1008 jump *label48 equal :start_reactor:enabled false
 
  1062 control enabled :start_reactor:reactor false
  1063 print "START FAIL battery"
  1064 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1065 set :start_reactor*retval false
  1066 jump *label61 always
  1067 label *label60
  1068 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1083 control enabled :start_reactor:reactor false
  1084 print "ABANDON - battery crit"
  1085 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1086 set :start_reactor*retval false
  1087 jump *label63 always
  1088 label *label62
  1089 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1112 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1113 print "IDLE"
  1114 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1115 set :start_reactor*retval false
  1116 jump *label65 always
  1117 label *label64
  1118 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1127 print :start_reactor:flow
  1128 print "W)"
  1129 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1130 set :start_reactor*retval false
  1131 jump *label67 always
  1132 label *label66
  1133 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1168 label *label47
  1169 sensor *tmp201 :start_reactor:reactor @enabled
  1170 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1171 label *label45
  1172 return :start_reactor*retaddr
  1173 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   213 op mul *tmp137 15 1
   214 op lessThan *tmp138 :start_reactor:fuel_stored 15
   215 set *tmp139 false
-    * jump *label128 equal *tmp139 false
+  216 jump *label128 equal false false
   217 control enabled reactor1 false
   218 print "STOP system fuel low"
   219 print "\n"
 
   415 op mul *tmp137 15 2
   416 op lessThan *tmp138 :start_reactor:fuel_stored 30
   417 set *tmp139 *tmp138
-    * jump *label164 equal *tmp139 false
+  418 jump *label164 equal *tmp138 false
   419 control enabled reactor2 false
   420 print "STOP system fuel low"
   421 print "\n"
 
   645 op mul *tmp137 15 3
   646 op lessThan *tmp138 :start_reactor:fuel_stored 45
   647 set *tmp139 *tmp138
-    * jump *label200 equal *tmp139 false
+  648 jump *label200 equal *tmp138 false
   649 control enabled reactor3 false
   650 print "STOP system fuel low"
   651 print "\n"
 
   816 call *label3 :start_reactor*retaddr :start_reactor*retval
   817 set :fuel_5 :start_reactor*retval
   818 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  819 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   820 op or :fuel_many *tmp27 :start_reactor*retval
   821 label *label91
   822 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   213 op mul *tmp137 15 1
   214 op lessThan *tmp138 :start_reactor:fuel_stored 15
   215 set *tmp139 false
-    * jump *label128 equal false false
+  216 jump *label128 always
   217 control enabled reactor1 false
   218 print "STOP system fuel low"
   219 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    31 label *label7
    32 set .CONTAINER vault1
    33 set .NODE node1
-    * label *label93
    34 # "Function: def check_radar(in unit)"
    35 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    36 jump *label94 equal :check_radar:enemy_found null
 
    68 set *tmp8 true
    69 jump *label10 always
    70 label *label11
-    * label *label12
    71 set *tmp8 false
    72 jump *label10 always
    73 label *label10
    74 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label101
    75 # "Function: def calc_charge_req(in reactor, in time)"
    76 op sub *tmp102 @tick :t_startup1
    77 op idiv :calc_charge_req:secs *tmp102 60
 
    83 set .START_POWER_REQ 0
    84 jump *label104 always
    85 label *label102
-    * label *label103
    86 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    87 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    88 op idiv :calc_charge_req:charge_req *tmp110 0.04
    89 set .START_POWER_REQ :calc_charge_req:charge_req
    90 jump *label104 always
    91 label *label104
-    * label *label105
    92 # "Function: def calc_charge_req(in reactor, in time)"
    93 op sub *tmp102 @tick :t_startup2
    94 op idiv :calc_charge_req:secs *tmp102 60
 
   100 set :calc_charge_req*retval 0
   101 jump *label108 always
   102 label *label106
-    * label *label107
   103 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   104 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   105 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   107 jump *label108 always
   108 label *label108
   109 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label109
   110 # "Function: def calc_charge_req(in reactor, in time)"
   111 op sub *tmp102 @tick :t_startup3
   112 op idiv :calc_charge_req:secs *tmp102 60
 
   118 set :calc_charge_req*retval 0
   119 jump *label112 always
   120 label *label110
-    * label *label111
   121 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   122 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   123 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   125 jump *label112 always
   126 label *label112
   127 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label113
   128 # "Function: def calc_charge_req(in reactor, in time)"
   129 op sub *tmp102 @tick :t_startup4
   130 op idiv :calc_charge_req:secs *tmp102 60
 
   136 set :calc_charge_req*retval 0
   137 jump *label116 always
   138 label *label114
-    * label *label115
   139 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   140 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   141 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   143 jump *label116 always
   144 label *label116
   145 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label117
   146 # "Function: def calc_charge_req(in reactor, in time)"
   147 op sub *tmp102 @tick :t_startup5
   148 op idiv :calc_charge_req:secs *tmp102 60
 
   154 set :calc_charge_req*retval 0
   155 jump *label120 always
   156 label *label118
-    * label *label119
   157 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   158 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   159 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   161 jump *label120 always
   162 label *label120
   163 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label125
   164 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   165 op sub *tmp113 @tick :t_startup1
   166 op idiv :start_reactor:secs *tmp113 60
 
   219 jump *label141 always
   220 label *label130
   221 jump *label137 greaterThanEq :start_reactor:secs 30
-    * label *label131
   222 # "Function: def calc_charge_req(in reactor, in time)"
   223 op sub *tmp102 @tick :t_startup1
   224 op idiv :calc_charge_req:secs *tmp102 60
 
   230 set :calc_charge_req*retval 0
   231 jump *label134 always
   232 label *label132
-    * label *label133
   233 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   234 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   235 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   350 label *label159
   351 sensor *tmp201 reactor1 @enabled
   352 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label160
   353 set :fuel_1 :start_reactor:supply_fuel
   354 set :t_startup1 .RET_T_STARTUP
-    * label *label87
   355 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   356 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   357 control config unloader1 *tmp97
   358 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   359 control config unloader2 *tmp101
-    * label *label88
-    * label *label161
   360 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   361 op sub *tmp113 @tick :t_startup2
   362 op idiv :start_reactor:secs *tmp113 60
 
   415 jump *label177 always
   416 label *label166
   417 jump *label173 greaterThanEq :start_reactor:secs 30
-    * label *label167
   418 # "Function: def calc_charge_req(in reactor, in time)"
   419 op sub *tmp102 @tick :t_startup2
   420 op idiv :calc_charge_req:secs *tmp102 60
 
   426 set :calc_charge_req*retval 0
   427 jump *label170 always
   428 label *label168
-    * label *label169
   429 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   430 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   431 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   546 label *label195
   547 sensor *tmp201 reactor2 @enabled
   548 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label196
   549 set :fuel_2 :start_reactor:supply_fuel
   550 set :t_startup2 .RET_T_STARTUP
-    * label *label89
   551 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   552 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   553 control config unloader3 *tmp97
   554 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   555 control config unloader4 *tmp101
-    * label *label90
-    * label *label97
   556 # "Function: def check_radar(in unit)"
   557 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   558 jump *label98 equal :check_radar:enemy_found null
 
   580 label *label99
   581 label *label100
   582 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label197
   583 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   584 op sub *tmp113 @tick :t_startup3
   585 op idiv :start_reactor:secs *tmp113 60
 
   638 jump *label213 always
   639 label *label202
   640 jump *label209 greaterThanEq :start_reactor:secs 30
-    * label *label203
   641 # "Function: def calc_charge_req(in reactor, in time)"
   642 op sub *tmp102 @tick :t_startup3
   643 op idiv :calc_charge_req:secs *tmp102 60
 
   649 set :calc_charge_req*retval 0
   650 jump *label206 always
   651 label *label204
-    * label *label205
   652 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   653 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   654 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   769 label *label231
   770 sensor *tmp201 reactor3 @enabled
   771 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label232
   772 set :fuel_3 :start_reactor:supply_fuel
   773 set :t_startup3 .RET_T_STARTUP
   774 set :start_reactor:reactor reactor4
 
   789 set :t_startup5 .RET_T_STARTUP
   790 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   791 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label91
   792 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   793 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   794 control config unloader5 *tmp97
   795 select *tmp101 equal :fuel_many false @blast-compound @scrap
   796 control config unloader6 *tmp101
-    * label *label92
   797 op or *tmp30 :fuel_1 :fuel_2
   798 op or *tmp31 *tmp30 :fuel_many
   799 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   850 label *label19
   851 label *label15
   852 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label13
   853 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   854 control config unloader7 *tmp51
   855 # "Function: def diff_generators()"
 
   869 control enabled generator1 true
   870 control enabled generator2 true
   871 label *label24
-    * label *label22
-    * label *label81
   872 # "Function: def kilo(in val)"
   873 op idiv *tmp93 .AVG_SURPLUS 100
   874 op div :surplus *tmp93 10
-    * label *label82
   875 sensor :kilo:val node1 @powerNetStored
-    * label *label83
   876 # "Function: def kilo(in val)"
   877 op idiv *tmp93 :kilo:val 100
   878 op div :kilo*retval *tmp93 10
-    * label *label84
   879 set :charge :kilo*retval
   880 jump *label25 lessThanEq .START_POWER_REQ 0
-    * label *label85
   881 # "Function: def kilo(in val)"
   882 op idiv *tmp93 .START_POWER_REQ 100
   883 op div :kilo*retval *tmp93 10
-    * label *label86
   884 print "Req "
   885 print :kilo*retval
   886 print "kJ / "
 
   909 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   910 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   911 label *label30
-    * label *label31
   912 label *label28
-    * label *label29
   913 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   914 op lessThan *tmp83 .AVG_SURPLUS 8000
   915 op land *tmp84 *tmp81 *tmp83
 
   920 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   921 op min .REACTORS_DESIRED 5 *tmp89
   922 label *label32
-    * label *label33
-    * label *label27
   923 label *label26
   924 jump *label34 equal .REACTORS_DESIRED 5
   925 print "Require only "
 
   927 print "/5 reactors."
   928 print "\n"
   929 label *label34
-    * label *label35
   930 printflush message1
-    * label *label8
   931 jump *label7 always
-    * label *label9
   932 end
   933 label *label3
   934 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
 
   989 jump *label57 always
   990 label *label56
   991 jump *label58 greaterThanEq :start_reactor:secs 30
-    * label *label121
   992 # "Function: def calc_charge_req(in reactor, in time)"
   993 op sub *tmp102 @tick :start_reactor:t_startup
   994 op idiv :calc_charge_req:secs *tmp102 60
 
  1000 set :calc_charge_req*retval 0
  1001 jump *label124 always
  1002 label *label122
-    * label *label123
  1003 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
  1004 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1005 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1120 label *label47
  1121 sensor *tmp201 :start_reactor:reactor @enabled
  1122 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label45
  1123 return :start_reactor*retaddr
  1124 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   194 control enabled reactor1 false
   195 print "STOP unwanted"
   196 print "\n"
-    * jump *label144 always
+  197 jump *label158 always
   198 label *label127
   199 op greaterThan *tmp136 1 1
   200 op mul *tmp137 15 1
 
   204 control enabled reactor1 false
   205 print "STOP system fuel low"
   206 print "\n"
-    * jump *label143 always
+  207 jump *label158 always
   208 label *label128
   209 jump *label129 greaterThan :start_reactor:fuel 1
   210 control enabled reactor1 false
   211 print "STOP fuel low"
   212 print "\n"
-    * jump *label142 always
+  213 jump *label158 always
   214 label *label129
   215 jump *label130 greaterThan :start_reactor:cryo 1
   216 control enabled reactor1 false
   217 print "STOP out of cryo"
   218 print "\n"
-    * jump *label141 always
+  219 jump *label158 always
   220 label *label130
   221 jump *label137 greaterThanEq :start_reactor:secs 30
   222 # "Function: def calc_charge_req(in reactor, in time)"
 
   245 print "START FAIL battery"
   246 print "\n"
   247 set :start_reactor:supply_fuel false
-    * jump *label136 always
+  248 jump *label158 always
   249 label *label135
   250 op sub :start_reactor:time_left 30 :start_reactor:secs
   251 print "Starting "
 
   256 print "J"
   257 print "\n"
   258 label *label136
-    * jump *label140 always
+  259 jump *label158 always
   260 label *label137
   261 op lessThan *tmp161 :start_reactor:charge 2000
   262 op lessThan *tmp162 :start_reactor:surplus -500
 
   266 print "ABANDON - battery crit"
   267 print "\n"
   268 set :start_reactor:supply_fuel false
-    * jump *label139 always
+  269 jump *label158 always
   270 label *label138
   271 op idiv :start_reactor:mins :start_reactor:secs 6
   272 op div :start_reactor:mins :start_reactor:mins 10
 
   319 jump *label148 lessThanEq *tmp191 10
   320 print "WAIT fuel"
   321 print "\n"
-    * jump *label149 always
+  322 jump *label155 always
   323 label *label148
   324 print "WAIT system fuel"
   325 print "\n"
 
   390 control enabled reactor2 false
   391 print "STOP unwanted"
   392 print "\n"
-    * jump *label180 always
+  393 jump *label194 always
   394 label *label163
   395 op greaterThan *tmp136 2 1
   396 op mul *tmp137 15 2
 
   400 control enabled reactor2 false
   401 print "STOP system fuel low"
   402 print "\n"
-    * jump *label179 always
+  403 jump *label194 always
   404 label *label164
   405 jump *label165 greaterThan :start_reactor:fuel 1
   406 control enabled reactor2 false
   407 print "STOP fuel low"
   408 print "\n"
-    * jump *label178 always
+  409 jump *label194 always
   410 label *label165
   411 jump *label166 greaterThan :start_reactor:cryo 1
   412 control enabled reactor2 false
   413 print "STOP out of cryo"
   414 print "\n"
-    * jump *label177 always
+  415 jump *label194 always
   416 label *label166
   417 jump *label173 greaterThanEq :start_reactor:secs 30
   418 # "Function: def calc_charge_req(in reactor, in time)"
 
   441 print "START FAIL battery"
   442 print "\n"
   443 set :start_reactor:supply_fuel false
-    * jump *label172 always
+  444 jump *label194 always
   445 label *label171
   446 op sub :start_reactor:time_left 30 :start_reactor:secs
   447 print "Starting "
 
   452 print "J"
   453 print "\n"
   454 label *label172
-    * jump *label176 always
+  455 jump *label194 always
   456 label *label173
   457 op lessThan *tmp161 :start_reactor:charge 2000
   458 op lessThan *tmp162 :start_reactor:surplus -500
 
   462 print "ABANDON - battery crit"
   463 print "\n"
   464 set :start_reactor:supply_fuel false
-    * jump *label175 always
+  465 jump *label194 always
   466 label *label174
   467 op idiv :start_reactor:mins :start_reactor:secs 6
   468 op div :start_reactor:mins :start_reactor:mins 10
 
   515 jump *label184 lessThanEq *tmp191 10
   516 print "WAIT fuel"
   517 print "\n"
-    * jump *label185 always
+  518 jump *label191 always
   519 label *label184
   520 print "WAIT system fuel"
   521 print "\n"
 
   613 control enabled reactor3 false
   614 print "STOP unwanted"
   615 print "\n"
-    * jump *label216 always
+  616 jump *label230 always
   617 label *label199
   618 op greaterThan *tmp136 3 1
   619 op mul *tmp137 15 3
 
   623 control enabled reactor3 false
   624 print "STOP system fuel low"
   625 print "\n"
-    * jump *label215 always
+  626 jump *label230 always
   627 label *label200
   628 jump *label201 greaterThan :start_reactor:fuel 1
   629 control enabled reactor3 false
   630 print "STOP fuel low"
   631 print "\n"
-    * jump *label214 always
+  632 jump *label230 always
   633 label *label201
   634 jump *label202 greaterThan :start_reactor:cryo 1
   635 control enabled reactor3 false
   636 print "STOP out of cryo"
   637 print "\n"
-    * jump *label213 always
+  638 jump *label230 always
   639 label *label202
   640 jump *label209 greaterThanEq :start_reactor:secs 30
   641 # "Function: def calc_charge_req(in reactor, in time)"
 
   664 print "START FAIL battery"
   665 print "\n"
   666 set :start_reactor:supply_fuel false
-    * jump *label208 always
+  667 jump *label230 always
   668 label *label207
   669 op sub :start_reactor:time_left 30 :start_reactor:secs
   670 print "Starting "
 
   675 print "J"
   676 print "\n"
   677 label *label208
-    * jump *label212 always
+  678 jump *label230 always
   679 label *label209
   680 op lessThan *tmp161 :start_reactor:charge 2000
   681 op lessThan *tmp162 :start_reactor:surplus -500
 
   685 print "ABANDON - battery crit"
   686 print "\n"
   687 set :start_reactor:supply_fuel false
-    * jump *label211 always
+  688 jump *label230 always
   689 label *label210
   690 op idiv :start_reactor:mins :start_reactor:secs 6
   691 op div :start_reactor:mins :start_reactor:mins 10
 
   738 jump *label220 lessThanEq *tmp191 10
   739 print "WAIT fuel"
   740 print "\n"
-    * jump *label221 always
+  741 jump *label227 always
   742 label *label220
   743 print "WAIT system fuel"
   744 print "\n"
 
   820 jump *label16 equal :emerg_shutdown false
   821 print " Enemies detected."
   822 print "\n"
-    * jump *label17 always
+  823 jump *label15 always
   824 label *label16
   825 print " Critical power."
   826 print "\n"
 
   964 control enabled :start_reactor:reactor false
   965 print "STOP unwanted"
   966 print "\n"
-    * jump *label51 always
+  967 jump *label49 always
   968 label *label50
   969 op greaterThan *tmp136 :start_reactor:reactor_num 1
   970 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   974 control enabled :start_reactor:reactor false
   975 print "STOP system fuel low"
   976 print "\n"
-    * jump *label53 always
+  977 jump *label49 always
   978 label *label52
   979 jump *label54 greaterThan :start_reactor:fuel 1
   980 control enabled :start_reactor:reactor false
   981 print "STOP fuel low"
   982 print "\n"
-    * jump *label55 always
+  983 jump *label49 always
   984 label *label54
   985 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   986 control enabled :start_reactor:reactor false
   987 print "STOP out of cryo"
   988 print "\n"
-    * jump *label57 always
+  989 jump *label49 always
   990 label *label56
   991 jump *label58 greaterThanEq :start_reactor:secs 30
   992 # "Function: def calc_charge_req(in reactor, in time)"
 
  1015 print "START FAIL battery"
  1016 print "\n"
  1017 set :start_reactor*retval false
-    * jump *label61 always
+ 1018 jump *label49 always
  1019 label *label60
  1020 op sub :start_reactor:time_left 30 :start_reactor:secs
  1021 print "Starting "
 
  1026 print "J"
  1027 print "\n"
  1028 label *label61
-    * jump *label59 always
+ 1029 jump *label49 always
  1030 label *label58
  1031 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1032 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1036 print "ABANDON - battery crit"
  1037 print "\n"
  1038 set :start_reactor*retval false
-    * jump *label63 always
+ 1039 jump *label49 always
  1040 label *label62
  1041 op idiv :start_reactor:mins :start_reactor:secs 6
  1042 op div :start_reactor:mins :start_reactor:mins 10
 
  1089 jump *label70 lessThanEq *tmp191 .FUEL_REQ
  1090 print "WAIT fuel"
  1091 print "\n"
-    * jump *label71 always
+ 1092 jump *label69 always
  1093 label *label70
  1094 print "WAIT system fuel"
  1095 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    50 control enabled reactor5 false
    51 set :check_radar*retval true
    52 jump *label96 always
-    * jump *label95 always
    53 label *label94
    54 control enabled projector1 false
    55 control enabled projector2 false
 
   200 op lessThan *tmp138 :start_reactor:fuel_stored 15
   201 set *tmp139 false
   202 jump *label128 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label158 always
   203 label *label128
   204 jump *label129 greaterThan :start_reactor:fuel 1
   205 control enabled reactor1 false
 
   250 print :calc_charge_req*retval
   251 print "J"
   252 print "\n"
-    * label *label136
   253 jump *label158 always
   254 label *label137
   255 op lessThan *tmp161 :start_reactor:charge 2000
 
   269 print " "
   270 print "mins"
   271 print "\n"
-    * label *label139
-    * label *label140
-    * label *label141
-    * label *label142
-    * label *label143
-    * label *label144
   272 jump *label158 always
   273 label *label145
   274 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   311 label *label148
   312 print "WAIT system fuel"
   313 print "\n"
-    * label *label149
   314 jump *label155 always
   315 label *label150
   316 op mul *tmp194 45 1
 
   438 print :calc_charge_req*retval
   439 print "J"
   440 print "\n"
-    * label *label172
   441 jump *label194 always
   442 label *label173
   443 op lessThan *tmp161 :start_reactor:charge 2000
 
   457 print " "
   458 print "mins"
   459 print "\n"
-    * label *label175
-    * label *label176
-    * label *label177
-    * label *label178
-    * label *label179
-    * label *label180
   460 jump *label194 always
   461 label *label181
   462 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   499 label *label184
   500 print "WAIT system fuel"
   501 print "\n"
-    * label *label185
   502 jump *label191 always
   503 label *label186
   504 op mul *tmp194 45 2
 
   551 control enabled reactor5 false
   552 set :check_radar*retval true
   553 jump *label100 always
-    * jump *label99 always
   554 label *label98
   555 control enabled projector1 false
   556 control enabled projector2 false
 
   652 print :calc_charge_req*retval
   653 print "J"
   654 print "\n"
-    * label *label208
   655 jump *label230 always
   656 label *label209
   657 op lessThan *tmp161 :start_reactor:charge 2000
 
   671 print " "
   672 print "mins"
   673 print "\n"
-    * label *label211
-    * label *label212
-    * label *label213
-    * label *label214
-    * label *label215
-    * label *label216
   674 jump *label230 always
   675 label *label217
   676 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   713 label *label220
   714 print "WAIT system fuel"
   715 print "\n"
-    * label *label221
   716 jump *label227 always
   717 label *label222
   718 op mul *tmp194 45 3
 
   794 label *label16
   795 print " Critical power."
   796 print "\n"
-    * label *label17
   797 jump *label15 always
   798 label *label14
   799 jump *label18 notEqual *tmp31 false
 
   898 label *label34
   899 printflush message1
   900 jump *label7 always
-    * end
   901 label *label3
   902 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   903 op sub *tmp113 @tick :start_reactor:t_startup
 
   993 print :calc_charge_req*retval
   994 print "J"
   995 print "\n"
-    * label *label61
   996 jump *label49 always
   997 label *label58
   998 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
  1012 print " "
  1013 print "mins"
  1014 print "\n"
-    * label *label63
-    * label *label59
-    * label *label57
-    * label *label55
-    * label *label53
-    * label *label51
  1015 jump *label49 always
  1016 label *label48
  1017 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1054 label *label70
  1055 print "WAIT system fuel"
  1056 print "\n"
-    * label *label71
  1057 jump *label69 always
  1058 label *label68
  1059 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1081 sensor *tmp201 :start_reactor:reactor @enabled
  1082 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1083 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1:
 
    54 control enabled projector1 false
    55 control enabled projector2 false
    56 set :check_radar*retval false
-    * label *label95
    57 label *label96
    58 # "Function: def check_manual_shutdown()"
    59 op notEqual *tmp9 switch1 null
 
   554 control enabled projector1 false
   555 control enabled projector2 false
   556 set :check_radar*retval false
-    * label *label99
   557 label *label100
   558 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   559 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   198 op mul *tmp137 15 1
   199 op lessThan *tmp138 :start_reactor:fuel_stored 15
   200 set *tmp139 false
-    * jump *label128 always
   201 label *label128
   202 jump *label129 greaterThan :start_reactor:fuel 1
   203 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   198 op mul *tmp137 15 1
   199 op lessThan *tmp138 :start_reactor:fuel_stored 15
   200 set *tmp139 false
-    * label *label128
   201 jump *label129 greaterThan :start_reactor:fuel 1
   202 control enabled reactor1 false
   203 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    61 op equal *tmp11 *tmp10 false
    62 op land *tmp12 *tmp9 *tmp11
    63 jump *label11 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   64 print "User has disabled emergency switch\n"
    65 set *tmp8 true
    66 jump *label10 always
    67 label *label11
 
   175 op mul *tmp125 :start_reactor:surplus 0.2
   176 op add .AVG_SURPLUS *tmp124 *tmp125
   177 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  178 print "#1 - "
   179 jump *label126 equal :emerg_shutdown false
   180 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  181 print "emergency mode\n"
   182 set :start_reactor:supply_fuel false
   183 jump *label159 always
   184 label *label126
   185 jump *label145 equal :start_reactor:enabled false
   186 jump *label127 greaterThanEq .REACTORS_DESIRED 1
   187 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  188 print "STOP unwanted\n"
   189 jump *label158 always
   190 label *label127
   191 op greaterThan *tmp136 1 1
 
   194 set *tmp139 false
   195 jump *label129 greaterThan :start_reactor:fuel 1
   196 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  197 print "STOP fuel low\n"
   198 jump *label158 always
   199 label *label129
   200 jump *label130 greaterThan :start_reactor:cryo 1
   201 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  202 print "STOP out of cryo\n"
   203 jump *label158 always
   204 label *label130
   205 jump *label137 greaterThanEq :start_reactor:secs 30
 
   226 op land *tmp156 *tmp154 *tmp155
   227 jump *label135 equal *tmp156 false
   228 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  229 print "START FAIL battery\n"
   230 set :start_reactor:supply_fuel false
   231 jump *label158 always
   232 label *label135
   233 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  234 print "Starting {0} secs, req {0}J\n"
+  235 format :start_reactor:time_left
+  236 format :calc_charge_req*retval
   237 jump *label158 always
   238 label *label137
   239 op lessThan *tmp161 :start_reactor:charge 2000
 
   241 op land *tmp163 *tmp161 *tmp162
   242 jump *label138 equal *tmp163 false
   243 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  244 print "ABANDON - battery crit\n"
   245 set :start_reactor:supply_fuel false
   246 jump *label158 always
   247 label *label138
   248 op idiv :start_reactor:mins :start_reactor:secs 6
   249 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  250 print "RUN {0} mins\n"
+  251 format :start_reactor:mins
   252 jump *label158 always
   253 label *label145
   254 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   260 op mul *tmp175 2 1
   261 op add :start_reactor:cryo_req 3 2
   262 jump *label146 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  263 print "IDLE\n"
   264 set :start_reactor:supply_fuel false
   265 jump *label157 always
   266 label *label146
 
   270 op div :start_reactor:flow *tmp183 10
   271 op idiv *tmp186 :start_reactor:charge_units 0.001
   272 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  273 print "WAIT power. (%{0}J + %{0}W)\n"
+  274 format :start_reactor:charge
+  275 format :start_reactor:flow
   276 set :start_reactor:supply_fuel false
   277 jump *label156 always
   278 label *label147
 
   281 jump *label150 equal *tmp189 false
   282 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   283 jump *label148 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  284 print "WAIT fuel\n"
   285 jump *label155 always
   286 label *label148
-    * print "WAIT system fuel"
-    * print "\n"
+  287 print "WAIT system fuel\n"
   288 jump *label155 always
   289 label *label150
   290 op mul *tmp194 45 1
   291 jump *label151 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  292 print "WAIT buffer fuel\n"
   293 jump *label154 always
   294 label *label151
   295 jump *label152 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  296 print "WAIT cryo\n"
   297 jump *label153 always
   298 label *label152
-    * print "STARTUP"
-    * print "\n"
+  299 print "STARTUP\n"
   300 op add .START_POWER_REQ .START_POWER_REQ 23000
   301 control enabled reactor1 true
   302 label *label153
 
   332 op mul *tmp125 :start_reactor:surplus 0.2
   333 op add .AVG_SURPLUS *tmp124 *tmp125
   334 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  335 print "#2 - "
   336 jump *label162 equal :emerg_shutdown false
   337 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  338 print "emergency mode\n"
   339 set :start_reactor:supply_fuel false
   340 jump *label195 always
   341 label *label162
   342 jump *label181 equal :start_reactor:enabled false
   343 jump *label163 greaterThanEq .REACTORS_DESIRED 2
   344 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  345 print "STOP unwanted\n"
   346 jump *label194 always
   347 label *label163
   348 op greaterThan *tmp136 2 1
 
   351 set *tmp139 *tmp138
   352 jump *label164 equal *tmp138 false
   353 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  354 print "STOP system fuel low\n"
   355 jump *label194 always
   356 label *label164
   357 jump *label165 greaterThan :start_reactor:fuel 1
   358 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  359 print "STOP fuel low\n"
   360 jump *label194 always
   361 label *label165
   362 jump *label166 greaterThan :start_reactor:cryo 1
   363 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  364 print "STOP out of cryo\n"
   365 jump *label194 always
   366 label *label166
   367 jump *label173 greaterThanEq :start_reactor:secs 30
 
   388 op land *tmp156 *tmp154 *tmp155
   389 jump *label171 equal *tmp156 false
   390 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  391 print "START FAIL battery\n"
   392 set :start_reactor:supply_fuel false
   393 jump *label194 always
   394 label *label171
   395 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  396 print "Starting {0} secs, req {0}J\n"
+  397 format :start_reactor:time_left
+  398 format :calc_charge_req*retval
   399 jump *label194 always
   400 label *label173
   401 op lessThan *tmp161 :start_reactor:charge 2000
 
   403 op land *tmp163 *tmp161 *tmp162
   404 jump *label174 equal *tmp163 false
   405 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  406 print "ABANDON - battery crit\n"
   407 set :start_reactor:supply_fuel false
   408 jump *label194 always
   409 label *label174
   410 op idiv :start_reactor:mins :start_reactor:secs 6
   411 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  412 print "RUN {0} mins\n"
+  413 format :start_reactor:mins
   414 jump *label194 always
   415 label *label181
   416 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   422 op mul *tmp175 2 2
   423 op add :start_reactor:cryo_req 3 4
   424 jump *label182 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  425 print "IDLE\n"
   426 set :start_reactor:supply_fuel false
   427 jump *label193 always
   428 label *label182
 
   432 op div :start_reactor:flow *tmp183 10
   433 op idiv *tmp186 :start_reactor:charge_units 0.001
   434 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  435 print "WAIT power. (%{0}J + %{0}W)\n"
+  436 format :start_reactor:charge
+  437 format :start_reactor:flow
   438 set :start_reactor:supply_fuel false
   439 jump *label192 always
   440 label *label183
 
   443 jump *label186 equal *tmp189 false
   444 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   445 jump *label184 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  446 print "WAIT fuel\n"
   447 jump *label191 always
   448 label *label184
-    * print "WAIT system fuel"
-    * print "\n"
+  449 print "WAIT system fuel\n"
   450 jump *label191 always
   451 label *label186
   452 op mul *tmp194 45 2
   453 jump *label187 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  454 print "WAIT buffer fuel\n"
   455 jump *label190 always
   456 label *label187
   457 jump *label188 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  458 print "WAIT cryo\n"
   459 jump *label189 always
   460 label *label188
-    * print "STARTUP"
-    * print "\n"
+  461 print "STARTUP\n"
   462 op add .START_POWER_REQ .START_POWER_REQ 23000
   463 control enabled reactor2 true
   464 label *label189
 
   519 op mul *tmp125 :start_reactor:surplus 0.2
   520 op add .AVG_SURPLUS *tmp124 *tmp125
   521 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  522 print "#3 - "
   523 jump *label198 equal :emerg_shutdown false
   524 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  525 print "emergency mode\n"
   526 set :start_reactor:supply_fuel false
   527 jump *label231 always
   528 label *label198
   529 jump *label217 equal :start_reactor:enabled false
   530 jump *label199 greaterThanEq .REACTORS_DESIRED 3
   531 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  532 print "STOP unwanted\n"
   533 jump *label230 always
   534 label *label199
   535 op greaterThan *tmp136 3 1
 
   538 set *tmp139 *tmp138
   539 jump *label200 equal *tmp138 false
   540 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  541 print "STOP system fuel low\n"
   542 jump *label230 always
   543 label *label200
   544 jump *label201 greaterThan :start_reactor:fuel 1
   545 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  546 print "STOP fuel low\n"
   547 jump *label230 always
   548 label *label201
   549 jump *label202 greaterThan :start_reactor:cryo 1
   550 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  551 print "STOP out of cryo\n"
   552 jump *label230 always
   553 label *label202
   554 jump *label209 greaterThanEq :start_reactor:secs 30
 
   575 op land *tmp156 *tmp154 *tmp155
   576 jump *label207 equal *tmp156 false
   577 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  578 print "START FAIL battery\n"
   579 set :start_reactor:supply_fuel false
   580 jump *label230 always
   581 label *label207
   582 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  583 print "Starting {0} secs, req {0}J\n"
+  584 format :start_reactor:time_left
+  585 format :calc_charge_req*retval
   586 jump *label230 always
   587 label *label209
   588 op lessThan *tmp161 :start_reactor:charge 2000
 
   590 op land *tmp163 *tmp161 *tmp162
   591 jump *label210 equal *tmp163 false
   592 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  593 print "ABANDON - battery crit\n"
   594 set :start_reactor:supply_fuel false
   595 jump *label230 always
   596 label *label210
   597 op idiv :start_reactor:mins :start_reactor:secs 6
   598 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  599 print "RUN {0} mins\n"
+  600 format :start_reactor:mins
   601 jump *label230 always
   602 label *label217
   603 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   609 op mul *tmp175 2 3
   610 op add :start_reactor:cryo_req 3 6
   611 jump *label218 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  612 print "IDLE\n"
   613 set :start_reactor:supply_fuel false
   614 jump *label229 always
   615 label *label218
 
   619 op div :start_reactor:flow *tmp183 10
   620 op idiv *tmp186 :start_reactor:charge_units 0.001
   621 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  622 print "WAIT power. (%{0}J + %{0}W)\n"
+  623 format :start_reactor:charge
+  624 format :start_reactor:flow
   625 set :start_reactor:supply_fuel false
   626 jump *label228 always
   627 label *label219
 
   630 jump *label222 equal *tmp189 false
   631 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   632 jump *label220 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  633 print "WAIT fuel\n"
   634 jump *label227 always
   635 label *label220
-    * print "WAIT system fuel"
-    * print "\n"
+  636 print "WAIT system fuel\n"
   637 jump *label227 always
   638 label *label222
   639 op mul *tmp194 45 3
   640 jump *label223 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  641 print "WAIT buffer fuel\n"
   642 jump *label226 always
   643 label *label223
   644 jump *label224 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  645 print "WAIT cryo\n"
   646 jump *label225 always
   647 label *label224
-    * print "STARTUP"
-    * print "\n"
+  648 print "STARTUP\n"
   649 op add .START_POWER_REQ .START_POWER_REQ 23000
   650 control enabled reactor3 true
   651 label *label225
 
   698 op or *tmp43 *tmp42 :emerg_shutdown
   699 jump *label14 equal *tmp43 false
   700 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  701 print "Central Fuel at {0} / 0 - "
+  702 format :throttle_blast:fuel_stored
   703 jump *label16 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  704 print " Enemies detected.\n"
   705 jump *label15 always
   706 label *label16
-    * print " Critical power."
-    * print "\n"
+  707 print " Critical power.\n"
   708 jump *label15 always
   709 label *label14
   710 jump *label18 notEqual *tmp31 false
   711 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  712 print "Fuel {0} / 150 (due to emergency)\n"
+  713 format :throttle_blast:fuel_stored
   714 jump *label19 always
   715 label *label18
   716 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  717 print "Fuel {0} / 800\n"
+  718 format :throttle_blast:fuel_stored
   719 label *label19
   720 label *label15
   721 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   729 op lessThan *tmp57 .START_POWER_REQ 10
   730 op land *tmp58 *tmp56 *tmp57
   731 jump *label23 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  732 print "Differential now idle.\n"
   733 control enabled generator1 false
   734 control enabled generator2 false
   735 jump *label24 always
 
   749 # "Function: def kilo(in val)"
   750 op idiv *tmp93 .START_POWER_REQ 100
   751 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  752 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  753 format :kilo*retval
+  754 format :charge
+  755 format :surplus
   756 jump *label26 always
   757 label *label25
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  758 print "Power {0}kW, {0}kJ\n"
+  759 format :surplus
+  760 format :kilo*retval
   761 # "Function: def update_reactors_desired()"
   762 sensor *tmp71 node1 @powerNetStored
   763 sensor *tmp72 node1 @powerNetCapacity
 
   783 label *label32
   784 label *label26
   785 jump *label34 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  786 print "Require only {0}/5 reactors.\n"
+  787 format .REACTORS_DESIRED
   788 label *label34
   789 printflush message1
   790 jump *label7 always
 
   806 op mul *tmp125 :start_reactor:surplus 0.2
   807 op add .AVG_SURPLUS *tmp124 *tmp125
   808 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  809 print "#{0} - "
+  810 format :start_reactor:reactor_num
   811 jump *label46 equal :start_reactor:emerg_shutdown false
   812 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  813 print "emergency mode\n"
   814 set :start_reactor*retval false
   815 jump *label47 always
   816 label *label46
   817 jump *label48 equal :start_reactor:enabled false
   818 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   819 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  820 print "STOP unwanted\n"
   821 jump *label49 always
   822 label *label50
   823 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   826 op land *tmp139 *tmp136 *tmp138
   827 jump *label52 equal *tmp139 false
   828 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  829 print "STOP system fuel low\n"
   830 jump *label49 always
   831 label *label52
   832 jump *label54 greaterThan :start_reactor:fuel 1
   833 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  834 print "STOP fuel low\n"
   835 jump *label49 always
   836 label *label54
   837 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   838 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  839 print "STOP out of cryo\n"
   840 jump *label49 always
   841 label *label56
   842 jump *label58 greaterThanEq :start_reactor:secs 30
 
   863 op land *tmp156 *tmp154 *tmp155
   864 jump *label60 equal *tmp156 false
   865 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  866 print "START FAIL battery\n"
   867 set :start_reactor*retval false
   868 jump *label49 always
   869 label *label60
   870 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  871 print "Starting {0} secs, req {0}J\n"
+  872 format :start_reactor:time_left
+  873 format :calc_charge_req*retval
   874 jump *label49 always
   875 label *label58
   876 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   878 op land *tmp163 *tmp161 *tmp162
   879 jump *label62 equal *tmp163 false
   880 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  881 print "ABANDON - battery crit\n"
   882 set :start_reactor*retval false
   883 jump *label49 always
   884 label *label62
   885 op idiv :start_reactor:mins :start_reactor:secs 6
   886 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  887 print "RUN {0} mins\n"
+  888 format :start_reactor:mins
   889 jump *label49 always
   890 label *label48
   891 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   897 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   898 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   899 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  900 print "IDLE\n"
   901 set :start_reactor*retval false
   902 jump *label65 always
   903 label *label64
 
   907 op div :start_reactor:flow *tmp183 10
   908 op idiv *tmp186 :start_reactor:charge_units 0.001
   909 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  910 print "WAIT power. (%{0}J + %{0}W)\n"
+  911 format :start_reactor:charge
+  912 format :start_reactor:flow
   913 set :start_reactor*retval false
   914 jump *label67 always
   915 label *label66
 
   918 jump *label68 equal *tmp189 false
   919 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   920 jump *label70 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  921 print "WAIT fuel\n"
   922 jump *label69 always
   923 label *label70
-    * print "WAIT system fuel"
-    * print "\n"
+  924 print "WAIT system fuel\n"
   925 jump *label69 always
   926 label *label68
   927 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   928 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  929 print "WAIT buffer fuel\n"
   930 jump *label73 always
   931 label *label72
   932 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  933 print "WAIT cryo\n"
   934 jump *label75 always
   935 label *label74
-    * print "STARTUP"
-    * print "\n"
+  936 print "STARTUP\n"
   937 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   938 control enabled :start_reactor:reactor true
   939 label *label75

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp231 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label94 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label96 always
label *label94
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label96
# "Function: def check_manual_shutdown()"
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label11 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
jump *label10 always
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label102 equal *tmp107 false
set .START_POWER_REQ 0
jump *label104 always
label *label102
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label104 always
label *label104
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label106 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label108 always
label *label106
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label108 always
label *label108
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label110 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label112 always
label *label110
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label112 always
label *label112
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label114 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label116 always
label *label114
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label116 always
label *label116
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label118 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label120 always
label *label118
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label120 always
label *label120
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label126 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label159 always
label *label126
jump *label145 equal :start_reactor:enabled false
jump *label127 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label158 always
label *label127
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label129 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label158 always
label *label129
jump *label130 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label158 always
label *label130
jump *label137 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label132 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label134 always
label *label132
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label134 always
label *label134
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label135 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label158 always
label *label135
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label158 always
label *label137
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label138 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label158 always
label *label138
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label158 always
label *label145
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label146 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label157 always
label *label146
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label147 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label156 always
label *label147
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label150 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label148 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label155 always
label *label148
print "WAIT system fuel\n"
jump *label155 always
label *label150
op mul *tmp194 45 1
jump *label151 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label154 always
label *label151
jump *label152 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label153 always
label *label152
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label153
label *label154
label *label155
label *label156
label *label157
label *label158
label *label159
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label162 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label195 always
label *label162
jump *label181 equal :start_reactor:enabled false
jump *label163 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label194 always
label *label163
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label164 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label194 always
label *label164
jump *label165 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label194 always
label *label165
jump *label166 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label194 always
label *label166
jump *label173 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label168 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label170 always
label *label168
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label170 always
label *label170
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label171 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label194 always
label *label171
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label194 always
label *label173
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label174 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label194 always
label *label174
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label194 always
label *label181
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label182 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label193 always
label *label182
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label183 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label192 always
label *label183
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label186 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label184 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label191 always
label *label184
print "WAIT system fuel\n"
jump *label191 always
label *label186
op mul *tmp194 45 2
jump *label187 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label190 always
label *label187
jump *label188 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label189 always
label *label188
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label189
label *label190
label *label191
label *label192
label *label193
label *label194
label *label195
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label98 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label100 always
label *label98
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label100
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label198 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label231 always
label *label198
jump *label217 equal :start_reactor:enabled false
jump *label199 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label230 always
label *label199
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label200 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label230 always
label *label200
jump *label201 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label230 always
label *label201
jump *label202 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label230 always
label *label202
jump *label209 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label204 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label206 always
label *label204
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label206 always
label *label206
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label207 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label230 always
label *label207
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label230 always
label *label209
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label210 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label230 always
label *label210
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label230 always
label *label217
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label218 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label229 always
label *label218
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label219 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label228 always
label *label219
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label222 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label220 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label227 always
label *label220
print "WAIT system fuel\n"
jump *label227 always
label *label222
op mul *tmp194 45 3
jump *label223 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label226 always
label *label223
jump *label224 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label225 always
label *label224
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label225
label *label226
label *label227
label *label228
label *label229
label *label230
label *label231
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or *tmp31 *tmp30 :fuel_many
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label14 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label16 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label15 always
label *label16
print " Critical power.\n"
jump *label15 always
label *label14
jump *label18 notEqual *tmp31 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label19 always
label *label18
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label19
label *label15
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
# "Function: def diff_generators()"
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label23 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label24 always
label *label23
control enabled generator1 true
control enabled generator2 true
label *label24
# "Function: def kilo(in val)"
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label25 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label26 always
label *label25
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label28 equal *tmp77 false
jump *label30 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label30
label *label28
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label32 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label32
label *label26
jump *label34 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label34
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label46 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label47 always
label *label46
jump *label48 equal :start_reactor:enabled false
jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label49 always
label *label50
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label52 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label49 always
label *label52
jump *label54 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label49 always
label *label54
jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label49 always
label *label56
jump *label58 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label122 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label124 always
label *label122
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label124 always
label *label124
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label60 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label49 always
label *label60
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label49 always
label *label58
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label62 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label49 always
label *label62
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label49 always
label *label48
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label65 always
label *label64
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label66 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label67 always
label *label66
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label68 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label70 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label69 always
label *label70
print "WAIT system fuel\n"
jump *label69 always
label *label68
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label73 always
label *label72
jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label75 always
label *label74
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label75
label *label73
label *label69
label *label67
label *label65
label *label49
label *label47
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
