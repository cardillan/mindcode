   661 instructions before optimizations.
    64 instructions eliminated by Temp Variables Elimination (2 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    18 instructions eliminated by Jump Optimization (2 passes, 6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
     3 instructions eliminated by If Expression Optimization (4 iterations).
    82 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   550 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by JumpThreading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   823 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 520):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size   +13, benefit      337.5, efficiency     25.962
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +591, benefit      687.5, efficiency      1.163
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 82:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 84:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 86:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 91:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 93:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 96:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 524):
  * Inline function 'update_fuel' defined at line 121:1          size   +13, benefit      337.5, efficiency     25.962 (-1 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +591, benefit      687.5, efficiency      1.163
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 82:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 84:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 86:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 91:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 93:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 96:5                            size    +7, benefit      112.5, efficiency     16.071
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 525):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +591, benefit      687.5, efficiency      1.163
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 84:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 91:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 93:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 519):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+44 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +591, benefit      687.5, efficiency      1.163
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 84:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 89:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 91:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 93:14                           size  +148, benefit      137.5, efficiency      0.929
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 475):
  ! Inline function 'start_reactor' defined at line 140:1        size  +631, benefit      687.5, efficiency      1.090
  * Inline function call at line 80:14                           size  +158, benefit      137.5, efficiency      0.870 (+150 instructions)
    Inline function call at line 84:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 89:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 91:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 93:14                           size  +158, benefit      137.5, efficiency      0.870

Pass 1: speed optimization selection (cost limit 325):
  ! Inline function 'start_reactor' defined at line 140:1        size  +473, benefit      550.0, efficiency      1.163
  * Inline function call at line 84:14                           size  +158, benefit      137.5, efficiency      0.870 (+151 instructions)
    Inline function call at line 89:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 91:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 93:14                           size  +158, benefit      137.5, efficiency      0.870

Pass 1: speed optimization selection (cost limit 174):
  ! Inline function 'start_reactor' defined at line 140:1        size  +315, benefit      412.5, efficiency      1.310
  * Inline function call at line 89:14                           size  +158, benefit      137.5, efficiency      0.870 (+151 instructions)
    Inline function call at line 91:14                           size  +158, benefit      137.5, efficiency      0.870
    Inline function call at line 93:14                           size  +158, benefit      137.5, efficiency      0.870

Pass 1: speed optimization selection (cost limit 23):
  ! Inline function 'start_reactor' defined at line 140:1        size  +157, benefit      275.0, efficiency      1.752
  ! Inline function call at line 91:14                           size  +158, benefit      137.5, efficiency      0.870
  ! Inline function call at line 93:14                           size  +158, benefit      137.5, efficiency      0.870

Pass 2: speed optimization selection (cost limit 36):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 3: speed optimization selection (cost limit 37):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 4: speed optimization selection (cost limit 37):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    70 print "\n"
    71 set *tmp8 true
    72 jump *label10 always
-    * set *tmp13 null
    73 jump *label12 always
    74 label *label11
-    * set *tmp13 null
    75 label *label12
    76 set *tmp8 false
    77 jump *label10 always
 
   116 set :update_fuel:uld_in .ULD_IN_1
   117 set :update_fuel:uld_out .ULD_OUT_1
   118 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp20 :update_fuel*retval
   119 set :start_reactor:reactor reactor2
   120 set :start_reactor:reactor_num 2
   121 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   129 set :update_fuel:uld_in .ULD_IN_2
   130 set :update_fuel:uld_out .ULD_OUT_2
   131 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp22 :update_fuel*retval
   132 set :check_radar:unit .TOWER
   133 call *label4 :check_radar*retaddr :check_radar*retval
   134 set *tmp23 :check_radar*retval
 
   167 set :update_fuel:uld_in .ULD_IN_MANY
   168 set :update_fuel:uld_out .ULD_OUT_MANY
   169 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp29 :update_fuel*retval
   170 op or *tmp30 :fuel_1 :fuel_2
   171 op or *tmp31 *tmp30 :fuel_many
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   205 print "\n"
   206 set *tmp45 null
   207 label *label17
-    * set *tmp44 *tmp45
   208 jump *label15 always
   209 label *label14
   210 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   231 print "n"
   232 set *tmp47 null
   233 label *label19
-    * set *tmp44 *tmp47
   234 label *label15
   235 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   236 set *tmp32 *tmp48
 
   266 control enabled generator2 true
   267 set *tmp59 true
   268 label *label24
-    * set *tmp52 *tmp59
   269 label *label22
   270 set :kilo:val .AVG_SURPLUS
   271 call *label0 :kilo*retaddr :kilo*retval
 
   290 print :surplus
   291 print "kW flow."
   292 print "\n"
-    * set *tmp68 null
   293 jump *label26 always
   294 label *label25
   295 print "Power "
 
   317 label *label30
   318 set *tmp80 null
   319 label *label31
-    * set *tmp78 *tmp80
   320 jump *label29 always
   321 label *label28
-    * set *tmp78 null
   322 label *label29
   323 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   324 op mul *tmp82 .GOAL_BUFFER 0.8
 
   339 label *label33
   340 set *tmp70 *tmp85
   341 label *label27
-    * set *tmp68 *tmp70
   342 label *label26
   343 op notEqual *tmp91 .REACTORS_DESIRED 5
   344 jump *label34 equal *tmp91 false
 
   346 print .REACTORS_DESIRED
   347 print "/5 reactors."
   348 print "\n"
-    * set *tmp92 null
   349 jump *label35 always
   350 label *label34
-    * set *tmp92 null
   351 label *label35
   352 printflush message1
   353 label *label8
 
   399 jump *label43 equal *tmp107 false
   400 set :calc_charge_req*retval 0
   401 jump *label42 always
-    * set *tmp108 null
   402 jump *label44 always
   403 label *label43
-    * set *tmp108 null
   404 label *label44
   405 op sub *tmp109 30 :calc_charge_req:secs
   406 set :calc_charge_req:time_left *tmp109
 
   451 print "emergency mode"
   452 print "\n"
   453 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   454 jump *label47 always
   455 label *label46
   456 jump *label48 equal :start_reactor:enabled false
 
   652 label *label65
   653 set *tmp131 *tmp178
   654 label *label49
-    * set *tmp128 *tmp131
   655 label *label47
   656 sensor *tmp201 :start_reactor:reactor @enabled
   657 op notEqual *tmp202 :start_reactor:enabled *tmp201
   658 jump *label76 equal *tmp202 false
   659 set *tmp204 @tick
   660 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   661 jump *label77 always
   662 label *label76
-    * set *tmp203 null
   663 label *label77
   664 set :start_reactor*retval :start_reactor:supply_fuel
   665 jump *label45 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   198 jump *label16 equal :throttle_blast:emerg_shutdown false
   199 print " Enemies detected."
   200 print "\n"
-    * set *tmp45 null
   201 jump *label17 always
   202 label *label16
   203 print " Critical power."
   204 print "\n"
-    * set *tmp45 null
   205 label *label17
   206 jump *label15 always
   207 label *label14
 
   216 print " "
   217 print "(due to emergency)"
   218 print "\n"
-    * set *tmp47 null
   219 jump *label19 always
   220 label *label18
   221 set :throttle_blast:limit .FUEL_LIMIT
 
   226 print :throttle_blast:limit
   227 print "\"
   228 print "n"
-    * set *tmp47 null
   229 label *label19
   230 label *label15
   231 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   255 print "\n"
   256 control enabled generator1 false
   257 control enabled generator2 false
-    * set *tmp59 false
   258 jump *label24 always
   259 label *label23
   260 control enabled generator1 true
   261 control enabled generator2 true
-    * set *tmp59 true
   262 label *label24
   263 label *label22
   264 set :kilo:val .AVG_SURPLUS
 
   306 jump *label30 equal *tmp79 false
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   309 jump *label31 always
   310 label *label30
-    * set *tmp80 null
   311 label *label31
   312 jump *label29 always
   313 label *label28
 
   329 label *label32
   330 set *tmp85 null
   331 label *label33
-    * set *tmp70 *tmp85
   332 label *label27
   333 label *label26
   334 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   374 set *tmp101 .FUEL_OFF
   375 label *label41
   376 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   377 label *label37
   378 return :update_fuel*retaddr
   379 end
 
   549 label *label53
   550 set *tmp133 *tmp140
   551 label *label51
-    * set *tmp131 *tmp133
   552 jump *label49 always
   553 label *label48
   554 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   639 label *label67
   640 set *tmp178 *tmp181
   641 label *label65
-    * set *tmp131 *tmp178
   642 label *label49
   643 label *label47
   644 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   324 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   325 op min *tmp90 5 *tmp89
   326 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   327 jump *label33 always
   328 label *label32
-    * set *tmp85 null
   329 label *label33
   330 label *label27
   331 label *label26
 
   448 control enabled *tmp134 false
   449 print "STOP unwanted"
   450 print "\n"
-    * set *tmp133 null
   451 jump *label51 always
   452 label *label50
   453 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   544 label *label55
   545 set *tmp140 *tmp144
   546 label *label53
-    * set *tmp133 *tmp140
   547 label *label51
   548 jump *label49 always
   549 label *label48
 
   563 print "IDLE"
   564 print "\n"
   565 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   566 jump *label65 always
   567 label *label64
   568 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   632 label *label69
   633 set *tmp181 *tmp190
   634 label *label67
-    * set *tmp178 *tmp181
   635 label *label65
   636 label *label49
   637 label *label47

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   459 control enabled *tmp141 false
   460 print "STOP system fuel low"
   461 print "\n"
-    * set *tmp140 null
   462 jump *label53 always
   463 label *label52
   464 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   541 label *label57
   542 set *tmp144 *tmp148
   543 label *label55
-    * set *tmp140 *tmp144
   544 label *label53
   545 label *label51
   546 jump *label49 always
 
   581 print "W)"
   582 print "\n"
   583 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   584 jump *label67 always
   585 label *label66
   586 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   627 label *label73
   628 set *tmp190 *tmp196
   629 label *label69
-    * set *tmp181 *tmp190
   630 label *label67
   631 label *label65
   632 label *label49

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   467 control enabled *tmp145 false
   468 print "STOP fuel low"
   469 print "\n"
-    * set *tmp144 null
   470 jump *label55 always
   471 label *label54
   472 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   538 label *label59
   539 set *tmp148 *tmp152
   540 label *label57
-    * set *tmp144 *tmp148
   541 label *label55
   542 label *label53
   543 label *label51
 
   596 print "\n"
   597 set *tmp193 null
   598 label *label71
-    * set *tmp190 *tmp193
   599 jump *label69 always
   600 label *label68
   601 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   622 label *label75
   623 set *tmp196 *tmp198
   624 label *label73
-    * set *tmp190 *tmp196
   625 label *label69
   626 label *label67
   627 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   475 control enabled *tmp149 false
   476 print "STOP out of cryo"
   477 print "\n"
-    * set *tmp148 null
   478 jump *label57 always
   479 label *label56
   480 op lessThan *tmp151 :start_reactor:secs 30
 
   535 label *label63
   536 set *tmp152 *tmp164
   537 label *label59
-    * set *tmp148 *tmp152
   538 label *label57
   539 label *label55
   540 label *label53
 
   587 jump *label70 equal *tmp192 false
   588 print "WAIT fuel"
   589 print "\n"
-    * set *tmp193 null
   590 jump *label71 always
   591 label *label70
   592 print "WAIT system fuel"
   593 print "\n"
-    * set *tmp193 null
   594 label *label71
   595 jump *label69 always
   596 label *label68
 
   599 jump *label72 equal *tmp195 false
   600 print "WAIT buffer fuel"
   601 print "\n"
-    * set *tmp196 null
   602 jump *label73 always
   603 label *label72
   604 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   615 control enabled *tmp199 true
   616 set *tmp198 true
   617 label *label75
-    * set *tmp196 *tmp198
   618 label *label73
   619 label *label69
   620 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   507 print "\n"
   508 set *tmp157 null
   509 label *label61
-    * set *tmp152 *tmp157
   510 jump *label59 always
   511 label *label58
   512 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   532 print "\n"
   533 set *tmp164 null
   534 label *label63
-    * set *tmp152 *tmp164
   535 label *label59
   536 label *label57
   537 label *label55
 
   603 jump *label74 equal *tmp197 false
   604 print "WAIT cryo"
   605 print "\n"
-    * set *tmp198 null
   606 jump *label75 always
   607 label *label74
   608 print "STARTUP"
 
   610 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   611 set *tmp199 :start_reactor:reactor
   612 control enabled *tmp199 true
-    * set *tmp198 true
   613 label *label75
   614 label *label73
   615 label *label69

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   493 print "START FAIL battery"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   496 jump *label61 always
   497 label *label60
   498 op sub *tmp160 30 :start_reactor:secs
 
   504 print :start_reactor:charge_req
   505 print "J"
   506 print "\n"
-    * set *tmp157 null
   507 label *label61
   508 jump *label59 always
   509 label *label58
 
   516 print "ABANDON - battery crit"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   519 jump *label63 always
   520 label *label62
   521 op idiv *tmp167 :start_reactor:secs 6
 
   527 print " "
   528 print "mins"
   529 print "\n"
-    * set *tmp164 null
   530 label *label63
   531 label *label59
   532 label *label57

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-64 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
    78 set :calc_charge_req:reactor reactor1
    79 set :calc_charge_req:time :t_startup1
    80 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
    84 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   85 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    86 set :calc_charge_req:reactor reactor3
    87 set :calc_charge_req:time :t_startup3
    88 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   89 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    90 set :calc_charge_req:reactor reactor4
    91 set :calc_charge_req:time :t_startup4
    92 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    94 set :calc_charge_req:reactor reactor5
    95 set :calc_charge_req:time :t_startup5
    96 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+   97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    98 set :start_reactor:reactor reactor1
    99 set :start_reactor:reactor_num 1
   100 set :start_reactor:emerg_shutdown :emerg_shutdown
   101 set :start_reactor:fuel_on :fuel_1
   102 set :start_reactor:t_startup :t_startup1
   103 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  104 set :fuel_1 :start_reactor*retval
   105 set :t_startup1 .RET_T_STARTUP
   106 set :update_fuel:fuel :fuel_1
   107 set :update_fuel:uld_in .ULD_IN_1
 
   113 set :start_reactor:fuel_on :fuel_2
   114 set :start_reactor:t_startup :t_startup2
   115 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  116 set :fuel_2 :start_reactor*retval
   117 set :t_startup2 .RET_T_STARTUP
   118 set :update_fuel:fuel :fuel_2
   119 set :update_fuel:uld_in .ULD_IN_2
 
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
   122 set :check_radar:unit .TOWER
   123 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  124 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   125 set :start_reactor:reactor reactor3
   126 set :start_reactor:reactor_num 3
   127 set :start_reactor:emerg_shutdown :emerg_shutdown
   128 set :start_reactor:fuel_on :fuel_3
   129 set :start_reactor:t_startup :t_startup3
   130 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  131 set :fuel_3 :start_reactor*retval
   132 set :t_startup3 .RET_T_STARTUP
   133 set :start_reactor:reactor reactor4
   134 set :start_reactor:reactor_num 4
 
   136 set :start_reactor:fuel_on :fuel_4
   137 set :start_reactor:t_startup :t_startup4
   138 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  139 set :fuel_4 :start_reactor*retval
   140 set :t_startup4 .RET_T_STARTUP
   141 set :start_reactor:reactor reactor5
   142 set :start_reactor:reactor_num 5
 
   144 set :start_reactor:fuel_on :fuel_5
   145 set :start_reactor:t_startup :t_startup5
   146 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  147 set :fuel_5 :start_reactor*retval
   148 set :t_startup5 .RET_T_STARTUP
   149 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  150 op or :fuel_many *tmp27 :fuel_5
   151 set :update_fuel:fuel :fuel_many
   152 set :update_fuel:uld_in .ULD_IN_MANY
   153 set :update_fuel:uld_out .ULD_OUT_MANY
 
   158 set :throttle_blast:reactors_fueled *tmp31
   159 set :throttle_blast:emerg_shutdown :emerg_shutdown
   160 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  161 op floor :throttle_blast:charge *tmp33
   162 sensor *tmp35 .NODE @powerNetIn
   163 sensor *tmp36 .NODE @powerNetOut
   164 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  165 op floor :throttle_blast:surplus *tmp37
+  166 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   167 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   168 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   169 op land *tmp42 *tmp40 *tmp41
 
   210 print "n"
   211 label *label19
   212 label *label15
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  213 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   214 jump *label13 always
   215 set *tmp32 null
   216 label *label13
 
   226 # "Function: def diff_generators()"
   227 sensor *tmp53 .NODE @powerNetStored
   228 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  229 op div :diff_generators:stored_pc *tmp53 *tmp54
   230 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   231 op lessThan *tmp57 .START_POWER_REQ 10
   232 op land *tmp58 *tmp56 *tmp57
 
   243 label *label22
   244 set :kilo:val .AVG_SURPLUS
   245 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  246 set :surplus :kilo*retval
+  247 sensor :kilo:val .NODE @powerNetStored
   248 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  249 set :charge :kilo*retval
   250 op greaterThan *tmp67 .START_POWER_REQ 0
   251 jump *label25 equal *tmp67 false
   252 set :kilo:val .START_POWER_REQ
   253 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  254 set :req :kilo*retval
   255 print "Req "
   256 print :req
   257 print "kJ / "
 
   271 # "Function: def update_reactors_desired()"
   272 sensor *tmp71 .NODE @powerNetStored
   273 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  274 op div :update_reactors_desired:stored *tmp71 *tmp72
   275 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   276 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   277 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   294 jump *label32 equal *tmp84 false
   295 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   296 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  297 op max :update_reactors_desired:needed 1 *tmp87
   298 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  299 op min .REACTORS_DESIRED 5 *tmp89
   300 jump *label33 always
   301 label *label32
   302 label *label33
 
   319 label *label0
   320 # "Function: def kilo(in val)"
   321 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  322 op div :kilo*retval *tmp93 10
   323 jump *label36 always
   324 set :kilo*retval null
   325 label *label36
 
   350 label *label2
   351 # "Function: def calc_charge_req(in reactor, in time)"
   352 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  353 op idiv :calc_charge_req:secs *tmp102 60
   354 op greaterThan *tmp104 :calc_charge_req:secs 30
   355 sensor *tmp105 :calc_charge_req:reactor @enabled
   356 op equal *tmp106 *tmp105 false
 
   361 jump *label44 always
   362 label *label43
   363 label *label44
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  364 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   365 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   366 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  367 op floor :calc_charge_req:charge_req *tmp111
   368 set :calc_charge_req*retval :calc_charge_req:charge_req
   369 jump *label42 always
   370 set :calc_charge_req*retval null
 
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :start_reactor:t_startup
   377 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  378 op idiv :start_reactor:secs *tmp113 60
+  379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   380 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  381 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   383 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  384 op floor :start_reactor:charge *tmp118
   385 sensor *tmp120 .NODE @powerNetIn
   386 sensor *tmp121 .NODE @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  388 op floor :start_reactor:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   393 print "#"
   394 print :start_reactor:reactor_num
   395 print " "
   396 print "- "
   397 jump *label46 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  398 control enabled :start_reactor:reactor false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor:supply_fuel false
 
   404 jump *label48 equal :start_reactor:enabled false
   405 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   406 jump *label50 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  407 control enabled :start_reactor:reactor false
   408 print "STOP unwanted"
   409 print "\n"
   410 jump *label51 always
 
   414 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   415 op land *tmp139 *tmp136 *tmp138
   416 jump *label52 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  417 control enabled :start_reactor:reactor false
   418 print "STOP system fuel low"
   419 print "\n"
   420 jump *label53 always
   421 label *label52
   422 op lessThanEq *tmp143 :start_reactor:fuel 1
   423 jump *label54 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  424 control enabled :start_reactor:reactor false
   425 print "STOP fuel low"
   426 print "\n"
   427 jump *label55 always
   428 label *label54
   429 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   430 jump *label56 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  431 control enabled :start_reactor:reactor false
   432 print "STOP out of cryo"
   433 print "\n"
   434 jump *label57 always
 
   444 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   445 op land *tmp156 *tmp154 *tmp155
   446 jump *label60 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  447 control enabled :start_reactor:reactor false
   448 print "START FAIL battery"
   449 print "\n"
   450 set :start_reactor:supply_fuel false
   451 jump *label61 always
   452 label *label60
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  453 op sub :start_reactor:time_left 30 :start_reactor:secs
   454 print "Starting "
   455 print :start_reactor:time_left
   456 print " "
 
   465 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   466 op land *tmp163 *tmp161 *tmp162
   467 jump *label62 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  468 control enabled :start_reactor:reactor false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor:supply_fuel false
   472 jump *label63 always
   473 label *label62
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  474 op idiv :start_reactor:mins :start_reactor:secs 6
+  475 op div :start_reactor:mins :start_reactor:mins 10
   476 print "RUN "
   477 print :start_reactor:mins
   478 print " "
 
   489 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   490 op sub *tmp170 *tmp169 .PWR_ABORT
   491 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  492 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   493 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  494 op max :start_reactor:flow_units -0.1 *tmp173
   495 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  496 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   497 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   498 jump *label64 equal *tmp177 false
   499 print "IDLE"
 
   506 jump *label66 equal *tmp180 false
   507 op mul *tmp182 :start_reactor:flow_units 1000
   508 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  509 op div :start_reactor:flow *tmp183 10
   510 op mul *tmp185 :start_reactor:charge_units 1000
   511 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  512 op div :start_reactor:charge *tmp186 10
   513 print "WAIT power. (%"
   514 print :start_reactor:charge
   515 print "J + %"
 
   550 print "STARTUP"
   551 print "\n"
   552 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  553 control enabled :start_reactor:reactor true
   554 label *label75
   555 label *label73
   556 label *label69
 
   561 sensor *tmp201 :start_reactor:reactor @enabled
   562 op notEqual *tmp202 :start_reactor:enabled *tmp201
   563 jump *label76 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  564 set .RET_T_STARTUP @tick
   565 jump *label77 always
   566 label *label76
   567 label *label77
 
   573 end
   574 label *label4
   575 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  576 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   577 op notEqual *tmp206 :check_radar:enemy_found null
   578 jump *label79 equal *tmp206 false
   579 control enabled projector1 true
   580 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  581 control config .ULD_IN_1 .FUEL_OFF
+  582 control config .ULD_OUT_1 .FUEL
+  583 control config .ULD_IN_2 .FUEL_OFF
+  584 control config .ULD_OUT_2 .FUEL
+  585 control config .ULD_IN_MANY .FUEL_OFF
+  586 control config .ULD_OUT_MANY .FUEL
+  587 control config .ULD_MIXER .FUEL_OFF
   588 control enabled reactor1 false
   589 control enabled reactor2 false
   590 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   185 label *label17
   186 jump *label15 always
   187 label *label14
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label18 equal *tmp46 false
+  188 jump *label18 notEqual :throttle_blast:reactors_fueled false
   189 set :throttle_blast:limit .FUEL_LIMIT_LOW
   190 print "Fuel "
   191 print :throttle_blast:fuel_stored
 
   244 sensor :kilo:val .NODE @powerNetStored
   245 call *label0 :kilo*retaddr :kilo*retval
   246 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label25 equal *tmp67 false
+  247 jump *label25 lessThanEq .START_POWER_REQ 0
   248 set :kilo:val .START_POWER_REQ
   249 call *label0 :kilo*retaddr :kilo*retval
   250 set :req :kilo*retval
 
   273 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   274 op land *tmp77 *tmp74 *tmp76
   275 jump *label28 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label30 equal *tmp79 false
+  276 jump *label30 lessThanEq .REACTORS_DESIRED 2
   277 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   278 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   279 jump *label31 always
 
   297 label *label33
   298 label *label27
   299 label *label26
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label34 equal *tmp91 false
+  300 jump *label34 equal .REACTORS_DESIRED 5
   301 print "Require only "
   302 print .REACTORS_DESIRED
   303 print "/5 reactors."
 
   330 label *label39
   331 control config *tmp95 *tmp97
   332 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label40 equal *tmp100 false
+  333 jump *label40 notEqual :update_fuel:fuel false
   334 set *tmp101 .FUEL
   335 jump *label41 always
   336 label *label40
 
   395 jump *label47 always
   396 label *label46
   397 jump *label48 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label50 equal *tmp132 false
+  398 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   399 control enabled :start_reactor:reactor false
   400 print "STOP unwanted"
   401 print "\n"
 
   411 print "\n"
   412 jump *label53 always
   413 label *label52
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label54 equal *tmp143 false
+  414 jump *label54 greaterThan :start_reactor:fuel 1
   415 control enabled :start_reactor:reactor false
   416 print "STOP fuel low"
   417 print "\n"
   418 jump *label55 always
   419 label *label54
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label56 equal *tmp147 false
+  420 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   421 control enabled :start_reactor:reactor false
   422 print "STOP out of cryo"
   423 print "\n"
   424 jump *label57 always
   425 label *label56
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label58 equal *tmp151 false
+  426 jump *label58 greaterThanEq :start_reactor:secs 30
   427 set :calc_charge_req:reactor :start_reactor:reactor
   428 set :calc_charge_req:time :start_reactor:t_startup
   429 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
   483 op max :start_reactor:flow_units -0.1 *tmp173
   484 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   485 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label64 equal *tmp177 false
+  486 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   487 print "IDLE"
   488 print "\n"
   489 set :start_reactor:supply_fuel false
   490 jump *label65 always
   491 label *label64
   492 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label66 equal *tmp180 false
+  493 jump *label66 greaterThanEq *tmp179 1
   494 op mul *tmp182 :start_reactor:flow_units 1000
   495 op floor *tmp183 *tmp182
   496 op div :start_reactor:flow *tmp183 10
 
   510 op land *tmp189 :start_reactor:fuel_on *tmp188
   511 jump *label68 equal *tmp189 false
   512 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label70 equal *tmp192 false
+  513 jump *label70 lessThanEq *tmp191 .FUEL_REQ
   514 print "WAIT fuel"
   515 print "\n"
   516 jump *label71 always
 
   521 jump *label69 always
   522 label *label68
   523 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label72 equal *tmp195 false
+  524 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
   525 print "WAIT buffer fuel"
   526 print "\n"
   527 jump *label73 always
   528 label *label72
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label74 equal *tmp197 false
+  529 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   530 print "WAIT cryo"
   531 print "\n"
   532 jump *label75 always
 
   543 label *label49
   544 label *label47
   545 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label76 equal *tmp202 false
+  546 jump *label76 equal :start_reactor:enabled *tmp201
   547 set .RET_T_STARTUP @tick
   548 jump *label77 always
   549 label *label76
 
   557 label *label4
   558 # "Function: def check_radar(in unit)"
   559 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label79 equal *tmp206 false
+  560 jump *label79 equal :check_radar:enemy_found null
   561 control enabled projector1 true
   562 control enabled projector2 true
   563 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   275 jump *label30 lessThanEq .REACTORS_DESIRED 2
   276 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   277 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label31 always
   278 label *label30
   279 label *label31
-    * jump *label29 always
   280 label *label28
   281 label *label29
   282 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   289 op max :update_reactors_desired:needed 1 *tmp87
   290 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   291 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label33 always
   292 label *label32
   293 label *label33
   294 label *label27
 
   298 print .REACTORS_DESIRED
   299 print "/5 reactors."
   300 print "\n"
-    * jump *label35 always
   301 label *label34
   302 label *label35
   303 printflush message1
 
   346 jump *label43 equal *tmp107 false
   347 set :calc_charge_req*retval 0
   348 jump *label42 always
-    * jump *label44 always
   349 label *label43
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   539 sensor *tmp201 :start_reactor:reactor @enabled
   540 jump *label76 equal :start_reactor:enabled *tmp201
   541 set .RET_T_STARTUP @tick
-    * jump *label77 always
   542 label *label76
   543 label *label77
   544 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   352 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  353 op idiv :calc_charge_req:charge_req *tmp110 0.04
   354 set :calc_charge_req*retval :calc_charge_req:charge_req
   355 jump *label42 always
   356 set :calc_charge_req*retval null
 
   484 label *label64
   485 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   486 jump *label66 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  487 op idiv *tmp183 :start_reactor:flow_units 0.001
   488 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  489 op idiv *tmp186 :start_reactor:charge_units 0.001
   490 op div :start_reactor:charge *tmp186 10
   491 print "WAIT power. (%"
   492 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   143 set :fuel_5 :start_reactor*retval
   144 set :t_startup5 .RET_T_STARTUP
   145 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  146 op or :fuel_many *tmp27 :start_reactor*retval
   147 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  148 set :update_fuel:uld_in unloader5
+  149 set :update_fuel:uld_out unloader6
   150 call *label1 :update_fuel*retaddr :update_fuel*retval
   151 op or *tmp30 :fuel_1 :fuel_2
   152 op or *tmp31 *tmp30 :fuel_many
   153 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   154 set :throttle_blast:reactors_fueled *tmp31
   155 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  156 sensor *tmp33 node1 @powerNetStored
   157 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  158 sensor *tmp35 node1 @powerNetIn
+  159 sensor *tmp36 node1 @powerNetOut
   160 op sub *tmp37 *tmp35 *tmp36
   161 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  162 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  163 op lessThan *tmp40 :throttle_blast:charge 5000
+  164 op lessThan *tmp41 :throttle_blast:surplus -500
   165 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  166 op or *tmp43 *tmp42 :emerg_shutdown
   167 jump *label14 equal *tmp43 false
   168 set :throttle_blast:limit 0
   169 print "Central Fuel at "
   170 print :throttle_blast:fuel_stored
   171 print " "
   172 print "/ "
-    * print :throttle_blast:limit
+  173 print 0
   174 print " "
   175 print "- "
-    * jump *label16 equal :throttle_blast:emerg_shutdown false
+  176 jump *label16 equal :emerg_shutdown false
   177 print " Enemies detected."
   178 print "\n"
   179 jump *label17 always
 
   183 label *label17
   184 jump *label15 always
   185 label *label14
-    * jump *label18 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  186 jump *label18 notEqual *tmp31 false
+  187 set :throttle_blast:limit 150
   188 print "Fuel "
   189 print :throttle_blast:fuel_stored
   190 print " "
   191 print "/ "
-    * print :throttle_blast:limit
+  192 print .FUEL_LIMIT_LOW
   193 print " "
   194 print "(due to emergency)"
   195 print "\n"
   196 jump *label19 always
   197 label *label18
-    * set :throttle_blast:limit .FUEL_LIMIT
+  198 set :throttle_blast:limit 800
   199 print "Fuel "
   200 print :throttle_blast:fuel_stored
   201 print " "
   202 print "/ "
-    * print :throttle_blast:limit
+  203 print .FUEL_LIMIT
   204 print "\"
   205 print "n"
   206 label *label19
   207 label *label15
   208 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   209 jump *label13 always
-    * set *tmp32 null
   210 label *label13
   211 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label20 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  212 set *tmp49 unloader7
+  213 jump *label20 equal *tmp32 false
+  214 set *tmp51 @pyratite
   215 jump *label21 always
   216 label *label20
-    * set *tmp51 .FUEL_OFF
+  217 set *tmp51 @scrap
   218 label *label21
-    * control config *tmp49 *tmp51
+  219 control config .ULD_MIXER *tmp51
   220 # "Function: def diff_generators()"
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  221 sensor *tmp53 node1 @powerNetStored
+  222 sensor *tmp54 node1 @powerNetCapacity
   223 op div :diff_generators:stored_pc *tmp53 *tmp54
   224 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   225 op lessThan *tmp57 .START_POWER_REQ 10
 
   238 set :kilo:val .AVG_SURPLUS
   239 call *label0 :kilo*retaddr :kilo*retval
   240 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  241 sensor :kilo:val node1 @powerNetStored
   242 call *label0 :kilo*retaddr :kilo*retval
   243 set :charge :kilo*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
 
   246 call *label0 :kilo*retaddr :kilo*retval
   247 set :req :kilo*retval
   248 print "Req "
-    * print :req
+  249 print :kilo*retval
   250 print "kJ / "
   251 print :charge
   252 print "kJ. "
 
   258 print "Power "
   259 print :surplus
   260 print "kW, "
-    * print :charge
+  261 print :kilo*retval
   262 print "kJ"
   263 print "\n"
   264 # "Function: def update_reactors_desired()"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  265 sensor *tmp71 node1 @powerNetStored
+  266 sensor *tmp72 node1 @powerNetCapacity
   267 op div :update_reactors_desired:stored *tmp71 *tmp72
   268 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  269 op add *tmp75 6500 10000
+  270 op greaterThan *tmp76 .AVG_SURPLUS 16500
   271 op land *tmp77 *tmp74 *tmp76
   272 jump *label28 equal *tmp77 false
   273 jump *label30 lessThanEq .REACTORS_DESIRED 2
   274 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  275 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   276 label *label30
   277 label *label31
   278 label *label28
   279 label *label29
   280 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  281 op mul *tmp82 10000 0.8
+  282 op lessThan *tmp83 .AVG_SURPLUS 8000
   283 op land *tmp84 *tmp81 *tmp83
   284 jump *label32 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  285 op sub *tmp86 .AVG_SURPLUS 10000
+  286 op idiv *tmp87 *tmp86 6500
   287 op max :update_reactors_desired:needed 1 *tmp87
   288 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   289 op min .REACTORS_DESIRED 5 *tmp89
 
   308 op idiv *tmp93 :kilo:val 100
   309 op div :kilo*retval *tmp93 10
   310 jump *label36 always
-    * set :kilo*retval null
   311 label *label36
   312 return :kilo*retaddr
   313 end
 
   320 label *label38
   321 set *tmp97 .FUEL_OFF
   322 label *label39
-    * control config *tmp95 *tmp97
+  323 control config :update_fuel:uld_in *tmp97
   324 set *tmp98 :update_fuel:uld_out
   325 jump *label40 notEqual :update_fuel:fuel false
   326 set *tmp101 .FUEL
 
   328 label *label40
   329 set *tmp101 .FUEL_OFF
   330 label *label41
-    * control config *tmp98 *tmp101
+  331 control config :update_fuel:uld_out *tmp101
   332 label *label37
   333 return :update_fuel*retaddr
   334 end
 
   350 op idiv :calc_charge_req:charge_req *tmp110 0.04
   351 set :calc_charge_req*retval :calc_charge_req:charge_req
   352 jump *label42 always
-    * set :calc_charge_req*retval null
   353 label *label42
   354 return :calc_charge_req*retaddr
   355 end
 
   417 set :calc_charge_req:time :start_reactor:t_startup
   418 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   419 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  420 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   421 op lessThan *tmp154 *tmp153 .PWR_ABORT
   422 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   423 op land *tmp156 *tmp154 *tmp155
 
   433 print :start_reactor:time_left
   434 print " "
   435 print "secs, req "
-    * print :start_reactor:charge_req
+  436 print :calc_charge_req*retval
   437 print "J"
   438 print "\n"
   439 label *label61
 
   536 label *label77
   537 set :start_reactor*retval :start_reactor:supply_fuel
   538 jump *label45 always
-    * set :start_reactor*retval null
   539 label *label45
   540 return :start_reactor*retaddr
   541 end
 
   559 control enabled reactor5 false
   560 set :check_radar*retval true
   561 jump *label78 always
-    * set *tmp207 null
   562 jump *label80 always
   563 label *label79
   564 control enabled projector1 false
   565 control enabled projector2 false
   566 set :check_radar*retval false
   567 jump *label78 always
-    * set *tmp207 null
   568 label *label80
-    * set :check_radar*retval *tmp207
+  569 set :check_radar*retval null
   570 label *label78
   571 return :check_radar*retaddr
   572 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    53 # "Function: def check_manual_shutdown()"
    54 op notEqual *tmp9 switch1 null
    55 sensor *tmp10 switch1 @enabled
 
   146 op or *tmp30 :fuel_1 :fuel_2
   147 op or *tmp31 *tmp30 :fuel_many
   148 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp31
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   149 sensor *tmp33 node1 @powerNetStored
   150 op floor :throttle_blast:charge *tmp33
   151 sensor *tmp35 node1 @powerNetIn
 
   182 print :throttle_blast:fuel_stored
   183 print " "
   184 print "/ "
-    * print .FUEL_LIMIT_LOW
+  185 print 150
   186 print " "
   187 print "(due to emergency)"
   188 print "\n"
 
   193 print :throttle_blast:fuel_stored
   194 print " "
   195 print "/ "
-    * print .FUEL_LIMIT
+  196 print 800
   197 print "\"
   198 print "n"
   199 label *label19
 
   201 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   202 jump *label13 always
   203 label *label13
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   204 jump *label20 equal *tmp32 false
   205 set *tmp51 @pyratite
   206 jump *label21 always
   207 label *label20
   208 set *tmp51 @scrap
   209 label *label21
-    * control config .ULD_MIXER *tmp51
+  210 control config unloader7 *tmp51
   211 # "Function: def diff_generators()"
   212 sensor *tmp53 node1 @powerNetStored
   213 sensor *tmp54 node1 @powerNetCapacity
 
   235 jump *label25 lessThanEq .START_POWER_REQ 0
   236 set :kilo:val .START_POWER_REQ
   237 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   238 print "Req "
   239 print :kilo*retval
   240 print "kJ / "
 
   256 sensor *tmp72 node1 @powerNetCapacity
   257 op div :update_reactors_desired:stored *tmp71 *tmp72
   258 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   259 op greaterThan *tmp76 .AVG_SURPLUS 16500
   260 op land *tmp77 *tmp74 *tmp76
   261 jump *label28 equal *tmp77 false
 
   267 label *label28
   268 label *label29
   269 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   270 op lessThan *tmp83 .AVG_SURPLUS 8000
   271 op land *tmp84 *tmp81 *tmp83
   272 jump *label32 equal *tmp84 false
 
   301 end
   302 label *label1
   303 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp95 :update_fuel:uld_in
   304 jump *label38 equal :update_fuel:fuel false
   305 set *tmp97 .FUEL
   306 jump *label39 always
 
   308 set *tmp97 .FUEL_OFF
   309 label *label39
   310 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   311 jump *label40 notEqual :update_fuel:fuel false
   312 set *tmp101 .FUEL
   313 jump *label41 always
 
   402 set :calc_charge_req:reactor :start_reactor:reactor
   403 set :calc_charge_req:time :start_reactor:t_startup
   404 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   405 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   406 op lessThan *tmp154 *tmp153 .PWR_ABORT
   407 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   551 set :check_radar*retval false
   552 jump *label78 always
   553 label *label80
-    * set :check_radar*retval null
   554 label *label78
   555 return :check_radar*retaddr
   556 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   199 jump *label13 always
   200 label *label13
   201 jump *label20 equal *tmp32 false
-    * set *tmp51 @pyratite
+  202 control config unloader7 @pyratite
   203 jump *label21 always
   204 label *label20
-    * set *tmp51 @scrap
+  205 control config unloader7 @scrap
   206 label *label21
-    * control config unloader7 *tmp51
   207 # "Function: def diff_generators()"
   208 sensor *tmp53 node1 @powerNetStored
   209 sensor *tmp54 node1 @powerNetCapacity
 
   298 label *label1
   299 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   300 jump *label38 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
+  301 control config :update_fuel:uld_in .FUEL
   302 jump *label39 always
   303 label *label38
-    * set *tmp97 .FUEL_OFF
+  304 control config :update_fuel:uld_in .FUEL_OFF
   305 label *label39
-    * control config :update_fuel:uld_in *tmp97
   306 jump *label40 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
+  307 control config :update_fuel:uld_out .FUEL
   308 jump *label41 always
   309 label *label40
-    * set *tmp101 .FUEL_OFF
+  310 control config :update_fuel:uld_out .FUEL_OFF
   311 label *label41
-    * control config :update_fuel:uld_out *tmp101
   312 label *label37
   313 return :update_fuel*retaddr
   314 end

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   223 label *label24
   224 label *label22
   225 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  226 label *label81
+  227 # "Function: def kilo(in val)"
+  228 op idiv *tmp93 :kilo:val 100
+  229 op div :kilo*retval *tmp93 10
+  230 jump *label82 always
+  231 label *label82
   232 set :surplus :kilo*retval
   233 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  234 label *label83
+  235 # "Function: def kilo(in val)"
+  236 op idiv *tmp93 :kilo:val 100
+  237 op div :kilo*retval *tmp93 10
+  238 jump *label84 always
+  239 label *label84
   240 set :charge :kilo*retval
   241 jump *label25 lessThanEq .START_POWER_REQ 0
   242 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  243 label *label85
+  244 # "Function: def kilo(in val)"
+  245 op idiv *tmp93 :kilo:val 100
+  246 op div :kilo*retval *tmp93 10
+  247 jump *label86 always
+  248 label *label86
   249 print "Req "
   250 print :kilo*retval
   251 print "kJ / "
 
   302 jump *label7 always
   303 label *label9
   304 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label36 always
-    * label *label36
-    * return :kilo*retaddr
-    * end
   305 label *label1
   306 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   307 jump *label38 equal :update_fuel:fuel false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   225 set :kilo:val .AVG_SURPLUS
   226 label *label81
   227 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  228 op idiv *tmp93 .AVG_SURPLUS 100
   229 op div :kilo*retval *tmp93 10
   230 jump *label82 always
   231 label *label82
 
   242 set :kilo:val .START_POWER_REQ
   243 label *label85
   244 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  245 op idiv *tmp93 .START_POWER_REQ 100
   246 op div :kilo*retval *tmp93 10
   247 jump *label86 always
   248 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   222 control enabled generator2 true
   223 label *label24
   224 label *label22
-    * set :kilo:val .AVG_SURPLUS
   225 label *label81
   226 # "Function: def kilo(in val)"
   227 op idiv *tmp93 .AVG_SURPLUS 100
 
   238 label *label84
   239 set :charge :kilo*retval
   240 jump *label25 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   241 label *label85
   242 # "Function: def kilo(in val)"
   243 op idiv *tmp93 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1 (+8 instructions):
 
    94 set :update_fuel:fuel :start_reactor*retval
    95 set :update_fuel:uld_in unloader1
    96 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   97 label *label87
+   98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   99 jump *label88 equal :update_fuel:fuel false
+  100 control config :update_fuel:uld_in .FUEL
+  101 jump *label89 always
+  102 label *label88
+  103 control config :update_fuel:uld_in .FUEL_OFF
+  104 label *label89
+  105 jump *label90 notEqual :update_fuel:fuel false
+  106 control config :update_fuel:uld_out .FUEL
+  107 jump *label91 always
+  108 label *label90
+  109 control config :update_fuel:uld_out .FUEL_OFF
+  110 label *label91
+  111 label *label92
   112 set :start_reactor:reactor reactor2
   113 set :start_reactor:reactor_num 2
   114 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   120 set :update_fuel:fuel :start_reactor*retval
   121 set :update_fuel:uld_in unloader3
   122 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  123 label *label93
+  124 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  125 jump *label94 equal :update_fuel:fuel false
+  126 control config :update_fuel:uld_in .FUEL
+  127 jump *label95 always
+  128 label *label94
+  129 control config :update_fuel:uld_in .FUEL_OFF
+  130 label *label95
+  131 jump *label96 notEqual :update_fuel:fuel false
+  132 control config :update_fuel:uld_out .FUEL
+  133 jump *label97 always
+  134 label *label96
+  135 control config :update_fuel:uld_out .FUEL_OFF
+  136 label *label97
+  137 label *label98
   138 set :check_radar:unit cyclone1
   139 call *label4 :check_radar*retaddr :check_radar*retval
   140 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   167 set :update_fuel:fuel :fuel_many
   168 set :update_fuel:uld_in unloader5
   169 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  170 label *label99
+  171 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  172 jump *label100 equal :update_fuel:fuel false
+  173 control config :update_fuel:uld_in .FUEL
+  174 jump *label101 always
+  175 label *label100
+  176 control config :update_fuel:uld_in .FUEL_OFF
+  177 label *label101
+  178 jump *label102 notEqual :update_fuel:fuel false
+  179 control config :update_fuel:uld_out .FUEL
+  180 jump *label103 always
+  181 label *label102
+  182 control config :update_fuel:uld_out .FUEL_OFF
+  183 label *label103
+  184 label *label104
   185 op or *tmp30 :fuel_1 :fuel_2
   186 op or *tmp31 *tmp30 :fuel_many
   187 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   342 jump *label7 always
   343 label *label9
   344 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label38 equal :update_fuel:fuel false
-    * control config :update_fuel:uld_in .FUEL
-    * jump *label39 always
-    * label *label38
-    * control config :update_fuel:uld_in .FUEL_OFF
-    * label *label39
-    * jump *label40 notEqual :update_fuel:fuel false
-    * control config :update_fuel:uld_out .FUEL
-    * jump *label41 always
-    * label *label40
-    * control config :update_fuel:uld_out .FUEL_OFF
-    * label *label41
-    * label *label37
-    * return :update_fuel*retaddr
-    * end
   345 label *label2
   346 # "Function: def calc_charge_req(in reactor, in time)"
   347 op sub *tmp102 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    96 set :update_fuel:uld_out unloader2
    97 label *label87
    98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label88 equal :update_fuel:fuel false
-    * control config :update_fuel:uld_in .FUEL
+   99 jump *label88 equal :start_reactor*retval false
+  100 control config unloader1 @blast-compound
   101 jump *label89 always
   102 label *label88
-    * control config :update_fuel:uld_in .FUEL_OFF
+  103 control config unloader1 @scrap
   104 label *label89
-    * jump *label90 notEqual :update_fuel:fuel false
-    * control config :update_fuel:uld_out .FUEL
+  105 jump *label90 notEqual :start_reactor*retval false
+  106 control config unloader2 @blast-compound
   107 jump *label91 always
   108 label *label90
-    * control config :update_fuel:uld_out .FUEL_OFF
+  109 control config unloader2 @scrap
   110 label *label91
   111 label *label92
   112 set :start_reactor:reactor reactor2
 
   122 set :update_fuel:uld_out unloader4
   123 label *label93
   124 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label94 equal :update_fuel:fuel false
-    * control config :update_fuel:uld_in .FUEL
+  125 jump *label94 equal :start_reactor*retval false
+  126 control config unloader3 @blast-compound
   127 jump *label95 always
   128 label *label94
-    * control config :update_fuel:uld_in .FUEL_OFF
+  129 control config unloader3 @scrap
   130 label *label95
-    * jump *label96 notEqual :update_fuel:fuel false
-    * control config :update_fuel:uld_out .FUEL
+  131 jump *label96 notEqual :start_reactor*retval false
+  132 control config unloader4 @blast-compound
   133 jump *label97 always
   134 label *label96
-    * control config :update_fuel:uld_out .FUEL_OFF
+  135 control config unloader4 @scrap
   136 label *label97
   137 label *label98
   138 set :check_radar:unit cyclone1
 
   169 set :update_fuel:uld_out unloader6
   170 label *label99
   171 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label100 equal :update_fuel:fuel false
-    * control config :update_fuel:uld_in .FUEL
+  172 jump *label100 equal :fuel_many false
+  173 control config unloader5 @blast-compound
   174 jump *label101 always
   175 label *label100
-    * control config :update_fuel:uld_in .FUEL_OFF
+  176 control config unloader5 @scrap
   177 label *label101
-    * jump *label102 notEqual :update_fuel:fuel false
-    * control config :update_fuel:uld_out .FUEL
+  178 jump *label102 notEqual :fuel_many false
+  179 control config unloader6 @blast-compound
   180 jump *label103 always
   181 label *label102
-    * control config :update_fuel:uld_out .FUEL_OFF
+  182 control config unloader6 @scrap
   183 label *label103
   184 label *label104
   185 op or *tmp30 :fuel_1 :fuel_2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    91 call *label3 :start_reactor*retaddr :start_reactor*retval
    92 set :fuel_1 :start_reactor*retval
    93 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
    94 label *label87
    95 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    96 jump *label88 equal :start_reactor*retval false
 
   114 call *label3 :start_reactor*retaddr :start_reactor*retval
   115 set :fuel_2 :start_reactor*retval
   116 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   117 label *label93
   118 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   119 jump *label94 equal :start_reactor*retval false
 
   158 set :t_startup5 .RET_T_STARTUP
   159 op or *tmp27 :fuel_3 :fuel_4
   160 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   161 label *label99
   162 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   163 jump *label100 equal :fuel_many false

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    46 set .CONTAINER vault1
    47 set .NODE node1
    48 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   49 label *label105
+   50 # "Function: def check_radar(in unit)"
+   51 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   52 jump *label106 equal :check_radar:enemy_found null
+   53 control enabled projector1 true
+   54 control enabled projector2 true
+   55 control config .ULD_IN_1 .FUEL_OFF
+   56 control config .ULD_OUT_1 .FUEL
+   57 control config .ULD_IN_2 .FUEL_OFF
+   58 control config .ULD_OUT_2 .FUEL
+   59 control config .ULD_IN_MANY .FUEL_OFF
+   60 control config .ULD_OUT_MANY .FUEL
+   61 control config .ULD_MIXER .FUEL_OFF
+   62 control enabled reactor1 false
+   63 control enabled reactor2 false
+   64 control enabled reactor3 false
+   65 control enabled reactor4 false
+   66 control enabled reactor5 false
+   67 set :check_radar*retval true
+   68 jump *label108 always
+   69 jump *label107 always
+   70 label *label106
+   71 control enabled projector1 false
+   72 control enabled projector2 false
+   73 set :check_radar*retval false
+   74 jump *label108 always
+   75 label *label107
+   76 label *label108
    77 # "Function: def check_manual_shutdown()"
    78 op notEqual *tmp9 switch1 null
    79 sensor *tmp10 switch1 @enabled
 
   157 label *label97
   158 label *label98
   159 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  160 label *label109
+  161 # "Function: def check_radar(in unit)"
+  162 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  163 jump *label110 equal :check_radar:enemy_found null
+  164 control enabled projector1 true
+  165 control enabled projector2 true
+  166 control config .ULD_IN_1 .FUEL_OFF
+  167 control config .ULD_OUT_1 .FUEL
+  168 control config .ULD_IN_2 .FUEL_OFF
+  169 control config .ULD_OUT_2 .FUEL
+  170 control config .ULD_IN_MANY .FUEL_OFF
+  171 control config .ULD_OUT_MANY .FUEL
+  172 control config .ULD_MIXER .FUEL_OFF
+  173 control enabled reactor1 false
+  174 control enabled reactor2 false
+  175 control enabled reactor3 false
+  176 control enabled reactor4 false
+  177 control enabled reactor5 false
+  178 set :check_radar*retval true
+  179 jump *label112 always
+  180 jump *label111 always
+  181 label *label110
+  182 control enabled projector1 false
+  183 control enabled projector2 false
+  184 set :check_radar*retval false
+  185 jump *label112 always
+  186 label *label111
+  187 label *label112
   188 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   189 set :start_reactor:reactor reactor3
   190 set :start_reactor:reactor_num 3
 
   593 label *label45
   594 return :start_reactor*retaddr
   595 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label79 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label78 always
-    * jump *label80 always
-    * label *label79
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label78 always
-    * label *label80
-    * label *label78
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    48 set :check_radar:unit cyclone1
    49 label *label105
    50 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   51 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    52 jump *label106 equal :check_radar:enemy_found null
    53 control enabled projector1 true
    54 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   55 control config unloader1 @scrap
+   56 control config unloader2 @blast-compound
+   57 control config unloader3 @scrap
+   58 control config unloader4 @blast-compound
+   59 control config unloader5 @scrap
+   60 control config unloader6 @blast-compound
+   61 control config unloader7 @scrap
    62 control enabled reactor1 false
    63 control enabled reactor2 false
    64 control enabled reactor3 false
 
   159 set :check_radar:unit cyclone1
   160 label *label109
   161 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  162 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   163 jump *label110 equal :check_radar:enemy_found null
   164 control enabled projector1 true
   165 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  166 control config unloader1 @scrap
+  167 control config unloader2 @blast-compound
+  168 control config unloader3 @scrap
+  169 control config unloader4 @blast-compound
+  170 control config unloader5 @scrap
+  171 control config unloader6 @blast-compound
+  172 control config unloader7 @scrap
   173 control enabled reactor1 false
   174 control enabled reactor2 false
   175 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    37 set .CONTAINER vault1
    38 set .NODE node1
-    * set :check_radar:unit cyclone1
    39 label *label105
    40 # "Function: def check_radar(in unit)"
    41 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   146 control config unloader4 @scrap
   147 label *label97
   148 label *label98
-    * set :check_radar:unit cyclone1
   149 label *label109
   150 # "Function: def check_radar(in unit)"
   151 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    82 op or :emerg_shutdown :check_radar*retval *tmp8
    83 set :calc_charge_req:reactor reactor1
    84 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   85 label *label113
+   86 # "Function: def calc_charge_req(in reactor, in time)"
+   87 op sub *tmp102 @tick :calc_charge_req:time
+   88 op idiv :calc_charge_req:secs *tmp102 60
+   89 op greaterThan *tmp104 :calc_charge_req:secs 30
+   90 sensor *tmp105 :calc_charge_req:reactor @enabled
+   91 op equal *tmp106 *tmp105 false
+   92 op or *tmp107 *tmp104 *tmp106
+   93 jump *label114 equal *tmp107 false
+   94 set :calc_charge_req*retval 0
+   95 jump *label116 always
+   96 label *label114
+   97 label *label115
+   98 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   99 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  100 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  101 set :calc_charge_req*retval :calc_charge_req:charge_req
+  102 jump *label116 always
+  103 label *label116
   104 set .START_POWER_REQ :calc_charge_req*retval
   105 set :calc_charge_req:reactor reactor2
   106 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  107 label *label117
+  108 # "Function: def calc_charge_req(in reactor, in time)"
+  109 op sub *tmp102 @tick :calc_charge_req:time
+  110 op idiv :calc_charge_req:secs *tmp102 60
+  111 op greaterThan *tmp104 :calc_charge_req:secs 30
+  112 sensor *tmp105 :calc_charge_req:reactor @enabled
+  113 op equal *tmp106 *tmp105 false
+  114 op or *tmp107 *tmp104 *tmp106
+  115 jump *label118 equal *tmp107 false
+  116 set :calc_charge_req*retval 0
+  117 jump *label120 always
+  118 label *label118
+  119 label *label119
+  120 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  121 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  122 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  123 set :calc_charge_req*retval :calc_charge_req:charge_req
+  124 jump *label120 always
+  125 label *label120
   126 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   127 set :calc_charge_req:reactor reactor3
   128 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  129 label *label121
+  130 # "Function: def calc_charge_req(in reactor, in time)"
+  131 op sub *tmp102 @tick :calc_charge_req:time
+  132 op idiv :calc_charge_req:secs *tmp102 60
+  133 op greaterThan *tmp104 :calc_charge_req:secs 30
+  134 sensor *tmp105 :calc_charge_req:reactor @enabled
+  135 op equal *tmp106 *tmp105 false
+  136 op or *tmp107 *tmp104 *tmp106
+  137 jump *label122 equal *tmp107 false
+  138 set :calc_charge_req*retval 0
+  139 jump *label124 always
+  140 label *label122
+  141 label *label123
+  142 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  143 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  144 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  145 set :calc_charge_req*retval :calc_charge_req:charge_req
+  146 jump *label124 always
+  147 label *label124
   148 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   149 set :calc_charge_req:reactor reactor4
   150 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  151 label *label125
+  152 # "Function: def calc_charge_req(in reactor, in time)"
+  153 op sub *tmp102 @tick :calc_charge_req:time
+  154 op idiv :calc_charge_req:secs *tmp102 60
+  155 op greaterThan *tmp104 :calc_charge_req:secs 30
+  156 sensor *tmp105 :calc_charge_req:reactor @enabled
+  157 op equal *tmp106 *tmp105 false
+  158 op or *tmp107 *tmp104 *tmp106
+  159 jump *label126 equal *tmp107 false
+  160 set :calc_charge_req*retval 0
+  161 jump *label128 always
+  162 label *label126
+  163 label *label127
+  164 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  165 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  166 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  167 set :calc_charge_req*retval :calc_charge_req:charge_req
+  168 jump *label128 always
+  169 label *label128
   170 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   171 set :calc_charge_req:reactor reactor5
   172 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  173 label *label129
+  174 # "Function: def calc_charge_req(in reactor, in time)"
+  175 op sub *tmp102 @tick :calc_charge_req:time
+  176 op idiv :calc_charge_req:secs *tmp102 60
+  177 op greaterThan *tmp104 :calc_charge_req:secs 30
+  178 sensor *tmp105 :calc_charge_req:reactor @enabled
+  179 op equal *tmp106 *tmp105 false
+  180 op or *tmp107 *tmp104 *tmp106
+  181 jump *label130 equal *tmp107 false
+  182 set :calc_charge_req*retval 0
+  183 jump *label132 always
+  184 label *label130
+  185 label *label131
+  186 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  187 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  188 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  189 set :calc_charge_req*retval :calc_charge_req:charge_req
+  190 jump *label132 always
+  191 label *label132
   192 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   193 set :start_reactor:reactor reactor1
   194 set :start_reactor:reactor_num 1
 
   466 jump *label7 always
   467 label *label9
   468 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label43 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label42 always
-    * label *label43
-    * label *label44
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label42 always
-    * label *label42
-    * return :calc_charge_req*retaddr
-    * end
   469 label *label3
   470 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   471 set .RET_T_STARTUP :start_reactor:t_startup
 
   528 jump *label58 greaterThanEq :start_reactor:secs 30
   529 set :calc_charge_req:reactor :start_reactor:reactor
   530 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  531 label *label133
+  532 # "Function: def calc_charge_req(in reactor, in time)"
+  533 op sub *tmp102 @tick :calc_charge_req:time
+  534 op idiv :calc_charge_req:secs *tmp102 60
+  535 op greaterThan *tmp104 :calc_charge_req:secs 30
+  536 sensor *tmp105 :calc_charge_req:reactor @enabled
+  537 op equal *tmp106 *tmp105 false
+  538 op or *tmp107 *tmp104 *tmp106
+  539 jump *label134 equal *tmp107 false
+  540 set :calc_charge_req*retval 0
+  541 jump *label136 always
+  542 label *label134
+  543 label *label135
+  544 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  545 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  546 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  547 set :calc_charge_req*retval :calc_charge_req:charge_req
+  548 jump *label136 always
+  549 label *label136
   550 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   551 op lessThan *tmp154 *tmp153 .PWR_ABORT
   552 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    84 set :calc_charge_req:time :t_startup1
    85 label *label113
    86 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+   87 op sub *tmp102 @tick :t_startup1
    88 op idiv :calc_charge_req:secs *tmp102 60
    89 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+   90 sensor *tmp105 reactor1 @enabled
    91 op equal *tmp106 *tmp105 false
    92 op or *tmp107 *tmp104 *tmp106
    93 jump *label114 equal *tmp107 false
 
   106 set :calc_charge_req:time :t_startup2
   107 label *label117
   108 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  109 op sub *tmp102 @tick :t_startup2
   110 op idiv :calc_charge_req:secs *tmp102 60
   111 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  112 sensor *tmp105 reactor2 @enabled
   113 op equal *tmp106 *tmp105 false
   114 op or *tmp107 *tmp104 *tmp106
   115 jump *label118 equal *tmp107 false
 
   128 set :calc_charge_req:time :t_startup3
   129 label *label121
   130 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  131 op sub *tmp102 @tick :t_startup3
   132 op idiv :calc_charge_req:secs *tmp102 60
   133 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  134 sensor *tmp105 reactor3 @enabled
   135 op equal *tmp106 *tmp105 false
   136 op or *tmp107 *tmp104 *tmp106
   137 jump *label122 equal *tmp107 false
 
   150 set :calc_charge_req:time :t_startup4
   151 label *label125
   152 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  153 op sub *tmp102 @tick :t_startup4
   154 op idiv :calc_charge_req:secs *tmp102 60
   155 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  156 sensor *tmp105 reactor4 @enabled
   157 op equal *tmp106 *tmp105 false
   158 op or *tmp107 *tmp104 *tmp106
   159 jump *label126 equal *tmp107 false
 
   172 set :calc_charge_req:time :t_startup5
   173 label *label129
   174 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  175 op sub *tmp102 @tick :t_startup5
   176 op idiv :calc_charge_req:secs *tmp102 60
   177 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  178 sensor *tmp105 reactor5 @enabled
   179 op equal *tmp106 *tmp105 false
   180 op or *tmp107 *tmp104 *tmp106
   181 jump *label130 equal *tmp107 false
 
   530 set :calc_charge_req:time :start_reactor:t_startup
   531 label *label133
   532 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  533 op sub *tmp102 @tick :start_reactor:t_startup
   534 op idiv :calc_charge_req:secs *tmp102 60
   535 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  536 sensor *tmp105 :start_reactor:reactor @enabled
   537 op equal *tmp106 *tmp105 false
   538 op or *tmp107 *tmp104 *tmp106
   539 jump *label134 equal *tmp107 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    80 jump *label10 always
    81 label *label10
    82 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    83 label *label113
    84 # "Function: def calc_charge_req(in reactor, in time)"
    85 op sub *tmp102 @tick :t_startup1
 
   100 jump *label116 always
   101 label *label116
   102 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
   103 label *label117
   104 # "Function: def calc_charge_req(in reactor, in time)"
   105 op sub *tmp102 @tick :t_startup2
 
   120 jump *label120 always
   121 label *label120
   122 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   123 label *label121
   124 # "Function: def calc_charge_req(in reactor, in time)"
   125 op sub *tmp102 @tick :t_startup3
 
   140 jump *label124 always
   141 label *label124
   142 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   143 label *label125
   144 # "Function: def calc_charge_req(in reactor, in time)"
   145 op sub *tmp102 @tick :t_startup4
 
   160 jump *label128 always
   161 label *label128
   162 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   163 label *label129
   164 # "Function: def calc_charge_req(in reactor, in time)"
   165 op sub *tmp102 @tick :t_startup5
 
   516 jump *label57 always
   517 label *label56
   518 jump *label58 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   519 label *label133
   520 # "Function: def calc_charge_req(in reactor, in time)"
   521 op sub *tmp102 @tick :start_reactor:t_startup

Modifications by Inline function call at line 80:14 (+157 instructions):
 
   185 set :start_reactor:emerg_shutdown :emerg_shutdown
   186 set :start_reactor:fuel_on :fuel_1
   187 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  188 label *label137
+  189 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  190 set .RET_T_STARTUP :start_reactor:t_startup
+  191 op sub *tmp113 @tick :start_reactor:t_startup
+  192 op idiv :start_reactor:secs *tmp113 60
+  193 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  194 set :start_reactor:supply_fuel true
+  195 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  196 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  197 sensor *tmp118 .NODE @powerNetStored
+  198 op floor :start_reactor:charge *tmp118
+  199 sensor *tmp120 .NODE @powerNetIn
+  200 sensor *tmp121 .NODE @powerNetOut
+  201 op sub *tmp122 *tmp120 *tmp121
+  202 op floor :start_reactor:surplus *tmp122
+  203 op mul *tmp124 .AVG_SURPLUS 0.8
+  204 op mul *tmp125 :start_reactor:surplus 0.2
+  205 op add .AVG_SURPLUS *tmp124 *tmp125
+  206 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  207 print "#"
+  208 print :start_reactor:reactor_num
+  209 print " "
+  210 print "- "
+  211 jump *label138 equal :start_reactor:emerg_shutdown false
+  212 control enabled :start_reactor:reactor false
+  213 print "emergency mode"
+  214 print "\n"
+  215 set :start_reactor:supply_fuel false
+  216 jump *label171 always
+  217 label *label138
+  218 jump *label157 equal :start_reactor:enabled false
+  219 jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  220 control enabled :start_reactor:reactor false
+  221 print "STOP unwanted"
+  222 print "\n"
+  223 jump *label156 always
+  224 label *label139
+  225 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  226 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  227 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  228 op land *tmp139 *tmp136 *tmp138
+  229 jump *label140 equal *tmp139 false
+  230 control enabled :start_reactor:reactor false
+  231 print "STOP system fuel low"
+  232 print "\n"
+  233 jump *label155 always
+  234 label *label140
+  235 jump *label141 greaterThan :start_reactor:fuel 1
+  236 control enabled :start_reactor:reactor false
+  237 print "STOP fuel low"
+  238 print "\n"
+  239 jump *label154 always
+  240 label *label141
+  241 jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
+  242 control enabled :start_reactor:reactor false
+  243 print "STOP out of cryo"
+  244 print "\n"
+  245 jump *label153 always
+  246 label *label142
+  247 jump *label149 greaterThanEq :start_reactor:secs 30
+  248 label *label143
+  249 # "Function: def calc_charge_req(in reactor, in time)"
+  250 op sub *tmp102 @tick :start_reactor:t_startup
+  251 op idiv :calc_charge_req:secs *tmp102 60
+  252 op greaterThan *tmp104 :calc_charge_req:secs 30
+  253 sensor *tmp105 :start_reactor:reactor @enabled
+  254 op equal *tmp106 *tmp105 false
+  255 op or *tmp107 *tmp104 *tmp106
+  256 jump *label144 equal *tmp107 false
+  257 set :calc_charge_req*retval 0
+  258 jump *label146 always
+  259 label *label144
+  260 label *label145
+  261 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  262 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  263 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  264 set :calc_charge_req*retval :calc_charge_req:charge_req
+  265 jump *label146 always
+  266 label *label146
+  267 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  268 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  269 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  270 op land *tmp156 *tmp154 *tmp155
+  271 jump *label147 equal *tmp156 false
+  272 control enabled :start_reactor:reactor false
+  273 print "START FAIL battery"
+  274 print "\n"
+  275 set :start_reactor:supply_fuel false
+  276 jump *label148 always
+  277 label *label147
+  278 op sub :start_reactor:time_left 30 :start_reactor:secs
+  279 print "Starting "
+  280 print :start_reactor:time_left
+  281 print " "
+  282 print "secs, req "
+  283 print :calc_charge_req*retval
+  284 print "J"
+  285 print "\n"
+  286 label *label148
+  287 jump *label152 always
+  288 label *label149
+  289 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  290 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  291 op land *tmp163 *tmp161 *tmp162
+  292 jump *label150 equal *tmp163 false
+  293 control enabled :start_reactor:reactor false
+  294 print "ABANDON - battery crit"
+  295 print "\n"
+  296 set :start_reactor:supply_fuel false
+  297 jump *label151 always
+  298 label *label150
+  299 op idiv :start_reactor:mins :start_reactor:secs 6
+  300 op div :start_reactor:mins :start_reactor:mins 10
+  301 print "RUN "
+  302 print :start_reactor:mins
+  303 print " "
+  304 print "mins"
+  305 print "\n"
+  306 label *label151
+  307 label *label152
+  308 label *label153
+  309 label *label154
+  310 label *label155
+  311 label *label156
+  312 jump *label170 always
+  313 label *label157
+  314 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  315 op sub *tmp170 *tmp169 .PWR_ABORT
+  316 op div *tmp171 *tmp170 .PWR_REQ
+  317 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  318 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  319 op max :start_reactor:flow_units -0.1 *tmp173
+  320 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  321 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  322 jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  323 print "IDLE"
+  324 print "\n"
+  325 set :start_reactor:supply_fuel false
+  326 jump *label169 always
+  327 label *label158
+  328 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  329 jump *label159 greaterThanEq *tmp179 1
+  330 op idiv *tmp183 :start_reactor:flow_units 0.001
+  331 op div :start_reactor:flow *tmp183 10
+  332 op idiv *tmp186 :start_reactor:charge_units 0.001
+  333 op div :start_reactor:charge *tmp186 10
+  334 print "WAIT power. (%"
+  335 print :start_reactor:charge
+  336 print "J + %"
+  337 print :start_reactor:flow
+  338 print "W)"
+  339 print "\n"
+  340 set :start_reactor:supply_fuel false
+  341 jump *label168 always
+  342 label *label159
+  343 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  344 op land *tmp189 :start_reactor:fuel_on *tmp188
+  345 jump *label162 equal *tmp189 false
+  346 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  347 jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  348 print "WAIT fuel"
+  349 print "\n"
+  350 jump *label161 always
+  351 label *label160
+  352 print "WAIT system fuel"
+  353 print "\n"
+  354 label *label161
+  355 jump *label167 always
+  356 label *label162
+  357 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  358 jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  359 print "WAIT buffer fuel"
+  360 print "\n"
+  361 jump *label166 always
+  362 label *label163
+  363 jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  364 print "WAIT cryo"
+  365 print "\n"
+  366 jump *label165 always
+  367 label *label164
+  368 print "STARTUP"
+  369 print "\n"
+  370 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  371 control enabled :start_reactor:reactor true
+  372 label *label165
+  373 label *label166
+  374 label *label167
+  375 label *label168
+  376 label *label169
+  377 label *label170
+  378 label *label171
+  379 sensor *tmp201 :start_reactor:reactor @enabled
+  380 jump *label172 equal :start_reactor:enabled *tmp201
+  381 set .RET_T_STARTUP @tick
+  382 label *label172
+  383 label *label173
+  384 set :start_reactor*retval :start_reactor:supply_fuel
+  385 jump *label174 always
+  386 label *label174
   387 set :fuel_1 :start_reactor*retval
   388 set :t_startup1 .RET_T_STARTUP
   389 label *label87

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    30 set :t_startup3 *tmp5
    31 set :t_startup4 *tmp5
    32 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    33 set .REACTORS_DESIRED 5
    34 set .AVG_SURPLUS 500
    35 label *label7
 
   186 set :start_reactor:t_startup :t_startup1
   187 label *label137
   188 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  189 set .RET_T_STARTUP :t_startup1
+  190 op sub *tmp113 @tick :t_startup1
   191 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  192 sensor :start_reactor:fuel reactor1 @blast-compound
   193 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  194 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  195 sensor :start_reactor:cryo reactor1 @cryofluid
+  196 sensor *tmp118 node1 @powerNetStored
   197 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  198 sensor *tmp120 node1 @powerNetIn
+  199 sensor *tmp121 node1 @powerNetOut
   200 op sub *tmp122 *tmp120 *tmp121
   201 op floor :start_reactor:surplus *tmp122
   202 op mul *tmp124 .AVG_SURPLUS 0.8
   203 op mul *tmp125 :start_reactor:surplus 0.2
   204 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  205 sensor :start_reactor:enabled reactor1 @enabled
   206 print "#"
-    * print :start_reactor:reactor_num
+  207 print 1
   208 print " "
   209 print "- "
-    * jump *label138 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  210 jump *label138 equal :emerg_shutdown false
+  211 control enabled reactor1 false
   212 print "emergency mode"
   213 print "\n"
   214 set :start_reactor:supply_fuel false
   215 jump *label171 always
   216 label *label138
   217 jump *label157 equal :start_reactor:enabled false
-    * jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  218 jump *label139 greaterThanEq .REACTORS_DESIRED 1
+  219 control enabled reactor1 false
   220 print "STOP unwanted"
   221 print "\n"
   222 jump *label156 always
   223 label *label139
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  224 op greaterThan *tmp136 1 1
+  225 op mul *tmp137 15 1
+  226 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  227 op land *tmp139 false *tmp138
   228 jump *label140 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  229 control enabled reactor1 false
   230 print "STOP system fuel low"
   231 print "\n"
   232 jump *label155 always
   233 label *label140
   234 jump *label141 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  235 control enabled reactor1 false
   236 print "STOP fuel low"
   237 print "\n"
   238 jump *label154 always
   239 label *label141
-    * jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  240 jump *label142 greaterThan :start_reactor:cryo 1
+  241 control enabled reactor1 false
   242 print "STOP out of cryo"
   243 print "\n"
   244 jump *label153 always
 
   246 jump *label149 greaterThanEq :start_reactor:secs 30
   247 label *label143
   248 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  249 op sub *tmp102 @tick :t_startup1
   250 op idiv :calc_charge_req:secs *tmp102 60
   251 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  252 sensor *tmp105 reactor1 @enabled
   253 op equal *tmp106 *tmp105 false
   254 op or *tmp107 *tmp104 *tmp106
   255 jump *label144 equal *tmp107 false
 
   264 jump *label146 always
   265 label *label146
   266 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  267 op lessThan *tmp154 *tmp153 5000
+  268 op lessThan *tmp155 :start_reactor:surplus -500
   269 op land *tmp156 *tmp154 *tmp155
   270 jump *label147 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  271 control enabled reactor1 false
   272 print "START FAIL battery"
   273 print "\n"
   274 set :start_reactor:supply_fuel false
 
   285 label *label148
   286 jump *label152 always
   287 label *label149
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  288 op lessThan *tmp161 :start_reactor:charge 2000
+  289 op lessThan *tmp162 :start_reactor:surplus -500
   290 op land *tmp163 *tmp161 *tmp162
   291 jump *label150 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  292 control enabled reactor1 false
   293 print "ABANDON - battery crit"
   294 print "\n"
   295 set :start_reactor:supply_fuel false
 
   311 jump *label170 always
   312 label *label157
   313 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  314 op sub *tmp170 *tmp169 5000
+  315 op div *tmp171 *tmp170 23000
+  316 op mul :start_reactor:charge_units *tmp171 0.6
+  317 op div *tmp173 :start_reactor:surplus 2000
   318 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  319 op mul *tmp175 2 1
+  320 op add :start_reactor:cryo_req 3 2
+  321 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   322 print "IDLE"
   323 print "\n"
   324 set :start_reactor:supply_fuel false
 
   339 set :start_reactor:supply_fuel false
   340 jump *label168 always
   341 label *label159
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  342 op lessThan *tmp188 :start_reactor:fuel 10
+  343 op land *tmp189 :fuel_1 *tmp188
   344 jump *label162 equal *tmp189 false
   345 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  346 jump *label160 lessThanEq *tmp191 10
   347 print "WAIT fuel"
   348 print "\n"
   349 jump *label161 always
 
   353 label *label161
   354 jump *label167 always
   355 label *label162
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  356 op mul *tmp194 45 1
+  357 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
   358 print "WAIT buffer fuel"
   359 print "\n"
   360 jump *label166 always
   361 label *label163
-    * jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  362 jump *label164 greaterThanEq :start_reactor:cryo 5
   363 print "WAIT cryo"
   364 print "\n"
   365 jump *label165 always
   366 label *label164
   367 print "STARTUP"
   368 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  369 op add .START_POWER_REQ .START_POWER_REQ 23000
+  370 control enabled reactor1 true
   371 label *label165
   372 label *label166
   373 label *label167
 
   375 label *label169
   376 label *label170
   377 label *label171
-    * sensor *tmp201 :start_reactor:reactor @enabled
+  378 sensor *tmp201 reactor1 @enabled
   379 jump *label172 equal :start_reactor:enabled *tmp201
   380 set .RET_T_STARTUP @tick
   381 label *label172
 
   383 set :start_reactor*retval :start_reactor:supply_fuel
   384 jump *label174 always
   385 label *label174
-    * set :fuel_1 :start_reactor*retval
+  386 set :fuel_1 :start_reactor:supply_fuel
   387 set :t_startup1 .RET_T_STARTUP
   388 label *label87
   389 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label88 equal :start_reactor*retval false
+  390 jump *label88 equal :start_reactor:supply_fuel false
   391 control config unloader1 @blast-compound
   392 jump *label89 always
   393 label *label88
   394 control config unloader1 @scrap
   395 label *label89
-    * jump *label90 notEqual :start_reactor*retval false
+  396 jump *label90 notEqual :start_reactor:supply_fuel false
   397 control config unloader2 @blast-compound
   398 jump *label91 always
   399 label *label90

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   179 jump *label132 always
   180 label *label132
   181 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   182 label *label137
   183 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   184 set .RET_T_STARTUP :t_startup1
 
   308 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   309 op sub *tmp170 *tmp169 5000
   310 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  311 op div :start_reactor:charge_units *tmp170 38333.333333333336
   312 op div *tmp173 :start_reactor:surplus 2000
   313 op max :start_reactor:flow_units -0.1 *tmp173
   314 op mul *tmp175 2 1
 
   375 set .RET_T_STARTUP @tick
   376 label *label172
   377 label *label173
-    * set :start_reactor*retval :start_reactor:supply_fuel
   378 jump *label174 always
   379 label *label174
   380 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+157 instructions):
 
   399 set :start_reactor:emerg_shutdown :emerg_shutdown
   400 set :start_reactor:fuel_on :fuel_2
   401 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  402 label *label175
+  403 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  404 set .RET_T_STARTUP :start_reactor:t_startup
+  405 op sub *tmp113 @tick :start_reactor:t_startup
+  406 op idiv :start_reactor:secs *tmp113 60
+  407 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  408 set :start_reactor:supply_fuel true
+  409 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  410 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  411 sensor *tmp118 .NODE @powerNetStored
+  412 op floor :start_reactor:charge *tmp118
+  413 sensor *tmp120 .NODE @powerNetIn
+  414 sensor *tmp121 .NODE @powerNetOut
+  415 op sub *tmp122 *tmp120 *tmp121
+  416 op floor :start_reactor:surplus *tmp122
+  417 op mul *tmp124 .AVG_SURPLUS 0.8
+  418 op mul *tmp125 :start_reactor:surplus 0.2
+  419 op add .AVG_SURPLUS *tmp124 *tmp125
+  420 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  421 print "#"
+  422 print :start_reactor:reactor_num
+  423 print " "
+  424 print "- "
+  425 jump *label176 equal :start_reactor:emerg_shutdown false
+  426 control enabled :start_reactor:reactor false
+  427 print "emergency mode"
+  428 print "\n"
+  429 set :start_reactor:supply_fuel false
+  430 jump *label209 always
+  431 label *label176
+  432 jump *label195 equal :start_reactor:enabled false
+  433 jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  434 control enabled :start_reactor:reactor false
+  435 print "STOP unwanted"
+  436 print "\n"
+  437 jump *label194 always
+  438 label *label177
+  439 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  440 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  441 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  442 op land *tmp139 *tmp136 *tmp138
+  443 jump *label178 equal *tmp139 false
+  444 control enabled :start_reactor:reactor false
+  445 print "STOP system fuel low"
+  446 print "\n"
+  447 jump *label193 always
+  448 label *label178
+  449 jump *label179 greaterThan :start_reactor:fuel 1
+  450 control enabled :start_reactor:reactor false
+  451 print "STOP fuel low"
+  452 print "\n"
+  453 jump *label192 always
+  454 label *label179
+  455 jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
+  456 control enabled :start_reactor:reactor false
+  457 print "STOP out of cryo"
+  458 print "\n"
+  459 jump *label191 always
+  460 label *label180
+  461 jump *label187 greaterThanEq :start_reactor:secs 30
+  462 label *label181
+  463 # "Function: def calc_charge_req(in reactor, in time)"
+  464 op sub *tmp102 @tick :start_reactor:t_startup
+  465 op idiv :calc_charge_req:secs *tmp102 60
+  466 op greaterThan *tmp104 :calc_charge_req:secs 30
+  467 sensor *tmp105 :start_reactor:reactor @enabled
+  468 op equal *tmp106 *tmp105 false
+  469 op or *tmp107 *tmp104 *tmp106
+  470 jump *label182 equal *tmp107 false
+  471 set :calc_charge_req*retval 0
+  472 jump *label184 always
+  473 label *label182
+  474 label *label183
+  475 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  476 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  477 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  478 set :calc_charge_req*retval :calc_charge_req:charge_req
+  479 jump *label184 always
+  480 label *label184
+  481 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  482 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  483 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  484 op land *tmp156 *tmp154 *tmp155
+  485 jump *label185 equal *tmp156 false
+  486 control enabled :start_reactor:reactor false
+  487 print "START FAIL battery"
+  488 print "\n"
+  489 set :start_reactor:supply_fuel false
+  490 jump *label186 always
+  491 label *label185
+  492 op sub :start_reactor:time_left 30 :start_reactor:secs
+  493 print "Starting "
+  494 print :start_reactor:time_left
+  495 print " "
+  496 print "secs, req "
+  497 print :calc_charge_req*retval
+  498 print "J"
+  499 print "\n"
+  500 label *label186
+  501 jump *label190 always
+  502 label *label187
+  503 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  504 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  505 op land *tmp163 *tmp161 *tmp162
+  506 jump *label188 equal *tmp163 false
+  507 control enabled :start_reactor:reactor false
+  508 print "ABANDON - battery crit"
+  509 print "\n"
+  510 set :start_reactor:supply_fuel false
+  511 jump *label189 always
+  512 label *label188
+  513 op idiv :start_reactor:mins :start_reactor:secs 6
+  514 op div :start_reactor:mins :start_reactor:mins 10
+  515 print "RUN "
+  516 print :start_reactor:mins
+  517 print " "
+  518 print "mins"
+  519 print "\n"
+  520 label *label189
+  521 label *label190
+  522 label *label191
+  523 label *label192
+  524 label *label193
+  525 label *label194
+  526 jump *label208 always
+  527 label *label195
+  528 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  529 op sub *tmp170 *tmp169 .PWR_ABORT
+  530 op div *tmp171 *tmp170 .PWR_REQ
+  531 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  532 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  533 op max :start_reactor:flow_units -0.1 *tmp173
+  534 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  535 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  536 jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  537 print "IDLE"
+  538 print "\n"
+  539 set :start_reactor:supply_fuel false
+  540 jump *label207 always
+  541 label *label196
+  542 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  543 jump *label197 greaterThanEq *tmp179 1
+  544 op idiv *tmp183 :start_reactor:flow_units 0.001
+  545 op div :start_reactor:flow *tmp183 10
+  546 op idiv *tmp186 :start_reactor:charge_units 0.001
+  547 op div :start_reactor:charge *tmp186 10
+  548 print "WAIT power. (%"
+  549 print :start_reactor:charge
+  550 print "J + %"
+  551 print :start_reactor:flow
+  552 print "W)"
+  553 print "\n"
+  554 set :start_reactor:supply_fuel false
+  555 jump *label206 always
+  556 label *label197
+  557 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  558 op land *tmp189 :start_reactor:fuel_on *tmp188
+  559 jump *label200 equal *tmp189 false
+  560 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  561 jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  562 print "WAIT fuel"
+  563 print "\n"
+  564 jump *label199 always
+  565 label *label198
+  566 print "WAIT system fuel"
+  567 print "\n"
+  568 label *label199
+  569 jump *label205 always
+  570 label *label200
+  571 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  572 jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  573 print "WAIT buffer fuel"
+  574 print "\n"
+  575 jump *label204 always
+  576 label *label201
+  577 jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  578 print "WAIT cryo"
+  579 print "\n"
+  580 jump *label203 always
+  581 label *label202
+  582 print "STARTUP"
+  583 print "\n"
+  584 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  585 control enabled :start_reactor:reactor true
+  586 label *label203
+  587 label *label204
+  588 label *label205
+  589 label *label206
+  590 label *label207
+  591 label *label208
+  592 label *label209
+  593 sensor *tmp201 :start_reactor:reactor @enabled
+  594 jump *label210 equal :start_reactor:enabled *tmp201
+  595 set .RET_T_STARTUP @tick
+  596 label *label210
+  597 label *label211
+  598 set :start_reactor*retval :start_reactor:supply_fuel
+  599 jump *label212 always
+  600 label *label212
   601 set :fuel_2 :start_reactor*retval
   602 set :t_startup2 .RET_T_STARTUP
   603 label *label93

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   401 set :start_reactor:t_startup :t_startup2
   402 label *label175
   403 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  404 set .RET_T_STARTUP :t_startup2
+  405 op sub *tmp113 @tick :t_startup2
   406 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  407 sensor :start_reactor:fuel reactor2 @blast-compound
   408 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  409 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  410 sensor :start_reactor:cryo reactor2 @cryofluid
+  411 sensor *tmp118 node1 @powerNetStored
   412 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  413 sensor *tmp120 node1 @powerNetIn
+  414 sensor *tmp121 node1 @powerNetOut
   415 op sub *tmp122 *tmp120 *tmp121
   416 op floor :start_reactor:surplus *tmp122
   417 op mul *tmp124 .AVG_SURPLUS 0.8
   418 op mul *tmp125 :start_reactor:surplus 0.2
   419 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  420 sensor :start_reactor:enabled reactor2 @enabled
   421 print "#"
-    * print :start_reactor:reactor_num
+  422 print 2
   423 print " "
   424 print "- "
-    * jump *label176 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  425 jump *label176 equal :emerg_shutdown false
+  426 control enabled reactor2 false
   427 print "emergency mode"
   428 print "\n"
   429 set :start_reactor:supply_fuel false
   430 jump *label209 always
   431 label *label176
   432 jump *label195 equal :start_reactor:enabled false
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  433 jump *label177 greaterThanEq .REACTORS_DESIRED 2
+  434 control enabled reactor2 false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label194 always
   438 label *label177
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  439 op greaterThan *tmp136 2 1
+  440 op mul *tmp137 15 2
+  441 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  442 op land *tmp139 true *tmp138
   443 jump *label178 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  444 control enabled reactor2 false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label193 always
   448 label *label178
   449 jump *label179 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  450 control enabled reactor2 false
   451 print "STOP fuel low"
   452 print "\n"
   453 jump *label192 always
   454 label *label179
-    * jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  455 jump *label180 greaterThan :start_reactor:cryo 1
+  456 control enabled reactor2 false
   457 print "STOP out of cryo"
   458 print "\n"
   459 jump *label191 always
 
   461 jump *label187 greaterThanEq :start_reactor:secs 30
   462 label *label181
   463 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  464 op sub *tmp102 @tick :t_startup2
   465 op idiv :calc_charge_req:secs *tmp102 60
   466 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  467 sensor *tmp105 reactor2 @enabled
   468 op equal *tmp106 *tmp105 false
   469 op or *tmp107 *tmp104 *tmp106
   470 jump *label182 equal *tmp107 false
 
   479 jump *label184 always
   480 label *label184
   481 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  482 op lessThan *tmp154 *tmp153 5000
+  483 op lessThan *tmp155 :start_reactor:surplus -500
   484 op land *tmp156 *tmp154 *tmp155
   485 jump *label185 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  486 control enabled reactor2 false
   487 print "START FAIL battery"
   488 print "\n"
   489 set :start_reactor:supply_fuel false
 
   500 label *label186
   501 jump *label190 always
   502 label *label187
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  503 op lessThan *tmp161 :start_reactor:charge 2000
+  504 op lessThan *tmp162 :start_reactor:surplus -500
   505 op land *tmp163 *tmp161 *tmp162
   506 jump *label188 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  507 control enabled reactor2 false
   508 print "ABANDON - battery crit"
   509 print "\n"
   510 set :start_reactor:supply_fuel false
 
   526 jump *label208 always
   527 label *label195
   528 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  529 op sub *tmp170 *tmp169 5000
+  530 op div *tmp171 *tmp170 23000
+  531 op mul :start_reactor:charge_units *tmp171 0.6
+  532 op div *tmp173 :start_reactor:surplus 2000
   533 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  534 op mul *tmp175 2 2
+  535 op add :start_reactor:cryo_req 3 4
+  536 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   537 print "IDLE"
   538 print "\n"
   539 set :start_reactor:supply_fuel false
 
   554 set :start_reactor:supply_fuel false
   555 jump *label206 always
   556 label *label197
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  557 op lessThan *tmp188 :start_reactor:fuel 10
+  558 op land *tmp189 :fuel_2 *tmp188
   559 jump *label200 equal *tmp189 false
   560 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  561 jump *label198 lessThanEq *tmp191 10
   562 print "WAIT fuel"
   563 print "\n"
   564 jump *label199 always
 
   568 label *label199
   569 jump *label205 always
   570 label *label200
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  571 op mul *tmp194 45 2
+  572 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
   573 print "WAIT buffer fuel"
   574 print "\n"
   575 jump *label204 always
   576 label *label201
-    * jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  577 jump *label202 greaterThanEq :start_reactor:cryo 7
   578 print "WAIT cryo"
   579 print "\n"
   580 jump *label203 always
   581 label *label202
   582 print "STARTUP"
   583 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  584 op add .START_POWER_REQ .START_POWER_REQ 23000
+  585 control enabled reactor2 true
   586 label *label203
   587 label *label204
   588 label *label205
 
   590 label *label207
   591 label *label208
   592 label *label209
-    * sensor *tmp201 :start_reactor:reactor @enabled
+  593 sensor *tmp201 reactor2 @enabled
   594 jump *label210 equal :start_reactor:enabled *tmp201
   595 set .RET_T_STARTUP @tick
   596 label *label210
 
   598 set :start_reactor*retval :start_reactor:supply_fuel
   599 jump *label212 always
   600 label *label212
-    * set :fuel_2 :start_reactor*retval
+  601 set :fuel_2 :start_reactor:supply_fuel
   602 set :t_startup2 .RET_T_STARTUP
   603 label *label93
   604 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label94 equal :start_reactor*retval false
+  605 jump *label94 equal :start_reactor:supply_fuel false
   606 control config unloader3 @blast-compound
   607 jump *label95 always
   608 label *label94
   609 control config unloader3 @scrap
   610 label *label95
-    * jump *label96 notEqual :start_reactor*retval false
+  611 jump *label96 notEqual :start_reactor:supply_fuel false
   612 control config unloader4 @blast-compound
   613 jump *label97 always
   614 label *label96

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   394 control config unloader2 @scrap
   395 label *label91
   396 label *label92
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   397 label *label175
   398 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   399 set .RET_T_STARTUP :t_startup2
 
   523 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   524 op sub *tmp170 *tmp169 5000
   525 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  526 op div :start_reactor:charge_units *tmp170 38333.333333333336
   527 op div *tmp173 :start_reactor:surplus 2000
   528 op max :start_reactor:flow_units -0.1 *tmp173
   529 op mul *tmp175 2 2
 
   590 set .RET_T_STARTUP @tick
   591 label *label210
   592 label *label211
-    * set :start_reactor*retval :start_reactor:supply_fuel
   593 jump *label212 always
   594 label *label212
   595 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+157 instructions):
 
   643 set :start_reactor:emerg_shutdown :emerg_shutdown
   644 set :start_reactor:fuel_on :fuel_3
   645 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  646 label *label213
+  647 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  648 set .RET_T_STARTUP :start_reactor:t_startup
+  649 op sub *tmp113 @tick :start_reactor:t_startup
+  650 op idiv :start_reactor:secs *tmp113 60
+  651 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  652 set :start_reactor:supply_fuel true
+  653 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  654 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  655 sensor *tmp118 .NODE @powerNetStored
+  656 op floor :start_reactor:charge *tmp118
+  657 sensor *tmp120 .NODE @powerNetIn
+  658 sensor *tmp121 .NODE @powerNetOut
+  659 op sub *tmp122 *tmp120 *tmp121
+  660 op floor :start_reactor:surplus *tmp122
+  661 op mul *tmp124 .AVG_SURPLUS 0.8
+  662 op mul *tmp125 :start_reactor:surplus 0.2
+  663 op add .AVG_SURPLUS *tmp124 *tmp125
+  664 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  665 print "#"
+  666 print :start_reactor:reactor_num
+  667 print " "
+  668 print "- "
+  669 jump *label214 equal :start_reactor:emerg_shutdown false
+  670 control enabled :start_reactor:reactor false
+  671 print "emergency mode"
+  672 print "\n"
+  673 set :start_reactor:supply_fuel false
+  674 jump *label247 always
+  675 label *label214
+  676 jump *label233 equal :start_reactor:enabled false
+  677 jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  678 control enabled :start_reactor:reactor false
+  679 print "STOP unwanted"
+  680 print "\n"
+  681 jump *label232 always
+  682 label *label215
+  683 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  684 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  685 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  686 op land *tmp139 *tmp136 *tmp138
+  687 jump *label216 equal *tmp139 false
+  688 control enabled :start_reactor:reactor false
+  689 print "STOP system fuel low"
+  690 print "\n"
+  691 jump *label231 always
+  692 label *label216
+  693 jump *label217 greaterThan :start_reactor:fuel 1
+  694 control enabled :start_reactor:reactor false
+  695 print "STOP fuel low"
+  696 print "\n"
+  697 jump *label230 always
+  698 label *label217
+  699 jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
+  700 control enabled :start_reactor:reactor false
+  701 print "STOP out of cryo"
+  702 print "\n"
+  703 jump *label229 always
+  704 label *label218
+  705 jump *label225 greaterThanEq :start_reactor:secs 30
+  706 label *label219
+  707 # "Function: def calc_charge_req(in reactor, in time)"
+  708 op sub *tmp102 @tick :start_reactor:t_startup
+  709 op idiv :calc_charge_req:secs *tmp102 60
+  710 op greaterThan *tmp104 :calc_charge_req:secs 30
+  711 sensor *tmp105 :start_reactor:reactor @enabled
+  712 op equal *tmp106 *tmp105 false
+  713 op or *tmp107 *tmp104 *tmp106
+  714 jump *label220 equal *tmp107 false
+  715 set :calc_charge_req*retval 0
+  716 jump *label222 always
+  717 label *label220
+  718 label *label221
+  719 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  720 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  721 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  722 set :calc_charge_req*retval :calc_charge_req:charge_req
+  723 jump *label222 always
+  724 label *label222
+  725 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  726 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  727 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  728 op land *tmp156 *tmp154 *tmp155
+  729 jump *label223 equal *tmp156 false
+  730 control enabled :start_reactor:reactor false
+  731 print "START FAIL battery"
+  732 print "\n"
+  733 set :start_reactor:supply_fuel false
+  734 jump *label224 always
+  735 label *label223
+  736 op sub :start_reactor:time_left 30 :start_reactor:secs
+  737 print "Starting "
+  738 print :start_reactor:time_left
+  739 print " "
+  740 print "secs, req "
+  741 print :calc_charge_req*retval
+  742 print "J"
+  743 print "\n"
+  744 label *label224
+  745 jump *label228 always
+  746 label *label225
+  747 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  748 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  749 op land *tmp163 *tmp161 *tmp162
+  750 jump *label226 equal *tmp163 false
+  751 control enabled :start_reactor:reactor false
+  752 print "ABANDON - battery crit"
+  753 print "\n"
+  754 set :start_reactor:supply_fuel false
+  755 jump *label227 always
+  756 label *label226
+  757 op idiv :start_reactor:mins :start_reactor:secs 6
+  758 op div :start_reactor:mins :start_reactor:mins 10
+  759 print "RUN "
+  760 print :start_reactor:mins
+  761 print " "
+  762 print "mins"
+  763 print "\n"
+  764 label *label227
+  765 label *label228
+  766 label *label229
+  767 label *label230
+  768 label *label231
+  769 label *label232
+  770 jump *label246 always
+  771 label *label233
+  772 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  773 op sub *tmp170 *tmp169 .PWR_ABORT
+  774 op div *tmp171 *tmp170 .PWR_REQ
+  775 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  776 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  777 op max :start_reactor:flow_units -0.1 *tmp173
+  778 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  779 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  780 jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  781 print "IDLE"
+  782 print "\n"
+  783 set :start_reactor:supply_fuel false
+  784 jump *label245 always
+  785 label *label234
+  786 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  787 jump *label235 greaterThanEq *tmp179 1
+  788 op idiv *tmp183 :start_reactor:flow_units 0.001
+  789 op div :start_reactor:flow *tmp183 10
+  790 op idiv *tmp186 :start_reactor:charge_units 0.001
+  791 op div :start_reactor:charge *tmp186 10
+  792 print "WAIT power. (%"
+  793 print :start_reactor:charge
+  794 print "J + %"
+  795 print :start_reactor:flow
+  796 print "W)"
+  797 print "\n"
+  798 set :start_reactor:supply_fuel false
+  799 jump *label244 always
+  800 label *label235
+  801 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  802 op land *tmp189 :start_reactor:fuel_on *tmp188
+  803 jump *label238 equal *tmp189 false
+  804 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  805 jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  806 print "WAIT fuel"
+  807 print "\n"
+  808 jump *label237 always
+  809 label *label236
+  810 print "WAIT system fuel"
+  811 print "\n"
+  812 label *label237
+  813 jump *label243 always
+  814 label *label238
+  815 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  816 jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  817 print "WAIT buffer fuel"
+  818 print "\n"
+  819 jump *label242 always
+  820 label *label239
+  821 jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  822 print "WAIT cryo"
+  823 print "\n"
+  824 jump *label241 always
+  825 label *label240
+  826 print "STARTUP"
+  827 print "\n"
+  828 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  829 control enabled :start_reactor:reactor true
+  830 label *label241
+  831 label *label242
+  832 label *label243
+  833 label *label244
+  834 label *label245
+  835 label *label246
+  836 label *label247
+  837 sensor *tmp201 :start_reactor:reactor @enabled
+  838 jump *label248 equal :start_reactor:enabled *tmp201
+  839 set .RET_T_STARTUP @tick
+  840 label *label248
+  841 label *label249
+  842 set :start_reactor*retval :start_reactor:supply_fuel
+  843 jump *label250 always
+  844 label *label250
   845 set :fuel_3 :start_reactor*retval
   846 set :t_startup3 .RET_T_STARTUP
   847 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   645 set :start_reactor:t_startup :t_startup3
   646 label *label213
   647 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  648 set .RET_T_STARTUP :t_startup3
+  649 op sub *tmp113 @tick :t_startup3
   650 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  651 sensor :start_reactor:fuel reactor3 @blast-compound
   652 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  653 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  654 sensor :start_reactor:cryo reactor3 @cryofluid
+  655 sensor *tmp118 node1 @powerNetStored
   656 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  657 sensor *tmp120 node1 @powerNetIn
+  658 sensor *tmp121 node1 @powerNetOut
   659 op sub *tmp122 *tmp120 *tmp121
   660 op floor :start_reactor:surplus *tmp122
   661 op mul *tmp124 .AVG_SURPLUS 0.8
   662 op mul *tmp125 :start_reactor:surplus 0.2
   663 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  664 sensor :start_reactor:enabled reactor3 @enabled
   665 print "#"
-    * print :start_reactor:reactor_num
+  666 print 3
   667 print " "
   668 print "- "
-    * jump *label214 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  669 jump *label214 equal :emerg_shutdown false
+  670 control enabled reactor3 false
   671 print "emergency mode"
   672 print "\n"
   673 set :start_reactor:supply_fuel false
   674 jump *label247 always
   675 label *label214
   676 jump *label233 equal :start_reactor:enabled false
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  677 jump *label215 greaterThanEq .REACTORS_DESIRED 3
+  678 control enabled reactor3 false
   679 print "STOP unwanted"
   680 print "\n"
   681 jump *label232 always
   682 label *label215
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  683 op greaterThan *tmp136 3 1
+  684 op mul *tmp137 15 3
+  685 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  686 op land *tmp139 true *tmp138
   687 jump *label216 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  688 control enabled reactor3 false
   689 print "STOP system fuel low"
   690 print "\n"
   691 jump *label231 always
   692 label *label216
   693 jump *label217 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  694 control enabled reactor3 false
   695 print "STOP fuel low"
   696 print "\n"
   697 jump *label230 always
   698 label *label217
-    * jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  699 jump *label218 greaterThan :start_reactor:cryo 1
+  700 control enabled reactor3 false
   701 print "STOP out of cryo"
   702 print "\n"
   703 jump *label229 always
 
   705 jump *label225 greaterThanEq :start_reactor:secs 30
   706 label *label219
   707 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  708 op sub *tmp102 @tick :t_startup3
   709 op idiv :calc_charge_req:secs *tmp102 60
   710 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  711 sensor *tmp105 reactor3 @enabled
   712 op equal *tmp106 *tmp105 false
   713 op or *tmp107 *tmp104 *tmp106
   714 jump *label220 equal *tmp107 false
 
   723 jump *label222 always
   724 label *label222
   725 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  726 op lessThan *tmp154 *tmp153 5000
+  727 op lessThan *tmp155 :start_reactor:surplus -500
   728 op land *tmp156 *tmp154 *tmp155
   729 jump *label223 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  730 control enabled reactor3 false
   731 print "START FAIL battery"
   732 print "\n"
   733 set :start_reactor:supply_fuel false
 
   744 label *label224
   745 jump *label228 always
   746 label *label225
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  747 op lessThan *tmp161 :start_reactor:charge 2000
+  748 op lessThan *tmp162 :start_reactor:surplus -500
   749 op land *tmp163 *tmp161 *tmp162
   750 jump *label226 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  751 control enabled reactor3 false
   752 print "ABANDON - battery crit"
   753 print "\n"
   754 set :start_reactor:supply_fuel false
 
   770 jump *label246 always
   771 label *label233
   772 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  773 op sub *tmp170 *tmp169 5000
+  774 op div *tmp171 *tmp170 23000
+  775 op mul :start_reactor:charge_units *tmp171 0.6
+  776 op div *tmp173 :start_reactor:surplus 2000
   777 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  778 op mul *tmp175 2 3
+  779 op add :start_reactor:cryo_req 3 6
+  780 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   781 print "IDLE"
   782 print "\n"
   783 set :start_reactor:supply_fuel false
 
   798 set :start_reactor:supply_fuel false
   799 jump *label244 always
   800 label *label235
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  801 op lessThan *tmp188 :start_reactor:fuel 10
+  802 op land *tmp189 :fuel_3 *tmp188
   803 jump *label238 equal *tmp189 false
   804 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  805 jump *label236 lessThanEq *tmp191 10
   806 print "WAIT fuel"
   807 print "\n"
   808 jump *label237 always
 
   812 label *label237
   813 jump *label243 always
   814 label *label238
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  815 op mul *tmp194 45 3
+  816 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
   817 print "WAIT buffer fuel"
   818 print "\n"
   819 jump *label242 always
   820 label *label239
-    * jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  821 jump *label240 greaterThanEq :start_reactor:cryo 9
   822 print "WAIT cryo"
   823 print "\n"
   824 jump *label241 always
   825 label *label240
   826 print "STARTUP"
   827 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  828 op add .START_POWER_REQ .START_POWER_REQ 23000
+  829 control enabled reactor3 true
   830 label *label241
   831 label *label242
   832 label *label243
 
   834 label *label245
   835 label *label246
   836 label *label247
-    * sensor *tmp201 :start_reactor:reactor @enabled
+  837 sensor *tmp201 reactor3 @enabled
   838 jump *label248 equal :start_reactor:enabled *tmp201
   839 set .RET_T_STARTUP @tick
   840 label *label248
 
   842 set :start_reactor*retval :start_reactor:supply_fuel
   843 jump *label250 always
   844 label *label250
-    * set :fuel_3 :start_reactor*retval
+  845 set :fuel_3 :start_reactor:supply_fuel
   846 set :t_startup3 .RET_T_STARTUP
   847 set :start_reactor:reactor reactor4
   848 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   638 label *label111
   639 label *label112
   640 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   641 label *label213
   642 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   643 set .RET_T_STARTUP :t_startup3
 
   767 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   768 op sub *tmp170 *tmp169 5000
   769 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  770 op div :start_reactor:charge_units *tmp170 38333.333333333336
   771 op div *tmp173 :start_reactor:surplus 2000
   772 op max :start_reactor:flow_units -0.1 *tmp173
   773 op mul *tmp175 2 3
 
   834 set .RET_T_STARTUP @tick
   835 label *label248
   836 label *label249
-    * set :start_reactor*retval :start_reactor:supply_fuel
   837 jump *label250 always
   838 label *label250
   839 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    60 control enabled projector1 false
    61 control enabled projector2 false
    62 set :check_radar*retval false
-    * jump *label108 always
    63 label *label107
    64 label *label108
    65 # "Function: def check_manual_shutdown()"
 
   374 set .RET_T_STARTUP @tick
   375 label *label172
   376 label *label173
-    * jump *label174 always
   377 label *label174
   378 set :fuel_1 :start_reactor:supply_fuel
   379 set :t_startup1 .RET_T_STARTUP
 
   588 set .RET_T_STARTUP @tick
   589 label *label210
   590 label *label211
-    * jump *label212 always
   591 label *label212
   592 set :fuel_2 :start_reactor:supply_fuel
   593 set :t_startup2 .RET_T_STARTUP
 
   631 control enabled projector1 false
   632 control enabled projector2 false
   633 set :check_radar*retval false
-    * jump *label112 always
   634 label *label111
   635 label *label112
   636 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   830 set .RET_T_STARTUP @tick
   831 label *label248
   832 label *label249
-    * jump *label250 always
   833 label *label250
   834 set :fuel_3 :start_reactor:supply_fuel
   835 set :t_startup3 .RET_T_STARTUP
 
   922 label *label19
   923 label *label15
   924 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label13 always
   925 label *label13
   926 jump *label20 equal *tmp32 false
   927 control config unloader7 @pyratite
 
   951 # "Function: def kilo(in val)"
   952 op idiv *tmp93 .AVG_SURPLUS 100
   953 op div :kilo*retval *tmp93 10
-    * jump *label82 always
   954 label *label82
   955 set :surplus :kilo*retval
   956 sensor :kilo:val node1 @powerNetStored
 
   958 # "Function: def kilo(in val)"
   959 op idiv *tmp93 :kilo:val 100
   960 op div :kilo*retval *tmp93 10
-    * jump *label84 always
   961 label *label84
   962 set :charge :kilo*retval
   963 jump *label25 lessThanEq .START_POWER_REQ 0
 
   965 # "Function: def kilo(in val)"
   966 op idiv *tmp93 .START_POWER_REQ 100
   967 op div :kilo*retval *tmp93 10
-    * jump *label86 always
   968 label *label86
   969 print "Req "
   970 print :kilo*retval
 
  1219 label *label76
  1220 label *label77
  1221 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label45 always
  1222 label *label45
  1223 return :start_reactor*retaddr
  1224 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   218 op greaterThan *tmp136 1 1
   219 op mul *tmp137 15 1
   220 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  221 set *tmp139 false
   222 jump *label140 equal *tmp139 false
   223 control enabled reactor1 false
   224 print "STOP system fuel low"
 
   432 op greaterThan *tmp136 2 1
   433 op mul *tmp137 15 2
   434 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  435 set *tmp139 *tmp138
   436 jump *label178 equal *tmp139 false
   437 control enabled reactor2 false
   438 print "STOP system fuel low"
 
   674 op greaterThan *tmp136 3 1
   675 op mul *tmp137 15 3
   676 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  677 set *tmp139 *tmp138
   678 jump *label216 equal *tmp139 false
   679 control enabled reactor3 false
   680 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
    87 op equal *tmp106 *tmp105 false
    88 op or *tmp107 *tmp104 *tmp106
    89 jump *label114 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+   90 set .START_POWER_REQ 0
    91 jump *label116 always
    92 label *label114
    93 label *label115
    94 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    95 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    96 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+   97 set .START_POWER_REQ :calc_charge_req:charge_req
    98 jump *label116 always
    99 label *label116
-    * set .START_POWER_REQ :calc_charge_req*retval
   100 label *label117
   101 # "Function: def calc_charge_req(in reactor, in time)"
   102 op sub *tmp102 @tick :t_startup2
 
   949 label *label81
   950 # "Function: def kilo(in val)"
   951 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  952 op div :surplus *tmp93 10
   953 label *label82
-    * set :surplus :kilo*retval
   954 sensor :kilo:val node1 @powerNetStored
   955 label *label83
   956 # "Function: def kilo(in val)"
 
  1026 op sub *tmp113 @tick :start_reactor:t_startup
  1027 op idiv :start_reactor:secs *tmp113 60
  1028 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+ 1029 set :start_reactor*retval true
  1030 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
  1031 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
  1032 sensor *tmp118 .NODE @powerNetStored
 
  1047 control enabled :start_reactor:reactor false
  1048 print "emergency mode"
  1049 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1050 set :start_reactor*retval false
  1051 jump *label47 always
  1052 label *label46
  1053 jump *label48 equal :start_reactor:enabled false
 
  1107 control enabled :start_reactor:reactor false
  1108 print "START FAIL battery"
  1109 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1110 set :start_reactor*retval false
  1111 jump *label61 always
  1112 label *label60
  1113 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1128 control enabled :start_reactor:reactor false
  1129 print "ABANDON - battery crit"
  1130 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1131 set :start_reactor*retval false
  1132 jump *label63 always
  1133 label *label62
  1134 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1157 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1158 print "IDLE"
  1159 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1160 set :start_reactor*retval false
  1161 jump *label65 always
  1162 label *label64
  1163 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1172 print :start_reactor:flow
  1173 print "W)"
  1174 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1175 set :start_reactor*retval false
  1176 jump *label67 always
  1177 label *label66
  1178 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1216 set .RET_T_STARTUP @tick
  1217 label *label76
  1218 label *label77
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1219 label *label45
  1220 return :start_reactor*retaddr
  1221 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   218 op mul *tmp137 15 1
   219 op lessThan *tmp138 :start_reactor:fuel_stored 15
   220 set *tmp139 false
-    * jump *label140 equal *tmp139 false
+  221 jump *label140 equal false false
   222 control enabled reactor1 false
   223 print "STOP system fuel low"
   224 print "\n"
 
   432 op mul *tmp137 15 2
   433 op lessThan *tmp138 :start_reactor:fuel_stored 30
   434 set *tmp139 *tmp138
-    * jump *label178 equal *tmp139 false
+  435 jump *label178 equal *tmp138 false
   436 control enabled reactor2 false
   437 print "STOP system fuel low"
   438 print "\n"
 
   674 op mul *tmp137 15 3
   675 op lessThan *tmp138 :start_reactor:fuel_stored 45
   676 set *tmp139 *tmp138
-    * jump *label216 equal *tmp139 false
+  677 jump *label216 equal *tmp138 false
   678 control enabled reactor3 false
   679 print "STOP system fuel low"
   680 print "\n"
 
   848 call *label3 :start_reactor*retaddr :start_reactor*retval
   849 set :fuel_5 :start_reactor*retval
   850 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  851 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   852 op or :fuel_many *tmp27 :start_reactor*retval
   853 label *label99
   854 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   218 op mul *tmp137 15 1
   219 op lessThan *tmp138 :start_reactor:fuel_stored 15
   220 set *tmp139 false
-    * jump *label140 equal false false
+  221 jump *label140 always
   222 control enabled reactor1 false
   223 print "STOP system fuel low"
   224 print "\n"

Modifications by Iterated phase, Jump Optimization, pass 3, iteration 1 (-1 instructions):
 
   920 print "n"
   921 label *label19
   922 label *label15
-    * op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   923 label *label13
-    * jump *label20 equal *tmp32 false
+  924 jump *label20 greaterThanEq :throttle_blast:fuel_stored :throttle_blast:limit
   925 control config unloader7 @pyratite
   926 jump *label21 always
   927 label *label20

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    35 label *label7
    36 set .CONTAINER vault1
    37 set .NODE node1
-    * label *label105
    38 # "Function: def check_radar(in unit)"
    39 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    40 jump *label106 equal :check_radar:enemy_found null
 
    72 set *tmp8 true
    73 jump *label10 always
    74 label *label11
-    * label *label12
    75 set *tmp8 false
    76 jump *label10 always
    77 label *label10
    78 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label113
    79 # "Function: def calc_charge_req(in reactor, in time)"
    80 op sub *tmp102 @tick :t_startup1
    81 op idiv :calc_charge_req:secs *tmp102 60
 
    87 set .START_POWER_REQ 0
    88 jump *label116 always
    89 label *label114
-    * label *label115
    90 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    91 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    92 op idiv :calc_charge_req:charge_req *tmp110 0.04
    93 set .START_POWER_REQ :calc_charge_req:charge_req
    94 jump *label116 always
    95 label *label116
-    * label *label117
    96 # "Function: def calc_charge_req(in reactor, in time)"
    97 op sub *tmp102 @tick :t_startup2
    98 op idiv :calc_charge_req:secs *tmp102 60
 
   104 set :calc_charge_req*retval 0
   105 jump *label120 always
   106 label *label118
-    * label *label119
   107 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   108 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   109 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   111 jump *label120 always
   112 label *label120
   113 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label121
   114 # "Function: def calc_charge_req(in reactor, in time)"
   115 op sub *tmp102 @tick :t_startup3
   116 op idiv :calc_charge_req:secs *tmp102 60
 
   122 set :calc_charge_req*retval 0
   123 jump *label124 always
   124 label *label122
-    * label *label123
   125 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   126 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   127 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   129 jump *label124 always
   130 label *label124
   131 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label125
   132 # "Function: def calc_charge_req(in reactor, in time)"
   133 op sub *tmp102 @tick :t_startup4
   134 op idiv :calc_charge_req:secs *tmp102 60
 
   140 set :calc_charge_req*retval 0
   141 jump *label128 always
   142 label *label126
-    * label *label127
   143 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   144 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   145 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   147 jump *label128 always
   148 label *label128
   149 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label129
   150 # "Function: def calc_charge_req(in reactor, in time)"
   151 op sub *tmp102 @tick :t_startup5
   152 op idiv :calc_charge_req:secs *tmp102 60
 
   158 set :calc_charge_req*retval 0
   159 jump *label132 always
   160 label *label130
-    * label *label131
   161 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   162 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   163 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   165 jump *label132 always
   166 label *label132
   167 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label137
   168 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   169 set .RET_T_STARTUP :t_startup1
   170 op sub *tmp113 @tick :t_startup1
 
   224 jump *label153 always
   225 label *label142
   226 jump *label149 greaterThanEq :start_reactor:secs 30
-    * label *label143
   227 # "Function: def calc_charge_req(in reactor, in time)"
   228 op sub *tmp102 @tick :t_startup1
   229 op idiv :calc_charge_req:secs *tmp102 60
 
   235 set :calc_charge_req*retval 0
   236 jump *label146 always
   237 label *label144
-    * label *label145
   238 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   239 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   240 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   357 jump *label172 equal :start_reactor:enabled *tmp201
   358 set .RET_T_STARTUP @tick
   359 label *label172
-    * label *label173
-    * label *label174
   360 set :fuel_1 :start_reactor:supply_fuel
   361 set :t_startup1 .RET_T_STARTUP
-    * label *label87
   362 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   363 jump *label88 equal :start_reactor:supply_fuel false
   364 control config unloader1 @blast-compound
 
   372 label *label90
   373 control config unloader2 @scrap
   374 label *label91
-    * label *label92
-    * label *label175
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :t_startup2
   377 op sub *tmp113 @tick :t_startup2
 
   431 jump *label191 always
   432 label *label180
   433 jump *label187 greaterThanEq :start_reactor:secs 30
-    * label *label181
   434 # "Function: def calc_charge_req(in reactor, in time)"
   435 op sub *tmp102 @tick :t_startup2
   436 op idiv :calc_charge_req:secs *tmp102 60
 
   442 set :calc_charge_req*retval 0
   443 jump *label184 always
   444 label *label182
-    * label *label183
   445 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   446 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   447 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   564 jump *label210 equal :start_reactor:enabled *tmp201
   565 set .RET_T_STARTUP @tick
   566 label *label210
-    * label *label211
-    * label *label212
   567 set :fuel_2 :start_reactor:supply_fuel
   568 set :t_startup2 .RET_T_STARTUP
-    * label *label93
   569 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   570 jump *label94 equal :start_reactor:supply_fuel false
   571 control config unloader3 @blast-compound
 
   579 label *label96
   580 control config unloader4 @scrap
   581 label *label97
-    * label *label98
-    * label *label109
   582 # "Function: def check_radar(in unit)"
   583 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   584 jump *label110 equal :check_radar:enemy_found null
 
   606 label *label111
   607 label *label112
   608 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label213
   609 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   610 set .RET_T_STARTUP :t_startup3
   611 op sub *tmp113 @tick :t_startup3
 
   665 jump *label229 always
   666 label *label218
   667 jump *label225 greaterThanEq :start_reactor:secs 30
-    * label *label219
   668 # "Function: def calc_charge_req(in reactor, in time)"
   669 op sub *tmp102 @tick :t_startup3
   670 op idiv :calc_charge_req:secs *tmp102 60
 
   676 set :calc_charge_req*retval 0
   677 jump *label222 always
   678 label *label220
-    * label *label221
   679 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   680 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   681 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   798 jump *label248 equal :start_reactor:enabled *tmp201
   799 set .RET_T_STARTUP @tick
   800 label *label248
-    * label *label249
-    * label *label250
   801 set :fuel_3 :start_reactor:supply_fuel
   802 set :t_startup3 .RET_T_STARTUP
   803 set :start_reactor:reactor reactor4
 
   818 set :t_startup5 .RET_T_STARTUP
   819 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   820 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label99
   821 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   822 jump *label100 equal :fuel_many false
   823 control config unloader5 @blast-compound
 
   831 label *label102
   832 control config unloader6 @scrap
   833 label *label103
-    * label *label104
   834 op or *tmp30 :fuel_1 :fuel_2
   835 op or *tmp31 *tmp30 :fuel_many
   836 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   886 print "n"
   887 label *label19
   888 label *label15
-    * label *label13
   889 jump *label20 greaterThanEq :throttle_blast:fuel_stored :throttle_blast:limit
   890 control config unloader7 @pyratite
   891 jump *label21 always
 
   909 control enabled generator1 true
   910 control enabled generator2 true
   911 label *label24
-    * label *label22
-    * label *label81
   912 # "Function: def kilo(in val)"
   913 op idiv *tmp93 .AVG_SURPLUS 100
   914 op div :surplus *tmp93 10
-    * label *label82
   915 sensor :kilo:val node1 @powerNetStored
-    * label *label83
   916 # "Function: def kilo(in val)"
   917 op idiv *tmp93 :kilo:val 100
   918 op div :kilo*retval *tmp93 10
-    * label *label84
   919 set :charge :kilo*retval
   920 jump *label25 lessThanEq .START_POWER_REQ 0
-    * label *label85
   921 # "Function: def kilo(in val)"
   922 op idiv *tmp93 .START_POWER_REQ 100
   923 op div :kilo*retval *tmp93 10
-    * label *label86
   924 print "Req "
   925 print :kilo*retval
   926 print "kJ / "
 
   949 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   950 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   951 label *label30
-    * label *label31
   952 label *label28
-    * label *label29
   953 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   954 op lessThan *tmp83 .AVG_SURPLUS 8000
   955 op land *tmp84 *tmp81 *tmp83
 
   960 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   961 op min .REACTORS_DESIRED 5 *tmp89
   962 label *label32
-    * label *label33
-    * label *label27
   963 label *label26
   964 jump *label34 equal .REACTORS_DESIRED 5
   965 print "Require only "
 
   967 print "/5 reactors."
   968 print "\n"
   969 label *label34
-    * label *label35
   970 printflush message1
-    * label *label8
   971 jump *label7 always
-    * label *label9
   972 end
   973 label *label3
   974 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
 
  1030 jump *label57 always
  1031 label *label56
  1032 jump *label58 greaterThanEq :start_reactor:secs 30
-    * label *label133
  1033 # "Function: def calc_charge_req(in reactor, in time)"
  1034 op sub *tmp102 @tick :start_reactor:t_startup
  1035 op idiv :calc_charge_req:secs *tmp102 60
 
  1041 set :calc_charge_req*retval 0
  1042 jump *label136 always
  1043 label *label134
-    * label *label135
  1044 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
  1045 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1046 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1163 jump *label76 equal :start_reactor:enabled *tmp201
  1164 set .RET_T_STARTUP @tick
  1165 label *label76
-    * label *label77
-    * label *label45
  1166 return :start_reactor*retaddr
  1167 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   199 control enabled reactor1 false
   200 print "STOP unwanted"
   201 print "\n"
-    * jump *label156 always
+  202 jump *label170 always
   203 label *label139
   204 op greaterThan *tmp136 1 1
   205 op mul *tmp137 15 1
 
   209 control enabled reactor1 false
   210 print "STOP system fuel low"
   211 print "\n"
-    * jump *label155 always
+  212 jump *label170 always
   213 label *label140
   214 jump *label141 greaterThan :start_reactor:fuel 1
   215 control enabled reactor1 false
   216 print "STOP fuel low"
   217 print "\n"
-    * jump *label154 always
+  218 jump *label170 always
   219 label *label141
   220 jump *label142 greaterThan :start_reactor:cryo 1
   221 control enabled reactor1 false
   222 print "STOP out of cryo"
   223 print "\n"
-    * jump *label153 always
+  224 jump *label170 always
   225 label *label142
   226 jump *label149 greaterThanEq :start_reactor:secs 30
   227 # "Function: def calc_charge_req(in reactor, in time)"
 
   250 print "START FAIL battery"
   251 print "\n"
   252 set :start_reactor:supply_fuel false
-    * jump *label148 always
+  253 jump *label170 always
   254 label *label147
   255 op sub :start_reactor:time_left 30 :start_reactor:secs
   256 print "Starting "
 
   261 print "J"
   262 print "\n"
   263 label *label148
-    * jump *label152 always
+  264 jump *label170 always
   265 label *label149
   266 op lessThan *tmp161 :start_reactor:charge 2000
   267 op lessThan *tmp162 :start_reactor:surplus -500
 
   271 print "ABANDON - battery crit"
   272 print "\n"
   273 set :start_reactor:supply_fuel false
-    * jump *label151 always
+  274 jump *label170 always
   275 label *label150
   276 op idiv :start_reactor:mins :start_reactor:secs 6
   277 op div :start_reactor:mins :start_reactor:mins 10
 
   324 jump *label160 lessThanEq *tmp191 10
   325 print "WAIT fuel"
   326 print "\n"
-    * jump *label161 always
+  327 jump *label167 always
   328 label *label160
   329 print "WAIT system fuel"
   330 print "\n"
 
   406 control enabled reactor2 false
   407 print "STOP unwanted"
   408 print "\n"
-    * jump *label194 always
+  409 jump *label208 always
   410 label *label177
   411 op greaterThan *tmp136 2 1
   412 op mul *tmp137 15 2
 
   416 control enabled reactor2 false
   417 print "STOP system fuel low"
   418 print "\n"
-    * jump *label193 always
+  419 jump *label208 always
   420 label *label178
   421 jump *label179 greaterThan :start_reactor:fuel 1
   422 control enabled reactor2 false
   423 print "STOP fuel low"
   424 print "\n"
-    * jump *label192 always
+  425 jump *label208 always
   426 label *label179
   427 jump *label180 greaterThan :start_reactor:cryo 1
   428 control enabled reactor2 false
   429 print "STOP out of cryo"
   430 print "\n"
-    * jump *label191 always
+  431 jump *label208 always
   432 label *label180
   433 jump *label187 greaterThanEq :start_reactor:secs 30
   434 # "Function: def calc_charge_req(in reactor, in time)"
 
   457 print "START FAIL battery"
   458 print "\n"
   459 set :start_reactor:supply_fuel false
-    * jump *label186 always
+  460 jump *label208 always
   461 label *label185
   462 op sub :start_reactor:time_left 30 :start_reactor:secs
   463 print "Starting "
 
   468 print "J"
   469 print "\n"
   470 label *label186
-    * jump *label190 always
+  471 jump *label208 always
   472 label *label187
   473 op lessThan *tmp161 :start_reactor:charge 2000
   474 op lessThan *tmp162 :start_reactor:surplus -500
 
   478 print "ABANDON - battery crit"
   479 print "\n"
   480 set :start_reactor:supply_fuel false
-    * jump *label189 always
+  481 jump *label208 always
   482 label *label188
   483 op idiv :start_reactor:mins :start_reactor:secs 6
   484 op div :start_reactor:mins :start_reactor:mins 10
 
   531 jump *label198 lessThanEq *tmp191 10
   532 print "WAIT fuel"
   533 print "\n"
-    * jump *label199 always
+  534 jump *label205 always
   535 label *label198
   536 print "WAIT system fuel"
   537 print "\n"
 
   640 control enabled reactor3 false
   641 print "STOP unwanted"
   642 print "\n"
-    * jump *label232 always
+  643 jump *label246 always
   644 label *label215
   645 op greaterThan *tmp136 3 1
   646 op mul *tmp137 15 3
 
   650 control enabled reactor3 false
   651 print "STOP system fuel low"
   652 print "\n"
-    * jump *label231 always
+  653 jump *label246 always
   654 label *label216
   655 jump *label217 greaterThan :start_reactor:fuel 1
   656 control enabled reactor3 false
   657 print "STOP fuel low"
   658 print "\n"
-    * jump *label230 always
+  659 jump *label246 always
   660 label *label217
   661 jump *label218 greaterThan :start_reactor:cryo 1
   662 control enabled reactor3 false
   663 print "STOP out of cryo"
   664 print "\n"
-    * jump *label229 always
+  665 jump *label246 always
   666 label *label218
   667 jump *label225 greaterThanEq :start_reactor:secs 30
   668 # "Function: def calc_charge_req(in reactor, in time)"
 
   691 print "START FAIL battery"
   692 print "\n"
   693 set :start_reactor:supply_fuel false
-    * jump *label224 always
+  694 jump *label246 always
   695 label *label223
   696 op sub :start_reactor:time_left 30 :start_reactor:secs
   697 print "Starting "
 
   702 print "J"
   703 print "\n"
   704 label *label224
-    * jump *label228 always
+  705 jump *label246 always
   706 label *label225
   707 op lessThan *tmp161 :start_reactor:charge 2000
   708 op lessThan *tmp162 :start_reactor:surplus -500
 
   712 print "ABANDON - battery crit"
   713 print "\n"
   714 set :start_reactor:supply_fuel false
-    * jump *label227 always
+  715 jump *label246 always
   716 label *label226
   717 op idiv :start_reactor:mins :start_reactor:secs 6
   718 op div :start_reactor:mins :start_reactor:mins 10
 
   765 jump *label236 lessThanEq *tmp191 10
   766 print "WAIT fuel"
   767 print "\n"
-    * jump *label237 always
+  768 jump *label243 always
   769 label *label236
   770 print "WAIT system fuel"
   771 print "\n"
 
   857 jump *label16 equal :emerg_shutdown false
   858 print " Enemies detected."
   859 print "\n"
-    * jump *label17 always
+  860 jump *label15 always
   861 label *label16
   862 print " Critical power."
   863 print "\n"
 
  1005 control enabled :start_reactor:reactor false
  1006 print "STOP unwanted"
  1007 print "\n"
-    * jump *label51 always
+ 1008 jump *label49 always
  1009 label *label50
  1010 op greaterThan *tmp136 :start_reactor:reactor_num 1
  1011 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
  1015 control enabled :start_reactor:reactor false
  1016 print "STOP system fuel low"
  1017 print "\n"
-    * jump *label53 always
+ 1018 jump *label49 always
  1019 label *label52
  1020 jump *label54 greaterThan :start_reactor:fuel 1
  1021 control enabled :start_reactor:reactor false
  1022 print "STOP fuel low"
  1023 print "\n"
-    * jump *label55 always
+ 1024 jump *label49 always
  1025 label *label54
  1026 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
  1027 control enabled :start_reactor:reactor false
  1028 print "STOP out of cryo"
  1029 print "\n"
-    * jump *label57 always
+ 1030 jump *label49 always
  1031 label *label56
  1032 jump *label58 greaterThanEq :start_reactor:secs 30
  1033 # "Function: def calc_charge_req(in reactor, in time)"
 
  1056 print "START FAIL battery"
  1057 print "\n"
  1058 set :start_reactor*retval false
-    * jump *label61 always
+ 1059 jump *label49 always
  1060 label *label60
  1061 op sub :start_reactor:time_left 30 :start_reactor:secs
  1062 print "Starting "
 
  1067 print "J"
  1068 print "\n"
  1069 label *label61
-    * jump *label59 always
+ 1070 jump *label49 always
  1071 label *label58
  1072 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1073 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1077 print "ABANDON - battery crit"
  1078 print "\n"
  1079 set :start_reactor*retval false
-    * jump *label63 always
+ 1080 jump *label49 always
  1081 label *label62
  1082 op idiv :start_reactor:mins :start_reactor:secs 6
  1083 op div :start_reactor:mins :start_reactor:mins 10
 
  1130 jump *label70 lessThanEq *tmp191 .FUEL_REQ
  1131 print "WAIT fuel"
  1132 print "\n"
-    * jump *label71 always
+ 1133 jump *label69 always
  1134 label *label70
  1135 print "WAIT system fuel"
  1136 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    54 control enabled reactor5 false
    55 set :check_radar*retval true
    56 jump *label108 always
-    * jump *label107 always
    57 label *label106
    58 control enabled projector1 false
    59 control enabled projector2 false
 
   205 op lessThan *tmp138 :start_reactor:fuel_stored 15
   206 set *tmp139 false
   207 jump *label140 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label170 always
   208 label *label140
   209 jump *label141 greaterThan :start_reactor:fuel 1
   210 control enabled reactor1 false
 
   255 print :calc_charge_req*retval
   256 print "J"
   257 print "\n"
-    * label *label148
   258 jump *label170 always
   259 label *label149
   260 op lessThan *tmp161 :start_reactor:charge 2000
 
   274 print " "
   275 print "mins"
   276 print "\n"
-    * label *label151
-    * label *label152
-    * label *label153
-    * label *label154
-    * label *label155
-    * label *label156
   277 jump *label170 always
   278 label *label157
   279 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   316 label *label160
   317 print "WAIT system fuel"
   318 print "\n"
-    * label *label161
   319 jump *label167 always
   320 label *label162
   321 op mul *tmp194 45 1
 
   454 print :calc_charge_req*retval
   455 print "J"
   456 print "\n"
-    * label *label186
   457 jump *label208 always
   458 label *label187
   459 op lessThan *tmp161 :start_reactor:charge 2000
 
   473 print " "
   474 print "mins"
   475 print "\n"
-    * label *label189
-    * label *label190
-    * label *label191
-    * label *label192
-    * label *label193
-    * label *label194
   476 jump *label208 always
   477 label *label195
   478 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   515 label *label198
   516 print "WAIT system fuel"
   517 print "\n"
-    * label *label199
   518 jump *label205 always
   519 label *label200
   520 op mul *tmp194 45 2
 
   577 control enabled reactor5 false
   578 set :check_radar*retval true
   579 jump *label112 always
-    * jump *label111 always
   580 label *label110
   581 control enabled projector1 false
   582 control enabled projector2 false
 
   679 print :calc_charge_req*retval
   680 print "J"
   681 print "\n"
-    * label *label224
   682 jump *label246 always
   683 label *label225
   684 op lessThan *tmp161 :start_reactor:charge 2000
 
   698 print " "
   699 print "mins"
   700 print "\n"
-    * label *label227
-    * label *label228
-    * label *label229
-    * label *label230
-    * label *label231
-    * label *label232
   701 jump *label246 always
   702 label *label233
   703 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   740 label *label236
   741 print "WAIT system fuel"
   742 print "\n"
-    * label *label237
   743 jump *label243 always
   744 label *label238
   745 op mul *tmp194 45 3
 
   831 label *label16
   832 print " Critical power."
   833 print "\n"
-    * label *label17
   834 jump *label15 always
   835 label *label14
   836 jump *label18 notEqual *tmp31 false
 
   938 label *label34
   939 printflush message1
   940 jump *label7 always
-    * end
   941 label *label3
   942 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   943 set .RET_T_STARTUP :start_reactor:t_startup
 
  1034 print :calc_charge_req*retval
  1035 print "J"
  1036 print "\n"
-    * label *label61
  1037 jump *label49 always
  1038 label *label58
  1039 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
  1053 print " "
  1054 print "mins"
  1055 print "\n"
-    * label *label63
-    * label *label59
-    * label *label57
-    * label *label55
-    * label *label53
-    * label *label51
  1056 jump *label49 always
  1057 label *label48
  1058 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1095 label *label70
  1096 print "WAIT system fuel"
  1097 print "\n"
-    * label *label71
  1098 jump *label69 always
  1099 label *label68
  1100 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1124 set .RET_T_STARTUP @tick
  1125 label *label76
  1126 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1:
 
    58 control enabled projector1 false
    59 control enabled projector2 false
    60 set :check_radar*retval false
-    * label *label107
    61 label *label108
    62 # "Function: def check_manual_shutdown()"
    63 op notEqual *tmp9 switch1 null
 
   580 control enabled projector1 false
   581 control enabled projector2 false
   582 set :check_radar*retval false
-    * label *label111
   583 label *label112
   584 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   585 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   203 op mul *tmp137 15 1
   204 op lessThan *tmp138 :start_reactor:fuel_stored 15
   205 set *tmp139 false
-    * jump *label140 always
   206 label *label140
   207 jump *label141 greaterThan :start_reactor:fuel 1
   208 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   203 op mul *tmp137 15 1
   204 op lessThan *tmp138 :start_reactor:fuel_stored 15
   205 set *tmp139 false
-    * label *label140
   206 jump *label141 greaterThan :start_reactor:fuel 1
   207 control enabled reactor1 false
   208 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    65 op equal *tmp11 *tmp10 false
    66 op land *tmp12 *tmp9 *tmp11
    67 jump *label11 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   68 print "User has disabled emergency switch\n"
    69 set *tmp8 true
    70 jump *label10 always
    71 label *label11
 
   180 op mul *tmp125 :start_reactor:surplus 0.2
   181 op add .AVG_SURPLUS *tmp124 *tmp125
   182 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  183 print "#1 - "
   184 jump *label138 equal :emerg_shutdown false
   185 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  186 print "emergency mode\n"
   187 set :start_reactor:supply_fuel false
   188 jump *label171 always
   189 label *label138
   190 jump *label157 equal :start_reactor:enabled false
   191 jump *label139 greaterThanEq .REACTORS_DESIRED 1
   192 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  193 print "STOP unwanted\n"
   194 jump *label170 always
   195 label *label139
   196 op greaterThan *tmp136 1 1
 
   199 set *tmp139 false
   200 jump *label141 greaterThan :start_reactor:fuel 1
   201 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  202 print "STOP fuel low\n"
   203 jump *label170 always
   204 label *label141
   205 jump *label142 greaterThan :start_reactor:cryo 1
   206 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  207 print "STOP out of cryo\n"
   208 jump *label170 always
   209 label *label142
   210 jump *label149 greaterThanEq :start_reactor:secs 30
 
   231 op land *tmp156 *tmp154 *tmp155
   232 jump *label147 equal *tmp156 false
   233 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  234 print "START FAIL battery\n"
   235 set :start_reactor:supply_fuel false
   236 jump *label170 always
   237 label *label147
   238 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  239 print "Starting {0} secs, req {0}J\n"
+  240 format :start_reactor:time_left
+  241 format :calc_charge_req*retval
   242 jump *label170 always
   243 label *label149
   244 op lessThan *tmp161 :start_reactor:charge 2000
 
   246 op land *tmp163 *tmp161 *tmp162
   247 jump *label150 equal *tmp163 false
   248 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  249 print "ABANDON - battery crit\n"
   250 set :start_reactor:supply_fuel false
   251 jump *label170 always
   252 label *label150
   253 op idiv :start_reactor:mins :start_reactor:secs 6
   254 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  255 print "RUN {0} mins\n"
+  256 format :start_reactor:mins
   257 jump *label170 always
   258 label *label157
   259 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   265 op mul *tmp175 2 1
   266 op add :start_reactor:cryo_req 3 2
   267 jump *label158 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  268 print "IDLE\n"
   269 set :start_reactor:supply_fuel false
   270 jump *label169 always
   271 label *label158
 
   275 op div :start_reactor:flow *tmp183 10
   276 op idiv *tmp186 :start_reactor:charge_units 0.001
   277 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  278 print "WAIT power. (%{0}J + %{0}W)\n"
+  279 format :start_reactor:charge
+  280 format :start_reactor:flow
   281 set :start_reactor:supply_fuel false
   282 jump *label168 always
   283 label *label159
 
   286 jump *label162 equal *tmp189 false
   287 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   288 jump *label160 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  289 print "WAIT fuel\n"
   290 jump *label167 always
   291 label *label160
-    * print "WAIT system fuel"
-    * print "\n"
+  292 print "WAIT system fuel\n"
   293 jump *label167 always
   294 label *label162
   295 op mul *tmp194 45 1
   296 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  297 print "WAIT buffer fuel\n"
   298 jump *label166 always
   299 label *label163
   300 jump *label164 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  301 print "WAIT cryo\n"
   302 jump *label165 always
   303 label *label164
-    * print "STARTUP"
-    * print "\n"
+  304 print "STARTUP\n"
   305 op add .START_POWER_REQ .START_POWER_REQ 23000
   306 control enabled reactor1 true
   307 label *label165
 
   348 op mul *tmp125 :start_reactor:surplus 0.2
   349 op add .AVG_SURPLUS *tmp124 *tmp125
   350 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  351 print "#2 - "
   352 jump *label176 equal :emerg_shutdown false
   353 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  354 print "emergency mode\n"
   355 set :start_reactor:supply_fuel false
   356 jump *label209 always
   357 label *label176
   358 jump *label195 equal :start_reactor:enabled false
   359 jump *label177 greaterThanEq .REACTORS_DESIRED 2
   360 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  361 print "STOP unwanted\n"
   362 jump *label208 always
   363 label *label177
   364 op greaterThan *tmp136 2 1
 
   367 set *tmp139 *tmp138
   368 jump *label178 equal *tmp138 false
   369 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  370 print "STOP system fuel low\n"
   371 jump *label208 always
   372 label *label178
   373 jump *label179 greaterThan :start_reactor:fuel 1
   374 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  375 print "STOP fuel low\n"
   376 jump *label208 always
   377 label *label179
   378 jump *label180 greaterThan :start_reactor:cryo 1
   379 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  380 print "STOP out of cryo\n"
   381 jump *label208 always
   382 label *label180
   383 jump *label187 greaterThanEq :start_reactor:secs 30
 
   404 op land *tmp156 *tmp154 *tmp155
   405 jump *label185 equal *tmp156 false
   406 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  407 print "START FAIL battery\n"
   408 set :start_reactor:supply_fuel false
   409 jump *label208 always
   410 label *label185
   411 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  412 print "Starting {0} secs, req {0}J\n"
+  413 format :start_reactor:time_left
+  414 format :calc_charge_req*retval
   415 jump *label208 always
   416 label *label187
   417 op lessThan *tmp161 :start_reactor:charge 2000
 
   419 op land *tmp163 *tmp161 *tmp162
   420 jump *label188 equal *tmp163 false
   421 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  422 print "ABANDON - battery crit\n"
   423 set :start_reactor:supply_fuel false
   424 jump *label208 always
   425 label *label188
   426 op idiv :start_reactor:mins :start_reactor:secs 6
   427 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  428 print "RUN {0} mins\n"
+  429 format :start_reactor:mins
   430 jump *label208 always
   431 label *label195
   432 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   438 op mul *tmp175 2 2
   439 op add :start_reactor:cryo_req 3 4
   440 jump *label196 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  441 print "IDLE\n"
   442 set :start_reactor:supply_fuel false
   443 jump *label207 always
   444 label *label196
 
   448 op div :start_reactor:flow *tmp183 10
   449 op idiv *tmp186 :start_reactor:charge_units 0.001
   450 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  451 print "WAIT power. (%{0}J + %{0}W)\n"
+  452 format :start_reactor:charge
+  453 format :start_reactor:flow
   454 set :start_reactor:supply_fuel false
   455 jump *label206 always
   456 label *label197
 
   459 jump *label200 equal *tmp189 false
   460 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   461 jump *label198 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  462 print "WAIT fuel\n"
   463 jump *label205 always
   464 label *label198
-    * print "WAIT system fuel"
-    * print "\n"
+  465 print "WAIT system fuel\n"
   466 jump *label205 always
   467 label *label200
   468 op mul *tmp194 45 2
   469 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  470 print "WAIT buffer fuel\n"
   471 jump *label204 always
   472 label *label201
   473 jump *label202 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  474 print "WAIT cryo\n"
   475 jump *label203 always
   476 label *label202
-    * print "STARTUP"
-    * print "\n"
+  477 print "STARTUP\n"
   478 op add .START_POWER_REQ .START_POWER_REQ 23000
   479 control enabled reactor2 true
   480 label *label203
 
   546 op mul *tmp125 :start_reactor:surplus 0.2
   547 op add .AVG_SURPLUS *tmp124 *tmp125
   548 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  549 print "#3 - "
   550 jump *label214 equal :emerg_shutdown false
   551 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  552 print "emergency mode\n"
   553 set :start_reactor:supply_fuel false
   554 jump *label247 always
   555 label *label214
   556 jump *label233 equal :start_reactor:enabled false
   557 jump *label215 greaterThanEq .REACTORS_DESIRED 3
   558 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  559 print "STOP unwanted\n"
   560 jump *label246 always
   561 label *label215
   562 op greaterThan *tmp136 3 1
 
   565 set *tmp139 *tmp138
   566 jump *label216 equal *tmp138 false
   567 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  568 print "STOP system fuel low\n"
   569 jump *label246 always
   570 label *label216
   571 jump *label217 greaterThan :start_reactor:fuel 1
   572 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  573 print "STOP fuel low\n"
   574 jump *label246 always
   575 label *label217
   576 jump *label218 greaterThan :start_reactor:cryo 1
   577 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  578 print "STOP out of cryo\n"
   579 jump *label246 always
   580 label *label218
   581 jump *label225 greaterThanEq :start_reactor:secs 30
 
   602 op land *tmp156 *tmp154 *tmp155
   603 jump *label223 equal *tmp156 false
   604 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  605 print "START FAIL battery\n"
   606 set :start_reactor:supply_fuel false
   607 jump *label246 always
   608 label *label223
   609 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  610 print "Starting {0} secs, req {0}J\n"
+  611 format :start_reactor:time_left
+  612 format :calc_charge_req*retval
   613 jump *label246 always
   614 label *label225
   615 op lessThan *tmp161 :start_reactor:charge 2000
 
   617 op land *tmp163 *tmp161 *tmp162
   618 jump *label226 equal *tmp163 false
   619 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  620 print "ABANDON - battery crit\n"
   621 set :start_reactor:supply_fuel false
   622 jump *label246 always
   623 label *label226
   624 op idiv :start_reactor:mins :start_reactor:secs 6
   625 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  626 print "RUN {0} mins\n"
+  627 format :start_reactor:mins
   628 jump *label246 always
   629 label *label233
   630 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   636 op mul *tmp175 2 3
   637 op add :start_reactor:cryo_req 3 6
   638 jump *label234 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  639 print "IDLE\n"
   640 set :start_reactor:supply_fuel false
   641 jump *label245 always
   642 label *label234
 
   646 op div :start_reactor:flow *tmp183 10
   647 op idiv *tmp186 :start_reactor:charge_units 0.001
   648 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  649 print "WAIT power. (%{0}J + %{0}W)\n"
+  650 format :start_reactor:charge
+  651 format :start_reactor:flow
   652 set :start_reactor:supply_fuel false
   653 jump *label244 always
   654 label *label235
 
   657 jump *label238 equal *tmp189 false
   658 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   659 jump *label236 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  660 print "WAIT fuel\n"
   661 jump *label243 always
   662 label *label236
-    * print "WAIT system fuel"
-    * print "\n"
+  663 print "WAIT system fuel\n"
   664 jump *label243 always
   665 label *label238
   666 op mul *tmp194 45 3
   667 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  668 print "WAIT buffer fuel\n"
   669 jump *label242 always
   670 label *label239
   671 jump *label240 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  672 print "WAIT cryo\n"
   673 jump *label241 always
   674 label *label240
-    * print "STARTUP"
-    * print "\n"
+  675 print "STARTUP\n"
   676 op add .START_POWER_REQ .START_POWER_REQ 23000
   677 control enabled reactor3 true
   678 label *label241
 
   735 op or *tmp43 *tmp42 :emerg_shutdown
   736 jump *label14 equal *tmp43 false
   737 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  738 print "Central Fuel at {0} / 0 - "
+  739 format :throttle_blast:fuel_stored
   740 jump *label16 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  741 print " Enemies detected.\n"
   742 jump *label15 always
   743 label *label16
-    * print " Critical power."
-    * print "\n"
+  744 print " Critical power.\n"
   745 jump *label15 always
   746 label *label14
   747 jump *label18 notEqual *tmp31 false
   748 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  749 print "Fuel {0} / 150 (due to emergency)\n"
+  750 format :throttle_blast:fuel_stored
   751 jump *label19 always
   752 label *label18
   753 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  754 print "Fuel {0} / 800\n"
+  755 format :throttle_blast:fuel_stored
   756 label *label19
   757 label *label15
   758 jump *label20 greaterThanEq :throttle_blast:fuel_stored :throttle_blast:limit
 
   769 op lessThan *tmp57 .START_POWER_REQ 10
   770 op land *tmp58 *tmp56 *tmp57
   771 jump *label23 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  772 print "Differential now idle.\n"
   773 control enabled generator1 false
   774 control enabled generator2 false
   775 jump *label24 always
 
   789 # "Function: def kilo(in val)"
   790 op idiv *tmp93 .START_POWER_REQ 100
   791 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  792 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  793 format :kilo*retval
+  794 format :charge
+  795 format :surplus
   796 jump *label26 always
   797 label *label25
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  798 print "Power {0}kW, {0}kJ\n"
+  799 format :surplus
+  800 format :kilo*retval
   801 # "Function: def update_reactors_desired()"
   802 sensor *tmp71 node1 @powerNetStored
   803 sensor *tmp72 node1 @powerNetCapacity
 
   823 label *label32
   824 label *label26
   825 jump *label34 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  826 print "Require only {0}/5 reactors.\n"
+  827 format .REACTORS_DESIRED
   828 label *label34
   829 printflush message1
   830 jump *label7 always
 
   847 op mul *tmp125 :start_reactor:surplus 0.2
   848 op add .AVG_SURPLUS *tmp124 *tmp125
   849 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  850 print "#{0} - "
+  851 format :start_reactor:reactor_num
   852 jump *label46 equal :start_reactor:emerg_shutdown false
   853 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  854 print "emergency mode\n"
   855 set :start_reactor*retval false
   856 jump *label47 always
   857 label *label46
   858 jump *label48 equal :start_reactor:enabled false
   859 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   860 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  861 print "STOP unwanted\n"
   862 jump *label49 always
   863 label *label50
   864 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   867 op land *tmp139 *tmp136 *tmp138
   868 jump *label52 equal *tmp139 false
   869 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  870 print "STOP system fuel low\n"
   871 jump *label49 always
   872 label *label52
   873 jump *label54 greaterThan :start_reactor:fuel 1
   874 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  875 print "STOP fuel low\n"
   876 jump *label49 always
   877 label *label54
   878 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   879 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  880 print "STOP out of cryo\n"
   881 jump *label49 always
   882 label *label56
   883 jump *label58 greaterThanEq :start_reactor:secs 30
 
   904 op land *tmp156 *tmp154 *tmp155
   905 jump *label60 equal *tmp156 false
   906 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  907 print "START FAIL battery\n"
   908 set :start_reactor*retval false
   909 jump *label49 always
   910 label *label60
   911 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  912 print "Starting {0} secs, req {0}J\n"
+  913 format :start_reactor:time_left
+  914 format :calc_charge_req*retval
   915 jump *label49 always
   916 label *label58
   917 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   919 op land *tmp163 *tmp161 *tmp162
   920 jump *label62 equal *tmp163 false
   921 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  922 print "ABANDON - battery crit\n"
   923 set :start_reactor*retval false
   924 jump *label49 always
   925 label *label62
   926 op idiv :start_reactor:mins :start_reactor:secs 6
   927 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  928 print "RUN {0} mins\n"
+  929 format :start_reactor:mins
   930 jump *label49 always
   931 label *label48
   932 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   938 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   939 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   940 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  941 print "IDLE\n"
   942 set :start_reactor*retval false
   943 jump *label65 always
   944 label *label64
 
   948 op div :start_reactor:flow *tmp183 10
   949 op idiv *tmp186 :start_reactor:charge_units 0.001
   950 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  951 print "WAIT power. (%{0}J + %{0}W)\n"
+  952 format :start_reactor:charge
+  953 format :start_reactor:flow
   954 set :start_reactor*retval false
   955 jump *label67 always
   956 label *label66
 
   959 jump *label68 equal *tmp189 false
   960 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   961 jump *label70 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  962 print "WAIT fuel\n"
   963 jump *label69 always
   964 label *label70
-    * print "WAIT system fuel"
-    * print "\n"
+  965 print "WAIT system fuel\n"
   966 jump *label69 always
   967 label *label68
   968 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   969 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  970 print "WAIT buffer fuel\n"
   971 jump *label73 always
   972 label *label72
   973 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  974 print "WAIT cryo\n"
   975 jump *label75 always
   976 label *label74
-    * print "STARTUP"
-    * print "\n"
+  977 print "STARTUP\n"
   978 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   979 control enabled :start_reactor:reactor true
   980 label *label75

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label106 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label108 always
label *label106
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label108
# "Function: def check_manual_shutdown()"
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label11 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
jump *label10 always
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label114 equal *tmp107 false
set .START_POWER_REQ 0
jump *label116 always
label *label114
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label116 always
label *label116
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label118 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label120 always
label *label118
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label120 always
label *label120
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label122 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label124 always
label *label122
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label124 always
label *label124
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label126 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label128 always
label *label126
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label128 always
label *label128
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label130 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label132 always
label *label130
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label132 always
label *label132
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label138 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label171 always
label *label138
jump *label157 equal :start_reactor:enabled false
jump *label139 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label170 always
label *label139
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label141 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label170 always
label *label141
jump *label142 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label170 always
label *label142
jump *label149 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label144 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label146 always
label *label144
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label146 always
label *label146
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label147 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label147
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label170 always
label *label149
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label150 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label150
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label170 always
label *label157
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label158 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label169 always
label *label158
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label159 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label168 always
label *label159
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label162 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label160 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label167 always
label *label160
print "WAIT system fuel\n"
jump *label167 always
label *label162
op mul *tmp194 45 1
jump *label163 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label166 always
label *label163
jump *label164 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label165 always
label *label164
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label165
label *label166
label *label167
label *label168
label *label169
label *label170
label *label171
sensor *tmp201 reactor1 @enabled
jump *label172 equal :start_reactor:enabled *tmp201
set .RET_T_STARTUP @tick
label *label172
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label88 equal :start_reactor:supply_fuel false
control config unloader1 @blast-compound
jump *label89 always
label *label88
control config unloader1 @scrap
label *label89
jump *label90 notEqual :start_reactor:supply_fuel false
control config unloader2 @blast-compound
jump *label91 always
label *label90
control config unloader2 @scrap
label *label91
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label176 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label209 always
label *label176
jump *label195 equal :start_reactor:enabled false
jump *label177 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label208 always
label *label177
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label178 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label208 always
label *label178
jump *label179 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label208 always
label *label179
jump *label180 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label208 always
label *label180
jump *label187 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label182 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label184 always
label *label182
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label184 always
label *label184
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label185 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label185
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label208 always
label *label187
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label188 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label188
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label208 always
label *label195
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label196 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label207 always
label *label196
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label197 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label206 always
label *label197
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label200 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label198 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label205 always
label *label198
print "WAIT system fuel\n"
jump *label205 always
label *label200
op mul *tmp194 45 2
jump *label201 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label204 always
label *label201
jump *label202 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label203 always
label *label202
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label203
label *label204
label *label205
label *label206
label *label207
label *label208
label *label209
sensor *tmp201 reactor2 @enabled
jump *label210 equal :start_reactor:enabled *tmp201
set .RET_T_STARTUP @tick
label *label210
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label94 equal :start_reactor:supply_fuel false
control config unloader3 @blast-compound
jump *label95 always
label *label94
control config unloader3 @scrap
label *label95
jump *label96 notEqual :start_reactor:supply_fuel false
control config unloader4 @blast-compound
jump *label97 always
label *label96
control config unloader4 @scrap
label *label97
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label110 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label112 always
label *label110
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label112
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label214 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label247 always
label *label214
jump *label233 equal :start_reactor:enabled false
jump *label215 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label246 always
label *label215
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label216 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label246 always
label *label216
jump *label217 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label246 always
label *label217
jump *label218 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label246 always
label *label218
jump *label225 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label220 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label222 always
label *label220
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label222 always
label *label222
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label223 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label223
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label246 always
label *label225
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label226 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label226
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label246 always
label *label233
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label234 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label245 always
label *label234
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label235 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label244 always
label *label235
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label238 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label236 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label243 always
label *label236
print "WAIT system fuel\n"
jump *label243 always
label *label238
op mul *tmp194 45 3
jump *label239 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label242 always
label *label239
jump *label240 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label241 always
label *label240
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label241
label *label242
label *label243
label *label244
label *label245
label *label246
label *label247
sensor *tmp201 reactor3 @enabled
jump *label248 equal :start_reactor:enabled *tmp201
set .RET_T_STARTUP @tick
label *label248
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label100 equal :fuel_many false
control config unloader5 @blast-compound
jump *label101 always
label *label100
control config unloader5 @scrap
label *label101
jump *label102 notEqual :fuel_many false
control config unloader6 @blast-compound
jump *label103 always
label *label102
control config unloader6 @scrap
label *label103
op or *tmp30 :fuel_1 :fuel_2
op or *tmp31 *tmp30 :fuel_many
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label14 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label16 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label15 always
label *label16
print " Critical power.\n"
jump *label15 always
label *label14
jump *label18 notEqual *tmp31 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label19 always
label *label18
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label19
label *label15
jump *label20 greaterThanEq :throttle_blast:fuel_stored :throttle_blast:limit
control config unloader7 @pyratite
jump *label21 always
label *label20
control config unloader7 @scrap
label *label21
# "Function: def diff_generators()"
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label23 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label24 always
label *label23
control enabled generator1 true
control enabled generator2 true
label *label24
# "Function: def kilo(in val)"
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label25 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label26 always
label *label25
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label28 equal *tmp77 false
jump *label30 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label30
label *label28
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label32 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label32
label *label26
jump *label34 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label34
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :start_reactor:t_startup
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label46 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label47 always
label *label46
jump *label48 equal :start_reactor:enabled false
jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label49 always
label *label50
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label52 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label49 always
label *label52
jump *label54 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label49 always
label *label54
jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label49 always
label *label56
jump *label58 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label134 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label136 always
label *label134
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label136 always
label *label136
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label60 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label49 always
label *label60
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label49 always
label *label58
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label62 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label49 always
label *label62
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label49 always
label *label48
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label65 always
label *label64
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label66 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label67 always
label *label66
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label68 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label70 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label69 always
label *label70
print "WAIT system fuel\n"
jump *label69 always
label *label68
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label73 always
label *label72
jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label75 always
label *label74
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label75
label *label73
label *label69
label *label67
label *label65
label *label49
label *label47
sensor *tmp201 :start_reactor:reactor @enabled
jump *label76 equal :start_reactor:enabled *tmp201
set .RET_T_STARTUP @tick
label *label76
return :start_reactor*retaddr
