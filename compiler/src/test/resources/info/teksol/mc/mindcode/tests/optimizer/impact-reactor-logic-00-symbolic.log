   661 instructions before optimizations.
    64 instructions eliminated by Temp Variables Elimination (2 iterations).
    75 instructions eliminated by Dead Code Elimination (2 passes, 12 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    10 instructions eliminated by If Expression Optimization (4 iterations).
    66 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   539 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   807 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 521):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 525):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 534):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+15 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 519):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+44 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 475):
  ! Inline function 'start_reactor' defined at line 140:1        size  +627, benefit      687.5, efficiency      1.096
  * Inline function call at line 80:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 84:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 325):
  ! Inline function 'start_reactor' defined at line 140:1        size  +470, benefit      550.0, efficiency      1.170
  * Inline function call at line 84:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 175):
  ! Inline function 'start_reactor' defined at line 140:1        size  +313, benefit      412.5, efficiency      1.318
  * Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 25):
  ! Inline function 'start_reactor' defined at line 140:1        size  +156, benefit      275.0, efficiency      1.763
  ! Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
  ! Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 2: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Pass 3: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Pass 4: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    70 print "\n"
    71 set *tmp8 true
    72 jump *label10 always
-    * set *tmp13 null
    73 jump *label12 always
    74 label *label11
-    * set *tmp13 null
    75 label *label12
    76 set *tmp8 false
    77 jump *label10 always
 
   116 set :update_fuel:uld_in .ULD_IN_1
   117 set :update_fuel:uld_out .ULD_OUT_1
   118 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp20 :update_fuel*retval
   119 set :start_reactor:reactor reactor2
   120 set :start_reactor:reactor_num 2
   121 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   129 set :update_fuel:uld_in .ULD_IN_2
   130 set :update_fuel:uld_out .ULD_OUT_2
   131 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp22 :update_fuel*retval
   132 set :check_radar:unit .TOWER
   133 call *label4 :check_radar*retaddr :check_radar*retval
   134 set *tmp23 :check_radar*retval
 
   167 set :update_fuel:uld_in .ULD_IN_MANY
   168 set :update_fuel:uld_out .ULD_OUT_MANY
   169 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp29 :update_fuel*retval
   170 op or *tmp30 :fuel_1 :fuel_2
   171 op or *tmp31 *tmp30 :fuel_many
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   205 print "\n"
   206 set *tmp45 null
   207 label *label17
-    * set *tmp44 *tmp45
   208 jump *label15 always
   209 label *label14
   210 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   231 print "n"
   232 set *tmp47 null
   233 label *label19
-    * set *tmp44 *tmp47
   234 label *label15
   235 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   236 set *tmp32 *tmp48
 
   266 control enabled generator2 true
   267 set *tmp59 true
   268 label *label24
-    * set *tmp52 *tmp59
   269 label *label22
   270 set :kilo:val .AVG_SURPLUS
   271 call *label0 :kilo*retaddr :kilo*retval
 
   290 print :surplus
   291 print "kW flow."
   292 print "\n"
-    * set *tmp68 null
   293 jump *label26 always
   294 label *label25
   295 print "Power "
 
   317 label *label30
   318 set *tmp80 null
   319 label *label31
-    * set *tmp78 *tmp80
   320 jump *label29 always
   321 label *label28
-    * set *tmp78 null
   322 label *label29
   323 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   324 op mul *tmp82 .GOAL_BUFFER 0.8
 
   339 label *label33
   340 set *tmp70 *tmp85
   341 label *label27
-    * set *tmp68 *tmp70
   342 label *label26
   343 op notEqual *tmp91 .REACTORS_DESIRED 5
   344 jump *label34 equal *tmp91 false
 
   346 print .REACTORS_DESIRED
   347 print "/5 reactors."
   348 print "\n"
-    * set *tmp92 null
   349 jump *label35 always
   350 label *label34
-    * set *tmp92 null
   351 label *label35
   352 printflush message1
   353 label *label8
 
   399 jump *label43 equal *tmp107 false
   400 set :calc_charge_req*retval 0
   401 jump *label42 always
-    * set *tmp108 null
   402 jump *label44 always
   403 label *label43
-    * set *tmp108 null
   404 label *label44
   405 op sub *tmp109 30 :calc_charge_req:secs
   406 set :calc_charge_req:time_left *tmp109
 
   451 print "emergency mode"
   452 print "\n"
   453 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   454 jump *label47 always
   455 label *label46
   456 jump *label48 equal :start_reactor:enabled false
 
   652 label *label65
   653 set *tmp131 *tmp178
   654 label *label49
-    * set *tmp128 *tmp131
   655 label *label47
   656 sensor *tmp201 :start_reactor:reactor @enabled
   657 op notEqual *tmp202 :start_reactor:enabled *tmp201
   658 jump *label76 equal *tmp202 false
   659 set *tmp204 @tick
   660 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   661 jump *label77 always
   662 label *label76
-    * set *tmp203 null
   663 label *label77
   664 set :start_reactor*retval :start_reactor:supply_fuel
   665 jump *label45 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   198 jump *label16 equal :throttle_blast:emerg_shutdown false
   199 print " Enemies detected."
   200 print "\n"
-    * set *tmp45 null
   201 jump *label17 always
   202 label *label16
   203 print " Critical power."
   204 print "\n"
-    * set *tmp45 null
   205 label *label17
   206 jump *label15 always
   207 label *label14
 
   216 print " "
   217 print "(due to emergency)"
   218 print "\n"
-    * set *tmp47 null
   219 jump *label19 always
   220 label *label18
   221 set :throttle_blast:limit .FUEL_LIMIT
 
   226 print :throttle_blast:limit
   227 print "\"
   228 print "n"
-    * set *tmp47 null
   229 label *label19
   230 label *label15
   231 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   255 print "\n"
   256 control enabled generator1 false
   257 control enabled generator2 false
-    * set *tmp59 false
   258 jump *label24 always
   259 label *label23
   260 control enabled generator1 true
   261 control enabled generator2 true
-    * set *tmp59 true
   262 label *label24
   263 label *label22
   264 set :kilo:val .AVG_SURPLUS
 
   306 jump *label30 equal *tmp79 false
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   309 jump *label31 always
   310 label *label30
-    * set *tmp80 null
   311 label *label31
   312 jump *label29 always
   313 label *label28
 
   329 label *label32
   330 set *tmp85 null
   331 label *label33
-    * set *tmp70 *tmp85
   332 label *label27
   333 label *label26
   334 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   374 set *tmp101 .FUEL_OFF
   375 label *label41
   376 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   377 label *label37
   378 return :update_fuel*retaddr
   379 end
 
   549 label *label53
   550 set *tmp133 *tmp140
   551 label *label51
-    * set *tmp131 *tmp133
   552 jump *label49 always
   553 label *label48
   554 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   639 label *label67
   640 set *tmp178 *tmp181
   641 label *label65
-    * set *tmp131 *tmp178
   642 label *label49
   643 label *label47
   644 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   324 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   325 op min *tmp90 5 *tmp89
   326 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   327 jump *label33 always
   328 label *label32
-    * set *tmp85 null
   329 label *label33
   330 label *label27
   331 label *label26
 
   448 control enabled *tmp134 false
   449 print "STOP unwanted"
   450 print "\n"
-    * set *tmp133 null
   451 jump *label51 always
   452 label *label50
   453 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   544 label *label55
   545 set *tmp140 *tmp144
   546 label *label53
-    * set *tmp133 *tmp140
   547 label *label51
   548 jump *label49 always
   549 label *label48
 
   563 print "IDLE"
   564 print "\n"
   565 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   566 jump *label65 always
   567 label *label64
   568 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   632 label *label69
   633 set *tmp181 *tmp190
   634 label *label67
-    * set *tmp178 *tmp181
   635 label *label65
   636 label *label49
   637 label *label47

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   459 control enabled *tmp141 false
   460 print "STOP system fuel low"
   461 print "\n"
-    * set *tmp140 null
   462 jump *label53 always
   463 label *label52
   464 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   541 label *label57
   542 set *tmp144 *tmp148
   543 label *label55
-    * set *tmp140 *tmp144
   544 label *label53
   545 label *label51
   546 jump *label49 always
 
   581 print "W)"
   582 print "\n"
   583 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   584 jump *label67 always
   585 label *label66
   586 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   627 label *label73
   628 set *tmp190 *tmp196
   629 label *label69
-    * set *tmp181 *tmp190
   630 label *label67
   631 label *label65
   632 label *label49

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   467 control enabled *tmp145 false
   468 print "STOP fuel low"
   469 print "\n"
-    * set *tmp144 null
   470 jump *label55 always
   471 label *label54
   472 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   538 label *label59
   539 set *tmp148 *tmp152
   540 label *label57
-    * set *tmp144 *tmp148
   541 label *label55
   542 label *label53
   543 label *label51
 
   596 print "\n"
   597 set *tmp193 null
   598 label *label71
-    * set *tmp190 *tmp193
   599 jump *label69 always
   600 label *label68
   601 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   622 label *label75
   623 set *tmp196 *tmp198
   624 label *label73
-    * set *tmp190 *tmp196
   625 label *label69
   626 label *label67
   627 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   475 control enabled *tmp149 false
   476 print "STOP out of cryo"
   477 print "\n"
-    * set *tmp148 null
   478 jump *label57 always
   479 label *label56
   480 op lessThan *tmp151 :start_reactor:secs 30
 
   535 label *label63
   536 set *tmp152 *tmp164
   537 label *label59
-    * set *tmp148 *tmp152
   538 label *label57
   539 label *label55
   540 label *label53
 
   587 jump *label70 equal *tmp192 false
   588 print "WAIT fuel"
   589 print "\n"
-    * set *tmp193 null
   590 jump *label71 always
   591 label *label70
   592 print "WAIT system fuel"
   593 print "\n"
-    * set *tmp193 null
   594 label *label71
   595 jump *label69 always
   596 label *label68
 
   599 jump *label72 equal *tmp195 false
   600 print "WAIT buffer fuel"
   601 print "\n"
-    * set *tmp196 null
   602 jump *label73 always
   603 label *label72
   604 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   615 control enabled *tmp199 true
   616 set *tmp198 true
   617 label *label75
-    * set *tmp196 *tmp198
   618 label *label73
   619 label *label69
   620 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   507 print "\n"
   508 set *tmp157 null
   509 label *label61
-    * set *tmp152 *tmp157
   510 jump *label59 always
   511 label *label58
   512 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   532 print "\n"
   533 set *tmp164 null
   534 label *label63
-    * set *tmp152 *tmp164
   535 label *label59
   536 label *label57
   537 label *label55
 
   603 jump *label74 equal *tmp197 false
   604 print "WAIT cryo"
   605 print "\n"
-    * set *tmp198 null
   606 jump *label75 always
   607 label *label74
   608 print "STARTUP"
 
   610 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   611 set *tmp199 :start_reactor:reactor
   612 control enabled *tmp199 true
-    * set *tmp198 true
   613 label *label75
   614 label *label73
   615 label *label69

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   493 print "START FAIL battery"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   496 jump *label61 always
   497 label *label60
   498 op sub *tmp160 30 :start_reactor:secs
 
   504 print :start_reactor:charge_req
   505 print "J"
   506 print "\n"
-    * set *tmp157 null
   507 label *label61
   508 jump *label59 always
   509 label *label58
 
   516 print "ABANDON - battery crit"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   519 jump *label63 always
   520 label *label62
   521 op idiv *tmp167 :start_reactor:secs 6
 
   527 print " "
   528 print "mins"
   529 print "\n"
-    * set *tmp164 null
   530 label *label63
   531 label *label59
   532 label *label57

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-64 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
    78 set :calc_charge_req:reactor reactor1
    79 set :calc_charge_req:time :t_startup1
    80 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
    84 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   85 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    86 set :calc_charge_req:reactor reactor3
    87 set :calc_charge_req:time :t_startup3
    88 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   89 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    90 set :calc_charge_req:reactor reactor4
    91 set :calc_charge_req:time :t_startup4
    92 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    94 set :calc_charge_req:reactor reactor5
    95 set :calc_charge_req:time :t_startup5
    96 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+   97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    98 set :start_reactor:reactor reactor1
    99 set :start_reactor:reactor_num 1
   100 set :start_reactor:emerg_shutdown :emerg_shutdown
   101 set :start_reactor:fuel_on :fuel_1
   102 set :start_reactor:t_startup :t_startup1
   103 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  104 set :fuel_1 :start_reactor*retval
   105 set :t_startup1 .RET_T_STARTUP
   106 set :update_fuel:fuel :fuel_1
   107 set :update_fuel:uld_in .ULD_IN_1
 
   113 set :start_reactor:fuel_on :fuel_2
   114 set :start_reactor:t_startup :t_startup2
   115 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  116 set :fuel_2 :start_reactor*retval
   117 set :t_startup2 .RET_T_STARTUP
   118 set :update_fuel:fuel :fuel_2
   119 set :update_fuel:uld_in .ULD_IN_2
 
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
   122 set :check_radar:unit .TOWER
   123 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  124 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   125 set :start_reactor:reactor reactor3
   126 set :start_reactor:reactor_num 3
   127 set :start_reactor:emerg_shutdown :emerg_shutdown
   128 set :start_reactor:fuel_on :fuel_3
   129 set :start_reactor:t_startup :t_startup3
   130 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  131 set :fuel_3 :start_reactor*retval
   132 set :t_startup3 .RET_T_STARTUP
   133 set :start_reactor:reactor reactor4
   134 set :start_reactor:reactor_num 4
 
   136 set :start_reactor:fuel_on :fuel_4
   137 set :start_reactor:t_startup :t_startup4
   138 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  139 set :fuel_4 :start_reactor*retval
   140 set :t_startup4 .RET_T_STARTUP
   141 set :start_reactor:reactor reactor5
   142 set :start_reactor:reactor_num 5
 
   144 set :start_reactor:fuel_on :fuel_5
   145 set :start_reactor:t_startup :t_startup5
   146 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  147 set :fuel_5 :start_reactor*retval
   148 set :t_startup5 .RET_T_STARTUP
   149 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  150 op or :fuel_many *tmp27 :fuel_5
   151 set :update_fuel:fuel :fuel_many
   152 set :update_fuel:uld_in .ULD_IN_MANY
   153 set :update_fuel:uld_out .ULD_OUT_MANY
 
   158 set :throttle_blast:reactors_fueled *tmp31
   159 set :throttle_blast:emerg_shutdown :emerg_shutdown
   160 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  161 op floor :throttle_blast:charge *tmp33
   162 sensor *tmp35 .NODE @powerNetIn
   163 sensor *tmp36 .NODE @powerNetOut
   164 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  165 op floor :throttle_blast:surplus *tmp37
+  166 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   167 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   168 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   169 op land *tmp42 *tmp40 *tmp41
 
   210 print "n"
   211 label *label19
   212 label *label15
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  213 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   214 jump *label13 always
   215 set *tmp32 null
   216 label *label13
 
   226 # "Function: def diff_generators()"
   227 sensor *tmp53 .NODE @powerNetStored
   228 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  229 op div :diff_generators:stored_pc *tmp53 *tmp54
   230 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   231 op lessThan *tmp57 .START_POWER_REQ 10
   232 op land *tmp58 *tmp56 *tmp57
 
   243 label *label22
   244 set :kilo:val .AVG_SURPLUS
   245 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  246 set :surplus :kilo*retval
+  247 sensor :kilo:val .NODE @powerNetStored
   248 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  249 set :charge :kilo*retval
   250 op greaterThan *tmp67 .START_POWER_REQ 0
   251 jump *label25 equal *tmp67 false
   252 set :kilo:val .START_POWER_REQ
   253 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  254 set :req :kilo*retval
   255 print "Req "
   256 print :req
   257 print "kJ / "
 
   271 # "Function: def update_reactors_desired()"
   272 sensor *tmp71 .NODE @powerNetStored
   273 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  274 op div :update_reactors_desired:stored *tmp71 *tmp72
   275 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   276 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   277 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   294 jump *label32 equal *tmp84 false
   295 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   296 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  297 op max :update_reactors_desired:needed 1 *tmp87
   298 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  299 op min .REACTORS_DESIRED 5 *tmp89
   300 jump *label33 always
   301 label *label32
   302 label *label33
 
   319 label *label0
   320 # "Function: def kilo(in val)"
   321 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  322 op div :kilo*retval *tmp93 10
   323 jump *label36 always
   324 set :kilo*retval null
   325 label *label36
 
   350 label *label2
   351 # "Function: def calc_charge_req(in reactor, in time)"
   352 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  353 op idiv :calc_charge_req:secs *tmp102 60
   354 op greaterThan *tmp104 :calc_charge_req:secs 30
   355 sensor *tmp105 :calc_charge_req:reactor @enabled
   356 op equal *tmp106 *tmp105 false
 
   361 jump *label44 always
   362 label *label43
   363 label *label44
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  364 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   365 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   366 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  367 op floor :calc_charge_req:charge_req *tmp111
   368 set :calc_charge_req*retval :calc_charge_req:charge_req
   369 jump *label42 always
   370 set :calc_charge_req*retval null
 
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :start_reactor:t_startup
   377 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  378 op idiv :start_reactor:secs *tmp113 60
+  379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   380 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  381 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   383 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  384 op floor :start_reactor:charge *tmp118
   385 sensor *tmp120 .NODE @powerNetIn
   386 sensor *tmp121 .NODE @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  388 op floor :start_reactor:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   393 print "#"
   394 print :start_reactor:reactor_num
   395 print " "
   396 print "- "
   397 jump *label46 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  398 control enabled :start_reactor:reactor false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor:supply_fuel false
 
   404 jump *label48 equal :start_reactor:enabled false
   405 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   406 jump *label50 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  407 control enabled :start_reactor:reactor false
   408 print "STOP unwanted"
   409 print "\n"
   410 jump *label51 always
 
   414 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   415 op land *tmp139 *tmp136 *tmp138
   416 jump *label52 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  417 control enabled :start_reactor:reactor false
   418 print "STOP system fuel low"
   419 print "\n"
   420 jump *label53 always
   421 label *label52
   422 op lessThanEq *tmp143 :start_reactor:fuel 1
   423 jump *label54 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  424 control enabled :start_reactor:reactor false
   425 print "STOP fuel low"
   426 print "\n"
   427 jump *label55 always
   428 label *label54
   429 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   430 jump *label56 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  431 control enabled :start_reactor:reactor false
   432 print "STOP out of cryo"
   433 print "\n"
   434 jump *label57 always
 
   444 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   445 op land *tmp156 *tmp154 *tmp155
   446 jump *label60 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  447 control enabled :start_reactor:reactor false
   448 print "START FAIL battery"
   449 print "\n"
   450 set :start_reactor:supply_fuel false
   451 jump *label61 always
   452 label *label60
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  453 op sub :start_reactor:time_left 30 :start_reactor:secs
   454 print "Starting "
   455 print :start_reactor:time_left
   456 print " "
 
   465 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   466 op land *tmp163 *tmp161 *tmp162
   467 jump *label62 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  468 control enabled :start_reactor:reactor false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor:supply_fuel false
   472 jump *label63 always
   473 label *label62
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  474 op idiv :start_reactor:mins :start_reactor:secs 6
+  475 op div :start_reactor:mins :start_reactor:mins 10
   476 print "RUN "
   477 print :start_reactor:mins
   478 print " "
 
   489 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   490 op sub *tmp170 *tmp169 .PWR_ABORT
   491 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  492 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   493 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  494 op max :start_reactor:flow_units -0.1 *tmp173
   495 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  496 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   497 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   498 jump *label64 equal *tmp177 false
   499 print "IDLE"
 
   506 jump *label66 equal *tmp180 false
   507 op mul *tmp182 :start_reactor:flow_units 1000
   508 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  509 op div :start_reactor:flow *tmp183 10
   510 op mul *tmp185 :start_reactor:charge_units 1000
   511 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  512 op div :start_reactor:charge *tmp186 10
   513 print "WAIT power. (%"
   514 print :start_reactor:charge
   515 print "J + %"
 
   550 print "STARTUP"
   551 print "\n"
   552 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  553 control enabled :start_reactor:reactor true
   554 label *label75
   555 label *label73
   556 label *label69
 
   561 sensor *tmp201 :start_reactor:reactor @enabled
   562 op notEqual *tmp202 :start_reactor:enabled *tmp201
   563 jump *label76 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  564 set .RET_T_STARTUP @tick
   565 jump *label77 always
   566 label *label76
   567 label *label77
 
   573 end
   574 label *label4
   575 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  576 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   577 op notEqual *tmp206 :check_radar:enemy_found null
   578 jump *label79 equal *tmp206 false
   579 control enabled projector1 true
   580 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  581 control config .ULD_IN_1 .FUEL_OFF
+  582 control config .ULD_OUT_1 .FUEL
+  583 control config .ULD_IN_2 .FUEL_OFF
+  584 control config .ULD_OUT_2 .FUEL
+  585 control config .ULD_IN_MANY .FUEL_OFF
+  586 control config .ULD_OUT_MANY .FUEL
+  587 control config .ULD_MIXER .FUEL_OFF
   588 control enabled reactor1 false
   589 control enabled reactor2 false
   590 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   185 label *label17
   186 jump *label15 always
   187 label *label14
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label18 equal *tmp46 false
+  188 jump *label18 notEqual :throttle_blast:reactors_fueled false
   189 set :throttle_blast:limit .FUEL_LIMIT_LOW
   190 print "Fuel "
   191 print :throttle_blast:fuel_stored
 
   244 sensor :kilo:val .NODE @powerNetStored
   245 call *label0 :kilo*retaddr :kilo*retval
   246 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label25 equal *tmp67 false
+  247 jump *label25 lessThanEq .START_POWER_REQ 0
   248 set :kilo:val .START_POWER_REQ
   249 call *label0 :kilo*retaddr :kilo*retval
   250 set :req :kilo*retval
 
   273 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   274 op land *tmp77 *tmp74 *tmp76
   275 jump *label28 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label30 equal *tmp79 false
+  276 jump *label30 lessThanEq .REACTORS_DESIRED 2
   277 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   278 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   279 jump *label31 always
 
   297 label *label33
   298 label *label27
   299 label *label26
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label34 equal *tmp91 false
+  300 jump *label34 equal .REACTORS_DESIRED 5
   301 print "Require only "
   302 print .REACTORS_DESIRED
   303 print "/5 reactors."
 
   330 label *label39
   331 control config *tmp95 *tmp97
   332 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label40 equal *tmp100 false
+  333 jump *label40 notEqual :update_fuel:fuel false
   334 set *tmp101 .FUEL
   335 jump *label41 always
   336 label *label40
 
   395 jump *label47 always
   396 label *label46
   397 jump *label48 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label50 equal *tmp132 false
+  398 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   399 control enabled :start_reactor:reactor false
   400 print "STOP unwanted"
   401 print "\n"
 
   411 print "\n"
   412 jump *label53 always
   413 label *label52
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label54 equal *tmp143 false
+  414 jump *label54 greaterThan :start_reactor:fuel 1
   415 control enabled :start_reactor:reactor false
   416 print "STOP fuel low"
   417 print "\n"
   418 jump *label55 always
   419 label *label54
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label56 equal *tmp147 false
+  420 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   421 control enabled :start_reactor:reactor false
   422 print "STOP out of cryo"
   423 print "\n"
   424 jump *label57 always
   425 label *label56
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label58 equal *tmp151 false
+  426 jump *label58 greaterThanEq :start_reactor:secs 30
   427 set :calc_charge_req:reactor :start_reactor:reactor
   428 set :calc_charge_req:time :start_reactor:t_startup
   429 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
   483 op max :start_reactor:flow_units -0.1 *tmp173
   484 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   485 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label64 equal *tmp177 false
+  486 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   487 print "IDLE"
   488 print "\n"
   489 set :start_reactor:supply_fuel false
   490 jump *label65 always
   491 label *label64
   492 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label66 equal *tmp180 false
+  493 jump *label66 greaterThanEq *tmp179 1
   494 op mul *tmp182 :start_reactor:flow_units 1000
   495 op floor *tmp183 *tmp182
   496 op div :start_reactor:flow *tmp183 10
 
   510 op land *tmp189 :start_reactor:fuel_on *tmp188
   511 jump *label68 equal *tmp189 false
   512 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label70 equal *tmp192 false
+  513 jump *label70 lessThanEq *tmp191 .FUEL_REQ
   514 print "WAIT fuel"
   515 print "\n"
   516 jump *label71 always
 
   521 jump *label69 always
   522 label *label68
   523 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label72 equal *tmp195 false
+  524 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
   525 print "WAIT buffer fuel"
   526 print "\n"
   527 jump *label73 always
   528 label *label72
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label74 equal *tmp197 false
+  529 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   530 print "WAIT cryo"
   531 print "\n"
   532 jump *label75 always
 
   543 label *label49
   544 label *label47
   545 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label76 equal *tmp202 false
+  546 jump *label76 equal :start_reactor:enabled *tmp201
   547 set .RET_T_STARTUP @tick
   548 jump *label77 always
   549 label *label76
 
   557 label *label4
   558 # "Function: def check_radar(in unit)"
   559 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label79 equal *tmp206 false
+  560 jump *label79 equal :check_radar:enemy_found null
   561 control enabled projector1 true
   562 control enabled projector2 true
   563 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   275 jump *label30 lessThanEq .REACTORS_DESIRED 2
   276 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   277 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label31 always
   278 label *label30
   279 label *label31
-    * jump *label29 always
   280 label *label28
   281 label *label29
   282 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   289 op max :update_reactors_desired:needed 1 *tmp87
   290 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   291 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label33 always
   292 label *label32
   293 label *label33
   294 label *label27
 
   298 print .REACTORS_DESIRED
   299 print "/5 reactors."
   300 print "\n"
-    * jump *label35 always
   301 label *label34
   302 label *label35
   303 printflush message1
 
   346 jump *label43 equal *tmp107 false
   347 set :calc_charge_req*retval 0
   348 jump *label42 always
-    * jump *label44 always
   349 label *label43
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   539 sensor *tmp201 :start_reactor:reactor @enabled
   540 jump *label76 equal :start_reactor:enabled *tmp201
   541 set .RET_T_STARTUP @tick
-    * jump *label77 always
   542 label *label76
   543 label *label77
   544 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   352 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  353 op idiv :calc_charge_req:charge_req *tmp110 0.04
   354 set :calc_charge_req*retval :calc_charge_req:charge_req
   355 jump *label42 always
   356 set :calc_charge_req*retval null
 
   484 label *label64
   485 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   486 jump *label66 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  487 op idiv *tmp183 :start_reactor:flow_units 0.001
   488 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  489 op idiv *tmp186 :start_reactor:charge_units 0.001
   490 op div :start_reactor:charge *tmp186 10
   491 print "WAIT power. (%"
   492 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   143 set :fuel_5 :start_reactor*retval
   144 set :t_startup5 .RET_T_STARTUP
   145 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  146 op or :fuel_many *tmp27 :start_reactor*retval
   147 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  148 set :update_fuel:uld_in unloader5
+  149 set :update_fuel:uld_out unloader6
   150 call *label1 :update_fuel*retaddr :update_fuel*retval
   151 op or *tmp30 :fuel_1 :fuel_2
   152 op or *tmp31 *tmp30 :fuel_many
   153 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   154 set :throttle_blast:reactors_fueled *tmp31
   155 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  156 sensor *tmp33 node1 @powerNetStored
   157 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  158 sensor *tmp35 node1 @powerNetIn
+  159 sensor *tmp36 node1 @powerNetOut
   160 op sub *tmp37 *tmp35 *tmp36
   161 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  162 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  163 op lessThan *tmp40 :throttle_blast:charge 5000
+  164 op lessThan *tmp41 :throttle_blast:surplus -500
   165 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  166 op or *tmp43 *tmp42 :emerg_shutdown
   167 jump *label14 equal *tmp43 false
   168 set :throttle_blast:limit 0
   169 print "Central Fuel at "
   170 print :throttle_blast:fuel_stored
   171 print " "
   172 print "/ "
-    * print :throttle_blast:limit
+  173 print 0
   174 print " "
   175 print "- "
-    * jump *label16 equal :throttle_blast:emerg_shutdown false
+  176 jump *label16 equal :emerg_shutdown false
   177 print " Enemies detected."
   178 print "\n"
   179 jump *label17 always
 
   183 label *label17
   184 jump *label15 always
   185 label *label14
-    * jump *label18 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  186 jump *label18 notEqual *tmp31 false
+  187 set :throttle_blast:limit 150
   188 print "Fuel "
   189 print :throttle_blast:fuel_stored
   190 print " "
   191 print "/ "
-    * print :throttle_blast:limit
+  192 print .FUEL_LIMIT_LOW
   193 print " "
   194 print "(due to emergency)"
   195 print "\n"
   196 jump *label19 always
   197 label *label18
-    * set :throttle_blast:limit .FUEL_LIMIT
+  198 set :throttle_blast:limit 800
   199 print "Fuel "
   200 print :throttle_blast:fuel_stored
   201 print " "
   202 print "/ "
-    * print :throttle_blast:limit
+  203 print .FUEL_LIMIT
   204 print "\"
   205 print "n"
   206 label *label19
   207 label *label15
   208 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   209 jump *label13 always
-    * set *tmp32 null
   210 label *label13
   211 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label20 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  212 set *tmp49 unloader7
+  213 jump *label20 equal *tmp32 false
+  214 set *tmp51 @pyratite
   215 jump *label21 always
   216 label *label20
-    * set *tmp51 .FUEL_OFF
+  217 set *tmp51 @scrap
   218 label *label21
-    * control config *tmp49 *tmp51
+  219 control config .ULD_MIXER *tmp51
   220 # "Function: def diff_generators()"
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  221 sensor *tmp53 node1 @powerNetStored
+  222 sensor *tmp54 node1 @powerNetCapacity
   223 op div :diff_generators:stored_pc *tmp53 *tmp54
   224 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   225 op lessThan *tmp57 .START_POWER_REQ 10
 
   238 set :kilo:val .AVG_SURPLUS
   239 call *label0 :kilo*retaddr :kilo*retval
   240 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  241 sensor :kilo:val node1 @powerNetStored
   242 call *label0 :kilo*retaddr :kilo*retval
   243 set :charge :kilo*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
 
   246 call *label0 :kilo*retaddr :kilo*retval
   247 set :req :kilo*retval
   248 print "Req "
-    * print :req
+  249 print :kilo*retval
   250 print "kJ / "
   251 print :charge
   252 print "kJ. "
 
   258 print "Power "
   259 print :surplus
   260 print "kW, "
-    * print :charge
+  261 print :kilo*retval
   262 print "kJ"
   263 print "\n"
   264 # "Function: def update_reactors_desired()"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  265 sensor *tmp71 node1 @powerNetStored
+  266 sensor *tmp72 node1 @powerNetCapacity
   267 op div :update_reactors_desired:stored *tmp71 *tmp72
   268 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  269 op add *tmp75 6500 10000
+  270 op greaterThan *tmp76 .AVG_SURPLUS 16500
   271 op land *tmp77 *tmp74 *tmp76
   272 jump *label28 equal *tmp77 false
   273 jump *label30 lessThanEq .REACTORS_DESIRED 2
   274 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  275 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   276 label *label30
   277 label *label31
   278 label *label28
   279 label *label29
   280 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  281 op mul *tmp82 10000 0.8
+  282 op lessThan *tmp83 .AVG_SURPLUS 8000
   283 op land *tmp84 *tmp81 *tmp83
   284 jump *label32 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  285 op sub *tmp86 .AVG_SURPLUS 10000
+  286 op idiv *tmp87 *tmp86 6500
   287 op max :update_reactors_desired:needed 1 *tmp87
   288 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   289 op min .REACTORS_DESIRED 5 *tmp89
 
   308 op idiv *tmp93 :kilo:val 100
   309 op div :kilo*retval *tmp93 10
   310 jump *label36 always
-    * set :kilo*retval null
   311 label *label36
   312 return :kilo*retaddr
   313 end
 
   320 label *label38
   321 set *tmp97 .FUEL_OFF
   322 label *label39
-    * control config *tmp95 *tmp97
+  323 control config :update_fuel:uld_in *tmp97
   324 set *tmp98 :update_fuel:uld_out
   325 jump *label40 notEqual :update_fuel:fuel false
   326 set *tmp101 .FUEL
 
   328 label *label40
   329 set *tmp101 .FUEL_OFF
   330 label *label41
-    * control config *tmp98 *tmp101
+  331 control config :update_fuel:uld_out *tmp101
   332 label *label37
   333 return :update_fuel*retaddr
   334 end
 
   350 op idiv :calc_charge_req:charge_req *tmp110 0.04
   351 set :calc_charge_req*retval :calc_charge_req:charge_req
   352 jump *label42 always
-    * set :calc_charge_req*retval null
   353 label *label42
   354 return :calc_charge_req*retaddr
   355 end
 
   417 set :calc_charge_req:time :start_reactor:t_startup
   418 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   419 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  420 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   421 op lessThan *tmp154 *tmp153 .PWR_ABORT
   422 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   423 op land *tmp156 *tmp154 *tmp155
 
   433 print :start_reactor:time_left
   434 print " "
   435 print "secs, req "
-    * print :start_reactor:charge_req
+  436 print :calc_charge_req*retval
   437 print "J"
   438 print "\n"
   439 label *label61
 
   536 label *label77
   537 set :start_reactor*retval :start_reactor:supply_fuel
   538 jump *label45 always
-    * set :start_reactor*retval null
   539 label *label45
   540 return :start_reactor*retaddr
   541 end
 
   559 control enabled reactor5 false
   560 set :check_radar*retval true
   561 jump *label78 always
-    * set *tmp207 null
   562 jump *label80 always
   563 label *label79
   564 control enabled projector1 false
   565 control enabled projector2 false
   566 set :check_radar*retval false
   567 jump *label78 always
-    * set *tmp207 null
   568 label *label80
-    * set :check_radar*retval *tmp207
+  569 set :check_radar*retval null
   570 label *label78
   571 return :check_radar*retaddr
   572 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    38 set :t_startup3 *tmp5
    39 set :t_startup4 *tmp5
    40 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   41 set .RET_T_STARTUP *tmp5
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    54 set .NODE node1
    55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    57 # "Function: def check_manual_shutdown()"
    58 op notEqual *tmp9 switch1 null
    59 sensor *tmp10 switch1 @enabled
 
   150 op or *tmp30 :fuel_1 :fuel_2
   151 op or *tmp31 *tmp30 :fuel_many
   152 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp31
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   153 sensor *tmp33 node1 @powerNetStored
   154 op floor :throttle_blast:charge *tmp33
   155 sensor *tmp35 node1 @powerNetIn
 
   186 print :throttle_blast:fuel_stored
   187 print " "
   188 print "/ "
-    * print .FUEL_LIMIT_LOW
+  189 print 150
   190 print " "
   191 print "(due to emergency)"
   192 print "\n"
 
   197 print :throttle_blast:fuel_stored
   198 print " "
   199 print "/ "
-    * print .FUEL_LIMIT
+  200 print 800
   201 print "\"
   202 print "n"
   203 label *label19
 
   205 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   206 jump *label13 always
   207 label *label13
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   208 jump *label20 equal *tmp32 false
   209 set *tmp51 @pyratite
   210 jump *label21 always
   211 label *label20
   212 set *tmp51 @scrap
   213 label *label21
-    * control config .ULD_MIXER *tmp51
+  214 control config unloader7 *tmp51
   215 # "Function: def diff_generators()"
   216 sensor *tmp53 node1 @powerNetStored
   217 sensor *tmp54 node1 @powerNetCapacity
 
   239 jump *label25 lessThanEq .START_POWER_REQ 0
   240 set :kilo:val .START_POWER_REQ
   241 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   242 print "Req "
   243 print :kilo*retval
   244 print "kJ / "
 
   260 sensor *tmp72 node1 @powerNetCapacity
   261 op div :update_reactors_desired:stored *tmp71 *tmp72
   262 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   263 op greaterThan *tmp76 .AVG_SURPLUS 16500
   264 op land *tmp77 *tmp74 *tmp76
   265 jump *label28 equal *tmp77 false
 
   271 label *label28
   272 label *label29
   273 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   274 op lessThan *tmp83 .AVG_SURPLUS 8000
   275 op land *tmp84 *tmp81 *tmp83
   276 jump *label32 equal *tmp84 false
 
   305 end
   306 label *label1
   307 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp95 :update_fuel:uld_in
   308 jump *label38 equal :update_fuel:fuel false
   309 set *tmp97 .FUEL
   310 jump *label39 always
 
   312 set *tmp97 .FUEL_OFF
   313 label *label39
   314 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   315 jump *label40 notEqual :update_fuel:fuel false
   316 set *tmp101 .FUEL
   317 jump *label41 always
 
   406 set :calc_charge_req:reactor :start_reactor:reactor
   407 set :calc_charge_req:time :start_reactor:t_startup
   408 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   409 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   410 op lessThan *tmp154 *tmp153 .PWR_ABORT
   411 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   555 set :check_radar*retval false
   556 jump *label78 always
   557 label *label80
-    * set :check_radar*retval null
   558 label *label78
   559 return :check_radar*retaddr
   560 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-1 instructions):
 
    32 label *label5
    33 set *tmp5 @tick
    34 label *label6
-    * set :start_time *tmp5
    35 set :t_startup1 *tmp5
    36 set :t_startup2 *tmp5
    37 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-10 instructions):
 
   204 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   205 jump *label13 always
   206 label *label13
-    * jump *label20 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label21 always
+  207 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   208 label *label20
-    * set *tmp51 @scrap
   209 label *label21
   210 control config unloader7 *tmp51
   211 # "Function: def diff_generators()"
 
   301 end
   302 label *label1
   303 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label38 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label39 always
+  304 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   305 label *label38
-    * set *tmp97 .FUEL_OFF
   306 label *label39
   307 control config :update_fuel:uld_in *tmp97
-    * jump *label40 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label41 always
+  308 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   309 label *label40
-    * set *tmp101 .FUEL_OFF
   310 label *label41
   311 control config :update_fuel:uld_out *tmp101
   312 label *label37
 
   509 label *label49
   510 label *label47
   511 sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label76 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
+  512 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   513 label *label76
   514 label *label77
   515 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   227 label *label24
   228 label *label22
   229 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  230 label *label81
+  231 # "Function: def kilo(in val)"
+  232 op idiv *tmp93 :kilo:val 100
+  233 op div :kilo*retval *tmp93 10
+  234 jump *label82 always
+  235 label *label82
   236 set :surplus :kilo*retval
   237 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  238 label *label83
+  239 # "Function: def kilo(in val)"
+  240 op idiv *tmp93 :kilo:val 100
+  241 op div :kilo*retval *tmp93 10
+  242 jump *label84 always
+  243 label *label84
   244 set :charge :kilo*retval
   245 jump *label25 lessThanEq .START_POWER_REQ 0
   246 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  247 label *label85
+  248 # "Function: def kilo(in val)"
+  249 op idiv *tmp93 :kilo:val 100
+  250 op div :kilo*retval *tmp93 10
+  251 jump *label86 always
+  252 label *label86
   253 print "Req "
   254 print :kilo*retval
   255 print "kJ / "
 
   306 jump *label7 always
   307 label *label9
   308 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label36 always
-    * label *label36
-    * return :kilo*retaddr
-    * end
   309 label *label1
   310 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   311 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   229 set :kilo:val .AVG_SURPLUS
   230 label *label81
   231 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  232 op idiv *tmp93 .AVG_SURPLUS 100
   233 op div :kilo*retval *tmp93 10
   234 jump *label82 always
   235 label *label82
 
   246 set :kilo:val .START_POWER_REQ
   247 label *label85
   248 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  249 op idiv *tmp93 .START_POWER_REQ 100
   250 op div :kilo*retval *tmp93 10
   251 jump *label86 always
   252 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   226 control enabled generator2 true
   227 label *label24
   228 label *label22
-    * set :kilo:val .AVG_SURPLUS
   229 label *label81
   230 # "Function: def kilo(in val)"
   231 op idiv *tmp93 .AVG_SURPLUS 100
 
   242 label *label84
   243 set :charge :kilo*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   245 label *label85
   246 # "Function: def kilo(in val)"
   247 op idiv *tmp93 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
   100 set :update_fuel:fuel :start_reactor*retval
   101 set :update_fuel:uld_in unloader1
   102 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  103 label *label87
+  104 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  105 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  106 label *label88
+  107 label *label89
+  108 control config :update_fuel:uld_in *tmp97
+  109 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  110 label *label90
+  111 label *label91
+  112 control config :update_fuel:uld_out *tmp101
+  113 label *label92
   114 set :start_reactor:reactor reactor2
   115 set :start_reactor:reactor_num 2
   116 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   122 set :update_fuel:fuel :start_reactor*retval
   123 set :update_fuel:uld_in unloader3
   124 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  125 label *label93
+  126 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  127 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  128 label *label94
+  129 label *label95
+  130 control config :update_fuel:uld_in *tmp97
+  131 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  132 label *label96
+  133 label *label97
+  134 control config :update_fuel:uld_out *tmp101
+  135 label *label98
   136 set :check_radar:unit cyclone1
   137 call *label4 :check_radar*retaddr :check_radar*retval
   138 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   165 set :update_fuel:fuel :fuel_many
   166 set :update_fuel:uld_in unloader5
   167 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  168 label *label99
+  169 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  170 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  171 label *label100
+  172 label *label101
+  173 control config :update_fuel:uld_in *tmp97
+  174 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  175 label *label102
+  176 label *label103
+  177 control config :update_fuel:uld_out *tmp101
+  178 label *label104
   179 op or *tmp30 :fuel_1 :fuel_2
   180 op or *tmp31 *tmp30 :fuel_many
   181 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   334 jump *label7 always
   335 label *label9
   336 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label38
-    * label *label39
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label40
-    * label *label41
-    * control config :update_fuel:uld_out *tmp101
-    * label *label37
-    * return :update_fuel*retaddr
-    * end
   337 label *label2
   338 # "Function: def calc_charge_req(in reactor, in time)"
   339 op sub *tmp102 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   102 set :update_fuel:uld_out unloader2
   103 label *label87
   104 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  105 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   106 label *label88
   107 label *label89
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  108 control config unloader1 *tmp97
+  109 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   110 label *label90
   111 label *label91
-    * control config :update_fuel:uld_out *tmp101
+  112 control config unloader2 *tmp101
   113 label *label92
   114 set :start_reactor:reactor reactor2
   115 set :start_reactor:reactor_num 2
 
   124 set :update_fuel:uld_out unloader4
   125 label *label93
   126 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  127 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   128 label *label94
   129 label *label95
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  130 control config unloader3 *tmp97
+  131 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   132 label *label96
   133 label *label97
-    * control config :update_fuel:uld_out *tmp101
+  134 control config unloader4 *tmp101
   135 label *label98
   136 set :check_radar:unit cyclone1
   137 call *label4 :check_radar*retaddr :check_radar*retval
 
   167 set :update_fuel:uld_out unloader6
   168 label *label99
   169 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  170 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   171 label *label100
   172 label *label101
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  173 control config unloader5 *tmp97
+  174 select *tmp101 equal :fuel_many false @blast-compound @scrap
   175 label *label102
   176 label *label103
-    * control config :update_fuel:uld_out *tmp101
+  177 control config unloader6 *tmp101
   178 label *label104
   179 op or *tmp30 :fuel_1 :fuel_2
   180 op or *tmp31 *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    97 call *label3 :start_reactor*retaddr :start_reactor*retval
    98 set :fuel_1 :start_reactor*retval
    99 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
   100 label *label87
   101 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   102 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   116 call *label3 :start_reactor*retaddr :start_reactor*retval
   117 set :fuel_2 :start_reactor*retval
   118 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   119 label *label93
   120 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   121 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   156 set :t_startup5 .RET_T_STARTUP
   157 op or *tmp27 :fuel_3 :fuel_4
   158 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   159 label *label99
   160 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   161 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    52 set .CONTAINER vault1
    53 set .NODE node1
    54 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   55 label *label105
+   56 # "Function: def check_radar(in unit)"
+   57 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   58 jump *label106 equal :check_radar:enemy_found null
+   59 control enabled projector1 true
+   60 control enabled projector2 true
+   61 control config .ULD_IN_1 .FUEL_OFF
+   62 control config .ULD_OUT_1 .FUEL
+   63 control config .ULD_IN_2 .FUEL_OFF
+   64 control config .ULD_OUT_2 .FUEL
+   65 control config .ULD_IN_MANY .FUEL_OFF
+   66 control config .ULD_OUT_MANY .FUEL
+   67 control config .ULD_MIXER .FUEL_OFF
+   68 control enabled reactor1 false
+   69 control enabled reactor2 false
+   70 control enabled reactor3 false
+   71 control enabled reactor4 false
+   72 control enabled reactor5 false
+   73 set :check_radar*retval true
+   74 jump *label108 always
+   75 jump *label107 always
+   76 label *label106
+   77 control enabled projector1 false
+   78 control enabled projector2 false
+   79 set :check_radar*retval false
+   80 jump *label108 always
+   81 label *label107
+   82 label *label108
    83 # "Function: def check_manual_shutdown()"
    84 op notEqual *tmp9 switch1 null
    85 sensor *tmp10 switch1 @enabled
 
   155 control config unloader4 *tmp101
   156 label *label98
   157 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  158 label *label109
+  159 # "Function: def check_radar(in unit)"
+  160 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  161 jump *label110 equal :check_radar:enemy_found null
+  162 control enabled projector1 true
+  163 control enabled projector2 true
+  164 control config .ULD_IN_1 .FUEL_OFF
+  165 control config .ULD_OUT_1 .FUEL
+  166 control config .ULD_IN_2 .FUEL_OFF
+  167 control config .ULD_OUT_2 .FUEL
+  168 control config .ULD_IN_MANY .FUEL_OFF
+  169 control config .ULD_OUT_MANY .FUEL
+  170 control config .ULD_MIXER .FUEL_OFF
+  171 control enabled reactor1 false
+  172 control enabled reactor2 false
+  173 control enabled reactor3 false
+  174 control enabled reactor4 false
+  175 control enabled reactor5 false
+  176 set :check_radar*retval true
+  177 jump *label112 always
+  178 jump *label111 always
+  179 label *label110
+  180 control enabled projector1 false
+  181 control enabled projector2 false
+  182 set :check_radar*retval false
+  183 jump *label112 always
+  184 label *label111
+  185 label *label112
   186 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   187 set :start_reactor:reactor reactor3
   188 set :start_reactor:reactor_num 3
 
   584 label *label45
   585 return :start_reactor*retaddr
   586 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label79 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label78 always
-    * jump *label80 always
-    * label *label79
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label78 always
-    * label *label80
-    * label *label78
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    54 set :check_radar:unit cyclone1
    55 label *label105
    56 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   57 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    58 jump *label106 equal :check_radar:enemy_found null
    59 control enabled projector1 true
    60 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   61 control config unloader1 @scrap
+   62 control config unloader2 @blast-compound
+   63 control config unloader3 @scrap
+   64 control config unloader4 @blast-compound
+   65 control config unloader5 @scrap
+   66 control config unloader6 @blast-compound
+   67 control config unloader7 @scrap
    68 control enabled reactor1 false
    69 control enabled reactor2 false
    70 control enabled reactor3 false
 
   157 set :check_radar:unit cyclone1
   158 label *label109
   159 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  160 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   161 jump *label110 equal :check_radar:enemy_found null
   162 control enabled projector1 true
   163 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  164 control config unloader1 @scrap
+  165 control config unloader2 @blast-compound
+  166 control config unloader3 @scrap
+  167 control config unloader4 @blast-compound
+  168 control config unloader5 @scrap
+  169 control config unloader6 @blast-compound
+  170 control config unloader7 @scrap
   171 control enabled reactor1 false
   172 control enabled reactor2 false
   173 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
    51 set .TOWER cyclone1
    52 set .CONTAINER vault1
    53 set .NODE node1
-    * set :check_radar:unit cyclone1
    54 label *label105
    55 # "Function: def check_radar(in unit)"
    56 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   153 label *label97
   154 control config unloader4 *tmp101
   155 label *label98
-    * set :check_radar:unit cyclone1
   156 label *label109
   157 # "Function: def check_radar(in unit)"
   158 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    97 op or :emerg_shutdown :check_radar*retval *tmp8
    98 set :calc_charge_req:reactor reactor1
    99 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  100 label *label113
+  101 # "Function: def calc_charge_req(in reactor, in time)"
+  102 op sub *tmp102 @tick :calc_charge_req:time
+  103 op idiv :calc_charge_req:secs *tmp102 60
+  104 op greaterThan *tmp104 :calc_charge_req:secs 30
+  105 sensor *tmp105 :calc_charge_req:reactor @enabled
+  106 op equal *tmp106 *tmp105 false
+  107 op or *tmp107 *tmp104 *tmp106
+  108 jump *label114 equal *tmp107 false
+  109 set :calc_charge_req*retval 0
+  110 jump *label116 always
+  111 label *label114
+  112 label *label115
+  113 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  114 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  115 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  116 set :calc_charge_req*retval :calc_charge_req:charge_req
+  117 jump *label116 always
+  118 label *label116
   119 set .START_POWER_REQ :calc_charge_req*retval
   120 set :calc_charge_req:reactor reactor2
   121 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  122 label *label117
+  123 # "Function: def calc_charge_req(in reactor, in time)"
+  124 op sub *tmp102 @tick :calc_charge_req:time
+  125 op idiv :calc_charge_req:secs *tmp102 60
+  126 op greaterThan *tmp104 :calc_charge_req:secs 30
+  127 sensor *tmp105 :calc_charge_req:reactor @enabled
+  128 op equal *tmp106 *tmp105 false
+  129 op or *tmp107 *tmp104 *tmp106
+  130 jump *label118 equal *tmp107 false
+  131 set :calc_charge_req*retval 0
+  132 jump *label120 always
+  133 label *label118
+  134 label *label119
+  135 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  136 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  137 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  138 set :calc_charge_req*retval :calc_charge_req:charge_req
+  139 jump *label120 always
+  140 label *label120
   141 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   142 set :calc_charge_req:reactor reactor3
   143 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  144 label *label121
+  145 # "Function: def calc_charge_req(in reactor, in time)"
+  146 op sub *tmp102 @tick :calc_charge_req:time
+  147 op idiv :calc_charge_req:secs *tmp102 60
+  148 op greaterThan *tmp104 :calc_charge_req:secs 30
+  149 sensor *tmp105 :calc_charge_req:reactor @enabled
+  150 op equal *tmp106 *tmp105 false
+  151 op or *tmp107 *tmp104 *tmp106
+  152 jump *label122 equal *tmp107 false
+  153 set :calc_charge_req*retval 0
+  154 jump *label124 always
+  155 label *label122
+  156 label *label123
+  157 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  158 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  159 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  160 set :calc_charge_req*retval :calc_charge_req:charge_req
+  161 jump *label124 always
+  162 label *label124
   163 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   164 set :calc_charge_req:reactor reactor4
   165 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  166 label *label125
+  167 # "Function: def calc_charge_req(in reactor, in time)"
+  168 op sub *tmp102 @tick :calc_charge_req:time
+  169 op idiv :calc_charge_req:secs *tmp102 60
+  170 op greaterThan *tmp104 :calc_charge_req:secs 30
+  171 sensor *tmp105 :calc_charge_req:reactor @enabled
+  172 op equal *tmp106 *tmp105 false
+  173 op or *tmp107 *tmp104 *tmp106
+  174 jump *label126 equal *tmp107 false
+  175 set :calc_charge_req*retval 0
+  176 jump *label128 always
+  177 label *label126
+  178 label *label127
+  179 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  180 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  181 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  182 set :calc_charge_req*retval :calc_charge_req:charge_req
+  183 jump *label128 always
+  184 label *label128
   185 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   186 set :calc_charge_req:reactor reactor5
   187 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  188 label *label129
+  189 # "Function: def calc_charge_req(in reactor, in time)"
+  190 op sub *tmp102 @tick :calc_charge_req:time
+  191 op idiv :calc_charge_req:secs *tmp102 60
+  192 op greaterThan *tmp104 :calc_charge_req:secs 30
+  193 sensor *tmp105 :calc_charge_req:reactor @enabled
+  194 op equal *tmp106 *tmp105 false
+  195 op or *tmp107 *tmp104 *tmp106
+  196 jump *label130 equal *tmp107 false
+  197 set :calc_charge_req*retval 0
+  198 jump *label132 always
+  199 label *label130
+  200 label *label131
+  201 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  202 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  203 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  204 set :calc_charge_req*retval :calc_charge_req:charge_req
+  205 jump *label132 always
+  206 label *label132
   207 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   208 set :start_reactor:reactor reactor1
   209 set :start_reactor:reactor_num 1
 
   467 jump *label7 always
   468 label *label9
   469 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label43 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label42 always
-    * label *label43
-    * label *label44
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label42 always
-    * label *label42
-    * return :calc_charge_req*retaddr
-    * end
   470 label *label3
   471 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   472 set .RET_T_STARTUP :start_reactor:t_startup
 
   529 jump *label58 greaterThanEq :start_reactor:secs 30
   530 set :calc_charge_req:reactor :start_reactor:reactor
   531 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  532 label *label133
+  533 # "Function: def calc_charge_req(in reactor, in time)"
+  534 op sub *tmp102 @tick :calc_charge_req:time
+  535 op idiv :calc_charge_req:secs *tmp102 60
+  536 op greaterThan *tmp104 :calc_charge_req:secs 30
+  537 sensor *tmp105 :calc_charge_req:reactor @enabled
+  538 op equal *tmp106 *tmp105 false
+  539 op or *tmp107 *tmp104 *tmp106
+  540 jump *label134 equal *tmp107 false
+  541 set :calc_charge_req*retval 0
+  542 jump *label136 always
+  543 label *label134
+  544 label *label135
+  545 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  546 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  547 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  548 set :calc_charge_req*retval :calc_charge_req:charge_req
+  549 jump *label136 always
+  550 label *label136
   551 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   552 op lessThan *tmp154 *tmp153 .PWR_ABORT
   553 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    99 set :calc_charge_req:time :t_startup1
   100 label *label113
   101 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  102 op sub *tmp102 @tick :t_startup1
   103 op idiv :calc_charge_req:secs *tmp102 60
   104 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  105 sensor *tmp105 reactor1 @enabled
   106 op equal *tmp106 *tmp105 false
   107 op or *tmp107 *tmp104 *tmp106
   108 jump *label114 equal *tmp107 false
 
   121 set :calc_charge_req:time :t_startup2
   122 label *label117
   123 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  124 op sub *tmp102 @tick :t_startup2
   125 op idiv :calc_charge_req:secs *tmp102 60
   126 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  127 sensor *tmp105 reactor2 @enabled
   128 op equal *tmp106 *tmp105 false
   129 op or *tmp107 *tmp104 *tmp106
   130 jump *label118 equal *tmp107 false
 
   143 set :calc_charge_req:time :t_startup3
   144 label *label121
   145 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  146 op sub *tmp102 @tick :t_startup3
   147 op idiv :calc_charge_req:secs *tmp102 60
   148 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  149 sensor *tmp105 reactor3 @enabled
   150 op equal *tmp106 *tmp105 false
   151 op or *tmp107 *tmp104 *tmp106
   152 jump *label122 equal *tmp107 false
 
   165 set :calc_charge_req:time :t_startup4
   166 label *label125
   167 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  168 op sub *tmp102 @tick :t_startup4
   169 op idiv :calc_charge_req:secs *tmp102 60
   170 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  171 sensor *tmp105 reactor4 @enabled
   172 op equal *tmp106 *tmp105 false
   173 op or *tmp107 *tmp104 *tmp106
   174 jump *label126 equal *tmp107 false
 
   187 set :calc_charge_req:time :t_startup5
   188 label *label129
   189 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  190 op sub *tmp102 @tick :t_startup5
   191 op idiv :calc_charge_req:secs *tmp102 60
   192 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  193 sensor *tmp105 reactor5 @enabled
   194 op equal *tmp106 *tmp105 false
   195 op or *tmp107 *tmp104 *tmp106
   196 jump *label130 equal *tmp107 false
 
   531 set :calc_charge_req:time :start_reactor:t_startup
   532 label *label133
   533 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  534 op sub *tmp102 @tick :start_reactor:t_startup
   535 op idiv :calc_charge_req:secs *tmp102 60
   536 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  537 sensor *tmp105 :start_reactor:reactor @enabled
   538 op equal *tmp106 *tmp105 false
   539 op or *tmp107 *tmp104 *tmp106
   540 jump *label134 equal *tmp107 false
 
   661 label *label49
   662 label *label47
   663 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  664 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   665 label *label76
   666 label *label77
   667 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    95 jump *label10 always
    96 label *label10
    97 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    98 label *label113
    99 # "Function: def calc_charge_req(in reactor, in time)"
   100 op sub *tmp102 @tick :t_startup1
 
   115 jump *label116 always
   116 label *label116
   117 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
   118 label *label117
   119 # "Function: def calc_charge_req(in reactor, in time)"
   120 op sub *tmp102 @tick :t_startup2
 
   135 jump *label120 always
   136 label *label120
   137 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   138 label *label121
   139 # "Function: def calc_charge_req(in reactor, in time)"
   140 op sub *tmp102 @tick :t_startup3
 
   155 jump *label124 always
   156 label *label124
   157 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   158 label *label125
   159 # "Function: def calc_charge_req(in reactor, in time)"
   160 op sub *tmp102 @tick :t_startup4
 
   175 jump *label128 always
   176 label *label128
   177 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   178 label *label129
   179 # "Function: def calc_charge_req(in reactor, in time)"
   180 op sub *tmp102 @tick :t_startup5
 
   517 jump *label57 always
   518 label *label56
   519 jump *label58 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   520 label *label133
   521 # "Function: def calc_charge_req(in reactor, in time)"
   522 op sub *tmp102 @tick :start_reactor:t_startup

Modifications by Inline function call at line 80:14 (+156 instructions):
 
   200 set :start_reactor:emerg_shutdown :emerg_shutdown
   201 set :start_reactor:fuel_on :fuel_1
   202 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  203 label *label137
+  204 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  205 set .RET_T_STARTUP :start_reactor:t_startup
+  206 op sub *tmp113 @tick :start_reactor:t_startup
+  207 op idiv :start_reactor:secs *tmp113 60
+  208 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  209 set :start_reactor:supply_fuel true
+  210 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  211 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  212 sensor *tmp118 .NODE @powerNetStored
+  213 op floor :start_reactor:charge *tmp118
+  214 sensor *tmp120 .NODE @powerNetIn
+  215 sensor *tmp121 .NODE @powerNetOut
+  216 op sub *tmp122 *tmp120 *tmp121
+  217 op floor :start_reactor:surplus *tmp122
+  218 op mul *tmp124 .AVG_SURPLUS 0.8
+  219 op mul *tmp125 :start_reactor:surplus 0.2
+  220 op add .AVG_SURPLUS *tmp124 *tmp125
+  221 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  222 print "#"
+  223 print :start_reactor:reactor_num
+  224 print " "
+  225 print "- "
+  226 jump *label138 equal :start_reactor:emerg_shutdown false
+  227 control enabled :start_reactor:reactor false
+  228 print "emergency mode"
+  229 print "\n"
+  230 set :start_reactor:supply_fuel false
+  231 jump *label171 always
+  232 label *label138
+  233 jump *label157 equal :start_reactor:enabled false
+  234 jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  235 control enabled :start_reactor:reactor false
+  236 print "STOP unwanted"
+  237 print "\n"
+  238 jump *label156 always
+  239 label *label139
+  240 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  241 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  242 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  243 op land *tmp139 *tmp136 *tmp138
+  244 jump *label140 equal *tmp139 false
+  245 control enabled :start_reactor:reactor false
+  246 print "STOP system fuel low"
+  247 print "\n"
+  248 jump *label155 always
+  249 label *label140
+  250 jump *label141 greaterThan :start_reactor:fuel 1
+  251 control enabled :start_reactor:reactor false
+  252 print "STOP fuel low"
+  253 print "\n"
+  254 jump *label154 always
+  255 label *label141
+  256 jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
+  257 control enabled :start_reactor:reactor false
+  258 print "STOP out of cryo"
+  259 print "\n"
+  260 jump *label153 always
+  261 label *label142
+  262 jump *label149 greaterThanEq :start_reactor:secs 30
+  263 label *label143
+  264 # "Function: def calc_charge_req(in reactor, in time)"
+  265 op sub *tmp102 @tick :start_reactor:t_startup
+  266 op idiv :calc_charge_req:secs *tmp102 60
+  267 op greaterThan *tmp104 :calc_charge_req:secs 30
+  268 sensor *tmp105 :start_reactor:reactor @enabled
+  269 op equal *tmp106 *tmp105 false
+  270 op or *tmp107 *tmp104 *tmp106
+  271 jump *label144 equal *tmp107 false
+  272 set :calc_charge_req*retval 0
+  273 jump *label146 always
+  274 label *label144
+  275 label *label145
+  276 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  277 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  278 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  279 set :calc_charge_req*retval :calc_charge_req:charge_req
+  280 jump *label146 always
+  281 label *label146
+  282 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  283 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  284 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  285 op land *tmp156 *tmp154 *tmp155
+  286 jump *label147 equal *tmp156 false
+  287 control enabled :start_reactor:reactor false
+  288 print "START FAIL battery"
+  289 print "\n"
+  290 set :start_reactor:supply_fuel false
+  291 jump *label148 always
+  292 label *label147
+  293 op sub :start_reactor:time_left 30 :start_reactor:secs
+  294 print "Starting "
+  295 print :start_reactor:time_left
+  296 print " "
+  297 print "secs, req "
+  298 print :calc_charge_req*retval
+  299 print "J"
+  300 print "\n"
+  301 label *label148
+  302 jump *label152 always
+  303 label *label149
+  304 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  305 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  306 op land *tmp163 *tmp161 *tmp162
+  307 jump *label150 equal *tmp163 false
+  308 control enabled :start_reactor:reactor false
+  309 print "ABANDON - battery crit"
+  310 print "\n"
+  311 set :start_reactor:supply_fuel false
+  312 jump *label151 always
+  313 label *label150
+  314 op idiv :start_reactor:mins :start_reactor:secs 6
+  315 op div :start_reactor:mins :start_reactor:mins 10
+  316 print "RUN "
+  317 print :start_reactor:mins
+  318 print " "
+  319 print "mins"
+  320 print "\n"
+  321 label *label151
+  322 label *label152
+  323 label *label153
+  324 label *label154
+  325 label *label155
+  326 label *label156
+  327 jump *label170 always
+  328 label *label157
+  329 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  330 op sub *tmp170 *tmp169 .PWR_ABORT
+  331 op div *tmp171 *tmp170 .PWR_REQ
+  332 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  333 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  334 op max :start_reactor:flow_units -0.1 *tmp173
+  335 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  336 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  337 jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  338 print "IDLE"
+  339 print "\n"
+  340 set :start_reactor:supply_fuel false
+  341 jump *label169 always
+  342 label *label158
+  343 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  344 jump *label159 greaterThanEq *tmp179 1
+  345 op idiv *tmp183 :start_reactor:flow_units 0.001
+  346 op div :start_reactor:flow *tmp183 10
+  347 op idiv *tmp186 :start_reactor:charge_units 0.001
+  348 op div :start_reactor:charge *tmp186 10
+  349 print "WAIT power. (%"
+  350 print :start_reactor:charge
+  351 print "J + %"
+  352 print :start_reactor:flow
+  353 print "W)"
+  354 print "\n"
+  355 set :start_reactor:supply_fuel false
+  356 jump *label168 always
+  357 label *label159
+  358 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  359 op land *tmp189 :start_reactor:fuel_on *tmp188
+  360 jump *label162 equal *tmp189 false
+  361 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  362 jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  363 print "WAIT fuel"
+  364 print "\n"
+  365 jump *label161 always
+  366 label *label160
+  367 print "WAIT system fuel"
+  368 print "\n"
+  369 label *label161
+  370 jump *label167 always
+  371 label *label162
+  372 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  373 jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  374 print "WAIT buffer fuel"
+  375 print "\n"
+  376 jump *label166 always
+  377 label *label163
+  378 jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  379 print "WAIT cryo"
+  380 print "\n"
+  381 jump *label165 always
+  382 label *label164
+  383 print "STARTUP"
+  384 print "\n"
+  385 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  386 control enabled :start_reactor:reactor true
+  387 label *label165
+  388 label *label166
+  389 label *label167
+  390 label *label168
+  391 label *label169
+  392 label *label170
+  393 label *label171
+  394 sensor *tmp201 :start_reactor:reactor @enabled
+  395 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  396 label *label172
+  397 label *label173
+  398 set :start_reactor*retval :start_reactor:supply_fuel
+  399 jump *label174 always
+  400 label *label174
   401 set :fuel_1 :start_reactor*retval
   402 set :t_startup1 .RET_T_STARTUP
   403 label *label87

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   202 set :start_reactor:t_startup :t_startup1
   203 label *label137
   204 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  205 set .RET_T_STARTUP :t_startup1
+  206 op sub *tmp113 @tick :t_startup1
   207 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  208 sensor :start_reactor:fuel reactor1 @blast-compound
   209 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  210 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  211 sensor :start_reactor:cryo reactor1 @cryofluid
+  212 sensor *tmp118 node1 @powerNetStored
   213 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  214 sensor *tmp120 node1 @powerNetIn
+  215 sensor *tmp121 node1 @powerNetOut
   216 op sub *tmp122 *tmp120 *tmp121
   217 op floor :start_reactor:surplus *tmp122
   218 op mul *tmp124 .AVG_SURPLUS 0.8
   219 op mul *tmp125 :start_reactor:surplus 0.2
   220 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  221 sensor :start_reactor:enabled reactor1 @enabled
   222 print "#"
-    * print :start_reactor:reactor_num
+  223 print 1
   224 print " "
   225 print "- "
-    * jump *label138 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  226 jump *label138 equal :emerg_shutdown false
+  227 control enabled reactor1 false
   228 print "emergency mode"
   229 print "\n"
   230 set :start_reactor:supply_fuel false
   231 jump *label171 always
   232 label *label138
   233 jump *label157 equal :start_reactor:enabled false
-    * jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  234 jump *label139 greaterThanEq .REACTORS_DESIRED 1
+  235 control enabled reactor1 false
   236 print "STOP unwanted"
   237 print "\n"
   238 jump *label156 always
   239 label *label139
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  240 op greaterThan *tmp136 1 1
+  241 op mul *tmp137 15 1
+  242 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  243 op land *tmp139 false *tmp138
   244 jump *label140 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  245 control enabled reactor1 false
   246 print "STOP system fuel low"
   247 print "\n"
   248 jump *label155 always
   249 label *label140
   250 jump *label141 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  251 control enabled reactor1 false
   252 print "STOP fuel low"
   253 print "\n"
   254 jump *label154 always
   255 label *label141
-    * jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  256 jump *label142 greaterThan :start_reactor:cryo 1
+  257 control enabled reactor1 false
   258 print "STOP out of cryo"
   259 print "\n"
   260 jump *label153 always
 
   262 jump *label149 greaterThanEq :start_reactor:secs 30
   263 label *label143
   264 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  265 op sub *tmp102 @tick :t_startup1
   266 op idiv :calc_charge_req:secs *tmp102 60
   267 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  268 sensor *tmp105 reactor1 @enabled
   269 op equal *tmp106 *tmp105 false
   270 op or *tmp107 *tmp104 *tmp106
   271 jump *label144 equal *tmp107 false
 
   280 jump *label146 always
   281 label *label146
   282 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  283 op lessThan *tmp154 *tmp153 5000
+  284 op lessThan *tmp155 :start_reactor:surplus -500
   285 op land *tmp156 *tmp154 *tmp155
   286 jump *label147 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  287 control enabled reactor1 false
   288 print "START FAIL battery"
   289 print "\n"
   290 set :start_reactor:supply_fuel false
 
   301 label *label148
   302 jump *label152 always
   303 label *label149
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  304 op lessThan *tmp161 :start_reactor:charge 2000
+  305 op lessThan *tmp162 :start_reactor:surplus -500
   306 op land *tmp163 *tmp161 *tmp162
   307 jump *label150 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  308 control enabled reactor1 false
   309 print "ABANDON - battery crit"
   310 print "\n"
   311 set :start_reactor:supply_fuel false
 
   327 jump *label170 always
   328 label *label157
   329 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  330 op sub *tmp170 *tmp169 5000
+  331 op div *tmp171 *tmp170 23000
+  332 op mul :start_reactor:charge_units *tmp171 0.6
+  333 op div *tmp173 :start_reactor:surplus 2000
   334 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  335 op mul *tmp175 2 1
+  336 op add :start_reactor:cryo_req 3 2
+  337 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   338 print "IDLE"
   339 print "\n"
   340 set :start_reactor:supply_fuel false
 
   355 set :start_reactor:supply_fuel false
   356 jump *label168 always
   357 label *label159
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  358 op lessThan *tmp188 :start_reactor:fuel 10
+  359 op land *tmp189 :fuel_1 *tmp188
   360 jump *label162 equal *tmp189 false
   361 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  362 jump *label160 lessThanEq *tmp191 10
   363 print "WAIT fuel"
   364 print "\n"
   365 jump *label161 always
 
   369 label *label161
   370 jump *label167 always
   371 label *label162
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  372 op mul *tmp194 45 1
+  373 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
   374 print "WAIT buffer fuel"
   375 print "\n"
   376 jump *label166 always
   377 label *label163
-    * jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  378 jump *label164 greaterThanEq :start_reactor:cryo 5
   379 print "WAIT cryo"
   380 print "\n"
   381 jump *label165 always
   382 label *label164
   383 print "STARTUP"
   384 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  385 op add .START_POWER_REQ .START_POWER_REQ 23000
+  386 control enabled reactor1 true
   387 label *label165
   388 label *label166
   389 label *label167
 
   391 label *label169
   392 label *label170
   393 label *label171
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  394 sensor *tmp201 reactor1 @enabled
+  395 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   396 label *label172
   397 label *label173
   398 set :start_reactor*retval :start_reactor:supply_fuel
   399 jump *label174 always
   400 label *label174
-    * set :fuel_1 :start_reactor*retval
+  401 set :fuel_1 :start_reactor:supply_fuel
   402 set :t_startup1 .RET_T_STARTUP
   403 label *label87
   404 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  405 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   406 label *label88
   407 label *label89
   408 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  409 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   410 label *label90
   411 label *label91
   412 control config unloader2 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   195 jump *label132 always
   196 label *label132
   197 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   198 label *label137
   199 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   200 set .RET_T_STARTUP :t_startup1
 
   324 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   325 op sub *tmp170 *tmp169 5000
   326 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  327 op div :start_reactor:charge_units *tmp170 38333.333333333336
   328 op div *tmp173 :start_reactor:surplus 2000
   329 op max :start_reactor:flow_units -0.1 *tmp173
   330 op mul *tmp175 2 1
 
   390 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   391 label *label172
   392 label *label173
-    * set :start_reactor*retval :start_reactor:supply_fuel
   393 jump *label174 always
   394 label *label174
   395 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+156 instructions):
 
   410 set :start_reactor:emerg_shutdown :emerg_shutdown
   411 set :start_reactor:fuel_on :fuel_2
   412 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  413 label *label175
+  414 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  415 set .RET_T_STARTUP :start_reactor:t_startup
+  416 op sub *tmp113 @tick :start_reactor:t_startup
+  417 op idiv :start_reactor:secs *tmp113 60
+  418 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  419 set :start_reactor:supply_fuel true
+  420 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  421 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  422 sensor *tmp118 .NODE @powerNetStored
+  423 op floor :start_reactor:charge *tmp118
+  424 sensor *tmp120 .NODE @powerNetIn
+  425 sensor *tmp121 .NODE @powerNetOut
+  426 op sub *tmp122 *tmp120 *tmp121
+  427 op floor :start_reactor:surplus *tmp122
+  428 op mul *tmp124 .AVG_SURPLUS 0.8
+  429 op mul *tmp125 :start_reactor:surplus 0.2
+  430 op add .AVG_SURPLUS *tmp124 *tmp125
+  431 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  432 print "#"
+  433 print :start_reactor:reactor_num
+  434 print " "
+  435 print "- "
+  436 jump *label176 equal :start_reactor:emerg_shutdown false
+  437 control enabled :start_reactor:reactor false
+  438 print "emergency mode"
+  439 print "\n"
+  440 set :start_reactor:supply_fuel false
+  441 jump *label209 always
+  442 label *label176
+  443 jump *label195 equal :start_reactor:enabled false
+  444 jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  445 control enabled :start_reactor:reactor false
+  446 print "STOP unwanted"
+  447 print "\n"
+  448 jump *label194 always
+  449 label *label177
+  450 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  451 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  452 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  453 op land *tmp139 *tmp136 *tmp138
+  454 jump *label178 equal *tmp139 false
+  455 control enabled :start_reactor:reactor false
+  456 print "STOP system fuel low"
+  457 print "\n"
+  458 jump *label193 always
+  459 label *label178
+  460 jump *label179 greaterThan :start_reactor:fuel 1
+  461 control enabled :start_reactor:reactor false
+  462 print "STOP fuel low"
+  463 print "\n"
+  464 jump *label192 always
+  465 label *label179
+  466 jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
+  467 control enabled :start_reactor:reactor false
+  468 print "STOP out of cryo"
+  469 print "\n"
+  470 jump *label191 always
+  471 label *label180
+  472 jump *label187 greaterThanEq :start_reactor:secs 30
+  473 label *label181
+  474 # "Function: def calc_charge_req(in reactor, in time)"
+  475 op sub *tmp102 @tick :start_reactor:t_startup
+  476 op idiv :calc_charge_req:secs *tmp102 60
+  477 op greaterThan *tmp104 :calc_charge_req:secs 30
+  478 sensor *tmp105 :start_reactor:reactor @enabled
+  479 op equal *tmp106 *tmp105 false
+  480 op or *tmp107 *tmp104 *tmp106
+  481 jump *label182 equal *tmp107 false
+  482 set :calc_charge_req*retval 0
+  483 jump *label184 always
+  484 label *label182
+  485 label *label183
+  486 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  487 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  488 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  489 set :calc_charge_req*retval :calc_charge_req:charge_req
+  490 jump *label184 always
+  491 label *label184
+  492 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  493 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  494 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  495 op land *tmp156 *tmp154 *tmp155
+  496 jump *label185 equal *tmp156 false
+  497 control enabled :start_reactor:reactor false
+  498 print "START FAIL battery"
+  499 print "\n"
+  500 set :start_reactor:supply_fuel false
+  501 jump *label186 always
+  502 label *label185
+  503 op sub :start_reactor:time_left 30 :start_reactor:secs
+  504 print "Starting "
+  505 print :start_reactor:time_left
+  506 print " "
+  507 print "secs, req "
+  508 print :calc_charge_req*retval
+  509 print "J"
+  510 print "\n"
+  511 label *label186
+  512 jump *label190 always
+  513 label *label187
+  514 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  515 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  516 op land *tmp163 *tmp161 *tmp162
+  517 jump *label188 equal *tmp163 false
+  518 control enabled :start_reactor:reactor false
+  519 print "ABANDON - battery crit"
+  520 print "\n"
+  521 set :start_reactor:supply_fuel false
+  522 jump *label189 always
+  523 label *label188
+  524 op idiv :start_reactor:mins :start_reactor:secs 6
+  525 op div :start_reactor:mins :start_reactor:mins 10
+  526 print "RUN "
+  527 print :start_reactor:mins
+  528 print " "
+  529 print "mins"
+  530 print "\n"
+  531 label *label189
+  532 label *label190
+  533 label *label191
+  534 label *label192
+  535 label *label193
+  536 label *label194
+  537 jump *label208 always
+  538 label *label195
+  539 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  540 op sub *tmp170 *tmp169 .PWR_ABORT
+  541 op div *tmp171 *tmp170 .PWR_REQ
+  542 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  543 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  544 op max :start_reactor:flow_units -0.1 *tmp173
+  545 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  546 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  547 jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  548 print "IDLE"
+  549 print "\n"
+  550 set :start_reactor:supply_fuel false
+  551 jump *label207 always
+  552 label *label196
+  553 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  554 jump *label197 greaterThanEq *tmp179 1
+  555 op idiv *tmp183 :start_reactor:flow_units 0.001
+  556 op div :start_reactor:flow *tmp183 10
+  557 op idiv *tmp186 :start_reactor:charge_units 0.001
+  558 op div :start_reactor:charge *tmp186 10
+  559 print "WAIT power. (%"
+  560 print :start_reactor:charge
+  561 print "J + %"
+  562 print :start_reactor:flow
+  563 print "W)"
+  564 print "\n"
+  565 set :start_reactor:supply_fuel false
+  566 jump *label206 always
+  567 label *label197
+  568 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  569 op land *tmp189 :start_reactor:fuel_on *tmp188
+  570 jump *label200 equal *tmp189 false
+  571 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  572 jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  573 print "WAIT fuel"
+  574 print "\n"
+  575 jump *label199 always
+  576 label *label198
+  577 print "WAIT system fuel"
+  578 print "\n"
+  579 label *label199
+  580 jump *label205 always
+  581 label *label200
+  582 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  583 jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  584 print "WAIT buffer fuel"
+  585 print "\n"
+  586 jump *label204 always
+  587 label *label201
+  588 jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  589 print "WAIT cryo"
+  590 print "\n"
+  591 jump *label203 always
+  592 label *label202
+  593 print "STARTUP"
+  594 print "\n"
+  595 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  596 control enabled :start_reactor:reactor true
+  597 label *label203
+  598 label *label204
+  599 label *label205
+  600 label *label206
+  601 label *label207
+  602 label *label208
+  603 label *label209
+  604 sensor *tmp201 :start_reactor:reactor @enabled
+  605 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  606 label *label210
+  607 label *label211
+  608 set :start_reactor*retval :start_reactor:supply_fuel
+  609 jump *label212 always
+  610 label *label212
   611 set :fuel_2 :start_reactor*retval
   612 set :t_startup2 .RET_T_STARTUP
   613 label *label93

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   412 set :start_reactor:t_startup :t_startup2
   413 label *label175
   414 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  415 set .RET_T_STARTUP :t_startup2
+  416 op sub *tmp113 @tick :t_startup2
   417 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  418 sensor :start_reactor:fuel reactor2 @blast-compound
   419 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  420 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  421 sensor :start_reactor:cryo reactor2 @cryofluid
+  422 sensor *tmp118 node1 @powerNetStored
   423 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  424 sensor *tmp120 node1 @powerNetIn
+  425 sensor *tmp121 node1 @powerNetOut
   426 op sub *tmp122 *tmp120 *tmp121
   427 op floor :start_reactor:surplus *tmp122
   428 op mul *tmp124 .AVG_SURPLUS 0.8
   429 op mul *tmp125 :start_reactor:surplus 0.2
   430 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  431 sensor :start_reactor:enabled reactor2 @enabled
   432 print "#"
-    * print :start_reactor:reactor_num
+  433 print 2
   434 print " "
   435 print "- "
-    * jump *label176 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  436 jump *label176 equal :emerg_shutdown false
+  437 control enabled reactor2 false
   438 print "emergency mode"
   439 print "\n"
   440 set :start_reactor:supply_fuel false
   441 jump *label209 always
   442 label *label176
   443 jump *label195 equal :start_reactor:enabled false
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  444 jump *label177 greaterThanEq .REACTORS_DESIRED 2
+  445 control enabled reactor2 false
   446 print "STOP unwanted"
   447 print "\n"
   448 jump *label194 always
   449 label *label177
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  450 op greaterThan *tmp136 2 1
+  451 op mul *tmp137 15 2
+  452 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  453 op land *tmp139 true *tmp138
   454 jump *label178 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  455 control enabled reactor2 false
   456 print "STOP system fuel low"
   457 print "\n"
   458 jump *label193 always
   459 label *label178
   460 jump *label179 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  461 control enabled reactor2 false
   462 print "STOP fuel low"
   463 print "\n"
   464 jump *label192 always
   465 label *label179
-    * jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  466 jump *label180 greaterThan :start_reactor:cryo 1
+  467 control enabled reactor2 false
   468 print "STOP out of cryo"
   469 print "\n"
   470 jump *label191 always
 
   472 jump *label187 greaterThanEq :start_reactor:secs 30
   473 label *label181
   474 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  475 op sub *tmp102 @tick :t_startup2
   476 op idiv :calc_charge_req:secs *tmp102 60
   477 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  478 sensor *tmp105 reactor2 @enabled
   479 op equal *tmp106 *tmp105 false
   480 op or *tmp107 *tmp104 *tmp106
   481 jump *label182 equal *tmp107 false
 
   490 jump *label184 always
   491 label *label184
   492 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  493 op lessThan *tmp154 *tmp153 5000
+  494 op lessThan *tmp155 :start_reactor:surplus -500
   495 op land *tmp156 *tmp154 *tmp155
   496 jump *label185 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  497 control enabled reactor2 false
   498 print "START FAIL battery"
   499 print "\n"
   500 set :start_reactor:supply_fuel false
 
   511 label *label186
   512 jump *label190 always
   513 label *label187
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  514 op lessThan *tmp161 :start_reactor:charge 2000
+  515 op lessThan *tmp162 :start_reactor:surplus -500
   516 op land *tmp163 *tmp161 *tmp162
   517 jump *label188 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  518 control enabled reactor2 false
   519 print "ABANDON - battery crit"
   520 print "\n"
   521 set :start_reactor:supply_fuel false
 
   537 jump *label208 always
   538 label *label195
   539 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  540 op sub *tmp170 *tmp169 5000
+  541 op div *tmp171 *tmp170 23000
+  542 op mul :start_reactor:charge_units *tmp171 0.6
+  543 op div *tmp173 :start_reactor:surplus 2000
   544 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  545 op mul *tmp175 2 2
+  546 op add :start_reactor:cryo_req 3 4
+  547 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   548 print "IDLE"
   549 print "\n"
   550 set :start_reactor:supply_fuel false
 
   565 set :start_reactor:supply_fuel false
   566 jump *label206 always
   567 label *label197
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  568 op lessThan *tmp188 :start_reactor:fuel 10
+  569 op land *tmp189 :fuel_2 *tmp188
   570 jump *label200 equal *tmp189 false
   571 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  572 jump *label198 lessThanEq *tmp191 10
   573 print "WAIT fuel"
   574 print "\n"
   575 jump *label199 always
 
   579 label *label199
   580 jump *label205 always
   581 label *label200
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  582 op mul *tmp194 45 2
+  583 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
   584 print "WAIT buffer fuel"
   585 print "\n"
   586 jump *label204 always
   587 label *label201
-    * jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  588 jump *label202 greaterThanEq :start_reactor:cryo 7
   589 print "WAIT cryo"
   590 print "\n"
   591 jump *label203 always
   592 label *label202
   593 print "STARTUP"
   594 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  595 op add .START_POWER_REQ .START_POWER_REQ 23000
+  596 control enabled reactor2 true
   597 label *label203
   598 label *label204
   599 label *label205
 
   601 label *label207
   602 label *label208
   603 label *label209
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  604 sensor *tmp201 reactor2 @enabled
+  605 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   606 label *label210
   607 label *label211
   608 set :start_reactor*retval :start_reactor:supply_fuel
   609 jump *label212 always
   610 label *label212
-    * set :fuel_2 :start_reactor*retval
+  611 set :fuel_2 :start_reactor:supply_fuel
   612 set :t_startup2 .RET_T_STARTUP
   613 label *label93
   614 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  615 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   616 label *label94
   617 label *label95
   618 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  619 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   620 label *label96
   621 label *label97
   622 control config unloader4 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   405 label *label91
   406 control config unloader2 *tmp101
   407 label *label92
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   408 label *label175
   409 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   410 set .RET_T_STARTUP :t_startup2
 
   534 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   535 op sub *tmp170 *tmp169 5000
   536 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  537 op div :start_reactor:charge_units *tmp170 38333.333333333336
   538 op div *tmp173 :start_reactor:surplus 2000
   539 op max :start_reactor:flow_units -0.1 *tmp173
   540 op mul *tmp175 2 2
 
   600 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   601 label *label210
   602 label *label211
-    * set :start_reactor*retval :start_reactor:supply_fuel
   603 jump *label212 always
   604 label *label212
   605 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+156 instructions):
 
   649 set :start_reactor:emerg_shutdown :emerg_shutdown
   650 set :start_reactor:fuel_on :fuel_3
   651 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  652 label *label213
+  653 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  654 set .RET_T_STARTUP :start_reactor:t_startup
+  655 op sub *tmp113 @tick :start_reactor:t_startup
+  656 op idiv :start_reactor:secs *tmp113 60
+  657 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  658 set :start_reactor:supply_fuel true
+  659 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  660 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  661 sensor *tmp118 .NODE @powerNetStored
+  662 op floor :start_reactor:charge *tmp118
+  663 sensor *tmp120 .NODE @powerNetIn
+  664 sensor *tmp121 .NODE @powerNetOut
+  665 op sub *tmp122 *tmp120 *tmp121
+  666 op floor :start_reactor:surplus *tmp122
+  667 op mul *tmp124 .AVG_SURPLUS 0.8
+  668 op mul *tmp125 :start_reactor:surplus 0.2
+  669 op add .AVG_SURPLUS *tmp124 *tmp125
+  670 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  671 print "#"
+  672 print :start_reactor:reactor_num
+  673 print " "
+  674 print "- "
+  675 jump *label214 equal :start_reactor:emerg_shutdown false
+  676 control enabled :start_reactor:reactor false
+  677 print "emergency mode"
+  678 print "\n"
+  679 set :start_reactor:supply_fuel false
+  680 jump *label247 always
+  681 label *label214
+  682 jump *label233 equal :start_reactor:enabled false
+  683 jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  684 control enabled :start_reactor:reactor false
+  685 print "STOP unwanted"
+  686 print "\n"
+  687 jump *label232 always
+  688 label *label215
+  689 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  690 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  691 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  692 op land *tmp139 *tmp136 *tmp138
+  693 jump *label216 equal *tmp139 false
+  694 control enabled :start_reactor:reactor false
+  695 print "STOP system fuel low"
+  696 print "\n"
+  697 jump *label231 always
+  698 label *label216
+  699 jump *label217 greaterThan :start_reactor:fuel 1
+  700 control enabled :start_reactor:reactor false
+  701 print "STOP fuel low"
+  702 print "\n"
+  703 jump *label230 always
+  704 label *label217
+  705 jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
+  706 control enabled :start_reactor:reactor false
+  707 print "STOP out of cryo"
+  708 print "\n"
+  709 jump *label229 always
+  710 label *label218
+  711 jump *label225 greaterThanEq :start_reactor:secs 30
+  712 label *label219
+  713 # "Function: def calc_charge_req(in reactor, in time)"
+  714 op sub *tmp102 @tick :start_reactor:t_startup
+  715 op idiv :calc_charge_req:secs *tmp102 60
+  716 op greaterThan *tmp104 :calc_charge_req:secs 30
+  717 sensor *tmp105 :start_reactor:reactor @enabled
+  718 op equal *tmp106 *tmp105 false
+  719 op or *tmp107 *tmp104 *tmp106
+  720 jump *label220 equal *tmp107 false
+  721 set :calc_charge_req*retval 0
+  722 jump *label222 always
+  723 label *label220
+  724 label *label221
+  725 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  726 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  727 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  728 set :calc_charge_req*retval :calc_charge_req:charge_req
+  729 jump *label222 always
+  730 label *label222
+  731 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  732 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  733 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  734 op land *tmp156 *tmp154 *tmp155
+  735 jump *label223 equal *tmp156 false
+  736 control enabled :start_reactor:reactor false
+  737 print "START FAIL battery"
+  738 print "\n"
+  739 set :start_reactor:supply_fuel false
+  740 jump *label224 always
+  741 label *label223
+  742 op sub :start_reactor:time_left 30 :start_reactor:secs
+  743 print "Starting "
+  744 print :start_reactor:time_left
+  745 print " "
+  746 print "secs, req "
+  747 print :calc_charge_req*retval
+  748 print "J"
+  749 print "\n"
+  750 label *label224
+  751 jump *label228 always
+  752 label *label225
+  753 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  754 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  755 op land *tmp163 *tmp161 *tmp162
+  756 jump *label226 equal *tmp163 false
+  757 control enabled :start_reactor:reactor false
+  758 print "ABANDON - battery crit"
+  759 print "\n"
+  760 set :start_reactor:supply_fuel false
+  761 jump *label227 always
+  762 label *label226
+  763 op idiv :start_reactor:mins :start_reactor:secs 6
+  764 op div :start_reactor:mins :start_reactor:mins 10
+  765 print "RUN "
+  766 print :start_reactor:mins
+  767 print " "
+  768 print "mins"
+  769 print "\n"
+  770 label *label227
+  771 label *label228
+  772 label *label229
+  773 label *label230
+  774 label *label231
+  775 label *label232
+  776 jump *label246 always
+  777 label *label233
+  778 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  779 op sub *tmp170 *tmp169 .PWR_ABORT
+  780 op div *tmp171 *tmp170 .PWR_REQ
+  781 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  782 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  783 op max :start_reactor:flow_units -0.1 *tmp173
+  784 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  785 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  786 jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  787 print "IDLE"
+  788 print "\n"
+  789 set :start_reactor:supply_fuel false
+  790 jump *label245 always
+  791 label *label234
+  792 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  793 jump *label235 greaterThanEq *tmp179 1
+  794 op idiv *tmp183 :start_reactor:flow_units 0.001
+  795 op div :start_reactor:flow *tmp183 10
+  796 op idiv *tmp186 :start_reactor:charge_units 0.001
+  797 op div :start_reactor:charge *tmp186 10
+  798 print "WAIT power. (%"
+  799 print :start_reactor:charge
+  800 print "J + %"
+  801 print :start_reactor:flow
+  802 print "W)"
+  803 print "\n"
+  804 set :start_reactor:supply_fuel false
+  805 jump *label244 always
+  806 label *label235
+  807 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  808 op land *tmp189 :start_reactor:fuel_on *tmp188
+  809 jump *label238 equal *tmp189 false
+  810 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  811 jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  812 print "WAIT fuel"
+  813 print "\n"
+  814 jump *label237 always
+  815 label *label236
+  816 print "WAIT system fuel"
+  817 print "\n"
+  818 label *label237
+  819 jump *label243 always
+  820 label *label238
+  821 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  822 jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  823 print "WAIT buffer fuel"
+  824 print "\n"
+  825 jump *label242 always
+  826 label *label239
+  827 jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  828 print "WAIT cryo"
+  829 print "\n"
+  830 jump *label241 always
+  831 label *label240
+  832 print "STARTUP"
+  833 print "\n"
+  834 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  835 control enabled :start_reactor:reactor true
+  836 label *label241
+  837 label *label242
+  838 label *label243
+  839 label *label244
+  840 label *label245
+  841 label *label246
+  842 label *label247
+  843 sensor *tmp201 :start_reactor:reactor @enabled
+  844 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  845 label *label248
+  846 label *label249
+  847 set :start_reactor*retval :start_reactor:supply_fuel
+  848 jump *label250 always
+  849 label *label250
   850 set :fuel_3 :start_reactor*retval
   851 set :t_startup3 .RET_T_STARTUP
   852 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   651 set :start_reactor:t_startup :t_startup3
   652 label *label213
   653 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  654 set .RET_T_STARTUP :t_startup3
+  655 op sub *tmp113 @tick :t_startup3
   656 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  657 sensor :start_reactor:fuel reactor3 @blast-compound
   658 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  659 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  660 sensor :start_reactor:cryo reactor3 @cryofluid
+  661 sensor *tmp118 node1 @powerNetStored
   662 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  663 sensor *tmp120 node1 @powerNetIn
+  664 sensor *tmp121 node1 @powerNetOut
   665 op sub *tmp122 *tmp120 *tmp121
   666 op floor :start_reactor:surplus *tmp122
   667 op mul *tmp124 .AVG_SURPLUS 0.8
   668 op mul *tmp125 :start_reactor:surplus 0.2
   669 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  670 sensor :start_reactor:enabled reactor3 @enabled
   671 print "#"
-    * print :start_reactor:reactor_num
+  672 print 3
   673 print " "
   674 print "- "
-    * jump *label214 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  675 jump *label214 equal :emerg_shutdown false
+  676 control enabled reactor3 false
   677 print "emergency mode"
   678 print "\n"
   679 set :start_reactor:supply_fuel false
   680 jump *label247 always
   681 label *label214
   682 jump *label233 equal :start_reactor:enabled false
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  683 jump *label215 greaterThanEq .REACTORS_DESIRED 3
+  684 control enabled reactor3 false
   685 print "STOP unwanted"
   686 print "\n"
   687 jump *label232 always
   688 label *label215
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  689 op greaterThan *tmp136 3 1
+  690 op mul *tmp137 15 3
+  691 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  692 op land *tmp139 true *tmp138
   693 jump *label216 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  694 control enabled reactor3 false
   695 print "STOP system fuel low"
   696 print "\n"
   697 jump *label231 always
   698 label *label216
   699 jump *label217 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  700 control enabled reactor3 false
   701 print "STOP fuel low"
   702 print "\n"
   703 jump *label230 always
   704 label *label217
-    * jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  705 jump *label218 greaterThan :start_reactor:cryo 1
+  706 control enabled reactor3 false
   707 print "STOP out of cryo"
   708 print "\n"
   709 jump *label229 always
 
   711 jump *label225 greaterThanEq :start_reactor:secs 30
   712 label *label219
   713 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  714 op sub *tmp102 @tick :t_startup3
   715 op idiv :calc_charge_req:secs *tmp102 60
   716 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  717 sensor *tmp105 reactor3 @enabled
   718 op equal *tmp106 *tmp105 false
   719 op or *tmp107 *tmp104 *tmp106
   720 jump *label220 equal *tmp107 false
 
   729 jump *label222 always
   730 label *label222
   731 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  732 op lessThan *tmp154 *tmp153 5000
+  733 op lessThan *tmp155 :start_reactor:surplus -500
   734 op land *tmp156 *tmp154 *tmp155
   735 jump *label223 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  736 control enabled reactor3 false
   737 print "START FAIL battery"
   738 print "\n"
   739 set :start_reactor:supply_fuel false
 
   750 label *label224
   751 jump *label228 always
   752 label *label225
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  753 op lessThan *tmp161 :start_reactor:charge 2000
+  754 op lessThan *tmp162 :start_reactor:surplus -500
   755 op land *tmp163 *tmp161 *tmp162
   756 jump *label226 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  757 control enabled reactor3 false
   758 print "ABANDON - battery crit"
   759 print "\n"
   760 set :start_reactor:supply_fuel false
 
   776 jump *label246 always
   777 label *label233
   778 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  779 op sub *tmp170 *tmp169 5000
+  780 op div *tmp171 *tmp170 23000
+  781 op mul :start_reactor:charge_units *tmp171 0.6
+  782 op div *tmp173 :start_reactor:surplus 2000
   783 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  784 op mul *tmp175 2 3
+  785 op add :start_reactor:cryo_req 3 6
+  786 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   787 print "IDLE"
   788 print "\n"
   789 set :start_reactor:supply_fuel false
 
   804 set :start_reactor:supply_fuel false
   805 jump *label244 always
   806 label *label235
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  807 op lessThan *tmp188 :start_reactor:fuel 10
+  808 op land *tmp189 :fuel_3 *tmp188
   809 jump *label238 equal *tmp189 false
   810 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  811 jump *label236 lessThanEq *tmp191 10
   812 print "WAIT fuel"
   813 print "\n"
   814 jump *label237 always
 
   818 label *label237
   819 jump *label243 always
   820 label *label238
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  821 op mul *tmp194 45 3
+  822 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
   823 print "WAIT buffer fuel"
   824 print "\n"
   825 jump *label242 always
   826 label *label239
-    * jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  827 jump *label240 greaterThanEq :start_reactor:cryo 9
   828 print "WAIT cryo"
   829 print "\n"
   830 jump *label241 always
   831 label *label240
   832 print "STARTUP"
   833 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  834 op add .START_POWER_REQ .START_POWER_REQ 23000
+  835 control enabled reactor3 true
   836 label *label241
   837 label *label242
   838 label *label243
 
   840 label *label245
   841 label *label246
   842 label *label247
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  843 sensor *tmp201 reactor3 @enabled
+  844 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   845 label *label248
   846 label *label249
   847 set :start_reactor*retval :start_reactor:supply_fuel
   848 jump *label250 always
   849 label *label250
-    * set :fuel_3 :start_reactor*retval
+  850 set :fuel_3 :start_reactor:supply_fuel
   851 set :t_startup3 .RET_T_STARTUP
   852 set :start_reactor:reactor reactor4
   853 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   644 label *label111
   645 label *label112
   646 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   647 label *label213
   648 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   649 set .RET_T_STARTUP :t_startup3
 
   773 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   774 op sub *tmp170 *tmp169 5000
   775 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  776 op div :start_reactor:charge_units *tmp170 38333.333333333336
   777 op div *tmp173 :start_reactor:surplus 2000
   778 op max :start_reactor:flow_units -0.1 *tmp173
   779 op mul *tmp175 2 3
 
   839 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   840 label *label248
   841 label *label249
-    * set :start_reactor*retval :start_reactor:supply_fuel
   842 jump *label250 always
   843 label *label250
   844 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    76 control enabled projector1 false
    77 control enabled projector2 false
    78 set :check_radar*retval false
-    * jump *label108 always
    79 label *label107
    80 label *label108
    81 # "Function: def check_manual_shutdown()"
 
   389 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   390 label *label172
   391 label *label173
-    * jump *label174 always
   392 label *label174
   393 set :fuel_1 :start_reactor:supply_fuel
   394 set :t_startup1 .RET_T_STARTUP
 
   598 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   599 label *label210
   600 label *label211
-    * jump *label212 always
   601 label *label212
   602 set :fuel_2 :start_reactor:supply_fuel
   603 set :t_startup2 .RET_T_STARTUP
 
   637 control enabled projector1 false
   638 control enabled projector2 false
   639 set :check_radar*retval false
-    * jump *label112 always
   640 label *label111
   641 label *label112
   642 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   835 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   836 label *label248
   837 label *label249
-    * jump *label250 always
   838 label *label250
   839 set :fuel_3 :start_reactor:supply_fuel
   840 set :t_startup3 .RET_T_STARTUP
 
   923 label *label19
   924 label *label15
   925 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label13 always
   926 label *label13
   927 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   928 label *label20
 
   950 # "Function: def kilo(in val)"
   951 op idiv *tmp93 .AVG_SURPLUS 100
   952 op div :kilo*retval *tmp93 10
-    * jump *label82 always
   953 label *label82
   954 set :surplus :kilo*retval
   955 sensor :kilo:val node1 @powerNetStored
 
   957 # "Function: def kilo(in val)"
   958 op idiv *tmp93 :kilo:val 100
   959 op div :kilo*retval *tmp93 10
-    * jump *label84 always
   960 label *label84
   961 set :charge :kilo*retval
   962 jump *label25 lessThanEq .START_POWER_REQ 0
 
   964 # "Function: def kilo(in val)"
   965 op idiv *tmp93 .START_POWER_REQ 100
   966 op div :kilo*retval *tmp93 10
-    * jump *label86 always
   967 label *label86
   968 print "Req "
   969 print :kilo*retval
 
  1217 label *label76
  1218 label *label77
  1219 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label45 always
  1220 label *label45
  1221 return :start_reactor*retaddr
  1222 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   234 op greaterThan *tmp136 1 1
   235 op mul *tmp137 15 1
   236 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  237 set *tmp139 false
   238 jump *label140 equal *tmp139 false
   239 control enabled reactor1 false
   240 print "STOP system fuel low"
 
   443 op greaterThan *tmp136 2 1
   444 op mul *tmp137 15 2
   445 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  446 set *tmp139 *tmp138
   447 jump *label178 equal *tmp139 false
   448 control enabled reactor2 false
   449 print "STOP system fuel low"
 
   680 op greaterThan *tmp136 3 1
   681 op mul *tmp137 15 3
   682 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  683 set *tmp139 *tmp138
   684 jump *label216 equal *tmp139 false
   685 control enabled reactor3 false
   686 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
   103 op equal *tmp106 *tmp105 false
   104 op or *tmp107 *tmp104 *tmp106
   105 jump *label114 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+  106 set .START_POWER_REQ 0
   107 jump *label116 always
   108 label *label114
   109 label *label115
   110 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   111 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   112 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+  113 set .START_POWER_REQ :calc_charge_req:charge_req
   114 jump *label116 always
   115 label *label116
-    * set .START_POWER_REQ :calc_charge_req*retval
   116 label *label117
   117 # "Function: def calc_charge_req(in reactor, in time)"
   118 op sub *tmp102 @tick :t_startup2
 
   948 label *label81
   949 # "Function: def kilo(in val)"
   950 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  951 op div :surplus *tmp93 10
   952 label *label82
-    * set :surplus :kilo*retval
   953 sensor :kilo:val node1 @powerNetStored
   954 label *label83
   955 # "Function: def kilo(in val)"
 
  1025 op sub *tmp113 @tick :start_reactor:t_startup
  1026 op idiv :start_reactor:secs *tmp113 60
  1027 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+ 1028 set :start_reactor*retval true
  1029 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
  1030 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
  1031 sensor *tmp118 .NODE @powerNetStored
 
  1046 control enabled :start_reactor:reactor false
  1047 print "emergency mode"
  1048 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1049 set :start_reactor*retval false
  1050 jump *label47 always
  1051 label *label46
  1052 jump *label48 equal :start_reactor:enabled false
 
  1106 control enabled :start_reactor:reactor false
  1107 print "START FAIL battery"
  1108 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1109 set :start_reactor*retval false
  1110 jump *label61 always
  1111 label *label60
  1112 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1127 control enabled :start_reactor:reactor false
  1128 print "ABANDON - battery crit"
  1129 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1130 set :start_reactor*retval false
  1131 jump *label63 always
  1132 label *label62
  1133 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1156 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1157 print "IDLE"
  1158 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1159 set :start_reactor*retval false
  1160 jump *label65 always
  1161 label *label64
  1162 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1171 print :start_reactor:flow
  1172 print "W)"
  1173 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1174 set :start_reactor*retval false
  1175 jump *label67 always
  1176 label *label66
  1177 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1214 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1215 label *label76
  1216 label *label77
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1217 label *label45
  1218 return :start_reactor*retaddr
  1219 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   234 op mul *tmp137 15 1
   235 op lessThan *tmp138 :start_reactor:fuel_stored 15
   236 set *tmp139 false
-    * jump *label140 equal *tmp139 false
+  237 jump *label140 equal false false
   238 control enabled reactor1 false
   239 print "STOP system fuel low"
   240 print "\n"
 
   443 op mul *tmp137 15 2
   444 op lessThan *tmp138 :start_reactor:fuel_stored 30
   445 set *tmp139 *tmp138
-    * jump *label178 equal *tmp139 false
+  446 jump *label178 equal *tmp138 false
   447 control enabled reactor2 false
   448 print "STOP system fuel low"
   449 print "\n"
 
   680 op mul *tmp137 15 3
   681 op lessThan *tmp138 :start_reactor:fuel_stored 45
   682 set *tmp139 *tmp138
-    * jump *label216 equal *tmp139 false
+  683 jump *label216 equal *tmp138 false
   684 control enabled reactor3 false
   685 print "STOP system fuel low"
   686 print "\n"
 
   853 call *label3 :start_reactor*retaddr :start_reactor*retval
   854 set :fuel_5 :start_reactor*retval
   855 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  856 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   857 op or :fuel_many *tmp27 :start_reactor*retval
   858 label *label99
   859 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   234 op mul *tmp137 15 1
   235 op lessThan *tmp138 :start_reactor:fuel_stored 15
   236 set *tmp139 false
-    * jump *label140 equal false false
+  237 jump *label140 always
   238 control enabled reactor1 false
   239 print "STOP system fuel low"
   240 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    51 set .TOWER cyclone1
    52 set .CONTAINER vault1
    53 set .NODE node1
-    * label *label105
    54 # "Function: def check_radar(in unit)"
    55 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    56 jump *label106 equal :check_radar:enemy_found null
 
    88 set *tmp8 true
    89 jump *label10 always
    90 label *label11
-    * label *label12
    91 set *tmp8 false
    92 jump *label10 always
    93 label *label10
    94 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label113
    95 # "Function: def calc_charge_req(in reactor, in time)"
    96 op sub *tmp102 @tick :t_startup1
    97 op idiv :calc_charge_req:secs *tmp102 60
 
   103 set .START_POWER_REQ 0
   104 jump *label116 always
   105 label *label114
-    * label *label115
   106 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   107 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   108 op idiv :calc_charge_req:charge_req *tmp110 0.04
   109 set .START_POWER_REQ :calc_charge_req:charge_req
   110 jump *label116 always
   111 label *label116
-    * label *label117
   112 # "Function: def calc_charge_req(in reactor, in time)"
   113 op sub *tmp102 @tick :t_startup2
   114 op idiv :calc_charge_req:secs *tmp102 60
 
   120 set :calc_charge_req*retval 0
   121 jump *label120 always
   122 label *label118
-    * label *label119
   123 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   124 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   125 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   127 jump *label120 always
   128 label *label120
   129 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label121
   130 # "Function: def calc_charge_req(in reactor, in time)"
   131 op sub *tmp102 @tick :t_startup3
   132 op idiv :calc_charge_req:secs *tmp102 60
 
   138 set :calc_charge_req*retval 0
   139 jump *label124 always
   140 label *label122
-    * label *label123
   141 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   142 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   143 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   145 jump *label124 always
   146 label *label124
   147 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label125
   148 # "Function: def calc_charge_req(in reactor, in time)"
   149 op sub *tmp102 @tick :t_startup4
   150 op idiv :calc_charge_req:secs *tmp102 60
 
   156 set :calc_charge_req*retval 0
   157 jump *label128 always
   158 label *label126
-    * label *label127
   159 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   160 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   161 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   163 jump *label128 always
   164 label *label128
   165 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label129
   166 # "Function: def calc_charge_req(in reactor, in time)"
   167 op sub *tmp102 @tick :t_startup5
   168 op idiv :calc_charge_req:secs *tmp102 60
 
   174 set :calc_charge_req*retval 0
   175 jump *label132 always
   176 label *label130
-    * label *label131
   177 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   178 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   179 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   181 jump *label132 always
   182 label *label132
   183 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label137
   184 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   185 set .RET_T_STARTUP :t_startup1
   186 op sub *tmp113 @tick :t_startup1
 
   240 jump *label153 always
   241 label *label142
   242 jump *label149 greaterThanEq :start_reactor:secs 30
-    * label *label143
   243 # "Function: def calc_charge_req(in reactor, in time)"
   244 op sub *tmp102 @tick :t_startup1
   245 op idiv :calc_charge_req:secs *tmp102 60
 
   251 set :calc_charge_req*retval 0
   252 jump *label146 always
   253 label *label144
-    * label *label145
   254 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   255 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   256 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   371 label *label171
   372 sensor *tmp201 reactor1 @enabled
   373 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label172
-    * label *label173
-    * label *label174
   374 set :fuel_1 :start_reactor:supply_fuel
   375 set :t_startup1 .RET_T_STARTUP
-    * label *label87
   376 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   377 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label88
-    * label *label89
   378 control config unloader1 *tmp97
   379 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label90
-    * label *label91
   380 control config unloader2 *tmp101
-    * label *label92
-    * label *label175
   381 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   382 set .RET_T_STARTUP :t_startup2
   383 op sub *tmp113 @tick :t_startup2
 
   437 jump *label191 always
   438 label *label180
   439 jump *label187 greaterThanEq :start_reactor:secs 30
-    * label *label181
   440 # "Function: def calc_charge_req(in reactor, in time)"
   441 op sub *tmp102 @tick :t_startup2
   442 op idiv :calc_charge_req:secs *tmp102 60
 
   448 set :calc_charge_req*retval 0
   449 jump *label184 always
   450 label *label182
-    * label *label183
   451 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   452 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   453 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   568 label *label209
   569 sensor *tmp201 reactor2 @enabled
   570 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label210
-    * label *label211
-    * label *label212
   571 set :fuel_2 :start_reactor:supply_fuel
   572 set :t_startup2 .RET_T_STARTUP
-    * label *label93
   573 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   574 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label94
-    * label *label95
   575 control config unloader3 *tmp97
   576 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label96
-    * label *label97
   577 control config unloader4 *tmp101
-    * label *label98
-    * label *label109
   578 # "Function: def check_radar(in unit)"
   579 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   580 jump *label110 equal :check_radar:enemy_found null
 
   602 label *label111
   603 label *label112
   604 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label213
   605 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   606 set .RET_T_STARTUP :t_startup3
   607 op sub *tmp113 @tick :t_startup3
 
   661 jump *label229 always
   662 label *label218
   663 jump *label225 greaterThanEq :start_reactor:secs 30
-    * label *label219
   664 # "Function: def calc_charge_req(in reactor, in time)"
   665 op sub *tmp102 @tick :t_startup3
   666 op idiv :calc_charge_req:secs *tmp102 60
 
   672 set :calc_charge_req*retval 0
   673 jump *label222 always
   674 label *label220
-    * label *label221
   675 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   676 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   677 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   792 label *label247
   793 sensor *tmp201 reactor3 @enabled
   794 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label248
-    * label *label249
-    * label *label250
   795 set :fuel_3 :start_reactor:supply_fuel
   796 set :t_startup3 .RET_T_STARTUP
   797 set :start_reactor:reactor reactor4
 
   812 set :t_startup5 .RET_T_STARTUP
   813 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   814 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label99
   815 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   816 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
-    * label *label100
-    * label *label101
   817 control config unloader5 *tmp97
   818 select *tmp101 equal :fuel_many false @blast-compound @scrap
-    * label *label102
-    * label *label103
   819 control config unloader6 *tmp101
-    * label *label104
   820 op or *tmp30 :fuel_1 :fuel_2
   821 op or *tmp31 *tmp30 :fuel_many
   822 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   873 label *label19
   874 label *label15
   875 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label13
   876 select *tmp51 notEqual *tmp32 false @pyratite @scrap
-    * label *label20
-    * label *label21
   877 control config unloader7 *tmp51
   878 # "Function: def diff_generators()"
   879 sensor *tmp53 node1 @powerNetStored
 
   892 control enabled generator1 true
   893 control enabled generator2 true
   894 label *label24
-    * label *label22
-    * label *label81
   895 # "Function: def kilo(in val)"
   896 op idiv *tmp93 .AVG_SURPLUS 100
   897 op div :surplus *tmp93 10
-    * label *label82
   898 sensor :kilo:val node1 @powerNetStored
-    * label *label83
   899 # "Function: def kilo(in val)"
   900 op idiv *tmp93 :kilo:val 100
   901 op div :kilo*retval *tmp93 10
-    * label *label84
   902 set :charge :kilo*retval
   903 jump *label25 lessThanEq .START_POWER_REQ 0
-    * label *label85
   904 # "Function: def kilo(in val)"
   905 op idiv *tmp93 .START_POWER_REQ 100
   906 op div :kilo*retval *tmp93 10
-    * label *label86
   907 print "Req "
   908 print :kilo*retval
   909 print "kJ / "
 
   932 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   933 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   934 label *label30
-    * label *label31
   935 label *label28
-    * label *label29
   936 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   937 op lessThan *tmp83 .AVG_SURPLUS 8000
   938 op land *tmp84 *tmp81 *tmp83
 
   943 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   944 op min .REACTORS_DESIRED 5 *tmp89
   945 label *label32
-    * label *label33
-    * label *label27
   946 label *label26
   947 jump *label34 equal .REACTORS_DESIRED 5
   948 print "Require only "
 
   950 print "/5 reactors."
   951 print "\n"
   952 label *label34
-    * label *label35
   953 printflush message1
-    * label *label8
   954 jump *label7 always
-    * label *label9
   955 end
   956 label *label3
   957 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
 
  1013 jump *label57 always
  1014 label *label56
  1015 jump *label58 greaterThanEq :start_reactor:secs 30
-    * label *label133
  1016 # "Function: def calc_charge_req(in reactor, in time)"
  1017 op sub *tmp102 @tick :start_reactor:t_startup
  1018 op idiv :calc_charge_req:secs *tmp102 60
 
  1024 set :calc_charge_req*retval 0
  1025 jump *label136 always
  1026 label *label134
-    * label *label135
  1027 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
  1028 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1029 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1144 label *label47
  1145 sensor *tmp201 :start_reactor:reactor @enabled
  1146 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label76
-    * label *label77
-    * label *label45
  1147 return :start_reactor*retaddr
  1148 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   215 control enabled reactor1 false
   216 print "STOP unwanted"
   217 print "\n"
-    * jump *label156 always
+  218 jump *label170 always
   219 label *label139
   220 op greaterThan *tmp136 1 1
   221 op mul *tmp137 15 1
 
   225 control enabled reactor1 false
   226 print "STOP system fuel low"
   227 print "\n"
-    * jump *label155 always
+  228 jump *label170 always
   229 label *label140
   230 jump *label141 greaterThan :start_reactor:fuel 1
   231 control enabled reactor1 false
   232 print "STOP fuel low"
   233 print "\n"
-    * jump *label154 always
+  234 jump *label170 always
   235 label *label141
   236 jump *label142 greaterThan :start_reactor:cryo 1
   237 control enabled reactor1 false
   238 print "STOP out of cryo"
   239 print "\n"
-    * jump *label153 always
+  240 jump *label170 always
   241 label *label142
   242 jump *label149 greaterThanEq :start_reactor:secs 30
   243 # "Function: def calc_charge_req(in reactor, in time)"
 
   266 print "START FAIL battery"
   267 print "\n"
   268 set :start_reactor:supply_fuel false
-    * jump *label148 always
+  269 jump *label170 always
   270 label *label147
   271 op sub :start_reactor:time_left 30 :start_reactor:secs
   272 print "Starting "
 
   277 print "J"
   278 print "\n"
   279 label *label148
-    * jump *label152 always
+  280 jump *label170 always
   281 label *label149
   282 op lessThan *tmp161 :start_reactor:charge 2000
   283 op lessThan *tmp162 :start_reactor:surplus -500
 
   287 print "ABANDON - battery crit"
   288 print "\n"
   289 set :start_reactor:supply_fuel false
-    * jump *label151 always
+  290 jump *label170 always
   291 label *label150
   292 op idiv :start_reactor:mins :start_reactor:secs 6
   293 op div :start_reactor:mins :start_reactor:mins 10
 
   340 jump *label160 lessThanEq *tmp191 10
   341 print "WAIT fuel"
   342 print "\n"
-    * jump *label161 always
+  343 jump *label167 always
   344 label *label160
   345 print "WAIT system fuel"
   346 print "\n"
 
   412 control enabled reactor2 false
   413 print "STOP unwanted"
   414 print "\n"
-    * jump *label194 always
+  415 jump *label208 always
   416 label *label177
   417 op greaterThan *tmp136 2 1
   418 op mul *tmp137 15 2
 
   422 control enabled reactor2 false
   423 print "STOP system fuel low"
   424 print "\n"
-    * jump *label193 always
+  425 jump *label208 always
   426 label *label178
   427 jump *label179 greaterThan :start_reactor:fuel 1
   428 control enabled reactor2 false
   429 print "STOP fuel low"
   430 print "\n"
-    * jump *label192 always
+  431 jump *label208 always
   432 label *label179
   433 jump *label180 greaterThan :start_reactor:cryo 1
   434 control enabled reactor2 false
   435 print "STOP out of cryo"
   436 print "\n"
-    * jump *label191 always
+  437 jump *label208 always
   438 label *label180
   439 jump *label187 greaterThanEq :start_reactor:secs 30
   440 # "Function: def calc_charge_req(in reactor, in time)"
 
   463 print "START FAIL battery"
   464 print "\n"
   465 set :start_reactor:supply_fuel false
-    * jump *label186 always
+  466 jump *label208 always
   467 label *label185
   468 op sub :start_reactor:time_left 30 :start_reactor:secs
   469 print "Starting "
 
   474 print "J"
   475 print "\n"
   476 label *label186
-    * jump *label190 always
+  477 jump *label208 always
   478 label *label187
   479 op lessThan *tmp161 :start_reactor:charge 2000
   480 op lessThan *tmp162 :start_reactor:surplus -500
 
   484 print "ABANDON - battery crit"
   485 print "\n"
   486 set :start_reactor:supply_fuel false
-    * jump *label189 always
+  487 jump *label208 always
   488 label *label188
   489 op idiv :start_reactor:mins :start_reactor:secs 6
   490 op div :start_reactor:mins :start_reactor:mins 10
 
   537 jump *label198 lessThanEq *tmp191 10
   538 print "WAIT fuel"
   539 print "\n"
-    * jump *label199 always
+  540 jump *label205 always
   541 label *label198
   542 print "WAIT system fuel"
   543 print "\n"
 
   636 control enabled reactor3 false
   637 print "STOP unwanted"
   638 print "\n"
-    * jump *label232 always
+  639 jump *label246 always
   640 label *label215
   641 op greaterThan *tmp136 3 1
   642 op mul *tmp137 15 3
 
   646 control enabled reactor3 false
   647 print "STOP system fuel low"
   648 print "\n"
-    * jump *label231 always
+  649 jump *label246 always
   650 label *label216
   651 jump *label217 greaterThan :start_reactor:fuel 1
   652 control enabled reactor3 false
   653 print "STOP fuel low"
   654 print "\n"
-    * jump *label230 always
+  655 jump *label246 always
   656 label *label217
   657 jump *label218 greaterThan :start_reactor:cryo 1
   658 control enabled reactor3 false
   659 print "STOP out of cryo"
   660 print "\n"
-    * jump *label229 always
+  661 jump *label246 always
   662 label *label218
   663 jump *label225 greaterThanEq :start_reactor:secs 30
   664 # "Function: def calc_charge_req(in reactor, in time)"
 
   687 print "START FAIL battery"
   688 print "\n"
   689 set :start_reactor:supply_fuel false
-    * jump *label224 always
+  690 jump *label246 always
   691 label *label223
   692 op sub :start_reactor:time_left 30 :start_reactor:secs
   693 print "Starting "
 
   698 print "J"
   699 print "\n"
   700 label *label224
-    * jump *label228 always
+  701 jump *label246 always
   702 label *label225
   703 op lessThan *tmp161 :start_reactor:charge 2000
   704 op lessThan *tmp162 :start_reactor:surplus -500
 
   708 print "ABANDON - battery crit"
   709 print "\n"
   710 set :start_reactor:supply_fuel false
-    * jump *label227 always
+  711 jump *label246 always
   712 label *label226
   713 op idiv :start_reactor:mins :start_reactor:secs 6
   714 op div :start_reactor:mins :start_reactor:mins 10
 
   761 jump *label236 lessThanEq *tmp191 10
   762 print "WAIT fuel"
   763 print "\n"
-    * jump *label237 always
+  764 jump *label243 always
   765 label *label236
   766 print "WAIT system fuel"
   767 print "\n"
 
   843 jump *label16 equal :emerg_shutdown false
   844 print " Enemies detected."
   845 print "\n"
-    * jump *label17 always
+  846 jump *label15 always
   847 label *label16
   848 print " Critical power."
   849 print "\n"
 
   988 control enabled :start_reactor:reactor false
   989 print "STOP unwanted"
   990 print "\n"
-    * jump *label51 always
+  991 jump *label49 always
   992 label *label50
   993 op greaterThan *tmp136 :start_reactor:reactor_num 1
   994 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   998 control enabled :start_reactor:reactor false
   999 print "STOP system fuel low"
  1000 print "\n"
-    * jump *label53 always
+ 1001 jump *label49 always
  1002 label *label52
  1003 jump *label54 greaterThan :start_reactor:fuel 1
  1004 control enabled :start_reactor:reactor false
  1005 print "STOP fuel low"
  1006 print "\n"
-    * jump *label55 always
+ 1007 jump *label49 always
  1008 label *label54
  1009 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
  1010 control enabled :start_reactor:reactor false
  1011 print "STOP out of cryo"
  1012 print "\n"
-    * jump *label57 always
+ 1013 jump *label49 always
  1014 label *label56
  1015 jump *label58 greaterThanEq :start_reactor:secs 30
  1016 # "Function: def calc_charge_req(in reactor, in time)"
 
  1039 print "START FAIL battery"
  1040 print "\n"
  1041 set :start_reactor*retval false
-    * jump *label61 always
+ 1042 jump *label49 always
  1043 label *label60
  1044 op sub :start_reactor:time_left 30 :start_reactor:secs
  1045 print "Starting "
 
  1050 print "J"
  1051 print "\n"
  1052 label *label61
-    * jump *label59 always
+ 1053 jump *label49 always
  1054 label *label58
  1055 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1056 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1060 print "ABANDON - battery crit"
  1061 print "\n"
  1062 set :start_reactor*retval false
-    * jump *label63 always
+ 1063 jump *label49 always
  1064 label *label62
  1065 op idiv :start_reactor:mins :start_reactor:secs 6
  1066 op div :start_reactor:mins :start_reactor:mins 10
 
  1113 jump *label70 lessThanEq *tmp191 .FUEL_REQ
  1114 print "WAIT fuel"
  1115 print "\n"
-    * jump *label71 always
+ 1116 jump *label69 always
  1117 label *label70
  1118 print "WAIT system fuel"
  1119 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    70 control enabled reactor5 false
    71 set :check_radar*retval true
    72 jump *label108 always
-    * jump *label107 always
    73 label *label106
    74 control enabled projector1 false
    75 control enabled projector2 false
 
   221 op lessThan *tmp138 :start_reactor:fuel_stored 15
   222 set *tmp139 false
   223 jump *label140 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label170 always
   224 label *label140
   225 jump *label141 greaterThan :start_reactor:fuel 1
   226 control enabled reactor1 false
 
   271 print :calc_charge_req*retval
   272 print "J"
   273 print "\n"
-    * label *label148
   274 jump *label170 always
   275 label *label149
   276 op lessThan *tmp161 :start_reactor:charge 2000
 
   290 print " "
   291 print "mins"
   292 print "\n"
-    * label *label151
-    * label *label152
-    * label *label153
-    * label *label154
-    * label *label155
-    * label *label156
   293 jump *label170 always
   294 label *label157
   295 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   332 label *label160
   333 print "WAIT system fuel"
   334 print "\n"
-    * label *label161
   335 jump *label167 always
   336 label *label162
   337 op mul *tmp194 45 1
 
   460 print :calc_charge_req*retval
   461 print "J"
   462 print "\n"
-    * label *label186
   463 jump *label208 always
   464 label *label187
   465 op lessThan *tmp161 :start_reactor:charge 2000
 
   479 print " "
   480 print "mins"
   481 print "\n"
-    * label *label189
-    * label *label190
-    * label *label191
-    * label *label192
-    * label *label193
-    * label *label194
   482 jump *label208 always
   483 label *label195
   484 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   521 label *label198
   522 print "WAIT system fuel"
   523 print "\n"
-    * label *label199
   524 jump *label205 always
   525 label *label200
   526 op mul *tmp194 45 2
 
   573 control enabled reactor5 false
   574 set :check_radar*retval true
   575 jump *label112 always
-    * jump *label111 always
   576 label *label110
   577 control enabled projector1 false
   578 control enabled projector2 false
 
   675 print :calc_charge_req*retval
   676 print "J"
   677 print "\n"
-    * label *label224
   678 jump *label246 always
   679 label *label225
   680 op lessThan *tmp161 :start_reactor:charge 2000
 
   694 print " "
   695 print "mins"
   696 print "\n"
-    * label *label227
-    * label *label228
-    * label *label229
-    * label *label230
-    * label *label231
-    * label *label232
   697 jump *label246 always
   698 label *label233
   699 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   736 label *label236
   737 print "WAIT system fuel"
   738 print "\n"
-    * label *label237
   739 jump *label243 always
   740 label *label238
   741 op mul *tmp194 45 3
 
   817 label *label16
   818 print " Critical power."
   819 print "\n"
-    * label *label17
   820 jump *label15 always
   821 label *label14
   822 jump *label18 notEqual *tmp31 false
 
   921 label *label34
   922 printflush message1
   923 jump *label7 always
-    * end
   924 label *label3
   925 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   926 set .RET_T_STARTUP :start_reactor:t_startup
 
  1017 print :calc_charge_req*retval
  1018 print "J"
  1019 print "\n"
-    * label *label61
  1020 jump *label49 always
  1021 label *label58
  1022 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
  1036 print " "
  1037 print "mins"
  1038 print "\n"
-    * label *label63
-    * label *label59
-    * label *label57
-    * label *label55
-    * label *label53
-    * label *label51
  1039 jump *label49 always
  1040 label *label48
  1041 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1078 label *label70
  1079 print "WAIT system fuel"
  1080 print "\n"
-    * label *label71
  1081 jump *label69 always
  1082 label *label68
  1083 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1105 sensor *tmp201 :start_reactor:reactor @enabled
  1106 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1107 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1 (-15 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
     6 set .FLOW_ABORT -500
     7 set .FUEL_REQ 10
     8 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
     9 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    10 set .CRYO_REQ 3
    11 set .CRYO_REQ_EA 2
    12 set .CRYO_ABORT 1
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    37 set .CONTAINER vault1
    38 set .NODE node1
    39 # "Function: def check_radar(in unit)"
 
    59 control enabled projector1 false
    60 control enabled projector2 false
    61 set :check_radar*retval false
-    * label *label107
    62 label *label108
    63 # "Function: def check_manual_shutdown()"
    64 op notEqual *tmp9 switch1 null
 
   561 control enabled projector1 false
   562 control enabled projector2 false
   563 set :check_radar*retval false
-    * label *label111
   564 label *label112
   565 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   566 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   204 op mul *tmp137 15 1
   205 op lessThan *tmp138 :start_reactor:fuel_stored 15
   206 set *tmp139 false
-    * jump *label140 always
   207 label *label140
   208 jump *label141 greaterThan :start_reactor:fuel 1
   209 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   204 op mul *tmp137 15 1
   205 op lessThan *tmp138 :start_reactor:fuel_stored 15
   206 set *tmp139 false
-    * label *label140
   207 jump *label141 greaterThan :start_reactor:fuel 1
   208 control enabled reactor1 false
   209 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    66 op equal *tmp11 *tmp10 false
    67 op land *tmp12 *tmp9 *tmp11
    68 jump *label11 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   69 print "User has disabled emergency switch\n"
    70 set *tmp8 true
    71 jump *label10 always
    72 label *label11
 
   181 op mul *tmp125 :start_reactor:surplus 0.2
   182 op add .AVG_SURPLUS *tmp124 *tmp125
   183 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  184 print "#1 - "
   185 jump *label138 equal :emerg_shutdown false
   186 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  187 print "emergency mode\n"
   188 set :start_reactor:supply_fuel false
   189 jump *label171 always
   190 label *label138
   191 jump *label157 equal :start_reactor:enabled false
   192 jump *label139 greaterThanEq .REACTORS_DESIRED 1
   193 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  194 print "STOP unwanted\n"
   195 jump *label170 always
   196 label *label139
   197 op greaterThan *tmp136 1 1
 
   200 set *tmp139 false
   201 jump *label141 greaterThan :start_reactor:fuel 1
   202 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  203 print "STOP fuel low\n"
   204 jump *label170 always
   205 label *label141
   206 jump *label142 greaterThan :start_reactor:cryo 1
   207 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  208 print "STOP out of cryo\n"
   209 jump *label170 always
   210 label *label142
   211 jump *label149 greaterThanEq :start_reactor:secs 30
 
   232 op land *tmp156 *tmp154 *tmp155
   233 jump *label147 equal *tmp156 false
   234 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  235 print "START FAIL battery\n"
   236 set :start_reactor:supply_fuel false
   237 jump *label170 always
   238 label *label147
   239 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  240 print "Starting {0} secs, req {0}J\n"
+  241 format :start_reactor:time_left
+  242 format :calc_charge_req*retval
   243 jump *label170 always
   244 label *label149
   245 op lessThan *tmp161 :start_reactor:charge 2000
 
   247 op land *tmp163 *tmp161 *tmp162
   248 jump *label150 equal *tmp163 false
   249 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  250 print "ABANDON - battery crit\n"
   251 set :start_reactor:supply_fuel false
   252 jump *label170 always
   253 label *label150
   254 op idiv :start_reactor:mins :start_reactor:secs 6
   255 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  256 print "RUN {0} mins\n"
+  257 format :start_reactor:mins
   258 jump *label170 always
   259 label *label157
   260 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   266 op mul *tmp175 2 1
   267 op add :start_reactor:cryo_req 3 2
   268 jump *label158 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  269 print "IDLE\n"
   270 set :start_reactor:supply_fuel false
   271 jump *label169 always
   272 label *label158
 
   276 op div :start_reactor:flow *tmp183 10
   277 op idiv *tmp186 :start_reactor:charge_units 0.001
   278 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  279 print "WAIT power. (%{0}J + %{0}W)\n"
+  280 format :start_reactor:charge
+  281 format :start_reactor:flow
   282 set :start_reactor:supply_fuel false
   283 jump *label168 always
   284 label *label159
 
   287 jump *label162 equal *tmp189 false
   288 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   289 jump *label160 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  290 print "WAIT fuel\n"
   291 jump *label167 always
   292 label *label160
-    * print "WAIT system fuel"
-    * print "\n"
+  293 print "WAIT system fuel\n"
   294 jump *label167 always
   295 label *label162
   296 op mul *tmp194 45 1
   297 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  298 print "WAIT buffer fuel\n"
   299 jump *label166 always
   300 label *label163
   301 jump *label164 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  302 print "WAIT cryo\n"
   303 jump *label165 always
   304 label *label164
-    * print "STARTUP"
-    * print "\n"
+  305 print "STARTUP\n"
   306 op add .START_POWER_REQ .START_POWER_REQ 23000
   307 control enabled reactor1 true
   308 label *label165
 
   339 op mul *tmp125 :start_reactor:surplus 0.2
   340 op add .AVG_SURPLUS *tmp124 *tmp125
   341 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  342 print "#2 - "
   343 jump *label176 equal :emerg_shutdown false
   344 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  345 print "emergency mode\n"
   346 set :start_reactor:supply_fuel false
   347 jump *label209 always
   348 label *label176
   349 jump *label195 equal :start_reactor:enabled false
   350 jump *label177 greaterThanEq .REACTORS_DESIRED 2
   351 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  352 print "STOP unwanted\n"
   353 jump *label208 always
   354 label *label177
   355 op greaterThan *tmp136 2 1
 
   358 set *tmp139 *tmp138
   359 jump *label178 equal *tmp138 false
   360 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  361 print "STOP system fuel low\n"
   362 jump *label208 always
   363 label *label178
   364 jump *label179 greaterThan :start_reactor:fuel 1
   365 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  366 print "STOP fuel low\n"
   367 jump *label208 always
   368 label *label179
   369 jump *label180 greaterThan :start_reactor:cryo 1
   370 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  371 print "STOP out of cryo\n"
   372 jump *label208 always
   373 label *label180
   374 jump *label187 greaterThanEq :start_reactor:secs 30
 
   395 op land *tmp156 *tmp154 *tmp155
   396 jump *label185 equal *tmp156 false
   397 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  398 print "START FAIL battery\n"
   399 set :start_reactor:supply_fuel false
   400 jump *label208 always
   401 label *label185
   402 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  403 print "Starting {0} secs, req {0}J\n"
+  404 format :start_reactor:time_left
+  405 format :calc_charge_req*retval
   406 jump *label208 always
   407 label *label187
   408 op lessThan *tmp161 :start_reactor:charge 2000
 
   410 op land *tmp163 *tmp161 *tmp162
   411 jump *label188 equal *tmp163 false
   412 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  413 print "ABANDON - battery crit\n"
   414 set :start_reactor:supply_fuel false
   415 jump *label208 always
   416 label *label188
   417 op idiv :start_reactor:mins :start_reactor:secs 6
   418 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  419 print "RUN {0} mins\n"
+  420 format :start_reactor:mins
   421 jump *label208 always
   422 label *label195
   423 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   429 op mul *tmp175 2 2
   430 op add :start_reactor:cryo_req 3 4
   431 jump *label196 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  432 print "IDLE\n"
   433 set :start_reactor:supply_fuel false
   434 jump *label207 always
   435 label *label196
 
   439 op div :start_reactor:flow *tmp183 10
   440 op idiv *tmp186 :start_reactor:charge_units 0.001
   441 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  442 print "WAIT power. (%{0}J + %{0}W)\n"
+  443 format :start_reactor:charge
+  444 format :start_reactor:flow
   445 set :start_reactor:supply_fuel false
   446 jump *label206 always
   447 label *label197
 
   450 jump *label200 equal *tmp189 false
   451 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   452 jump *label198 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  453 print "WAIT fuel\n"
   454 jump *label205 always
   455 label *label198
-    * print "WAIT system fuel"
-    * print "\n"
+  456 print "WAIT system fuel\n"
   457 jump *label205 always
   458 label *label200
   459 op mul *tmp194 45 2
   460 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  461 print "WAIT buffer fuel\n"
   462 jump *label204 always
   463 label *label201
   464 jump *label202 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  465 print "WAIT cryo\n"
   466 jump *label203 always
   467 label *label202
-    * print "STARTUP"
-    * print "\n"
+  468 print "STARTUP\n"
   469 op add .START_POWER_REQ .START_POWER_REQ 23000
   470 control enabled reactor2 true
   471 label *label203
 
   527 op mul *tmp125 :start_reactor:surplus 0.2
   528 op add .AVG_SURPLUS *tmp124 *tmp125
   529 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  530 print "#3 - "
   531 jump *label214 equal :emerg_shutdown false
   532 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  533 print "emergency mode\n"
   534 set :start_reactor:supply_fuel false
   535 jump *label247 always
   536 label *label214
   537 jump *label233 equal :start_reactor:enabled false
   538 jump *label215 greaterThanEq .REACTORS_DESIRED 3
   539 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  540 print "STOP unwanted\n"
   541 jump *label246 always
   542 label *label215
   543 op greaterThan *tmp136 3 1
 
   546 set *tmp139 *tmp138
   547 jump *label216 equal *tmp138 false
   548 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  549 print "STOP system fuel low\n"
   550 jump *label246 always
   551 label *label216
   552 jump *label217 greaterThan :start_reactor:fuel 1
   553 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  554 print "STOP fuel low\n"
   555 jump *label246 always
   556 label *label217
   557 jump *label218 greaterThan :start_reactor:cryo 1
   558 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  559 print "STOP out of cryo\n"
   560 jump *label246 always
   561 label *label218
   562 jump *label225 greaterThanEq :start_reactor:secs 30
 
   583 op land *tmp156 *tmp154 *tmp155
   584 jump *label223 equal *tmp156 false
   585 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  586 print "START FAIL battery\n"
   587 set :start_reactor:supply_fuel false
   588 jump *label246 always
   589 label *label223
   590 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  591 print "Starting {0} secs, req {0}J\n"
+  592 format :start_reactor:time_left
+  593 format :calc_charge_req*retval
   594 jump *label246 always
   595 label *label225
   596 op lessThan *tmp161 :start_reactor:charge 2000
 
   598 op land *tmp163 *tmp161 *tmp162
   599 jump *label226 equal *tmp163 false
   600 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  601 print "ABANDON - battery crit\n"
   602 set :start_reactor:supply_fuel false
   603 jump *label246 always
   604 label *label226
   605 op idiv :start_reactor:mins :start_reactor:secs 6
   606 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  607 print "RUN {0} mins\n"
+  608 format :start_reactor:mins
   609 jump *label246 always
   610 label *label233
   611 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   617 op mul *tmp175 2 3
   618 op add :start_reactor:cryo_req 3 6
   619 jump *label234 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  620 print "IDLE\n"
   621 set :start_reactor:supply_fuel false
   622 jump *label245 always
   623 label *label234
 
   627 op div :start_reactor:flow *tmp183 10
   628 op idiv *tmp186 :start_reactor:charge_units 0.001
   629 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  630 print "WAIT power. (%{0}J + %{0}W)\n"
+  631 format :start_reactor:charge
+  632 format :start_reactor:flow
   633 set :start_reactor:supply_fuel false
   634 jump *label244 always
   635 label *label235
 
   638 jump *label238 equal *tmp189 false
   639 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   640 jump *label236 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  641 print "WAIT fuel\n"
   642 jump *label243 always
   643 label *label236
-    * print "WAIT system fuel"
-    * print "\n"
+  644 print "WAIT system fuel\n"
   645 jump *label243 always
   646 label *label238
   647 op mul *tmp194 45 3
   648 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  649 print "WAIT buffer fuel\n"
   650 jump *label242 always
   651 label *label239
   652 jump *label240 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  653 print "WAIT cryo\n"
   654 jump *label241 always
   655 label *label240
-    * print "STARTUP"
-    * print "\n"
+  656 print "STARTUP\n"
   657 op add .START_POWER_REQ .START_POWER_REQ 23000
   658 control enabled reactor3 true
   659 label *label241
 
   706 op or *tmp43 *tmp42 :emerg_shutdown
   707 jump *label14 equal *tmp43 false
   708 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  709 print "Central Fuel at {0} / 0 - "
+  710 format :throttle_blast:fuel_stored
   711 jump *label16 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  712 print " Enemies detected.\n"
   713 jump *label15 always
   714 label *label16
-    * print " Critical power."
-    * print "\n"
+  715 print " Critical power.\n"
   716 jump *label15 always
   717 label *label14
   718 jump *label18 notEqual *tmp31 false
   719 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  720 print "Fuel {0} / 150 (due to emergency)\n"
+  721 format :throttle_blast:fuel_stored
   722 jump *label19 always
   723 label *label18
   724 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  725 print "Fuel {0} / 800\n"
+  726 format :throttle_blast:fuel_stored
   727 label *label19
   728 label *label15
   729 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   737 op lessThan *tmp57 .START_POWER_REQ 10
   738 op land *tmp58 *tmp56 *tmp57
   739 jump *label23 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  740 print "Differential now idle.\n"
   741 control enabled generator1 false
   742 control enabled generator2 false
   743 jump *label24 always
 
   757 # "Function: def kilo(in val)"
   758 op idiv *tmp93 .START_POWER_REQ 100
   759 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  760 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  761 format :kilo*retval
+  762 format :charge
+  763 format :surplus
   764 jump *label26 always
   765 label *label25
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  766 print "Power {0}kW, {0}kJ\n"
+  767 format :surplus
+  768 format :kilo*retval
   769 # "Function: def update_reactors_desired()"
   770 sensor *tmp71 node1 @powerNetStored
   771 sensor *tmp72 node1 @powerNetCapacity
 
   791 label *label32
   792 label *label26
   793 jump *label34 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  794 print "Require only {0}/5 reactors.\n"
+  795 format .REACTORS_DESIRED
   796 label *label34
   797 printflush message1
   798 jump *label7 always
 
   815 op mul *tmp125 :start_reactor:surplus 0.2
   816 op add .AVG_SURPLUS *tmp124 *tmp125
   817 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  818 print "#{0} - "
+  819 format :start_reactor:reactor_num
   820 jump *label46 equal :start_reactor:emerg_shutdown false
   821 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  822 print "emergency mode\n"
   823 set :start_reactor*retval false
   824 jump *label47 always
   825 label *label46
   826 jump *label48 equal :start_reactor:enabled false
   827 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   828 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  829 print "STOP unwanted\n"
   830 jump *label49 always
   831 label *label50
   832 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   835 op land *tmp139 *tmp136 *tmp138
   836 jump *label52 equal *tmp139 false
   837 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  838 print "STOP system fuel low\n"
   839 jump *label49 always
   840 label *label52
   841 jump *label54 greaterThan :start_reactor:fuel 1
   842 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  843 print "STOP fuel low\n"
   844 jump *label49 always
   845 label *label54
   846 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   847 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  848 print "STOP out of cryo\n"
   849 jump *label49 always
   850 label *label56
   851 jump *label58 greaterThanEq :start_reactor:secs 30
 
   872 op land *tmp156 *tmp154 *tmp155
   873 jump *label60 equal *tmp156 false
   874 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  875 print "START FAIL battery\n"
   876 set :start_reactor*retval false
   877 jump *label49 always
   878 label *label60
   879 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  880 print "Starting {0} secs, req {0}J\n"
+  881 format :start_reactor:time_left
+  882 format :calc_charge_req*retval
   883 jump *label49 always
   884 label *label58
   885 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   887 op land *tmp163 *tmp161 *tmp162
   888 jump *label62 equal *tmp163 false
   889 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  890 print "ABANDON - battery crit\n"
   891 set :start_reactor*retval false
   892 jump *label49 always
   893 label *label62
   894 op idiv :start_reactor:mins :start_reactor:secs 6
   895 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  896 print "RUN {0} mins\n"
+  897 format :start_reactor:mins
   898 jump *label49 always
   899 label *label48
   900 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   906 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   907 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   908 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  909 print "IDLE\n"
   910 set :start_reactor*retval false
   911 jump *label65 always
   912 label *label64
 
   916 op div :start_reactor:flow *tmp183 10
   917 op idiv *tmp186 :start_reactor:charge_units 0.001
   918 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  919 print "WAIT power. (%{0}J + %{0}W)\n"
+  920 format :start_reactor:charge
+  921 format :start_reactor:flow
   922 set :start_reactor*retval false
   923 jump *label67 always
   924 label *label66
 
   927 jump *label68 equal *tmp189 false
   928 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   929 jump *label70 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  930 print "WAIT fuel\n"
   931 jump *label69 always
   932 label *label70
-    * print "WAIT system fuel"
-    * print "\n"
+  933 print "WAIT system fuel\n"
   934 jump *label69 always
   935 label *label68
   936 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   937 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  938 print "WAIT buffer fuel\n"
   939 jump *label73 always
   940 label *label72
   941 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  942 print "WAIT cryo\n"
   943 jump *label75 always
   944 label *label74
-    * print "STARTUP"
-    * print "\n"
+  945 print "STARTUP\n"
   946 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   947 control enabled :start_reactor:reactor true
   948 label *label75

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .RET_T_STARTUP *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label106 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label108 always
label *label106
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label108
# "Function: def check_manual_shutdown()"
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label11 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
jump *label10 always
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label114 equal *tmp107 false
set .START_POWER_REQ 0
jump *label116 always
label *label114
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label116 always
label *label116
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label118 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label120 always
label *label118
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label120 always
label *label120
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label122 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label124 always
label *label122
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label124 always
label *label124
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label126 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label128 always
label *label126
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label128 always
label *label128
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label130 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label132 always
label *label130
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label132 always
label *label132
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label138 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label171 always
label *label138
jump *label157 equal :start_reactor:enabled false
jump *label139 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label170 always
label *label139
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label141 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label170 always
label *label141
jump *label142 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label170 always
label *label142
jump *label149 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label144 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label146 always
label *label144
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label146 always
label *label146
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label147 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label147
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label170 always
label *label149
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label150 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label150
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label170 always
label *label157
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label158 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label169 always
label *label158
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label159 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label168 always
label *label159
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label162 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label160 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label167 always
label *label160
print "WAIT system fuel\n"
jump *label167 always
label *label162
op mul *tmp194 45 1
jump *label163 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label166 always
label *label163
jump *label164 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label165 always
label *label164
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label165
label *label166
label *label167
label *label168
label *label169
label *label170
label *label171
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label176 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label209 always
label *label176
jump *label195 equal :start_reactor:enabled false
jump *label177 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label208 always
label *label177
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label178 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label208 always
label *label178
jump *label179 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label208 always
label *label179
jump *label180 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label208 always
label *label180
jump *label187 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label182 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label184 always
label *label182
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label184 always
label *label184
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label185 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label185
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label208 always
label *label187
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label188 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label188
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label208 always
label *label195
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label196 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label207 always
label *label196
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label197 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label206 always
label *label197
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label200 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label198 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label205 always
label *label198
print "WAIT system fuel\n"
jump *label205 always
label *label200
op mul *tmp194 45 2
jump *label201 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label204 always
label *label201
jump *label202 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label203 always
label *label202
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label203
label *label204
label *label205
label *label206
label *label207
label *label208
label *label209
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label110 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label112 always
label *label110
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label112
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label214 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label247 always
label *label214
jump *label233 equal :start_reactor:enabled false
jump *label215 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label246 always
label *label215
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label216 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label246 always
label *label216
jump *label217 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label246 always
label *label217
jump *label218 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label246 always
label *label218
jump *label225 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label220 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label222 always
label *label220
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label222 always
label *label222
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label223 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label223
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label246 always
label *label225
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label226 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label226
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label246 always
label *label233
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label234 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label245 always
label *label234
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label235 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label244 always
label *label235
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label238 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label236 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label243 always
label *label236
print "WAIT system fuel\n"
jump *label243 always
label *label238
op mul *tmp194 45 3
jump *label239 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label242 always
label *label239
jump *label240 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label241 always
label *label240
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label241
label *label242
label *label243
label *label244
label *label245
label *label246
label *label247
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or *tmp31 *tmp30 :fuel_many
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label14 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label16 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label15 always
label *label16
print " Critical power.\n"
jump *label15 always
label *label14
jump *label18 notEqual *tmp31 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label19 always
label *label18
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label19
label *label15
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
# "Function: def diff_generators()"
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label23 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label24 always
label *label23
control enabled generator1 true
control enabled generator2 true
label *label24
# "Function: def kilo(in val)"
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label25 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label26 always
label *label25
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label28 equal *tmp77 false
jump *label30 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label30
label *label28
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label32 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label32
label *label26
jump *label34 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label34
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :start_reactor:t_startup
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label46 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label47 always
label *label46
jump *label48 equal :start_reactor:enabled false
jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label49 always
label *label50
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label52 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label49 always
label *label52
jump *label54 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label49 always
label *label54
jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label49 always
label *label56
jump *label58 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label134 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label136 always
label *label134
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label136 always
label *label136
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label60 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label49 always
label *label60
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label49 always
label *label58
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label62 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label49 always
label *label62
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label49 always
label *label48
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label65 always
label *label64
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label66 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label67 always
label *label66
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label68 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label70 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label69 always
label *label70
print "WAIT system fuel\n"
jump *label69 always
label *label68
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label73 always
label *label72
jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label75 always
label *label74
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label75
label *label73
label *label69
label *label67
label *label65
label *label49
label *label47
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
