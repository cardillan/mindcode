   684 instructions before optimizations.
    63 instructions eliminated by Temp Variables Elimination (6 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     3 instructions eliminated by Jump Normalization (2 passes, 5 iterations).
    36 instructions eliminated by Jump Optimization (5 iterations).
    37 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (3 iterations).
    14 instructions eliminated by Select Optimization (4 iterations).
     2 instructions eliminated by If Expression Optimization (3 iterations).
    83 instructions eliminated by Data Flow Optimization (9 passes, 29 iterations).
   499 instructions added by Function Inlining (10 iterations).
    17 function calls inlined by Function Inlining.
     5 instructions eliminated by Jump Straightening (5 iterations).
    34 instructions updated by Jump Threading.
    11 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   735 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 544):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 548):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 557):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332 (+33 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 524):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 518):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935 (+139 instructions)
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 379):
  ! Inline function 'start_reactor' defined at line 140:1        size  +440, benefit      550.0, efficiency      1.250
  * Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 239):
  ! Inline function 'start_reactor' defined at line 140:1        size  +293, benefit      412.5, efficiency      1.408
  * Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 99):
  ! Inline function 'start_reactor' defined at line 140:1        size  +146, benefit      275.0, efficiency      1.884
  ! Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
  ! Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 2: speed optimization selection (cost limit 123):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Pass 3: speed optimization selection (cost limit 123):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    73 print "\n"
    74 set *tmp8 true
    75 jump *label10 always
-    * set *tmp12 null
    76 jump *label12 always
    77 label *label11
-    * set *tmp12 null
    78 label *label12
    79 set *tmp8 false
    80 jump *label10 always
 
   119 set :update_fuel:uld_in .ULD_IN_1
   120 set :update_fuel:uld_out .ULD_OUT_1
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp19 :update_fuel*retval
   122 set :start_reactor:reactor reactor2
   123 set :start_reactor:reactor_num 2
   124 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   132 set :update_fuel:uld_in .ULD_IN_2
   133 set :update_fuel:uld_out .ULD_OUT_2
   134 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp21 :update_fuel*retval
   135 set :check_radar:unit .TOWER
   136 call *label4 :check_radar*retaddr :check_radar*retval
   137 set *tmp22 :check_radar*retval
 
   181 set :update_fuel:uld_in .ULD_IN_MANY
   182 set :update_fuel:uld_out .ULD_OUT_MANY
   183 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp27 :update_fuel*retval
   184 jump *label22 notEqual :fuel_1 false
   185 label *label24
   186 jump *label22 notEqual :fuel_2 false
 
   235 print "\n"
   236 set *tmp40 null
   237 label *label32
-    * set *tmp39 *tmp40
   238 jump *label27 always
   239 label *label26
   240 op equal *tmp41 :throttle_blast:reactors_fueled false
 
   261 print "n"
   262 set *tmp42 null
   263 label *label34
-    * set *tmp39 *tmp42
   264 label *label27
   265 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
   266 set *tmp29 *tmp43
 
   299 control enabled generator2 true
   300 set *tmp53 true
   301 label *label39
-    * set *tmp47 *tmp53
   302 label *label37
   303 set :kilo:val .AVG_SURPLUS
   304 call *label0 :kilo*retaddr :kilo*retval
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp62 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   353 label *label49
   354 set *tmp73 null
   355 label *label50
-    * set *tmp71 *tmp73
   356 jump *label46 always
   357 label *label45
-    * set *tmp71 null
   358 label *label46
   359 op lessThan *tmp74 :update_reactors_desired:stored 0.8
   360 jump *label51 equal *tmp74 false
 
   378 label *label52
   379 set *tmp64 *tmp77
   380 label *label44
-    * set *tmp62 *tmp64
   381 label *label43
   382 op notEqual *tmp83 .REACTORS_DESIRED 5
   383 jump *label55 equal *tmp83 false
 
   385 print .REACTORS_DESIRED
   386 print "/5 reactors."
   387 print "\n"
-    * set *tmp84 null
   388 jump *label56 always
   389 label *label55
-    * set *tmp84 null
   390 label *label56
   391 printflush message1
   392 label *label8
 
   441 label *label66
   442 set :calc_charge_req*retval 0
   443 jump *label63 always
-    * set *tmp99 null
   444 jump *label65 always
   445 label *label64
-    * set *tmp99 null
   446 label *label65
   447 op sub *tmp100 30 :calc_charge_req:secs
   448 set :calc_charge_req:time_left *tmp100
 
   493 print "emergency mode"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp119 :start_reactor:supply_fuel
   496 jump *label70 always
   497 label *label69
   498 jump *label71 equal :start_reactor:enabled false
 
   706 label *label94
   707 set *tmp122 *tmp166
   708 label *label72
-    * set *tmp119 *tmp122
   709 label *label70
   710 sensor *tmp188 :start_reactor:reactor @enabled
   711 op notEqual *tmp189 :start_reactor:enabled *tmp188
   712 jump *label107 equal *tmp189 false
   713 set *tmp191 @tick
   714 set .RET_T_STARTUP *tmp191
-    * set *tmp190 .RET_T_STARTUP
   715 jump *label108 always
   716 label *label107
-    * set *tmp190 null
   717 label *label108
   718 set :start_reactor*retval :start_reactor:supply_fuel
   719 jump *label68 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   228 jump *label31 equal :throttle_blast:emerg_shutdown false
   229 print " Enemies detected."
   230 print "\n"
-    * set *tmp40 null
   231 jump *label32 always
   232 label *label31
   233 print " Critical power."
   234 print "\n"
-    * set *tmp40 null
   235 label *label32
   236 jump *label27 always
   237 label *label26
 
   246 print " "
   247 print "(due to emergency)"
   248 print "\n"
-    * set *tmp42 null
   249 jump *label34 always
   250 label *label33
   251 set :throttle_blast:limit .FUEL_LIMIT
 
   256 print :throttle_blast:limit
   257 print "\"
   258 print "n"
-    * set *tmp42 null
   259 label *label34
   260 label *label27
   261 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
 
   288 print "\n"
   289 control enabled generator1 false
   290 control enabled generator2 false
-    * set *tmp53 false
   291 jump *label39 always
   292 label *label38
   293 control enabled generator1 true
   294 control enabled generator2 true
-    * set *tmp53 true
   295 label *label39
   296 label *label37
   297 set :kilo:val .AVG_SURPLUS
 
   342 jump *label49 equal *tmp72 false
   343 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   344 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp73 .AVG_SURPLUS
   345 jump *label50 always
   346 label *label49
-    * set *tmp73 null
   347 label *label50
   348 jump *label46 always
   349 label *label45
 
   368 label *label51
   369 set *tmp77 null
   370 label *label52
-    * set *tmp64 *tmp77
   371 label *label44
   372 label *label43
   373 op notEqual *tmp83 .REACTORS_DESIRED 5
 
   413 set *tmp93 .FUEL_OFF
   414 label *label62
   415 control config *tmp90 *tmp93
-    * set :update_fuel*retval *tmp93
   416 label *label58
   417 return :update_fuel*retaddr
   418 end
 
   600 label *label76
   601 set *tmp124 *tmp130
   602 label *label74
-    * set *tmp122 *tmp124
   603 jump *label72 always
   604 label *label71
   605 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   693 label *label96
   694 set *tmp166 *tmp169
   695 label *label94
-    * set *tmp122 *tmp166
   696 label *label72
   697 label *label70
   698 sensor *tmp188 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   363 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   364 op min *tmp82 5 *tmp81
   365 set .REACTORS_DESIRED *tmp82
-    * set *tmp77 .REACTORS_DESIRED
   366 jump *label52 always
   367 label *label51
-    * set *tmp77 null
   368 label *label52
   369 label *label44
   370 label *label43
 
   490 control enabled *tmp125 false
   491 print "STOP unwanted"
   492 print "\n"
-    * set *tmp124 null
   493 jump *label74 always
   494 label *label73
   495 op greaterThan *tmp127 :start_reactor:reactor_num 1
 
   595 label *label80
   596 set *tmp130 *tmp134
   597 label *label76
-    * set *tmp124 *tmp130
   598 label *label74
   599 jump *label72 always
   600 label *label71
 
   614 print "IDLE"
   615 print "\n"
   616 set :start_reactor:supply_fuel false
-    * set *tmp166 :start_reactor:supply_fuel
   617 jump *label94 always
   618 label *label93
   619 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
 
   686 label *label98
   687 set *tmp169 *tmp177
   688 label *label96
-    * set *tmp166 *tmp169
   689 label *label94
   690 label *label72
   691 label *label70

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   504 control enabled *tmp131 false
   505 print "STOP system fuel low"
   506 print "\n"
-    * set *tmp130 null
   507 jump *label76 always
   508 label *label75
   509 op lessThanEq *tmp133 :start_reactor:fuel 1
 
   592 label *label82
   593 set *tmp134 *tmp138
   594 label *label80
-    * set *tmp130 *tmp134
   595 label *label76
   596 label *label74
   597 jump *label72 always
 
   632 print "W)"
   633 print "\n"
   634 set :start_reactor:supply_fuel false
-    * set *tmp169 :start_reactor:supply_fuel
   635 jump *label96 always
   636 label *label95
   637 jump *label97 equal :start_reactor:fuel_on false
 
   681 label *label104
   682 set *tmp177 *tmp183
   683 label *label98
-    * set *tmp169 *tmp177
   684 label *label96
   685 label *label94
   686 label *label72

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   512 control enabled *tmp135 false
   513 print "STOP fuel low"
   514 print "\n"
-    * set *tmp134 null
   515 jump *label80 always
   516 label *label79
   517 op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
 
   589 label *label84
   590 set *tmp138 *tmp142
   591 label *label82
-    * set *tmp134 *tmp138
   592 label *label80
   593 label *label76
   594 label *label74
 
   650 print "\n"
   651 set *tmp180 null
   652 label *label102
-    * set *tmp177 *tmp180
   653 jump *label98 always
   654 label *label97
   655 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   676 label *label106
   677 set *tmp183 *tmp185
   678 label *label104
-    * set *tmp177 *tmp183
   679 label *label98
   680 label *label96
   681 label *label94

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   520 control enabled *tmp139 false
   521 print "STOP out of cryo"
   522 print "\n"
-    * set *tmp138 null
   523 jump *label82 always
   524 label *label81
   525 op lessThan *tmp141 :start_reactor:secs 30
 
   586 label *label90
   587 set *tmp142 *tmp152
   588 label *label84
-    * set *tmp138 *tmp142
   589 label *label82
   590 label *label80
   591 label *label76
 
   641 jump *label101 equal *tmp179 false
   642 print "WAIT fuel"
   643 print "\n"
-    * set *tmp180 null
   644 jump *label102 always
   645 label *label101
   646 print "WAIT system fuel"
   647 print "\n"
-    * set *tmp180 null
   648 label *label102
   649 jump *label98 always
   650 label *label97
 
   653 jump *label103 equal *tmp182 false
   654 print "WAIT buffer fuel"
   655 print "\n"
-    * set *tmp183 null
   656 jump *label104 always
   657 label *label103
   658 op lessThan *tmp184 :start_reactor:cryo :start_reactor:cryo_req
 
   669 control enabled *tmp186 true
   670 set *tmp185 true
   671 label *label106
-    * set *tmp183 *tmp185
   672 label *label104
   673 label *label98
   674 label *label96

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   555 print "\n"
   556 set *tmp146 null
   557 label *label86
-    * set *tmp142 *tmp146
   558 jump *label84 always
   559 label *label83
   560 op lessThan *tmp150 :start_reactor:charge .PWR_ABANDON
 
   583 print "\n"
   584 set *tmp152 null
   585 label *label90
-    * set *tmp142 *tmp152
   586 label *label84
   587 label *label82
   588 label *label80
 
   657 jump *label105 equal *tmp184 false
   658 print "WAIT cryo"
   659 print "\n"
-    * set *tmp185 null
   660 jump *label106 always
   661 label *label105
   662 print "STARTUP"
 
   664 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   665 set *tmp186 :start_reactor:reactor
   666 control enabled *tmp186 true
-    * set *tmp185 true
   667 label *label106
   668 label *label104
   669 label *label98

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   541 print "START FAIL battery"
   542 print "\n"
   543 set :start_reactor:supply_fuel false
-    * set *tmp146 :start_reactor:supply_fuel
   544 jump *label86 always
   545 label *label85
   546 op sub *tmp149 30 :start_reactor:secs
 
   552 print :start_reactor:charge_req
   553 print "J"
   554 print "\n"
-    * set *tmp146 null
   555 label *label86
   556 jump *label84 always
   557 label *label83
 
   567 print "ABANDON - battery crit"
   568 print "\n"
   569 set :start_reactor:supply_fuel false
-    * set *tmp152 :start_reactor:supply_fuel
   570 jump *label90 always
   571 label *label89
   572 op idiv *tmp155 :start_reactor:secs 6
 
   578 print " "
   579 print "mins"
   580 print "\n"
-    * set *tmp152 null
   581 label *label90
   582 label *label84
   583 label *label82

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-63 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 jump *label11 equal *tmp9 false
 
    81 set :calc_charge_req:reactor reactor1
    82 set :calc_charge_req:time :t_startup1
    83 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp13 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp13
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp14
+   88 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    89 set :calc_charge_req:reactor reactor3
    90 set :calc_charge_req:time :t_startup3
    91 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   92 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    93 set :calc_charge_req:reactor reactor4
    94 set :calc_charge_req:time :t_startup4
    95 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor5
    98 set :calc_charge_req:time :t_startup5
    99 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  100 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   101 set :start_reactor:reactor reactor1
   102 set :start_reactor:reactor_num 1
   103 set :start_reactor:emerg_shutdown :emerg_shutdown
   104 set :start_reactor:fuel_on :fuel_1
   105 set :start_reactor:t_startup :t_startup1
   106 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp18 :start_reactor*retval
-    * set :fuel_1 *tmp18
+  107 set :fuel_1 :start_reactor*retval
   108 set :t_startup1 .RET_T_STARTUP
   109 set :update_fuel:fuel :fuel_1
   110 set :update_fuel:uld_in .ULD_IN_1
 
   116 set :start_reactor:fuel_on :fuel_2
   117 set :start_reactor:t_startup :t_startup2
   118 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp20 :start_reactor*retval
-    * set :fuel_2 *tmp20
+  119 set :fuel_2 :start_reactor*retval
   120 set :t_startup2 .RET_T_STARTUP
   121 set :update_fuel:fuel :fuel_2
   122 set :update_fuel:uld_in .ULD_IN_2
 
   124 call *label1 :update_fuel*retaddr :update_fuel*retval
   125 set :check_radar:unit .TOWER
   126 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp22 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp22
+  127 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   128 set :start_reactor:reactor reactor3
   129 set :start_reactor:reactor_num 3
   130 set :start_reactor:emerg_shutdown :emerg_shutdown
   131 set :start_reactor:fuel_on :fuel_3
   132 set :start_reactor:t_startup :t_startup3
   133 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp23 :start_reactor*retval
-    * set :fuel_3 *tmp23
+  134 set :fuel_3 :start_reactor*retval
   135 set :t_startup3 .RET_T_STARTUP
   136 set :start_reactor:reactor reactor4
   137 set :start_reactor:reactor_num 4
 
   139 set :start_reactor:fuel_on :fuel_4
   140 set :start_reactor:t_startup :t_startup4
   141 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_4 *tmp24
+  142 set :fuel_4 :start_reactor*retval
   143 set :t_startup4 .RET_T_STARTUP
   144 set :start_reactor:reactor reactor5
   145 set :start_reactor:reactor_num 5
 
   147 set :start_reactor:fuel_on :fuel_5
   148 set :start_reactor:t_startup :t_startup5
   149 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_5 *tmp25
+  150 set :fuel_5 :start_reactor*retval
   151 set :t_startup5 .RET_T_STARTUP
   152 jump *label17 notEqual :fuel_3 false
   153 label *label19
 
   184 set :throttle_blast:reactors_fueled *tmp28
   185 set :throttle_blast:emerg_shutdown :emerg_shutdown
   186 sensor *tmp30 .NODE @powerNetStored
-    * op floor *tmp31 *tmp30
-    * set :throttle_blast:charge *tmp31
+  187 op floor :throttle_blast:charge *tmp30
   188 sensor *tmp32 .NODE @powerNetIn
   189 sensor *tmp33 .NODE @powerNetOut
   190 op sub *tmp34 *tmp32 *tmp33
-    * op floor *tmp35 *tmp34
-    * set :throttle_blast:surplus *tmp35
-    * sensor *tmp36 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp36
+  191 op floor :throttle_blast:surplus *tmp34
+  192 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   193 op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
   194 jump *label29 equal *tmp37 false
   195 label *label30
 
   241 print "n"
   242 label *label34
   243 label *label27
-    * op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp29 *tmp43
+  244 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   245 jump *label25 always
   246 set *tmp29 null
   247 label *label25
 
   257 # "Function: def diff_generators()"
   258 sensor *tmp48 .NODE @powerNetStored
   259 sensor *tmp49 .NODE @powerNetCapacity
-    * op div *tmp50 *tmp48 *tmp49
-    * set :diff_generators:stored_pc *tmp50
+  260 op div :diff_generators:stored_pc *tmp48 *tmp49
   261 op greaterThan *tmp51 :diff_generators:stored_pc 0.9
   262 jump *label38 equal *tmp51 false
   263 label *label41
 
   277 label *label37
   278 set :kilo:val .AVG_SURPLUS
   279 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp58 :kilo*retval
-    * set :surplus *tmp58
-    * sensor *tmp59 .NODE @powerNetStored
-    * set :kilo:val *tmp59
+  280 set :surplus :kilo*retval
+  281 sensor :kilo:val .NODE @powerNetStored
   282 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp60 :kilo*retval
-    * set :charge *tmp60
+  283 set :charge :kilo*retval
   284 op greaterThan *tmp61 .START_POWER_REQ 0
   285 jump *label42 equal *tmp61 false
   286 set :kilo:val .START_POWER_REQ
   287 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp63 :kilo*retval
-    * set :req *tmp63
+  288 set :req :kilo*retval
   289 print "Req "
   290 print :req
   291 print "kJ / "
 
   305 # "Function: def update_reactors_desired()"
   306 sensor *tmp65 .NODE @powerNetStored
   307 sensor *tmp66 .NODE @powerNetCapacity
-    * op div *tmp67 *tmp65 *tmp66
-    * set :update_reactors_desired:stored *tmp67
+  308 op div :update_reactors_desired:stored *tmp65 *tmp66
   309 op greaterThan *tmp68 :update_reactors_desired:stored 0.98
   310 jump *label45 equal *tmp68 false
   311 label *label48
 
   334 label *label53
   335 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
   336 op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
-    * op max *tmp80 1 *tmp79
-    * set :update_reactors_desired:needed *tmp80
+  337 op max :update_reactors_desired:needed 1 *tmp79
   338 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp82 5 *tmp81
-    * set .REACTORS_DESIRED *tmp82
+  339 op min .REACTORS_DESIRED 5 *tmp81
   340 jump *label52 always
   341 label *label51
   342 label *label52
 
   359 label *label0
   360 # "Function: def kilo(in val)"
   361 op idiv *tmp85 :kilo:val 100
-    * op div *tmp86 *tmp85 10
-    * set :kilo*retval *tmp86
+  362 op div :kilo*retval *tmp85 10
   363 jump *label57 always
   364 set :kilo*retval null
   365 label *label57
 
   390 label *label2
   391 # "Function: def calc_charge_req(in reactor, in time)"
   392 op sub *tmp94 @tick :calc_charge_req:time
-    * op idiv *tmp95 *tmp94 60
-    * set :calc_charge_req:secs *tmp95
+  393 op idiv :calc_charge_req:secs *tmp94 60
   394 op greaterThan *tmp96 :calc_charge_req:secs 30
   395 jump *label66 notEqual *tmp96 false
   396 label *label67
 
   404 jump *label65 always
   405 label *label64
   406 label *label65
-    * op sub *tmp100 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp100
+  407 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   408 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   409 op mul *tmp102 *tmp101 25
-    * op floor *tmp103 *tmp102
-    * set :calc_charge_req:charge_req *tmp103
+  410 op floor :calc_charge_req:charge_req *tmp102
   411 set :calc_charge_req*retval :calc_charge_req:charge_req
   412 jump *label63 always
   413 set :calc_charge_req*retval null
 
   418 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   419 set .RET_T_STARTUP :start_reactor:t_startup
   420 op sub *tmp104 @tick :start_reactor:t_startup
-    * op idiv *tmp105 *tmp104 60
-    * set :start_reactor:secs *tmp105
-    * sensor *tmp106 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp106
+  421 op idiv :start_reactor:secs *tmp104 60
+  422 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   423 set :start_reactor:supply_fuel true
-    * sensor *tmp107 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp107
-    * sensor *tmp108 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp108
+  424 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  425 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   426 sensor *tmp109 .NODE @powerNetStored
-    * op floor *tmp110 *tmp109
-    * set :start_reactor:charge *tmp110
+  427 op floor :start_reactor:charge *tmp109
   428 sensor *tmp111 .NODE @powerNetIn
   429 sensor *tmp112 .NODE @powerNetOut
   430 op sub *tmp113 *tmp111 *tmp112
-    * op floor *tmp114 *tmp113
-    * set :start_reactor:surplus *tmp114
+  431 op floor :start_reactor:surplus *tmp113
   432 op mul *tmp115 .AVG_SURPLUS 0.8
   433 op mul *tmp116 :start_reactor:surplus 0.2
-    * op add *tmp117 *tmp115 *tmp116
-    * set .AVG_SURPLUS *tmp117
-    * sensor *tmp118 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp118
+  434 op add .AVG_SURPLUS *tmp115 *tmp116
+  435 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   436 print "#"
   437 print :start_reactor:reactor_num
   438 print " "
   439 print "- "
   440 jump *label69 equal :start_reactor:emerg_shutdown false
-    * set *tmp120 :start_reactor:reactor
-    * control enabled *tmp120 false
+  441 control enabled :start_reactor:reactor false
   442 print "emergency mode"
   443 print "\n"
   444 set :start_reactor:supply_fuel false
 
   447 jump *label71 equal :start_reactor:enabled false
   448 op lessThan *tmp123 .REACTORS_DESIRED :start_reactor:reactor_num
   449 jump *label73 equal *tmp123 false
-    * set *tmp125 :start_reactor:reactor
-    * control enabled *tmp125 false
+  450 control enabled :start_reactor:reactor false
   451 print "STOP unwanted"
   452 print "\n"
   453 jump *label74 always
 
   460 jump *label75 equal *tmp129 false
   461 jump *label77 always
   462 label *label77
-    * set *tmp131 :start_reactor:reactor
-    * control enabled *tmp131 false
+  463 control enabled :start_reactor:reactor false
   464 print "STOP system fuel low"
   465 print "\n"
   466 jump *label76 always
   467 label *label75
   468 op lessThanEq *tmp133 :start_reactor:fuel 1
   469 jump *label79 equal *tmp133 false
-    * set *tmp135 :start_reactor:reactor
-    * control enabled *tmp135 false
+  470 control enabled :start_reactor:reactor false
   471 print "STOP fuel low"
   472 print "\n"
   473 jump *label80 always
   474 label *label79
   475 op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
   476 jump *label81 equal *tmp137 false
-    * set *tmp139 :start_reactor:reactor
-    * control enabled *tmp139 false
+  477 control enabled :start_reactor:reactor false
   478 print "STOP out of cryo"
   479 print "\n"
   480 jump *label82 always
 
   493 jump *label85 equal *tmp145 false
   494 jump *label87 always
   495 label *label87
-    * set *tmp147 :start_reactor:reactor
-    * control enabled *tmp147 false
+  496 control enabled :start_reactor:reactor false
   497 print "START FAIL battery"
   498 print "\n"
   499 set :start_reactor:supply_fuel false
   500 jump *label86 always
   501 label *label85
-    * op sub *tmp149 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp149
+  502 op sub :start_reactor:time_left 30 :start_reactor:secs
   503 print "Starting "
   504 print :start_reactor:time_left
   505 print " "
 
   517 jump *label89 equal *tmp151 false
   518 jump *label91 always
   519 label *label91
-    * set *tmp153 :start_reactor:reactor
-    * control enabled *tmp153 false
+  520 control enabled :start_reactor:reactor false
   521 print "ABANDON - battery crit"
   522 print "\n"
   523 set :start_reactor:supply_fuel false
   524 jump *label90 always
   525 label *label89
-    * op idiv *tmp155 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp155
-    * op div *tmp156 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp156
+  526 op idiv :start_reactor:mins :start_reactor:secs 6
+  527 op div :start_reactor:mins :start_reactor:mins 10
   528 print "RUN "
   529 print :start_reactor:mins
   530 print " "
 
   541 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   542 op sub *tmp158 *tmp157 .PWR_ABORT
   543 op div *tmp159 *tmp158 .PWR_REQ
-    * op mul *tmp160 *tmp159 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp160
+  544 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
   545 op div *tmp161 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp162 -0.1 *tmp161
-    * set :start_reactor:flow_units *tmp162
+  546 op max :start_reactor:flow_units -0.1 *tmp161
   547 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp164 .CRYO_REQ *tmp163
-    * set :start_reactor:cryo_req *tmp164
+  548 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
   549 op lessThan *tmp165 .REACTORS_DESIRED :start_reactor:reactor_num
   550 jump *label93 equal *tmp165 false
   551 print "IDLE"
 
   558 jump *label95 equal *tmp168 false
   559 op mul *tmp170 :start_reactor:flow_units 1000
   560 op floor *tmp171 *tmp170
-    * op div *tmp172 *tmp171 10
-    * set :start_reactor:flow *tmp172
+  561 op div :start_reactor:flow *tmp171 10
   562 op mul *tmp173 :start_reactor:charge_units 1000
   563 op floor *tmp174 *tmp173
-    * op div *tmp175 *tmp174 10
-    * set :start_reactor:charge *tmp175
+  564 op div :start_reactor:charge *tmp174 10
   565 print "WAIT power. (%"
   566 print :start_reactor:charge
   567 print "J + %"
 
   605 print "STARTUP"
   606 print "\n"
   607 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp186 :start_reactor:reactor
-    * control enabled *tmp186 true
+  608 control enabled :start_reactor:reactor true
   609 label *label106
   610 label *label104
   611 label *label98
 
   616 sensor *tmp188 :start_reactor:reactor @enabled
   617 op notEqual *tmp189 :start_reactor:enabled *tmp188
   618 jump *label107 equal *tmp189 false
-    * set *tmp191 @tick
-    * set .RET_T_STARTUP *tmp191
+  619 set .RET_T_STARTUP @tick
   620 jump *label108 always
   621 label *label107
   622 label *label108
 
   628 end
   629 label *label4
   630 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp192
-    * set :check_radar:enemy_found *tmp192
+  631 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   632 op notEqual *tmp193 :check_radar:enemy_found null
   633 jump *label110 equal *tmp193 false
   634 control enabled projector1 true
   635 control enabled projector2 true
-    * set *tmp197 .ULD_IN_1
-    * control config *tmp197 .FUEL_OFF
-    * set *tmp199 .ULD_OUT_1
-    * control config *tmp199 .FUEL
-    * set *tmp201 .ULD_IN_2
-    * control config *tmp201 .FUEL_OFF
-    * set *tmp203 .ULD_OUT_2
-    * control config *tmp203 .FUEL
-    * set *tmp205 .ULD_IN_MANY
-    * control config *tmp205 .FUEL_OFF
-    * set *tmp207 .ULD_OUT_MANY
-    * control config *tmp207 .FUEL
-    * set *tmp209 .ULD_MIXER
-    * control config *tmp209 .FUEL_OFF
+  636 control config .ULD_IN_1 .FUEL_OFF
+  637 control config .ULD_OUT_1 .FUEL
+  638 control config .ULD_IN_2 .FUEL_OFF
+  639 control config .ULD_OUT_2 .FUEL
+  640 control config .ULD_IN_MANY .FUEL_OFF
+  641 control config .ULD_OUT_MANY .FUEL
+  642 control config .ULD_MIXER .FUEL_OFF
   643 control enabled reactor1 false
   644 control enabled reactor2 false
   645 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-5 instructions):
 
   153 jump *label17 notEqual :fuel_4 false
   154 jump *label18 always
   155 label *label18
-    * jump *label17 notEqual :fuel_5 false
-    * jump *label15 always
+  156 jump *label15 equal :fuel_5 false
   157 label *label17
   158 set *tmp26 true
   159 jump *label16 always
 
   170 jump *label22 notEqual :fuel_2 false
   171 jump *label23 always
   172 label *label23
-    * jump *label22 notEqual :fuel_many false
-    * jump *label20 always
+  173 jump *label20 equal :fuel_many false
   174 label *label22
   175 set *tmp28 true
   176 jump *label21 always
 
   191 jump *label29 equal *tmp37 false
   192 label *label30
   193 op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label29 equal *tmp38 false
-    * jump *label28 always
+  194 jump *label28 notEqual *tmp38 false
   195 label *label29
-    * jump *label28 notEqual :throttle_blast:emerg_shutdown false
-    * jump *label26 always
+  196 jump *label26 equal :throttle_blast:emerg_shutdown false
   197 label *label28
   198 set :throttle_blast:limit 0
   199 print "Central Fuel at "
 
   391 label *label67
   392 sensor *tmp97 :calc_charge_req:reactor @enabled
   393 op equal *tmp98 *tmp97 false
-    * jump *label66 notEqual *tmp98 false
-    * jump *label64 always
+  394 jump *label64 equal *tmp98 false
   395 label *label66
   396 set :calc_charge_req*retval 0
   397 jump *label63 always

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-36 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
-    * op notEqual *tmp9 switch1 null
-    * jump *label11 equal *tmp9 false
+   59 jump *label11 equal switch1 null
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
-    * op equal *tmp11 *tmp10 false
-    * jump *label11 equal *tmp11 false
+   62 jump *label11 notEqual *tmp10 false
    63 jump *label13 always
    64 label *label13
    65 print "User has disabled emergency switch"
 
   184 op sub *tmp34 *tmp32 *tmp33
   185 op floor :throttle_blast:surplus *tmp34
   186 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
-    * jump *label29 equal *tmp37 false
+  187 jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
   188 label *label30
-    * op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label28 notEqual *tmp38 false
+  189 jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
   190 label *label29
   191 jump *label26 equal :throttle_blast:emerg_shutdown false
   192 label *label28
 
   208 label *label32
   209 jump *label27 always
   210 label *label26
-    * op equal *tmp41 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp41 false
+  211 jump *label33 notEqual :throttle_blast:reactors_fueled false
   212 set :throttle_blast:limit .FUEL_LIMIT_LOW
   213 print "Fuel "
   214 print :throttle_blast:fuel_stored
 
   247 sensor *tmp48 .NODE @powerNetStored
   248 sensor *tmp49 .NODE @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp48 *tmp49
-    * op greaterThan *tmp51 :diff_generators:stored_pc 0.9
-    * jump *label38 equal *tmp51 false
+  250 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   251 label *label41
-    * op lessThan *tmp52 .START_POWER_REQ 10
-    * jump *label38 equal *tmp52 false
+  252 jump *label38 greaterThanEq .START_POWER_REQ 10
   253 jump *label40 always
   254 label *label40
   255 print "Differential now idle."
 
   268 sensor :kilo:val .NODE @powerNetStored
   269 call *label0 :kilo*retaddr :kilo*retval
   270 set :charge :kilo*retval
-    * op greaterThan *tmp61 .START_POWER_REQ 0
-    * jump *label42 equal *tmp61 false
+  271 jump *label42 lessThanEq .START_POWER_REQ 0
   272 set :kilo:val .START_POWER_REQ
   273 call *label0 :kilo*retaddr :kilo*retval
   274 set :req :kilo*retval
 
   292 sensor *tmp65 .NODE @powerNetStored
   293 sensor *tmp66 .NODE @powerNetCapacity
   294 op div :update_reactors_desired:stored *tmp65 *tmp66
-    * op greaterThan *tmp68 :update_reactors_desired:stored 0.98
-    * jump *label45 equal *tmp68 false
+  295 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   296 label *label48
   297 op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp70 .AVG_SURPLUS *tmp69
-    * jump *label45 equal *tmp70 false
+  298 jump *label45 lessThanEq .AVG_SURPLUS *tmp69
   299 jump *label47 always
   300 label *label47
-    * op greaterThan *tmp72 .REACTORS_DESIRED 2
-    * jump *label49 equal *tmp72 false
+  301 jump *label49 lessThanEq .REACTORS_DESIRED 2
   302 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   303 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   304 jump *label50 always
 
   307 jump *label46 always
   308 label *label45
   309 label *label46
-    * op lessThan *tmp74 :update_reactors_desired:stored 0.8
-    * jump *label51 equal *tmp74 false
+  310 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   311 label *label54
   312 op mul *tmp75 .GOAL_BUFFER 0.8
-    * op lessThan *tmp76 .AVG_SURPLUS *tmp75
-    * jump *label51 equal *tmp76 false
+  313 jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
   314 jump *label53 always
   315 label *label53
   316 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
 
   323 label *label52
   324 label *label44
   325 label *label43
-    * op notEqual *tmp83 .REACTORS_DESIRED 5
-    * jump *label55 equal *tmp83 false
+  326 jump *label55 equal .REACTORS_DESIRED 5
   327 print "Require only "
   328 print .REACTORS_DESIRED
   329 print "/5 reactors."
 
   356 label *label60
   357 control config *tmp87 *tmp89
   358 set *tmp90 :update_fuel:uld_out
-    * op equal *tmp92 :update_fuel:fuel false
-    * jump *label61 equal *tmp92 false
+  359 jump *label61 notEqual :update_fuel:fuel false
   360 set *tmp93 .FUEL
   361 jump *label62 always
   362 label *label61
 
   370 # "Function: def calc_charge_req(in reactor, in time)"
   371 op sub *tmp94 @tick :calc_charge_req:time
   372 op idiv :calc_charge_req:secs *tmp94 60
-    * op greaterThan *tmp96 :calc_charge_req:secs 30
-    * jump *label66 notEqual *tmp96 false
+  373 jump *label66 greaterThan :calc_charge_req:secs 30
   374 label *label67
   375 sensor *tmp97 :calc_charge_req:reactor @enabled
-    * op equal *tmp98 *tmp97 false
-    * jump *label64 equal *tmp98 false
+  376 jump *label64 notEqual *tmp97 false
   377 label *label66
   378 set :calc_charge_req*retval 0
   379 jump *label63 always
 
   421 jump *label70 always
   422 label *label69
   423 jump *label71 equal :start_reactor:enabled false
-    * op lessThan *tmp123 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label73 equal *tmp123 false
+  424 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   425 control enabled :start_reactor:reactor false
   426 print "STOP unwanted"
   427 print "\n"
   428 jump *label74 always
   429 label *label73
-    * op greaterThan *tmp127 :start_reactor:reactor_num 1
-    * jump *label75 equal *tmp127 false
+  430 jump *label75 lessThanEq :start_reactor:reactor_num 1
   431 label *label78
   432 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp129 :start_reactor:fuel_stored *tmp128
-    * jump *label75 equal *tmp129 false
+  433 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
   434 jump *label77 always
   435 label *label77
   436 control enabled :start_reactor:reactor false
 
   438 print "\n"
   439 jump *label76 always
   440 label *label75
-    * op lessThanEq *tmp133 :start_reactor:fuel 1
-    * jump *label79 equal *tmp133 false
+  441 jump *label79 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label80 always
   446 label *label79
-    * op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
-    * jump *label81 equal *tmp137 false
+  447 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label82 always
   452 label *label81
-    * op lessThan *tmp141 :start_reactor:secs 30
-    * jump *label83 equal *tmp141 false
+  453 jump *label83 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   457 set :start_reactor:charge_req :calc_charge_req*retval
   458 op sub *tmp143 :start_reactor:charge :start_reactor:charge_req
-    * op lessThan *tmp144 *tmp143 .PWR_ABORT
-    * jump *label85 equal *tmp144 false
+  459 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   460 label *label88
-    * op lessThan *tmp145 :start_reactor:surplus .FLOW_ABORT
-    * jump *label85 equal *tmp145 false
+  461 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   462 jump *label87 always
   463 label *label87
   464 control enabled :start_reactor:reactor false
 
   478 label *label86
   479 jump *label84 always
   480 label *label83
-    * op lessThan *tmp150 :start_reactor:charge .PWR_ABANDON
-    * jump *label89 equal *tmp150 false
+  481 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   482 label *label92
-    * op lessThan *tmp151 :start_reactor:surplus .FLOW_ABORT
-    * jump *label89 equal *tmp151 false
+  483 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   484 jump *label91 always
   485 label *label91
   486 control enabled :start_reactor:reactor false
 
   512 op max :start_reactor:flow_units -0.1 *tmp161
   513 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * op lessThan *tmp165 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label93 equal *tmp165 false
+  515 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label94 always
   520 label *label93
   521 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp168 *tmp167 1
-    * jump *label95 equal *tmp168 false
+  522 jump *label95 greaterThanEq *tmp167 1
   523 op mul *tmp170 :start_reactor:flow_units 1000
   524 op floor *tmp171 *tmp170
   525 op div :start_reactor:flow *tmp171 10
 
   537 label *label95
   538 jump *label97 equal :start_reactor:fuel_on false
   539 label *label100
-    * op lessThan *tmp176 :start_reactor:fuel .FUEL_REQ
-    * jump *label97 equal *tmp176 false
+  540 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   541 jump *label99 always
   542 label *label99
   543 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp179 *tmp178 .FUEL_REQ
-    * jump *label101 equal *tmp179 false
+  544 jump *label101 lessThanEq *tmp178 .FUEL_REQ
   545 print "WAIT fuel"
   546 print "\n"
   547 jump *label102 always
 
   552 jump *label98 always
   553 label *label97
   554 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp182 :start_reactor:fuel_stored *tmp181
-    * jump *label103 equal *tmp182 false
+  555 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
   556 print "WAIT buffer fuel"
   557 print "\n"
   558 jump *label104 always
   559 label *label103
-    * op lessThan *tmp184 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label105 equal *tmp184 false
+  560 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   561 print "WAIT cryo"
   562 print "\n"
   563 jump *label106 always
 
   574 label *label72
   575 label *label70
   576 sensor *tmp188 :start_reactor:reactor @enabled
-    * op notEqual *tmp189 :start_reactor:enabled *tmp188
-    * jump *label107 equal *tmp189 false
+  577 jump *label107 equal :start_reactor:enabled *tmp188
   578 set .RET_T_STARTUP @tick
   579 jump *label108 always
   580 label *label107
 
   588 label *label4
   589 # "Function: def check_radar(in unit)"
   590 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp193 :check_radar:enemy_found null
-    * jump *label110 equal *tmp193 false
+  591 jump *label110 equal :check_radar:enemy_found null
   592 control enabled projector1 true
   593 control enabled projector2 true
   594 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-17 instructions):
 
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
    62 jump *label11 notEqual *tmp10 false
-    * jump *label13 always
    63 label *label13
    64 print "User has disabled emergency switch"
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   146 jump *label17 notEqual :fuel_3 false
   147 label *label19
   148 jump *label17 notEqual :fuel_4 false
-    * jump *label18 always
   149 label *label18
   150 jump *label15 equal :fuel_5 false
   151 label *label17
 
   162 jump *label22 notEqual :fuel_1 false
   163 label *label24
   164 jump *label22 notEqual :fuel_2 false
-    * jump *label23 always
   165 label *label23
   166 jump *label20 equal :fuel_many false
   167 label *label22
 
   246 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   247 label *label41
   248 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * jump *label40 always
   249 label *label40
   250 print "Differential now idle."
   251 print "\n"
 
   291 label *label48
   292 op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
   293 jump *label45 lessThanEq .AVG_SURPLUS *tmp69
-    * jump *label47 always
   294 label *label47
   295 jump *label49 lessThanEq .REACTORS_DESIRED 2
   296 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   297 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label50 always
   298 label *label49
   299 label *label50
-    * jump *label46 always
   300 label *label45
   301 label *label46
   302 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   303 label *label54
   304 op mul *tmp75 .GOAL_BUFFER 0.8
   305 jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
-    * jump *label53 always
   306 label *label53
   307 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
   308 op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
   309 op max :update_reactors_desired:needed 1 *tmp79
   310 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   311 op min .REACTORS_DESIRED 5 *tmp81
-    * jump *label52 always
   312 label *label51
   313 label *label52
   314 label *label44
 
   318 print .REACTORS_DESIRED
   319 print "/5 reactors."
   320 print "\n"
-    * jump *label56 always
   321 label *label55
   322 label *label56
   323 printflush message1
 
   366 label *label66
   367 set :calc_charge_req*retval 0
   368 jump *label63 always
-    * jump *label65 always
   369 label *label64
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   419 label *label78
   420 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   421 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * jump *label77 always
   422 label *label77
   423 control enabled :start_reactor:reactor false
   424 print "STOP system fuel low"
 
   446 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   447 label *label88
   448 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label87 always
   449 label *label87
   450 control enabled :start_reactor:reactor false
   451 print "START FAIL battery"
 
   467 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   468 label *label92
   469 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label91 always
   470 label *label91
   471 control enabled :start_reactor:reactor false
   472 print "ABANDON - battery crit"
 
   523 jump *label97 equal :start_reactor:fuel_on false
   524 label *label100
   525 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * jump *label99 always
   526 label *label99
   527 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   528 jump *label101 lessThanEq *tmp178 .FUEL_REQ
 
   560 sensor *tmp188 :start_reactor:reactor @enabled
   561 jump *label107 equal :start_reactor:enabled *tmp188
   562 set .RET_T_STARTUP @tick
-    * jump *label108 always
   563 label *label107
   564 label *label108
   565 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   372 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp102 *tmp101 25
-    * op floor :calc_charge_req:charge_req *tmp102
+  373 op idiv :calc_charge_req:charge_req *tmp101 0.04
   374 set :calc_charge_req*retval :calc_charge_req:charge_req
   375 jump *label63 always
   376 set :calc_charge_req*retval null
 
   504 label *label93
   505 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
   506 jump *label95 greaterThanEq *tmp167 1
-    * op mul *tmp170 :start_reactor:flow_units 1000
-    * op floor *tmp171 *tmp170
+  507 op idiv *tmp171 :start_reactor:flow_units 0.001
   508 op div :start_reactor:flow *tmp171 10
-    * op mul *tmp173 :start_reactor:charge_units 1000
-    * op floor *tmp174 *tmp173
+  509 op idiv *tmp174 :start_reactor:charge_units 0.001
   510 op div :start_reactor:charge *tmp174 10
   511 print "WAIT power. (%"
   512 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   146 label *label19
   147 jump *label17 notEqual :fuel_4 false
   148 label *label18
-    * jump *label15 equal :fuel_5 false
+  149 jump *label15 equal :start_reactor*retval false
   150 label *label17
   151 set *tmp26 true
   152 jump *label16 always
 
   154 set *tmp26 false
   155 label *label16
   156 set :fuel_many *tmp26
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  157 set :update_fuel:fuel *tmp26
+  158 set :update_fuel:uld_in unloader5
+  159 set :update_fuel:uld_out unloader6
   160 call *label1 :update_fuel*retaddr :update_fuel*retval
   161 jump *label22 notEqual :fuel_1 false
   162 label *label24
   163 jump *label22 notEqual :fuel_2 false
   164 label *label23
-    * jump *label20 equal :fuel_many false
+  165 jump *label20 equal *tmp26 false
   166 label *label22
   167 set *tmp28 true
   168 jump *label21 always
 
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   173 set :throttle_blast:reactors_fueled *tmp28
   174 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp30 .NODE @powerNetStored
+  175 sensor *tmp30 node1 @powerNetStored
   176 op floor :throttle_blast:charge *tmp30
-    * sensor *tmp32 .NODE @powerNetIn
-    * sensor *tmp33 .NODE @powerNetOut
+  177 sensor *tmp32 node1 @powerNetIn
+  178 sensor *tmp33 node1 @powerNetOut
   179 op sub *tmp34 *tmp32 *tmp33
   180 op floor :throttle_blast:surplus *tmp34
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
+  181 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  182 jump *label29 greaterThanEq :throttle_blast:charge 5000
   183 label *label30
-    * jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
+  184 jump *label28 lessThan :throttle_blast:surplus -500
   185 label *label29
-    * jump *label26 equal :throttle_blast:emerg_shutdown false
+  186 jump *label26 equal :emerg_shutdown false
   187 label *label28
   188 set :throttle_blast:limit 0
   189 print "Central Fuel at "
   190 print :throttle_blast:fuel_stored
   191 print " "
   192 print "/ "
-    * print :throttle_blast:limit
+  193 print 0
   194 print " "
   195 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  196 jump *label31 equal :emerg_shutdown false
   197 print " Enemies detected."
   198 print "\n"
   199 jump *label32 always
 
   203 label *label32
   204 jump *label27 always
   205 label *label26
-    * jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  206 jump *label33 notEqual *tmp28 false
+  207 set :throttle_blast:limit 150
   208 print "Fuel "
   209 print :throttle_blast:fuel_stored
   210 print " "
   211 print "/ "
-    * print :throttle_blast:limit
+  212 print .FUEL_LIMIT_LOW
   213 print " "
   214 print "(due to emergency)"
   215 print "\n"
   216 jump *label34 always
   217 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  218 set :throttle_blast:limit 800
   219 print "Fuel "
   220 print :throttle_blast:fuel_stored
   221 print " "
   222 print "/ "
-    * print :throttle_blast:limit
+  223 print .FUEL_LIMIT
   224 print "\"
   225 print "n"
   226 label *label34
   227 label *label27
   228 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   229 jump *label25 always
-    * set *tmp29 null
   230 label *label25
   231 set :feed_mixers *tmp29
-    * set *tmp44 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp46 .MIXER_IN
+  232 set *tmp44 unloader7
+  233 jump *label35 equal *tmp29 false
+  234 set *tmp46 @pyratite
   235 jump *label36 always
   236 label *label35
-    * set *tmp46 .FUEL_OFF
+  237 set *tmp46 @scrap
   238 label *label36
-    * control config *tmp44 *tmp46
+  239 control config .ULD_MIXER *tmp46
   240 # "Function: def diff_generators()"
-    * sensor *tmp48 .NODE @powerNetStored
-    * sensor *tmp49 .NODE @powerNetCapacity
+  241 sensor *tmp48 node1 @powerNetStored
+  242 sensor *tmp49 node1 @powerNetCapacity
   243 op div :diff_generators:stored_pc *tmp48 *tmp49
   244 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   245 label *label41
 
   258 set :kilo:val .AVG_SURPLUS
   259 call *label0 :kilo*retaddr :kilo*retval
   260 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  261 sensor :kilo:val node1 @powerNetStored
   262 call *label0 :kilo*retaddr :kilo*retval
   263 set :charge :kilo*retval
   264 jump *label42 lessThanEq .START_POWER_REQ 0
 
   266 call *label0 :kilo*retaddr :kilo*retval
   267 set :req :kilo*retval
   268 print "Req "
-    * print :req
+  269 print :kilo*retval
   270 print "kJ / "
   271 print :charge
   272 print "kJ. "
 
   278 print "Power "
   279 print :surplus
   280 print "kW, "
-    * print :charge
+  281 print :kilo*retval
   282 print "kJ"
   283 print "\n"
   284 # "Function: def update_reactors_desired()"
-    * sensor *tmp65 .NODE @powerNetStored
-    * sensor *tmp66 .NODE @powerNetCapacity
+  285 sensor *tmp65 node1 @powerNetStored
+  286 sensor *tmp66 node1 @powerNetCapacity
   287 op div :update_reactors_desired:stored *tmp65 *tmp66
   288 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   289 label *label48
-    * op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * jump *label45 lessThanEq .AVG_SURPLUS *tmp69
+  290 op add *tmp69 6500 10000
+  291 jump *label45 lessThanEq .AVG_SURPLUS 16500
   292 label *label47
   293 jump *label49 lessThanEq .REACTORS_DESIRED 2
   294 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  295 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   296 label *label49
   297 label *label50
   298 label *label45
   299 label *label46
   300 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   301 label *label54
-    * op mul *tmp75 .GOAL_BUFFER 0.8
-    * jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
+  302 op mul *tmp75 10000 0.8
+  303 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   304 label *label53
-    * op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
+  305 op sub *tmp78 .AVG_SURPLUS 10000
+  306 op idiv *tmp79 *tmp78 6500
   307 op max :update_reactors_desired:needed 1 *tmp79
   308 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   309 op min .REACTORS_DESIRED 5 *tmp81
 
   328 op idiv *tmp85 :kilo:val 100
   329 op div :kilo*retval *tmp85 10
   330 jump *label57 always
-    * set :kilo*retval null
   331 label *label57
   332 return :kilo*retaddr
   333 end
 
   340 label *label59
   341 set *tmp89 .FUEL_OFF
   342 label *label60
-    * control config *tmp87 *tmp89
+  343 control config :update_fuel:uld_in *tmp89
   344 set *tmp90 :update_fuel:uld_out
   345 jump *label61 notEqual :update_fuel:fuel false
   346 set *tmp93 .FUEL
 
   348 label *label61
   349 set *tmp93 .FUEL_OFF
   350 label *label62
-    * control config *tmp90 *tmp93
+  351 control config :update_fuel:uld_out *tmp93
   352 label *label58
   353 return :update_fuel*retaddr
   354 end
 
   370 op idiv :calc_charge_req:charge_req *tmp101 0.04
   371 set :calc_charge_req*retval :calc_charge_req:charge_req
   372 jump *label63 always
-    * set :calc_charge_req*retval null
   373 label *label63
   374 return :calc_charge_req*retaddr
   375 end
 
   437 set :calc_charge_req:time :start_reactor:t_startup
   438 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   439 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp143 :start_reactor:charge :start_reactor:charge_req
+  440 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   441 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   442 label *label88
   443 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   453 print :start_reactor:time_left
   454 print " "
   455 print "secs, req "
-    * print :start_reactor:charge_req
+  456 print :calc_charge_req*retval
   457 print "J"
   458 print "\n"
   459 label *label86
 
   557 label *label108
   558 set :start_reactor*retval :start_reactor:supply_fuel
   559 jump *label68 always
-    * set :start_reactor*retval null
   560 label *label68
   561 return :start_reactor*retaddr
   562 end
 
   580 control enabled reactor5 false
   581 set :check_radar*retval true
   582 jump *label109 always
-    * set *tmp194 null
   583 jump *label111 always
   584 label *label110
   585 control enabled projector1 false
   586 control enabled projector2 false
   587 set :check_radar*retval false
   588 jump *label109 always
-    * set *tmp194 null
   589 label *label111
-    * set :check_radar*retval *tmp194
+  590 set :check_radar*retval null
   591 label *label109
   592 return :check_radar*retaddr
   593 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-17 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    53 # "Function: def check_manual_shutdown()"
    54 jump *label11 equal switch1 null
    55 label *label14
 
   148 label *label15
   149 set *tmp26 false
   150 label *label16
-    * set :fuel_many *tmp26
   151 set :update_fuel:fuel *tmp26
   152 set :update_fuel:uld_in unloader5
   153 set :update_fuel:uld_out unloader6
 
   164 set *tmp28 false
   165 label *label21
   166 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp28
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   167 sensor *tmp30 node1 @powerNetStored
   168 op floor :throttle_blast:charge *tmp30
   169 sensor *tmp32 node1 @powerNetIn
 
   201 print :throttle_blast:fuel_stored
   202 print " "
   203 print "/ "
-    * print .FUEL_LIMIT_LOW
+  204 print 150
   205 print " "
   206 print "(due to emergency)"
   207 print "\n"
 
   212 print :throttle_blast:fuel_stored
   213 print " "
   214 print "/ "
-    * print .FUEL_LIMIT
+  215 print 800
   216 print "\"
   217 print "n"
   218 label *label34
 
   220 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   221 jump *label25 always
   222 label *label25
-    * set :feed_mixers *tmp29
-    * set *tmp44 unloader7
   223 jump *label35 equal *tmp29 false
   224 set *tmp46 @pyratite
   225 jump *label36 always
   226 label *label35
   227 set *tmp46 @scrap
   228 label *label36
-    * control config .ULD_MIXER *tmp46
+  229 control config unloader7 *tmp46
   230 # "Function: def diff_generators()"
   231 sensor *tmp48 node1 @powerNetStored
   232 sensor *tmp49 node1 @powerNetCapacity
 
   254 jump *label42 lessThanEq .START_POWER_REQ 0
   255 set :kilo:val .START_POWER_REQ
   256 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   257 print "Req "
   258 print :kilo*retval
   259 print "kJ / "
 
   276 op div :update_reactors_desired:stored *tmp65 *tmp66
   277 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   278 label *label48
-    * op add *tmp69 6500 10000
   279 jump *label45 lessThanEq .AVG_SURPLUS 16500
   280 label *label47
   281 jump *label49 lessThanEq .REACTORS_DESIRED 2
 
   287 label *label46
   288 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   289 label *label54
-    * op mul *tmp75 10000 0.8
   290 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   291 label *label53
   292 op sub *tmp78 .AVG_SURPLUS 10000
 
   320 end
   321 label *label1
   322 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp87 :update_fuel:uld_in
   323 jump *label59 equal :update_fuel:fuel false
   324 set *tmp89 .FUEL
   325 jump *label60 always
 
   327 set *tmp89 .FUEL_OFF
   328 label *label60
   329 control config :update_fuel:uld_in *tmp89
-    * set *tmp90 :update_fuel:uld_out
   330 jump *label61 notEqual :update_fuel:fuel false
   331 set *tmp93 .FUEL
   332 jump *label62 always
 
   421 set :calc_charge_req:reactor :start_reactor:reactor
   422 set :calc_charge_req:time :start_reactor:t_startup
   423 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   424 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   425 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   426 label *label88
 
   571 set :check_radar*retval false
   572 jump *label109 always
   573 label *label111
-    * set :check_radar*retval null
   574 label *label109
   575 return :check_radar*retaddr
   576 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, Select Optimization, pass 1, iteration 1 (-14 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp218 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp218 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
   132 set :t_startup5 .RET_T_STARTUP
   133 jump *label17 notEqual :fuel_3 false
   134 label *label19
-    * jump *label17 notEqual :fuel_4 false
-    * label *label18
-    * jump *label15 equal :start_reactor*retval false
+  135 jump *label15 equal :fuel_4 false
   136 label *label17
   137 set *tmp26 true
   138 jump *label16 always
   139 label *label15
-    * set *tmp26 false
+  140 label *label113
+  141 select *tmp26 equal :start_reactor*retval false false true
   142 label *label16
   143 set :update_fuel:fuel *tmp26
   144 set :update_fuel:uld_in unloader5
 
   146 call *label1 :update_fuel*retaddr :update_fuel*retval
   147 jump *label22 notEqual :fuel_1 false
   148 label *label24
-    * jump *label22 notEqual :fuel_2 false
-    * label *label23
-    * jump *label20 equal *tmp26 false
+  149 jump *label20 equal :fuel_2 false
   150 label *label22
   151 set *tmp28 true
   152 jump *label21 always
   153 label *label20
-    * set *tmp28 false
+  154 label *label116
+  155 select *tmp28 equal *tmp26 false false true
   156 label *label21
   157 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   158 sensor *tmp30 node1 @powerNetStored
 
   211 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   212 jump *label25 always
   213 label *label25
-    * jump *label35 equal *tmp29 false
-    * set *tmp46 @pyratite
-    * jump *label36 always
-    * label *label35
-    * set *tmp46 @scrap
-    * label *label36
+  214 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   215 control config unloader7 *tmp46
   216 # "Function: def diff_generators()"
   217 sensor *tmp48 node1 @powerNetStored
 
   306 end
   307 label *label1
   308 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label59 equal :update_fuel:fuel false
-    * set *tmp89 .FUEL
-    * jump *label60 always
-    * label *label59
-    * set *tmp89 .FUEL_OFF
-    * label *label60
+  309 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   310 control config :update_fuel:uld_in *tmp89
-    * jump *label61 notEqual :update_fuel:fuel false
-    * set *tmp93 .FUEL
-    * jump *label62 always
-    * label *label61
-    * set *tmp93 .FUEL_OFF
-    * label *label62
+  311 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   312 control config :update_fuel:uld_out *tmp93
   313 label *label58
   314 return :update_fuel*retaddr
 
   510 label *label94
   511 label *label72
   512 label *label70
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * jump *label107 equal :start_reactor:enabled *tmp188
-    * set .RET_T_STARTUP @tick
-    * label *label107
-    * label *label108
+  513 sensor *tmp188 :start_reactor:reactor @enabled
+  514 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick .RET_T_STARTUP
   515 set :start_reactor*retval :start_reactor:supply_fuel
   516 jump *label68 always
   517 label *label68

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
   130 call *label3 :start_reactor*retaddr :start_reactor*retval
   131 set :fuel_5 :start_reactor*retval
   132 set :t_startup5 .RET_T_STARTUP
-    * jump *label17 notEqual :fuel_3 false
+  133 set *tmp26 true
+  134 jump *label16 notEqual :fuel_3 false
   135 label *label19
-    * jump *label15 equal :fuel_4 false
+  136 jump *label16 notEqual :fuel_4 false
   137 label *label17
-    * set *tmp26 true
-    * jump *label16 always
   138 label *label15
   139 label *label113
   140 select *tmp26 equal :start_reactor*retval false false true
 
   143 set :update_fuel:uld_in unloader5
   144 set :update_fuel:uld_out unloader6
   145 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * jump *label22 notEqual :fuel_1 false
+  146 set *tmp28 true
+  147 jump *label21 notEqual :fuel_1 false
   148 label *label24
-    * jump *label20 equal :fuel_2 false
+  149 jump *label21 notEqual :fuel_2 false
   150 label *label22
-    * set *tmp28 true
-    * jump *label21 always
   151 label *label20
   152 label *label116
   153 select *tmp28 equal *tmp26 false false true

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   230 label *label39
   231 label *label37
   232 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  233 label *label118
+  234 # "Function: def kilo(in val)"
+  235 op idiv *tmp85 :kilo:val 100
+  236 op div :kilo*retval *tmp85 10
+  237 jump *label119 always
+  238 label *label119
   239 set :surplus :kilo*retval
   240 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  241 label *label120
+  242 # "Function: def kilo(in val)"
+  243 op idiv *tmp85 :kilo:val 100
+  244 op div :kilo*retval *tmp85 10
+  245 jump *label121 always
+  246 label *label121
   247 set :charge :kilo*retval
   248 jump *label42 lessThanEq .START_POWER_REQ 0
   249 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  250 label *label122
+  251 # "Function: def kilo(in val)"
+  252 op idiv *tmp85 :kilo:val 100
+  253 op div :kilo*retval *tmp85 10
+  254 jump *label123 always
+  255 label *label123
   256 print "Req "
   257 print :kilo*retval
   258 print "kJ / "
 
   309 jump *label7 always
   310 label *label9
   311 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
-    * op div :kilo*retval *tmp85 10
-    * jump *label57 always
-    * label *label57
-    * return :kilo*retaddr
-    * end
   312 label *label1
   313 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   314 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   232 set :kilo:val .AVG_SURPLUS
   233 label *label118
   234 # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
+  235 op idiv *tmp85 .AVG_SURPLUS 100
   236 op div :kilo*retval *tmp85 10
   237 jump *label119 always
   238 label *label119
 
   249 set :kilo:val .START_POWER_REQ
   250 label *label122
   251 # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
+  252 op idiv *tmp85 .START_POWER_REQ 100
   253 op div :kilo*retval *tmp85 10
   254 jump *label123 always
   255 label *label123

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   229 control enabled generator2 true
   230 label *label39
   231 label *label37
-    * set :kilo:val .AVG_SURPLUS
   232 label *label118
   233 # "Function: def kilo(in val)"
   234 op idiv *tmp85 .AVG_SURPLUS 100
 
   245 label *label121
   246 set :charge :kilo*retval
   247 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   248 label *label122
   249 # "Function: def kilo(in val)"
   250 op idiv *tmp85 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
    90 set :update_fuel:fuel :start_reactor*retval
    91 set :update_fuel:uld_in unloader1
    92 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   93 label *label124
+   94 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   95 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+   96 control config :update_fuel:uld_in *tmp89
+   97 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+   98 control config :update_fuel:uld_out *tmp93
+   99 label *label125
   100 set :start_reactor:reactor reactor2
   101 set :start_reactor:reactor_num 2
   102 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   108 set :update_fuel:fuel :start_reactor*retval
   109 set :update_fuel:uld_in unloader3
   110 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  111 label *label126
+  112 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  113 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  114 control config :update_fuel:uld_in *tmp89
+  115 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  116 control config :update_fuel:uld_out *tmp93
+  117 label *label127
   118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   154 set :update_fuel:fuel *tmp26
   155 set :update_fuel:uld_in unloader5
   156 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  157 label *label128
+  158 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  159 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  160 control config :update_fuel:uld_in *tmp89
+  161 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  162 control config :update_fuel:uld_out *tmp93
+  163 label *label129
   164 set *tmp28 true
   165 jump *label21 notEqual :fuel_1 false
   166 label *label24
 
   325 jump *label7 always
   326 label *label9
   327 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
-    * label *label58
-    * return :update_fuel*retaddr
-    * end
   328 label *label2
   329 # "Function: def calc_charge_req(in reactor, in time)"
   330 op sub *tmp94 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    92 set :update_fuel:uld_out unloader2
    93 label *label124
    94 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+   95 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+   96 control config unloader1 *tmp89
+   97 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+   98 control config unloader2 *tmp93
    99 label *label125
   100 set :start_reactor:reactor reactor2
   101 set :start_reactor:reactor_num 2
 
   110 set :update_fuel:uld_out unloader4
   111 label *label126
   112 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+  113 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  114 control config unloader3 *tmp89
+  115 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  116 control config unloader4 *tmp93
   117 label *label127
   118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
 
   156 set :update_fuel:uld_out unloader6
   157 label *label128
   158 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+  159 select *tmp89 notEqual *tmp26 false @blast-compound @scrap
+  160 control config unloader5 *tmp89
+  161 select *tmp93 equal *tmp26 false @blast-compound @scrap
+  162 control config unloader6 *tmp93
   163 label *label129
   164 set *tmp28 true
   165 jump *label21 notEqual :fuel_1 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    87 call *label3 :start_reactor*retaddr :start_reactor*retval
    88 set :fuel_1 :start_reactor*retval
    89 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
    90 label *label124
    91 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    92 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
 
   102 call *label3 :start_reactor*retaddr :start_reactor*retval
   103 set :fuel_2 :start_reactor*retval
   104 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   105 label *label126
   106 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   107 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
 
   145 label *label113
   146 select *tmp26 equal :start_reactor*retval false false true
   147 label *label16
-    * set :update_fuel:fuel *tmp26
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   148 label *label128
   149 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   150 select *tmp89 notEqual *tmp26 false @blast-compound @scrap

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+46 instructions):
 
    61 op or :emerg_shutdown :check_radar*retval *tmp8
    62 set :calc_charge_req:reactor reactor1
    63 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   64 label *label130
+   65 # "Function: def calc_charge_req(in reactor, in time)"
+   66 op sub *tmp94 @tick :calc_charge_req:time
+   67 op idiv :calc_charge_req:secs *tmp94 60
+   68 jump *label132 greaterThan :calc_charge_req:secs 30
+   69 label *label131
+   70 sensor *tmp97 :calc_charge_req:reactor @enabled
+   71 jump *label133 notEqual *tmp97 false
+   72 label *label132
+   73 set :calc_charge_req*retval 0
+   74 jump *label135 always
+   75 label *label133
+   76 label *label134
+   77 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   78 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+   79 op idiv :calc_charge_req:charge_req *tmp101 0.04
+   80 set :calc_charge_req*retval :calc_charge_req:charge_req
+   81 jump *label135 always
+   82 label *label135
    83 set .START_POWER_REQ :calc_charge_req*retval
    84 set :calc_charge_req:reactor reactor2
    85 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   86 label *label136
+   87 # "Function: def calc_charge_req(in reactor, in time)"
+   88 op sub *tmp94 @tick :calc_charge_req:time
+   89 op idiv :calc_charge_req:secs *tmp94 60
+   90 jump *label138 greaterThan :calc_charge_req:secs 30
+   91 label *label137
+   92 sensor *tmp97 :calc_charge_req:reactor @enabled
+   93 jump *label139 notEqual *tmp97 false
+   94 label *label138
+   95 set :calc_charge_req*retval 0
+   96 jump *label141 always
+   97 label *label139
+   98 label *label140
+   99 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  100 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  101 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  102 set :calc_charge_req*retval :calc_charge_req:charge_req
+  103 jump *label141 always
+  104 label *label141
   105 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   106 set :calc_charge_req:reactor reactor3
   107 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  108 label *label142
+  109 # "Function: def calc_charge_req(in reactor, in time)"
+  110 op sub *tmp94 @tick :calc_charge_req:time
+  111 op idiv :calc_charge_req:secs *tmp94 60
+  112 jump *label144 greaterThan :calc_charge_req:secs 30
+  113 label *label143
+  114 sensor *tmp97 :calc_charge_req:reactor @enabled
+  115 jump *label145 notEqual *tmp97 false
+  116 label *label144
+  117 set :calc_charge_req*retval 0
+  118 jump *label147 always
+  119 label *label145
+  120 label *label146
+  121 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  122 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  123 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  124 set :calc_charge_req*retval :calc_charge_req:charge_req
+  125 jump *label147 always
+  126 label *label147
   127 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   128 set :calc_charge_req:reactor reactor4
   129 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  130 label *label148
+  131 # "Function: def calc_charge_req(in reactor, in time)"
+  132 op sub *tmp94 @tick :calc_charge_req:time
+  133 op idiv :calc_charge_req:secs *tmp94 60
+  134 jump *label150 greaterThan :calc_charge_req:secs 30
+  135 label *label149
+  136 sensor *tmp97 :calc_charge_req:reactor @enabled
+  137 jump *label151 notEqual *tmp97 false
+  138 label *label150
+  139 set :calc_charge_req*retval 0
+  140 jump *label153 always
+  141 label *label151
+  142 label *label152
+  143 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  144 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  145 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  146 set :calc_charge_req*retval :calc_charge_req:charge_req
+  147 jump *label153 always
+  148 label *label153
   149 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   150 set :calc_charge_req:reactor reactor5
   151 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  152 label *label154
+  153 # "Function: def calc_charge_req(in reactor, in time)"
+  154 op sub *tmp94 @tick :calc_charge_req:time
+  155 op idiv :calc_charge_req:secs *tmp94 60
+  156 jump *label156 greaterThan :calc_charge_req:secs 30
+  157 label *label155
+  158 sensor *tmp97 :calc_charge_req:reactor @enabled
+  159 jump *label157 notEqual *tmp97 false
+  160 label *label156
+  161 set :calc_charge_req*retval 0
+  162 jump *label159 always
+  163 label *label157
+  164 label *label158
+  165 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  166 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  167 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  168 set :calc_charge_req*retval :calc_charge_req:charge_req
+  169 jump *label159 always
+  170 label *label159
   171 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   172 set :start_reactor:reactor reactor1
   173 set :start_reactor:reactor_num 1
 
   406 jump *label7 always
   407 label *label9
   408 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp94 60
-    * jump *label66 greaterThan :calc_charge_req:secs 30
-    * label *label67
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
-    * jump *label64 notEqual *tmp97 false
-    * label *label66
-    * set :calc_charge_req*retval 0
-    * jump *label63 always
-    * label *label64
-    * label *label65
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp101 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label63 always
-    * label *label63
-    * return :calc_charge_req*retaddr
-    * end
   409 label *label3
   410 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   411 set .RET_T_STARTUP :start_reactor:t_startup
 
   468 jump *label83 greaterThanEq :start_reactor:secs 30
   469 set :calc_charge_req:reactor :start_reactor:reactor
   470 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  471 label *label160
+  472 # "Function: def calc_charge_req(in reactor, in time)"
+  473 op sub *tmp94 @tick :calc_charge_req:time
+  474 op idiv :calc_charge_req:secs *tmp94 60
+  475 jump *label162 greaterThan :calc_charge_req:secs 30
+  476 label *label161
+  477 sensor *tmp97 :calc_charge_req:reactor @enabled
+  478 jump *label163 notEqual *tmp97 false
+  479 label *label162
+  480 set :calc_charge_req*retval 0
+  481 jump *label165 always
+  482 label *label163
+  483 label *label164
+  484 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  485 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  486 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  487 set :calc_charge_req*retval :calc_charge_req:charge_req
+  488 jump *label165 always
+  489 label *label165
   490 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   491 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   492 label *label88

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    63 set :calc_charge_req:time :t_startup1
    64 label *label130
    65 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+   66 op sub *tmp94 @tick :t_startup1
    67 op idiv :calc_charge_req:secs *tmp94 60
    68 jump *label132 greaterThan :calc_charge_req:secs 30
    69 label *label131
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+   70 sensor *tmp97 reactor1 @enabled
    71 jump *label133 notEqual *tmp97 false
    72 label *label132
    73 set :calc_charge_req*retval 0
 
    85 set :calc_charge_req:time :t_startup2
    86 label *label136
    87 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+   88 op sub *tmp94 @tick :t_startup2
    89 op idiv :calc_charge_req:secs *tmp94 60
    90 jump *label138 greaterThan :calc_charge_req:secs 30
    91 label *label137
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+   92 sensor *tmp97 reactor2 @enabled
    93 jump *label139 notEqual *tmp97 false
    94 label *label138
    95 set :calc_charge_req*retval 0
 
   107 set :calc_charge_req:time :t_startup3
   108 label *label142
   109 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  110 op sub *tmp94 @tick :t_startup3
   111 op idiv :calc_charge_req:secs *tmp94 60
   112 jump *label144 greaterThan :calc_charge_req:secs 30
   113 label *label143
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  114 sensor *tmp97 reactor3 @enabled
   115 jump *label145 notEqual *tmp97 false
   116 label *label144
   117 set :calc_charge_req*retval 0
 
   129 set :calc_charge_req:time :t_startup4
   130 label *label148
   131 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  132 op sub *tmp94 @tick :t_startup4
   133 op idiv :calc_charge_req:secs *tmp94 60
   134 jump *label150 greaterThan :calc_charge_req:secs 30
   135 label *label149
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  136 sensor *tmp97 reactor4 @enabled
   137 jump *label151 notEqual *tmp97 false
   138 label *label150
   139 set :calc_charge_req*retval 0
 
   151 set :calc_charge_req:time :t_startup5
   152 label *label154
   153 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  154 op sub *tmp94 @tick :t_startup5
   155 op idiv :calc_charge_req:secs *tmp94 60
   156 jump *label156 greaterThan :calc_charge_req:secs 30
   157 label *label155
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  158 sensor *tmp97 reactor5 @enabled
   159 jump *label157 notEqual *tmp97 false
   160 label *label156
   161 set :calc_charge_req*retval 0
 
   470 set :calc_charge_req:time :start_reactor:t_startup
   471 label *label160
   472 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  473 op sub *tmp94 @tick :start_reactor:t_startup
   474 op idiv :calc_charge_req:secs *tmp94 60
   475 jump *label162 greaterThan :calc_charge_req:secs 30
   476 label *label161
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  477 sensor *tmp97 :start_reactor:reactor @enabled
   478 jump *label163 notEqual *tmp97 false
   479 label *label162
   480 set :calc_charge_req*retval 0
 
   601 label *label72
   602 label *label70
   603 sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick .RET_T_STARTUP
+  604 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
   605 set :start_reactor*retval :start_reactor:supply_fuel
   606 jump *label68 always
   607 label *label68

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    59 jump *label10 always
    60 label *label10
    61 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    62 label *label130
    63 # "Function: def calc_charge_req(in reactor, in time)"
    64 op sub *tmp94 @tick :t_startup1
 
    79 jump *label135 always
    80 label *label135
    81 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    82 label *label136
    83 # "Function: def calc_charge_req(in reactor, in time)"
    84 op sub *tmp94 @tick :t_startup2
 
    99 jump *label141 always
   100 label *label141
   101 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   102 label *label142
   103 # "Function: def calc_charge_req(in reactor, in time)"
   104 op sub *tmp94 @tick :t_startup3
 
   119 jump *label147 always
   120 label *label147
   121 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   122 label *label148
   123 # "Function: def calc_charge_req(in reactor, in time)"
   124 op sub *tmp94 @tick :t_startup4
 
   139 jump *label153 always
   140 label *label153
   141 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   142 label *label154
   143 # "Function: def calc_charge_req(in reactor, in time)"
   144 op sub *tmp94 @tick :t_startup5
 
   398 end
   399 label *label3
   400 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
   401 op sub *tmp104 @tick :start_reactor:t_startup
   402 op idiv :start_reactor:secs *tmp104 60
   403 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   455 jump *label82 always
   456 label *label81
   457 jump *label83 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   458 label *label160
   459 # "Function: def calc_charge_req(in reactor, in time)"
   460 op sub *tmp94 @tick :start_reactor:t_startup

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    42 set .CONTAINER vault1
    43 set .NODE node1
    44 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   45 label *label166
+   46 # "Function: def check_radar(in unit)"
+   47 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   48 jump *label167 equal :check_radar:enemy_found null
+   49 control enabled projector1 true
+   50 control enabled projector2 true
+   51 control config .ULD_IN_1 .FUEL_OFF
+   52 control config .ULD_OUT_1 .FUEL
+   53 control config .ULD_IN_2 .FUEL_OFF
+   54 control config .ULD_OUT_2 .FUEL
+   55 control config .ULD_IN_MANY .FUEL_OFF
+   56 control config .ULD_OUT_MANY .FUEL
+   57 control config .ULD_MIXER .FUEL_OFF
+   58 control enabled reactor1 false
+   59 control enabled reactor2 false
+   60 control enabled reactor3 false
+   61 control enabled reactor4 false
+   62 control enabled reactor5 false
+   63 set :check_radar*retval true
+   64 jump *label169 always
+   65 jump *label168 always
+   66 label *label167
+   67 control enabled projector1 false
+   68 control enabled projector2 false
+   69 set :check_radar*retval false
+   70 jump *label169 always
+   71 label *label168
+   72 label *label169
    73 # "Function: def check_manual_shutdown()"
    74 jump *label11 equal switch1 null
    75 label *label14
 
   217 control config unloader4 *tmp93
   218 label *label127
   219 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  220 label *label170
+  221 # "Function: def check_radar(in unit)"
+  222 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  223 jump *label171 equal :check_radar:enemy_found null
+  224 control enabled projector1 true
+  225 control enabled projector2 true
+  226 control config .ULD_IN_1 .FUEL_OFF
+  227 control config .ULD_OUT_1 .FUEL
+  228 control config .ULD_IN_2 .FUEL_OFF
+  229 control config .ULD_OUT_2 .FUEL
+  230 control config .ULD_IN_MANY .FUEL_OFF
+  231 control config .ULD_OUT_MANY .FUEL
+  232 control config .ULD_MIXER .FUEL_OFF
+  233 control enabled reactor1 false
+  234 control enabled reactor2 false
+  235 control enabled reactor3 false
+  236 control enabled reactor4 false
+  237 control enabled reactor5 false
+  238 set :check_radar*retval true
+  239 jump *label173 always
+  240 jump *label172 always
+  241 label *label171
+  242 control enabled projector1 false
+  243 control enabled projector2 false
+  244 set :check_radar*retval false
+  245 jump *label173 always
+  246 label *label172
+  247 label *label173
   248 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   249 set :start_reactor:reactor reactor3
   250 set :start_reactor:reactor_num 3
 
   648 label *label68
   649 return :start_reactor*retaddr
   650 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label110 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label109 always
-    * jump *label111 always
-    * label *label110
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label109 always
-    * label *label111
-    * label *label109
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    44 set :check_radar:unit cyclone1
    45 label *label166
    46 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   47 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    48 jump *label167 equal :check_radar:enemy_found null
    49 control enabled projector1 true
    50 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   51 control config unloader1 @scrap
+   52 control config unloader2 @blast-compound
+   53 control config unloader3 @scrap
+   54 control config unloader4 @blast-compound
+   55 control config unloader5 @scrap
+   56 control config unloader6 @blast-compound
+   57 control config unloader7 @scrap
    58 control enabled reactor1 false
    59 control enabled reactor2 false
    60 control enabled reactor3 false
 
   219 set :check_radar:unit cyclone1
   220 label *label170
   221 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  222 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   223 jump *label171 equal :check_radar:enemy_found null
   224 control enabled projector1 true
   225 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  226 control config unloader1 @scrap
+  227 control config unloader2 @blast-compound
+  228 control config unloader3 @scrap
+  229 control config unloader4 @blast-compound
+  230 control config unloader5 @scrap
+  231 control config unloader6 @blast-compound
+  232 control config unloader7 @scrap
   233 control enabled reactor1 false
   234 control enabled reactor2 false
   235 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    30 set .REACTORS_DESIRED 5
    31 set .AVG_SURPLUS 500
    32 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    33 set .CONTAINER vault1
    34 set .NODE node1
-    * set :check_radar:unit cyclone1
    35 label *label166
    36 # "Function: def check_radar(in unit)"
    37 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   206 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
   207 control config unloader4 *tmp93
   208 label *label127
-    * set :check_radar:unit cyclone1
   209 label *label170
   210 # "Function: def check_radar(in unit)"
   211 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function call at line 80:14 (+146 instructions):
 
   181 set :start_reactor:emerg_shutdown :emerg_shutdown
   182 set :start_reactor:fuel_on :fuel_1
   183 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  184 label *label174
+  185 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  186 op sub *tmp104 @tick :start_reactor:t_startup
+  187 op idiv :start_reactor:secs *tmp104 60
+  188 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  189 set :start_reactor:supply_fuel true
+  190 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  191 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  192 sensor *tmp109 .NODE @powerNetStored
+  193 op floor :start_reactor:charge *tmp109
+  194 sensor *tmp111 .NODE @powerNetIn
+  195 sensor *tmp112 .NODE @powerNetOut
+  196 op sub *tmp113 *tmp111 *tmp112
+  197 op floor :start_reactor:surplus *tmp113
+  198 op mul *tmp115 .AVG_SURPLUS 0.8
+  199 op mul *tmp116 :start_reactor:surplus 0.2
+  200 op add .AVG_SURPLUS *tmp115 *tmp116
+  201 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  202 print "#"
+  203 print :start_reactor:reactor_num
+  204 print " "
+  205 print "- "
+  206 jump *label175 equal :start_reactor:emerg_shutdown false
+  207 control enabled :start_reactor:reactor false
+  208 print "emergency mode"
+  209 print "\n"
+  210 set :start_reactor:supply_fuel false
+  211 jump *label218 always
+  212 label *label175
+  213 jump *label202 equal :start_reactor:enabled false
+  214 jump *label176 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  215 control enabled :start_reactor:reactor false
+  216 print "STOP unwanted"
+  217 print "\n"
+  218 jump *label201 always
+  219 label *label176
+  220 jump *label179 lessThanEq :start_reactor:reactor_num 1
+  221 label *label177
+  222 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  223 jump *label179 greaterThanEq :start_reactor:fuel_stored *tmp128
+  224 label *label178
+  225 control enabled :start_reactor:reactor false
+  226 print "STOP system fuel low"
+  227 print "\n"
+  228 jump *label200 always
+  229 label *label179
+  230 jump *label180 greaterThan :start_reactor:fuel 1
+  231 control enabled :start_reactor:reactor false
+  232 print "STOP fuel low"
+  233 print "\n"
+  234 jump *label199 always
+  235 label *label180
+  236 jump *label181 greaterThan :start_reactor:cryo .CRYO_ABORT
+  237 control enabled :start_reactor:reactor false
+  238 print "STOP out of cryo"
+  239 print "\n"
+  240 jump *label198 always
+  241 label *label181
+  242 jump *label192 greaterThanEq :start_reactor:secs 30
+  243 label *label182
+  244 # "Function: def calc_charge_req(in reactor, in time)"
+  245 op sub *tmp94 @tick :start_reactor:t_startup
+  246 op idiv :calc_charge_req:secs *tmp94 60
+  247 jump *label184 greaterThan :calc_charge_req:secs 30
+  248 label *label183
+  249 sensor *tmp97 :start_reactor:reactor @enabled
+  250 jump *label185 notEqual *tmp97 false
+  251 label *label184
+  252 set :calc_charge_req*retval 0
+  253 jump *label187 always
+  254 label *label185
+  255 label *label186
+  256 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  257 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  258 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  259 set :calc_charge_req*retval :calc_charge_req:charge_req
+  260 jump *label187 always
+  261 label *label187
+  262 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  263 jump *label190 greaterThanEq *tmp143 .PWR_ABORT
+  264 label *label188
+  265 jump *label190 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  266 label *label189
+  267 control enabled :start_reactor:reactor false
+  268 print "START FAIL battery"
+  269 print "\n"
+  270 set :start_reactor:supply_fuel false
+  271 jump *label191 always
+  272 label *label190
+  273 op sub :start_reactor:time_left 30 :start_reactor:secs
+  274 print "Starting "
+  275 print :start_reactor:time_left
+  276 print " "
+  277 print "secs, req "
+  278 print :calc_charge_req*retval
+  279 print "J"
+  280 print "\n"
+  281 label *label191
+  282 jump *label197 always
+  283 label *label192
+  284 jump *label195 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  285 label *label193
+  286 jump *label195 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  287 label *label194
+  288 control enabled :start_reactor:reactor false
+  289 print "ABANDON - battery crit"
+  290 print "\n"
+  291 set :start_reactor:supply_fuel false
+  292 jump *label196 always
+  293 label *label195
+  294 op idiv :start_reactor:mins :start_reactor:secs 6
+  295 op div :start_reactor:mins :start_reactor:mins 10
+  296 print "RUN "
+  297 print :start_reactor:mins
+  298 print " "
+  299 print "mins"
+  300 print "\n"
+  301 label *label196
+  302 label *label197
+  303 label *label198
+  304 label *label199
+  305 label *label200
+  306 label *label201
+  307 jump *label217 always
+  308 label *label202
+  309 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  310 op sub *tmp158 *tmp157 .PWR_ABORT
+  311 op div *tmp159 *tmp158 .PWR_REQ
+  312 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  313 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  314 op max :start_reactor:flow_units -0.1 *tmp161
+  315 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  316 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  317 jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  318 print "IDLE"
+  319 print "\n"
+  320 set :start_reactor:supply_fuel false
+  321 jump *label216 always
+  322 label *label203
+  323 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  324 jump *label204 greaterThanEq *tmp167 1
+  325 op idiv *tmp171 :start_reactor:flow_units 0.001
+  326 op div :start_reactor:flow *tmp171 10
+  327 op idiv *tmp174 :start_reactor:charge_units 0.001
+  328 op div :start_reactor:charge *tmp174 10
+  329 print "WAIT power. (%"
+  330 print :start_reactor:charge
+  331 print "J + %"
+  332 print :start_reactor:flow
+  333 print "W)"
+  334 print "\n"
+  335 set :start_reactor:supply_fuel false
+  336 jump *label215 always
+  337 label *label204
+  338 jump *label209 equal :start_reactor:fuel_on false
+  339 label *label205
+  340 jump *label209 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  341 label *label206
+  342 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  343 jump *label207 lessThanEq *tmp178 .FUEL_REQ
+  344 print "WAIT fuel"
+  345 print "\n"
+  346 jump *label208 always
+  347 label *label207
+  348 print "WAIT system fuel"
+  349 print "\n"
+  350 label *label208
+  351 jump *label214 always
+  352 label *label209
+  353 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  354 jump *label210 greaterThanEq :start_reactor:fuel_stored *tmp181
+  355 print "WAIT buffer fuel"
+  356 print "\n"
+  357 jump *label213 always
+  358 label *label210
+  359 jump *label211 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  360 print "WAIT cryo"
+  361 print "\n"
+  362 jump *label212 always
+  363 label *label211
+  364 print "STARTUP"
+  365 print "\n"
+  366 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  367 control enabled :start_reactor:reactor true
+  368 label *label212
+  369 label *label213
+  370 label *label214
+  371 label *label215
+  372 label *label216
+  373 label *label217
+  374 label *label218
+  375 sensor *tmp188 :start_reactor:reactor @enabled
+  376 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  377 set :start_reactor*retval :start_reactor:supply_fuel
+  378 jump *label219 always
+  379 label *label219
   380 set :fuel_1 :start_reactor*retval
   381 set :t_startup1 .RET_T_STARTUP
   382 label *label124

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   182 set :start_reactor:t_startup :t_startup1
   183 label *label174
   184 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  185 op sub *tmp104 @tick :t_startup1
   186 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  187 sensor :start_reactor:fuel reactor1 @blast-compound
   188 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  189 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  190 sensor :start_reactor:cryo reactor1 @cryofluid
+  191 sensor *tmp109 node1 @powerNetStored
   192 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  193 sensor *tmp111 node1 @powerNetIn
+  194 sensor *tmp112 node1 @powerNetOut
   195 op sub *tmp113 *tmp111 *tmp112
   196 op floor :start_reactor:surplus *tmp113
   197 op mul *tmp115 .AVG_SURPLUS 0.8
   198 op mul *tmp116 :start_reactor:surplus 0.2
   199 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  200 sensor :start_reactor:enabled reactor1 @enabled
   201 print "#"
-    * print :start_reactor:reactor_num
+  202 print 1
   203 print " "
   204 print "- "
-    * jump *label175 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  205 jump *label175 equal :emerg_shutdown false
+  206 control enabled reactor1 false
   207 print "emergency mode"
   208 print "\n"
   209 set :start_reactor:supply_fuel false
   210 jump *label218 always
   211 label *label175
   212 jump *label202 equal :start_reactor:enabled false
-    * jump *label176 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  213 jump *label176 greaterThanEq .REACTORS_DESIRED 1
+  214 control enabled reactor1 false
   215 print "STOP unwanted"
   216 print "\n"
   217 jump *label201 always
   218 label *label176
-    * jump *label179 lessThanEq :start_reactor:reactor_num 1
+  219 jump *label179 lessThanEq 1 1
   220 label *label177
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label179 greaterThanEq :start_reactor:fuel_stored *tmp128
+  221 op mul *tmp128 15 1
+  222 jump *label179 greaterThanEq :start_reactor:fuel_stored 15
   223 label *label178
-    * control enabled :start_reactor:reactor false
+  224 control enabled reactor1 false
   225 print "STOP system fuel low"
   226 print "\n"
   227 jump *label200 always
   228 label *label179
   229 jump *label180 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  230 control enabled reactor1 false
   231 print "STOP fuel low"
   232 print "\n"
   233 jump *label199 always
   234 label *label180
-    * jump *label181 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  235 jump *label181 greaterThan :start_reactor:cryo 1
+  236 control enabled reactor1 false
   237 print "STOP out of cryo"
   238 print "\n"
   239 jump *label198 always
 
   241 jump *label192 greaterThanEq :start_reactor:secs 30
   242 label *label182
   243 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  244 op sub *tmp94 @tick :t_startup1
   245 op idiv :calc_charge_req:secs *tmp94 60
   246 jump *label184 greaterThan :calc_charge_req:secs 30
   247 label *label183
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  248 sensor *tmp97 reactor1 @enabled
   249 jump *label185 notEqual *tmp97 false
   250 label *label184
   251 set :calc_charge_req*retval 0
 
   259 jump *label187 always
   260 label *label187
   261 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label190 greaterThanEq *tmp143 .PWR_ABORT
+  262 jump *label190 greaterThanEq *tmp143 5000
   263 label *label188
-    * jump *label190 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  264 jump *label190 greaterThanEq :start_reactor:surplus -500
   265 label *label189
-    * control enabled :start_reactor:reactor false
+  266 control enabled reactor1 false
   267 print "START FAIL battery"
   268 print "\n"
   269 set :start_reactor:supply_fuel false
 
   280 label *label191
   281 jump *label197 always
   282 label *label192
-    * jump *label195 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  283 jump *label195 greaterThanEq :start_reactor:charge 2000
   284 label *label193
-    * jump *label195 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  285 jump *label195 greaterThanEq :start_reactor:surplus -500
   286 label *label194
-    * control enabled :start_reactor:reactor false
+  287 control enabled reactor1 false
   288 print "ABANDON - battery crit"
   289 print "\n"
   290 set :start_reactor:supply_fuel false
 
   306 jump *label217 always
   307 label *label202
   308 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  309 op sub *tmp158 *tmp157 5000
+  310 op div *tmp159 *tmp158 23000
+  311 op mul :start_reactor:charge_units *tmp159 0.6
+  312 op div *tmp161 :start_reactor:surplus 2000
   313 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  314 op mul *tmp163 2 1
+  315 op add :start_reactor:cryo_req 3 2
+  316 jump *label203 greaterThanEq .REACTORS_DESIRED 1
   317 print "IDLE"
   318 print "\n"
   319 set :start_reactor:supply_fuel false
 
   334 set :start_reactor:supply_fuel false
   335 jump *label215 always
   336 label *label204
-    * jump *label209 equal :start_reactor:fuel_on false
+  337 jump *label209 equal :fuel_1 false
   338 label *label205
-    * jump *label209 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  339 jump *label209 greaterThanEq :start_reactor:fuel 10
   340 label *label206
   341 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label207 lessThanEq *tmp178 .FUEL_REQ
+  342 jump *label207 lessThanEq *tmp178 10
   343 print "WAIT fuel"
   344 print "\n"
   345 jump *label208 always
 
   349 label *label208
   350 jump *label214 always
   351 label *label209
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label210 greaterThanEq :start_reactor:fuel_stored *tmp181
+  352 op mul *tmp181 45 1
+  353 jump *label210 greaterThanEq :start_reactor:fuel_stored 45
   354 print "WAIT buffer fuel"
   355 print "\n"
   356 jump *label213 always
   357 label *label210
-    * jump *label211 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  358 jump *label211 greaterThanEq :start_reactor:cryo 5
   359 print "WAIT cryo"
   360 print "\n"
   361 jump *label212 always
   362 label *label211
   363 print "STARTUP"
   364 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  365 op add .START_POWER_REQ .START_POWER_REQ 23000
+  366 control enabled reactor1 true
   367 label *label212
   368 label *label213
   369 label *label214
 
   371 label *label216
   372 label *label217
   373 label *label218
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  374 sensor *tmp188 reactor1 @enabled
+  375 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
   376 set :start_reactor*retval :start_reactor:supply_fuel
   377 jump *label219 always
   378 label *label219
-    * set :fuel_1 :start_reactor*retval
+  379 set :fuel_1 :start_reactor:supply_fuel
   380 set :t_startup1 .RET_T_STARTUP
   381 label *label124
   382 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  383 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   384 control config unloader1 *tmp89
-    * select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  385 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   386 control config unloader2 *tmp93
   387 label *label125
   388 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   175 jump *label159 always
   176 label *label159
   177 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   178 label *label174
   179 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   180 op sub *tmp104 @tick :t_startup1
 
   303 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   304 op sub *tmp158 *tmp157 5000
   305 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  306 op div :start_reactor:charge_units *tmp158 38333.333333333336
   307 op div *tmp161 :start_reactor:surplus 2000
   308 op max :start_reactor:flow_units -0.1 *tmp161
   309 op mul *tmp163 2 1
 
   368 label *label218
   369 sensor *tmp188 reactor1 @enabled
   370 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   371 jump *label219 always
   372 label *label219
   373 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+146 instructions):
 
   384 set :start_reactor:emerg_shutdown :emerg_shutdown
   385 set :start_reactor:fuel_on :fuel_2
   386 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  387 label *label220
+  388 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  389 op sub *tmp104 @tick :start_reactor:t_startup
+  390 op idiv :start_reactor:secs *tmp104 60
+  391 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  392 set :start_reactor:supply_fuel true
+  393 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  394 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  395 sensor *tmp109 .NODE @powerNetStored
+  396 op floor :start_reactor:charge *tmp109
+  397 sensor *tmp111 .NODE @powerNetIn
+  398 sensor *tmp112 .NODE @powerNetOut
+  399 op sub *tmp113 *tmp111 *tmp112
+  400 op floor :start_reactor:surplus *tmp113
+  401 op mul *tmp115 .AVG_SURPLUS 0.8
+  402 op mul *tmp116 :start_reactor:surplus 0.2
+  403 op add .AVG_SURPLUS *tmp115 *tmp116
+  404 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  405 print "#"
+  406 print :start_reactor:reactor_num
+  407 print " "
+  408 print "- "
+  409 jump *label221 equal :start_reactor:emerg_shutdown false
+  410 control enabled :start_reactor:reactor false
+  411 print "emergency mode"
+  412 print "\n"
+  413 set :start_reactor:supply_fuel false
+  414 jump *label264 always
+  415 label *label221
+  416 jump *label248 equal :start_reactor:enabled false
+  417 jump *label222 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  418 control enabled :start_reactor:reactor false
+  419 print "STOP unwanted"
+  420 print "\n"
+  421 jump *label247 always
+  422 label *label222
+  423 jump *label225 lessThanEq :start_reactor:reactor_num 1
+  424 label *label223
+  425 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  426 jump *label225 greaterThanEq :start_reactor:fuel_stored *tmp128
+  427 label *label224
+  428 control enabled :start_reactor:reactor false
+  429 print "STOP system fuel low"
+  430 print "\n"
+  431 jump *label246 always
+  432 label *label225
+  433 jump *label226 greaterThan :start_reactor:fuel 1
+  434 control enabled :start_reactor:reactor false
+  435 print "STOP fuel low"
+  436 print "\n"
+  437 jump *label245 always
+  438 label *label226
+  439 jump *label227 greaterThan :start_reactor:cryo .CRYO_ABORT
+  440 control enabled :start_reactor:reactor false
+  441 print "STOP out of cryo"
+  442 print "\n"
+  443 jump *label244 always
+  444 label *label227
+  445 jump *label238 greaterThanEq :start_reactor:secs 30
+  446 label *label228
+  447 # "Function: def calc_charge_req(in reactor, in time)"
+  448 op sub *tmp94 @tick :start_reactor:t_startup
+  449 op idiv :calc_charge_req:secs *tmp94 60
+  450 jump *label230 greaterThan :calc_charge_req:secs 30
+  451 label *label229
+  452 sensor *tmp97 :start_reactor:reactor @enabled
+  453 jump *label231 notEqual *tmp97 false
+  454 label *label230
+  455 set :calc_charge_req*retval 0
+  456 jump *label233 always
+  457 label *label231
+  458 label *label232
+  459 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  460 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  461 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  462 set :calc_charge_req*retval :calc_charge_req:charge_req
+  463 jump *label233 always
+  464 label *label233
+  465 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  466 jump *label236 greaterThanEq *tmp143 .PWR_ABORT
+  467 label *label234
+  468 jump *label236 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  469 label *label235
+  470 control enabled :start_reactor:reactor false
+  471 print "START FAIL battery"
+  472 print "\n"
+  473 set :start_reactor:supply_fuel false
+  474 jump *label237 always
+  475 label *label236
+  476 op sub :start_reactor:time_left 30 :start_reactor:secs
+  477 print "Starting "
+  478 print :start_reactor:time_left
+  479 print " "
+  480 print "secs, req "
+  481 print :calc_charge_req*retval
+  482 print "J"
+  483 print "\n"
+  484 label *label237
+  485 jump *label243 always
+  486 label *label238
+  487 jump *label241 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  488 label *label239
+  489 jump *label241 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  490 label *label240
+  491 control enabled :start_reactor:reactor false
+  492 print "ABANDON - battery crit"
+  493 print "\n"
+  494 set :start_reactor:supply_fuel false
+  495 jump *label242 always
+  496 label *label241
+  497 op idiv :start_reactor:mins :start_reactor:secs 6
+  498 op div :start_reactor:mins :start_reactor:mins 10
+  499 print "RUN "
+  500 print :start_reactor:mins
+  501 print " "
+  502 print "mins"
+  503 print "\n"
+  504 label *label242
+  505 label *label243
+  506 label *label244
+  507 label *label245
+  508 label *label246
+  509 label *label247
+  510 jump *label263 always
+  511 label *label248
+  512 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  513 op sub *tmp158 *tmp157 .PWR_ABORT
+  514 op div *tmp159 *tmp158 .PWR_REQ
+  515 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  516 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  517 op max :start_reactor:flow_units -0.1 *tmp161
+  518 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  519 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  520 jump *label249 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  521 print "IDLE"
+  522 print "\n"
+  523 set :start_reactor:supply_fuel false
+  524 jump *label262 always
+  525 label *label249
+  526 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  527 jump *label250 greaterThanEq *tmp167 1
+  528 op idiv *tmp171 :start_reactor:flow_units 0.001
+  529 op div :start_reactor:flow *tmp171 10
+  530 op idiv *tmp174 :start_reactor:charge_units 0.001
+  531 op div :start_reactor:charge *tmp174 10
+  532 print "WAIT power. (%"
+  533 print :start_reactor:charge
+  534 print "J + %"
+  535 print :start_reactor:flow
+  536 print "W)"
+  537 print "\n"
+  538 set :start_reactor:supply_fuel false
+  539 jump *label261 always
+  540 label *label250
+  541 jump *label255 equal :start_reactor:fuel_on false
+  542 label *label251
+  543 jump *label255 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  544 label *label252
+  545 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  546 jump *label253 lessThanEq *tmp178 .FUEL_REQ
+  547 print "WAIT fuel"
+  548 print "\n"
+  549 jump *label254 always
+  550 label *label253
+  551 print "WAIT system fuel"
+  552 print "\n"
+  553 label *label254
+  554 jump *label260 always
+  555 label *label255
+  556 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  557 jump *label256 greaterThanEq :start_reactor:fuel_stored *tmp181
+  558 print "WAIT buffer fuel"
+  559 print "\n"
+  560 jump *label259 always
+  561 label *label256
+  562 jump *label257 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  563 print "WAIT cryo"
+  564 print "\n"
+  565 jump *label258 always
+  566 label *label257
+  567 print "STARTUP"
+  568 print "\n"
+  569 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  570 control enabled :start_reactor:reactor true
+  571 label *label258
+  572 label *label259
+  573 label *label260
+  574 label *label261
+  575 label *label262
+  576 label *label263
+  577 label *label264
+  578 sensor *tmp188 :start_reactor:reactor @enabled
+  579 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  580 set :start_reactor*retval :start_reactor:supply_fuel
+  581 jump *label265 always
+  582 label *label265
   583 set :fuel_2 :start_reactor*retval
   584 set :t_startup2 .RET_T_STARTUP
   585 label *label126

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   386 set :start_reactor:t_startup :t_startup2
   387 label *label220
   388 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  389 op sub *tmp104 @tick :t_startup2
   390 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  391 sensor :start_reactor:fuel reactor2 @blast-compound
   392 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  393 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  394 sensor :start_reactor:cryo reactor2 @cryofluid
+  395 sensor *tmp109 node1 @powerNetStored
   396 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  397 sensor *tmp111 node1 @powerNetIn
+  398 sensor *tmp112 node1 @powerNetOut
   399 op sub *tmp113 *tmp111 *tmp112
   400 op floor :start_reactor:surplus *tmp113
   401 op mul *tmp115 .AVG_SURPLUS 0.8
   402 op mul *tmp116 :start_reactor:surplus 0.2
   403 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  404 sensor :start_reactor:enabled reactor2 @enabled
   405 print "#"
-    * print :start_reactor:reactor_num
+  406 print 2
   407 print " "
   408 print "- "
-    * jump *label221 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  409 jump *label221 equal :emerg_shutdown false
+  410 control enabled reactor2 false
   411 print "emergency mode"
   412 print "\n"
   413 set :start_reactor:supply_fuel false
   414 jump *label264 always
   415 label *label221
   416 jump *label248 equal :start_reactor:enabled false
-    * jump *label222 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  417 jump *label222 greaterThanEq .REACTORS_DESIRED 2
+  418 control enabled reactor2 false
   419 print "STOP unwanted"
   420 print "\n"
   421 jump *label247 always
   422 label *label222
-    * jump *label225 lessThanEq :start_reactor:reactor_num 1
+  423 jump *label225 lessThanEq 2 1
   424 label *label223
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label225 greaterThanEq :start_reactor:fuel_stored *tmp128
+  425 op mul *tmp128 15 2
+  426 jump *label225 greaterThanEq :start_reactor:fuel_stored 30
   427 label *label224
-    * control enabled :start_reactor:reactor false
+  428 control enabled reactor2 false
   429 print "STOP system fuel low"
   430 print "\n"
   431 jump *label246 always
   432 label *label225
   433 jump *label226 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  434 control enabled reactor2 false
   435 print "STOP fuel low"
   436 print "\n"
   437 jump *label245 always
   438 label *label226
-    * jump *label227 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  439 jump *label227 greaterThan :start_reactor:cryo 1
+  440 control enabled reactor2 false
   441 print "STOP out of cryo"
   442 print "\n"
   443 jump *label244 always
 
   445 jump *label238 greaterThanEq :start_reactor:secs 30
   446 label *label228
   447 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  448 op sub *tmp94 @tick :t_startup2
   449 op idiv :calc_charge_req:secs *tmp94 60
   450 jump *label230 greaterThan :calc_charge_req:secs 30
   451 label *label229
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  452 sensor *tmp97 reactor2 @enabled
   453 jump *label231 notEqual *tmp97 false
   454 label *label230
   455 set :calc_charge_req*retval 0
 
   463 jump *label233 always
   464 label *label233
   465 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label236 greaterThanEq *tmp143 .PWR_ABORT
+  466 jump *label236 greaterThanEq *tmp143 5000
   467 label *label234
-    * jump *label236 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  468 jump *label236 greaterThanEq :start_reactor:surplus -500
   469 label *label235
-    * control enabled :start_reactor:reactor false
+  470 control enabled reactor2 false
   471 print "START FAIL battery"
   472 print "\n"
   473 set :start_reactor:supply_fuel false
 
   484 label *label237
   485 jump *label243 always
   486 label *label238
-    * jump *label241 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  487 jump *label241 greaterThanEq :start_reactor:charge 2000
   488 label *label239
-    * jump *label241 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  489 jump *label241 greaterThanEq :start_reactor:surplus -500
   490 label *label240
-    * control enabled :start_reactor:reactor false
+  491 control enabled reactor2 false
   492 print "ABANDON - battery crit"
   493 print "\n"
   494 set :start_reactor:supply_fuel false
 
   510 jump *label263 always
   511 label *label248
   512 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  513 op sub *tmp158 *tmp157 5000
+  514 op div *tmp159 *tmp158 23000
+  515 op mul :start_reactor:charge_units *tmp159 0.6
+  516 op div *tmp161 :start_reactor:surplus 2000
   517 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label249 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  518 op mul *tmp163 2 2
+  519 op add :start_reactor:cryo_req 3 4
+  520 jump *label249 greaterThanEq .REACTORS_DESIRED 2
   521 print "IDLE"
   522 print "\n"
   523 set :start_reactor:supply_fuel false
 
   538 set :start_reactor:supply_fuel false
   539 jump *label261 always
   540 label *label250
-    * jump *label255 equal :start_reactor:fuel_on false
+  541 jump *label255 equal :fuel_2 false
   542 label *label251
-    * jump *label255 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  543 jump *label255 greaterThanEq :start_reactor:fuel 10
   544 label *label252
   545 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label253 lessThanEq *tmp178 .FUEL_REQ
+  546 jump *label253 lessThanEq *tmp178 10
   547 print "WAIT fuel"
   548 print "\n"
   549 jump *label254 always
 
   553 label *label254
   554 jump *label260 always
   555 label *label255
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label256 greaterThanEq :start_reactor:fuel_stored *tmp181
+  556 op mul *tmp181 45 2
+  557 jump *label256 greaterThanEq :start_reactor:fuel_stored 90
   558 print "WAIT buffer fuel"
   559 print "\n"
   560 jump *label259 always
   561 label *label256
-    * jump *label257 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  562 jump *label257 greaterThanEq :start_reactor:cryo 7
   563 print "WAIT cryo"
   564 print "\n"
   565 jump *label258 always
   566 label *label257
   567 print "STARTUP"
   568 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  569 op add .START_POWER_REQ .START_POWER_REQ 23000
+  570 control enabled reactor2 true
   571 label *label258
   572 label *label259
   573 label *label260
 
   575 label *label262
   576 label *label263
   577 label *label264
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  578 sensor *tmp188 reactor2 @enabled
+  579 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
   580 set :start_reactor*retval :start_reactor:supply_fuel
   581 jump *label265 always
   582 label *label265
-    * set :fuel_2 :start_reactor*retval
+  583 set :fuel_2 :start_reactor:supply_fuel
   584 set :t_startup2 .RET_T_STARTUP
   585 label *label126
   586 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  587 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   588 control config unloader3 *tmp89
-    * select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  589 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   590 control config unloader4 *tmp93
   591 label *label127
   592 label *label170

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   379 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   380 control config unloader2 *tmp93
   381 label *label125
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   382 label *label220
   383 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   384 op sub *tmp104 @tick :t_startup2
 
   507 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   508 op sub *tmp158 *tmp157 5000
   509 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  510 op div :start_reactor:charge_units *tmp158 38333.333333333336
   511 op div *tmp161 :start_reactor:surplus 2000
   512 op max :start_reactor:flow_units -0.1 *tmp161
   513 op mul *tmp163 2 2
 
   572 label *label264
   573 sensor *tmp188 reactor2 @enabled
   574 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   575 jump *label265 always
   576 label *label265
   577 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+146 instructions):
 
   617 set :start_reactor:emerg_shutdown :emerg_shutdown
   618 set :start_reactor:fuel_on :fuel_3
   619 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  620 label *label266
+  621 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  622 op sub *tmp104 @tick :start_reactor:t_startup
+  623 op idiv :start_reactor:secs *tmp104 60
+  624 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  625 set :start_reactor:supply_fuel true
+  626 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  627 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  628 sensor *tmp109 .NODE @powerNetStored
+  629 op floor :start_reactor:charge *tmp109
+  630 sensor *tmp111 .NODE @powerNetIn
+  631 sensor *tmp112 .NODE @powerNetOut
+  632 op sub *tmp113 *tmp111 *tmp112
+  633 op floor :start_reactor:surplus *tmp113
+  634 op mul *tmp115 .AVG_SURPLUS 0.8
+  635 op mul *tmp116 :start_reactor:surplus 0.2
+  636 op add .AVG_SURPLUS *tmp115 *tmp116
+  637 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  638 print "#"
+  639 print :start_reactor:reactor_num
+  640 print " "
+  641 print "- "
+  642 jump *label267 equal :start_reactor:emerg_shutdown false
+  643 control enabled :start_reactor:reactor false
+  644 print "emergency mode"
+  645 print "\n"
+  646 set :start_reactor:supply_fuel false
+  647 jump *label310 always
+  648 label *label267
+  649 jump *label294 equal :start_reactor:enabled false
+  650 jump *label268 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  651 control enabled :start_reactor:reactor false
+  652 print "STOP unwanted"
+  653 print "\n"
+  654 jump *label293 always
+  655 label *label268
+  656 jump *label271 lessThanEq :start_reactor:reactor_num 1
+  657 label *label269
+  658 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  659 jump *label271 greaterThanEq :start_reactor:fuel_stored *tmp128
+  660 label *label270
+  661 control enabled :start_reactor:reactor false
+  662 print "STOP system fuel low"
+  663 print "\n"
+  664 jump *label292 always
+  665 label *label271
+  666 jump *label272 greaterThan :start_reactor:fuel 1
+  667 control enabled :start_reactor:reactor false
+  668 print "STOP fuel low"
+  669 print "\n"
+  670 jump *label291 always
+  671 label *label272
+  672 jump *label273 greaterThan :start_reactor:cryo .CRYO_ABORT
+  673 control enabled :start_reactor:reactor false
+  674 print "STOP out of cryo"
+  675 print "\n"
+  676 jump *label290 always
+  677 label *label273
+  678 jump *label284 greaterThanEq :start_reactor:secs 30
+  679 label *label274
+  680 # "Function: def calc_charge_req(in reactor, in time)"
+  681 op sub *tmp94 @tick :start_reactor:t_startup
+  682 op idiv :calc_charge_req:secs *tmp94 60
+  683 jump *label276 greaterThan :calc_charge_req:secs 30
+  684 label *label275
+  685 sensor *tmp97 :start_reactor:reactor @enabled
+  686 jump *label277 notEqual *tmp97 false
+  687 label *label276
+  688 set :calc_charge_req*retval 0
+  689 jump *label279 always
+  690 label *label277
+  691 label *label278
+  692 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  693 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  694 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  695 set :calc_charge_req*retval :calc_charge_req:charge_req
+  696 jump *label279 always
+  697 label *label279
+  698 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  699 jump *label282 greaterThanEq *tmp143 .PWR_ABORT
+  700 label *label280
+  701 jump *label282 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  702 label *label281
+  703 control enabled :start_reactor:reactor false
+  704 print "START FAIL battery"
+  705 print "\n"
+  706 set :start_reactor:supply_fuel false
+  707 jump *label283 always
+  708 label *label282
+  709 op sub :start_reactor:time_left 30 :start_reactor:secs
+  710 print "Starting "
+  711 print :start_reactor:time_left
+  712 print " "
+  713 print "secs, req "
+  714 print :calc_charge_req*retval
+  715 print "J"
+  716 print "\n"
+  717 label *label283
+  718 jump *label289 always
+  719 label *label284
+  720 jump *label287 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  721 label *label285
+  722 jump *label287 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  723 label *label286
+  724 control enabled :start_reactor:reactor false
+  725 print "ABANDON - battery crit"
+  726 print "\n"
+  727 set :start_reactor:supply_fuel false
+  728 jump *label288 always
+  729 label *label287
+  730 op idiv :start_reactor:mins :start_reactor:secs 6
+  731 op div :start_reactor:mins :start_reactor:mins 10
+  732 print "RUN "
+  733 print :start_reactor:mins
+  734 print " "
+  735 print "mins"
+  736 print "\n"
+  737 label *label288
+  738 label *label289
+  739 label *label290
+  740 label *label291
+  741 label *label292
+  742 label *label293
+  743 jump *label309 always
+  744 label *label294
+  745 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  746 op sub *tmp158 *tmp157 .PWR_ABORT
+  747 op div *tmp159 *tmp158 .PWR_REQ
+  748 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  749 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  750 op max :start_reactor:flow_units -0.1 *tmp161
+  751 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  752 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  753 jump *label295 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  754 print "IDLE"
+  755 print "\n"
+  756 set :start_reactor:supply_fuel false
+  757 jump *label308 always
+  758 label *label295
+  759 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  760 jump *label296 greaterThanEq *tmp167 1
+  761 op idiv *tmp171 :start_reactor:flow_units 0.001
+  762 op div :start_reactor:flow *tmp171 10
+  763 op idiv *tmp174 :start_reactor:charge_units 0.001
+  764 op div :start_reactor:charge *tmp174 10
+  765 print "WAIT power. (%"
+  766 print :start_reactor:charge
+  767 print "J + %"
+  768 print :start_reactor:flow
+  769 print "W)"
+  770 print "\n"
+  771 set :start_reactor:supply_fuel false
+  772 jump *label307 always
+  773 label *label296
+  774 jump *label301 equal :start_reactor:fuel_on false
+  775 label *label297
+  776 jump *label301 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  777 label *label298
+  778 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  779 jump *label299 lessThanEq *tmp178 .FUEL_REQ
+  780 print "WAIT fuel"
+  781 print "\n"
+  782 jump *label300 always
+  783 label *label299
+  784 print "WAIT system fuel"
+  785 print "\n"
+  786 label *label300
+  787 jump *label306 always
+  788 label *label301
+  789 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  790 jump *label302 greaterThanEq :start_reactor:fuel_stored *tmp181
+  791 print "WAIT buffer fuel"
+  792 print "\n"
+  793 jump *label305 always
+  794 label *label302
+  795 jump *label303 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  796 print "WAIT cryo"
+  797 print "\n"
+  798 jump *label304 always
+  799 label *label303
+  800 print "STARTUP"
+  801 print "\n"
+  802 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  803 control enabled :start_reactor:reactor true
+  804 label *label304
+  805 label *label305
+  806 label *label306
+  807 label *label307
+  808 label *label308
+  809 label *label309
+  810 label *label310
+  811 sensor *tmp188 :start_reactor:reactor @enabled
+  812 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  813 set :start_reactor*retval :start_reactor:supply_fuel
+  814 jump *label311 always
+  815 label *label311
   816 set :fuel_3 :start_reactor*retval
   817 set :t_startup3 .RET_T_STARTUP
   818 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   619 set :start_reactor:t_startup :t_startup3
   620 label *label266
   621 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  622 op sub *tmp104 @tick :t_startup3
   623 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  624 sensor :start_reactor:fuel reactor3 @blast-compound
   625 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  626 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  627 sensor :start_reactor:cryo reactor3 @cryofluid
+  628 sensor *tmp109 node1 @powerNetStored
   629 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  630 sensor *tmp111 node1 @powerNetIn
+  631 sensor *tmp112 node1 @powerNetOut
   632 op sub *tmp113 *tmp111 *tmp112
   633 op floor :start_reactor:surplus *tmp113
   634 op mul *tmp115 .AVG_SURPLUS 0.8
   635 op mul *tmp116 :start_reactor:surplus 0.2
   636 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  637 sensor :start_reactor:enabled reactor3 @enabled
   638 print "#"
-    * print :start_reactor:reactor_num
+  639 print 3
   640 print " "
   641 print "- "
-    * jump *label267 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  642 jump *label267 equal :emerg_shutdown false
+  643 control enabled reactor3 false
   644 print "emergency mode"
   645 print "\n"
   646 set :start_reactor:supply_fuel false
   647 jump *label310 always
   648 label *label267
   649 jump *label294 equal :start_reactor:enabled false
-    * jump *label268 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  650 jump *label268 greaterThanEq .REACTORS_DESIRED 3
+  651 control enabled reactor3 false
   652 print "STOP unwanted"
   653 print "\n"
   654 jump *label293 always
   655 label *label268
-    * jump *label271 lessThanEq :start_reactor:reactor_num 1
+  656 jump *label271 lessThanEq 3 1
   657 label *label269
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label271 greaterThanEq :start_reactor:fuel_stored *tmp128
+  658 op mul *tmp128 15 3
+  659 jump *label271 greaterThanEq :start_reactor:fuel_stored 45
   660 label *label270
-    * control enabled :start_reactor:reactor false
+  661 control enabled reactor3 false
   662 print "STOP system fuel low"
   663 print "\n"
   664 jump *label292 always
   665 label *label271
   666 jump *label272 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  667 control enabled reactor3 false
   668 print "STOP fuel low"
   669 print "\n"
   670 jump *label291 always
   671 label *label272
-    * jump *label273 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  672 jump *label273 greaterThan :start_reactor:cryo 1
+  673 control enabled reactor3 false
   674 print "STOP out of cryo"
   675 print "\n"
   676 jump *label290 always
 
   678 jump *label284 greaterThanEq :start_reactor:secs 30
   679 label *label274
   680 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  681 op sub *tmp94 @tick :t_startup3
   682 op idiv :calc_charge_req:secs *tmp94 60
   683 jump *label276 greaterThan :calc_charge_req:secs 30
   684 label *label275
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  685 sensor *tmp97 reactor3 @enabled
   686 jump *label277 notEqual *tmp97 false
   687 label *label276
   688 set :calc_charge_req*retval 0
 
   696 jump *label279 always
   697 label *label279
   698 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label282 greaterThanEq *tmp143 .PWR_ABORT
+  699 jump *label282 greaterThanEq *tmp143 5000
   700 label *label280
-    * jump *label282 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  701 jump *label282 greaterThanEq :start_reactor:surplus -500
   702 label *label281
-    * control enabled :start_reactor:reactor false
+  703 control enabled reactor3 false
   704 print "START FAIL battery"
   705 print "\n"
   706 set :start_reactor:supply_fuel false
 
   717 label *label283
   718 jump *label289 always
   719 label *label284
-    * jump *label287 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  720 jump *label287 greaterThanEq :start_reactor:charge 2000
   721 label *label285
-    * jump *label287 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  722 jump *label287 greaterThanEq :start_reactor:surplus -500
   723 label *label286
-    * control enabled :start_reactor:reactor false
+  724 control enabled reactor3 false
   725 print "ABANDON - battery crit"
   726 print "\n"
   727 set :start_reactor:supply_fuel false
 
   743 jump *label309 always
   744 label *label294
   745 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  746 op sub *tmp158 *tmp157 5000
+  747 op div *tmp159 *tmp158 23000
+  748 op mul :start_reactor:charge_units *tmp159 0.6
+  749 op div *tmp161 :start_reactor:surplus 2000
   750 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label295 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  751 op mul *tmp163 2 3
+  752 op add :start_reactor:cryo_req 3 6
+  753 jump *label295 greaterThanEq .REACTORS_DESIRED 3
   754 print "IDLE"
   755 print "\n"
   756 set :start_reactor:supply_fuel false
 
   771 set :start_reactor:supply_fuel false
   772 jump *label307 always
   773 label *label296
-    * jump *label301 equal :start_reactor:fuel_on false
+  774 jump *label301 equal :fuel_3 false
   775 label *label297
-    * jump *label301 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  776 jump *label301 greaterThanEq :start_reactor:fuel 10
   777 label *label298
   778 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label299 lessThanEq *tmp178 .FUEL_REQ
+  779 jump *label299 lessThanEq *tmp178 10
   780 print "WAIT fuel"
   781 print "\n"
   782 jump *label300 always
 
   786 label *label300
   787 jump *label306 always
   788 label *label301
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label302 greaterThanEq :start_reactor:fuel_stored *tmp181
+  789 op mul *tmp181 45 3
+  790 jump *label302 greaterThanEq :start_reactor:fuel_stored 135
   791 print "WAIT buffer fuel"
   792 print "\n"
   793 jump *label305 always
   794 label *label302
-    * jump *label303 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  795 jump *label303 greaterThanEq :start_reactor:cryo 9
   796 print "WAIT cryo"
   797 print "\n"
   798 jump *label304 always
   799 label *label303
   800 print "STARTUP"
   801 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  802 op add .START_POWER_REQ .START_POWER_REQ 23000
+  803 control enabled reactor3 true
   804 label *label304
   805 label *label305
   806 label *label306
 
   808 label *label308
   809 label *label309
   810 label *label310
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  811 sensor *tmp188 reactor3 @enabled
+  812 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
   813 set :start_reactor*retval :start_reactor:supply_fuel
   814 jump *label311 always
   815 label *label311
-    * set :fuel_3 :start_reactor*retval
+  816 set :fuel_3 :start_reactor:supply_fuel
   817 set :t_startup3 .RET_T_STARTUP
   818 set :start_reactor:reactor reactor4
   819 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   612 label *label172
   613 label *label173
   614 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   615 label *label266
   616 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   617 op sub *tmp104 @tick :t_startup3
 
   740 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   741 op sub *tmp158 *tmp157 5000
   742 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  743 op div :start_reactor:charge_units *tmp158 38333.333333333336
   744 op div *tmp161 :start_reactor:surplus 2000
   745 op max :start_reactor:flow_units -0.1 *tmp161
   746 op mul *tmp163 2 3
 
   805 label *label310
   806 sensor *tmp188 reactor3 @enabled
   807 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   808 jump *label311 always
   809 label *label311
   810 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Jump Normalization, pass 2, iteration 1 (-2 instructions):
 
   211 print "\n"
   212 jump *label201 always
   213 label *label176
-    * jump *label179 lessThanEq 1 1
+  214 jump *label179 always
   215 label *label177
   216 op mul *tmp128 15 1
   217 jump *label179 greaterThanEq :start_reactor:fuel_stored 15
 
   415 print "\n"
   416 jump *label247 always
   417 label *label222
-    * jump *label225 lessThanEq 2 1
   418 label *label223
   419 op mul *tmp128 15 2
   420 jump *label225 greaterThanEq :start_reactor:fuel_stored 30
 
   647 print "\n"
   648 jump *label293 always
   649 label *label268
-    * jump *label271 lessThanEq 3 1
   650 label *label269
   651 op mul *tmp128 15 3
   652 jump *label271 greaterThanEq :start_reactor:fuel_stored 45

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-20 instructions):
 
    56 control enabled projector1 false
    57 control enabled projector2 false
    58 set :check_radar*retval false
-    * jump *label169 always
    59 label *label168
    60 label *label169
    61 # "Function: def check_manual_shutdown()"
 
    71 label *label11
    72 label *label12
    73 set *tmp8 false
-    * jump *label10 always
    74 label *label10
    75 op or :emerg_shutdown :check_radar*retval *tmp8
    76 label *label130
 
    90 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
    91 op idiv :calc_charge_req:charge_req *tmp101 0.04
    92 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label135 always
    93 label *label135
    94 set .START_POWER_REQ :calc_charge_req*retval
    95 label *label136
 
   109 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   110 op idiv :calc_charge_req:charge_req *tmp101 0.04
   111 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label141 always
   112 label *label141
   113 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   114 label *label142
 
   128 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   129 op idiv :calc_charge_req:charge_req *tmp101 0.04
   130 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label147 always
   131 label *label147
   132 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   133 label *label148
 
   147 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   148 op idiv :calc_charge_req:charge_req *tmp101 0.04
   149 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label153 always
   150 label *label153
   151 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   152 label *label154
 
   166 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   167 op idiv :calc_charge_req:charge_req *tmp101 0.04
   168 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label159 always
   169 label *label159
   170 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   171 label *label174
 
   244 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   245 op idiv :calc_charge_req:charge_req *tmp101 0.04
   246 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label187 always
   247 label *label187
   248 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   249 jump *label190 greaterThanEq *tmp143 5000
 
   360 label *label218
   361 sensor *tmp188 reactor1 @enabled
   362 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
-    * jump *label219 always
   363 label *label219
   364 set :fuel_1 :start_reactor:supply_fuel
   365 set :t_startup1 .RET_T_STARTUP
 
   445 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   446 op idiv :calc_charge_req:charge_req *tmp101 0.04
   447 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label233 always
   448 label *label233
   449 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   450 jump *label236 greaterThanEq *tmp143 5000
 
   561 label *label264
   562 sensor *tmp188 reactor2 @enabled
   563 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
-    * jump *label265 always
   564 label *label265
   565 set :fuel_2 :start_reactor:supply_fuel
   566 set :t_startup2 .RET_T_STARTUP
 
   596 control enabled projector1 false
   597 control enabled projector2 false
   598 set :check_radar*retval false
-    * jump *label173 always
   599 label *label172
   600 label *label173
   601 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   674 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   675 op idiv :calc_charge_req:charge_req *tmp101 0.04
   676 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label279 always
   677 label *label279
   678 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   679 jump *label282 greaterThanEq *tmp143 5000
 
   790 label *label310
   791 sensor *tmp188 reactor3 @enabled
   792 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
-    * jump *label311 always
   793 label *label311
   794 set :fuel_3 :start_reactor:supply_fuel
   795 set :t_startup3 .RET_T_STARTUP
 
   889 label *label34
   890 label *label27
   891 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label25 always
   892 label *label25
   893 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   894 control config unloader7 *tmp46
 
   914 # "Function: def kilo(in val)"
   915 op idiv *tmp85 .AVG_SURPLUS 100
   916 op div :kilo*retval *tmp85 10
-    * jump *label119 always
   917 label *label119
   918 set :surplus :kilo*retval
   919 sensor :kilo:val node1 @powerNetStored
 
   921 # "Function: def kilo(in val)"
   922 op idiv *tmp85 :kilo:val 100
   923 op div :kilo*retval *tmp85 10
-    * jump *label121 always
   924 label *label121
   925 set :charge :kilo*retval
   926 jump *label42 lessThanEq .START_POWER_REQ 0
 
   928 # "Function: def kilo(in val)"
   929 op idiv *tmp85 .START_POWER_REQ 100
   930 op div :kilo*retval *tmp85 10
-    * jump *label123 always
   931 label *label123
   932 print "Req "
   933 print :kilo*retval
 
  1061 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
  1062 op idiv :calc_charge_req:charge_req *tmp101 0.04
  1063 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label165 always
  1064 label *label165
  1065 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
  1066 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
 
  1178 sensor *tmp188 :start_reactor:reactor @enabled
  1179 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
  1180 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label68 always
  1181 label *label68
  1182 return :start_reactor*retaddr
  1183 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-2 instructions):
 
   913 label *label118
   914 # "Function: def kilo(in val)"
   915 op idiv *tmp85 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp85 10
+  916 op div :surplus *tmp85 10
   917 label *label119
-    * set :surplus :kilo*retval
   918 sensor :kilo:val node1 @powerNetStored
   919 label *label120
   920 # "Function: def kilo(in val)"
 
   989 op sub *tmp104 @tick :start_reactor:t_startup
   990 op idiv :start_reactor:secs *tmp104 60
   991 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  992 set :start_reactor*retval true
   993 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   994 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   995 sensor *tmp109 .NODE @powerNetStored
 
  1010 control enabled :start_reactor:reactor false
  1011 print "emergency mode"
  1012 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1013 set :start_reactor*retval false
  1014 jump *label70 always
  1015 label *label69
  1016 jump *label71 equal :start_reactor:enabled false
 
  1069 control enabled :start_reactor:reactor false
  1070 print "START FAIL battery"
  1071 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1072 set :start_reactor*retval false
  1073 jump *label86 always
  1074 label *label85
  1075 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1090 control enabled :start_reactor:reactor false
  1091 print "ABANDON - battery crit"
  1092 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1093 set :start_reactor*retval false
  1094 jump *label90 always
  1095 label *label89
  1096 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1119 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1120 print "IDLE"
  1121 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1122 set :start_reactor*retval false
  1123 jump *label94 always
  1124 label *label93
  1125 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
 
  1134 print :start_reactor:flow
  1135 print "W)"
  1136 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1137 set :start_reactor*retval false
  1138 jump *label96 always
  1139 label *label95
  1140 jump *label97 equal :start_reactor:fuel_on false
 
  1176 label *label70
  1177 sensor *tmp188 :start_reactor:reactor @enabled
  1178 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1179 label *label68
  1180 return :start_reactor*retaddr
  1181 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   810 set :fuel_5 :start_reactor*retval
   811 set :t_startup5 .RET_T_STARTUP
   812 set *tmp26 true
-    * jump *label16 notEqual :fuel_3 false
+  813 jump *label16 notEqual :start_reactor:supply_fuel false
   814 label *label19
   815 jump *label16 notEqual :fuel_4 false
   816 label *label17

Modifications by Jumps phase, Jump Normalization, pass 4, iteration 1:
 
    31 label *label7
    32 set .CONTAINER vault1
    33 set .NODE node1
-    * label *label166
    34 # "Function: def check_radar(in unit)"
    35 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    36 jump *label167 equal :check_radar:enemy_found null
 
    59 label *label169
    60 # "Function: def check_manual_shutdown()"
    61 jump *label11 equal switch1 null
-    * label *label14
    62 sensor *tmp10 switch1 @enabled
    63 jump *label11 notEqual *tmp10 false
-    * label *label13
    64 print "User has disabled emergency switch"
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
    68 label *label11
-    * label *label12
    69 set *tmp8 false
    70 label *label10
    71 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label130
    72 # "Function: def calc_charge_req(in reactor, in time)"
    73 op sub *tmp94 @tick :t_startup1
    74 op idiv :calc_charge_req:secs *tmp94 60
    75 jump *label132 greaterThan :calc_charge_req:secs 30
-    * label *label131
    76 sensor *tmp97 reactor1 @enabled
    77 jump *label133 notEqual *tmp97 false
    78 label *label132
    79 set :calc_charge_req*retval 0
    80 jump *label135 always
    81 label *label133
-    * label *label134
    82 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    83 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
    84 op idiv :calc_charge_req:charge_req *tmp101 0.04
    85 set :calc_charge_req*retval :calc_charge_req:charge_req
    86 label *label135
    87 set .START_POWER_REQ :calc_charge_req*retval
-    * label *label136
    88 # "Function: def calc_charge_req(in reactor, in time)"
    89 op sub *tmp94 @tick :t_startup2
    90 op idiv :calc_charge_req:secs *tmp94 60
    91 jump *label138 greaterThan :calc_charge_req:secs 30
-    * label *label137
    92 sensor *tmp97 reactor2 @enabled
    93 jump *label139 notEqual *tmp97 false
    94 label *label138
    95 set :calc_charge_req*retval 0
    96 jump *label141 always
    97 label *label139
-    * label *label140
    98 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    99 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   100 op idiv :calc_charge_req:charge_req *tmp101 0.04
   101 set :calc_charge_req*retval :calc_charge_req:charge_req
   102 label *label141
   103 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label142
   104 # "Function: def calc_charge_req(in reactor, in time)"
   105 op sub *tmp94 @tick :t_startup3
   106 op idiv :calc_charge_req:secs *tmp94 60
   107 jump *label144 greaterThan :calc_charge_req:secs 30
-    * label *label143
   108 sensor *tmp97 reactor3 @enabled
   109 jump *label145 notEqual *tmp97 false
   110 label *label144
   111 set :calc_charge_req*retval 0
   112 jump *label147 always
   113 label *label145
-    * label *label146
   114 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   115 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   116 op idiv :calc_charge_req:charge_req *tmp101 0.04
   117 set :calc_charge_req*retval :calc_charge_req:charge_req
   118 label *label147
   119 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label148
   120 # "Function: def calc_charge_req(in reactor, in time)"
   121 op sub *tmp94 @tick :t_startup4
   122 op idiv :calc_charge_req:secs *tmp94 60
   123 jump *label150 greaterThan :calc_charge_req:secs 30
-    * label *label149
   124 sensor *tmp97 reactor4 @enabled
   125 jump *label151 notEqual *tmp97 false
   126 label *label150
   127 set :calc_charge_req*retval 0
   128 jump *label153 always
   129 label *label151
-    * label *label152
   130 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   131 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   132 op idiv :calc_charge_req:charge_req *tmp101 0.04
   133 set :calc_charge_req*retval :calc_charge_req:charge_req
   134 label *label153
   135 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label154
   136 # "Function: def calc_charge_req(in reactor, in time)"
   137 op sub *tmp94 @tick :t_startup5
   138 op idiv :calc_charge_req:secs *tmp94 60
   139 jump *label156 greaterThan :calc_charge_req:secs 30
-    * label *label155
   140 sensor *tmp97 reactor5 @enabled
   141 jump *label157 notEqual *tmp97 false
   142 label *label156
   143 set :calc_charge_req*retval 0
   144 jump *label159 always
   145 label *label157
-    * label *label158
   146 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   147 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   148 op idiv :calc_charge_req:charge_req *tmp101 0.04
   149 set :calc_charge_req*retval :calc_charge_req:charge_req
   150 label *label159
   151 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label174
   152 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   153 op sub *tmp104 @tick :t_startup1
   154 op idiv :start_reactor:secs *tmp104 60
 
   185 jump *label201 always
   186 label *label176
   187 jump *label179 always
-    * label *label177
   188 op mul *tmp128 15 1
   189 jump *label179 greaterThanEq :start_reactor:fuel_stored 15
-    * label *label178
   190 control enabled reactor1 false
   191 print "STOP system fuel low"
   192 print "\n"
 
   205 jump *label198 always
   206 label *label181
   207 jump *label192 greaterThanEq :start_reactor:secs 30
-    * label *label182
   208 # "Function: def calc_charge_req(in reactor, in time)"
   209 op sub *tmp94 @tick :t_startup1
   210 op idiv :calc_charge_req:secs *tmp94 60
   211 jump *label184 greaterThan :calc_charge_req:secs 30
-    * label *label183
   212 sensor *tmp97 reactor1 @enabled
   213 jump *label185 notEqual *tmp97 false
   214 label *label184
   215 set :calc_charge_req*retval 0
   216 jump *label187 always
   217 label *label185
-    * label *label186
   218 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   219 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   220 op idiv :calc_charge_req:charge_req *tmp101 0.04
 
   222 label *label187
   223 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   224 jump *label190 greaterThanEq *tmp143 5000
-    * label *label188
   225 jump *label190 greaterThanEq :start_reactor:surplus -500
-    * label *label189
   226 control enabled reactor1 false
   227 print "START FAIL battery"
   228 print "\n"
 
   241 jump *label197 always
   242 label *label192
   243 jump *label195 greaterThanEq :start_reactor:charge 2000
-    * label *label193
   244 jump *label195 greaterThanEq :start_reactor:surplus -500
-    * label *label194
   245 control enabled reactor1 false
   246 print "ABANDON - battery crit"
   247 print "\n"
 
   293 jump *label215 always
   294 label *label204
   295 jump *label209 equal :fuel_1 false
-    * label *label205
   296 jump *label209 greaterThanEq :start_reactor:fuel 10
-    * label *label206
   297 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   298 jump *label207 lessThanEq *tmp178 10
   299 print "WAIT fuel"
 
   329 label *label218
   330 sensor *tmp188 reactor1 @enabled
   331 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
-    * label *label219
   332 set :fuel_1 :start_reactor:supply_fuel
   333 set :t_startup1 .RET_T_STARTUP
-    * label *label124
   334 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   335 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   336 control config unloader1 *tmp89
   337 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   338 control config unloader2 *tmp93
-    * label *label125
-    * label *label220
   339 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   340 op sub *tmp104 @tick :t_startup2
   341 op idiv :start_reactor:secs *tmp104 60
 
   371 print "\n"
   372 jump *label247 always
   373 label *label222
-    * label *label223
   374 op mul *tmp128 15 2
   375 jump *label225 greaterThanEq :start_reactor:fuel_stored 30
-    * label *label224
   376 control enabled reactor2 false
   377 print "STOP system fuel low"
   378 print "\n"
 
   391 jump *label244 always
   392 label *label227
   393 jump *label238 greaterThanEq :start_reactor:secs 30
-    * label *label228
   394 # "Function: def calc_charge_req(in reactor, in time)"
   395 op sub *tmp94 @tick :t_startup2
   396 op idiv :calc_charge_req:secs *tmp94 60
   397 jump *label230 greaterThan :calc_charge_req:secs 30
-    * label *label229
   398 sensor *tmp97 reactor2 @enabled
   399 jump *label231 notEqual *tmp97 false
   400 label *label230
   401 set :calc_charge_req*retval 0
   402 jump *label233 always
   403 label *label231
-    * label *label232
   404 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   405 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   406 op idiv :calc_charge_req:charge_req *tmp101 0.04
 
   408 label *label233
   409 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   410 jump *label236 greaterThanEq *tmp143 5000
-    * label *label234
   411 jump *label236 greaterThanEq :start_reactor:surplus -500
-    * label *label235
   412 control enabled reactor2 false
   413 print "START FAIL battery"
   414 print "\n"
 
   427 jump *label243 always
   428 label *label238
   429 jump *label241 greaterThanEq :start_reactor:charge 2000
-    * label *label239
   430 jump *label241 greaterThanEq :start_reactor:surplus -500
-    * label *label240
   431 control enabled reactor2 false
   432 print "ABANDON - battery crit"
   433 print "\n"
 
   479 jump *label261 always
   480 label *label250
   481 jump *label255 equal :fuel_2 false
-    * label *label251
   482 jump *label255 greaterThanEq :start_reactor:fuel 10
-    * label *label252
   483 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   484 jump *label253 lessThanEq *tmp178 10
   485 print "WAIT fuel"
 
   515 label *label264
   516 sensor *tmp188 reactor2 @enabled
   517 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
-    * label *label265
   518 set :fuel_2 :start_reactor:supply_fuel
   519 set :t_startup2 .RET_T_STARTUP
-    * label *label126
   520 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   521 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   522 control config unloader3 *tmp89
   523 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   524 control config unloader4 *tmp93
-    * label *label127
-    * label *label170
   525 # "Function: def check_radar(in unit)"
   526 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   527 jump *label171 equal :check_radar:enemy_found null
 
   549 label *label172
   550 label *label173
   551 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label266
   552 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   553 op sub *tmp104 @tick :t_startup3
   554 op idiv :start_reactor:secs *tmp104 60
 
   584 print "\n"
   585 jump *label293 always
   586 label *label268
-    * label *label269
   587 op mul *tmp128 15 3
   588 jump *label271 greaterThanEq :start_reactor:fuel_stored 45
-    * label *label270
   589 control enabled reactor3 false
   590 print "STOP system fuel low"
   591 print "\n"
 
   604 jump *label290 always
   605 label *label273
   606 jump *label284 greaterThanEq :start_reactor:secs 30
-    * label *label274
   607 # "Function: def calc_charge_req(in reactor, in time)"
   608 op sub *tmp94 @tick :t_startup3
   609 op idiv :calc_charge_req:secs *tmp94 60
   610 jump *label276 greaterThan :calc_charge_req:secs 30
-    * label *label275
   611 sensor *tmp97 reactor3 @enabled
   612 jump *label277 notEqual *tmp97 false
   613 label *label276
   614 set :calc_charge_req*retval 0
   615 jump *label279 always
   616 label *label277
-    * label *label278
   617 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   618 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   619 op idiv :calc_charge_req:charge_req *tmp101 0.04
 
   621 label *label279
   622 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   623 jump *label282 greaterThanEq *tmp143 5000
-    * label *label280
   624 jump *label282 greaterThanEq :start_reactor:surplus -500
-    * label *label281
   625 control enabled reactor3 false
   626 print "START FAIL battery"
   627 print "\n"
 
   640 jump *label289 always
   641 label *label284
   642 jump *label287 greaterThanEq :start_reactor:charge 2000
-    * label *label285
   643 jump *label287 greaterThanEq :start_reactor:surplus -500
-    * label *label286
   644 control enabled reactor3 false
   645 print "ABANDON - battery crit"
   646 print "\n"
 
   692 jump *label307 always
   693 label *label296
   694 jump *label301 equal :fuel_3 false
-    * label *label297
   695 jump *label301 greaterThanEq :start_reactor:fuel 10
-    * label *label298
   696 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   697 jump *label299 lessThanEq *tmp178 10
   698 print "WAIT fuel"
 
   728 label *label310
   729 sensor *tmp188 reactor3 @enabled
   730 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
-    * label *label311
   731 set :fuel_3 :start_reactor:supply_fuel
   732 set :t_startup3 .RET_T_STARTUP
   733 set :start_reactor:reactor reactor4
 
   748 set :t_startup5 .RET_T_STARTUP
   749 set *tmp26 true
   750 jump *label16 notEqual :start_reactor:supply_fuel false
-    * label *label19
   751 jump *label16 notEqual :fuel_4 false
-    * label *label17
-    * label *label15
-    * label *label113
   752 select *tmp26 equal :start_reactor*retval false false true
   753 label *label16
-    * label *label128
   754 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   755 select *tmp89 notEqual *tmp26 false @blast-compound @scrap
   756 control config unloader5 *tmp89
   757 select *tmp93 equal *tmp26 false @blast-compound @scrap
   758 control config unloader6 *tmp93
-    * label *label129
   759 set *tmp28 true
   760 jump *label21 notEqual :fuel_1 false
-    * label *label24
   761 jump *label21 notEqual :fuel_2 false
-    * label *label22
-    * label *label20
-    * label *label116
   762 select *tmp28 equal *tmp26 false false true
   763 label *label21
   764 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   770 op floor :throttle_blast:surplus *tmp34
   771 sensor :throttle_blast:fuel_stored vault1 @blast-compound
   772 jump *label29 greaterThanEq :throttle_blast:charge 5000
-    * label *label30
   773 jump *label28 lessThan :throttle_blast:surplus -500
   774 label *label29
   775 jump *label26 equal :emerg_shutdown false
 
   815 label *label34
   816 label *label27
   817 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label25
   818 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   819 control config unloader7 *tmp46
   820 # "Function: def diff_generators()"
 
   822 sensor *tmp49 node1 @powerNetCapacity
   823 op div :diff_generators:stored_pc *tmp48 *tmp49
   824 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
-    * label *label41
   825 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * label *label40
   826 print "Differential now idle."
   827 print "\n"
   828 control enabled generator1 false
 
   832 control enabled generator1 true
   833 control enabled generator2 true
   834 label *label39
-    * label *label37
-    * label *label118
   835 # "Function: def kilo(in val)"
   836 op idiv *tmp85 .AVG_SURPLUS 100
   837 op div :surplus *tmp85 10
-    * label *label119
   838 sensor :kilo:val node1 @powerNetStored
-    * label *label120
   839 # "Function: def kilo(in val)"
   840 op idiv *tmp85 :kilo:val 100
   841 op div :kilo*retval *tmp85 10
-    * label *label121
   842 set :charge :kilo*retval
   843 jump *label42 lessThanEq .START_POWER_REQ 0
-    * label *label122
   844 # "Function: def kilo(in val)"
   845 op idiv *tmp85 .START_POWER_REQ 100
   846 op div :kilo*retval *tmp85 10
-    * label *label123
   847 print "Req "
   848 print :kilo*retval
   849 print "kJ / "
 
   865 sensor *tmp66 node1 @powerNetCapacity
   866 op div :update_reactors_desired:stored *tmp65 *tmp66
   867 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
-    * label *label48
   868 jump *label45 lessThanEq .AVG_SURPLUS 16500
-    * label *label47
   869 jump *label49 lessThanEq .REACTORS_DESIRED 2
   870 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   871 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   872 label *label49
-    * label *label50
   873 label *label45
-    * label *label46
   874 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
-    * label *label54
   875 jump *label51 greaterThanEq .AVG_SURPLUS 8000
-    * label *label53
   876 op sub *tmp78 .AVG_SURPLUS 10000
   877 op idiv *tmp79 *tmp78 6500
   878 op max :update_reactors_desired:needed 1 *tmp79
   879 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   880 op min .REACTORS_DESIRED 5 *tmp81
   881 label *label51
-    * label *label52
-    * label *label44
   882 label *label43
   883 jump *label55 equal .REACTORS_DESIRED 5
   884 print "Require only "
 
   886 print "/5 reactors."
   887 print "\n"
   888 label *label55
-    * label *label56
   889 printflush message1
-    * label *label8
   890 jump *label7 always
-    * label *label9
   891 end
   892 label *label3
   893 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
 
   926 jump *label74 always
   927 label *label73
   928 jump *label75 lessThanEq :start_reactor:reactor_num 1
-    * label *label78
   929 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   930 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * label *label77
   931 control enabled :start_reactor:reactor false
   932 print "STOP system fuel low"
   933 print "\n"
 
   946 jump *label82 always
   947 label *label81
   948 jump *label83 greaterThanEq :start_reactor:secs 30
-    * label *label160
   949 # "Function: def calc_charge_req(in reactor, in time)"
   950 op sub *tmp94 @tick :start_reactor:t_startup
   951 op idiv :calc_charge_req:secs *tmp94 60
   952 jump *label162 greaterThan :calc_charge_req:secs 30
-    * label *label161
   953 sensor *tmp97 :start_reactor:reactor @enabled
   954 jump *label163 notEqual *tmp97 false
   955 label *label162
   956 set :calc_charge_req*retval 0
   957 jump *label165 always
   958 label *label163
-    * label *label164
   959 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   960 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   961 op idiv :calc_charge_req:charge_req *tmp101 0.04
 
   963 label *label165
   964 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   965 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
-    * label *label88
   966 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label87
   967 control enabled :start_reactor:reactor false
   968 print "START FAIL battery"
   969 print "\n"
 
   982 jump *label84 always
   983 label *label83
   984 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * label *label92
   985 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label91
   986 control enabled :start_reactor:reactor false
   987 print "ABANDON - battery crit"
   988 print "\n"
 
  1034 jump *label96 always
  1035 label *label95
  1036 jump *label97 equal :start_reactor:fuel_on false
-    * label *label100
  1037 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * label *label99
  1038 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
  1039 jump *label101 lessThanEq *tmp178 .FUEL_REQ
  1040 print "WAIT fuel"
 
  1070 label *label70
  1071 sensor *tmp188 :start_reactor:reactor @enabled
  1072 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
-    * label *label68
  1073 return :start_reactor*retaddr
  1074 end

Modifications by Jumps phase, Jump Threading, pass 4, iteration 1:
 
   178 jump *label218 always
   179 label *label175
   180 jump *label202 equal :start_reactor:enabled false
-    * jump *label176 greaterThanEq .REACTORS_DESIRED 1
+  181 jump *label179 greaterThanEq .REACTORS_DESIRED 1
   182 control enabled reactor1 false
   183 print "STOP unwanted"
   184 print "\n"
-    * jump *label201 always
+  185 jump *label217 always
   186 label *label176
   187 jump *label179 always
   188 op mul *tmp128 15 1
 
   190 control enabled reactor1 false
   191 print "STOP system fuel low"
   192 print "\n"
-    * jump *label200 always
+  193 jump *label217 always
   194 label *label179
   195 jump *label180 greaterThan :start_reactor:fuel 1
   196 control enabled reactor1 false
   197 print "STOP fuel low"
   198 print "\n"
-    * jump *label199 always
+  199 jump *label217 always
   200 label *label180
   201 jump *label181 greaterThan :start_reactor:cryo 1
   202 control enabled reactor1 false
   203 print "STOP out of cryo"
   204 print "\n"
-    * jump *label198 always
+  205 jump *label217 always
   206 label *label181
   207 jump *label192 greaterThanEq :start_reactor:secs 30
   208 # "Function: def calc_charge_req(in reactor, in time)"
 
   227 print "START FAIL battery"
   228 print "\n"
   229 set :start_reactor:supply_fuel false
-    * jump *label191 always
+  230 jump *label217 always
   231 label *label190
   232 op sub :start_reactor:time_left 30 :start_reactor:secs
   233 print "Starting "
 
   238 print "J"
   239 print "\n"
   240 label *label191
-    * jump *label197 always
+  241 jump *label217 always
   242 label *label192
   243 jump *label195 greaterThanEq :start_reactor:charge 2000
   244 jump *label195 greaterThanEq :start_reactor:surplus -500
 
   246 print "ABANDON - battery crit"
   247 print "\n"
   248 set :start_reactor:supply_fuel false
-    * jump *label196 always
+  249 jump *label217 always
   250 label *label195
   251 op idiv :start_reactor:mins :start_reactor:secs 6
   252 op div :start_reactor:mins :start_reactor:mins 10
 
   298 jump *label207 lessThanEq *tmp178 10
   299 print "WAIT fuel"
   300 print "\n"
-    * jump *label208 always
+  301 jump *label214 always
   302 label *label207
   303 print "WAIT system fuel"
   304 print "\n"
 
   369 control enabled reactor2 false
   370 print "STOP unwanted"
   371 print "\n"
-    * jump *label247 always
+  372 jump *label263 always
   373 label *label222
   374 op mul *tmp128 15 2
   375 jump *label225 greaterThanEq :start_reactor:fuel_stored 30
   376 control enabled reactor2 false
   377 print "STOP system fuel low"
   378 print "\n"
-    * jump *label246 always
+  379 jump *label263 always
   380 label *label225
   381 jump *label226 greaterThan :start_reactor:fuel 1
   382 control enabled reactor2 false
   383 print "STOP fuel low"
   384 print "\n"
-    * jump *label245 always
+  385 jump *label263 always
   386 label *label226
   387 jump *label227 greaterThan :start_reactor:cryo 1
   388 control enabled reactor2 false
   389 print "STOP out of cryo"
   390 print "\n"
-    * jump *label244 always
+  391 jump *label263 always
   392 label *label227
   393 jump *label238 greaterThanEq :start_reactor:secs 30
   394 # "Function: def calc_charge_req(in reactor, in time)"
 
   413 print "START FAIL battery"
   414 print "\n"
   415 set :start_reactor:supply_fuel false
-    * jump *label237 always
+  416 jump *label263 always
   417 label *label236
   418 op sub :start_reactor:time_left 30 :start_reactor:secs
   419 print "Starting "
 
   424 print "J"
   425 print "\n"
   426 label *label237
-    * jump *label243 always
+  427 jump *label263 always
   428 label *label238
   429 jump *label241 greaterThanEq :start_reactor:charge 2000
   430 jump *label241 greaterThanEq :start_reactor:surplus -500
 
   432 print "ABANDON - battery crit"
   433 print "\n"
   434 set :start_reactor:supply_fuel false
-    * jump *label242 always
+  435 jump *label263 always
   436 label *label241
   437 op idiv :start_reactor:mins :start_reactor:secs 6
   438 op div :start_reactor:mins :start_reactor:mins 10
 
   484 jump *label253 lessThanEq *tmp178 10
   485 print "WAIT fuel"
   486 print "\n"
-    * jump *label254 always
+  487 jump *label260 always
   488 label *label253
   489 print "WAIT system fuel"
   490 print "\n"
 
   582 control enabled reactor3 false
   583 print "STOP unwanted"
   584 print "\n"
-    * jump *label293 always
+  585 jump *label309 always
   586 label *label268
   587 op mul *tmp128 15 3
   588 jump *label271 greaterThanEq :start_reactor:fuel_stored 45
   589 control enabled reactor3 false
   590 print "STOP system fuel low"
   591 print "\n"
-    * jump *label292 always
+  592 jump *label309 always
   593 label *label271
   594 jump *label272 greaterThan :start_reactor:fuel 1
   595 control enabled reactor3 false
   596 print "STOP fuel low"
   597 print "\n"
-    * jump *label291 always
+  598 jump *label309 always
   599 label *label272
   600 jump *label273 greaterThan :start_reactor:cryo 1
   601 control enabled reactor3 false
   602 print "STOP out of cryo"
   603 print "\n"
-    * jump *label290 always
+  604 jump *label309 always
   605 label *label273
   606 jump *label284 greaterThanEq :start_reactor:secs 30
   607 # "Function: def calc_charge_req(in reactor, in time)"
 
   626 print "START FAIL battery"
   627 print "\n"
   628 set :start_reactor:supply_fuel false
-    * jump *label283 always
+  629 jump *label309 always
   630 label *label282
   631 op sub :start_reactor:time_left 30 :start_reactor:secs
   632 print "Starting "
 
   637 print "J"
   638 print "\n"
   639 label *label283
-    * jump *label289 always
+  640 jump *label309 always
   641 label *label284
   642 jump *label287 greaterThanEq :start_reactor:charge 2000
   643 jump *label287 greaterThanEq :start_reactor:surplus -500
 
   645 print "ABANDON - battery crit"
   646 print "\n"
   647 set :start_reactor:supply_fuel false
-    * jump *label288 always
+  648 jump *label309 always
   649 label *label287
   650 op idiv :start_reactor:mins :start_reactor:secs 6
   651 op div :start_reactor:mins :start_reactor:mins 10
 
   697 jump *label299 lessThanEq *tmp178 10
   698 print "WAIT fuel"
   699 print "\n"
-    * jump *label300 always
+  700 jump *label306 always
   701 label *label299
   702 print "WAIT system fuel"
   703 print "\n"
 
   785 jump *label31 equal :emerg_shutdown false
   786 print " Enemies detected."
   787 print "\n"
-    * jump *label32 always
+  788 jump *label27 always
   789 label *label31
   790 print " Critical power."
   791 print "\n"
 
   923 control enabled :start_reactor:reactor false
   924 print "STOP unwanted"
   925 print "\n"
-    * jump *label74 always
+  926 jump *label72 always
   927 label *label73
   928 jump *label75 lessThanEq :start_reactor:reactor_num 1
   929 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   931 control enabled :start_reactor:reactor false
   932 print "STOP system fuel low"
   933 print "\n"
-    * jump *label76 always
+  934 jump *label72 always
   935 label *label75
   936 jump *label79 greaterThan :start_reactor:fuel 1
   937 control enabled :start_reactor:reactor false
   938 print "STOP fuel low"
   939 print "\n"
-    * jump *label80 always
+  940 jump *label72 always
   941 label *label79
   942 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   943 control enabled :start_reactor:reactor false
   944 print "STOP out of cryo"
   945 print "\n"
-    * jump *label82 always
+  946 jump *label72 always
   947 label *label81
   948 jump *label83 greaterThanEq :start_reactor:secs 30
   949 # "Function: def calc_charge_req(in reactor, in time)"
 
   968 print "START FAIL battery"
   969 print "\n"
   970 set :start_reactor*retval false
-    * jump *label86 always
+  971 jump *label72 always
   972 label *label85
   973 op sub :start_reactor:time_left 30 :start_reactor:secs
   974 print "Starting "
 
   979 print "J"
   980 print "\n"
   981 label *label86
-    * jump *label84 always
+  982 jump *label72 always
   983 label *label83
   984 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   985 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   987 print "ABANDON - battery crit"
   988 print "\n"
   989 set :start_reactor*retval false
-    * jump *label90 always
+  990 jump *label72 always
   991 label *label89
   992 op idiv :start_reactor:mins :start_reactor:secs 6
   993 op div :start_reactor:mins :start_reactor:mins 10
 
  1039 jump *label101 lessThanEq *tmp178 .FUEL_REQ
  1040 print "WAIT fuel"
  1041 print "\n"
-    * jump *label102 always
+ 1042 jump *label98 always
  1043 label *label101
  1044 print "WAIT system fuel"
  1045 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-11 instructions):
 
    50 control enabled reactor5 false
    51 set :check_radar*retval true
    52 jump *label169 always
-    * jump *label168 always
    53 label *label167
    54 control enabled projector1 false
    55 control enabled projector2 false
 
   182 print "STOP unwanted"
   183 print "\n"
   184 jump *label217 always
-    * label *label176
-    * jump *label179 always
-    * op mul *tmp128 15 1
-    * jump *label179 greaterThanEq :start_reactor:fuel_stored 15
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label217 always
   185 label *label179
   186 jump *label180 greaterThan :start_reactor:fuel 1
   187 control enabled reactor1 false
 
   228 print :calc_charge_req*retval
   229 print "J"
   230 print "\n"
-    * label *label191
   231 jump *label217 always
   232 label *label192
   233 jump *label195 greaterThanEq :start_reactor:charge 2000
 
   245 print " "
   246 print "mins"
   247 print "\n"
-    * label *label196
-    * label *label197
-    * label *label198
-    * label *label199
-    * label *label200
-    * label *label201
   248 jump *label217 always
   249 label *label202
   250 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   286 label *label207
   287 print "WAIT system fuel"
   288 print "\n"
-    * label *label208
   289 jump *label214 always
   290 label *label209
   291 op mul *tmp181 45 1
 
   406 print :calc_charge_req*retval
   407 print "J"
   408 print "\n"
-    * label *label237
   409 jump *label263 always
   410 label *label238
   411 jump *label241 greaterThanEq :start_reactor:charge 2000
 
   423 print " "
   424 print "mins"
   425 print "\n"
-    * label *label242
-    * label *label243
-    * label *label244
-    * label *label245
-    * label *label246
-    * label *label247
   426 jump *label263 always
   427 label *label248
   428 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   464 label *label253
   465 print "WAIT system fuel"
   466 print "\n"
-    * label *label254
   467 jump *label260 always
   468 label *label255
   469 op mul *tmp181 45 2
 
   516 control enabled reactor5 false
   517 set :check_radar*retval true
   518 jump *label173 always
-    * jump *label172 always
   519 label *label171
   520 control enabled projector1 false
   521 control enabled projector2 false
 
   610 print :calc_charge_req*retval
   611 print "J"
   612 print "\n"
-    * label *label283
   613 jump *label309 always
   614 label *label284
   615 jump *label287 greaterThanEq :start_reactor:charge 2000
 
   627 print " "
   628 print "mins"
   629 print "\n"
-    * label *label288
-    * label *label289
-    * label *label290
-    * label *label291
-    * label *label292
-    * label *label293
   630 jump *label309 always
   631 label *label294
   632 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   668 label *label299
   669 print "WAIT system fuel"
   670 print "\n"
-    * label *label300
   671 jump *label306 always
   672 label *label301
   673 op mul *tmp181 45 3
 
   755 label *label31
   756 print " Critical power."
   757 print "\n"
-    * label *label32
   758 jump *label27 always
   759 label *label26
   760 jump *label33 notEqual *tmp28 false
 
   853 label *label55
   854 printflush message1
   855 jump *label7 always
-    * end
   856 label *label3
   857 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   858 op sub *tmp104 @tick :start_reactor:t_startup
 
   942 print :calc_charge_req*retval
   943 print "J"
   944 print "\n"
-    * label *label86
   945 jump *label72 always
   946 label *label83
   947 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
 
   959 print " "
   960 print "mins"
   961 print "\n"
-    * label *label90
-    * label *label84
-    * label *label82
-    * label *label80
-    * label *label76
-    * label *label74
   962 jump *label72 always
   963 label *label71
   964 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
  1000 label *label101
  1001 print "WAIT system fuel"
  1002 print "\n"
-    * label *label102
  1003 jump *label98 always
  1004 label *label97
  1005 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1027 sensor *tmp188 :start_reactor:reactor @enabled
  1028 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
  1029 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 4, iteration 1:
 
    54 control enabled projector1 false
    55 control enabled projector2 false
    56 set :check_radar*retval false
-    * label *label168
    57 label *label169
    58 # "Function: def check_manual_shutdown()"
    59 jump *label11 equal switch1 null
 
   519 control enabled projector1 false
   520 control enabled projector2 false
   521 set :check_radar*retval false
-    * label *label172
   522 label *label173
   523 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   524 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    59 jump *label11 equal switch1 null
    60 sensor *tmp10 switch1 @enabled
    61 jump *label11 notEqual *tmp10 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   62 print "User has disabled emergency switch\n"
    63 set *tmp8 true
    64 jump *label10 always
    65 label *label11
 
   163 op mul *tmp116 :start_reactor:surplus 0.2
   164 op add .AVG_SURPLUS *tmp115 *tmp116
   165 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  166 print "#1 - "
   167 jump *label175 equal :emerg_shutdown false
   168 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  169 print "emergency mode\n"
   170 set :start_reactor:supply_fuel false
   171 jump *label218 always
   172 label *label175
   173 jump *label202 equal :start_reactor:enabled false
   174 jump *label179 greaterThanEq .REACTORS_DESIRED 1
   175 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  176 print "STOP unwanted\n"
   177 jump *label217 always
   178 label *label179
   179 jump *label180 greaterThan :start_reactor:fuel 1
   180 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  181 print "STOP fuel low\n"
   182 jump *label217 always
   183 label *label180
   184 jump *label181 greaterThan :start_reactor:cryo 1
   185 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  186 print "STOP out of cryo\n"
   187 jump *label217 always
   188 label *label181
   189 jump *label192 greaterThanEq :start_reactor:secs 30
 
   206 jump *label190 greaterThanEq *tmp143 5000
   207 jump *label190 greaterThanEq :start_reactor:surplus -500
   208 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  209 print "START FAIL battery\n"
   210 set :start_reactor:supply_fuel false
   211 jump *label217 always
   212 label *label190
   213 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  214 print "Starting {0} secs, req {0}J\n"
+  215 format :start_reactor:time_left
+  216 format :calc_charge_req*retval
   217 jump *label217 always
   218 label *label192
   219 jump *label195 greaterThanEq :start_reactor:charge 2000
   220 jump *label195 greaterThanEq :start_reactor:surplus -500
   221 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  222 print "ABANDON - battery crit\n"
   223 set :start_reactor:supply_fuel false
   224 jump *label217 always
   225 label *label195
   226 op idiv :start_reactor:mins :start_reactor:secs 6
   227 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  228 print "RUN {0} mins\n"
+  229 format :start_reactor:mins
   230 jump *label217 always
   231 label *label202
   232 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   238 op mul *tmp163 2 1
   239 op add :start_reactor:cryo_req 3 2
   240 jump *label203 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  241 print "IDLE\n"
   242 set :start_reactor:supply_fuel false
   243 jump *label216 always
   244 label *label203
 
   248 op div :start_reactor:flow *tmp171 10
   249 op idiv *tmp174 :start_reactor:charge_units 0.001
   250 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  251 print "WAIT power. (%{0}J + %{0}W)\n"
+  252 format :start_reactor:charge
+  253 format :start_reactor:flow
   254 set :start_reactor:supply_fuel false
   255 jump *label215 always
   256 label *label204
 
   258 jump *label209 greaterThanEq :start_reactor:fuel 10
   259 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   260 jump *label207 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  261 print "WAIT fuel\n"
   262 jump *label214 always
   263 label *label207
-    * print "WAIT system fuel"
-    * print "\n"
+  264 print "WAIT system fuel\n"
   265 jump *label214 always
   266 label *label209
   267 op mul *tmp181 45 1
   268 jump *label210 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  269 print "WAIT buffer fuel\n"
   270 jump *label213 always
   271 label *label210
   272 jump *label211 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  273 print "WAIT cryo\n"
   274 jump *label212 always
   275 label *label211
-    * print "STARTUP"
-    * print "\n"
+  276 print "STARTUP\n"
   277 op add .START_POWER_REQ .START_POWER_REQ 23000
   278 control enabled reactor1 true
   279 label *label212
 
   309 op mul *tmp116 :start_reactor:surplus 0.2
   310 op add .AVG_SURPLUS *tmp115 *tmp116
   311 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  312 print "#2 - "
   313 jump *label221 equal :emerg_shutdown false
   314 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  315 print "emergency mode\n"
   316 set :start_reactor:supply_fuel false
   317 jump *label264 always
   318 label *label221
   319 jump *label248 equal :start_reactor:enabled false
   320 jump *label222 greaterThanEq .REACTORS_DESIRED 2
   321 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  322 print "STOP unwanted\n"
   323 jump *label263 always
   324 label *label222
   325 op mul *tmp128 15 2
   326 jump *label225 greaterThanEq :start_reactor:fuel_stored 30
   327 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  328 print "STOP system fuel low\n"
   329 jump *label263 always
   330 label *label225
   331 jump *label226 greaterThan :start_reactor:fuel 1
   332 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  333 print "STOP fuel low\n"
   334 jump *label263 always
   335 label *label226
   336 jump *label227 greaterThan :start_reactor:cryo 1
   337 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  338 print "STOP out of cryo\n"
   339 jump *label263 always
   340 label *label227
   341 jump *label238 greaterThanEq :start_reactor:secs 30
 
   358 jump *label236 greaterThanEq *tmp143 5000
   359 jump *label236 greaterThanEq :start_reactor:surplus -500
   360 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  361 print "START FAIL battery\n"
   362 set :start_reactor:supply_fuel false
   363 jump *label263 always
   364 label *label236
   365 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  366 print "Starting {0} secs, req {0}J\n"
+  367 format :start_reactor:time_left
+  368 format :calc_charge_req*retval
   369 jump *label263 always
   370 label *label238
   371 jump *label241 greaterThanEq :start_reactor:charge 2000
   372 jump *label241 greaterThanEq :start_reactor:surplus -500
   373 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  374 print "ABANDON - battery crit\n"
   375 set :start_reactor:supply_fuel false
   376 jump *label263 always
   377 label *label241
   378 op idiv :start_reactor:mins :start_reactor:secs 6
   379 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  380 print "RUN {0} mins\n"
+  381 format :start_reactor:mins
   382 jump *label263 always
   383 label *label248
   384 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   390 op mul *tmp163 2 2
   391 op add :start_reactor:cryo_req 3 4
   392 jump *label249 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  393 print "IDLE\n"
   394 set :start_reactor:supply_fuel false
   395 jump *label262 always
   396 label *label249
 
   400 op div :start_reactor:flow *tmp171 10
   401 op idiv *tmp174 :start_reactor:charge_units 0.001
   402 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  403 print "WAIT power. (%{0}J + %{0}W)\n"
+  404 format :start_reactor:charge
+  405 format :start_reactor:flow
   406 set :start_reactor:supply_fuel false
   407 jump *label261 always
   408 label *label250
 
   410 jump *label255 greaterThanEq :start_reactor:fuel 10
   411 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   412 jump *label253 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  413 print "WAIT fuel\n"
   414 jump *label260 always
   415 label *label253
-    * print "WAIT system fuel"
-    * print "\n"
+  416 print "WAIT system fuel\n"
   417 jump *label260 always
   418 label *label255
   419 op mul *tmp181 45 2
   420 jump *label256 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  421 print "WAIT buffer fuel\n"
   422 jump *label259 always
   423 label *label256
   424 jump *label257 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  425 print "WAIT cryo\n"
   426 jump *label258 always
   427 label *label257
-    * print "STARTUP"
-    * print "\n"
+  428 print "STARTUP\n"
   429 op add .START_POWER_REQ .START_POWER_REQ 23000
   430 control enabled reactor2 true
   431 label *label258
 
   486 op mul *tmp116 :start_reactor:surplus 0.2
   487 op add .AVG_SURPLUS *tmp115 *tmp116
   488 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  489 print "#3 - "
   490 jump *label267 equal :emerg_shutdown false
   491 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  492 print "emergency mode\n"
   493 set :start_reactor:supply_fuel false
   494 jump *label310 always
   495 label *label267
   496 jump *label294 equal :start_reactor:enabled false
   497 jump *label268 greaterThanEq .REACTORS_DESIRED 3
   498 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  499 print "STOP unwanted\n"
   500 jump *label309 always
   501 label *label268
   502 op mul *tmp128 15 3
   503 jump *label271 greaterThanEq :start_reactor:fuel_stored 45
   504 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  505 print "STOP system fuel low\n"
   506 jump *label309 always
   507 label *label271
   508 jump *label272 greaterThan :start_reactor:fuel 1
   509 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  510 print "STOP fuel low\n"
   511 jump *label309 always
   512 label *label272
   513 jump *label273 greaterThan :start_reactor:cryo 1
   514 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  515 print "STOP out of cryo\n"
   516 jump *label309 always
   517 label *label273
   518 jump *label284 greaterThanEq :start_reactor:secs 30
 
   535 jump *label282 greaterThanEq *tmp143 5000
   536 jump *label282 greaterThanEq :start_reactor:surplus -500
   537 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  538 print "START FAIL battery\n"
   539 set :start_reactor:supply_fuel false
   540 jump *label309 always
   541 label *label282
   542 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  543 print "Starting {0} secs, req {0}J\n"
+  544 format :start_reactor:time_left
+  545 format :calc_charge_req*retval
   546 jump *label309 always
   547 label *label284
   548 jump *label287 greaterThanEq :start_reactor:charge 2000
   549 jump *label287 greaterThanEq :start_reactor:surplus -500
   550 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  551 print "ABANDON - battery crit\n"
   552 set :start_reactor:supply_fuel false
   553 jump *label309 always
   554 label *label287
   555 op idiv :start_reactor:mins :start_reactor:secs 6
   556 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  557 print "RUN {0} mins\n"
+  558 format :start_reactor:mins
   559 jump *label309 always
   560 label *label294
   561 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   567 op mul *tmp163 2 3
   568 op add :start_reactor:cryo_req 3 6
   569 jump *label295 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  570 print "IDLE\n"
   571 set :start_reactor:supply_fuel false
   572 jump *label308 always
   573 label *label295
 
   577 op div :start_reactor:flow *tmp171 10
   578 op idiv *tmp174 :start_reactor:charge_units 0.001
   579 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  580 print "WAIT power. (%{0}J + %{0}W)\n"
+  581 format :start_reactor:charge
+  582 format :start_reactor:flow
   583 set :start_reactor:supply_fuel false
   584 jump *label307 always
   585 label *label296
 
   587 jump *label301 greaterThanEq :start_reactor:fuel 10
   588 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   589 jump *label299 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  590 print "WAIT fuel\n"
   591 jump *label306 always
   592 label *label299
-    * print "WAIT system fuel"
-    * print "\n"
+  593 print "WAIT system fuel\n"
   594 jump *label306 always
   595 label *label301
   596 op mul *tmp181 45 3
   597 jump *label302 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  598 print "WAIT buffer fuel\n"
   599 jump *label305 always
   600 label *label302
   601 jump *label303 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  602 print "WAIT cryo\n"
   603 jump *label304 always
   604 label *label303
-    * print "STARTUP"
-    * print "\n"
+  605 print "STARTUP\n"
   606 op add .START_POWER_REQ .START_POWER_REQ 23000
   607 control enabled reactor3 true
   608 label *label304
 
   661 jump *label26 equal :emerg_shutdown false
   662 label *label28
   663 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  664 print "Central Fuel at {0} / 0 - "
+  665 format :throttle_blast:fuel_stored
   666 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  667 print " Enemies detected.\n"
   668 jump *label27 always
   669 label *label31
-    * print " Critical power."
-    * print "\n"
+  670 print " Critical power.\n"
   671 jump *label27 always
   672 label *label26
   673 jump *label33 notEqual *tmp28 false
   674 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  675 print "Fuel {0} / 150 (due to emergency)\n"
+  676 format :throttle_blast:fuel_stored
   677 jump *label34 always
   678 label *label33
   679 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  680 print "Fuel {0} / 800\n"
+  681 format :throttle_blast:fuel_stored
   682 label *label34
   683 label *label27
   684 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
 
   690 op div :diff_generators:stored_pc *tmp48 *tmp49
   691 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   692 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * print "Differential now idle."
-    * print "\n"
+  693 print "Differential now idle.\n"
   694 control enabled generator1 false
   695 control enabled generator2 false
   696 jump *label39 always
 
   710 # "Function: def kilo(in val)"
   711 op idiv *tmp85 .START_POWER_REQ 100
   712 op div :kilo*retval *tmp85 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  713 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  714 format :kilo*retval
+  715 format :charge
+  716 format :surplus
   717 jump *label43 always
   718 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  719 print "Power {0}kW, {0}kJ\n"
+  720 format :surplus
+  721 format :kilo*retval
   722 # "Function: def update_reactors_desired()"
   723 sensor *tmp65 node1 @powerNetStored
   724 sensor *tmp66 node1 @powerNetCapacity
 
   740 label *label51
   741 label *label43
   742 jump *label55 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  743 print "Require only {0}/5 reactors.\n"
+  744 format .REACTORS_DESIRED
   745 label *label55
   746 printflush message1
   747 jump *label7 always
 
   763 op mul *tmp116 :start_reactor:surplus 0.2
   764 op add .AVG_SURPLUS *tmp115 *tmp116
   765 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  766 print "#{0} - "
+  767 format :start_reactor:reactor_num
   768 jump *label69 equal :start_reactor:emerg_shutdown false
   769 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  770 print "emergency mode\n"
   771 set :start_reactor*retval false
   772 jump *label70 always
   773 label *label69
   774 jump *label71 equal :start_reactor:enabled false
   775 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   776 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  777 print "STOP unwanted\n"
   778 jump *label72 always
   779 label *label73
   780 jump *label75 lessThanEq :start_reactor:reactor_num 1
   781 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   782 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
   783 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  784 print "STOP system fuel low\n"
   785 jump *label72 always
   786 label *label75
   787 jump *label79 greaterThan :start_reactor:fuel 1
   788 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  789 print "STOP fuel low\n"
   790 jump *label72 always
   791 label *label79
   792 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   793 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  794 print "STOP out of cryo\n"
   795 jump *label72 always
   796 label *label81
   797 jump *label83 greaterThanEq :start_reactor:secs 30
 
   814 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   815 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   816 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  817 print "START FAIL battery\n"
   818 set :start_reactor*retval false
   819 jump *label72 always
   820 label *label85
   821 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  822 print "Starting {0} secs, req {0}J\n"
+  823 format :start_reactor:time_left
+  824 format :calc_charge_req*retval
   825 jump *label72 always
   826 label *label83
   827 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   828 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   829 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  830 print "ABANDON - battery crit\n"
   831 set :start_reactor*retval false
   832 jump *label72 always
   833 label *label89
   834 op idiv :start_reactor:mins :start_reactor:secs 6
   835 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  836 print "RUN {0} mins\n"
+  837 format :start_reactor:mins
   838 jump *label72 always
   839 label *label71
   840 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   846 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
   847 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
   848 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  849 print "IDLE\n"
   850 set :start_reactor*retval false
   851 jump *label94 always
   852 label *label93
 
   856 op div :start_reactor:flow *tmp171 10
   857 op idiv *tmp174 :start_reactor:charge_units 0.001
   858 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  859 print "WAIT power. (%{0}J + %{0}W)\n"
+  860 format :start_reactor:charge
+  861 format :start_reactor:flow
   862 set :start_reactor*retval false
   863 jump *label96 always
   864 label *label95
 
   866 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   867 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   868 jump *label101 lessThanEq *tmp178 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  869 print "WAIT fuel\n"
   870 jump *label98 always
   871 label *label101
-    * print "WAIT system fuel"
-    * print "\n"
+  872 print "WAIT system fuel\n"
   873 jump *label98 always
   874 label *label97
   875 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
   876 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
-    * print "WAIT buffer fuel"
-    * print "\n"
+  877 print "WAIT buffer fuel\n"
   878 jump *label104 always
   879 label *label103
   880 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  881 print "WAIT cryo\n"
   882 jump *label106 always
   883 label *label105
-    * print "STARTUP"
-    * print "\n"
+  884 print "STARTUP\n"
   885 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   886 control enabled :start_reactor:reactor true
   887 label *label106

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp218 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp218 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label167 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label169 always
label *label167
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label169
# "Function: def check_manual_shutdown()"
jump *label11 equal switch1 null
sensor *tmp10 switch1 @enabled
jump *label11 notEqual *tmp10 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp94 60
jump *label132 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor1 @enabled
jump *label133 notEqual *tmp97 false
label *label132
set :calc_charge_req*retval 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label135
set .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp94 60
jump *label138 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor2 @enabled
jump *label139 notEqual *tmp97 false
label *label138
set :calc_charge_req*retval 0
jump *label141 always
label *label139
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label141
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp94 60
jump *label144 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor3 @enabled
jump *label145 notEqual *tmp97 false
label *label144
set :calc_charge_req*retval 0
jump *label147 always
label *label145
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label147
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp94 60
jump *label150 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor4 @enabled
jump *label151 notEqual *tmp97 false
label *label150
set :calc_charge_req*retval 0
jump *label153 always
label *label151
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label153
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp94 60
jump *label156 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor5 @enabled
jump *label157 notEqual *tmp97 false
label *label156
set :calc_charge_req*retval 0
jump *label159 always
label *label157
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label159
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup1
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label175 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label218 always
label *label175
jump *label202 equal :start_reactor:enabled false
jump *label179 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label217 always
label *label179
jump *label180 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label217 always
label *label180
jump *label181 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label217 always
label *label181
jump *label192 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp94 60
jump *label184 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor1 @enabled
jump *label185 notEqual *tmp97 false
label *label184
set :calc_charge_req*retval 0
jump *label187 always
label *label185
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label187
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label190 greaterThanEq *tmp143 5000
jump *label190 greaterThanEq :start_reactor:surplus -500
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label217 always
label *label190
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label217 always
label *label192
jump *label195 greaterThanEq :start_reactor:charge 2000
jump *label195 greaterThanEq :start_reactor:surplus -500
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label217 always
label *label195
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label217 always
label *label202
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 1
op add :start_reactor:cryo_req 3 2
jump *label203 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label216 always
label *label203
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label204 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label215 always
label *label204
jump *label209 equal :fuel_1 false
jump *label209 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label207 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label214 always
label *label207
print "WAIT system fuel\n"
jump *label214 always
label *label209
op mul *tmp181 45 1
jump *label210 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label213 always
label *label210
jump *label211 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label212 always
label *label211
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label212
label *label213
label *label214
label *label215
label *label216
label *label217
label *label218
sensor *tmp188 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp89
select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp93
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup2
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label221 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label264 always
label *label221
jump *label248 equal :start_reactor:enabled false
jump *label222 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label263 always
label *label222
op mul *tmp128 15 2
jump *label225 greaterThanEq :start_reactor:fuel_stored 30
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label263 always
label *label225
jump *label226 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label263 always
label *label226
jump *label227 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label263 always
label *label227
jump *label238 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp94 60
jump *label230 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor2 @enabled
jump *label231 notEqual *tmp97 false
label *label230
set :calc_charge_req*retval 0
jump *label233 always
label *label231
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label233
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label236 greaterThanEq *tmp143 5000
jump *label236 greaterThanEq :start_reactor:surplus -500
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label263 always
label *label236
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label263 always
label *label238
jump *label241 greaterThanEq :start_reactor:charge 2000
jump *label241 greaterThanEq :start_reactor:surplus -500
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label263 always
label *label241
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label263 always
label *label248
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 2
op add :start_reactor:cryo_req 3 4
jump *label249 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label262 always
label *label249
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label250 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label261 always
label *label250
jump *label255 equal :fuel_2 false
jump *label255 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label253 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label260 always
label *label253
print "WAIT system fuel\n"
jump *label260 always
label *label255
op mul *tmp181 45 2
jump *label256 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label259 always
label *label256
jump *label257 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label258 always
label *label257
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label258
label *label259
label *label260
label *label261
label *label262
label *label263
label *label264
sensor *tmp188 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp89
select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp93
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label171 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label173 always
label *label171
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label173
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup3
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label267 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label310 always
label *label267
jump *label294 equal :start_reactor:enabled false
jump *label268 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label309 always
label *label268
op mul *tmp128 15 3
jump *label271 greaterThanEq :start_reactor:fuel_stored 45
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label309 always
label *label271
jump *label272 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label309 always
label *label272
jump *label273 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label309 always
label *label273
jump *label284 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp94 60
jump *label276 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor3 @enabled
jump *label277 notEqual *tmp97 false
label *label276
set :calc_charge_req*retval 0
jump *label279 always
label *label277
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label279
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label282 greaterThanEq *tmp143 5000
jump *label282 greaterThanEq :start_reactor:surplus -500
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label309 always
label *label282
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label309 always
label *label284
jump *label287 greaterThanEq :start_reactor:charge 2000
jump *label287 greaterThanEq :start_reactor:surplus -500
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label309 always
label *label287
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label309 always
label *label294
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 3
op add :start_reactor:cryo_req 3 6
jump *label295 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label308 always
label *label295
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label296 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label307 always
label *label296
jump *label301 equal :fuel_3 false
jump *label301 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label299 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label306 always
label *label299
print "WAIT system fuel\n"
jump *label306 always
label *label301
op mul *tmp181 45 3
jump *label302 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label305 always
label *label302
jump *label303 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label304 always
label *label303
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label304
label *label305
label *label306
label *label307
label *label308
label *label309
label *label310
sensor *tmp188 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
set *tmp26 true
jump *label16 notEqual :start_reactor:supply_fuel false
jump *label16 notEqual :fuel_4 false
select *tmp26 equal :start_reactor*retval false false true
label *label16
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual *tmp26 false @blast-compound @scrap
control config unloader5 *tmp89
select *tmp93 equal *tmp26 false @blast-compound @scrap
control config unloader6 *tmp93
set *tmp28 true
jump *label21 notEqual :fuel_1 false
jump *label21 notEqual :fuel_2 false
select *tmp28 equal *tmp26 false false true
label *label21
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp30 node1 @powerNetStored
op floor :throttle_blast:charge *tmp30
sensor *tmp32 node1 @powerNetIn
sensor *tmp33 node1 @powerNetOut
op sub *tmp34 *tmp32 *tmp33
op floor :throttle_blast:surplus *tmp34
sensor :throttle_blast:fuel_stored vault1 @blast-compound
jump *label29 greaterThanEq :throttle_blast:charge 5000
jump *label28 lessThan :throttle_blast:surplus -500
label *label29
jump *label26 equal :emerg_shutdown false
label *label28
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label27 always
label *label31
print " Critical power.\n"
jump *label27 always
label *label26
jump *label33 notEqual *tmp28 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label27
op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp46 notEqual *tmp29 false @pyratite @scrap
control config unloader7 *tmp46
# "Function: def diff_generators()"
sensor *tmp48 node1 @powerNetStored
sensor *tmp49 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp48 *tmp49
jump *label38 lessThanEq :diff_generators:stored_pc 0.9
jump *label38 greaterThanEq .START_POWER_REQ 10
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
# "Function: def kilo(in val)"
op idiv *tmp85 .AVG_SURPLUS 100
op div :surplus *tmp85 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp85 :kilo:val 100
op div :kilo*retval *tmp85 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp85 .START_POWER_REQ 100
op div :kilo*retval *tmp85 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp65 node1 @powerNetStored
sensor *tmp66 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp65 *tmp66
jump *label45 lessThanEq :update_reactors_desired:stored 0.98
jump *label45 lessThanEq .AVG_SURPLUS 16500
jump *label49 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label49
label *label45
jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
jump *label51 greaterThanEq .AVG_SURPLUS 8000
op sub *tmp78 .AVG_SURPLUS 10000
op idiv *tmp79 *tmp78 6500
op max :update_reactors_desired:needed 1 *tmp79
op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp81
label *label51
label *label43
jump *label55 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label55
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp109 .NODE @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 .NODE @powerNetIn
sensor *tmp112 .NODE @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label69 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label70 always
label *label69
jump *label71 equal :start_reactor:enabled false
jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label72 always
label *label73
jump *label75 lessThanEq :start_reactor:reactor_num 1
op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label72 always
label *label75
jump *label79 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label72 always
label *label79
jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label72 always
label *label81
jump *label83 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp94 60
jump *label162 greaterThan :calc_charge_req:secs 30
sensor *tmp97 :start_reactor:reactor @enabled
jump *label163 notEqual *tmp97 false
label *label162
set :calc_charge_req*retval 0
jump *label165 always
label *label163
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label165
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label85 greaterThanEq *tmp143 .PWR_ABORT
jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label72 always
label *label85
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label72 always
label *label83
jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label72 always
label *label89
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label72 always
label *label71
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 .PWR_ABORT
op div *tmp159 *tmp158 .PWR_REQ
op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
op div *tmp161 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp163
jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label94 always
label *label93
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label95 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label96 always
label *label95
jump *label97 equal :start_reactor:fuel_on false
jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label101 lessThanEq *tmp178 .FUEL_REQ
print "WAIT fuel\n"
jump *label98 always
label *label101
print "WAIT system fuel\n"
jump *label98 always
label *label97
op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
print "WAIT buffer fuel\n"
jump *label104 always
label *label103
jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label106 always
label *label105
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label106
label *label104
label *label98
label *label96
label *label94
label *label72
label *label70
sensor *tmp188 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
return :start_reactor*retaddr
