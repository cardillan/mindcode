   697 instructions before optimizations.
    76 instructions eliminated by Temp Variables Elimination (6 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     3 instructions eliminated by Jump Normalization (2 passes, 5 iterations).
    37 instructions eliminated by Condition Optimization (2 passes, 7 iterations).
    40 instructions eliminated by Single Step Elimination (3 passes, 8 iterations).
     3 instructions eliminated by Expression Optimization (3 iterations).
    21 instructions eliminated by Boolean Optimization (2 passes, 6 iterations).
       2 short-circuited expressions turned to full evaluations.
       5 fully-evaluated expressions optimized using selects.
    67 instructions eliminated by Data Flow Optimization (9 passes, 29 iterations).
   499 instructions added by Function Inlining (10 iterations).
    17 function calls inlined by Function Inlining.
     5 instructions eliminated by Jump Straightening (6 iterations).
    33 instructions updated by Jump Threading.
     7 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   746 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 547):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 551):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 560):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332 (+38 instructions)
    Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 522):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+13 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 509):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 369):
  ! Inline function 'start_reactor' defined at line 140:1        size  +440, benefit      550.0, efficiency      1.250
  * Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935 (+141 instructions)
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 228):
  ! Inline function 'start_reactor' defined at line 140:1        size  +293, benefit      412.5, efficiency      1.408
  * Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935 (+141 instructions)
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 87):
  ! Inline function 'start_reactor' defined at line 140:1        size  +146, benefit      275.0, efficiency      1.884
  ! Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
  ! Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 2: speed optimization selection (cost limit 115):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Pass 3: speed optimization selection (cost limit 115):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    73 print "\n"
    74 set *tmp8 true
    75 jump *label10 always
-    * set *tmp12 null
    76 jump *label12 always
    77 label *label11
-    * set *tmp12 null
    78 label *label12
    79 set *tmp8 false
    80 jump *label10 always
 
   119 set :update_fuel:uld_in .ULD_IN_1
   120 set :update_fuel:uld_out .ULD_OUT_1
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp19 :update_fuel*retval
   122 set :start_reactor:reactor reactor2
   123 set :start_reactor:reactor_num 2
   124 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   132 set :update_fuel:uld_in .ULD_IN_2
   133 set :update_fuel:uld_out .ULD_OUT_2
   134 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp21 :update_fuel*retval
   135 set :check_radar:unit .TOWER
   136 call *label4 :check_radar*retaddr :check_radar*retval
   137 set *tmp22 :check_radar*retval
 
   181 set :update_fuel:uld_in .ULD_IN_MANY
   182 set :update_fuel:uld_out .ULD_OUT_MANY
   183 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp27 :update_fuel*retval
   184 jump *label22 notEqual :fuel_1 false
   185 label *label24
   186 jump *label22 notEqual :fuel_2 false
 
   235 print "\n"
   236 set *tmp40 null
   237 label *label32
-    * set *tmp39 *tmp40
   238 jump *label27 always
   239 label *label26
   240 op equal *tmp41 :throttle_blast:reactors_fueled false
 
   261 print "n"
   262 set *tmp42 null
   263 label *label34
-    * set *tmp39 *tmp42
   264 label *label27
   265 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
   266 set *tmp29 *tmp43
 
   303 control enabled *tmp60 true
   304 set *tmp53 true
   305 label *label39
-    * set *tmp47 *tmp53
   306 label *label37
   307 set :kilo:val .AVG_SURPLUS
   308 call *label0 :kilo*retaddr :kilo*retval
 
   327 print :surplus
   328 print "kW flow."
   329 print "\n"
-    * set *tmp66 null
   330 jump *label43 always
   331 label *label42
   332 print "Power "
 
   357 label *label49
   358 set *tmp77 null
   359 label *label50
-    * set *tmp75 *tmp77
   360 jump *label46 always
   361 label *label45
-    * set *tmp75 null
   362 label *label46
   363 op lessThan *tmp78 :update_reactors_desired:stored 0.8
   364 jump *label51 equal *tmp78 false
 
   382 label *label52
   383 set *tmp68 *tmp81
   384 label *label44
-    * set *tmp66 *tmp68
   385 label *label43
   386 op notEqual *tmp87 .REACTORS_DESIRED 5
   387 jump *label55 equal *tmp87 false
 
   389 print .REACTORS_DESIRED
   390 print "/5 reactors."
   391 print "\n"
-    * set *tmp88 null
   392 jump *label56 always
   393 label *label55
-    * set *tmp88 null
   394 label *label56
   395 printflush message1
   396 label *label8
 
   445 label *label66
   446 set :calc_charge_req*retval 0
   447 jump *label63 always
-    * set *tmp103 null
   448 jump *label65 always
   449 label *label64
-    * set *tmp103 null
   450 label *label65
   451 op sub *tmp104 30 :calc_charge_req:secs
   452 set :calc_charge_req:time_left *tmp104
 
   497 print "emergency mode"
   498 print "\n"
   499 set :start_reactor:supply_fuel false
-    * set *tmp123 :start_reactor:supply_fuel
   500 jump *label70 always
   501 label *label69
   502 jump *label71 equal :start_reactor:enabled false
 
   710 label *label94
   711 set *tmp126 *tmp170
   712 label *label72
-    * set *tmp123 *tmp126
   713 label *label70
   714 sensor *tmp192 :start_reactor:reactor @enabled
   715 op notEqual *tmp193 :start_reactor:enabled *tmp192
   716 jump *label107 equal *tmp193 false
   717 set *tmp195 @tick
   718 set .RET_T_STARTUP *tmp195
-    * set *tmp194 .RET_T_STARTUP
   719 jump *label108 always
   720 label *label107
-    * set *tmp194 null
   721 label *label108
   722 set :start_reactor*retval :start_reactor:supply_fuel
   723 jump *label68 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   228 jump *label31 equal :throttle_blast:emerg_shutdown false
   229 print " Enemies detected."
   230 print "\n"
-    * set *tmp40 null
   231 jump *label32 always
   232 label *label31
   233 print " Critical power."
   234 print "\n"
-    * set *tmp40 null
   235 label *label32
   236 jump *label27 always
   237 label *label26
 
   246 print " "
   247 print "(due to emergency)"
   248 print "\n"
-    * set *tmp42 null
   249 jump *label34 always
   250 label *label33
   251 set :throttle_blast:limit .FUEL_LIMIT
 
   256 print :throttle_blast:limit
   257 print "\"
   258 print "n"
-    * set *tmp42 null
   259 label *label34
   260 label *label27
   261 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
 
   290 control enabled *tmp54 false
   291 set *tmp56 generator2
   292 control enabled *tmp56 false
-    * set *tmp53 false
   293 jump *label39 always
   294 label *label38
   295 set *tmp58 generator1
   296 control enabled *tmp58 true
   297 set *tmp60 generator2
   298 control enabled *tmp60 true
-    * set *tmp53 true
   299 label *label39
   300 label *label37
   301 set :kilo:val .AVG_SURPLUS
 
   346 jump *label49 equal *tmp76 false
   347 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   348 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp77 .AVG_SURPLUS
   349 jump *label50 always
   350 label *label49
-    * set *tmp77 null
   351 label *label50
   352 jump *label46 always
   353 label *label45
 
   372 label *label51
   373 set *tmp81 null
   374 label *label52
-    * set *tmp68 *tmp81
   375 label *label44
   376 label *label43
   377 op notEqual *tmp87 .REACTORS_DESIRED 5
 
   417 set *tmp97 .FUEL_OFF
   418 label *label62
   419 control config *tmp94 *tmp97
-    * set :update_fuel*retval *tmp97
   420 label *label58
   421 return :update_fuel*retaddr
   422 end
 
   604 label *label76
   605 set *tmp128 *tmp134
   606 label *label74
-    * set *tmp126 *tmp128
   607 jump *label72 always
   608 label *label71
   609 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   697 label *label96
   698 set *tmp170 *tmp173
   699 label *label94
-    * set *tmp126 *tmp170
   700 label *label72
   701 label *label70
   702 sensor *tmp192 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   367 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   368 op min *tmp86 5 *tmp85
   369 set .REACTORS_DESIRED *tmp86
-    * set *tmp81 .REACTORS_DESIRED
   370 jump *label52 always
   371 label *label51
-    * set *tmp81 null
   372 label *label52
   373 label *label44
   374 label *label43
 
   494 control enabled *tmp129 false
   495 print "STOP unwanted"
   496 print "\n"
-    * set *tmp128 null
   497 jump *label74 always
   498 label *label73
   499 op greaterThan *tmp131 :start_reactor:reactor_num 1
 
   599 label *label80
   600 set *tmp134 *tmp138
   601 label *label76
-    * set *tmp128 *tmp134
   602 label *label74
   603 jump *label72 always
   604 label *label71
 
   618 print "IDLE"
   619 print "\n"
   620 set :start_reactor:supply_fuel false
-    * set *tmp170 :start_reactor:supply_fuel
   621 jump *label94 always
   622 label *label93
   623 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
 
   690 label *label98
   691 set *tmp173 *tmp181
   692 label *label96
-    * set *tmp170 *tmp173
   693 label *label94
   694 label *label72
   695 label *label70

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   508 control enabled *tmp135 false
   509 print "STOP system fuel low"
   510 print "\n"
-    * set *tmp134 null
   511 jump *label76 always
   512 label *label75
   513 op lessThanEq *tmp137 :start_reactor:fuel 1
 
   596 label *label82
   597 set *tmp138 *tmp142
   598 label *label80
-    * set *tmp134 *tmp138
   599 label *label76
   600 label *label74
   601 jump *label72 always
 
   636 print "W)"
   637 print "\n"
   638 set :start_reactor:supply_fuel false
-    * set *tmp173 :start_reactor:supply_fuel
   639 jump *label96 always
   640 label *label95
   641 jump *label97 equal :start_reactor:fuel_on false
 
   685 label *label104
   686 set *tmp181 *tmp187
   687 label *label98
-    * set *tmp173 *tmp181
   688 label *label96
   689 label *label94
   690 label *label72

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   516 control enabled *tmp139 false
   517 print "STOP fuel low"
   518 print "\n"
-    * set *tmp138 null
   519 jump *label80 always
   520 label *label79
   521 op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
 
   593 label *label84
   594 set *tmp142 *tmp146
   595 label *label82
-    * set *tmp138 *tmp142
   596 label *label80
   597 label *label76
   598 label *label74
 
   654 print "\n"
   655 set *tmp184 null
   656 label *label102
-    * set *tmp181 *tmp184
   657 jump *label98 always
   658 label *label97
   659 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   680 label *label106
   681 set *tmp187 *tmp189
   682 label *label104
-    * set *tmp181 *tmp187
   683 label *label98
   684 label *label96
   685 label *label94

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   524 control enabled *tmp143 false
   525 print "STOP out of cryo"
   526 print "\n"
-    * set *tmp142 null
   527 jump *label82 always
   528 label *label81
   529 op lessThan *tmp145 :start_reactor:secs 30
 
   590 label *label90
   591 set *tmp146 *tmp156
   592 label *label84
-    * set *tmp142 *tmp146
   593 label *label82
   594 label *label80
   595 label *label76
 
   645 jump *label101 equal *tmp183 false
   646 print "WAIT fuel"
   647 print "\n"
-    * set *tmp184 null
   648 jump *label102 always
   649 label *label101
   650 print "WAIT system fuel"
   651 print "\n"
-    * set *tmp184 null
   652 label *label102
   653 jump *label98 always
   654 label *label97
 
   657 jump *label103 equal *tmp186 false
   658 print "WAIT buffer fuel"
   659 print "\n"
-    * set *tmp187 null
   660 jump *label104 always
   661 label *label103
   662 op lessThan *tmp188 :start_reactor:cryo :start_reactor:cryo_req
 
   673 control enabled *tmp190 true
   674 set *tmp189 true
   675 label *label106
-    * set *tmp187 *tmp189
   676 label *label104
   677 label *label98
   678 label *label96

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   559 print "\n"
   560 set *tmp150 null
   561 label *label86
-    * set *tmp146 *tmp150
   562 jump *label84 always
   563 label *label83
   564 op lessThan *tmp154 :start_reactor:charge .PWR_ABANDON
 
   587 print "\n"
   588 set *tmp156 null
   589 label *label90
-    * set *tmp146 *tmp156
   590 label *label84
   591 label *label82
   592 label *label80
 
   661 jump *label105 equal *tmp188 false
   662 print "WAIT cryo"
   663 print "\n"
-    * set *tmp189 null
   664 jump *label106 always
   665 label *label105
   666 print "STARTUP"
 
   668 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   669 set *tmp190 :start_reactor:reactor
   670 control enabled *tmp190 true
-    * set *tmp189 true
   671 label *label106
   672 label *label104
   673 label *label98

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   545 print "START FAIL battery"
   546 print "\n"
   547 set :start_reactor:supply_fuel false
-    * set *tmp150 :start_reactor:supply_fuel
   548 jump *label86 always
   549 label *label85
   550 op sub *tmp153 30 :start_reactor:secs
 
   556 print :start_reactor:charge_req
   557 print "J"
   558 print "\n"
-    * set *tmp150 null
   559 label *label86
   560 jump *label84 always
   561 label *label83
 
   571 print "ABANDON - battery crit"
   572 print "\n"
   573 set :start_reactor:supply_fuel false
-    * set *tmp156 :start_reactor:supply_fuel
   574 jump *label90 always
   575 label *label89
   576 op idiv *tmp159 :start_reactor:secs 6
 
   582 print " "
   583 print "mins"
   584 print "\n"
-    * set *tmp156 null
   585 label *label90
   586 label *label84
   587 label *label82

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-76 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 jump *label11 equal *tmp9 false
 
    81 set :calc_charge_req:reactor reactor1
    82 set :calc_charge_req:time :t_startup1
    83 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp13 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp13
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp14
+   88 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    89 set :calc_charge_req:reactor reactor3
    90 set :calc_charge_req:time :t_startup3
    91 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   92 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    93 set :calc_charge_req:reactor reactor4
    94 set :calc_charge_req:time :t_startup4
    95 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor5
    98 set :calc_charge_req:time :t_startup5
    99 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  100 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   101 set :start_reactor:reactor reactor1
   102 set :start_reactor:reactor_num 1
   103 set :start_reactor:emerg_shutdown :emerg_shutdown
   104 set :start_reactor:fuel_on :fuel_1
   105 set :start_reactor:t_startup :t_startup1
   106 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp18 :start_reactor*retval
-    * set :fuel_1 *tmp18
+  107 set :fuel_1 :start_reactor*retval
   108 set :t_startup1 .RET_T_STARTUP
   109 set :update_fuel:fuel :fuel_1
   110 set :update_fuel:uld_in .ULD_IN_1
 
   116 set :start_reactor:fuel_on :fuel_2
   117 set :start_reactor:t_startup :t_startup2
   118 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp20 :start_reactor*retval
-    * set :fuel_2 *tmp20
+  119 set :fuel_2 :start_reactor*retval
   120 set :t_startup2 .RET_T_STARTUP
   121 set :update_fuel:fuel :fuel_2
   122 set :update_fuel:uld_in .ULD_IN_2
 
   124 call *label1 :update_fuel*retaddr :update_fuel*retval
   125 set :check_radar:unit .TOWER
   126 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp22 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp22
+  127 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   128 set :start_reactor:reactor reactor3
   129 set :start_reactor:reactor_num 3
   130 set :start_reactor:emerg_shutdown :emerg_shutdown
   131 set :start_reactor:fuel_on :fuel_3
   132 set :start_reactor:t_startup :t_startup3
   133 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp23 :start_reactor*retval
-    * set :fuel_3 *tmp23
+  134 set :fuel_3 :start_reactor*retval
   135 set :t_startup3 .RET_T_STARTUP
   136 set :start_reactor:reactor reactor4
   137 set :start_reactor:reactor_num 4
 
   139 set :start_reactor:fuel_on :fuel_4
   140 set :start_reactor:t_startup :t_startup4
   141 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_4 *tmp24
+  142 set :fuel_4 :start_reactor*retval
   143 set :t_startup4 .RET_T_STARTUP
   144 set :start_reactor:reactor reactor5
   145 set :start_reactor:reactor_num 5
 
   147 set :start_reactor:fuel_on :fuel_5
   148 set :start_reactor:t_startup :t_startup5
   149 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_5 *tmp25
+  150 set :fuel_5 :start_reactor*retval
   151 set :t_startup5 .RET_T_STARTUP
   152 jump *label17 notEqual :fuel_3 false
   153 label *label19
 
   184 set :throttle_blast:reactors_fueled *tmp28
   185 set :throttle_blast:emerg_shutdown :emerg_shutdown
   186 sensor *tmp30 .NODE @powerNetStored
-    * op floor *tmp31 *tmp30
-    * set :throttle_blast:charge *tmp31
+  187 op floor :throttle_blast:charge *tmp30
   188 sensor *tmp32 .NODE @powerNetIn
   189 sensor *tmp33 .NODE @powerNetOut
   190 op sub *tmp34 *tmp32 *tmp33
-    * op floor *tmp35 *tmp34
-    * set :throttle_blast:surplus *tmp35
-    * sensor *tmp36 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp36
+  191 op floor :throttle_blast:surplus *tmp34
+  192 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   193 op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
   194 jump *label29 equal *tmp37 false
   195 label *label30
 
   241 print "n"
   242 label *label34
   243 label *label27
-    * op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp29 *tmp43
+  244 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   245 jump *label25 always
   246 set *tmp29 null
   247 label *label25
 
   257 # "Function: def diff_generators()"
   258 sensor *tmp48 .NODE @powerNetStored
   259 sensor *tmp49 .NODE @powerNetCapacity
-    * op div *tmp50 *tmp48 *tmp49
-    * set :diff_generators:stored_pc *tmp50
+  260 op div :diff_generators:stored_pc *tmp48 *tmp49
   261 op greaterThan *tmp51 :diff_generators:stored_pc 0.9
   262 jump *label38 equal *tmp51 false
   263 label *label41
 
   267 label *label40
   268 print "Differential now idle."
   269 print "\n"
-    * set *tmp54 generator1
-    * control enabled *tmp54 false
-    * set *tmp56 generator2
-    * control enabled *tmp56 false
+  270 control enabled generator1 false
+  271 control enabled generator2 false
   272 jump *label39 always
   273 label *label38
-    * set *tmp58 generator1
-    * control enabled *tmp58 true
-    * set *tmp60 generator2
-    * control enabled *tmp60 true
+  274 control enabled generator1 true
+  275 control enabled generator2 true
   276 label *label39
   277 label *label37
   278 set :kilo:val .AVG_SURPLUS
   279 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp62 :kilo*retval
-    * set :surplus *tmp62
-    * sensor *tmp63 .NODE @powerNetStored
-    * set :kilo:val *tmp63
+  280 set :surplus :kilo*retval
+  281 sensor :kilo:val .NODE @powerNetStored
   282 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp64 :kilo*retval
-    * set :charge *tmp64
+  283 set :charge :kilo*retval
   284 op greaterThan *tmp65 .START_POWER_REQ 0
   285 jump *label42 equal *tmp65 false
   286 set :kilo:val .START_POWER_REQ
   287 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp67 :kilo*retval
-    * set :req *tmp67
+  288 set :req :kilo*retval
   289 print "Req "
   290 print :req
   291 print "kJ / "
 
   305 # "Function: def update_reactors_desired()"
   306 sensor *tmp69 .NODE @powerNetStored
   307 sensor *tmp70 .NODE @powerNetCapacity
-    * op div *tmp71 *tmp69 *tmp70
-    * set :update_reactors_desired:stored *tmp71
+  308 op div :update_reactors_desired:stored *tmp69 *tmp70
   309 op greaterThan *tmp72 :update_reactors_desired:stored 0.98
   310 jump *label45 equal *tmp72 false
   311 label *label48
 
   334 label *label53
   335 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
   336 op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
-    * op max *tmp84 1 *tmp83
-    * set :update_reactors_desired:needed *tmp84
+  337 op max :update_reactors_desired:needed 1 *tmp83
   338 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp86 5 *tmp85
-    * set .REACTORS_DESIRED *tmp86
+  339 op min .REACTORS_DESIRED 5 *tmp85
   340 jump *label52 always
   341 label *label51
   342 label *label52
 
   359 label *label0
   360 # "Function: def kilo(in val)"
   361 op idiv *tmp89 :kilo:val 100
-    * op div *tmp90 *tmp89 10
-    * set :kilo*retval *tmp90
+  362 op div :kilo*retval *tmp89 10
   363 jump *label57 always
   364 set :kilo*retval null
   365 label *label57
 
   390 label *label2
   391 # "Function: def calc_charge_req(in reactor, in time)"
   392 op sub *tmp98 @tick :calc_charge_req:time
-    * op idiv *tmp99 *tmp98 60
-    * set :calc_charge_req:secs *tmp99
+  393 op idiv :calc_charge_req:secs *tmp98 60
   394 op greaterThan *tmp100 :calc_charge_req:secs 30
   395 jump *label66 notEqual *tmp100 false
   396 label *label67
 
   404 jump *label65 always
   405 label *label64
   406 label *label65
-    * op sub *tmp104 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp104
+  407 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   408 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   409 op mul *tmp106 *tmp105 25
-    * op floor *tmp107 *tmp106
-    * set :calc_charge_req:charge_req *tmp107
+  410 op floor :calc_charge_req:charge_req *tmp106
   411 set :calc_charge_req*retval :calc_charge_req:charge_req
   412 jump *label63 always
   413 set :calc_charge_req*retval null
 
   418 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   419 set .RET_T_STARTUP :start_reactor:t_startup
   420 op sub *tmp108 @tick :start_reactor:t_startup
-    * op idiv *tmp109 *tmp108 60
-    * set :start_reactor:secs *tmp109
-    * sensor *tmp110 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp110
+  421 op idiv :start_reactor:secs *tmp108 60
+  422 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   423 set :start_reactor:supply_fuel true
-    * sensor *tmp111 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp111
-    * sensor *tmp112 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp112
+  424 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  425 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   426 sensor *tmp113 .NODE @powerNetStored
-    * op floor *tmp114 *tmp113
-    * set :start_reactor:charge *tmp114
+  427 op floor :start_reactor:charge *tmp113
   428 sensor *tmp115 .NODE @powerNetIn
   429 sensor *tmp116 .NODE @powerNetOut
   430 op sub *tmp117 *tmp115 *tmp116
-    * op floor *tmp118 *tmp117
-    * set :start_reactor:surplus *tmp118
+  431 op floor :start_reactor:surplus *tmp117
   432 op mul *tmp119 .AVG_SURPLUS 0.8
   433 op mul *tmp120 :start_reactor:surplus 0.2
-    * op add *tmp121 *tmp119 *tmp120
-    * set .AVG_SURPLUS *tmp121
-    * sensor *tmp122 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp122
+  434 op add .AVG_SURPLUS *tmp119 *tmp120
+  435 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   436 print "#"
   437 print :start_reactor:reactor_num
   438 print " "
   439 print "- "
   440 jump *label69 equal :start_reactor:emerg_shutdown false
-    * set *tmp124 :start_reactor:reactor
-    * control enabled *tmp124 false
+  441 control enabled :start_reactor:reactor false
   442 print "emergency mode"
   443 print "\n"
   444 set :start_reactor:supply_fuel false
 
   447 jump *label71 equal :start_reactor:enabled false
   448 op lessThan *tmp127 .REACTORS_DESIRED :start_reactor:reactor_num
   449 jump *label73 equal *tmp127 false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  450 control enabled :start_reactor:reactor false
   451 print "STOP unwanted"
   452 print "\n"
   453 jump *label74 always
 
   460 jump *label75 equal *tmp133 false
   461 jump *label77 always
   462 label *label77
-    * set *tmp135 :start_reactor:reactor
-    * control enabled *tmp135 false
+  463 control enabled :start_reactor:reactor false
   464 print "STOP system fuel low"
   465 print "\n"
   466 jump *label76 always
   467 label *label75
   468 op lessThanEq *tmp137 :start_reactor:fuel 1
   469 jump *label79 equal *tmp137 false
-    * set *tmp139 :start_reactor:reactor
-    * control enabled *tmp139 false
+  470 control enabled :start_reactor:reactor false
   471 print "STOP fuel low"
   472 print "\n"
   473 jump *label80 always
   474 label *label79
   475 op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
   476 jump *label81 equal *tmp141 false
-    * set *tmp143 :start_reactor:reactor
-    * control enabled *tmp143 false
+  477 control enabled :start_reactor:reactor false
   478 print "STOP out of cryo"
   479 print "\n"
   480 jump *label82 always
 
   493 jump *label85 equal *tmp149 false
   494 jump *label87 always
   495 label *label87
-    * set *tmp151 :start_reactor:reactor
-    * control enabled *tmp151 false
+  496 control enabled :start_reactor:reactor false
   497 print "START FAIL battery"
   498 print "\n"
   499 set :start_reactor:supply_fuel false
   500 jump *label86 always
   501 label *label85
-    * op sub *tmp153 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp153
+  502 op sub :start_reactor:time_left 30 :start_reactor:secs
   503 print "Starting "
   504 print :start_reactor:time_left
   505 print " "
 
   517 jump *label89 equal *tmp155 false
   518 jump *label91 always
   519 label *label91
-    * set *tmp157 :start_reactor:reactor
-    * control enabled *tmp157 false
+  520 control enabled :start_reactor:reactor false
   521 print "ABANDON - battery crit"
   522 print "\n"
   523 set :start_reactor:supply_fuel false
   524 jump *label90 always
   525 label *label89
-    * op idiv *tmp159 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp159
-    * op div *tmp160 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp160
+  526 op idiv :start_reactor:mins :start_reactor:secs 6
+  527 op div :start_reactor:mins :start_reactor:mins 10
   528 print "RUN "
   529 print :start_reactor:mins
   530 print " "
 
   541 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   542 op sub *tmp162 *tmp161 .PWR_ABORT
   543 op div *tmp163 *tmp162 .PWR_REQ
-    * op mul *tmp164 *tmp163 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp164
+  544 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
   545 op div *tmp165 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp166 -0.1 *tmp165
-    * set :start_reactor:flow_units *tmp166
+  546 op max :start_reactor:flow_units -0.1 *tmp165
   547 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp168 .CRYO_REQ *tmp167
-    * set :start_reactor:cryo_req *tmp168
+  548 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
   549 op lessThan *tmp169 .REACTORS_DESIRED :start_reactor:reactor_num
   550 jump *label93 equal *tmp169 false
   551 print "IDLE"
 
   558 jump *label95 equal *tmp172 false
   559 op mul *tmp174 :start_reactor:flow_units 1000
   560 op floor *tmp175 *tmp174
-    * op div *tmp176 *tmp175 10
-    * set :start_reactor:flow *tmp176
+  561 op div :start_reactor:flow *tmp175 10
   562 op mul *tmp177 :start_reactor:charge_units 1000
   563 op floor *tmp178 *tmp177
-    * op div *tmp179 *tmp178 10
-    * set :start_reactor:charge *tmp179
+  564 op div :start_reactor:charge *tmp178 10
   565 print "WAIT power. (%"
   566 print :start_reactor:charge
   567 print "J + %"
 
   605 print "STARTUP"
   606 print "\n"
   607 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp190 :start_reactor:reactor
-    * control enabled *tmp190 true
+  608 control enabled :start_reactor:reactor true
   609 label *label106
   610 label *label104
   611 label *label98
 
   616 sensor *tmp192 :start_reactor:reactor @enabled
   617 op notEqual *tmp193 :start_reactor:enabled *tmp192
   618 jump *label107 equal *tmp193 false
-    * set *tmp195 @tick
-    * set .RET_T_STARTUP *tmp195
+  619 set .RET_T_STARTUP @tick
   620 jump *label108 always
   621 label *label107
   622 label *label108
 
   628 end
   629 label *label4
   630 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp196
-    * set :check_radar:enemy_found *tmp196
+  631 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   632 op notEqual *tmp197 :check_radar:enemy_found null
   633 jump *label110 equal *tmp197 false
-    * set *tmp199 projector1
-    * control enabled *tmp199 true
-    * set *tmp201 projector2
-    * control enabled *tmp201 true
-    * set *tmp203 .ULD_IN_1
-    * control config *tmp203 .FUEL_OFF
-    * set *tmp205 .ULD_OUT_1
-    * control config *tmp205 .FUEL
-    * set *tmp207 .ULD_IN_2
-    * control config *tmp207 .FUEL_OFF
-    * set *tmp209 .ULD_OUT_2
-    * control config *tmp209 .FUEL
-    * set *tmp211 .ULD_IN_MANY
-    * control config *tmp211 .FUEL_OFF
-    * set *tmp213 .ULD_OUT_MANY
-    * control config *tmp213 .FUEL
-    * set *tmp215 .ULD_MIXER
-    * control config *tmp215 .FUEL_OFF
-    * set *tmp217 reactor1
-    * control enabled *tmp217 false
-    * set *tmp219 reactor2
-    * control enabled *tmp219 false
-    * set *tmp221 reactor3
-    * control enabled *tmp221 false
-    * set *tmp223 reactor4
-    * control enabled *tmp223 false
-    * set *tmp225 reactor5
-    * control enabled *tmp225 false
+  634 control enabled projector1 true
+  635 control enabled projector2 true
+  636 control config .ULD_IN_1 .FUEL_OFF
+  637 control config .ULD_OUT_1 .FUEL
+  638 control config .ULD_IN_2 .FUEL_OFF
+  639 control config .ULD_OUT_2 .FUEL
+  640 control config .ULD_IN_MANY .FUEL_OFF
+  641 control config .ULD_OUT_MANY .FUEL
+  642 control config .ULD_MIXER .FUEL_OFF
+  643 control enabled reactor1 false
+  644 control enabled reactor2 false
+  645 control enabled reactor3 false
+  646 control enabled reactor4 false
+  647 control enabled reactor5 false
   648 set :check_radar*retval true
   649 jump *label109 always
   650 set *tmp198 null
   651 jump *label111 always
   652 label *label110
-    * set *tmp227 projector1
-    * control enabled *tmp227 false
-    * set *tmp229 projector2
-    * control enabled *tmp229 false
+  653 control enabled projector1 false
+  654 control enabled projector2 false
   655 set :check_radar*retval false
   656 jump *label109 always
   657 set *tmp198 null

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-5 instructions):
 
   153 jump *label17 notEqual :fuel_4 false
   154 jump *label18 always
   155 label *label18
-    * jump *label17 notEqual :fuel_5 false
-    * jump *label15 always
+  156 jump *label15 equal :fuel_5 false
   157 label *label17
   158 set *tmp26 true
   159 jump *label16 always
 
   170 jump *label22 notEqual :fuel_2 false
   171 jump *label23 always
   172 label *label23
-    * jump *label22 notEqual :fuel_many false
-    * jump *label20 always
+  173 jump *label20 equal :fuel_many false
   174 label *label22
   175 set *tmp28 true
   176 jump *label21 always
 
   191 jump *label29 equal *tmp37 false
   192 label *label30
   193 op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label29 equal *tmp38 false
-    * jump *label28 always
+  194 jump *label28 notEqual *tmp38 false
   195 label *label29
-    * jump *label28 notEqual :throttle_blast:emerg_shutdown false
-    * jump *label26 always
+  196 jump *label26 equal :throttle_blast:emerg_shutdown false
   197 label *label28
   198 set :throttle_blast:limit 0
   199 print "Central Fuel at "
 
   391 label *label67
   392 sensor *tmp101 :calc_charge_req:reactor @enabled
   393 op equal *tmp102 *tmp101 false
-    * jump *label66 notEqual *tmp102 false
-    * jump *label64 always
+  394 jump *label64 equal *tmp102 false
   395 label *label66
   396 set :calc_charge_req*retval 0
   397 jump *label63 always

Modifications by Iterated phase, Condition Optimization, pass 1, iteration 1 (-36 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
-    * op notEqual *tmp9 switch1 null
-    * jump *label11 equal *tmp9 false
+   59 jump *label11 equal switch1 null
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
-    * op equal *tmp11 *tmp10 false
-    * jump *label11 equal *tmp11 false
+   62 jump *label11 notEqual *tmp10 false
    63 jump *label13 always
    64 label *label13
    65 print "User has disabled emergency switch"
 
   184 op sub *tmp34 *tmp32 *tmp33
   185 op floor :throttle_blast:surplus *tmp34
   186 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
-    * jump *label29 equal *tmp37 false
+  187 jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
   188 label *label30
-    * op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label28 notEqual *tmp38 false
+  189 jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
   190 label *label29
   191 jump *label26 equal :throttle_blast:emerg_shutdown false
   192 label *label28
 
   208 label *label32
   209 jump *label27 always
   210 label *label26
-    * op equal *tmp41 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp41 false
+  211 jump *label33 notEqual :throttle_blast:reactors_fueled false
   212 set :throttle_blast:limit .FUEL_LIMIT_LOW
   213 print "Fuel "
   214 print :throttle_blast:fuel_stored
 
   247 sensor *tmp48 .NODE @powerNetStored
   248 sensor *tmp49 .NODE @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp48 *tmp49
-    * op greaterThan *tmp51 :diff_generators:stored_pc 0.9
-    * jump *label38 equal *tmp51 false
+  250 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   251 label *label41
-    * op lessThan *tmp52 .START_POWER_REQ 10
-    * jump *label38 equal *tmp52 false
+  252 jump *label38 greaterThanEq .START_POWER_REQ 10
   253 jump *label40 always
   254 label *label40
   255 print "Differential now idle."
 
   268 sensor :kilo:val .NODE @powerNetStored
   269 call *label0 :kilo*retaddr :kilo*retval
   270 set :charge :kilo*retval
-    * op greaterThan *tmp65 .START_POWER_REQ 0
-    * jump *label42 equal *tmp65 false
+  271 jump *label42 lessThanEq .START_POWER_REQ 0
   272 set :kilo:val .START_POWER_REQ
   273 call *label0 :kilo*retaddr :kilo*retval
   274 set :req :kilo*retval
 
   292 sensor *tmp69 .NODE @powerNetStored
   293 sensor *tmp70 .NODE @powerNetCapacity
   294 op div :update_reactors_desired:stored *tmp69 *tmp70
-    * op greaterThan *tmp72 :update_reactors_desired:stored 0.98
-    * jump *label45 equal *tmp72 false
+  295 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   296 label *label48
   297 op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp74 .AVG_SURPLUS *tmp73
-    * jump *label45 equal *tmp74 false
+  298 jump *label45 lessThanEq .AVG_SURPLUS *tmp73
   299 jump *label47 always
   300 label *label47
-    * op greaterThan *tmp76 .REACTORS_DESIRED 2
-    * jump *label49 equal *tmp76 false
+  301 jump *label49 lessThanEq .REACTORS_DESIRED 2
   302 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   303 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   304 jump *label50 always
 
   307 jump *label46 always
   308 label *label45
   309 label *label46
-    * op lessThan *tmp78 :update_reactors_desired:stored 0.8
-    * jump *label51 equal *tmp78 false
+  310 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   311 label *label54
   312 op mul *tmp79 .GOAL_BUFFER 0.8
-    * op lessThan *tmp80 .AVG_SURPLUS *tmp79
-    * jump *label51 equal *tmp80 false
+  313 jump *label51 greaterThanEq .AVG_SURPLUS *tmp79
   314 jump *label53 always
   315 label *label53
   316 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
 
   323 label *label52
   324 label *label44
   325 label *label43
-    * op notEqual *tmp87 .REACTORS_DESIRED 5
-    * jump *label55 equal *tmp87 false
+  326 jump *label55 equal .REACTORS_DESIRED 5
   327 print "Require only "
   328 print .REACTORS_DESIRED
   329 print "/5 reactors."
 
   356 label *label60
   357 control config *tmp91 *tmp93
   358 set *tmp94 :update_fuel:uld_out
-    * op equal *tmp96 :update_fuel:fuel false
-    * jump *label61 equal *tmp96 false
+  359 jump *label61 notEqual :update_fuel:fuel false
   360 set *tmp97 .FUEL
   361 jump *label62 always
   362 label *label61
 
   370 # "Function: def calc_charge_req(in reactor, in time)"
   371 op sub *tmp98 @tick :calc_charge_req:time
   372 op idiv :calc_charge_req:secs *tmp98 60
-    * op greaterThan *tmp100 :calc_charge_req:secs 30
-    * jump *label66 notEqual *tmp100 false
+  373 jump *label66 greaterThan :calc_charge_req:secs 30
   374 label *label67
   375 sensor *tmp101 :calc_charge_req:reactor @enabled
-    * op equal *tmp102 *tmp101 false
-    * jump *label64 equal *tmp102 false
+  376 jump *label64 notEqual *tmp101 false
   377 label *label66
   378 set :calc_charge_req*retval 0
   379 jump *label63 always
 
   421 jump *label70 always
   422 label *label69
   423 jump *label71 equal :start_reactor:enabled false
-    * op lessThan *tmp127 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label73 equal *tmp127 false
+  424 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   425 control enabled :start_reactor:reactor false
   426 print "STOP unwanted"
   427 print "\n"
   428 jump *label74 always
   429 label *label73
-    * op greaterThan *tmp131 :start_reactor:reactor_num 1
-    * jump *label75 equal *tmp131 false
+  430 jump *label75 lessThanEq :start_reactor:reactor_num 1
   431 label *label78
   432 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp133 :start_reactor:fuel_stored *tmp132
-    * jump *label75 equal *tmp133 false
+  433 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp132
   434 jump *label77 always
   435 label *label77
   436 control enabled :start_reactor:reactor false
 
   438 print "\n"
   439 jump *label76 always
   440 label *label75
-    * op lessThanEq *tmp137 :start_reactor:fuel 1
-    * jump *label79 equal *tmp137 false
+  441 jump *label79 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label80 always
   446 label *label79
-    * op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
-    * jump *label81 equal *tmp141 false
+  447 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label82 always
   452 label *label81
-    * op lessThan *tmp145 :start_reactor:secs 30
-    * jump *label83 equal *tmp145 false
+  453 jump *label83 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   457 set :start_reactor:charge_req :calc_charge_req*retval
   458 op sub *tmp147 :start_reactor:charge :start_reactor:charge_req
-    * op lessThan *tmp148 *tmp147 .PWR_ABORT
-    * jump *label85 equal *tmp148 false
+  459 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   460 label *label88
-    * op lessThan *tmp149 :start_reactor:surplus .FLOW_ABORT
-    * jump *label85 equal *tmp149 false
+  461 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   462 jump *label87 always
   463 label *label87
   464 control enabled :start_reactor:reactor false
 
   478 label *label86
   479 jump *label84 always
   480 label *label83
-    * op lessThan *tmp154 :start_reactor:charge .PWR_ABANDON
-    * jump *label89 equal *tmp154 false
+  481 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   482 label *label92
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
-    * jump *label89 equal *tmp155 false
+  483 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   484 jump *label91 always
   485 label *label91
   486 control enabled :start_reactor:reactor false
 
   512 op max :start_reactor:flow_units -0.1 *tmp165
   513 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * op lessThan *tmp169 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label93 equal *tmp169 false
+  515 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label94 always
   520 label *label93
   521 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp172 *tmp171 1
-    * jump *label95 equal *tmp172 false
+  522 jump *label95 greaterThanEq *tmp171 1
   523 op mul *tmp174 :start_reactor:flow_units 1000
   524 op floor *tmp175 *tmp174
   525 op div :start_reactor:flow *tmp175 10
 
   537 label *label95
   538 jump *label97 equal :start_reactor:fuel_on false
   539 label *label100
-    * op lessThan *tmp180 :start_reactor:fuel .FUEL_REQ
-    * jump *label97 equal *tmp180 false
+  540 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   541 jump *label99 always
   542 label *label99
   543 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp183 *tmp182 .FUEL_REQ
-    * jump *label101 equal *tmp183 false
+  544 jump *label101 lessThanEq *tmp182 .FUEL_REQ
   545 print "WAIT fuel"
   546 print "\n"
   547 jump *label102 always
 
   552 jump *label98 always
   553 label *label97
   554 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp186 :start_reactor:fuel_stored *tmp185
-    * jump *label103 equal *tmp186 false
+  555 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp185
   556 print "WAIT buffer fuel"
   557 print "\n"
   558 jump *label104 always
   559 label *label103
-    * op lessThan *tmp188 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label105 equal *tmp188 false
+  560 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   561 print "WAIT cryo"
   562 print "\n"
   563 jump *label106 always
 
   574 label *label72
   575 label *label70
   576 sensor *tmp192 :start_reactor:reactor @enabled
-    * op notEqual *tmp193 :start_reactor:enabled *tmp192
-    * jump *label107 equal *tmp193 false
+  577 jump *label107 equal :start_reactor:enabled *tmp192
   578 set .RET_T_STARTUP @tick
   579 jump *label108 always
   580 label *label107
 
   588 label *label4
   589 # "Function: def check_radar(in unit)"
   590 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp197 :check_radar:enemy_found null
-    * jump *label110 equal *tmp197 false
+  591 jump *label110 equal :check_radar:enemy_found null
   592 control enabled projector1 true
   593 control enabled projector2 true
   594 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-17 instructions):
 
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
    62 jump *label11 notEqual *tmp10 false
-    * jump *label13 always
    63 label *label13
    64 print "User has disabled emergency switch"
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   146 jump *label17 notEqual :fuel_3 false
   147 label *label19
   148 jump *label17 notEqual :fuel_4 false
-    * jump *label18 always
   149 label *label18
   150 jump *label15 equal :fuel_5 false
   151 label *label17
 
   162 jump *label22 notEqual :fuel_1 false
   163 label *label24
   164 jump *label22 notEqual :fuel_2 false
-    * jump *label23 always
   165 label *label23
   166 jump *label20 equal :fuel_many false
   167 label *label22
 
   246 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   247 label *label41
   248 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * jump *label40 always
   249 label *label40
   250 print "Differential now idle."
   251 print "\n"
 
   291 label *label48
   292 op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
   293 jump *label45 lessThanEq .AVG_SURPLUS *tmp73
-    * jump *label47 always
   294 label *label47
   295 jump *label49 lessThanEq .REACTORS_DESIRED 2
   296 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   297 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label50 always
   298 label *label49
   299 label *label50
-    * jump *label46 always
   300 label *label45
   301 label *label46
   302 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   303 label *label54
   304 op mul *tmp79 .GOAL_BUFFER 0.8
   305 jump *label51 greaterThanEq .AVG_SURPLUS *tmp79
-    * jump *label53 always
   306 label *label53
   307 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
   308 op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
   309 op max :update_reactors_desired:needed 1 *tmp83
   310 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   311 op min .REACTORS_DESIRED 5 *tmp85
-    * jump *label52 always
   312 label *label51
   313 label *label52
   314 label *label44
 
   318 print .REACTORS_DESIRED
   319 print "/5 reactors."
   320 print "\n"
-    * jump *label56 always
   321 label *label55
   322 label *label56
   323 printflush message1
 
   366 label *label66
   367 set :calc_charge_req*retval 0
   368 jump *label63 always
-    * jump *label65 always
   369 label *label64
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   419 label *label78
   420 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   421 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp132
-    * jump *label77 always
   422 label *label77
   423 control enabled :start_reactor:reactor false
   424 print "STOP system fuel low"
 
   446 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   447 label *label88
   448 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label87 always
   449 label *label87
   450 control enabled :start_reactor:reactor false
   451 print "START FAIL battery"
 
   467 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   468 label *label92
   469 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label91 always
   470 label *label91
   471 control enabled :start_reactor:reactor false
   472 print "ABANDON - battery crit"
 
   523 jump *label97 equal :start_reactor:fuel_on false
   524 label *label100
   525 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * jump *label99 always
   526 label *label99
   527 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   528 jump *label101 lessThanEq *tmp182 .FUEL_REQ
 
   560 sensor *tmp192 :start_reactor:reactor @enabled
   561 jump *label107 equal :start_reactor:enabled *tmp192
   562 set .RET_T_STARTUP @tick
-    * jump *label108 always
   563 label *label107
   564 label *label108
   565 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   372 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp106 *tmp105 25
-    * op floor :calc_charge_req:charge_req *tmp106
+  373 op idiv :calc_charge_req:charge_req *tmp105 0.04
   374 set :calc_charge_req*retval :calc_charge_req:charge_req
   375 jump *label63 always
   376 set :calc_charge_req*retval null
 
   504 label *label93
   505 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
   506 jump *label95 greaterThanEq *tmp171 1
-    * op mul *tmp174 :start_reactor:flow_units 1000
-    * op floor *tmp175 *tmp174
+  507 op idiv *tmp175 :start_reactor:flow_units 0.001
   508 op div :start_reactor:flow *tmp175 10
-    * op mul *tmp177 :start_reactor:charge_units 1000
-    * op floor *tmp178 *tmp177
+  509 op idiv *tmp178 :start_reactor:charge_units 0.001
   510 op div :start_reactor:charge *tmp178 10
   511 print "WAIT power. (%"
   512 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
+  102 set :update_fuel:fuel :start_reactor*retval
   103 set :update_fuel:uld_in .ULD_IN_1
   104 set :update_fuel:uld_out .ULD_OUT_1
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
+  114 set :update_fuel:fuel :start_reactor*retval
   115 set :update_fuel:uld_in .ULD_IN_2
   116 set :update_fuel:uld_out .ULD_OUT_2
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
 
   146 label *label19
   147 jump *label17 notEqual :fuel_4 false
   148 label *label18
-    * jump *label15 equal :fuel_5 false
+  149 jump *label15 equal :start_reactor*retval false
   150 label *label17
   151 set *tmp26 true
   152 jump *label16 always
 
   154 set *tmp26 false
   155 label *label16
   156 set :fuel_many *tmp26
-    * set :update_fuel:fuel :fuel_many
+  157 set :update_fuel:fuel *tmp26
   158 set :update_fuel:uld_in .ULD_IN_MANY
   159 set :update_fuel:uld_out .ULD_OUT_MANY
   160 call *label1 :update_fuel*retaddr :update_fuel*retval
 
   162 label *label24
   163 jump *label22 notEqual :fuel_2 false
   164 label *label23
-    * jump *label20 equal :fuel_many false
+  165 jump *label20 equal *tmp26 false
   166 label *label22
   167 set *tmp28 true
   168 jump *label21 always
 
   179 op sub *tmp34 *tmp32 *tmp33
   180 op floor :throttle_blast:surplus *tmp34
   181 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
+  182 jump *label29 greaterThanEq :throttle_blast:charge 5000
   183 label *label30
-    * jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
+  184 jump *label28 lessThan :throttle_blast:surplus -500
   185 label *label29
-    * jump *label26 equal :throttle_blast:emerg_shutdown false
+  186 jump *label26 equal :emerg_shutdown false
   187 label *label28
   188 set :throttle_blast:limit 0
   189 print "Central Fuel at "
   190 print :throttle_blast:fuel_stored
   191 print " "
   192 print "/ "
-    * print :throttle_blast:limit
+  193 print 0
   194 print " "
   195 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  196 jump *label31 equal :emerg_shutdown false
   197 print " Enemies detected."
   198 print "\n"
   199 jump *label32 always
 
   203 label *label32
   204 jump *label27 always
   205 label *label26
-    * jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  206 jump *label33 notEqual *tmp28 false
+  207 set :throttle_blast:limit 150
   208 print "Fuel "
   209 print :throttle_blast:fuel_stored
   210 print " "
   211 print "/ "
-    * print :throttle_blast:limit
+  212 print .FUEL_LIMIT_LOW
   213 print " "
   214 print "(due to emergency)"
   215 print "\n"
   216 jump *label34 always
   217 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  218 set :throttle_blast:limit 800
   219 print "Fuel "
   220 print :throttle_blast:fuel_stored
   221 print " "
   222 print "/ "
-    * print :throttle_blast:limit
+  223 print .FUEL_LIMIT
   224 print "\"
   225 print "n"
   226 label *label34
   227 label *label27
   228 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   229 jump *label25 always
-    * set *tmp29 null
   230 label *label25
   231 set :feed_mixers *tmp29
   232 set *tmp44 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp46 .MIXER_IN
+  233 jump *label35 equal *tmp29 false
+  234 set *tmp46 @pyratite
   235 jump *label36 always
   236 label *label35
-    * set *tmp46 .FUEL_OFF
+  237 set *tmp46 @scrap
   238 label *label36
-    * control config *tmp44 *tmp46
+  239 control config .ULD_MIXER *tmp46
   240 # "Function: def diff_generators()"
   241 sensor *tmp48 .NODE @powerNetStored
   242 sensor *tmp49 .NODE @powerNetCapacity
 
   266 call *label0 :kilo*retaddr :kilo*retval
   267 set :req :kilo*retval
   268 print "Req "
-    * print :req
+  269 print :kilo*retval
   270 print "kJ / "
   271 print :charge
   272 print "kJ. "
 
   278 print "Power "
   279 print :surplus
   280 print "kW, "
-    * print :charge
+  281 print :kilo*retval
   282 print "kJ"
   283 print "\n"
   284 # "Function: def update_reactors_desired()"
 
   287 op div :update_reactors_desired:stored *tmp69 *tmp70
   288 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   289 label *label48
-    * op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * jump *label45 lessThanEq .AVG_SURPLUS *tmp73
+  290 op add *tmp73 6500 10000
+  291 jump *label45 lessThanEq .AVG_SURPLUS 16500
   292 label *label47
   293 jump *label49 lessThanEq .REACTORS_DESIRED 2
   294 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  295 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   296 label *label49
   297 label *label50
   298 label *label45
   299 label *label46
   300 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   301 label *label54
-    * op mul *tmp79 .GOAL_BUFFER 0.8
-    * jump *label51 greaterThanEq .AVG_SURPLUS *tmp79
+  302 op mul *tmp79 10000 0.8
+  303 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   304 label *label53
-    * op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
+  305 op sub *tmp82 .AVG_SURPLUS 10000
+  306 op idiv *tmp83 *tmp82 6500
   307 op max :update_reactors_desired:needed 1 *tmp83
   308 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   309 op min .REACTORS_DESIRED 5 *tmp85
 
   328 op idiv *tmp89 :kilo:val 100
   329 op div :kilo*retval *tmp89 10
   330 jump *label57 always
-    * set :kilo*retval null
   331 label *label57
   332 return :kilo*retaddr
   333 end
 
   340 label *label59
   341 set *tmp93 .FUEL_OFF
   342 label *label60
-    * control config *tmp91 *tmp93
+  343 control config :update_fuel:uld_in *tmp93
   344 set *tmp94 :update_fuel:uld_out
   345 jump *label61 notEqual :update_fuel:fuel false
   346 set *tmp97 .FUEL
 
   348 label *label61
   349 set *tmp97 .FUEL_OFF
   350 label *label62
-    * control config *tmp94 *tmp97
+  351 control config :update_fuel:uld_out *tmp97
   352 label *label58
   353 return :update_fuel*retaddr
   354 end
 
   370 op idiv :calc_charge_req:charge_req *tmp105 0.04
   371 set :calc_charge_req*retval :calc_charge_req:charge_req
   372 jump *label63 always
-    * set :calc_charge_req*retval null
   373 label *label63
   374 return :calc_charge_req*retaddr
   375 end
 
   437 set :calc_charge_req:time :start_reactor:t_startup
   438 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   439 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp147 :start_reactor:charge :start_reactor:charge_req
+  440 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   441 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   442 label *label88
   443 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   453 print :start_reactor:time_left
   454 print " "
   455 print "secs, req "
-    * print :start_reactor:charge_req
+  456 print :calc_charge_req*retval
   457 print "J"
   458 print "\n"
   459 label *label86
 
   557 label *label108
   558 set :start_reactor*retval :start_reactor:supply_fuel
   559 jump *label68 always
-    * set :start_reactor*retval null
   560 label *label68
   561 return :start_reactor*retaddr
   562 end
 
   580 control enabled reactor5 false
   581 set :check_radar*retval true
   582 jump *label109 always
-    * set *tmp198 null
   583 jump *label111 always
   584 label *label110
   585 control enabled projector1 false
   586 control enabled projector2 false
   587 set :check_radar*retval false
   588 jump *label109 always
-    * set *tmp198 null
   589 label *label111
-    * set :check_radar*retval *tmp198
+  590 set :check_radar*retval null
   591 label *label109
   592 return :check_radar*retaddr
   593 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    51 set .NODE node1
    52 set :check_radar:unit .TOWER
    53 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    54 # "Function: def check_manual_shutdown()"
    55 jump *label11 equal switch1 null
    56 label *label14
 
   149 label *label15
   150 set *tmp26 false
   151 label *label16
-    * set :fuel_many *tmp26
   152 set :update_fuel:fuel *tmp26
   153 set :update_fuel:uld_in .ULD_IN_MANY
   154 set :update_fuel:uld_out .ULD_OUT_MANY
 
   165 set *tmp28 false
   166 label *label21
   167 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp28
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   168 sensor *tmp30 .NODE @powerNetStored
   169 op floor :throttle_blast:charge *tmp30
   170 sensor *tmp32 .NODE @powerNetIn
 
   202 print :throttle_blast:fuel_stored
   203 print " "
   204 print "/ "
-    * print .FUEL_LIMIT_LOW
+  205 print 150
   206 print " "
   207 print "(due to emergency)"
   208 print "\n"
 
   213 print :throttle_blast:fuel_stored
   214 print " "
   215 print "/ "
-    * print .FUEL_LIMIT
+  216 print 800
   217 print "\"
   218 print "n"
   219 label *label34
 
   221 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   222 jump *label25 always
   223 label *label25
-    * set :feed_mixers *tmp29
-    * set *tmp44 .ULD_MIXER
   224 jump *label35 equal *tmp29 false
   225 set *tmp46 @pyratite
   226 jump *label36 always
 
   255 jump *label42 lessThanEq .START_POWER_REQ 0
   256 set :kilo:val .START_POWER_REQ
   257 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   258 print "Req "
   259 print :kilo*retval
   260 print "kJ / "
 
   277 op div :update_reactors_desired:stored *tmp69 *tmp70
   278 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   279 label *label48
-    * op add *tmp73 6500 10000
   280 jump *label45 lessThanEq .AVG_SURPLUS 16500
   281 label *label47
   282 jump *label49 lessThanEq .REACTORS_DESIRED 2
 
   288 label *label46
   289 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   290 label *label54
-    * op mul *tmp79 10000 0.8
   291 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   292 label *label53
   293 op sub *tmp82 .AVG_SURPLUS 10000
 
   321 end
   322 label *label1
   323 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp91 :update_fuel:uld_in
   324 jump *label59 equal :update_fuel:fuel false
   325 set *tmp93 .FUEL
   326 jump *label60 always
 
   328 set *tmp93 .FUEL_OFF
   329 label *label60
   330 control config :update_fuel:uld_in *tmp93
-    * set *tmp94 :update_fuel:uld_out
   331 jump *label61 notEqual :update_fuel:fuel false
   332 set *tmp97 .FUEL
   333 jump *label62 always
 
   422 set :calc_charge_req:reactor :start_reactor:reactor
   423 set :calc_charge_req:time :start_reactor:t_startup
   424 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   425 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   426 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   427 label *label88
 
   572 set :check_radar*retval false
   573 jump *label109 always
   574 label *label111
-    * set :check_radar*retval null
   575 label *label109
   576 return :check_radar*retaddr
   577 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, Boolean Optimization, pass 1, iteration 1 (-20 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp231 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
    46 call *label4 :check_radar*retaddr :check_radar*retval
    47 # "Function: def check_manual_shutdown()"
    48 jump *label11 equal switch1 null
-    * label *label14
    49 sensor *tmp10 switch1 @enabled
    50 jump *label11 notEqual *tmp10 false
-    * label *label13
    51 print "User has disabled emergency switch"
    52 print "\n"
    53 set *tmp8 true
 
   129 call *label3 :start_reactor*retaddr :start_reactor*retval
   130 set :fuel_5 :start_reactor*retval
   131 set :t_startup5 .RET_T_STARTUP
-    * jump *label17 notEqual :fuel_3 false
-    * label *label19
-    * jump *label17 notEqual :fuel_4 false
-    * label *label18
-    * jump *label15 equal :start_reactor*retval false
-    * label *label17
-    * set *tmp26 true
-    * jump *label16 always
-    * label *label15
-    * set *tmp26 false
-    * label *label16
+  132 op or *tmp232 :fuel_3 :fuel_4
+  133 op or *tmp26 *tmp232 :start_reactor*retval
   134 set :update_fuel:fuel *tmp26
   135 set :update_fuel:uld_in .ULD_IN_MANY
   136 set :update_fuel:uld_out .ULD_OUT_MANY
   137 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * jump *label22 notEqual :fuel_1 false
-    * label *label24
-    * jump *label22 notEqual :fuel_2 false
-    * label *label23
-    * jump *label20 equal *tmp26 false
-    * label *label22
-    * set *tmp28 true
-    * jump *label21 always
-    * label *label20
-    * set *tmp28 false
-    * label *label21
+  138 op or *tmp233 :fuel_1 :fuel_2
+  139 op or *tmp28 *tmp233 *tmp26
   140 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   141 sensor *tmp30 .NODE @powerNetStored
   142 op floor :throttle_blast:charge *tmp30
 
   146 op floor :throttle_blast:surplus *tmp34
   147 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   148 jump *label29 greaterThanEq :throttle_blast:charge 5000
-    * label *label30
   149 jump *label28 lessThan :throttle_blast:surplus -500
   150 label *label29
   151 jump *label26 equal :emerg_shutdown false
 
   193 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   194 jump *label25 always
   195 label *label25
-    * jump *label35 equal *tmp29 false
-    * set *tmp46 @pyratite
-    * jump *label36 always
-    * label *label35
-    * set *tmp46 @scrap
-    * label *label36
+  196 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   197 control config .ULD_MIXER *tmp46
   198 # "Function: def diff_generators()"
   199 sensor *tmp48 .NODE @powerNetStored
   200 sensor *tmp49 .NODE @powerNetCapacity
   201 op div :diff_generators:stored_pc *tmp48 *tmp49
   202 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
-    * label *label41
   203 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * label *label40
   204 print "Differential now idle."
   205 print "\n"
   206 control enabled generator1 false
 
   241 sensor *tmp70 .NODE @powerNetCapacity
   242 op div :update_reactors_desired:stored *tmp69 *tmp70
   243 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
-    * label *label48
   244 jump *label45 lessThanEq .AVG_SURPLUS 16500
-    * label *label47
   245 jump *label49 lessThanEq .REACTORS_DESIRED 2
   246 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   247 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
 
   250 label *label45
   251 label *label46
   252 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
-    * label *label54
   253 jump *label51 greaterThanEq .AVG_SURPLUS 8000
-    * label *label53
   254 op sub *tmp82 .AVG_SURPLUS 10000
   255 op idiv *tmp83 *tmp82 6500
   256 op max :update_reactors_desired:needed 1 *tmp83
 
   282 end
   283 label *label1
   284 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label59 equal :update_fuel:fuel false
-    * set *tmp93 .FUEL
-    * jump *label60 always
-    * label *label59
-    * set *tmp93 .FUEL_OFF
-    * label *label60
+  285 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   286 control config :update_fuel:uld_in *tmp93
-    * jump *label61 notEqual :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label62 always
-    * label *label61
-    * set *tmp97 .FUEL_OFF
-    * label *label62
+  287 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   288 control config :update_fuel:uld_out *tmp97
   289 label *label58
   290 return :update_fuel*retaddr
 
   294 op sub *tmp98 @tick :calc_charge_req:time
   295 op idiv :calc_charge_req:secs *tmp98 60
   296 jump *label66 greaterThan :calc_charge_req:secs 30
-    * label *label67
   297 sensor *tmp101 :calc_charge_req:reactor @enabled
   298 jump *label64 notEqual *tmp101 false
   299 label *label66
 
   347 jump *label74 always
   348 label *label73
   349 jump *label75 lessThanEq :start_reactor:reactor_num 1
-    * label *label78
   350 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   351 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp132
-    * label *label77
   352 control enabled :start_reactor:reactor false
   353 print "STOP system fuel low"
   354 print "\n"
 
   372 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   373 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   374 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
-    * label *label88
   375 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label87
   376 control enabled :start_reactor:reactor false
   377 print "START FAIL battery"
   378 print "\n"
 
   391 jump *label84 always
   392 label *label83
   393 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * label *label92
   394 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label91
   395 control enabled :start_reactor:reactor false
   396 print "ABANDON - battery crit"
   397 print "\n"
 
   443 jump *label96 always
   444 label *label95
   445 jump *label97 equal :start_reactor:fuel_on false
-    * label *label100
   446 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * label *label99
   447 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   448 jump *label101 lessThanEq *tmp182 .FUEL_REQ
   449 print "WAIT fuel"
 
   477 label *label94
   478 label *label72
   479 label *label70
-    * sensor *tmp192 :start_reactor:reactor @enabled
-    * jump *label107 equal :start_reactor:enabled *tmp192
-    * set .RET_T_STARTUP @tick
-    * label *label107
-    * label *label108
+  480 sensor *tmp192 :start_reactor:reactor @enabled
+  481 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick .RET_T_STARTUP
   482 set :start_reactor*retval :start_reactor:supply_fuel
   483 jump *label68 always
   484 label *label68

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   212 label *label39
   213 label *label37
   214 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  215 label *label114
+  216 # "Function: def kilo(in val)"
+  217 op idiv *tmp89 :kilo:val 100
+  218 op div :kilo*retval *tmp89 10
+  219 jump *label115 always
+  220 label *label115
   221 set :surplus :kilo*retval
   222 sensor :kilo:val .NODE @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  223 label *label116
+  224 # "Function: def kilo(in val)"
+  225 op idiv *tmp89 :kilo:val 100
+  226 op div :kilo*retval *tmp89 10
+  227 jump *label117 always
+  228 label *label117
   229 set :charge :kilo*retval
   230 jump *label42 lessThanEq .START_POWER_REQ 0
   231 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  232 label *label118
+  233 # "Function: def kilo(in val)"
+  234 op idiv *tmp89 :kilo:val 100
+  235 op div :kilo*retval *tmp89 10
+  236 jump *label119 always
+  237 label *label119
   238 print "Req "
   239 print :kilo*retval
   240 print "kJ / "
 
   287 jump *label7 always
   288 label *label9
   289 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp89 :kilo:val 100
-    * op div :kilo*retval *tmp89 10
-    * jump *label57 always
-    * label *label57
-    * return :kilo*retaddr
-    * end
   290 label *label1
   291 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   292 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   214 set :kilo:val .AVG_SURPLUS
   215 label *label114
   216 # "Function: def kilo(in val)"
-    * op idiv *tmp89 :kilo:val 100
+  217 op idiv *tmp89 .AVG_SURPLUS 100
   218 op div :kilo*retval *tmp89 10
   219 jump *label115 always
   220 label *label115
 
   231 set :kilo:val .START_POWER_REQ
   232 label *label118
   233 # "Function: def kilo(in val)"
-    * op idiv *tmp89 :kilo:val 100
+  234 op idiv *tmp89 .START_POWER_REQ 100
   235 op div :kilo*retval *tmp89 10
   236 jump *label119 always
   237 label *label119

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   211 control enabled generator2 true
   212 label *label39
   213 label *label37
-    * set :kilo:val .AVG_SURPLUS
   214 label *label114
   215 # "Function: def kilo(in val)"
   216 op idiv *tmp89 .AVG_SURPLUS 100
 
   227 label *label117
   228 set :charge :kilo*retval
   229 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   230 label *label118
   231 # "Function: def kilo(in val)"
   232 op idiv *tmp89 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
    89 set :update_fuel:fuel :start_reactor*retval
    90 set :update_fuel:uld_in .ULD_IN_1
    91 set :update_fuel:uld_out .ULD_OUT_1
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   92 label *label120
+   93 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   94 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+   95 control config :update_fuel:uld_in *tmp93
+   96 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+   97 control config :update_fuel:uld_out *tmp97
+   98 label *label121
    99 set :start_reactor:reactor reactor2
   100 set :start_reactor:reactor_num 2
   101 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   107 set :update_fuel:fuel :start_reactor*retval
   108 set :update_fuel:uld_in .ULD_IN_2
   109 set :update_fuel:uld_out .ULD_OUT_2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  110 label *label122
+  111 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  112 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  113 control config :update_fuel:uld_in *tmp93
+  114 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  115 control config :update_fuel:uld_out *tmp97
+  116 label *label123
   117 set :check_radar:unit .TOWER
   118 call *label4 :check_radar*retaddr :check_radar*retval
   119 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   146 set :update_fuel:fuel *tmp26
   147 set :update_fuel:uld_in .ULD_IN_MANY
   148 set :update_fuel:uld_out .ULD_OUT_MANY
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  149 label *label124
+  150 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  151 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  152 control config :update_fuel:uld_in *tmp93
+  153 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  154 control config :update_fuel:uld_out *tmp97
+  155 label *label125
   156 op or *tmp233 :fuel_1 :fuel_2
   157 op or *tmp28 *tmp233 *tmp26
   158 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   303 jump *label7 always
   304 label *label9
   305 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
-    * label *label58
-    * return :update_fuel*retaddr
-    * end
   306 label *label2
   307 # "Function: def calc_charge_req(in reactor, in time)"
   308 op sub *tmp98 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    91 set :update_fuel:uld_out .ULD_OUT_1
    92 label *label120
    93 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+   94 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+   95 control config .ULD_IN_1 *tmp93
+   96 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+   97 control config .ULD_OUT_1 *tmp97
    98 label *label121
    99 set :start_reactor:reactor reactor2
   100 set :start_reactor:reactor_num 2
 
   109 set :update_fuel:uld_out .ULD_OUT_2
   110 label *label122
   111 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+  112 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  113 control config .ULD_IN_2 *tmp93
+  114 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  115 control config .ULD_OUT_2 *tmp97
   116 label *label123
   117 set :check_radar:unit .TOWER
   118 call *label4 :check_radar*retaddr :check_radar*retval
 
   148 set :update_fuel:uld_out .ULD_OUT_MANY
   149 label *label124
   150 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+  151 select *tmp93 notEqual *tmp26 false @blast-compound @scrap
+  152 control config .ULD_IN_MANY *tmp93
+  153 select *tmp97 equal *tmp26 false @blast-compound @scrap
+  154 control config .ULD_OUT_MANY *tmp97
   155 label *label125
   156 op or *tmp233 :fuel_1 :fuel_2
   157 op or *tmp28 *tmp233 *tmp26

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    86 call *label3 :start_reactor*retaddr :start_reactor*retval
    87 set :fuel_1 :start_reactor*retval
    88 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
    89 label *label120
    90 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    91 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
 
   101 call *label3 :start_reactor*retaddr :start_reactor*retval
   102 set :fuel_2 :start_reactor*retval
   103 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
   104 label *label122
   105 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   106 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
 
   137 set :t_startup5 .RET_T_STARTUP
   138 op or *tmp232 :fuel_3 :fuel_4
   139 op or *tmp26 *tmp232 :start_reactor*retval
-    * set :update_fuel:fuel *tmp26
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
   140 label *label124
   141 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   142 select *tmp93 notEqual *tmp26 false @blast-compound @scrap

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+46 instructions):
 
    60 op or :emerg_shutdown :check_radar*retval *tmp8
    61 set :calc_charge_req:reactor reactor1
    62 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   63 label *label126
+   64 # "Function: def calc_charge_req(in reactor, in time)"
+   65 op sub *tmp98 @tick :calc_charge_req:time
+   66 op idiv :calc_charge_req:secs *tmp98 60
+   67 jump *label127 greaterThan :calc_charge_req:secs 30
+   68 sensor *tmp101 :calc_charge_req:reactor @enabled
+   69 jump *label128 notEqual *tmp101 false
+   70 label *label127
+   71 set :calc_charge_req*retval 0
+   72 jump *label130 always
+   73 label *label128
+   74 label *label129
+   75 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   76 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+   77 op idiv :calc_charge_req:charge_req *tmp105 0.04
+   78 set :calc_charge_req*retval :calc_charge_req:charge_req
+   79 jump *label130 always
+   80 label *label130
    81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   84 label *label131
+   85 # "Function: def calc_charge_req(in reactor, in time)"
+   86 op sub *tmp98 @tick :calc_charge_req:time
+   87 op idiv :calc_charge_req:secs *tmp98 60
+   88 jump *label132 greaterThan :calc_charge_req:secs 30
+   89 sensor *tmp101 :calc_charge_req:reactor @enabled
+   90 jump *label133 notEqual *tmp101 false
+   91 label *label132
+   92 set :calc_charge_req*retval 0
+   93 jump *label135 always
+   94 label *label133
+   95 label *label134
+   96 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   97 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+   98 op idiv :calc_charge_req:charge_req *tmp105 0.04
+   99 set :calc_charge_req*retval :calc_charge_req:charge_req
+  100 jump *label135 always
+  101 label *label135
   102 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   103 set :calc_charge_req:reactor reactor3
   104 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  105 label *label136
+  106 # "Function: def calc_charge_req(in reactor, in time)"
+  107 op sub *tmp98 @tick :calc_charge_req:time
+  108 op idiv :calc_charge_req:secs *tmp98 60
+  109 jump *label137 greaterThan :calc_charge_req:secs 30
+  110 sensor *tmp101 :calc_charge_req:reactor @enabled
+  111 jump *label138 notEqual *tmp101 false
+  112 label *label137
+  113 set :calc_charge_req*retval 0
+  114 jump *label140 always
+  115 label *label138
+  116 label *label139
+  117 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  118 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  119 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  120 set :calc_charge_req*retval :calc_charge_req:charge_req
+  121 jump *label140 always
+  122 label *label140
   123 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   124 set :calc_charge_req:reactor reactor4
   125 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  126 label *label141
+  127 # "Function: def calc_charge_req(in reactor, in time)"
+  128 op sub *tmp98 @tick :calc_charge_req:time
+  129 op idiv :calc_charge_req:secs *tmp98 60
+  130 jump *label142 greaterThan :calc_charge_req:secs 30
+  131 sensor *tmp101 :calc_charge_req:reactor @enabled
+  132 jump *label143 notEqual *tmp101 false
+  133 label *label142
+  134 set :calc_charge_req*retval 0
+  135 jump *label145 always
+  136 label *label143
+  137 label *label144
+  138 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  139 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  140 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  141 set :calc_charge_req*retval :calc_charge_req:charge_req
+  142 jump *label145 always
+  143 label *label145
   144 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   145 set :calc_charge_req:reactor reactor5
   146 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  147 label *label146
+  148 # "Function: def calc_charge_req(in reactor, in time)"
+  149 op sub *tmp98 @tick :calc_charge_req:time
+  150 op idiv :calc_charge_req:secs *tmp98 60
+  151 jump *label147 greaterThan :calc_charge_req:secs 30
+  152 sensor *tmp101 :calc_charge_req:reactor @enabled
+  153 jump *label148 notEqual *tmp101 false
+  154 label *label147
+  155 set :calc_charge_req*retval 0
+  156 jump *label150 always
+  157 label *label148
+  158 label *label149
+  159 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  160 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  161 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  162 set :calc_charge_req*retval :calc_charge_req:charge_req
+  163 jump *label150 always
+  164 label *label150
   165 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   166 set :start_reactor:reactor reactor1
   167 set :start_reactor:reactor_num 1
 
   379 jump *label7 always
   380 label *label9
   381 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp98 60
-    * jump *label66 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp101 :calc_charge_req:reactor @enabled
-    * jump *label64 notEqual *tmp101 false
-    * label *label66
-    * set :calc_charge_req*retval 0
-    * jump *label63 always
-    * label *label64
-    * label *label65
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp105 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label63 always
-    * label *label63
-    * return :calc_charge_req*retaddr
-    * end
   382 label *label3
   383 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   384 set .RET_T_STARTUP :start_reactor:t_startup
 
   439 jump *label83 greaterThanEq :start_reactor:secs 30
   440 set :calc_charge_req:reactor :start_reactor:reactor
   441 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  442 label *label151
+  443 # "Function: def calc_charge_req(in reactor, in time)"
+  444 op sub *tmp98 @tick :calc_charge_req:time
+  445 op idiv :calc_charge_req:secs *tmp98 60
+  446 jump *label152 greaterThan :calc_charge_req:secs 30
+  447 sensor *tmp101 :calc_charge_req:reactor @enabled
+  448 jump *label153 notEqual *tmp101 false
+  449 label *label152
+  450 set :calc_charge_req*retval 0
+  451 jump *label155 always
+  452 label *label153
+  453 label *label154
+  454 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  455 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  456 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  457 set :calc_charge_req*retval :calc_charge_req:charge_req
+  458 jump *label155 always
+  459 label *label155
   460 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   461 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   462 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    62 set :calc_charge_req:time :t_startup1
    63 label *label126
    64 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+   65 op sub *tmp98 @tick :t_startup1
    66 op idiv :calc_charge_req:secs *tmp98 60
    67 jump *label127 greaterThan :calc_charge_req:secs 30
    68 sensor *tmp101 :calc_charge_req:reactor @enabled
 
    83 set :calc_charge_req:time :t_startup2
    84 label *label131
    85 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+   86 op sub *tmp98 @tick :t_startup2
    87 op idiv :calc_charge_req:secs *tmp98 60
    88 jump *label132 greaterThan :calc_charge_req:secs 30
    89 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   104 set :calc_charge_req:time :t_startup3
   105 label *label136
   106 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+  107 op sub *tmp98 @tick :t_startup3
   108 op idiv :calc_charge_req:secs *tmp98 60
   109 jump *label137 greaterThan :calc_charge_req:secs 30
   110 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   125 set :calc_charge_req:time :t_startup4
   126 label *label141
   127 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+  128 op sub *tmp98 @tick :t_startup4
   129 op idiv :calc_charge_req:secs *tmp98 60
   130 jump *label142 greaterThan :calc_charge_req:secs 30
   131 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   146 set :calc_charge_req:time :t_startup5
   147 label *label146
   148 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+  149 op sub *tmp98 @tick :t_startup5
   150 op idiv :calc_charge_req:secs *tmp98 60
   151 jump *label147 greaterThan :calc_charge_req:secs 30
   152 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   441 set :calc_charge_req:time :start_reactor:t_startup
   442 label *label151
   443 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :calc_charge_req:time
+  444 op sub *tmp98 @tick :start_reactor:t_startup
   445 op idiv :calc_charge_req:secs *tmp98 60
   446 jump *label152 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp101 :calc_charge_req:reactor @enabled
+  447 sensor *tmp101 :start_reactor:reactor @enabled
   448 jump *label153 notEqual *tmp101 false
   449 label *label152
   450 set :calc_charge_req*retval 0
 
   565 label *label72
   566 label *label70
   567 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick .RET_T_STARTUP
+  568 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
   569 set :start_reactor*retval :start_reactor:supply_fuel
   570 jump *label68 always
   571 label *label68

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-8 instructions):
 
    59 label *label10
    60 op or :emerg_shutdown :check_radar*retval *tmp8
    61 set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    62 label *label126
    63 # "Function: def calc_charge_req(in reactor, in time)"
    64 op sub *tmp98 @tick :t_startup1
 
    79 label *label130
    80 set .START_POWER_REQ :calc_charge_req*retval
    81 set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    82 label *label131
    83 # "Function: def calc_charge_req(in reactor, in time)"
    84 op sub *tmp98 @tick :t_startup2
 
    99 label *label135
   100 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   101 set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   102 label *label136
   103 # "Function: def calc_charge_req(in reactor, in time)"
   104 op sub *tmp98 @tick :t_startup3
 
   119 label *label140
   120 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   121 set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   122 label *label141
   123 # "Function: def calc_charge_req(in reactor, in time)"
   124 op sub *tmp98 @tick :t_startup4
 
   139 label *label145
   140 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   141 set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   142 label *label146
   143 # "Function: def calc_charge_req(in reactor, in time)"
   144 op sub *tmp98 @tick :t_startup5
 
   376 end
   377 label *label3
   378 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
   379 op sub *tmp108 @tick :start_reactor:t_startup
   380 op idiv :start_reactor:secs *tmp108 60
   381 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   431 jump *label82 always
   432 label *label81
   433 jump *label83 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   434 label *label151
   435 # "Function: def calc_charge_req(in reactor, in time)"
   436 op sub *tmp98 @tick :start_reactor:t_startup

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    43 set .CONTAINER vault1
    44 set .NODE node1
    45 set :check_radar:unit .TOWER
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   46 label *label156
+   47 # "Function: def check_radar(in unit)"
+   48 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   49 jump *label157 equal :check_radar:enemy_found null
+   50 control enabled projector1 true
+   51 control enabled projector2 true
+   52 control config .ULD_IN_1 .FUEL_OFF
+   53 control config .ULD_OUT_1 .FUEL
+   54 control config .ULD_IN_2 .FUEL_OFF
+   55 control config .ULD_OUT_2 .FUEL
+   56 control config .ULD_IN_MANY .FUEL_OFF
+   57 control config .ULD_OUT_MANY .FUEL
+   58 control config .ULD_MIXER .FUEL_OFF
+   59 control enabled reactor1 false
+   60 control enabled reactor2 false
+   61 control enabled reactor3 false
+   62 control enabled reactor4 false
+   63 control enabled reactor5 false
+   64 set :check_radar*retval true
+   65 jump *label159 always
+   66 jump *label158 always
+   67 label *label157
+   68 control enabled projector1 false
+   69 control enabled projector2 false
+   70 set :check_radar*retval false
+   71 jump *label159 always
+   72 label *label158
+   73 label *label159
    74 # "Function: def check_manual_shutdown()"
    75 jump *label11 equal switch1 null
    76 sensor *tmp10 switch1 @enabled
 
   216 control config .ULD_OUT_2 *tmp97
   217 label *label123
   218 set :check_radar:unit .TOWER
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  219 label *label160
+  220 # "Function: def check_radar(in unit)"
+  221 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  222 jump *label161 equal :check_radar:enemy_found null
+  223 control enabled projector1 true
+  224 control enabled projector2 true
+  225 control config .ULD_IN_1 .FUEL_OFF
+  226 control config .ULD_OUT_1 .FUEL
+  227 control config .ULD_IN_2 .FUEL_OFF
+  228 control config .ULD_OUT_2 .FUEL
+  229 control config .ULD_IN_MANY .FUEL_OFF
+  230 control config .ULD_OUT_MANY .FUEL
+  231 control config .ULD_MIXER .FUEL_OFF
+  232 control enabled reactor1 false
+  233 control enabled reactor2 false
+  234 control enabled reactor3 false
+  235 control enabled reactor4 false
+  236 control enabled reactor5 false
+  237 set :check_radar*retval true
+  238 jump *label163 always
+  239 jump *label162 always
+  240 label *label161
+  241 control enabled projector1 false
+  242 control enabled projector2 false
+  243 set :check_radar*retval false
+  244 jump *label163 always
+  245 label *label162
+  246 label *label163
   247 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   248 set :start_reactor:reactor reactor3
   249 set :start_reactor:reactor_num 3
 
   617 label *label68
   618 return :start_reactor*retaddr
   619 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label110 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label109 always
-    * jump *label111 always
-    * label *label110
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label109 always
-    * label *label111
-    * label *label109
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    45 set :check_radar:unit .TOWER
    46 label *label156
    47 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   48 radar enemy any any health .TOWER 1 :check_radar:enemy_found
    49 jump *label157 equal :check_radar:enemy_found null
    50 control enabled projector1 true
    51 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   52 control config .ULD_IN_1 @scrap
+   53 control config .ULD_OUT_1 @blast-compound
+   54 control config .ULD_IN_2 @scrap
+   55 control config .ULD_OUT_2 @blast-compound
+   56 control config .ULD_IN_MANY @scrap
+   57 control config .ULD_OUT_MANY @blast-compound
+   58 control config .ULD_MIXER @scrap
    59 control enabled reactor1 false
    60 control enabled reactor2 false
    61 control enabled reactor3 false
 
   218 set :check_radar:unit .TOWER
   219 label *label160
   220 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  221 radar enemy any any health .TOWER 1 :check_radar:enemy_found
   222 jump *label161 equal :check_radar:enemy_found null
   223 control enabled projector1 true
   224 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  225 control config .ULD_IN_1 @scrap
+  226 control config .ULD_OUT_1 @blast-compound
+  227 control config .ULD_IN_2 @scrap
+  228 control config .ULD_OUT_2 @blast-compound
+  229 control config .ULD_IN_MANY @scrap
+  230 control config .ULD_OUT_MANY @blast-compound
+  231 control config .ULD_MIXER @scrap
   232 control enabled reactor1 false
   233 control enabled reactor2 false
   234 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-4 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    40 set .TOWER cyclone1
    41 set .CONTAINER vault1
    42 set .NODE node1
-    * set :check_radar:unit .TOWER
    43 label *label156
    44 # "Function: def check_radar(in unit)"
    45 radar enemy any any health .TOWER 1 :check_radar:enemy_found
 
   212 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
   213 control config .ULD_OUT_2 *tmp97
   214 label *label123
-    * set :check_radar:unit .TOWER
   215 label *label160
   216 # "Function: def check_radar(in unit)"
   217 radar enemy any any health .TOWER 1 :check_radar:enemy_found

Modifications by Inline function call at line 80:14 (+146 instructions):
 
   187 set :start_reactor:emerg_shutdown :emerg_shutdown
   188 set :start_reactor:fuel_on :fuel_1
   189 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  190 label *label164
+  191 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  192 op sub *tmp108 @tick :start_reactor:t_startup
+  193 op idiv :start_reactor:secs *tmp108 60
+  194 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  195 set :start_reactor:supply_fuel true
+  196 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  197 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  198 sensor *tmp113 .NODE @powerNetStored
+  199 op floor :start_reactor:charge *tmp113
+  200 sensor *tmp115 .NODE @powerNetIn
+  201 sensor *tmp116 .NODE @powerNetOut
+  202 op sub *tmp117 *tmp115 *tmp116
+  203 op floor :start_reactor:surplus *tmp117
+  204 op mul *tmp119 .AVG_SURPLUS 0.8
+  205 op mul *tmp120 :start_reactor:surplus 0.2
+  206 op add .AVG_SURPLUS *tmp119 *tmp120
+  207 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  208 print "#"
+  209 print :start_reactor:reactor_num
+  210 print " "
+  211 print "- "
+  212 jump *label165 equal :start_reactor:emerg_shutdown false
+  213 control enabled :start_reactor:reactor false
+  214 print "emergency mode"
+  215 print "\n"
+  216 set :start_reactor:supply_fuel false
+  217 jump *label199 always
+  218 label *label165
+  219 jump *label185 equal :start_reactor:enabled false
+  220 jump *label166 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  221 control enabled :start_reactor:reactor false
+  222 print "STOP unwanted"
+  223 print "\n"
+  224 jump *label184 always
+  225 label *label166
+  226 jump *label167 lessThanEq :start_reactor:reactor_num 1
+  227 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  228 jump *label167 greaterThanEq :start_reactor:fuel_stored *tmp132
+  229 control enabled :start_reactor:reactor false
+  230 print "STOP system fuel low"
+  231 print "\n"
+  232 jump *label183 always
+  233 label *label167
+  234 jump *label168 greaterThan :start_reactor:fuel 1
+  235 control enabled :start_reactor:reactor false
+  236 print "STOP fuel low"
+  237 print "\n"
+  238 jump *label182 always
+  239 label *label168
+  240 jump *label169 greaterThan :start_reactor:cryo .CRYO_ABORT
+  241 control enabled :start_reactor:reactor false
+  242 print "STOP out of cryo"
+  243 print "\n"
+  244 jump *label181 always
+  245 label *label169
+  246 jump *label177 greaterThanEq :start_reactor:secs 30
+  247 label *label170
+  248 # "Function: def calc_charge_req(in reactor, in time)"
+  249 op sub *tmp98 @tick :start_reactor:t_startup
+  250 op idiv :calc_charge_req:secs *tmp98 60
+  251 jump *label171 greaterThan :calc_charge_req:secs 30
+  252 sensor *tmp101 :start_reactor:reactor @enabled
+  253 jump *label172 notEqual *tmp101 false
+  254 label *label171
+  255 set :calc_charge_req*retval 0
+  256 jump *label174 always
+  257 label *label172
+  258 label *label173
+  259 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  260 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  261 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  262 set :calc_charge_req*retval :calc_charge_req:charge_req
+  263 jump *label174 always
+  264 label *label174
+  265 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  266 jump *label175 greaterThanEq *tmp147 .PWR_ABORT
+  267 jump *label175 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  268 control enabled :start_reactor:reactor false
+  269 print "START FAIL battery"
+  270 print "\n"
+  271 set :start_reactor:supply_fuel false
+  272 jump *label176 always
+  273 label *label175
+  274 op sub :start_reactor:time_left 30 :start_reactor:secs
+  275 print "Starting "
+  276 print :start_reactor:time_left
+  277 print " "
+  278 print "secs, req "
+  279 print :calc_charge_req*retval
+  280 print "J"
+  281 print "\n"
+  282 label *label176
+  283 jump *label180 always
+  284 label *label177
+  285 jump *label178 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  286 jump *label178 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  287 control enabled :start_reactor:reactor false
+  288 print "ABANDON - battery crit"
+  289 print "\n"
+  290 set :start_reactor:supply_fuel false
+  291 jump *label179 always
+  292 label *label178
+  293 op idiv :start_reactor:mins :start_reactor:secs 6
+  294 op div :start_reactor:mins :start_reactor:mins 10
+  295 print "RUN "
+  296 print :start_reactor:mins
+  297 print " "
+  298 print "mins"
+  299 print "\n"
+  300 label *label179
+  301 label *label180
+  302 label *label181
+  303 label *label182
+  304 label *label183
+  305 label *label184
+  306 jump *label198 always
+  307 label *label185
+  308 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  309 op sub *tmp162 *tmp161 .PWR_ABORT
+  310 op div *tmp163 *tmp162 .PWR_REQ
+  311 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  312 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  313 op max :start_reactor:flow_units -0.1 *tmp165
+  314 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  315 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  316 jump *label186 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  317 print "IDLE"
+  318 print "\n"
+  319 set :start_reactor:supply_fuel false
+  320 jump *label197 always
+  321 label *label186
+  322 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  323 jump *label187 greaterThanEq *tmp171 1
+  324 op idiv *tmp175 :start_reactor:flow_units 0.001
+  325 op div :start_reactor:flow *tmp175 10
+  326 op idiv *tmp178 :start_reactor:charge_units 0.001
+  327 op div :start_reactor:charge *tmp178 10
+  328 print "WAIT power. (%"
+  329 print :start_reactor:charge
+  330 print "J + %"
+  331 print :start_reactor:flow
+  332 print "W)"
+  333 print "\n"
+  334 set :start_reactor:supply_fuel false
+  335 jump *label196 always
+  336 label *label187
+  337 jump *label190 equal :start_reactor:fuel_on false
+  338 jump *label190 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  339 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  340 jump *label188 lessThanEq *tmp182 .FUEL_REQ
+  341 print "WAIT fuel"
+  342 print "\n"
+  343 jump *label189 always
+  344 label *label188
+  345 print "WAIT system fuel"
+  346 print "\n"
+  347 label *label189
+  348 jump *label195 always
+  349 label *label190
+  350 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  351 jump *label191 greaterThanEq :start_reactor:fuel_stored *tmp185
+  352 print "WAIT buffer fuel"
+  353 print "\n"
+  354 jump *label194 always
+  355 label *label191
+  356 jump *label192 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  357 print "WAIT cryo"
+  358 print "\n"
+  359 jump *label193 always
+  360 label *label192
+  361 print "STARTUP"
+  362 print "\n"
+  363 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  364 control enabled :start_reactor:reactor true
+  365 label *label193
+  366 label *label194
+  367 label *label195
+  368 label *label196
+  369 label *label197
+  370 label *label198
+  371 label *label199
+  372 sensor *tmp192 :start_reactor:reactor @enabled
+  373 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  374 set :start_reactor*retval :start_reactor:supply_fuel
+  375 jump *label200 always
+  376 label *label200
   377 set :fuel_1 :start_reactor*retval
   378 set :t_startup1 .RET_T_STARTUP
   379 label *label120

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   188 set :start_reactor:t_startup :t_startup1
   189 label *label164
   190 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  191 op sub *tmp108 @tick :t_startup1
   192 op idiv :start_reactor:secs *tmp108 60
   193 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   194 set :start_reactor:supply_fuel true
 
   205 op add .AVG_SURPLUS *tmp119 *tmp120
   206 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   207 print "#"
-    * print :start_reactor:reactor_num
+  208 print 1
   209 print " "
   210 print "- "
-    * jump *label165 equal :start_reactor:emerg_shutdown false
+  211 jump *label165 equal :emerg_shutdown false
   212 control enabled :start_reactor:reactor false
   213 print "emergency mode"
   214 print "\n"
 
   216 jump *label199 always
   217 label *label165
   218 jump *label185 equal :start_reactor:enabled false
-    * jump *label166 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  219 jump *label166 greaterThanEq .REACTORS_DESIRED 1
   220 control enabled :start_reactor:reactor false
   221 print "STOP unwanted"
   222 print "\n"
   223 jump *label184 always
   224 label *label166
-    * jump *label167 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label167 greaterThanEq :start_reactor:fuel_stored *tmp132
+  225 jump *label167 lessThanEq 1 1
+  226 op mul *tmp132 15 1
+  227 jump *label167 greaterThanEq :start_reactor:fuel_stored 15
   228 control enabled :start_reactor:reactor false
   229 print "STOP system fuel low"
   230 print "\n"
 
   236 print "\n"
   237 jump *label182 always
   238 label *label168
-    * jump *label169 greaterThan :start_reactor:cryo .CRYO_ABORT
+  239 jump *label169 greaterThan :start_reactor:cryo 1
   240 control enabled :start_reactor:reactor false
   241 print "STOP out of cryo"
   242 print "\n"
 
   245 jump *label177 greaterThanEq :start_reactor:secs 30
   246 label *label170
   247 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  248 op sub *tmp98 @tick :t_startup1
   249 op idiv :calc_charge_req:secs *tmp98 60
   250 jump *label171 greaterThan :calc_charge_req:secs 30
   251 sensor *tmp101 :start_reactor:reactor @enabled
 
   262 jump *label174 always
   263 label *label174
   264 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label175 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label175 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  265 jump *label175 greaterThanEq *tmp147 5000
+  266 jump *label175 greaterThanEq :start_reactor:surplus -500
   267 control enabled :start_reactor:reactor false
   268 print "START FAIL battery"
   269 print "\n"
 
   281 label *label176
   282 jump *label180 always
   283 label *label177
-    * jump *label178 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label178 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  284 jump *label178 greaterThanEq :start_reactor:charge 2000
+  285 jump *label178 greaterThanEq :start_reactor:surplus -500
   286 control enabled :start_reactor:reactor false
   287 print "ABANDON - battery crit"
   288 print "\n"
 
   305 jump *label198 always
   306 label *label185
   307 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  308 op sub *tmp162 *tmp161 5000
+  309 op div *tmp163 *tmp162 23000
+  310 op mul :start_reactor:charge_units *tmp163 0.6
+  311 op div *tmp165 :start_reactor:surplus 2000
   312 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label186 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  313 op mul *tmp167 2 1
+  314 op add :start_reactor:cryo_req 3 2
+  315 jump *label186 greaterThanEq .REACTORS_DESIRED 1
   316 print "IDLE"
   317 print "\n"
   318 set :start_reactor:supply_fuel false
 
   333 set :start_reactor:supply_fuel false
   334 jump *label196 always
   335 label *label187
-    * jump *label190 equal :start_reactor:fuel_on false
-    * jump *label190 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  336 jump *label190 equal :fuel_1 false
+  337 jump *label190 greaterThanEq :start_reactor:fuel 10
   338 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label188 lessThanEq *tmp182 .FUEL_REQ
+  339 jump *label188 lessThanEq *tmp182 10
   340 print "WAIT fuel"
   341 print "\n"
   342 jump *label189 always
 
   346 label *label189
   347 jump *label195 always
   348 label *label190
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label191 greaterThanEq :start_reactor:fuel_stored *tmp185
+  349 op mul *tmp185 45 1
+  350 jump *label191 greaterThanEq :start_reactor:fuel_stored 45
   351 print "WAIT buffer fuel"
   352 print "\n"
   353 jump *label194 always
   354 label *label191
-    * jump *label192 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  355 jump *label192 greaterThanEq :start_reactor:cryo 5
   356 print "WAIT cryo"
   357 print "\n"
   358 jump *label193 always
   359 label *label192
   360 print "STARTUP"
   361 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  362 op add .START_POWER_REQ .START_POWER_REQ 23000
   363 control enabled :start_reactor:reactor true
   364 label *label193
   365 label *label194
 
   369 label *label198
   370 label *label199
   371 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  372 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
   373 set :start_reactor*retval :start_reactor:supply_fuel
   374 jump *label200 always
   375 label *label200
-    * set :fuel_1 :start_reactor*retval
+  376 set :fuel_1 :start_reactor:supply_fuel
   377 set :t_startup1 .RET_T_STARTUP
   378 label *label120
   379 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  380 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   381 control config .ULD_IN_1 *tmp93
-    * select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  382 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   383 control config .ULD_OUT_1 *tmp97
   384 label *label121
   385 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   182 label *label150
   183 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   184 set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   185 label *label164
   186 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   187 op sub *tmp108 @tick :t_startup1
 
   303 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   304 op sub *tmp162 *tmp161 5000
   305 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  306 op div :start_reactor:charge_units *tmp162 38333.333333333336
   307 op div *tmp165 :start_reactor:surplus 2000
   308 op max :start_reactor:flow_units -0.1 *tmp165
   309 op mul *tmp167 2 1
 
   366 label *label199
   367 sensor *tmp192 :start_reactor:reactor @enabled
   368 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   369 jump *label200 always
   370 label *label200
   371 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+146 instructions):
 
   382 set :start_reactor:emerg_shutdown :emerg_shutdown
   383 set :start_reactor:fuel_on :fuel_2
   384 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  385 label *label201
+  386 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  387 op sub *tmp108 @tick :start_reactor:t_startup
+  388 op idiv :start_reactor:secs *tmp108 60
+  389 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  390 set :start_reactor:supply_fuel true
+  391 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  392 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  393 sensor *tmp113 .NODE @powerNetStored
+  394 op floor :start_reactor:charge *tmp113
+  395 sensor *tmp115 .NODE @powerNetIn
+  396 sensor *tmp116 .NODE @powerNetOut
+  397 op sub *tmp117 *tmp115 *tmp116
+  398 op floor :start_reactor:surplus *tmp117
+  399 op mul *tmp119 .AVG_SURPLUS 0.8
+  400 op mul *tmp120 :start_reactor:surplus 0.2
+  401 op add .AVG_SURPLUS *tmp119 *tmp120
+  402 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  403 print "#"
+  404 print :start_reactor:reactor_num
+  405 print " "
+  406 print "- "
+  407 jump *label202 equal :start_reactor:emerg_shutdown false
+  408 control enabled :start_reactor:reactor false
+  409 print "emergency mode"
+  410 print "\n"
+  411 set :start_reactor:supply_fuel false
+  412 jump *label236 always
+  413 label *label202
+  414 jump *label222 equal :start_reactor:enabled false
+  415 jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  416 control enabled :start_reactor:reactor false
+  417 print "STOP unwanted"
+  418 print "\n"
+  419 jump *label221 always
+  420 label *label203
+  421 jump *label204 lessThanEq :start_reactor:reactor_num 1
+  422 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  423 jump *label204 greaterThanEq :start_reactor:fuel_stored *tmp132
+  424 control enabled :start_reactor:reactor false
+  425 print "STOP system fuel low"
+  426 print "\n"
+  427 jump *label220 always
+  428 label *label204
+  429 jump *label205 greaterThan :start_reactor:fuel 1
+  430 control enabled :start_reactor:reactor false
+  431 print "STOP fuel low"
+  432 print "\n"
+  433 jump *label219 always
+  434 label *label205
+  435 jump *label206 greaterThan :start_reactor:cryo .CRYO_ABORT
+  436 control enabled :start_reactor:reactor false
+  437 print "STOP out of cryo"
+  438 print "\n"
+  439 jump *label218 always
+  440 label *label206
+  441 jump *label214 greaterThanEq :start_reactor:secs 30
+  442 label *label207
+  443 # "Function: def calc_charge_req(in reactor, in time)"
+  444 op sub *tmp98 @tick :start_reactor:t_startup
+  445 op idiv :calc_charge_req:secs *tmp98 60
+  446 jump *label208 greaterThan :calc_charge_req:secs 30
+  447 sensor *tmp101 :start_reactor:reactor @enabled
+  448 jump *label209 notEqual *tmp101 false
+  449 label *label208
+  450 set :calc_charge_req*retval 0
+  451 jump *label211 always
+  452 label *label209
+  453 label *label210
+  454 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  455 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  456 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  457 set :calc_charge_req*retval :calc_charge_req:charge_req
+  458 jump *label211 always
+  459 label *label211
+  460 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  461 jump *label212 greaterThanEq *tmp147 .PWR_ABORT
+  462 jump *label212 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  463 control enabled :start_reactor:reactor false
+  464 print "START FAIL battery"
+  465 print "\n"
+  466 set :start_reactor:supply_fuel false
+  467 jump *label213 always
+  468 label *label212
+  469 op sub :start_reactor:time_left 30 :start_reactor:secs
+  470 print "Starting "
+  471 print :start_reactor:time_left
+  472 print " "
+  473 print "secs, req "
+  474 print :calc_charge_req*retval
+  475 print "J"
+  476 print "\n"
+  477 label *label213
+  478 jump *label217 always
+  479 label *label214
+  480 jump *label215 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  481 jump *label215 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  482 control enabled :start_reactor:reactor false
+  483 print "ABANDON - battery crit"
+  484 print "\n"
+  485 set :start_reactor:supply_fuel false
+  486 jump *label216 always
+  487 label *label215
+  488 op idiv :start_reactor:mins :start_reactor:secs 6
+  489 op div :start_reactor:mins :start_reactor:mins 10
+  490 print "RUN "
+  491 print :start_reactor:mins
+  492 print " "
+  493 print "mins"
+  494 print "\n"
+  495 label *label216
+  496 label *label217
+  497 label *label218
+  498 label *label219
+  499 label *label220
+  500 label *label221
+  501 jump *label235 always
+  502 label *label222
+  503 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  504 op sub *tmp162 *tmp161 .PWR_ABORT
+  505 op div *tmp163 *tmp162 .PWR_REQ
+  506 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  507 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  508 op max :start_reactor:flow_units -0.1 *tmp165
+  509 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  510 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  511 jump *label223 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  512 print "IDLE"
+  513 print "\n"
+  514 set :start_reactor:supply_fuel false
+  515 jump *label234 always
+  516 label *label223
+  517 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  518 jump *label224 greaterThanEq *tmp171 1
+  519 op idiv *tmp175 :start_reactor:flow_units 0.001
+  520 op div :start_reactor:flow *tmp175 10
+  521 op idiv *tmp178 :start_reactor:charge_units 0.001
+  522 op div :start_reactor:charge *tmp178 10
+  523 print "WAIT power. (%"
+  524 print :start_reactor:charge
+  525 print "J + %"
+  526 print :start_reactor:flow
+  527 print "W)"
+  528 print "\n"
+  529 set :start_reactor:supply_fuel false
+  530 jump *label233 always
+  531 label *label224
+  532 jump *label227 equal :start_reactor:fuel_on false
+  533 jump *label227 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  534 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  535 jump *label225 lessThanEq *tmp182 .FUEL_REQ
+  536 print "WAIT fuel"
+  537 print "\n"
+  538 jump *label226 always
+  539 label *label225
+  540 print "WAIT system fuel"
+  541 print "\n"
+  542 label *label226
+  543 jump *label232 always
+  544 label *label227
+  545 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  546 jump *label228 greaterThanEq :start_reactor:fuel_stored *tmp185
+  547 print "WAIT buffer fuel"
+  548 print "\n"
+  549 jump *label231 always
+  550 label *label228
+  551 jump *label229 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  552 print "WAIT cryo"
+  553 print "\n"
+  554 jump *label230 always
+  555 label *label229
+  556 print "STARTUP"
+  557 print "\n"
+  558 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  559 control enabled :start_reactor:reactor true
+  560 label *label230
+  561 label *label231
+  562 label *label232
+  563 label *label233
+  564 label *label234
+  565 label *label235
+  566 label *label236
+  567 sensor *tmp192 :start_reactor:reactor @enabled
+  568 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  569 set :start_reactor*retval :start_reactor:supply_fuel
+  570 jump *label237 always
+  571 label *label237
   572 set :fuel_2 :start_reactor*retval
   573 set :t_startup2 .RET_T_STARTUP
   574 label *label122

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   384 set :start_reactor:t_startup :t_startup2
   385 label *label201
   386 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  387 op sub *tmp108 @tick :t_startup2
   388 op idiv :start_reactor:secs *tmp108 60
   389 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   390 set :start_reactor:supply_fuel true
 
   401 op add .AVG_SURPLUS *tmp119 *tmp120
   402 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   403 print "#"
-    * print :start_reactor:reactor_num
+  404 print 2
   405 print " "
   406 print "- "
-    * jump *label202 equal :start_reactor:emerg_shutdown false
+  407 jump *label202 equal :emerg_shutdown false
   408 control enabled :start_reactor:reactor false
   409 print "emergency mode"
   410 print "\n"
 
   412 jump *label236 always
   413 label *label202
   414 jump *label222 equal :start_reactor:enabled false
-    * jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  415 jump *label203 greaterThanEq .REACTORS_DESIRED 2
   416 control enabled :start_reactor:reactor false
   417 print "STOP unwanted"
   418 print "\n"
   419 jump *label221 always
   420 label *label203
-    * jump *label204 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label204 greaterThanEq :start_reactor:fuel_stored *tmp132
+  421 jump *label204 lessThanEq 2 1
+  422 op mul *tmp132 15 2
+  423 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   424 control enabled :start_reactor:reactor false
   425 print "STOP system fuel low"
   426 print "\n"
 
   432 print "\n"
   433 jump *label219 always
   434 label *label205
-    * jump *label206 greaterThan :start_reactor:cryo .CRYO_ABORT
+  435 jump *label206 greaterThan :start_reactor:cryo 1
   436 control enabled :start_reactor:reactor false
   437 print "STOP out of cryo"
   438 print "\n"
 
   441 jump *label214 greaterThanEq :start_reactor:secs 30
   442 label *label207
   443 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  444 op sub *tmp98 @tick :t_startup2
   445 op idiv :calc_charge_req:secs *tmp98 60
   446 jump *label208 greaterThan :calc_charge_req:secs 30
   447 sensor *tmp101 :start_reactor:reactor @enabled
 
   458 jump *label211 always
   459 label *label211
   460 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label212 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label212 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  461 jump *label212 greaterThanEq *tmp147 5000
+  462 jump *label212 greaterThanEq :start_reactor:surplus -500
   463 control enabled :start_reactor:reactor false
   464 print "START FAIL battery"
   465 print "\n"
 
   477 label *label213
   478 jump *label217 always
   479 label *label214
-    * jump *label215 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label215 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  480 jump *label215 greaterThanEq :start_reactor:charge 2000
+  481 jump *label215 greaterThanEq :start_reactor:surplus -500
   482 control enabled :start_reactor:reactor false
   483 print "ABANDON - battery crit"
   484 print "\n"
 
   501 jump *label235 always
   502 label *label222
   503 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  504 op sub *tmp162 *tmp161 5000
+  505 op div *tmp163 *tmp162 23000
+  506 op mul :start_reactor:charge_units *tmp163 0.6
+  507 op div *tmp165 :start_reactor:surplus 2000
   508 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label223 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  509 op mul *tmp167 2 2
+  510 op add :start_reactor:cryo_req 3 4
+  511 jump *label223 greaterThanEq .REACTORS_DESIRED 2
   512 print "IDLE"
   513 print "\n"
   514 set :start_reactor:supply_fuel false
 
   529 set :start_reactor:supply_fuel false
   530 jump *label233 always
   531 label *label224
-    * jump *label227 equal :start_reactor:fuel_on false
-    * jump *label227 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  532 jump *label227 equal :fuel_2 false
+  533 jump *label227 greaterThanEq :start_reactor:fuel 10
   534 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label225 lessThanEq *tmp182 .FUEL_REQ
+  535 jump *label225 lessThanEq *tmp182 10
   536 print "WAIT fuel"
   537 print "\n"
   538 jump *label226 always
 
   542 label *label226
   543 jump *label232 always
   544 label *label227
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label228 greaterThanEq :start_reactor:fuel_stored *tmp185
+  545 op mul *tmp185 45 2
+  546 jump *label228 greaterThanEq :start_reactor:fuel_stored 90
   547 print "WAIT buffer fuel"
   548 print "\n"
   549 jump *label231 always
   550 label *label228
-    * jump *label229 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  551 jump *label229 greaterThanEq :start_reactor:cryo 7
   552 print "WAIT cryo"
   553 print "\n"
   554 jump *label230 always
   555 label *label229
   556 print "STARTUP"
   557 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  558 op add .START_POWER_REQ .START_POWER_REQ 23000
   559 control enabled :start_reactor:reactor true
   560 label *label230
   561 label *label231
 
   565 label *label235
   566 label *label236
   567 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  568 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
   569 set :start_reactor*retval :start_reactor:supply_fuel
   570 jump *label237 always
   571 label *label237
-    * set :fuel_2 :start_reactor*retval
+  572 set :fuel_2 :start_reactor:supply_fuel
   573 set :t_startup2 .RET_T_STARTUP
   574 label *label122
   575 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  576 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   577 control config .ULD_IN_2 *tmp93
-    * select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  578 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   579 control config .ULD_OUT_2 *tmp97
   580 label *label123
   581 label *label160

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   378 control config .ULD_OUT_1 *tmp97
   379 label *label121
   380 set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   381 label *label201
   382 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   383 op sub *tmp108 @tick :t_startup2
 
   499 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   500 op sub *tmp162 *tmp161 5000
   501 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  502 op div :start_reactor:charge_units *tmp162 38333.333333333336
   503 op div *tmp165 :start_reactor:surplus 2000
   504 op max :start_reactor:flow_units -0.1 *tmp165
   505 op mul *tmp167 2 2
 
   562 label *label236
   563 sensor *tmp192 :start_reactor:reactor @enabled
   564 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   565 jump *label237 always
   566 label *label237
   567 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+146 instructions):
 
   607 set :start_reactor:emerg_shutdown :emerg_shutdown
   608 set :start_reactor:fuel_on :fuel_3
   609 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  610 label *label238
+  611 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  612 op sub *tmp108 @tick :start_reactor:t_startup
+  613 op idiv :start_reactor:secs *tmp108 60
+  614 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  615 set :start_reactor:supply_fuel true
+  616 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  617 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  618 sensor *tmp113 .NODE @powerNetStored
+  619 op floor :start_reactor:charge *tmp113
+  620 sensor *tmp115 .NODE @powerNetIn
+  621 sensor *tmp116 .NODE @powerNetOut
+  622 op sub *tmp117 *tmp115 *tmp116
+  623 op floor :start_reactor:surplus *tmp117
+  624 op mul *tmp119 .AVG_SURPLUS 0.8
+  625 op mul *tmp120 :start_reactor:surplus 0.2
+  626 op add .AVG_SURPLUS *tmp119 *tmp120
+  627 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  628 print "#"
+  629 print :start_reactor:reactor_num
+  630 print " "
+  631 print "- "
+  632 jump *label239 equal :start_reactor:emerg_shutdown false
+  633 control enabled :start_reactor:reactor false
+  634 print "emergency mode"
+  635 print "\n"
+  636 set :start_reactor:supply_fuel false
+  637 jump *label273 always
+  638 label *label239
+  639 jump *label259 equal :start_reactor:enabled false
+  640 jump *label240 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  641 control enabled :start_reactor:reactor false
+  642 print "STOP unwanted"
+  643 print "\n"
+  644 jump *label258 always
+  645 label *label240
+  646 jump *label241 lessThanEq :start_reactor:reactor_num 1
+  647 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  648 jump *label241 greaterThanEq :start_reactor:fuel_stored *tmp132
+  649 control enabled :start_reactor:reactor false
+  650 print "STOP system fuel low"
+  651 print "\n"
+  652 jump *label257 always
+  653 label *label241
+  654 jump *label242 greaterThan :start_reactor:fuel 1
+  655 control enabled :start_reactor:reactor false
+  656 print "STOP fuel low"
+  657 print "\n"
+  658 jump *label256 always
+  659 label *label242
+  660 jump *label243 greaterThan :start_reactor:cryo .CRYO_ABORT
+  661 control enabled :start_reactor:reactor false
+  662 print "STOP out of cryo"
+  663 print "\n"
+  664 jump *label255 always
+  665 label *label243
+  666 jump *label251 greaterThanEq :start_reactor:secs 30
+  667 label *label244
+  668 # "Function: def calc_charge_req(in reactor, in time)"
+  669 op sub *tmp98 @tick :start_reactor:t_startup
+  670 op idiv :calc_charge_req:secs *tmp98 60
+  671 jump *label245 greaterThan :calc_charge_req:secs 30
+  672 sensor *tmp101 :start_reactor:reactor @enabled
+  673 jump *label246 notEqual *tmp101 false
+  674 label *label245
+  675 set :calc_charge_req*retval 0
+  676 jump *label248 always
+  677 label *label246
+  678 label *label247
+  679 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  680 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  681 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  682 set :calc_charge_req*retval :calc_charge_req:charge_req
+  683 jump *label248 always
+  684 label *label248
+  685 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  686 jump *label249 greaterThanEq *tmp147 .PWR_ABORT
+  687 jump *label249 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  688 control enabled :start_reactor:reactor false
+  689 print "START FAIL battery"
+  690 print "\n"
+  691 set :start_reactor:supply_fuel false
+  692 jump *label250 always
+  693 label *label249
+  694 op sub :start_reactor:time_left 30 :start_reactor:secs
+  695 print "Starting "
+  696 print :start_reactor:time_left
+  697 print " "
+  698 print "secs, req "
+  699 print :calc_charge_req*retval
+  700 print "J"
+  701 print "\n"
+  702 label *label250
+  703 jump *label254 always
+  704 label *label251
+  705 jump *label252 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  706 jump *label252 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  707 control enabled :start_reactor:reactor false
+  708 print "ABANDON - battery crit"
+  709 print "\n"
+  710 set :start_reactor:supply_fuel false
+  711 jump *label253 always
+  712 label *label252
+  713 op idiv :start_reactor:mins :start_reactor:secs 6
+  714 op div :start_reactor:mins :start_reactor:mins 10
+  715 print "RUN "
+  716 print :start_reactor:mins
+  717 print " "
+  718 print "mins"
+  719 print "\n"
+  720 label *label253
+  721 label *label254
+  722 label *label255
+  723 label *label256
+  724 label *label257
+  725 label *label258
+  726 jump *label272 always
+  727 label *label259
+  728 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  729 op sub *tmp162 *tmp161 .PWR_ABORT
+  730 op div *tmp163 *tmp162 .PWR_REQ
+  731 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  732 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  733 op max :start_reactor:flow_units -0.1 *tmp165
+  734 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  735 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  736 jump *label260 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  737 print "IDLE"
+  738 print "\n"
+  739 set :start_reactor:supply_fuel false
+  740 jump *label271 always
+  741 label *label260
+  742 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  743 jump *label261 greaterThanEq *tmp171 1
+  744 op idiv *tmp175 :start_reactor:flow_units 0.001
+  745 op div :start_reactor:flow *tmp175 10
+  746 op idiv *tmp178 :start_reactor:charge_units 0.001
+  747 op div :start_reactor:charge *tmp178 10
+  748 print "WAIT power. (%"
+  749 print :start_reactor:charge
+  750 print "J + %"
+  751 print :start_reactor:flow
+  752 print "W)"
+  753 print "\n"
+  754 set :start_reactor:supply_fuel false
+  755 jump *label270 always
+  756 label *label261
+  757 jump *label264 equal :start_reactor:fuel_on false
+  758 jump *label264 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  759 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  760 jump *label262 lessThanEq *tmp182 .FUEL_REQ
+  761 print "WAIT fuel"
+  762 print "\n"
+  763 jump *label263 always
+  764 label *label262
+  765 print "WAIT system fuel"
+  766 print "\n"
+  767 label *label263
+  768 jump *label269 always
+  769 label *label264
+  770 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  771 jump *label265 greaterThanEq :start_reactor:fuel_stored *tmp185
+  772 print "WAIT buffer fuel"
+  773 print "\n"
+  774 jump *label268 always
+  775 label *label265
+  776 jump *label266 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  777 print "WAIT cryo"
+  778 print "\n"
+  779 jump *label267 always
+  780 label *label266
+  781 print "STARTUP"
+  782 print "\n"
+  783 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  784 control enabled :start_reactor:reactor true
+  785 label *label267
+  786 label *label268
+  787 label *label269
+  788 label *label270
+  789 label *label271
+  790 label *label272
+  791 label *label273
+  792 sensor *tmp192 :start_reactor:reactor @enabled
+  793 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  794 set :start_reactor*retval :start_reactor:supply_fuel
+  795 jump *label274 always
+  796 label *label274
   797 set :fuel_3 :start_reactor*retval
   798 set :t_startup3 .RET_T_STARTUP
   799 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   609 set :start_reactor:t_startup :t_startup3
   610 label *label238
   611 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  612 op sub *tmp108 @tick :t_startup3
   613 op idiv :start_reactor:secs *tmp108 60
   614 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   615 set :start_reactor:supply_fuel true
 
   626 op add .AVG_SURPLUS *tmp119 *tmp120
   627 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   628 print "#"
-    * print :start_reactor:reactor_num
+  629 print 3
   630 print " "
   631 print "- "
-    * jump *label239 equal :start_reactor:emerg_shutdown false
+  632 jump *label239 equal :emerg_shutdown false
   633 control enabled :start_reactor:reactor false
   634 print "emergency mode"
   635 print "\n"
 
   637 jump *label273 always
   638 label *label239
   639 jump *label259 equal :start_reactor:enabled false
-    * jump *label240 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  640 jump *label240 greaterThanEq .REACTORS_DESIRED 3
   641 control enabled :start_reactor:reactor false
   642 print "STOP unwanted"
   643 print "\n"
   644 jump *label258 always
   645 label *label240
-    * jump *label241 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label241 greaterThanEq :start_reactor:fuel_stored *tmp132
+  646 jump *label241 lessThanEq 3 1
+  647 op mul *tmp132 15 3
+  648 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   649 control enabled :start_reactor:reactor false
   650 print "STOP system fuel low"
   651 print "\n"
 
   657 print "\n"
   658 jump *label256 always
   659 label *label242
-    * jump *label243 greaterThan :start_reactor:cryo .CRYO_ABORT
+  660 jump *label243 greaterThan :start_reactor:cryo 1
   661 control enabled :start_reactor:reactor false
   662 print "STOP out of cryo"
   663 print "\n"
 
   666 jump *label251 greaterThanEq :start_reactor:secs 30
   667 label *label244
   668 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  669 op sub *tmp98 @tick :t_startup3
   670 op idiv :calc_charge_req:secs *tmp98 60
   671 jump *label245 greaterThan :calc_charge_req:secs 30
   672 sensor *tmp101 :start_reactor:reactor @enabled
 
   683 jump *label248 always
   684 label *label248
   685 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label249 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label249 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  686 jump *label249 greaterThanEq *tmp147 5000
+  687 jump *label249 greaterThanEq :start_reactor:surplus -500
   688 control enabled :start_reactor:reactor false
   689 print "START FAIL battery"
   690 print "\n"
 
   702 label *label250
   703 jump *label254 always
   704 label *label251
-    * jump *label252 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label252 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  705 jump *label252 greaterThanEq :start_reactor:charge 2000
+  706 jump *label252 greaterThanEq :start_reactor:surplus -500
   707 control enabled :start_reactor:reactor false
   708 print "ABANDON - battery crit"
   709 print "\n"
 
   726 jump *label272 always
   727 label *label259
   728 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  729 op sub *tmp162 *tmp161 5000
+  730 op div *tmp163 *tmp162 23000
+  731 op mul :start_reactor:charge_units *tmp163 0.6
+  732 op div *tmp165 :start_reactor:surplus 2000
   733 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label260 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  734 op mul *tmp167 2 3
+  735 op add :start_reactor:cryo_req 3 6
+  736 jump *label260 greaterThanEq .REACTORS_DESIRED 3
   737 print "IDLE"
   738 print "\n"
   739 set :start_reactor:supply_fuel false
 
   754 set :start_reactor:supply_fuel false
   755 jump *label270 always
   756 label *label261
-    * jump *label264 equal :start_reactor:fuel_on false
-    * jump *label264 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  757 jump *label264 equal :fuel_3 false
+  758 jump *label264 greaterThanEq :start_reactor:fuel 10
   759 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label262 lessThanEq *tmp182 .FUEL_REQ
+  760 jump *label262 lessThanEq *tmp182 10
   761 print "WAIT fuel"
   762 print "\n"
   763 jump *label263 always
 
   767 label *label263
   768 jump *label269 always
   769 label *label264
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label265 greaterThanEq :start_reactor:fuel_stored *tmp185
+  770 op mul *tmp185 45 3
+  771 jump *label265 greaterThanEq :start_reactor:fuel_stored 135
   772 print "WAIT buffer fuel"
   773 print "\n"
   774 jump *label268 always
   775 label *label265
-    * jump *label266 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  776 jump *label266 greaterThanEq :start_reactor:cryo 9
   777 print "WAIT cryo"
   778 print "\n"
   779 jump *label267 always
   780 label *label266
   781 print "STARTUP"
   782 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  783 op add .START_POWER_REQ .START_POWER_REQ 23000
   784 control enabled :start_reactor:reactor true
   785 label *label267
   786 label *label268
 
   790 label *label272
   791 label *label273
   792 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  793 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
   794 set :start_reactor*retval :start_reactor:supply_fuel
   795 jump *label274 always
   796 label *label274
-    * set :fuel_3 :start_reactor*retval
+  797 set :fuel_3 :start_reactor:supply_fuel
   798 set :t_startup3 .RET_T_STARTUP
   799 set :start_reactor:reactor reactor4
   800 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   603 label *label163
   604 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   605 set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   606 label *label238
   607 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   608 op sub *tmp108 @tick :t_startup3
 
   724 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   725 op sub *tmp162 *tmp161 5000
   726 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  727 op div :start_reactor:charge_units *tmp162 38333.333333333336
   728 op div *tmp165 :start_reactor:surplus 2000
   729 op max :start_reactor:flow_units -0.1 *tmp165
   730 op mul *tmp167 2 3
 
   787 label *label273
   788 sensor *tmp192 :start_reactor:reactor @enabled
   789 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   790 jump *label274 always
   791 label *label274
   792 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Jump Normalization, pass 2, iteration 1 (-2 instructions):
 
   218 print "\n"
   219 jump *label184 always
   220 label *label166
-    * jump *label167 lessThanEq 1 1
+  221 jump *label167 always
   222 op mul *tmp132 15 1
   223 jump *label167 greaterThanEq :start_reactor:fuel_stored 15
   224 control enabled :start_reactor:reactor false
 
   414 print "\n"
   415 jump *label221 always
   416 label *label203
-    * jump *label204 lessThanEq 2 1
   417 op mul *tmp132 15 2
   418 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   419 control enabled :start_reactor:reactor false
 
   638 print "\n"
   639 jump *label258 always
   640 label *label240
-    * jump *label241 lessThanEq 3 1
   641 op mul *tmp132 15 3
   642 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   643 control enabled :start_reactor:reactor false

Modifications by Iterated phase, Condition Optimization, pass 2, iteration 1 (-1 instructions):
 
   869 print "n"
   870 label *label34
   871 label *label27
-    * op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   872 jump *label25 always
   873 label *label25
-    * select *tmp46 notEqual *tmp29 false @pyratite @scrap
+  874 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   875 control config .ULD_MIXER *tmp46
   876 # "Function: def diff_generators()"
   877 sensor *tmp48 .NODE @powerNetStored

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-22 instructions):
 
    58 control enabled reactor4 false
    59 control enabled reactor5 false
    60 set :check_radar*retval true
-    * jump *label159 always
    61 jump *label158 always
    62 label *label157
    63 control enabled projector1 false
    64 control enabled projector2 false
    65 set :check_radar*retval false
-    * jump *label159 always
    66 label *label158
    67 label *label159
    68 # "Function: def check_manual_shutdown()"
 
    76 label *label11
    77 label *label12
    78 set *tmp8 false
-    * jump *label10 always
    79 label *label10
    80 op or :emerg_shutdown :check_radar*retval *tmp8
    81 set :calc_charge_req:reactor reactor1
 
    95 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
    96 op idiv :calc_charge_req:charge_req *tmp105 0.04
    97 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label130 always
    98 label *label130
    99 set .START_POWER_REQ :calc_charge_req*retval
   100 set :calc_charge_req:reactor reactor2
 
   114 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   115 op idiv :calc_charge_req:charge_req *tmp105 0.04
   116 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label135 always
   117 label *label135
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   119 set :calc_charge_req:reactor reactor3
 
   133 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   134 op idiv :calc_charge_req:charge_req *tmp105 0.04
   135 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label140 always
   136 label *label140
   137 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   138 set :calc_charge_req:reactor reactor4
 
   152 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   153 op idiv :calc_charge_req:charge_req *tmp105 0.04
   154 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label145 always
   155 label *label145
   156 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   157 set :calc_charge_req:reactor reactor5
 
   171 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   172 op idiv :calc_charge_req:charge_req *tmp105 0.04
   173 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label150 always
   174 label *label150
   175 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   176 set :start_reactor:reactor reactor1
 
   247 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   248 op idiv :calc_charge_req:charge_req *tmp105 0.04
   249 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label174 always
   250 label *label174
   251 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   252 jump *label175 greaterThanEq *tmp147 5000
 
   357 label *label199
   358 sensor *tmp192 :start_reactor:reactor @enabled
   359 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * jump *label200 always
   360 label *label200
   361 set :fuel_1 :start_reactor:supply_fuel
   362 set :t_startup1 .RET_T_STARTUP
 
   440 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   441 op idiv :calc_charge_req:charge_req *tmp105 0.04
   442 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label211 always
   443 label *label211
   444 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   445 jump *label212 greaterThanEq *tmp147 5000
 
   550 label *label236
   551 sensor *tmp192 :start_reactor:reactor @enabled
   552 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * jump *label237 always
   553 label *label237
   554 set :fuel_2 :start_reactor:supply_fuel
   555 set :t_startup2 .RET_T_STARTUP
 
   579 control enabled reactor4 false
   580 control enabled reactor5 false
   581 set :check_radar*retval true
-    * jump *label163 always
   582 jump *label162 always
   583 label *label161
   584 control enabled projector1 false
   585 control enabled projector2 false
   586 set :check_radar*retval false
-    * jump *label163 always
   587 label *label162
   588 label *label163
   589 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   660 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   661 op idiv :calc_charge_req:charge_req *tmp105 0.04
   662 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label248 always
   663 label *label248
   664 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   665 jump *label249 greaterThanEq *tmp147 5000
 
   770 label *label273
   771 sensor *tmp192 :start_reactor:reactor @enabled
   772 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * jump *label274 always
   773 label *label274
   774 set :fuel_3 :start_reactor:supply_fuel
   775 set :t_startup3 .RET_T_STARTUP
 
   853 print "n"
   854 label *label34
   855 label *label27
-    * jump *label25 always
   856 label *label25
   857 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   858 control config .ULD_MIXER *tmp46
 
   876 # "Function: def kilo(in val)"
   877 op idiv *tmp89 .AVG_SURPLUS 100
   878 op div :kilo*retval *tmp89 10
-    * jump *label115 always
   879 label *label115
   880 set :surplus :kilo*retval
   881 sensor :kilo:val .NODE @powerNetStored
 
   883 # "Function: def kilo(in val)"
   884 op idiv *tmp89 :kilo:val 100
   885 op div :kilo*retval *tmp89 10
-    * jump *label117 always
   886 label *label117
   887 set :charge :kilo*retval
   888 jump *label42 lessThanEq .START_POWER_REQ 0
 
   890 # "Function: def kilo(in val)"
   891 op idiv *tmp89 .START_POWER_REQ 100
   892 op div :kilo*retval *tmp89 10
-    * jump *label119 always
   893 label *label119
   894 print "Req "
   895 print :kilo*retval
 
  1016 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
  1017 op idiv :calc_charge_req:charge_req *tmp105 0.04
  1018 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label155 always
  1019 label *label155
  1020 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
  1021 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
 
  1127 sensor *tmp192 :start_reactor:reactor @enabled
  1128 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
  1129 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label68 always
  1130 label *label68
  1131 return :start_reactor*retaddr
  1132 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-2 instructions):
 
   875 label *label114
   876 # "Function: def kilo(in val)"
   877 op idiv *tmp89 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp89 10
+  878 op div :surplus *tmp89 10
   879 label *label115
-    * set :surplus :kilo*retval
   880 sensor :kilo:val .NODE @powerNetStored
   881 label *label116
   882 # "Function: def kilo(in val)"
 
   947 op sub *tmp108 @tick :start_reactor:t_startup
   948 op idiv :start_reactor:secs *tmp108 60
   949 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  950 set :start_reactor*retval true
   951 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   952 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   953 sensor *tmp113 .NODE @powerNetStored
 
   968 control enabled :start_reactor:reactor false
   969 print "emergency mode"
   970 print "\n"
-    * set :start_reactor:supply_fuel false
+  971 set :start_reactor*retval false
   972 jump *label70 always
   973 label *label69
   974 jump *label71 equal :start_reactor:enabled false
 
  1022 control enabled :start_reactor:reactor false
  1023 print "START FAIL battery"
  1024 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1025 set :start_reactor*retval false
  1026 jump *label86 always
  1027 label *label85
  1028 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1041 control enabled :start_reactor:reactor false
  1042 print "ABANDON - battery crit"
  1043 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1044 set :start_reactor*retval false
  1045 jump *label90 always
  1046 label *label89
  1047 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1070 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1071 print "IDLE"
  1072 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1073 set :start_reactor*retval false
  1074 jump *label94 always
  1075 label *label93
  1076 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
 
  1085 print :start_reactor:flow
  1086 print "W)"
  1087 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1088 set :start_reactor*retval false
  1089 jump *label96 always
  1090 label *label95
  1091 jump *label97 equal :start_reactor:fuel_on false
 
  1125 label *label70
  1126 sensor *tmp192 :start_reactor:reactor @enabled
  1127 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1128 label *label68
  1129 return :start_reactor*retaddr
  1130 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   789 call *label3 :start_reactor*retaddr :start_reactor*retval
   790 set :fuel_5 :start_reactor*retval
   791 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp232 :fuel_3 :fuel_4
+  792 op or *tmp232 :start_reactor:supply_fuel :fuel_4
   793 op or *tmp26 *tmp232 :start_reactor*retval
   794 label *label124
   795 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Boolean Optimization, pass 2, iteration 1 (-1 instructions):
 
   212 label *label166
   213 jump *label167 always
   214 op mul *tmp132 15 1
-    * jump *label167 greaterThanEq :start_reactor:fuel_stored 15
   215 control enabled :start_reactor:reactor false
   216 print "STOP system fuel low"
   217 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-7 instructions):
 
    39 set .TOWER cyclone1
    40 set .CONTAINER vault1
    41 set .NODE node1
-    * label *label156
    42 # "Function: def check_radar(in unit)"
    43 radar enemy any any health .TOWER 1 :check_radar:enemy_found
    44 jump *label157 equal :check_radar:enemy_found null
 
    63 control enabled projector2 false
    64 set :check_radar*retval false
    65 label *label158
-    * label *label159
    66 # "Function: def check_manual_shutdown()"
    67 jump *label11 equal switch1 null
    68 sensor *tmp10 switch1 @enabled
 
    72 set *tmp8 true
    73 jump *label10 always
    74 label *label11
-    * label *label12
    75 set *tmp8 false
    76 label *label10
    77 op or :emerg_shutdown :check_radar*retval *tmp8
    78 set :calc_charge_req:reactor reactor1
-    * label *label126
    79 # "Function: def calc_charge_req(in reactor, in time)"
    80 op sub *tmp98 @tick :t_startup1
    81 op idiv :calc_charge_req:secs *tmp98 60
 
    86 set :calc_charge_req*retval 0
    87 jump *label130 always
    88 label *label128
-    * label *label129
    89 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    90 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
    91 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
    93 label *label130
    94 set .START_POWER_REQ :calc_charge_req*retval
    95 set :calc_charge_req:reactor reactor2
-    * label *label131
    96 # "Function: def calc_charge_req(in reactor, in time)"
    97 op sub *tmp98 @tick :t_startup2
    98 op idiv :calc_charge_req:secs *tmp98 60
 
   103 set :calc_charge_req*retval 0
   104 jump *label135 always
   105 label *label133
-    * label *label134
   106 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   107 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   108 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   110 label *label135
   111 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   112 set :calc_charge_req:reactor reactor3
-    * label *label136
   113 # "Function: def calc_charge_req(in reactor, in time)"
   114 op sub *tmp98 @tick :t_startup3
   115 op idiv :calc_charge_req:secs *tmp98 60
 
   120 set :calc_charge_req*retval 0
   121 jump *label140 always
   122 label *label138
-    * label *label139
   123 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   124 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   125 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   127 label *label140
   128 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   129 set :calc_charge_req:reactor reactor4
-    * label *label141
   130 # "Function: def calc_charge_req(in reactor, in time)"
   131 op sub *tmp98 @tick :t_startup4
   132 op idiv :calc_charge_req:secs *tmp98 60
 
   137 set :calc_charge_req*retval 0
   138 jump *label145 always
   139 label *label143
-    * label *label144
   140 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   141 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   142 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   144 label *label145
   145 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   146 set :calc_charge_req:reactor reactor5
-    * label *label146
   147 # "Function: def calc_charge_req(in reactor, in time)"
   148 op sub *tmp98 @tick :t_startup5
   149 op idiv :calc_charge_req:secs *tmp98 60
 
   154 set :calc_charge_req*retval 0
   155 jump *label150 always
   156 label *label148
-    * label *label149
   157 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   158 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   159 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   161 label *label150
   162 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   163 set :start_reactor:reactor reactor1
-    * label *label164
   164 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   165 op sub *tmp108 @tick :t_startup1
   166 op idiv :start_reactor:secs *tmp108 60
 
   197 jump *label184 always
   198 label *label166
   199 jump *label167 always
-    * op mul *tmp132 15 1
-    * control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label183 always
   200 label *label167
   201 jump *label168 greaterThan :start_reactor:fuel 1
   202 control enabled :start_reactor:reactor false
 
   211 jump *label181 always
   212 label *label169
   213 jump *label177 greaterThanEq :start_reactor:secs 30
-    * label *label170
   214 # "Function: def calc_charge_req(in reactor, in time)"
   215 op sub *tmp98 @tick :t_startup1
   216 op idiv :calc_charge_req:secs *tmp98 60
 
   221 set :calc_charge_req*retval 0
   222 jump *label174 always
   223 label *label172
-    * label *label173
   224 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   225 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   226 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   335 label *label199
   336 sensor *tmp192 :start_reactor:reactor @enabled
   337 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * label *label200
   338 set :fuel_1 :start_reactor:supply_fuel
   339 set :t_startup1 .RET_T_STARTUP
-    * label *label120
   340 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   341 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   342 control config .ULD_IN_1 *tmp93
   343 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   344 control config .ULD_OUT_1 *tmp97
-    * label *label121
   345 set :start_reactor:reactor reactor2
-    * label *label201
   346 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   347 op sub *tmp108 @tick :t_startup2
   348 op idiv :start_reactor:secs *tmp108 60
 
   398 jump *label218 always
   399 label *label206
   400 jump *label214 greaterThanEq :start_reactor:secs 30
-    * label *label207
   401 # "Function: def calc_charge_req(in reactor, in time)"
   402 op sub *tmp98 @tick :t_startup2
   403 op idiv :calc_charge_req:secs *tmp98 60
 
   408 set :calc_charge_req*retval 0
   409 jump *label211 always
   410 label *label209
-    * label *label210
   411 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   412 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   413 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   522 label *label236
   523 sensor *tmp192 :start_reactor:reactor @enabled
   524 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * label *label237
   525 set :fuel_2 :start_reactor:supply_fuel
   526 set :t_startup2 .RET_T_STARTUP
-    * label *label122
   527 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   528 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   529 control config .ULD_IN_2 *tmp93
   530 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   531 control config .ULD_OUT_2 *tmp97
-    * label *label123
-    * label *label160
   532 # "Function: def check_radar(in unit)"
   533 radar enemy any any health .TOWER 1 :check_radar:enemy_found
   534 jump *label161 equal :check_radar:enemy_found null
 
   553 control enabled projector2 false
   554 set :check_radar*retval false
   555 label *label162
-    * label *label163
   556 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   557 set :start_reactor:reactor reactor3
-    * label *label238
   558 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   559 op sub *tmp108 @tick :t_startup3
   560 op idiv :start_reactor:secs *tmp108 60
 
   610 jump *label255 always
   611 label *label243
   612 jump *label251 greaterThanEq :start_reactor:secs 30
-    * label *label244
   613 # "Function: def calc_charge_req(in reactor, in time)"
   614 op sub *tmp98 @tick :t_startup3
   615 op idiv :calc_charge_req:secs *tmp98 60
 
   620 set :calc_charge_req*retval 0
   621 jump *label248 always
   622 label *label246
-    * label *label247
   623 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   624 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   625 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   734 label *label273
   735 sensor *tmp192 :start_reactor:reactor @enabled
   736 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * label *label274
   737 set :fuel_3 :start_reactor:supply_fuel
   738 set :t_startup3 .RET_T_STARTUP
   739 set :start_reactor:reactor reactor4
 
   754 set :t_startup5 .RET_T_STARTUP
   755 op or *tmp232 :start_reactor:supply_fuel :fuel_4
   756 op or *tmp26 *tmp232 :start_reactor*retval
-    * label *label124
   757 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   758 select *tmp93 notEqual *tmp26 false @blast-compound @scrap
   759 control config .ULD_IN_MANY *tmp93
   760 select *tmp97 equal *tmp26 false @blast-compound @scrap
   761 control config .ULD_OUT_MANY *tmp97
-    * label *label125
   762 op or *tmp233 :fuel_1 :fuel_2
   763 op or *tmp28 *tmp233 *tmp26
   764 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   814 print "n"
   815 label *label34
   816 label *label27
-    * label *label25
   817 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   818 control config .ULD_MIXER *tmp46
   819 # "Function: def diff_generators()"
 
   831 control enabled generator1 true
   832 control enabled generator2 true
   833 label *label39
-    * label *label37
-    * label *label114
   834 # "Function: def kilo(in val)"
   835 op idiv *tmp89 .AVG_SURPLUS 100
   836 op div :surplus *tmp89 10
-    * label *label115
   837 sensor :kilo:val .NODE @powerNetStored
-    * label *label116
   838 # "Function: def kilo(in val)"
   839 op idiv *tmp89 :kilo:val 100
   840 op div :kilo*retval *tmp89 10
-    * label *label117
   841 set :charge :kilo*retval
   842 jump *label42 lessThanEq .START_POWER_REQ 0
-    * label *label118
   843 # "Function: def kilo(in val)"
   844 op idiv *tmp89 .START_POWER_REQ 100
   845 op div :kilo*retval *tmp89 10
-    * label *label119
   846 print "Req "
   847 print :kilo*retval
   848 print "kJ / "
 
   869 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   870 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   871 label *label49
-    * label *label50
   872 label *label45
-    * label *label46
   873 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   874 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   875 op sub *tmp82 .AVG_SURPLUS 10000
 
   878 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   879 op min .REACTORS_DESIRED 5 *tmp85
   880 label *label51
-    * label *label52
-    * label *label44
   881 label *label43
   882 jump *label55 equal .REACTORS_DESIRED 5
   883 print "Require only "
 
   885 print "/5 reactors."
   886 print "\n"
   887 label *label55
-    * label *label56
   888 printflush message1
-    * label *label8
   889 jump *label7 always
-    * label *label9
-    * end
   890 label *label3
   891 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   892 op sub *tmp108 @tick :start_reactor:t_startup
 
   944 jump *label82 always
   945 label *label81
   946 jump *label83 greaterThanEq :start_reactor:secs 30
-    * label *label151
   947 # "Function: def calc_charge_req(in reactor, in time)"
   948 op sub *tmp98 @tick :start_reactor:t_startup
   949 op idiv :calc_charge_req:secs *tmp98 60
 
   954 set :calc_charge_req*retval 0
   955 jump *label155 always
   956 label *label153
-    * label *label154
   957 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   958 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   959 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
  1068 label *label70
  1069 sensor *tmp192 :start_reactor:reactor @enabled
  1070 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
-    * label *label68
  1071 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Jump Threading, pass 4, iteration 1:
 
   190 jump *label199 always
   191 label *label165
   192 jump *label185 equal :start_reactor:enabled false
-    * jump *label166 greaterThanEq .REACTORS_DESIRED 1
+  193 jump *label167 greaterThanEq .REACTORS_DESIRED 1
   194 control enabled :start_reactor:reactor false
   195 print "STOP unwanted"
   196 print "\n"
-    * jump *label184 always
+  197 jump *label198 always
   198 label *label166
   199 jump *label167 always
   200 label *label167
 
   202 control enabled :start_reactor:reactor false
   203 print "STOP fuel low"
   204 print "\n"
-    * jump *label182 always
+  205 jump *label198 always
   206 label *label168
   207 jump *label169 greaterThan :start_reactor:cryo 1
   208 control enabled :start_reactor:reactor false
   209 print "STOP out of cryo"
   210 print "\n"
-    * jump *label181 always
+  211 jump *label198 always
   212 label *label169
   213 jump *label177 greaterThanEq :start_reactor:secs 30
   214 # "Function: def calc_charge_req(in reactor, in time)"
 
   233 print "START FAIL battery"
   234 print "\n"
   235 set :start_reactor:supply_fuel false
-    * jump *label176 always
+  236 jump *label198 always
   237 label *label175
   238 op sub :start_reactor:time_left 30 :start_reactor:secs
   239 print "Starting "
 
   244 print "J"
   245 print "\n"
   246 label *label176
-    * jump *label180 always
+  247 jump *label198 always
   248 label *label177
   249 jump *label178 greaterThanEq :start_reactor:charge 2000
   250 jump *label178 greaterThanEq :start_reactor:surplus -500
 
   252 print "ABANDON - battery crit"
   253 print "\n"
   254 set :start_reactor:supply_fuel false
-    * jump *label179 always
+  255 jump *label198 always
   256 label *label178
   257 op idiv :start_reactor:mins :start_reactor:secs 6
   258 op div :start_reactor:mins :start_reactor:mins 10
 
   303 jump *label188 lessThanEq *tmp182 10
   304 print "WAIT fuel"
   305 print "\n"
-    * jump *label189 always
+  306 jump *label195 always
   307 label *label188
   308 print "WAIT system fuel"
   309 print "\n"
 
   375 control enabled :start_reactor:reactor false
   376 print "STOP unwanted"
   377 print "\n"
-    * jump *label221 always
+  378 jump *label235 always
   379 label *label203
   380 op mul *tmp132 15 2
   381 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   382 control enabled :start_reactor:reactor false
   383 print "STOP system fuel low"
   384 print "\n"
-    * jump *label220 always
+  385 jump *label235 always
   386 label *label204
   387 jump *label205 greaterThan :start_reactor:fuel 1
   388 control enabled :start_reactor:reactor false
   389 print "STOP fuel low"
   390 print "\n"
-    * jump *label219 always
+  391 jump *label235 always
   392 label *label205
   393 jump *label206 greaterThan :start_reactor:cryo 1
   394 control enabled :start_reactor:reactor false
   395 print "STOP out of cryo"
   396 print "\n"
-    * jump *label218 always
+  397 jump *label235 always
   398 label *label206
   399 jump *label214 greaterThanEq :start_reactor:secs 30
   400 # "Function: def calc_charge_req(in reactor, in time)"
 
   419 print "START FAIL battery"
   420 print "\n"
   421 set :start_reactor:supply_fuel false
-    * jump *label213 always
+  422 jump *label235 always
   423 label *label212
   424 op sub :start_reactor:time_left 30 :start_reactor:secs
   425 print "Starting "
 
   430 print "J"
   431 print "\n"
   432 label *label213
-    * jump *label217 always
+  433 jump *label235 always
   434 label *label214
   435 jump *label215 greaterThanEq :start_reactor:charge 2000
   436 jump *label215 greaterThanEq :start_reactor:surplus -500
 
   438 print "ABANDON - battery crit"
   439 print "\n"
   440 set :start_reactor:supply_fuel false
-    * jump *label216 always
+  441 jump *label235 always
   442 label *label215
   443 op idiv :start_reactor:mins :start_reactor:secs 6
   444 op div :start_reactor:mins :start_reactor:mins 10
 
   490 jump *label225 lessThanEq *tmp182 10
   491 print "WAIT fuel"
   492 print "\n"
-    * jump *label226 always
+  493 jump *label232 always
   494 label *label225
   495 print "WAIT system fuel"
   496 print "\n"
 
   587 control enabled :start_reactor:reactor false
   588 print "STOP unwanted"
   589 print "\n"
-    * jump *label258 always
+  590 jump *label272 always
   591 label *label240
   592 op mul *tmp132 15 3
   593 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   594 control enabled :start_reactor:reactor false
   595 print "STOP system fuel low"
   596 print "\n"
-    * jump *label257 always
+  597 jump *label272 always
   598 label *label241
   599 jump *label242 greaterThan :start_reactor:fuel 1
   600 control enabled :start_reactor:reactor false
   601 print "STOP fuel low"
   602 print "\n"
-    * jump *label256 always
+  603 jump *label272 always
   604 label *label242
   605 jump *label243 greaterThan :start_reactor:cryo 1
   606 control enabled :start_reactor:reactor false
   607 print "STOP out of cryo"
   608 print "\n"
-    * jump *label255 always
+  609 jump *label272 always
   610 label *label243
   611 jump *label251 greaterThanEq :start_reactor:secs 30
   612 # "Function: def calc_charge_req(in reactor, in time)"
 
   631 print "START FAIL battery"
   632 print "\n"
   633 set :start_reactor:supply_fuel false
-    * jump *label250 always
+  634 jump *label272 always
   635 label *label249
   636 op sub :start_reactor:time_left 30 :start_reactor:secs
   637 print "Starting "
 
   642 print "J"
   643 print "\n"
   644 label *label250
-    * jump *label254 always
+  645 jump *label272 always
   646 label *label251
   647 jump *label252 greaterThanEq :start_reactor:charge 2000
   648 jump *label252 greaterThanEq :start_reactor:surplus -500
 
   650 print "ABANDON - battery crit"
   651 print "\n"
   652 set :start_reactor:supply_fuel false
-    * jump *label253 always
+  653 jump *label272 always
   654 label *label252
   655 op idiv :start_reactor:mins :start_reactor:secs 6
   656 op div :start_reactor:mins :start_reactor:mins 10
 
   702 jump *label262 lessThanEq *tmp182 10
   703 print "WAIT fuel"
   704 print "\n"
-    * jump *label263 always
+  705 jump *label269 always
   706 label *label262
   707 print "WAIT system fuel"
   708 print "\n"
 
   784 jump *label31 equal :emerg_shutdown false
   785 print " Enemies detected."
   786 print "\n"
-    * jump *label32 always
+  787 jump *label27 always
   788 label *label31
   789 print " Critical power."
   790 print "\n"
 
   920 control enabled :start_reactor:reactor false
   921 print "STOP unwanted"
   922 print "\n"
-    * jump *label74 always
+  923 jump *label72 always
   924 label *label73
   925 jump *label75 lessThanEq :start_reactor:reactor_num 1
   926 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   928 control enabled :start_reactor:reactor false
   929 print "STOP system fuel low"
   930 print "\n"
-    * jump *label76 always
+  931 jump *label72 always
   932 label *label75
   933 jump *label79 greaterThan :start_reactor:fuel 1
   934 control enabled :start_reactor:reactor false
   935 print "STOP fuel low"
   936 print "\n"
-    * jump *label80 always
+  937 jump *label72 always
   938 label *label79
   939 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   940 control enabled :start_reactor:reactor false
   941 print "STOP out of cryo"
   942 print "\n"
-    * jump *label82 always
+  943 jump *label72 always
   944 label *label81
   945 jump *label83 greaterThanEq :start_reactor:secs 30
   946 # "Function: def calc_charge_req(in reactor, in time)"
 
   965 print "START FAIL battery"
   966 print "\n"
   967 set :start_reactor*retval false
-    * jump *label86 always
+  968 jump *label72 always
   969 label *label85
   970 op sub :start_reactor:time_left 30 :start_reactor:secs
   971 print "Starting "
 
   976 print "J"
   977 print "\n"
   978 label *label86
-    * jump *label84 always
+  979 jump *label72 always
   980 label *label83
   981 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   982 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   984 print "ABANDON - battery crit"
   985 print "\n"
   986 set :start_reactor*retval false
-    * jump *label90 always
+  987 jump *label72 always
   988 label *label89
   989 op idiv :start_reactor:mins :start_reactor:secs 6
   990 op div :start_reactor:mins :start_reactor:mins 10
 
  1036 jump *label101 lessThanEq *tmp182 .FUEL_REQ
  1037 print "WAIT fuel"
  1038 print "\n"
-    * jump *label102 always
+ 1039 jump *label98 always
  1040 label *label101
  1041 print "WAIT system fuel"
  1042 print "\n"

Modifications by Jumps phase, Single Step Elimination, pass 4, iteration 1 (-1 instructions):
 
   195 print "STOP unwanted"
   196 print "\n"
   197 jump *label198 always
-    * jump *label167 always
   198 label *label167
   199 jump *label168 greaterThan :start_reactor:fuel 1
   200 control enabled :start_reactor:reactor false

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    67 jump *label11 equal switch1 null
    68 sensor *tmp10 switch1 @enabled
    69 jump *label11 notEqual *tmp10 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   70 print "User has disabled emergency switch\n"
    71 set *tmp8 true
    72 jump *label10 always
    73 label *label11
 
   177 op mul *tmp120 :start_reactor:surplus 0.2
   178 op add .AVG_SURPLUS *tmp119 *tmp120
   179 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  180 print "#1 - "
   181 jump *label165 equal :emerg_shutdown false
   182 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  183 print "emergency mode\n"
   184 set :start_reactor:supply_fuel false
   185 jump *label199 always
   186 label *label165
   187 jump *label185 equal :start_reactor:enabled false
   188 jump *label167 greaterThanEq .REACTORS_DESIRED 1
   189 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  190 print "STOP unwanted\n"
   191 jump *label198 always
   192 label *label167
   193 jump *label168 greaterThan :start_reactor:fuel 1
   194 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  195 print "STOP fuel low\n"
   196 jump *label198 always
   197 label *label168
   198 jump *label169 greaterThan :start_reactor:cryo 1
   199 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  200 print "STOP out of cryo\n"
   201 jump *label198 always
   202 label *label169
   203 jump *label177 greaterThanEq :start_reactor:secs 30
 
   220 jump *label175 greaterThanEq *tmp147 5000
   221 jump *label175 greaterThanEq :start_reactor:surplus -500
   222 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  223 print "START FAIL battery\n"
   224 set :start_reactor:supply_fuel false
   225 jump *label198 always
   226 label *label175
   227 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  228 print "Starting {0} secs, req {0}J\n"
+  229 format :start_reactor:time_left
+  230 format :calc_charge_req*retval
   231 jump *label198 always
   232 label *label177
   233 jump *label178 greaterThanEq :start_reactor:charge 2000
   234 jump *label178 greaterThanEq :start_reactor:surplus -500
   235 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  236 print "ABANDON - battery crit\n"
   237 set :start_reactor:supply_fuel false
   238 jump *label198 always
   239 label *label178
   240 op idiv :start_reactor:mins :start_reactor:secs 6
   241 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  242 print "RUN {0} mins\n"
+  243 format :start_reactor:mins
   244 jump *label198 always
   245 label *label185
   246 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   252 op mul *tmp167 2 1
   253 op add :start_reactor:cryo_req 3 2
   254 jump *label186 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  255 print "IDLE\n"
   256 set :start_reactor:supply_fuel false
   257 jump *label197 always
   258 label *label186
 
   262 op div :start_reactor:flow *tmp175 10
   263 op idiv *tmp178 :start_reactor:charge_units 0.001
   264 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  265 print "WAIT power. (%{0}J + %{0}W)\n"
+  266 format :start_reactor:charge
+  267 format :start_reactor:flow
   268 set :start_reactor:supply_fuel false
   269 jump *label196 always
   270 label *label187
 
   272 jump *label190 greaterThanEq :start_reactor:fuel 10
   273 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   274 jump *label188 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  275 print "WAIT fuel\n"
   276 jump *label195 always
   277 label *label188
-    * print "WAIT system fuel"
-    * print "\n"
+  278 print "WAIT system fuel\n"
   279 jump *label195 always
   280 label *label190
   281 op mul *tmp185 45 1
   282 jump *label191 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  283 print "WAIT buffer fuel\n"
   284 jump *label194 always
   285 label *label191
   286 jump *label192 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  287 print "WAIT cryo\n"
   288 jump *label193 always
   289 label *label192
-    * print "STARTUP"
-    * print "\n"
+  290 print "STARTUP\n"
   291 op add .START_POWER_REQ .START_POWER_REQ 23000
   292 control enabled :start_reactor:reactor true
   293 label *label193
 
   324 op mul *tmp120 :start_reactor:surplus 0.2
   325 op add .AVG_SURPLUS *tmp119 *tmp120
   326 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  327 print "#2 - "
   328 jump *label202 equal :emerg_shutdown false
   329 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  330 print "emergency mode\n"
   331 set :start_reactor:supply_fuel false
   332 jump *label236 always
   333 label *label202
   334 jump *label222 equal :start_reactor:enabled false
   335 jump *label203 greaterThanEq .REACTORS_DESIRED 2
   336 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  337 print "STOP unwanted\n"
   338 jump *label235 always
   339 label *label203
   340 op mul *tmp132 15 2
   341 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   342 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  343 print "STOP system fuel low\n"
   344 jump *label235 always
   345 label *label204
   346 jump *label205 greaterThan :start_reactor:fuel 1
   347 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  348 print "STOP fuel low\n"
   349 jump *label235 always
   350 label *label205
   351 jump *label206 greaterThan :start_reactor:cryo 1
   352 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  353 print "STOP out of cryo\n"
   354 jump *label235 always
   355 label *label206
   356 jump *label214 greaterThanEq :start_reactor:secs 30
 
   373 jump *label212 greaterThanEq *tmp147 5000
   374 jump *label212 greaterThanEq :start_reactor:surplus -500
   375 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  376 print "START FAIL battery\n"
   377 set :start_reactor:supply_fuel false
   378 jump *label235 always
   379 label *label212
   380 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  381 print "Starting {0} secs, req {0}J\n"
+  382 format :start_reactor:time_left
+  383 format :calc_charge_req*retval
   384 jump *label235 always
   385 label *label214
   386 jump *label215 greaterThanEq :start_reactor:charge 2000
   387 jump *label215 greaterThanEq :start_reactor:surplus -500
   388 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  389 print "ABANDON - battery crit\n"
   390 set :start_reactor:supply_fuel false
   391 jump *label235 always
   392 label *label215
   393 op idiv :start_reactor:mins :start_reactor:secs 6
   394 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  395 print "RUN {0} mins\n"
+  396 format :start_reactor:mins
   397 jump *label235 always
   398 label *label222
   399 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   405 op mul *tmp167 2 2
   406 op add :start_reactor:cryo_req 3 4
   407 jump *label223 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  408 print "IDLE\n"
   409 set :start_reactor:supply_fuel false
   410 jump *label234 always
   411 label *label223
 
   415 op div :start_reactor:flow *tmp175 10
   416 op idiv *tmp178 :start_reactor:charge_units 0.001
   417 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  418 print "WAIT power. (%{0}J + %{0}W)\n"
+  419 format :start_reactor:charge
+  420 format :start_reactor:flow
   421 set :start_reactor:supply_fuel false
   422 jump *label233 always
   423 label *label224
 
   425 jump *label227 greaterThanEq :start_reactor:fuel 10
   426 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   427 jump *label225 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  428 print "WAIT fuel\n"
   429 jump *label232 always
   430 label *label225
-    * print "WAIT system fuel"
-    * print "\n"
+  431 print "WAIT system fuel\n"
   432 jump *label232 always
   433 label *label227
   434 op mul *tmp185 45 2
   435 jump *label228 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  436 print "WAIT buffer fuel\n"
   437 jump *label231 always
   438 label *label228
   439 jump *label229 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  440 print "WAIT cryo\n"
   441 jump *label230 always
   442 label *label229
-    * print "STARTUP"
-    * print "\n"
+  443 print "STARTUP\n"
   444 op add .START_POWER_REQ .START_POWER_REQ 23000
   445 control enabled :start_reactor:reactor true
   446 label *label230
 
   502 op mul *tmp120 :start_reactor:surplus 0.2
   503 op add .AVG_SURPLUS *tmp119 *tmp120
   504 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  505 print "#3 - "
   506 jump *label239 equal :emerg_shutdown false
   507 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  508 print "emergency mode\n"
   509 set :start_reactor:supply_fuel false
   510 jump *label273 always
   511 label *label239
   512 jump *label259 equal :start_reactor:enabled false
   513 jump *label240 greaterThanEq .REACTORS_DESIRED 3
   514 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  515 print "STOP unwanted\n"
   516 jump *label272 always
   517 label *label240
   518 op mul *tmp132 15 3
   519 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   520 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  521 print "STOP system fuel low\n"
   522 jump *label272 always
   523 label *label241
   524 jump *label242 greaterThan :start_reactor:fuel 1
   525 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  526 print "STOP fuel low\n"
   527 jump *label272 always
   528 label *label242
   529 jump *label243 greaterThan :start_reactor:cryo 1
   530 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  531 print "STOP out of cryo\n"
   532 jump *label272 always
   533 label *label243
   534 jump *label251 greaterThanEq :start_reactor:secs 30
 
   551 jump *label249 greaterThanEq *tmp147 5000
   552 jump *label249 greaterThanEq :start_reactor:surplus -500
   553 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  554 print "START FAIL battery\n"
   555 set :start_reactor:supply_fuel false
   556 jump *label272 always
   557 label *label249
   558 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  559 print "Starting {0} secs, req {0}J\n"
+  560 format :start_reactor:time_left
+  561 format :calc_charge_req*retval
   562 jump *label272 always
   563 label *label251
   564 jump *label252 greaterThanEq :start_reactor:charge 2000
   565 jump *label252 greaterThanEq :start_reactor:surplus -500
   566 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  567 print "ABANDON - battery crit\n"
   568 set :start_reactor:supply_fuel false
   569 jump *label272 always
   570 label *label252
   571 op idiv :start_reactor:mins :start_reactor:secs 6
   572 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  573 print "RUN {0} mins\n"
+  574 format :start_reactor:mins
   575 jump *label272 always
   576 label *label259
   577 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   583 op mul *tmp167 2 3
   584 op add :start_reactor:cryo_req 3 6
   585 jump *label260 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  586 print "IDLE\n"
   587 set :start_reactor:supply_fuel false
   588 jump *label271 always
   589 label *label260
 
   593 op div :start_reactor:flow *tmp175 10
   594 op idiv *tmp178 :start_reactor:charge_units 0.001
   595 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  596 print "WAIT power. (%{0}J + %{0}W)\n"
+  597 format :start_reactor:charge
+  598 format :start_reactor:flow
   599 set :start_reactor:supply_fuel false
   600 jump *label270 always
   601 label *label261
 
   603 jump *label264 greaterThanEq :start_reactor:fuel 10
   604 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   605 jump *label262 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  606 print "WAIT fuel\n"
   607 jump *label269 always
   608 label *label262
-    * print "WAIT system fuel"
-    * print "\n"
+  609 print "WAIT system fuel\n"
   610 jump *label269 always
   611 label *label264
   612 op mul *tmp185 45 3
   613 jump *label265 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  614 print "WAIT buffer fuel\n"
   615 jump *label268 always
   616 label *label265
   617 jump *label266 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  618 print "WAIT cryo\n"
   619 jump *label267 always
   620 label *label266
-    * print "STARTUP"
-    * print "\n"
+  621 print "STARTUP\n"
   622 op add .START_POWER_REQ .START_POWER_REQ 23000
   623 control enabled :start_reactor:reactor true
   624 label *label267
 
   671 jump *label26 equal :emerg_shutdown false
   672 label *label28
   673 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  674 print "Central Fuel at {0} / 0 - "
+  675 format :throttle_blast:fuel_stored
   676 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  677 print " Enemies detected.\n"
   678 jump *label27 always
   679 label *label31
-    * print " Critical power."
-    * print "\n"
+  680 print " Critical power.\n"
   681 jump *label27 always
   682 label *label26
   683 jump *label33 notEqual *tmp28 false
   684 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  685 print "Fuel {0} / 150 (due to emergency)\n"
+  686 format :throttle_blast:fuel_stored
   687 jump *label34 always
   688 label *label33
   689 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  690 print "Fuel {0} / 800\n"
+  691 format :throttle_blast:fuel_stored
   692 label *label34
   693 label *label27
   694 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
 
   699 op div :diff_generators:stored_pc *tmp48 *tmp49
   700 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   701 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * print "Differential now idle."
-    * print "\n"
+  702 print "Differential now idle.\n"
   703 control enabled generator1 false
   704 control enabled generator2 false
   705 jump *label39 always
 
   719 # "Function: def kilo(in val)"
   720 op idiv *tmp89 .START_POWER_REQ 100
   721 op div :kilo*retval *tmp89 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  722 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  723 format :kilo*retval
+  724 format :charge
+  725 format :surplus
   726 jump *label43 always
   727 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  728 print "Power {0}kW, {0}kJ\n"
+  729 format :surplus
+  730 format :kilo*retval
   731 # "Function: def update_reactors_desired()"
   732 sensor *tmp69 .NODE @powerNetStored
   733 sensor *tmp70 .NODE @powerNetCapacity
 
   749 label *label51
   750 label *label43
   751 jump *label55 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  752 print "Require only {0}/5 reactors.\n"
+  753 format .REACTORS_DESIRED
   754 label *label55
   755 printflush message1
   756 jump *label7 always
 
   772 op mul *tmp120 :start_reactor:surplus 0.2
   773 op add .AVG_SURPLUS *tmp119 *tmp120
   774 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  775 print "#{0} - "
+  776 format :start_reactor:reactor_num
   777 jump *label69 equal :start_reactor:emerg_shutdown false
   778 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  779 print "emergency mode\n"
   780 set :start_reactor*retval false
   781 jump *label70 always
   782 label *label69
   783 jump *label71 equal :start_reactor:enabled false
   784 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   785 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  786 print "STOP unwanted\n"
   787 jump *label72 always
   788 label *label73
   789 jump *label75 lessThanEq :start_reactor:reactor_num 1
   790 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   791 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp132
   792 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  793 print "STOP system fuel low\n"
   794 jump *label72 always
   795 label *label75
   796 jump *label79 greaterThan :start_reactor:fuel 1
   797 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  798 print "STOP fuel low\n"
   799 jump *label72 always
   800 label *label79
   801 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   802 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  803 print "STOP out of cryo\n"
   804 jump *label72 always
   805 label *label81
   806 jump *label83 greaterThanEq :start_reactor:secs 30
 
   823 jump *label85 greaterThanEq *tmp147 .PWR_ABORT
   824 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   825 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  826 print "START FAIL battery\n"
   827 set :start_reactor*retval false
   828 jump *label72 always
   829 label *label85
   830 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  831 print "Starting {0} secs, req {0}J\n"
+  832 format :start_reactor:time_left
+  833 format :calc_charge_req*retval
   834 jump *label72 always
   835 label *label83
   836 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   837 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   838 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  839 print "ABANDON - battery crit\n"
   840 set :start_reactor*retval false
   841 jump *label72 always
   842 label *label89
   843 op idiv :start_reactor:mins :start_reactor:secs 6
   844 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  845 print "RUN {0} mins\n"
+  846 format :start_reactor:mins
   847 jump *label72 always
   848 label *label71
   849 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   855 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
   856 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
   857 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  858 print "IDLE\n"
   859 set :start_reactor*retval false
   860 jump *label94 always
   861 label *label93
 
   865 op div :start_reactor:flow *tmp175 10
   866 op idiv *tmp178 :start_reactor:charge_units 0.001
   867 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  868 print "WAIT power. (%{0}J + %{0}W)\n"
+  869 format :start_reactor:charge
+  870 format :start_reactor:flow
   871 set :start_reactor*retval false
   872 jump *label96 always
   873 label *label95
 
   875 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   876 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   877 jump *label101 lessThanEq *tmp182 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  878 print "WAIT fuel\n"
   879 jump *label98 always
   880 label *label101
-    * print "WAIT system fuel"
-    * print "\n"
+  881 print "WAIT system fuel\n"
   882 jump *label98 always
   883 label *label97
   884 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
   885 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp185
-    * print "WAIT buffer fuel"
-    * print "\n"
+  886 print "WAIT buffer fuel\n"
   887 jump *label104 always
   888 label *label103
   889 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  890 print "WAIT cryo\n"
   891 jump *label106 always
   892 label *label105
-    * print "STARTUP"
-    * print "\n"
+  893 print "STARTUP\n"
   894 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   895 control enabled :start_reactor:reactor true
   896 label *label106

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp231 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .ULD_IN_1 unloader1
set .ULD_OUT_1 unloader2
set .ULD_IN_2 unloader3
set .ULD_OUT_2 unloader4
set .ULD_IN_MANY unloader5
set .ULD_OUT_MANY unloader6
set .ULD_MIXER unloader7
set .TOWER cyclone1
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health .TOWER 1 :check_radar:enemy_found
jump *label157 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config .ULD_IN_1 @scrap
control config .ULD_OUT_1 @blast-compound
control config .ULD_IN_2 @scrap
control config .ULD_OUT_2 @blast-compound
control config .ULD_IN_MANY @scrap
control config .ULD_OUT_MANY @blast-compound
control config .ULD_MIXER @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label158 always
label *label157
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label158
# "Function: def check_manual_shutdown()"
jump *label11 equal switch1 null
sensor *tmp10 switch1 @enabled
jump *label11 notEqual *tmp10 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
set :calc_charge_req:reactor reactor1
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp98 60
jump *label127 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label128 notEqual *tmp101 false
label *label127
set :calc_charge_req*retval 0
jump *label130 always
label *label128
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label130
set .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor2
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp98 60
jump *label132 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label133 notEqual *tmp101 false
label *label132
set :calc_charge_req*retval 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label135
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor3
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp98 60
jump *label137 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label138 notEqual *tmp101 false
label *label137
set :calc_charge_req*retval 0
jump *label140 always
label *label138
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label140
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor4
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp98 60
jump *label142 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label143 notEqual *tmp101 false
label *label142
set :calc_charge_req*retval 0
jump *label145 always
label *label143
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label145
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor5
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp98 60
jump *label147 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label148 notEqual *tmp101 false
label *label147
set :calc_charge_req*retval 0
jump *label150 always
label *label148
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label150
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :start_reactor:reactor reactor1
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp108 @tick :t_startup1
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#1 - "
jump *label165 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label199 always
label *label165
jump *label185 equal :start_reactor:enabled false
jump *label167 greaterThanEq .REACTORS_DESIRED 1
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label198 always
label *label167
jump *label168 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label198 always
label *label168
jump *label169 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label198 always
label *label169
jump *label177 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp98 60
jump *label171 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label172 notEqual *tmp101 false
label *label171
set :calc_charge_req*retval 0
jump *label174 always
label *label172
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label174
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label175 greaterThanEq *tmp147 5000
jump *label175 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label198 always
label *label175
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label198 always
label *label177
jump *label178 greaterThanEq :start_reactor:charge 2000
jump *label178 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label198 always
label *label178
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label198 always
label *label185
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 1
op add :start_reactor:cryo_req 3 2
jump *label186 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label197 always
label *label186
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label187 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label196 always
label *label187
jump *label190 equal :fuel_1 false
jump *label190 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label188 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label195 always
label *label188
print "WAIT system fuel\n"
jump *label195 always
label *label190
op mul *tmp185 45 1
jump *label191 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label194 always
label *label191
jump *label192 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label193 always
label *label192
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label193
label *label194
label *label195
label *label196
label *label197
label *label198
label *label199
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_IN_1 *tmp93
select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_OUT_1 *tmp97
set :start_reactor:reactor reactor2
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp108 @tick :t_startup2
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#2 - "
jump *label202 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label236 always
label *label202
jump *label222 equal :start_reactor:enabled false
jump *label203 greaterThanEq .REACTORS_DESIRED 2
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label235 always
label *label203
op mul *tmp132 15 2
jump *label204 greaterThanEq :start_reactor:fuel_stored 30
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label235 always
label *label204
jump *label205 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label235 always
label *label205
jump *label206 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label235 always
label *label206
jump *label214 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp98 60
jump *label208 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label209 notEqual *tmp101 false
label *label208
set :calc_charge_req*retval 0
jump *label211 always
label *label209
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label211
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label212 greaterThanEq *tmp147 5000
jump *label212 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label235 always
label *label212
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label235 always
label *label214
jump *label215 greaterThanEq :start_reactor:charge 2000
jump *label215 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label235 always
label *label215
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label235 always
label *label222
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 2
op add :start_reactor:cryo_req 3 4
jump *label223 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label234 always
label *label223
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label224 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label233 always
label *label224
jump *label227 equal :fuel_2 false
jump *label227 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label225 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label232 always
label *label225
print "WAIT system fuel\n"
jump *label232 always
label *label227
op mul *tmp185 45 2
jump *label228 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label231 always
label *label228
jump *label229 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label230 always
label *label229
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label230
label *label231
label *label232
label *label233
label *label234
label *label235
label *label236
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_IN_2 *tmp93
select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_OUT_2 *tmp97
# "Function: def check_radar(in unit)"
radar enemy any any health .TOWER 1 :check_radar:enemy_found
jump *label161 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config .ULD_IN_1 @scrap
control config .ULD_OUT_1 @blast-compound
control config .ULD_IN_2 @scrap
control config .ULD_OUT_2 @blast-compound
control config .ULD_IN_MANY @scrap
control config .ULD_OUT_MANY @blast-compound
control config .ULD_MIXER @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label162 always
label *label161
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label162
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
set :start_reactor:reactor reactor3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp108 @tick :t_startup3
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#3 - "
jump *label239 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label273 always
label *label239
jump *label259 equal :start_reactor:enabled false
jump *label240 greaterThanEq .REACTORS_DESIRED 3
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label272 always
label *label240
op mul *tmp132 15 3
jump *label241 greaterThanEq :start_reactor:fuel_stored 45
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label272 always
label *label241
jump *label242 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label272 always
label *label242
jump *label243 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label272 always
label *label243
jump *label251 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp98 60
jump *label245 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label246 notEqual *tmp101 false
label *label245
set :calc_charge_req*retval 0
jump *label248 always
label *label246
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label248
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label249 greaterThanEq *tmp147 5000
jump *label249 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label272 always
label *label249
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label272 always
label *label251
jump *label252 greaterThanEq :start_reactor:charge 2000
jump *label252 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label272 always
label *label252
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label272 always
label *label259
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 3
op add :start_reactor:cryo_req 3 6
jump *label260 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label271 always
label *label260
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label261 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label270 always
label *label261
jump *label264 equal :fuel_3 false
jump *label264 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label262 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label269 always
label *label262
print "WAIT system fuel\n"
jump *label269 always
label *label264
op mul *tmp185 45 3
jump *label265 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label268 always
label *label265
jump *label266 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label267 always
label *label266
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label267
label *label268
label *label269
label *label270
label *label271
label *label272
label *label273
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp232 :start_reactor:supply_fuel :fuel_4
op or *tmp26 *tmp232 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp93 notEqual *tmp26 false @blast-compound @scrap
control config .ULD_IN_MANY *tmp93
select *tmp97 equal *tmp26 false @blast-compound @scrap
control config .ULD_OUT_MANY *tmp97
op or *tmp233 :fuel_1 :fuel_2
op or *tmp28 *tmp233 *tmp26
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp30 .NODE @powerNetStored
op floor :throttle_blast:charge *tmp30
sensor *tmp32 .NODE @powerNetIn
sensor *tmp33 .NODE @powerNetOut
op sub *tmp34 *tmp32 *tmp33
op floor :throttle_blast:surplus *tmp34
sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
jump *label29 greaterThanEq :throttle_blast:charge 5000
jump *label28 lessThan :throttle_blast:surplus -500
label *label29
jump *label26 equal :emerg_shutdown false
label *label28
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label27 always
label *label31
print " Critical power.\n"
jump *label27 always
label *label26
jump *label33 notEqual *tmp28 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label27
select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
control config .ULD_MIXER *tmp46
# "Function: def diff_generators()"
sensor *tmp48 .NODE @powerNetStored
sensor *tmp49 .NODE @powerNetCapacity
op div :diff_generators:stored_pc *tmp48 *tmp49
jump *label38 lessThanEq :diff_generators:stored_pc 0.9
jump *label38 greaterThanEq .START_POWER_REQ 10
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
# "Function: def kilo(in val)"
op idiv *tmp89 .AVG_SURPLUS 100
op div :surplus *tmp89 10
sensor :kilo:val .NODE @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp89 :kilo:val 100
op div :kilo*retval *tmp89 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp89 .START_POWER_REQ 100
op div :kilo*retval *tmp89 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp69 .NODE @powerNetStored
sensor *tmp70 .NODE @powerNetCapacity
op div :update_reactors_desired:stored *tmp69 *tmp70
jump *label45 lessThanEq :update_reactors_desired:stored 0.98
jump *label45 lessThanEq .AVG_SURPLUS 16500
jump *label49 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label49
label *label45
jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
jump *label51 greaterThanEq .AVG_SURPLUS 8000
op sub *tmp82 .AVG_SURPLUS 10000
op idiv *tmp83 *tmp82 6500
op max :update_reactors_desired:needed 1 *tmp83
op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp85
label *label51
label *label43
jump *label55 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label55
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp108 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label69 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label70 always
label *label69
jump *label71 equal :start_reactor:enabled false
jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label72 always
label *label73
jump *label75 lessThanEq :start_reactor:reactor_num 1
op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp132
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label72 always
label *label75
jump *label79 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label72 always
label *label79
jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label72 always
label *label81
jump *label83 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp98 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp98 60
jump *label152 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label153 notEqual *tmp101 false
label *label152
set :calc_charge_req*retval 0
jump *label155 always
label *label153
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label155
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label85 greaterThanEq *tmp147 .PWR_ABORT
jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label72 always
label *label85
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label72 always
label *label83
jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label72 always
label *label89
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label72 always
label *label71
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 .PWR_ABORT
op div *tmp163 *tmp162 .PWR_REQ
op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
op div *tmp165 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp167
jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label94 always
label *label93
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label95 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label96 always
label *label95
jump *label97 equal :start_reactor:fuel_on false
jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label101 lessThanEq *tmp182 .FUEL_REQ
print "WAIT fuel\n"
jump *label98 always
label *label101
print "WAIT system fuel\n"
jump *label98 always
label *label97
op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp185
print "WAIT buffer fuel\n"
jump *label104 always
label *label103
jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label106 always
label *label105
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label106
label *label104
label *label98
label *label96
label *label94
label *label72
label *label70
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
return :start_reactor*retaddr
