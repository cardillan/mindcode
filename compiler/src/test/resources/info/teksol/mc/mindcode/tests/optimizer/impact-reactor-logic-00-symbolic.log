   661 instructions before optimizations.
    64 instructions eliminated by Temp Variables Elimination (2 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    10 instructions eliminated by If Expression Optimization (4 iterations).
    83 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   536 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   802 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 527):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 531):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 540):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 534):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+43 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 491):
  ! Inline function 'start_reactor' defined at line 140:1        size  +623, benefit      687.5, efficiency      1.104
  * Inline function call at line 80:14                           size  +156, benefit      137.5, efficiency      0.881 (+148 instructions)
    Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 343):
  ! Inline function 'start_reactor' defined at line 140:1        size  +467, benefit      550.0, efficiency      1.178
  * Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 194):
  ! Inline function 'start_reactor' defined at line 140:1        size  +311, benefit      412.5, efficiency      1.326
  * Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 45):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 2: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 3: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 4: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    70 print "\n"
    71 set *tmp8 true
    72 jump *label10 always
-    * set *tmp13 null
    73 jump *label12 always
    74 label *label11
-    * set *tmp13 null
    75 label *label12
    76 set *tmp8 false
    77 jump *label10 always
 
   116 set :update_fuel:uld_in .ULD_IN_1
   117 set :update_fuel:uld_out .ULD_OUT_1
   118 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp20 :update_fuel*retval
   119 set :start_reactor:reactor reactor2
   120 set :start_reactor:reactor_num 2
   121 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   129 set :update_fuel:uld_in .ULD_IN_2
   130 set :update_fuel:uld_out .ULD_OUT_2
   131 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp22 :update_fuel*retval
   132 set :check_radar:unit .TOWER
   133 call *label4 :check_radar*retaddr :check_radar*retval
   134 set *tmp23 :check_radar*retval
 
   167 set :update_fuel:uld_in .ULD_IN_MANY
   168 set :update_fuel:uld_out .ULD_OUT_MANY
   169 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp29 :update_fuel*retval
   170 op or *tmp30 :fuel_1 :fuel_2
   171 op or *tmp31 *tmp30 :fuel_many
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   205 print "\n"
   206 set *tmp45 null
   207 label *label17
-    * set *tmp44 *tmp45
   208 jump *label15 always
   209 label *label14
   210 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   231 print "n"
   232 set *tmp47 null
   233 label *label19
-    * set *tmp44 *tmp47
   234 label *label15
   235 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   236 set *tmp32 *tmp48
 
   266 control enabled generator2 true
   267 set *tmp59 true
   268 label *label24
-    * set *tmp52 *tmp59
   269 label *label22
   270 set :kilo:val .AVG_SURPLUS
   271 call *label0 :kilo*retaddr :kilo*retval
 
   290 print :surplus
   291 print "kW flow."
   292 print "\n"
-    * set *tmp68 null
   293 jump *label26 always
   294 label *label25
   295 print "Power "
 
   317 label *label30
   318 set *tmp80 null
   319 label *label31
-    * set *tmp78 *tmp80
   320 jump *label29 always
   321 label *label28
-    * set *tmp78 null
   322 label *label29
   323 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   324 op mul *tmp82 .GOAL_BUFFER 0.8
 
   339 label *label33
   340 set *tmp70 *tmp85
   341 label *label27
-    * set *tmp68 *tmp70
   342 label *label26
   343 op notEqual *tmp91 .REACTORS_DESIRED 5
   344 jump *label34 equal *tmp91 false
 
   346 print .REACTORS_DESIRED
   347 print "/5 reactors."
   348 print "\n"
-    * set *tmp92 null
   349 jump *label35 always
   350 label *label34
-    * set *tmp92 null
   351 label *label35
   352 printflush message1
   353 label *label8
 
   399 jump *label43 equal *tmp107 false
   400 set :calc_charge_req*retval 0
   401 jump *label42 always
-    * set *tmp108 null
   402 jump *label44 always
   403 label *label43
-    * set *tmp108 null
   404 label *label44
   405 op sub *tmp109 30 :calc_charge_req:secs
   406 set :calc_charge_req:time_left *tmp109
 
   451 print "emergency mode"
   452 print "\n"
   453 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   454 jump *label47 always
   455 label *label46
   456 jump *label48 equal :start_reactor:enabled false
 
   652 label *label65
   653 set *tmp131 *tmp178
   654 label *label49
-    * set *tmp128 *tmp131
   655 label *label47
   656 sensor *tmp201 :start_reactor:reactor @enabled
   657 op notEqual *tmp202 :start_reactor:enabled *tmp201
   658 jump *label76 equal *tmp202 false
   659 set *tmp204 @tick
   660 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   661 jump *label77 always
   662 label *label76
-    * set *tmp203 null
   663 label *label77
   664 set :start_reactor*retval :start_reactor:supply_fuel
   665 jump *label45 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   198 jump *label16 equal :throttle_blast:emerg_shutdown false
   199 print " Enemies detected."
   200 print "\n"
-    * set *tmp45 null
   201 jump *label17 always
   202 label *label16
   203 print " Critical power."
   204 print "\n"
-    * set *tmp45 null
   205 label *label17
   206 jump *label15 always
   207 label *label14
 
   216 print " "
   217 print "(due to emergency)"
   218 print "\n"
-    * set *tmp47 null
   219 jump *label19 always
   220 label *label18
   221 set :throttle_blast:limit .FUEL_LIMIT
 
   226 print :throttle_blast:limit
   227 print "\"
   228 print "n"
-    * set *tmp47 null
   229 label *label19
   230 label *label15
   231 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   255 print "\n"
   256 control enabled generator1 false
   257 control enabled generator2 false
-    * set *tmp59 false
   258 jump *label24 always
   259 label *label23
   260 control enabled generator1 true
   261 control enabled generator2 true
-    * set *tmp59 true
   262 label *label24
   263 label *label22
   264 set :kilo:val .AVG_SURPLUS
 
   306 jump *label30 equal *tmp79 false
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   309 jump *label31 always
   310 label *label30
-    * set *tmp80 null
   311 label *label31
   312 jump *label29 always
   313 label *label28
 
   329 label *label32
   330 set *tmp85 null
   331 label *label33
-    * set *tmp70 *tmp85
   332 label *label27
   333 label *label26
   334 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   374 set *tmp101 .FUEL_OFF
   375 label *label41
   376 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   377 label *label37
   378 return :update_fuel*retaddr
   379 end
 
   549 label *label53
   550 set *tmp133 *tmp140
   551 label *label51
-    * set *tmp131 *tmp133
   552 jump *label49 always
   553 label *label48
   554 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   639 label *label67
   640 set *tmp178 *tmp181
   641 label *label65
-    * set *tmp131 *tmp178
   642 label *label49
   643 label *label47
   644 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   324 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   325 op min *tmp90 5 *tmp89
   326 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   327 jump *label33 always
   328 label *label32
-    * set *tmp85 null
   329 label *label33
   330 label *label27
   331 label *label26
 
   448 control enabled *tmp134 false
   449 print "STOP unwanted"
   450 print "\n"
-    * set *tmp133 null
   451 jump *label51 always
   452 label *label50
   453 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   544 label *label55
   545 set *tmp140 *tmp144
   546 label *label53
-    * set *tmp133 *tmp140
   547 label *label51
   548 jump *label49 always
   549 label *label48
 
   563 print "IDLE"
   564 print "\n"
   565 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   566 jump *label65 always
   567 label *label64
   568 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   632 label *label69
   633 set *tmp181 *tmp190
   634 label *label67
-    * set *tmp178 *tmp181
   635 label *label65
   636 label *label49
   637 label *label47

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   459 control enabled *tmp141 false
   460 print "STOP system fuel low"
   461 print "\n"
-    * set *tmp140 null
   462 jump *label53 always
   463 label *label52
   464 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   541 label *label57
   542 set *tmp144 *tmp148
   543 label *label55
-    * set *tmp140 *tmp144
   544 label *label53
   545 label *label51
   546 jump *label49 always
 
   581 print "W)"
   582 print "\n"
   583 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   584 jump *label67 always
   585 label *label66
   586 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   627 label *label73
   628 set *tmp190 *tmp196
   629 label *label69
-    * set *tmp181 *tmp190
   630 label *label67
   631 label *label65
   632 label *label49

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   467 control enabled *tmp145 false
   468 print "STOP fuel low"
   469 print "\n"
-    * set *tmp144 null
   470 jump *label55 always
   471 label *label54
   472 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   538 label *label59
   539 set *tmp148 *tmp152
   540 label *label57
-    * set *tmp144 *tmp148
   541 label *label55
   542 label *label53
   543 label *label51
 
   596 print "\n"
   597 set *tmp193 null
   598 label *label71
-    * set *tmp190 *tmp193
   599 jump *label69 always
   600 label *label68
   601 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   622 label *label75
   623 set *tmp196 *tmp198
   624 label *label73
-    * set *tmp190 *tmp196
   625 label *label69
   626 label *label67
   627 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   475 control enabled *tmp149 false
   476 print "STOP out of cryo"
   477 print "\n"
-    * set *tmp148 null
   478 jump *label57 always
   479 label *label56
   480 op lessThan *tmp151 :start_reactor:secs 30
 
   535 label *label63
   536 set *tmp152 *tmp164
   537 label *label59
-    * set *tmp148 *tmp152
   538 label *label57
   539 label *label55
   540 label *label53
 
   587 jump *label70 equal *tmp192 false
   588 print "WAIT fuel"
   589 print "\n"
-    * set *tmp193 null
   590 jump *label71 always
   591 label *label70
   592 print "WAIT system fuel"
   593 print "\n"
-    * set *tmp193 null
   594 label *label71
   595 jump *label69 always
   596 label *label68
 
   599 jump *label72 equal *tmp195 false
   600 print "WAIT buffer fuel"
   601 print "\n"
-    * set *tmp196 null
   602 jump *label73 always
   603 label *label72
   604 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   615 control enabled *tmp199 true
   616 set *tmp198 true
   617 label *label75
-    * set *tmp196 *tmp198
   618 label *label73
   619 label *label69
   620 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   507 print "\n"
   508 set *tmp157 null
   509 label *label61
-    * set *tmp152 *tmp157
   510 jump *label59 always
   511 label *label58
   512 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   532 print "\n"
   533 set *tmp164 null
   534 label *label63
-    * set *tmp152 *tmp164
   535 label *label59
   536 label *label57
   537 label *label55
 
   603 jump *label74 equal *tmp197 false
   604 print "WAIT cryo"
   605 print "\n"
-    * set *tmp198 null
   606 jump *label75 always
   607 label *label74
   608 print "STARTUP"
 
   610 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   611 set *tmp199 :start_reactor:reactor
   612 control enabled *tmp199 true
-    * set *tmp198 true
   613 label *label75
   614 label *label73
   615 label *label69

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   493 print "START FAIL battery"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   496 jump *label61 always
   497 label *label60
   498 op sub *tmp160 30 :start_reactor:secs
 
   504 print :start_reactor:charge_req
   505 print "J"
   506 print "\n"
-    * set *tmp157 null
   507 label *label61
   508 jump *label59 always
   509 label *label58
 
   516 print "ABANDON - battery crit"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   519 jump *label63 always
   520 label *label62
   521 op idiv *tmp167 :start_reactor:secs 6
 
   527 print " "
   528 print "mins"
   529 print "\n"
-    * set *tmp164 null
   530 label *label63
   531 label *label59
   532 label *label57

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-64 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
    78 set :calc_charge_req:reactor reactor1
    79 set :calc_charge_req:time :t_startup1
    80 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
    84 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   85 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    86 set :calc_charge_req:reactor reactor3
    87 set :calc_charge_req:time :t_startup3
    88 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   89 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    90 set :calc_charge_req:reactor reactor4
    91 set :calc_charge_req:time :t_startup4
    92 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    94 set :calc_charge_req:reactor reactor5
    95 set :calc_charge_req:time :t_startup5
    96 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+   97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    98 set :start_reactor:reactor reactor1
    99 set :start_reactor:reactor_num 1
   100 set :start_reactor:emerg_shutdown :emerg_shutdown
   101 set :start_reactor:fuel_on :fuel_1
   102 set :start_reactor:t_startup :t_startup1
   103 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  104 set :fuel_1 :start_reactor*retval
   105 set :t_startup1 .RET_T_STARTUP
   106 set :update_fuel:fuel :fuel_1
   107 set :update_fuel:uld_in .ULD_IN_1
 
   113 set :start_reactor:fuel_on :fuel_2
   114 set :start_reactor:t_startup :t_startup2
   115 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  116 set :fuel_2 :start_reactor*retval
   117 set :t_startup2 .RET_T_STARTUP
   118 set :update_fuel:fuel :fuel_2
   119 set :update_fuel:uld_in .ULD_IN_2
 
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
   122 set :check_radar:unit .TOWER
   123 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  124 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   125 set :start_reactor:reactor reactor3
   126 set :start_reactor:reactor_num 3
   127 set :start_reactor:emerg_shutdown :emerg_shutdown
   128 set :start_reactor:fuel_on :fuel_3
   129 set :start_reactor:t_startup :t_startup3
   130 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  131 set :fuel_3 :start_reactor*retval
   132 set :t_startup3 .RET_T_STARTUP
   133 set :start_reactor:reactor reactor4
   134 set :start_reactor:reactor_num 4
 
   136 set :start_reactor:fuel_on :fuel_4
   137 set :start_reactor:t_startup :t_startup4
   138 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  139 set :fuel_4 :start_reactor*retval
   140 set :t_startup4 .RET_T_STARTUP
   141 set :start_reactor:reactor reactor5
   142 set :start_reactor:reactor_num 5
 
   144 set :start_reactor:fuel_on :fuel_5
   145 set :start_reactor:t_startup :t_startup5
   146 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  147 set :fuel_5 :start_reactor*retval
   148 set :t_startup5 .RET_T_STARTUP
   149 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  150 op or :fuel_many *tmp27 :fuel_5
   151 set :update_fuel:fuel :fuel_many
   152 set :update_fuel:uld_in .ULD_IN_MANY
   153 set :update_fuel:uld_out .ULD_OUT_MANY
 
   158 set :throttle_blast:reactors_fueled *tmp31
   159 set :throttle_blast:emerg_shutdown :emerg_shutdown
   160 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  161 op floor :throttle_blast:charge *tmp33
   162 sensor *tmp35 .NODE @powerNetIn
   163 sensor *tmp36 .NODE @powerNetOut
   164 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  165 op floor :throttle_blast:surplus *tmp37
+  166 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   167 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   168 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   169 op land *tmp42 *tmp40 *tmp41
 
   210 print "n"
   211 label *label19
   212 label *label15
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  213 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   214 jump *label13 always
   215 set *tmp32 null
   216 label *label13
 
   226 # "Function: def diff_generators()"
   227 sensor *tmp53 .NODE @powerNetStored
   228 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  229 op div :diff_generators:stored_pc *tmp53 *tmp54
   230 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   231 op lessThan *tmp57 .START_POWER_REQ 10
   232 op land *tmp58 *tmp56 *tmp57
 
   243 label *label22
   244 set :kilo:val .AVG_SURPLUS
   245 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  246 set :surplus :kilo*retval
+  247 sensor :kilo:val .NODE @powerNetStored
   248 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  249 set :charge :kilo*retval
   250 op greaterThan *tmp67 .START_POWER_REQ 0
   251 jump *label25 equal *tmp67 false
   252 set :kilo:val .START_POWER_REQ
   253 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  254 set :req :kilo*retval
   255 print "Req "
   256 print :req
   257 print "kJ / "
 
   271 # "Function: def update_reactors_desired()"
   272 sensor *tmp71 .NODE @powerNetStored
   273 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  274 op div :update_reactors_desired:stored *tmp71 *tmp72
   275 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   276 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   277 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   294 jump *label32 equal *tmp84 false
   295 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   296 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  297 op max :update_reactors_desired:needed 1 *tmp87
   298 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  299 op min .REACTORS_DESIRED 5 *tmp89
   300 jump *label33 always
   301 label *label32
   302 label *label33
 
   319 label *label0
   320 # "Function: def kilo(in val)"
   321 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  322 op div :kilo*retval *tmp93 10
   323 jump *label36 always
   324 set :kilo*retval null
   325 label *label36
 
   350 label *label2
   351 # "Function: def calc_charge_req(in reactor, in time)"
   352 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  353 op idiv :calc_charge_req:secs *tmp102 60
   354 op greaterThan *tmp104 :calc_charge_req:secs 30
   355 sensor *tmp105 :calc_charge_req:reactor @enabled
   356 op equal *tmp106 *tmp105 false
 
   361 jump *label44 always
   362 label *label43
   363 label *label44
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  364 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   365 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   366 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  367 op floor :calc_charge_req:charge_req *tmp111
   368 set :calc_charge_req*retval :calc_charge_req:charge_req
   369 jump *label42 always
   370 set :calc_charge_req*retval null
 
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :start_reactor:t_startup
   377 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  378 op idiv :start_reactor:secs *tmp113 60
+  379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   380 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  381 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   383 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  384 op floor :start_reactor:charge *tmp118
   385 sensor *tmp120 .NODE @powerNetIn
   386 sensor *tmp121 .NODE @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  388 op floor :start_reactor:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   393 print "#"
   394 print :start_reactor:reactor_num
   395 print " "
   396 print "- "
   397 jump *label46 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  398 control enabled :start_reactor:reactor false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor:supply_fuel false
 
   404 jump *label48 equal :start_reactor:enabled false
   405 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   406 jump *label50 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  407 control enabled :start_reactor:reactor false
   408 print "STOP unwanted"
   409 print "\n"
   410 jump *label51 always
 
   414 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   415 op land *tmp139 *tmp136 *tmp138
   416 jump *label52 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  417 control enabled :start_reactor:reactor false
   418 print "STOP system fuel low"
   419 print "\n"
   420 jump *label53 always
   421 label *label52
   422 op lessThanEq *tmp143 :start_reactor:fuel 1
   423 jump *label54 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  424 control enabled :start_reactor:reactor false
   425 print "STOP fuel low"
   426 print "\n"
   427 jump *label55 always
   428 label *label54
   429 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   430 jump *label56 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  431 control enabled :start_reactor:reactor false
   432 print "STOP out of cryo"
   433 print "\n"
   434 jump *label57 always
 
   444 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   445 op land *tmp156 *tmp154 *tmp155
   446 jump *label60 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  447 control enabled :start_reactor:reactor false
   448 print "START FAIL battery"
   449 print "\n"
   450 set :start_reactor:supply_fuel false
   451 jump *label61 always
   452 label *label60
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  453 op sub :start_reactor:time_left 30 :start_reactor:secs
   454 print "Starting "
   455 print :start_reactor:time_left
   456 print " "
 
   465 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   466 op land *tmp163 *tmp161 *tmp162
   467 jump *label62 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  468 control enabled :start_reactor:reactor false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor:supply_fuel false
   472 jump *label63 always
   473 label *label62
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  474 op idiv :start_reactor:mins :start_reactor:secs 6
+  475 op div :start_reactor:mins :start_reactor:mins 10
   476 print "RUN "
   477 print :start_reactor:mins
   478 print " "
 
   489 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   490 op sub *tmp170 *tmp169 .PWR_ABORT
   491 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  492 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   493 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  494 op max :start_reactor:flow_units -0.1 *tmp173
   495 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  496 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   497 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   498 jump *label64 equal *tmp177 false
   499 print "IDLE"
 
   506 jump *label66 equal *tmp180 false
   507 op mul *tmp182 :start_reactor:flow_units 1000
   508 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  509 op div :start_reactor:flow *tmp183 10
   510 op mul *tmp185 :start_reactor:charge_units 1000
   511 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  512 op div :start_reactor:charge *tmp186 10
   513 print "WAIT power. (%"
   514 print :start_reactor:charge
   515 print "J + %"
 
   550 print "STARTUP"
   551 print "\n"
   552 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  553 control enabled :start_reactor:reactor true
   554 label *label75
   555 label *label73
   556 label *label69
 
   561 sensor *tmp201 :start_reactor:reactor @enabled
   562 op notEqual *tmp202 :start_reactor:enabled *tmp201
   563 jump *label76 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  564 set .RET_T_STARTUP @tick
   565 jump *label77 always
   566 label *label76
   567 label *label77
 
   573 end
   574 label *label4
   575 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  576 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   577 op notEqual *tmp206 :check_radar:enemy_found null
   578 jump *label79 equal *tmp206 false
   579 control enabled projector1 true
   580 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  581 control config .ULD_IN_1 .FUEL_OFF
+  582 control config .ULD_OUT_1 .FUEL
+  583 control config .ULD_IN_2 .FUEL_OFF
+  584 control config .ULD_OUT_2 .FUEL
+  585 control config .ULD_IN_MANY .FUEL_OFF
+  586 control config .ULD_OUT_MANY .FUEL
+  587 control config .ULD_MIXER .FUEL_OFF
   588 control enabled reactor1 false
   589 control enabled reactor2 false
   590 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   185 label *label17
   186 jump *label15 always
   187 label *label14
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label18 equal *tmp46 false
+  188 jump *label18 notEqual :throttle_blast:reactors_fueled false
   189 set :throttle_blast:limit .FUEL_LIMIT_LOW
   190 print "Fuel "
   191 print :throttle_blast:fuel_stored
 
   244 sensor :kilo:val .NODE @powerNetStored
   245 call *label0 :kilo*retaddr :kilo*retval
   246 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label25 equal *tmp67 false
+  247 jump *label25 lessThanEq .START_POWER_REQ 0
   248 set :kilo:val .START_POWER_REQ
   249 call *label0 :kilo*retaddr :kilo*retval
   250 set :req :kilo*retval
 
   273 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   274 op land *tmp77 *tmp74 *tmp76
   275 jump *label28 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label30 equal *tmp79 false
+  276 jump *label30 lessThanEq .REACTORS_DESIRED 2
   277 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   278 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   279 jump *label31 always
 
   297 label *label33
   298 label *label27
   299 label *label26
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label34 equal *tmp91 false
+  300 jump *label34 equal .REACTORS_DESIRED 5
   301 print "Require only "
   302 print .REACTORS_DESIRED
   303 print "/5 reactors."
 
   330 label *label39
   331 control config *tmp95 *tmp97
   332 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label40 equal *tmp100 false
+  333 jump *label40 notEqual :update_fuel:fuel false
   334 set *tmp101 .FUEL
   335 jump *label41 always
   336 label *label40
 
   395 jump *label47 always
   396 label *label46
   397 jump *label48 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label50 equal *tmp132 false
+  398 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   399 control enabled :start_reactor:reactor false
   400 print "STOP unwanted"
   401 print "\n"
 
   411 print "\n"
   412 jump *label53 always
   413 label *label52
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label54 equal *tmp143 false
+  414 jump *label54 greaterThan :start_reactor:fuel 1
   415 control enabled :start_reactor:reactor false
   416 print "STOP fuel low"
   417 print "\n"
   418 jump *label55 always
   419 label *label54
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label56 equal *tmp147 false
+  420 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   421 control enabled :start_reactor:reactor false
   422 print "STOP out of cryo"
   423 print "\n"
   424 jump *label57 always
   425 label *label56
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label58 equal *tmp151 false
+  426 jump *label58 greaterThanEq :start_reactor:secs 30
   427 set :calc_charge_req:reactor :start_reactor:reactor
   428 set :calc_charge_req:time :start_reactor:t_startup
   429 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
   483 op max :start_reactor:flow_units -0.1 *tmp173
   484 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   485 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label64 equal *tmp177 false
+  486 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   487 print "IDLE"
   488 print "\n"
   489 set :start_reactor:supply_fuel false
   490 jump *label65 always
   491 label *label64
   492 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label66 equal *tmp180 false
+  493 jump *label66 greaterThanEq *tmp179 1
   494 op mul *tmp182 :start_reactor:flow_units 1000
   495 op floor *tmp183 *tmp182
   496 op div :start_reactor:flow *tmp183 10
 
   510 op land *tmp189 :start_reactor:fuel_on *tmp188
   511 jump *label68 equal *tmp189 false
   512 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label70 equal *tmp192 false
+  513 jump *label70 lessThanEq *tmp191 .FUEL_REQ
   514 print "WAIT fuel"
   515 print "\n"
   516 jump *label71 always
 
   521 jump *label69 always
   522 label *label68
   523 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label72 equal *tmp195 false
+  524 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
   525 print "WAIT buffer fuel"
   526 print "\n"
   527 jump *label73 always
   528 label *label72
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label74 equal *tmp197 false
+  529 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   530 print "WAIT cryo"
   531 print "\n"
   532 jump *label75 always
 
   543 label *label49
   544 label *label47
   545 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label76 equal *tmp202 false
+  546 jump *label76 equal :start_reactor:enabled *tmp201
   547 set .RET_T_STARTUP @tick
   548 jump *label77 always
   549 label *label76
 
   557 label *label4
   558 # "Function: def check_radar(in unit)"
   559 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label79 equal *tmp206 false
+  560 jump *label79 equal :check_radar:enemy_found null
   561 control enabled projector1 true
   562 control enabled projector2 true
   563 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   275 jump *label30 lessThanEq .REACTORS_DESIRED 2
   276 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   277 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label31 always
   278 label *label30
   279 label *label31
-    * jump *label29 always
   280 label *label28
   281 label *label29
   282 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   289 op max :update_reactors_desired:needed 1 *tmp87
   290 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   291 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label33 always
   292 label *label32
   293 label *label33
   294 label *label27
 
   298 print .REACTORS_DESIRED
   299 print "/5 reactors."
   300 print "\n"
-    * jump *label35 always
   301 label *label34
   302 label *label35
   303 printflush message1
 
   346 jump *label43 equal *tmp107 false
   347 set :calc_charge_req*retval 0
   348 jump *label42 always
-    * jump *label44 always
   349 label *label43
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   539 sensor *tmp201 :start_reactor:reactor @enabled
   540 jump *label76 equal :start_reactor:enabled *tmp201
   541 set .RET_T_STARTUP @tick
-    * jump *label77 always
   542 label *label76
   543 label *label77
   544 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   350 label *label44
   351 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   352 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  353 op idiv :calc_charge_req:charge_req *tmp110 0.04
   354 set :calc_charge_req*retval :calc_charge_req:charge_req
   355 jump *label42 always
   356 set :calc_charge_req*retval null
 
   484 label *label64
   485 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   486 jump *label66 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  487 op idiv *tmp183 :start_reactor:flow_units 0.001
   488 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  489 op idiv *tmp186 :start_reactor:charge_units 0.001
   490 op div :start_reactor:charge *tmp186 10
   491 print "WAIT power. (%"
   492 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   143 set :fuel_5 :start_reactor*retval
   144 set :t_startup5 .RET_T_STARTUP
   145 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  146 op or :fuel_many *tmp27 :start_reactor*retval
   147 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  148 set :update_fuel:uld_in unloader5
+  149 set :update_fuel:uld_out unloader6
   150 call *label1 :update_fuel*retaddr :update_fuel*retval
   151 op or *tmp30 :fuel_1 :fuel_2
   152 op or *tmp31 *tmp30 :fuel_many
   153 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   154 set :throttle_blast:reactors_fueled *tmp31
   155 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  156 sensor *tmp33 node1 @powerNetStored
   157 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  158 sensor *tmp35 node1 @powerNetIn
+  159 sensor *tmp36 node1 @powerNetOut
   160 op sub *tmp37 *tmp35 *tmp36
   161 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  162 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  163 op lessThan *tmp40 :throttle_blast:charge 5000
+  164 op lessThan *tmp41 :throttle_blast:surplus -500
   165 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  166 op or *tmp43 *tmp42 :emerg_shutdown
   167 jump *label14 equal *tmp43 false
   168 set :throttle_blast:limit 0
   169 print "Central Fuel at "
   170 print :throttle_blast:fuel_stored
   171 print " "
   172 print "/ "
-    * print :throttle_blast:limit
+  173 print 0
   174 print " "
   175 print "- "
-    * jump *label16 equal :throttle_blast:emerg_shutdown false
+  176 jump *label16 equal :emerg_shutdown false
   177 print " Enemies detected."
   178 print "\n"
   179 jump *label17 always
 
   183 label *label17
   184 jump *label15 always
   185 label *label14
-    * jump *label18 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  186 jump *label18 notEqual *tmp31 false
+  187 set :throttle_blast:limit 150
   188 print "Fuel "
   189 print :throttle_blast:fuel_stored
   190 print " "
   191 print "/ "
-    * print :throttle_blast:limit
+  192 print .FUEL_LIMIT_LOW
   193 print " "
   194 print "(due to emergency)"
   195 print "\n"
   196 jump *label19 always
   197 label *label18
-    * set :throttle_blast:limit .FUEL_LIMIT
+  198 set :throttle_blast:limit 800
   199 print "Fuel "
   200 print :throttle_blast:fuel_stored
   201 print " "
   202 print "/ "
-    * print :throttle_blast:limit
+  203 print .FUEL_LIMIT
   204 print "\"
   205 print "n"
   206 label *label19
   207 label *label15
   208 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   209 jump *label13 always
-    * set *tmp32 null
   210 label *label13
   211 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label20 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  212 set *tmp49 unloader7
+  213 jump *label20 equal *tmp32 false
+  214 set *tmp51 @pyratite
   215 jump *label21 always
   216 label *label20
-    * set *tmp51 .FUEL_OFF
+  217 set *tmp51 @scrap
   218 label *label21
-    * control config *tmp49 *tmp51
+  219 control config .ULD_MIXER *tmp51
   220 # "Function: def diff_generators()"
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  221 sensor *tmp53 node1 @powerNetStored
+  222 sensor *tmp54 node1 @powerNetCapacity
   223 op div :diff_generators:stored_pc *tmp53 *tmp54
   224 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   225 op lessThan *tmp57 .START_POWER_REQ 10
 
   238 set :kilo:val .AVG_SURPLUS
   239 call *label0 :kilo*retaddr :kilo*retval
   240 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  241 sensor :kilo:val node1 @powerNetStored
   242 call *label0 :kilo*retaddr :kilo*retval
   243 set :charge :kilo*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
 
   246 call *label0 :kilo*retaddr :kilo*retval
   247 set :req :kilo*retval
   248 print "Req "
-    * print :req
+  249 print :kilo*retval
   250 print "kJ / "
   251 print :charge
   252 print "kJ. "
 
   258 print "Power "
   259 print :surplus
   260 print "kW, "
-    * print :charge
+  261 print :kilo*retval
   262 print "kJ"
   263 print "\n"
   264 # "Function: def update_reactors_desired()"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  265 sensor *tmp71 node1 @powerNetStored
+  266 sensor *tmp72 node1 @powerNetCapacity
   267 op div :update_reactors_desired:stored *tmp71 *tmp72
   268 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  269 op add *tmp75 6500 10000
+  270 op greaterThan *tmp76 .AVG_SURPLUS 16500
   271 op land *tmp77 *tmp74 *tmp76
   272 jump *label28 equal *tmp77 false
   273 jump *label30 lessThanEq .REACTORS_DESIRED 2
   274 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  275 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   276 label *label30
   277 label *label31
   278 label *label28
   279 label *label29
   280 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  281 op mul *tmp82 10000 0.8
+  282 op lessThan *tmp83 .AVG_SURPLUS 8000
   283 op land *tmp84 *tmp81 *tmp83
   284 jump *label32 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  285 op sub *tmp86 .AVG_SURPLUS 10000
+  286 op idiv *tmp87 *tmp86 6500
   287 op max :update_reactors_desired:needed 1 *tmp87
   288 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   289 op min .REACTORS_DESIRED 5 *tmp89
 
   308 op idiv *tmp93 :kilo:val 100
   309 op div :kilo*retval *tmp93 10
   310 jump *label36 always
-    * set :kilo*retval null
   311 label *label36
   312 return :kilo*retaddr
   313 end
 
   320 label *label38
   321 set *tmp97 .FUEL_OFF
   322 label *label39
-    * control config *tmp95 *tmp97
+  323 control config :update_fuel:uld_in *tmp97
   324 set *tmp98 :update_fuel:uld_out
   325 jump *label40 notEqual :update_fuel:fuel false
   326 set *tmp101 .FUEL
 
   328 label *label40
   329 set *tmp101 .FUEL_OFF
   330 label *label41
-    * control config *tmp98 *tmp101
+  331 control config :update_fuel:uld_out *tmp101
   332 label *label37
   333 return :update_fuel*retaddr
   334 end
 
   350 op idiv :calc_charge_req:charge_req *tmp110 0.04
   351 set :calc_charge_req*retval :calc_charge_req:charge_req
   352 jump *label42 always
-    * set :calc_charge_req*retval null
   353 label *label42
   354 return :calc_charge_req*retaddr
   355 end
 
   417 set :calc_charge_req:time :start_reactor:t_startup
   418 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   419 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  420 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   421 op lessThan *tmp154 *tmp153 .PWR_ABORT
   422 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   423 op land *tmp156 *tmp154 *tmp155
 
   433 print :start_reactor:time_left
   434 print " "
   435 print "secs, req "
-    * print :start_reactor:charge_req
+  436 print :calc_charge_req*retval
   437 print "J"
   438 print "\n"
   439 label *label61
 
   536 label *label77
   537 set :start_reactor*retval :start_reactor:supply_fuel
   538 jump *label45 always
-    * set :start_reactor*retval null
   539 label *label45
   540 return :start_reactor*retaddr
   541 end
 
   559 control enabled reactor5 false
   560 set :check_radar*retval true
   561 jump *label78 always
-    * set *tmp207 null
   562 jump *label80 always
   563 label *label79
   564 control enabled projector1 false
   565 control enabled projector2 false
   566 set :check_radar*retval false
   567 jump *label78 always
-    * set *tmp207 null
   568 label *label80
-    * set :check_radar*retval *tmp207
+  569 set :check_radar*retval null
   570 label *label78
   571 return :check_radar*retaddr
   572 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    53 # "Function: def check_manual_shutdown()"
    54 op notEqual *tmp9 switch1 null
    55 sensor *tmp10 switch1 @enabled
 
   146 op or *tmp30 :fuel_1 :fuel_2
   147 op or *tmp31 *tmp30 :fuel_many
   148 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp31
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   149 sensor *tmp33 node1 @powerNetStored
   150 op floor :throttle_blast:charge *tmp33
   151 sensor *tmp35 node1 @powerNetIn
 
   182 print :throttle_blast:fuel_stored
   183 print " "
   184 print "/ "
-    * print .FUEL_LIMIT_LOW
+  185 print 150
   186 print " "
   187 print "(due to emergency)"
   188 print "\n"
 
   193 print :throttle_blast:fuel_stored
   194 print " "
   195 print "/ "
-    * print .FUEL_LIMIT
+  196 print 800
   197 print "\"
   198 print "n"
   199 label *label19
 
   201 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   202 jump *label13 always
   203 label *label13
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   204 jump *label20 equal *tmp32 false
   205 set *tmp51 @pyratite
   206 jump *label21 always
   207 label *label20
   208 set *tmp51 @scrap
   209 label *label21
-    * control config .ULD_MIXER *tmp51
+  210 control config unloader7 *tmp51
   211 # "Function: def diff_generators()"
   212 sensor *tmp53 node1 @powerNetStored
   213 sensor *tmp54 node1 @powerNetCapacity
 
   235 jump *label25 lessThanEq .START_POWER_REQ 0
   236 set :kilo:val .START_POWER_REQ
   237 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   238 print "Req "
   239 print :kilo*retval
   240 print "kJ / "
 
   256 sensor *tmp72 node1 @powerNetCapacity
   257 op div :update_reactors_desired:stored *tmp71 *tmp72
   258 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   259 op greaterThan *tmp76 .AVG_SURPLUS 16500
   260 op land *tmp77 *tmp74 *tmp76
   261 jump *label28 equal *tmp77 false
 
   267 label *label28
   268 label *label29
   269 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   270 op lessThan *tmp83 .AVG_SURPLUS 8000
   271 op land *tmp84 *tmp81 *tmp83
   272 jump *label32 equal *tmp84 false
 
   301 end
   302 label *label1
   303 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp95 :update_fuel:uld_in
   304 jump *label38 equal :update_fuel:fuel false
   305 set *tmp97 .FUEL
   306 jump *label39 always
 
   308 set *tmp97 .FUEL_OFF
   309 label *label39
   310 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   311 jump *label40 notEqual :update_fuel:fuel false
   312 set *tmp101 .FUEL
   313 jump *label41 always
 
   402 set :calc_charge_req:reactor :start_reactor:reactor
   403 set :calc_charge_req:time :start_reactor:t_startup
   404 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   405 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   406 op lessThan *tmp154 *tmp153 .PWR_ABORT
   407 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   551 set :check_radar*retval false
   552 jump *label78 always
   553 label *label80
-    * set :check_radar*retval null
   554 label *label78
   555 return :check_radar*retaddr
   556 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-10 instructions):
 
   198 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   199 jump *label13 always
   200 label *label13
-    * jump *label20 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label21 always
+  201 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   202 label *label20
-    * set *tmp51 @scrap
   203 label *label21
   204 control config unloader7 *tmp51
   205 # "Function: def diff_generators()"
 
   295 end
   296 label *label1
   297 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label38 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label39 always
+  298 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   299 label *label38
-    * set *tmp97 .FUEL_OFF
   300 label *label39
   301 control config :update_fuel:uld_in *tmp97
-    * jump *label40 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label41 always
+  302 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   303 label *label40
-    * set *tmp101 .FUEL_OFF
   304 label *label41
   305 control config :update_fuel:uld_out *tmp101
   306 label *label37
 
   503 label *label49
   504 label *label47
   505 sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label76 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
+  506 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   507 label *label76
   508 label *label77
   509 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   221 label *label24
   222 label *label22
   223 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  224 label *label81
+  225 # "Function: def kilo(in val)"
+  226 op idiv *tmp93 :kilo:val 100
+  227 op div :kilo*retval *tmp93 10
+  228 jump *label82 always
+  229 label *label82
   230 set :surplus :kilo*retval
   231 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  232 label *label83
+  233 # "Function: def kilo(in val)"
+  234 op idiv *tmp93 :kilo:val 100
+  235 op div :kilo*retval *tmp93 10
+  236 jump *label84 always
+  237 label *label84
   238 set :charge :kilo*retval
   239 jump *label25 lessThanEq .START_POWER_REQ 0
   240 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  241 label *label85
+  242 # "Function: def kilo(in val)"
+  243 op idiv *tmp93 :kilo:val 100
+  244 op div :kilo*retval *tmp93 10
+  245 jump *label86 always
+  246 label *label86
   247 print "Req "
   248 print :kilo*retval
   249 print "kJ / "
 
   300 jump *label7 always
   301 label *label9
   302 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label36 always
-    * label *label36
-    * return :kilo*retaddr
-    * end
   303 label *label1
   304 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   305 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   223 set :kilo:val .AVG_SURPLUS
   224 label *label81
   225 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  226 op idiv *tmp93 .AVG_SURPLUS 100
   227 op div :kilo*retval *tmp93 10
   228 jump *label82 always
   229 label *label82
 
   240 set :kilo:val .START_POWER_REQ
   241 label *label85
   242 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo:val 100
+  243 op idiv *tmp93 .START_POWER_REQ 100
   244 op div :kilo*retval *tmp93 10
   245 jump *label86 always
   246 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   220 control enabled generator2 true
   221 label *label24
   222 label *label22
-    * set :kilo:val .AVG_SURPLUS
   223 label *label81
   224 # "Function: def kilo(in val)"
   225 op idiv *tmp93 .AVG_SURPLUS 100
 
   236 label *label84
   237 set :charge :kilo*retval
   238 jump *label25 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   239 label *label85
   240 # "Function: def kilo(in val)"
   241 op idiv *tmp93 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
    94 set :update_fuel:fuel :start_reactor*retval
    95 set :update_fuel:uld_in unloader1
    96 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   97 label *label87
+   98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   99 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  100 label *label88
+  101 label *label89
+  102 control config :update_fuel:uld_in *tmp97
+  103 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  104 label *label90
+  105 label *label91
+  106 control config :update_fuel:uld_out *tmp101
+  107 label *label92
   108 set :start_reactor:reactor reactor2
   109 set :start_reactor:reactor_num 2
   110 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   116 set :update_fuel:fuel :start_reactor*retval
   117 set :update_fuel:uld_in unloader3
   118 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  119 label *label93
+  120 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  121 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  122 label *label94
+  123 label *label95
+  124 control config :update_fuel:uld_in *tmp97
+  125 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  126 label *label96
+  127 label *label97
+  128 control config :update_fuel:uld_out *tmp101
+  129 label *label98
   130 set :check_radar:unit cyclone1
   131 call *label4 :check_radar*retaddr :check_radar*retval
   132 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   159 set :update_fuel:fuel :fuel_many
   160 set :update_fuel:uld_in unloader5
   161 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  162 label *label99
+  163 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  164 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  165 label *label100
+  166 label *label101
+  167 control config :update_fuel:uld_in *tmp97
+  168 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  169 label *label102
+  170 label *label103
+  171 control config :update_fuel:uld_out *tmp101
+  172 label *label104
   173 op or *tmp30 :fuel_1 :fuel_2
   174 op or *tmp31 *tmp30 :fuel_many
   175 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   328 jump *label7 always
   329 label *label9
   330 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label38
-    * label *label39
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label40
-    * label *label41
-    * control config :update_fuel:uld_out *tmp101
-    * label *label37
-    * return :update_fuel*retaddr
-    * end
   331 label *label2
   332 # "Function: def calc_charge_req(in reactor, in time)"
   333 op sub *tmp102 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    96 set :update_fuel:uld_out unloader2
    97 label *label87
    98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+   99 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   100 label *label88
   101 label *label89
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  102 control config unloader1 *tmp97
+  103 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   104 label *label90
   105 label *label91
-    * control config :update_fuel:uld_out *tmp101
+  106 control config unloader2 *tmp101
   107 label *label92
   108 set :start_reactor:reactor reactor2
   109 set :start_reactor:reactor_num 2
 
   118 set :update_fuel:uld_out unloader4
   119 label *label93
   120 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  121 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   122 label *label94
   123 label *label95
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  124 control config unloader3 *tmp97
+  125 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   126 label *label96
   127 label *label97
-    * control config :update_fuel:uld_out *tmp101
+  128 control config unloader4 *tmp101
   129 label *label98
   130 set :check_radar:unit cyclone1
   131 call *label4 :check_radar*retaddr :check_radar*retval
 
   161 set :update_fuel:uld_out unloader6
   162 label *label99
   163 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  164 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   165 label *label100
   166 label *label101
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  167 control config unloader5 *tmp97
+  168 select *tmp101 equal :fuel_many false @blast-compound @scrap
   169 label *label102
   170 label *label103
-    * control config :update_fuel:uld_out *tmp101
+  171 control config unloader6 *tmp101
   172 label *label104
   173 op or *tmp30 :fuel_1 :fuel_2
   174 op or *tmp31 *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    91 call *label3 :start_reactor*retaddr :start_reactor*retval
    92 set :fuel_1 :start_reactor*retval
    93 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
    94 label *label87
    95 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    96 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   110 call *label3 :start_reactor*retaddr :start_reactor*retval
   111 set :fuel_2 :start_reactor*retval
   112 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   113 label *label93
   114 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   115 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
 
   150 set :t_startup5 .RET_T_STARTUP
   151 op or *tmp27 :fuel_3 :fuel_4
   152 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   153 label *label99
   154 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   155 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    46 set .CONTAINER vault1
    47 set .NODE node1
    48 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   49 label *label105
+   50 # "Function: def check_radar(in unit)"
+   51 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   52 jump *label106 equal :check_radar:enemy_found null
+   53 control enabled projector1 true
+   54 control enabled projector2 true
+   55 control config .ULD_IN_1 .FUEL_OFF
+   56 control config .ULD_OUT_1 .FUEL
+   57 control config .ULD_IN_2 .FUEL_OFF
+   58 control config .ULD_OUT_2 .FUEL
+   59 control config .ULD_IN_MANY .FUEL_OFF
+   60 control config .ULD_OUT_MANY .FUEL
+   61 control config .ULD_MIXER .FUEL_OFF
+   62 control enabled reactor1 false
+   63 control enabled reactor2 false
+   64 control enabled reactor3 false
+   65 control enabled reactor4 false
+   66 control enabled reactor5 false
+   67 set :check_radar*retval true
+   68 jump *label108 always
+   69 jump *label107 always
+   70 label *label106
+   71 control enabled projector1 false
+   72 control enabled projector2 false
+   73 set :check_radar*retval false
+   74 jump *label108 always
+   75 label *label107
+   76 label *label108
    77 # "Function: def check_manual_shutdown()"
    78 op notEqual *tmp9 switch1 null
    79 sensor *tmp10 switch1 @enabled
 
   149 control config unloader4 *tmp101
   150 label *label98
   151 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  152 label *label109
+  153 # "Function: def check_radar(in unit)"
+  154 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  155 jump *label110 equal :check_radar:enemy_found null
+  156 control enabled projector1 true
+  157 control enabled projector2 true
+  158 control config .ULD_IN_1 .FUEL_OFF
+  159 control config .ULD_OUT_1 .FUEL
+  160 control config .ULD_IN_2 .FUEL_OFF
+  161 control config .ULD_OUT_2 .FUEL
+  162 control config .ULD_IN_MANY .FUEL_OFF
+  163 control config .ULD_OUT_MANY .FUEL
+  164 control config .ULD_MIXER .FUEL_OFF
+  165 control enabled reactor1 false
+  166 control enabled reactor2 false
+  167 control enabled reactor3 false
+  168 control enabled reactor4 false
+  169 control enabled reactor5 false
+  170 set :check_radar*retval true
+  171 jump *label112 always
+  172 jump *label111 always
+  173 label *label110
+  174 control enabled projector1 false
+  175 control enabled projector2 false
+  176 set :check_radar*retval false
+  177 jump *label112 always
+  178 label *label111
+  179 label *label112
   180 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   181 set :start_reactor:reactor reactor3
   182 set :start_reactor:reactor_num 3
 
   578 label *label45
   579 return :start_reactor*retaddr
   580 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label79 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label78 always
-    * jump *label80 always
-    * label *label79
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label78 always
-    * label *label80
-    * label *label78
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    48 set :check_radar:unit cyclone1
    49 label *label105
    50 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   51 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    52 jump *label106 equal :check_radar:enemy_found null
    53 control enabled projector1 true
    54 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   55 control config unloader1 @scrap
+   56 control config unloader2 @blast-compound
+   57 control config unloader3 @scrap
+   58 control config unloader4 @blast-compound
+   59 control config unloader5 @scrap
+   60 control config unloader6 @blast-compound
+   61 control config unloader7 @scrap
    62 control enabled reactor1 false
    63 control enabled reactor2 false
    64 control enabled reactor3 false
 
   151 set :check_radar:unit cyclone1
   152 label *label109
   153 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  154 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   155 jump *label110 equal :check_radar:enemy_found null
   156 control enabled projector1 true
   157 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  158 control config unloader1 @scrap
+  159 control config unloader2 @blast-compound
+  160 control config unloader3 @scrap
+  161 control config unloader4 @blast-compound
+  162 control config unloader5 @scrap
+  163 control config unloader6 @blast-compound
+  164 control config unloader7 @scrap
   165 control enabled reactor1 false
   166 control enabled reactor2 false
   167 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    37 set .CONTAINER vault1
    38 set .NODE node1
-    * set :check_radar:unit cyclone1
    39 label *label105
    40 # "Function: def check_radar(in unit)"
    41 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   138 label *label97
   139 control config unloader4 *tmp101
   140 label *label98
-    * set :check_radar:unit cyclone1
   141 label *label109
   142 # "Function: def check_radar(in unit)"
   143 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    82 op or :emerg_shutdown :check_radar*retval *tmp8
    83 set :calc_charge_req:reactor reactor1
    84 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   85 label *label113
+   86 # "Function: def calc_charge_req(in reactor, in time)"
+   87 op sub *tmp102 @tick :calc_charge_req:time
+   88 op idiv :calc_charge_req:secs *tmp102 60
+   89 op greaterThan *tmp104 :calc_charge_req:secs 30
+   90 sensor *tmp105 :calc_charge_req:reactor @enabled
+   91 op equal *tmp106 *tmp105 false
+   92 op or *tmp107 *tmp104 *tmp106
+   93 jump *label114 equal *tmp107 false
+   94 set :calc_charge_req*retval 0
+   95 jump *label116 always
+   96 label *label114
+   97 label *label115
+   98 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   99 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  100 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  101 set :calc_charge_req*retval :calc_charge_req:charge_req
+  102 jump *label116 always
+  103 label *label116
   104 set .START_POWER_REQ :calc_charge_req*retval
   105 set :calc_charge_req:reactor reactor2
   106 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  107 label *label117
+  108 # "Function: def calc_charge_req(in reactor, in time)"
+  109 op sub *tmp102 @tick :calc_charge_req:time
+  110 op idiv :calc_charge_req:secs *tmp102 60
+  111 op greaterThan *tmp104 :calc_charge_req:secs 30
+  112 sensor *tmp105 :calc_charge_req:reactor @enabled
+  113 op equal *tmp106 *tmp105 false
+  114 op or *tmp107 *tmp104 *tmp106
+  115 jump *label118 equal *tmp107 false
+  116 set :calc_charge_req*retval 0
+  117 jump *label120 always
+  118 label *label118
+  119 label *label119
+  120 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  121 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  122 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  123 set :calc_charge_req*retval :calc_charge_req:charge_req
+  124 jump *label120 always
+  125 label *label120
   126 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   127 set :calc_charge_req:reactor reactor3
   128 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  129 label *label121
+  130 # "Function: def calc_charge_req(in reactor, in time)"
+  131 op sub *tmp102 @tick :calc_charge_req:time
+  132 op idiv :calc_charge_req:secs *tmp102 60
+  133 op greaterThan *tmp104 :calc_charge_req:secs 30
+  134 sensor *tmp105 :calc_charge_req:reactor @enabled
+  135 op equal *tmp106 *tmp105 false
+  136 op or *tmp107 *tmp104 *tmp106
+  137 jump *label122 equal *tmp107 false
+  138 set :calc_charge_req*retval 0
+  139 jump *label124 always
+  140 label *label122
+  141 label *label123
+  142 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  143 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  144 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  145 set :calc_charge_req*retval :calc_charge_req:charge_req
+  146 jump *label124 always
+  147 label *label124
   148 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   149 set :calc_charge_req:reactor reactor4
   150 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  151 label *label125
+  152 # "Function: def calc_charge_req(in reactor, in time)"
+  153 op sub *tmp102 @tick :calc_charge_req:time
+  154 op idiv :calc_charge_req:secs *tmp102 60
+  155 op greaterThan *tmp104 :calc_charge_req:secs 30
+  156 sensor *tmp105 :calc_charge_req:reactor @enabled
+  157 op equal *tmp106 *tmp105 false
+  158 op or *tmp107 *tmp104 *tmp106
+  159 jump *label126 equal *tmp107 false
+  160 set :calc_charge_req*retval 0
+  161 jump *label128 always
+  162 label *label126
+  163 label *label127
+  164 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  165 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  166 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  167 set :calc_charge_req*retval :calc_charge_req:charge_req
+  168 jump *label128 always
+  169 label *label128
   170 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   171 set :calc_charge_req:reactor reactor5
   172 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  173 label *label129
+  174 # "Function: def calc_charge_req(in reactor, in time)"
+  175 op sub *tmp102 @tick :calc_charge_req:time
+  176 op idiv :calc_charge_req:secs *tmp102 60
+  177 op greaterThan *tmp104 :calc_charge_req:secs 30
+  178 sensor *tmp105 :calc_charge_req:reactor @enabled
+  179 op equal *tmp106 *tmp105 false
+  180 op or *tmp107 *tmp104 *tmp106
+  181 jump *label130 equal *tmp107 false
+  182 set :calc_charge_req*retval 0
+  183 jump *label132 always
+  184 label *label130
+  185 label *label131
+  186 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  187 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  188 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  189 set :calc_charge_req*retval :calc_charge_req:charge_req
+  190 jump *label132 always
+  191 label *label132
   192 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   193 set :start_reactor:reactor reactor1
   194 set :start_reactor:reactor_num 1
 
   452 jump *label7 always
   453 label *label9
   454 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label43 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label42 always
-    * label *label43
-    * label *label44
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label42 always
-    * label *label42
-    * return :calc_charge_req*retaddr
-    * end
   455 label *label3
   456 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   457 set .RET_T_STARTUP :start_reactor:t_startup
 
   514 jump *label58 greaterThanEq :start_reactor:secs 30
   515 set :calc_charge_req:reactor :start_reactor:reactor
   516 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  517 label *label133
+  518 # "Function: def calc_charge_req(in reactor, in time)"
+  519 op sub *tmp102 @tick :calc_charge_req:time
+  520 op idiv :calc_charge_req:secs *tmp102 60
+  521 op greaterThan *tmp104 :calc_charge_req:secs 30
+  522 sensor *tmp105 :calc_charge_req:reactor @enabled
+  523 op equal *tmp106 *tmp105 false
+  524 op or *tmp107 *tmp104 *tmp106
+  525 jump *label134 equal *tmp107 false
+  526 set :calc_charge_req*retval 0
+  527 jump *label136 always
+  528 label *label134
+  529 label *label135
+  530 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  531 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  532 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  533 set :calc_charge_req*retval :calc_charge_req:charge_req
+  534 jump *label136 always
+  535 label *label136
   536 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   537 op lessThan *tmp154 *tmp153 .PWR_ABORT
   538 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    84 set :calc_charge_req:time :t_startup1
    85 label *label113
    86 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+   87 op sub *tmp102 @tick :t_startup1
    88 op idiv :calc_charge_req:secs *tmp102 60
    89 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+   90 sensor *tmp105 reactor1 @enabled
    91 op equal *tmp106 *tmp105 false
    92 op or *tmp107 *tmp104 *tmp106
    93 jump *label114 equal *tmp107 false
 
   106 set :calc_charge_req:time :t_startup2
   107 label *label117
   108 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  109 op sub *tmp102 @tick :t_startup2
   110 op idiv :calc_charge_req:secs *tmp102 60
   111 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  112 sensor *tmp105 reactor2 @enabled
   113 op equal *tmp106 *tmp105 false
   114 op or *tmp107 *tmp104 *tmp106
   115 jump *label118 equal *tmp107 false
 
   128 set :calc_charge_req:time :t_startup3
   129 label *label121
   130 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  131 op sub *tmp102 @tick :t_startup3
   132 op idiv :calc_charge_req:secs *tmp102 60
   133 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  134 sensor *tmp105 reactor3 @enabled
   135 op equal *tmp106 *tmp105 false
   136 op or *tmp107 *tmp104 *tmp106
   137 jump *label122 equal *tmp107 false
 
   150 set :calc_charge_req:time :t_startup4
   151 label *label125
   152 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  153 op sub *tmp102 @tick :t_startup4
   154 op idiv :calc_charge_req:secs *tmp102 60
   155 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  156 sensor *tmp105 reactor4 @enabled
   157 op equal *tmp106 *tmp105 false
   158 op or *tmp107 *tmp104 *tmp106
   159 jump *label126 equal *tmp107 false
 
   172 set :calc_charge_req:time :t_startup5
   173 label *label129
   174 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  175 op sub *tmp102 @tick :t_startup5
   176 op idiv :calc_charge_req:secs *tmp102 60
   177 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  178 sensor *tmp105 reactor5 @enabled
   179 op equal *tmp106 *tmp105 false
   180 op or *tmp107 *tmp104 *tmp106
   181 jump *label130 equal *tmp107 false
 
   516 set :calc_charge_req:time :start_reactor:t_startup
   517 label *label133
   518 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req:time
+  519 op sub *tmp102 @tick :start_reactor:t_startup
   520 op idiv :calc_charge_req:secs *tmp102 60
   521 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  522 sensor *tmp105 :start_reactor:reactor @enabled
   523 op equal *tmp106 *tmp105 false
   524 op or *tmp107 *tmp104 *tmp106
   525 jump *label134 equal *tmp107 false
 
   646 label *label49
   647 label *label47
   648 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  649 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   650 label *label76
   651 label *label77
   652 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    80 jump *label10 always
    81 label *label10
    82 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    83 label *label113
    84 # "Function: def calc_charge_req(in reactor, in time)"
    85 op sub *tmp102 @tick :t_startup1
 
   100 jump *label116 always
   101 label *label116
   102 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
   103 label *label117
   104 # "Function: def calc_charge_req(in reactor, in time)"
   105 op sub *tmp102 @tick :t_startup2
 
   120 jump *label120 always
   121 label *label120
   122 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   123 label *label121
   124 # "Function: def calc_charge_req(in reactor, in time)"
   125 op sub *tmp102 @tick :t_startup3
 
   140 jump *label124 always
   141 label *label124
   142 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   143 label *label125
   144 # "Function: def calc_charge_req(in reactor, in time)"
   145 op sub *tmp102 @tick :t_startup4
 
   160 jump *label128 always
   161 label *label128
   162 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   163 label *label129
   164 # "Function: def calc_charge_req(in reactor, in time)"
   165 op sub *tmp102 @tick :t_startup5
 
   444 end
   445 label *label3
   446 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
   447 op sub *tmp113 @tick :start_reactor:t_startup
   448 op idiv :start_reactor:secs *tmp113 60
   449 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   501 jump *label57 always
   502 label *label56
   503 jump *label58 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   504 label *label133
   505 # "Function: def calc_charge_req(in reactor, in time)"
   506 op sub *tmp102 @tick :start_reactor:t_startup

Modifications by Inline function call at line 80:14 (+155 instructions):
 
   185 set :start_reactor:emerg_shutdown :emerg_shutdown
   186 set :start_reactor:fuel_on :fuel_1
   187 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  188 label *label137
+  189 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  190 op sub *tmp113 @tick :start_reactor:t_startup
+  191 op idiv :start_reactor:secs *tmp113 60
+  192 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  193 set :start_reactor:supply_fuel true
+  194 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  195 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  196 sensor *tmp118 .NODE @powerNetStored
+  197 op floor :start_reactor:charge *tmp118
+  198 sensor *tmp120 .NODE @powerNetIn
+  199 sensor *tmp121 .NODE @powerNetOut
+  200 op sub *tmp122 *tmp120 *tmp121
+  201 op floor :start_reactor:surplus *tmp122
+  202 op mul *tmp124 .AVG_SURPLUS 0.8
+  203 op mul *tmp125 :start_reactor:surplus 0.2
+  204 op add .AVG_SURPLUS *tmp124 *tmp125
+  205 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  206 print "#"
+  207 print :start_reactor:reactor_num
+  208 print " "
+  209 print "- "
+  210 jump *label138 equal :start_reactor:emerg_shutdown false
+  211 control enabled :start_reactor:reactor false
+  212 print "emergency mode"
+  213 print "\n"
+  214 set :start_reactor:supply_fuel false
+  215 jump *label171 always
+  216 label *label138
+  217 jump *label157 equal :start_reactor:enabled false
+  218 jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  219 control enabled :start_reactor:reactor false
+  220 print "STOP unwanted"
+  221 print "\n"
+  222 jump *label156 always
+  223 label *label139
+  224 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  225 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  226 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  227 op land *tmp139 *tmp136 *tmp138
+  228 jump *label140 equal *tmp139 false
+  229 control enabled :start_reactor:reactor false
+  230 print "STOP system fuel low"
+  231 print "\n"
+  232 jump *label155 always
+  233 label *label140
+  234 jump *label141 greaterThan :start_reactor:fuel 1
+  235 control enabled :start_reactor:reactor false
+  236 print "STOP fuel low"
+  237 print "\n"
+  238 jump *label154 always
+  239 label *label141
+  240 jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
+  241 control enabled :start_reactor:reactor false
+  242 print "STOP out of cryo"
+  243 print "\n"
+  244 jump *label153 always
+  245 label *label142
+  246 jump *label149 greaterThanEq :start_reactor:secs 30
+  247 label *label143
+  248 # "Function: def calc_charge_req(in reactor, in time)"
+  249 op sub *tmp102 @tick :start_reactor:t_startup
+  250 op idiv :calc_charge_req:secs *tmp102 60
+  251 op greaterThan *tmp104 :calc_charge_req:secs 30
+  252 sensor *tmp105 :start_reactor:reactor @enabled
+  253 op equal *tmp106 *tmp105 false
+  254 op or *tmp107 *tmp104 *tmp106
+  255 jump *label144 equal *tmp107 false
+  256 set :calc_charge_req*retval 0
+  257 jump *label146 always
+  258 label *label144
+  259 label *label145
+  260 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  261 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  262 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  263 set :calc_charge_req*retval :calc_charge_req:charge_req
+  264 jump *label146 always
+  265 label *label146
+  266 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  267 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  268 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  269 op land *tmp156 *tmp154 *tmp155
+  270 jump *label147 equal *tmp156 false
+  271 control enabled :start_reactor:reactor false
+  272 print "START FAIL battery"
+  273 print "\n"
+  274 set :start_reactor:supply_fuel false
+  275 jump *label148 always
+  276 label *label147
+  277 op sub :start_reactor:time_left 30 :start_reactor:secs
+  278 print "Starting "
+  279 print :start_reactor:time_left
+  280 print " "
+  281 print "secs, req "
+  282 print :calc_charge_req*retval
+  283 print "J"
+  284 print "\n"
+  285 label *label148
+  286 jump *label152 always
+  287 label *label149
+  288 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  289 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  290 op land *tmp163 *tmp161 *tmp162
+  291 jump *label150 equal *tmp163 false
+  292 control enabled :start_reactor:reactor false
+  293 print "ABANDON - battery crit"
+  294 print "\n"
+  295 set :start_reactor:supply_fuel false
+  296 jump *label151 always
+  297 label *label150
+  298 op idiv :start_reactor:mins :start_reactor:secs 6
+  299 op div :start_reactor:mins :start_reactor:mins 10
+  300 print "RUN "
+  301 print :start_reactor:mins
+  302 print " "
+  303 print "mins"
+  304 print "\n"
+  305 label *label151
+  306 label *label152
+  307 label *label153
+  308 label *label154
+  309 label *label155
+  310 label *label156
+  311 jump *label170 always
+  312 label *label157
+  313 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  314 op sub *tmp170 *tmp169 .PWR_ABORT
+  315 op div *tmp171 *tmp170 .PWR_REQ
+  316 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  317 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  318 op max :start_reactor:flow_units -0.1 *tmp173
+  319 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  320 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  321 jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  322 print "IDLE"
+  323 print "\n"
+  324 set :start_reactor:supply_fuel false
+  325 jump *label169 always
+  326 label *label158
+  327 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  328 jump *label159 greaterThanEq *tmp179 1
+  329 op idiv *tmp183 :start_reactor:flow_units 0.001
+  330 op div :start_reactor:flow *tmp183 10
+  331 op idiv *tmp186 :start_reactor:charge_units 0.001
+  332 op div :start_reactor:charge *tmp186 10
+  333 print "WAIT power. (%"
+  334 print :start_reactor:charge
+  335 print "J + %"
+  336 print :start_reactor:flow
+  337 print "W)"
+  338 print "\n"
+  339 set :start_reactor:supply_fuel false
+  340 jump *label168 always
+  341 label *label159
+  342 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  343 op land *tmp189 :start_reactor:fuel_on *tmp188
+  344 jump *label162 equal *tmp189 false
+  345 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  346 jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  347 print "WAIT fuel"
+  348 print "\n"
+  349 jump *label161 always
+  350 label *label160
+  351 print "WAIT system fuel"
+  352 print "\n"
+  353 label *label161
+  354 jump *label167 always
+  355 label *label162
+  356 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  357 jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  358 print "WAIT buffer fuel"
+  359 print "\n"
+  360 jump *label166 always
+  361 label *label163
+  362 jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  363 print "WAIT cryo"
+  364 print "\n"
+  365 jump *label165 always
+  366 label *label164
+  367 print "STARTUP"
+  368 print "\n"
+  369 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  370 control enabled :start_reactor:reactor true
+  371 label *label165
+  372 label *label166
+  373 label *label167
+  374 label *label168
+  375 label *label169
+  376 label *label170
+  377 label *label171
+  378 sensor *tmp201 :start_reactor:reactor @enabled
+  379 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  380 label *label172
+  381 label *label173
+  382 set :start_reactor*retval :start_reactor:supply_fuel
+  383 jump *label174 always
+  384 label *label174
   385 set :fuel_1 :start_reactor*retval
   386 set :t_startup1 .RET_T_STARTUP
   387 label *label87

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    30 set :t_startup3 *tmp5
    31 set :t_startup4 *tmp5
    32 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    33 set .REACTORS_DESIRED 5
    34 set .AVG_SURPLUS 500
    35 label *label7
 
   186 set :start_reactor:t_startup :t_startup1
   187 label *label137
   188 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  189 op sub *tmp113 @tick :t_startup1
   190 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  191 sensor :start_reactor:fuel reactor1 @blast-compound
   192 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  193 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  194 sensor :start_reactor:cryo reactor1 @cryofluid
+  195 sensor *tmp118 node1 @powerNetStored
   196 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  197 sensor *tmp120 node1 @powerNetIn
+  198 sensor *tmp121 node1 @powerNetOut
   199 op sub *tmp122 *tmp120 *tmp121
   200 op floor :start_reactor:surplus *tmp122
   201 op mul *tmp124 .AVG_SURPLUS 0.8
   202 op mul *tmp125 :start_reactor:surplus 0.2
   203 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  204 sensor :start_reactor:enabled reactor1 @enabled
   205 print "#"
-    * print :start_reactor:reactor_num
+  206 print 1
   207 print " "
   208 print "- "
-    * jump *label138 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  209 jump *label138 equal :emerg_shutdown false
+  210 control enabled reactor1 false
   211 print "emergency mode"
   212 print "\n"
   213 set :start_reactor:supply_fuel false
   214 jump *label171 always
   215 label *label138
   216 jump *label157 equal :start_reactor:enabled false
-    * jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  217 jump *label139 greaterThanEq .REACTORS_DESIRED 1
+  218 control enabled reactor1 false
   219 print "STOP unwanted"
   220 print "\n"
   221 jump *label156 always
   222 label *label139
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  223 op greaterThan *tmp136 1 1
+  224 op mul *tmp137 15 1
+  225 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  226 op land *tmp139 false *tmp138
   227 jump *label140 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  228 control enabled reactor1 false
   229 print "STOP system fuel low"
   230 print "\n"
   231 jump *label155 always
   232 label *label140
   233 jump *label141 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  234 control enabled reactor1 false
   235 print "STOP fuel low"
   236 print "\n"
   237 jump *label154 always
   238 label *label141
-    * jump *label142 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  239 jump *label142 greaterThan :start_reactor:cryo 1
+  240 control enabled reactor1 false
   241 print "STOP out of cryo"
   242 print "\n"
   243 jump *label153 always
 
   245 jump *label149 greaterThanEq :start_reactor:secs 30
   246 label *label143
   247 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  248 op sub *tmp102 @tick :t_startup1
   249 op idiv :calc_charge_req:secs *tmp102 60
   250 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  251 sensor *tmp105 reactor1 @enabled
   252 op equal *tmp106 *tmp105 false
   253 op or *tmp107 *tmp104 *tmp106
   254 jump *label144 equal *tmp107 false
 
   263 jump *label146 always
   264 label *label146
   265 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  266 op lessThan *tmp154 *tmp153 5000
+  267 op lessThan *tmp155 :start_reactor:surplus -500
   268 op land *tmp156 *tmp154 *tmp155
   269 jump *label147 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  270 control enabled reactor1 false
   271 print "START FAIL battery"
   272 print "\n"
   273 set :start_reactor:supply_fuel false
 
   284 label *label148
   285 jump *label152 always
   286 label *label149
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  287 op lessThan *tmp161 :start_reactor:charge 2000
+  288 op lessThan *tmp162 :start_reactor:surplus -500
   289 op land *tmp163 *tmp161 *tmp162
   290 jump *label150 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  291 control enabled reactor1 false
   292 print "ABANDON - battery crit"
   293 print "\n"
   294 set :start_reactor:supply_fuel false
 
   310 jump *label170 always
   311 label *label157
   312 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  313 op sub *tmp170 *tmp169 5000
+  314 op div *tmp171 *tmp170 23000
+  315 op mul :start_reactor:charge_units *tmp171 0.6
+  316 op div *tmp173 :start_reactor:surplus 2000
   317 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  318 op mul *tmp175 2 1
+  319 op add :start_reactor:cryo_req 3 2
+  320 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   321 print "IDLE"
   322 print "\n"
   323 set :start_reactor:supply_fuel false
 
   338 set :start_reactor:supply_fuel false
   339 jump *label168 always
   340 label *label159
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  341 op lessThan *tmp188 :start_reactor:fuel 10
+  342 op land *tmp189 :fuel_1 *tmp188
   343 jump *label162 equal *tmp189 false
   344 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  345 jump *label160 lessThanEq *tmp191 10
   346 print "WAIT fuel"
   347 print "\n"
   348 jump *label161 always
 
   352 label *label161
   353 jump *label167 always
   354 label *label162
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label163 greaterThanEq :start_reactor:fuel_stored *tmp194
+  355 op mul *tmp194 45 1
+  356 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
   357 print "WAIT buffer fuel"
   358 print "\n"
   359 jump *label166 always
   360 label *label163
-    * jump *label164 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  361 jump *label164 greaterThanEq :start_reactor:cryo 5
   362 print "WAIT cryo"
   363 print "\n"
   364 jump *label165 always
   365 label *label164
   366 print "STARTUP"
   367 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  368 op add .START_POWER_REQ .START_POWER_REQ 23000
+  369 control enabled reactor1 true
   370 label *label165
   371 label *label166
   372 label *label167
 
   374 label *label169
   375 label *label170
   376 label *label171
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  377 sensor *tmp201 reactor1 @enabled
+  378 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   379 label *label172
   380 label *label173
   381 set :start_reactor*retval :start_reactor:supply_fuel
   382 jump *label174 always
   383 label *label174
-    * set :fuel_1 :start_reactor*retval
+  384 set :fuel_1 :start_reactor:supply_fuel
   385 set :t_startup1 .RET_T_STARTUP
   386 label *label87
   387 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  388 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   389 label *label88
   390 label *label89
   391 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  392 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   393 label *label90
   394 label *label91
   395 control config unloader2 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   179 jump *label132 always
   180 label *label132
   181 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   182 label *label137
   183 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   184 op sub *tmp113 @tick :t_startup1
 
   307 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   308 op sub *tmp170 *tmp169 5000
   309 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  310 op div :start_reactor:charge_units *tmp170 38333.333333333336
   311 op div *tmp173 :start_reactor:surplus 2000
   312 op max :start_reactor:flow_units -0.1 *tmp173
   313 op mul *tmp175 2 1
 
   373 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   374 label *label172
   375 label *label173
-    * set :start_reactor*retval :start_reactor:supply_fuel
   376 jump *label174 always
   377 label *label174
   378 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+155 instructions):
 
   393 set :start_reactor:emerg_shutdown :emerg_shutdown
   394 set :start_reactor:fuel_on :fuel_2
   395 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  396 label *label175
+  397 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  398 op sub *tmp113 @tick :start_reactor:t_startup
+  399 op idiv :start_reactor:secs *tmp113 60
+  400 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  401 set :start_reactor:supply_fuel true
+  402 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  403 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  404 sensor *tmp118 .NODE @powerNetStored
+  405 op floor :start_reactor:charge *tmp118
+  406 sensor *tmp120 .NODE @powerNetIn
+  407 sensor *tmp121 .NODE @powerNetOut
+  408 op sub *tmp122 *tmp120 *tmp121
+  409 op floor :start_reactor:surplus *tmp122
+  410 op mul *tmp124 .AVG_SURPLUS 0.8
+  411 op mul *tmp125 :start_reactor:surplus 0.2
+  412 op add .AVG_SURPLUS *tmp124 *tmp125
+  413 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  414 print "#"
+  415 print :start_reactor:reactor_num
+  416 print " "
+  417 print "- "
+  418 jump *label176 equal :start_reactor:emerg_shutdown false
+  419 control enabled :start_reactor:reactor false
+  420 print "emergency mode"
+  421 print "\n"
+  422 set :start_reactor:supply_fuel false
+  423 jump *label209 always
+  424 label *label176
+  425 jump *label195 equal :start_reactor:enabled false
+  426 jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  427 control enabled :start_reactor:reactor false
+  428 print "STOP unwanted"
+  429 print "\n"
+  430 jump *label194 always
+  431 label *label177
+  432 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  433 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  434 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  435 op land *tmp139 *tmp136 *tmp138
+  436 jump *label178 equal *tmp139 false
+  437 control enabled :start_reactor:reactor false
+  438 print "STOP system fuel low"
+  439 print "\n"
+  440 jump *label193 always
+  441 label *label178
+  442 jump *label179 greaterThan :start_reactor:fuel 1
+  443 control enabled :start_reactor:reactor false
+  444 print "STOP fuel low"
+  445 print "\n"
+  446 jump *label192 always
+  447 label *label179
+  448 jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
+  449 control enabled :start_reactor:reactor false
+  450 print "STOP out of cryo"
+  451 print "\n"
+  452 jump *label191 always
+  453 label *label180
+  454 jump *label187 greaterThanEq :start_reactor:secs 30
+  455 label *label181
+  456 # "Function: def calc_charge_req(in reactor, in time)"
+  457 op sub *tmp102 @tick :start_reactor:t_startup
+  458 op idiv :calc_charge_req:secs *tmp102 60
+  459 op greaterThan *tmp104 :calc_charge_req:secs 30
+  460 sensor *tmp105 :start_reactor:reactor @enabled
+  461 op equal *tmp106 *tmp105 false
+  462 op or *tmp107 *tmp104 *tmp106
+  463 jump *label182 equal *tmp107 false
+  464 set :calc_charge_req*retval 0
+  465 jump *label184 always
+  466 label *label182
+  467 label *label183
+  468 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  469 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  470 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  471 set :calc_charge_req*retval :calc_charge_req:charge_req
+  472 jump *label184 always
+  473 label *label184
+  474 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  475 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  476 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  477 op land *tmp156 *tmp154 *tmp155
+  478 jump *label185 equal *tmp156 false
+  479 control enabled :start_reactor:reactor false
+  480 print "START FAIL battery"
+  481 print "\n"
+  482 set :start_reactor:supply_fuel false
+  483 jump *label186 always
+  484 label *label185
+  485 op sub :start_reactor:time_left 30 :start_reactor:secs
+  486 print "Starting "
+  487 print :start_reactor:time_left
+  488 print " "
+  489 print "secs, req "
+  490 print :calc_charge_req*retval
+  491 print "J"
+  492 print "\n"
+  493 label *label186
+  494 jump *label190 always
+  495 label *label187
+  496 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  497 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  498 op land *tmp163 *tmp161 *tmp162
+  499 jump *label188 equal *tmp163 false
+  500 control enabled :start_reactor:reactor false
+  501 print "ABANDON - battery crit"
+  502 print "\n"
+  503 set :start_reactor:supply_fuel false
+  504 jump *label189 always
+  505 label *label188
+  506 op idiv :start_reactor:mins :start_reactor:secs 6
+  507 op div :start_reactor:mins :start_reactor:mins 10
+  508 print "RUN "
+  509 print :start_reactor:mins
+  510 print " "
+  511 print "mins"
+  512 print "\n"
+  513 label *label189
+  514 label *label190
+  515 label *label191
+  516 label *label192
+  517 label *label193
+  518 label *label194
+  519 jump *label208 always
+  520 label *label195
+  521 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  522 op sub *tmp170 *tmp169 .PWR_ABORT
+  523 op div *tmp171 *tmp170 .PWR_REQ
+  524 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  525 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  526 op max :start_reactor:flow_units -0.1 *tmp173
+  527 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  528 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  529 jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  530 print "IDLE"
+  531 print "\n"
+  532 set :start_reactor:supply_fuel false
+  533 jump *label207 always
+  534 label *label196
+  535 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  536 jump *label197 greaterThanEq *tmp179 1
+  537 op idiv *tmp183 :start_reactor:flow_units 0.001
+  538 op div :start_reactor:flow *tmp183 10
+  539 op idiv *tmp186 :start_reactor:charge_units 0.001
+  540 op div :start_reactor:charge *tmp186 10
+  541 print "WAIT power. (%"
+  542 print :start_reactor:charge
+  543 print "J + %"
+  544 print :start_reactor:flow
+  545 print "W)"
+  546 print "\n"
+  547 set :start_reactor:supply_fuel false
+  548 jump *label206 always
+  549 label *label197
+  550 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  551 op land *tmp189 :start_reactor:fuel_on *tmp188
+  552 jump *label200 equal *tmp189 false
+  553 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  554 jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  555 print "WAIT fuel"
+  556 print "\n"
+  557 jump *label199 always
+  558 label *label198
+  559 print "WAIT system fuel"
+  560 print "\n"
+  561 label *label199
+  562 jump *label205 always
+  563 label *label200
+  564 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  565 jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  566 print "WAIT buffer fuel"
+  567 print "\n"
+  568 jump *label204 always
+  569 label *label201
+  570 jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  571 print "WAIT cryo"
+  572 print "\n"
+  573 jump *label203 always
+  574 label *label202
+  575 print "STARTUP"
+  576 print "\n"
+  577 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  578 control enabled :start_reactor:reactor true
+  579 label *label203
+  580 label *label204
+  581 label *label205
+  582 label *label206
+  583 label *label207
+  584 label *label208
+  585 label *label209
+  586 sensor *tmp201 :start_reactor:reactor @enabled
+  587 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  588 label *label210
+  589 label *label211
+  590 set :start_reactor*retval :start_reactor:supply_fuel
+  591 jump *label212 always
+  592 label *label212
   593 set :fuel_2 :start_reactor*retval
   594 set :t_startup2 .RET_T_STARTUP
   595 label *label93

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   395 set :start_reactor:t_startup :t_startup2
   396 label *label175
   397 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  398 op sub *tmp113 @tick :t_startup2
   399 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  400 sensor :start_reactor:fuel reactor2 @blast-compound
   401 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  402 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  403 sensor :start_reactor:cryo reactor2 @cryofluid
+  404 sensor *tmp118 node1 @powerNetStored
   405 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  406 sensor *tmp120 node1 @powerNetIn
+  407 sensor *tmp121 node1 @powerNetOut
   408 op sub *tmp122 *tmp120 *tmp121
   409 op floor :start_reactor:surplus *tmp122
   410 op mul *tmp124 .AVG_SURPLUS 0.8
   411 op mul *tmp125 :start_reactor:surplus 0.2
   412 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  413 sensor :start_reactor:enabled reactor2 @enabled
   414 print "#"
-    * print :start_reactor:reactor_num
+  415 print 2
   416 print " "
   417 print "- "
-    * jump *label176 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  418 jump *label176 equal :emerg_shutdown false
+  419 control enabled reactor2 false
   420 print "emergency mode"
   421 print "\n"
   422 set :start_reactor:supply_fuel false
   423 jump *label209 always
   424 label *label176
   425 jump *label195 equal :start_reactor:enabled false
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  426 jump *label177 greaterThanEq .REACTORS_DESIRED 2
+  427 control enabled reactor2 false
   428 print "STOP unwanted"
   429 print "\n"
   430 jump *label194 always
   431 label *label177
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  432 op greaterThan *tmp136 2 1
+  433 op mul *tmp137 15 2
+  434 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  435 op land *tmp139 true *tmp138
   436 jump *label178 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  437 control enabled reactor2 false
   438 print "STOP system fuel low"
   439 print "\n"
   440 jump *label193 always
   441 label *label178
   442 jump *label179 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  443 control enabled reactor2 false
   444 print "STOP fuel low"
   445 print "\n"
   446 jump *label192 always
   447 label *label179
-    * jump *label180 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  448 jump *label180 greaterThan :start_reactor:cryo 1
+  449 control enabled reactor2 false
   450 print "STOP out of cryo"
   451 print "\n"
   452 jump *label191 always
 
   454 jump *label187 greaterThanEq :start_reactor:secs 30
   455 label *label181
   456 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  457 op sub *tmp102 @tick :t_startup2
   458 op idiv :calc_charge_req:secs *tmp102 60
   459 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  460 sensor *tmp105 reactor2 @enabled
   461 op equal *tmp106 *tmp105 false
   462 op or *tmp107 *tmp104 *tmp106
   463 jump *label182 equal *tmp107 false
 
   472 jump *label184 always
   473 label *label184
   474 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  475 op lessThan *tmp154 *tmp153 5000
+  476 op lessThan *tmp155 :start_reactor:surplus -500
   477 op land *tmp156 *tmp154 *tmp155
   478 jump *label185 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  479 control enabled reactor2 false
   480 print "START FAIL battery"
   481 print "\n"
   482 set :start_reactor:supply_fuel false
 
   493 label *label186
   494 jump *label190 always
   495 label *label187
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  496 op lessThan *tmp161 :start_reactor:charge 2000
+  497 op lessThan *tmp162 :start_reactor:surplus -500
   498 op land *tmp163 *tmp161 *tmp162
   499 jump *label188 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  500 control enabled reactor2 false
   501 print "ABANDON - battery crit"
   502 print "\n"
   503 set :start_reactor:supply_fuel false
 
   519 jump *label208 always
   520 label *label195
   521 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  522 op sub *tmp170 *tmp169 5000
+  523 op div *tmp171 *tmp170 23000
+  524 op mul :start_reactor:charge_units *tmp171 0.6
+  525 op div *tmp173 :start_reactor:surplus 2000
   526 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  527 op mul *tmp175 2 2
+  528 op add :start_reactor:cryo_req 3 4
+  529 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   530 print "IDLE"
   531 print "\n"
   532 set :start_reactor:supply_fuel false
 
   547 set :start_reactor:supply_fuel false
   548 jump *label206 always
   549 label *label197
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  550 op lessThan *tmp188 :start_reactor:fuel 10
+  551 op land *tmp189 :fuel_2 *tmp188
   552 jump *label200 equal *tmp189 false
   553 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  554 jump *label198 lessThanEq *tmp191 10
   555 print "WAIT fuel"
   556 print "\n"
   557 jump *label199 always
 
   561 label *label199
   562 jump *label205 always
   563 label *label200
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label201 greaterThanEq :start_reactor:fuel_stored *tmp194
+  564 op mul *tmp194 45 2
+  565 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
   566 print "WAIT buffer fuel"
   567 print "\n"
   568 jump *label204 always
   569 label *label201
-    * jump *label202 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  570 jump *label202 greaterThanEq :start_reactor:cryo 7
   571 print "WAIT cryo"
   572 print "\n"
   573 jump *label203 always
   574 label *label202
   575 print "STARTUP"
   576 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  577 op add .START_POWER_REQ .START_POWER_REQ 23000
+  578 control enabled reactor2 true
   579 label *label203
   580 label *label204
   581 label *label205
 
   583 label *label207
   584 label *label208
   585 label *label209
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  586 sensor *tmp201 reactor2 @enabled
+  587 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   588 label *label210
   589 label *label211
   590 set :start_reactor*retval :start_reactor:supply_fuel
   591 jump *label212 always
   592 label *label212
-    * set :fuel_2 :start_reactor*retval
+  593 set :fuel_2 :start_reactor:supply_fuel
   594 set :t_startup2 .RET_T_STARTUP
   595 label *label93
   596 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  597 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   598 label *label94
   599 label *label95
   600 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  601 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   602 label *label96
   603 label *label97
   604 control config unloader4 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   388 label *label91
   389 control config unloader2 *tmp101
   390 label *label92
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   391 label *label175
   392 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   393 op sub *tmp113 @tick :t_startup2
 
   516 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   517 op sub *tmp170 *tmp169 5000
   518 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  519 op div :start_reactor:charge_units *tmp170 38333.333333333336
   520 op div *tmp173 :start_reactor:surplus 2000
   521 op max :start_reactor:flow_units -0.1 *tmp173
   522 op mul *tmp175 2 2
 
   582 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   583 label *label210
   584 label *label211
-    * set :start_reactor*retval :start_reactor:supply_fuel
   585 jump *label212 always
   586 label *label212
   587 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+155 instructions):
 
   631 set :start_reactor:emerg_shutdown :emerg_shutdown
   632 set :start_reactor:fuel_on :fuel_3
   633 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  634 label *label213
+  635 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  636 op sub *tmp113 @tick :start_reactor:t_startup
+  637 op idiv :start_reactor:secs *tmp113 60
+  638 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  639 set :start_reactor:supply_fuel true
+  640 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  641 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  642 sensor *tmp118 .NODE @powerNetStored
+  643 op floor :start_reactor:charge *tmp118
+  644 sensor *tmp120 .NODE @powerNetIn
+  645 sensor *tmp121 .NODE @powerNetOut
+  646 op sub *tmp122 *tmp120 *tmp121
+  647 op floor :start_reactor:surplus *tmp122
+  648 op mul *tmp124 .AVG_SURPLUS 0.8
+  649 op mul *tmp125 :start_reactor:surplus 0.2
+  650 op add .AVG_SURPLUS *tmp124 *tmp125
+  651 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  652 print "#"
+  653 print :start_reactor:reactor_num
+  654 print " "
+  655 print "- "
+  656 jump *label214 equal :start_reactor:emerg_shutdown false
+  657 control enabled :start_reactor:reactor false
+  658 print "emergency mode"
+  659 print "\n"
+  660 set :start_reactor:supply_fuel false
+  661 jump *label247 always
+  662 label *label214
+  663 jump *label233 equal :start_reactor:enabled false
+  664 jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  665 control enabled :start_reactor:reactor false
+  666 print "STOP unwanted"
+  667 print "\n"
+  668 jump *label232 always
+  669 label *label215
+  670 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  671 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  672 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  673 op land *tmp139 *tmp136 *tmp138
+  674 jump *label216 equal *tmp139 false
+  675 control enabled :start_reactor:reactor false
+  676 print "STOP system fuel low"
+  677 print "\n"
+  678 jump *label231 always
+  679 label *label216
+  680 jump *label217 greaterThan :start_reactor:fuel 1
+  681 control enabled :start_reactor:reactor false
+  682 print "STOP fuel low"
+  683 print "\n"
+  684 jump *label230 always
+  685 label *label217
+  686 jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
+  687 control enabled :start_reactor:reactor false
+  688 print "STOP out of cryo"
+  689 print "\n"
+  690 jump *label229 always
+  691 label *label218
+  692 jump *label225 greaterThanEq :start_reactor:secs 30
+  693 label *label219
+  694 # "Function: def calc_charge_req(in reactor, in time)"
+  695 op sub *tmp102 @tick :start_reactor:t_startup
+  696 op idiv :calc_charge_req:secs *tmp102 60
+  697 op greaterThan *tmp104 :calc_charge_req:secs 30
+  698 sensor *tmp105 :start_reactor:reactor @enabled
+  699 op equal *tmp106 *tmp105 false
+  700 op or *tmp107 *tmp104 *tmp106
+  701 jump *label220 equal *tmp107 false
+  702 set :calc_charge_req*retval 0
+  703 jump *label222 always
+  704 label *label220
+  705 label *label221
+  706 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  707 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  708 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  709 set :calc_charge_req*retval :calc_charge_req:charge_req
+  710 jump *label222 always
+  711 label *label222
+  712 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  713 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  714 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  715 op land *tmp156 *tmp154 *tmp155
+  716 jump *label223 equal *tmp156 false
+  717 control enabled :start_reactor:reactor false
+  718 print "START FAIL battery"
+  719 print "\n"
+  720 set :start_reactor:supply_fuel false
+  721 jump *label224 always
+  722 label *label223
+  723 op sub :start_reactor:time_left 30 :start_reactor:secs
+  724 print "Starting "
+  725 print :start_reactor:time_left
+  726 print " "
+  727 print "secs, req "
+  728 print :calc_charge_req*retval
+  729 print "J"
+  730 print "\n"
+  731 label *label224
+  732 jump *label228 always
+  733 label *label225
+  734 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  735 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  736 op land *tmp163 *tmp161 *tmp162
+  737 jump *label226 equal *tmp163 false
+  738 control enabled :start_reactor:reactor false
+  739 print "ABANDON - battery crit"
+  740 print "\n"
+  741 set :start_reactor:supply_fuel false
+  742 jump *label227 always
+  743 label *label226
+  744 op idiv :start_reactor:mins :start_reactor:secs 6
+  745 op div :start_reactor:mins :start_reactor:mins 10
+  746 print "RUN "
+  747 print :start_reactor:mins
+  748 print " "
+  749 print "mins"
+  750 print "\n"
+  751 label *label227
+  752 label *label228
+  753 label *label229
+  754 label *label230
+  755 label *label231
+  756 label *label232
+  757 jump *label246 always
+  758 label *label233
+  759 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  760 op sub *tmp170 *tmp169 .PWR_ABORT
+  761 op div *tmp171 *tmp170 .PWR_REQ
+  762 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  763 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  764 op max :start_reactor:flow_units -0.1 *tmp173
+  765 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  766 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  767 jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  768 print "IDLE"
+  769 print "\n"
+  770 set :start_reactor:supply_fuel false
+  771 jump *label245 always
+  772 label *label234
+  773 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  774 jump *label235 greaterThanEq *tmp179 1
+  775 op idiv *tmp183 :start_reactor:flow_units 0.001
+  776 op div :start_reactor:flow *tmp183 10
+  777 op idiv *tmp186 :start_reactor:charge_units 0.001
+  778 op div :start_reactor:charge *tmp186 10
+  779 print "WAIT power. (%"
+  780 print :start_reactor:charge
+  781 print "J + %"
+  782 print :start_reactor:flow
+  783 print "W)"
+  784 print "\n"
+  785 set :start_reactor:supply_fuel false
+  786 jump *label244 always
+  787 label *label235
+  788 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  789 op land *tmp189 :start_reactor:fuel_on *tmp188
+  790 jump *label238 equal *tmp189 false
+  791 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  792 jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  793 print "WAIT fuel"
+  794 print "\n"
+  795 jump *label237 always
+  796 label *label236
+  797 print "WAIT system fuel"
+  798 print "\n"
+  799 label *label237
+  800 jump *label243 always
+  801 label *label238
+  802 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  803 jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  804 print "WAIT buffer fuel"
+  805 print "\n"
+  806 jump *label242 always
+  807 label *label239
+  808 jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  809 print "WAIT cryo"
+  810 print "\n"
+  811 jump *label241 always
+  812 label *label240
+  813 print "STARTUP"
+  814 print "\n"
+  815 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  816 control enabled :start_reactor:reactor true
+  817 label *label241
+  818 label *label242
+  819 label *label243
+  820 label *label244
+  821 label *label245
+  822 label *label246
+  823 label *label247
+  824 sensor *tmp201 :start_reactor:reactor @enabled
+  825 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  826 label *label248
+  827 label *label249
+  828 set :start_reactor*retval :start_reactor:supply_fuel
+  829 jump *label250 always
+  830 label *label250
   831 set :fuel_3 :start_reactor*retval
   832 set :t_startup3 .RET_T_STARTUP
   833 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   633 set :start_reactor:t_startup :t_startup3
   634 label *label213
   635 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  636 op sub *tmp113 @tick :t_startup3
   637 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  638 sensor :start_reactor:fuel reactor3 @blast-compound
   639 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  640 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  641 sensor :start_reactor:cryo reactor3 @cryofluid
+  642 sensor *tmp118 node1 @powerNetStored
   643 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  644 sensor *tmp120 node1 @powerNetIn
+  645 sensor *tmp121 node1 @powerNetOut
   646 op sub *tmp122 *tmp120 *tmp121
   647 op floor :start_reactor:surplus *tmp122
   648 op mul *tmp124 .AVG_SURPLUS 0.8
   649 op mul *tmp125 :start_reactor:surplus 0.2
   650 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  651 sensor :start_reactor:enabled reactor3 @enabled
   652 print "#"
-    * print :start_reactor:reactor_num
+  653 print 3
   654 print " "
   655 print "- "
-    * jump *label214 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  656 jump *label214 equal :emerg_shutdown false
+  657 control enabled reactor3 false
   658 print "emergency mode"
   659 print "\n"
   660 set :start_reactor:supply_fuel false
   661 jump *label247 always
   662 label *label214
   663 jump *label233 equal :start_reactor:enabled false
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  664 jump *label215 greaterThanEq .REACTORS_DESIRED 3
+  665 control enabled reactor3 false
   666 print "STOP unwanted"
   667 print "\n"
   668 jump *label232 always
   669 label *label215
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  670 op greaterThan *tmp136 3 1
+  671 op mul *tmp137 15 3
+  672 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  673 op land *tmp139 true *tmp138
   674 jump *label216 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  675 control enabled reactor3 false
   676 print "STOP system fuel low"
   677 print "\n"
   678 jump *label231 always
   679 label *label216
   680 jump *label217 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  681 control enabled reactor3 false
   682 print "STOP fuel low"
   683 print "\n"
   684 jump *label230 always
   685 label *label217
-    * jump *label218 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  686 jump *label218 greaterThan :start_reactor:cryo 1
+  687 control enabled reactor3 false
   688 print "STOP out of cryo"
   689 print "\n"
   690 jump *label229 always
 
   692 jump *label225 greaterThanEq :start_reactor:secs 30
   693 label *label219
   694 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  695 op sub *tmp102 @tick :t_startup3
   696 op idiv :calc_charge_req:secs *tmp102 60
   697 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  698 sensor *tmp105 reactor3 @enabled
   699 op equal *tmp106 *tmp105 false
   700 op or *tmp107 *tmp104 *tmp106
   701 jump *label220 equal *tmp107 false
 
   710 jump *label222 always
   711 label *label222
   712 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  713 op lessThan *tmp154 *tmp153 5000
+  714 op lessThan *tmp155 :start_reactor:surplus -500
   715 op land *tmp156 *tmp154 *tmp155
   716 jump *label223 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  717 control enabled reactor3 false
   718 print "START FAIL battery"
   719 print "\n"
   720 set :start_reactor:supply_fuel false
 
   731 label *label224
   732 jump *label228 always
   733 label *label225
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  734 op lessThan *tmp161 :start_reactor:charge 2000
+  735 op lessThan *tmp162 :start_reactor:surplus -500
   736 op land *tmp163 *tmp161 *tmp162
   737 jump *label226 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  738 control enabled reactor3 false
   739 print "ABANDON - battery crit"
   740 print "\n"
   741 set :start_reactor:supply_fuel false
 
   757 jump *label246 always
   758 label *label233
   759 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  760 op sub *tmp170 *tmp169 5000
+  761 op div *tmp171 *tmp170 23000
+  762 op mul :start_reactor:charge_units *tmp171 0.6
+  763 op div *tmp173 :start_reactor:surplus 2000
   764 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  765 op mul *tmp175 2 3
+  766 op add :start_reactor:cryo_req 3 6
+  767 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   768 print "IDLE"
   769 print "\n"
   770 set :start_reactor:supply_fuel false
 
   785 set :start_reactor:supply_fuel false
   786 jump *label244 always
   787 label *label235
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  788 op lessThan *tmp188 :start_reactor:fuel 10
+  789 op land *tmp189 :fuel_3 *tmp188
   790 jump *label238 equal *tmp189 false
   791 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  792 jump *label236 lessThanEq *tmp191 10
   793 print "WAIT fuel"
   794 print "\n"
   795 jump *label237 always
 
   799 label *label237
   800 jump *label243 always
   801 label *label238
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label239 greaterThanEq :start_reactor:fuel_stored *tmp194
+  802 op mul *tmp194 45 3
+  803 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
   804 print "WAIT buffer fuel"
   805 print "\n"
   806 jump *label242 always
   807 label *label239
-    * jump *label240 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  808 jump *label240 greaterThanEq :start_reactor:cryo 9
   809 print "WAIT cryo"
   810 print "\n"
   811 jump *label241 always
   812 label *label240
   813 print "STARTUP"
   814 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  815 op add .START_POWER_REQ .START_POWER_REQ 23000
+  816 control enabled reactor3 true
   817 label *label241
   818 label *label242
   819 label *label243
 
   821 label *label245
   822 label *label246
   823 label *label247
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  824 sensor *tmp201 reactor3 @enabled
+  825 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   826 label *label248
   827 label *label249
   828 set :start_reactor*retval :start_reactor:supply_fuel
   829 jump *label250 always
   830 label *label250
-    * set :fuel_3 :start_reactor*retval
+  831 set :fuel_3 :start_reactor:supply_fuel
   832 set :t_startup3 .RET_T_STARTUP
   833 set :start_reactor:reactor reactor4
   834 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   626 label *label111
   627 label *label112
   628 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   629 label *label213
   630 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   631 op sub *tmp113 @tick :t_startup3
 
   754 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   755 op sub *tmp170 *tmp169 5000
   756 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  757 op div :start_reactor:charge_units *tmp170 38333.333333333336
   758 op div *tmp173 :start_reactor:surplus 2000
   759 op max :start_reactor:flow_units -0.1 *tmp173
   760 op mul *tmp175 2 3
 
   820 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   821 label *label248
   822 label *label249
-    * set :start_reactor*retval :start_reactor:supply_fuel
   823 jump *label250 always
   824 label *label250
   825 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    60 control enabled projector1 false
    61 control enabled projector2 false
    62 set :check_radar*retval false
-    * jump *label108 always
    63 label *label107
    64 label *label108
    65 # "Function: def check_manual_shutdown()"
 
   372 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   373 label *label172
   374 label *label173
-    * jump *label174 always
   375 label *label174
   376 set :fuel_1 :start_reactor:supply_fuel
   377 set :t_startup1 .RET_T_STARTUP
 
   580 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   581 label *label210
   582 label *label211
-    * jump *label212 always
   583 label *label212
   584 set :fuel_2 :start_reactor:supply_fuel
   585 set :t_startup2 .RET_T_STARTUP
 
   619 control enabled projector1 false
   620 control enabled projector2 false
   621 set :check_radar*retval false
-    * jump *label112 always
   622 label *label111
   623 label *label112
   624 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   816 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   817 label *label248
   818 label *label249
-    * jump *label250 always
   819 label *label250
   820 set :fuel_3 :start_reactor:supply_fuel
   821 set :t_startup3 .RET_T_STARTUP
 
   904 label *label19
   905 label *label15
   906 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label13 always
   907 label *label13
   908 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   909 label *label20
 
   931 # "Function: def kilo(in val)"
   932 op idiv *tmp93 .AVG_SURPLUS 100
   933 op div :kilo*retval *tmp93 10
-    * jump *label82 always
   934 label *label82
   935 set :surplus :kilo*retval
   936 sensor :kilo:val node1 @powerNetStored
 
   938 # "Function: def kilo(in val)"
   939 op idiv *tmp93 :kilo:val 100
   940 op div :kilo*retval *tmp93 10
-    * jump *label84 always
   941 label *label84
   942 set :charge :kilo*retval
   943 jump *label25 lessThanEq .START_POWER_REQ 0
 
   945 # "Function: def kilo(in val)"
   946 op idiv *tmp93 .START_POWER_REQ 100
   947 op div :kilo*retval *tmp93 10
-    * jump *label86 always
   948 label *label86
   949 print "Req "
   950 print :kilo*retval
 
  1197 label *label76
  1198 label *label77
  1199 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label45 always
  1200 label *label45
  1201 return :start_reactor*retaddr
  1202 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   217 op greaterThan *tmp136 1 1
   218 op mul *tmp137 15 1
   219 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  220 set *tmp139 false
   221 jump *label140 equal *tmp139 false
   222 control enabled reactor1 false
   223 print "STOP system fuel low"
 
   425 op greaterThan *tmp136 2 1
   426 op mul *tmp137 15 2
   427 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  428 set *tmp139 *tmp138
   429 jump *label178 equal *tmp139 false
   430 control enabled reactor2 false
   431 print "STOP system fuel low"
 
   661 op greaterThan *tmp136 3 1
   662 op mul *tmp137 15 3
   663 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  664 set *tmp139 *tmp138
   665 jump *label216 equal *tmp139 false
   666 control enabled reactor3 false
   667 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
    87 op equal *tmp106 *tmp105 false
    88 op or *tmp107 *tmp104 *tmp106
    89 jump *label114 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+   90 set .START_POWER_REQ 0
    91 jump *label116 always
    92 label *label114
    93 label *label115
    94 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    95 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    96 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+   97 set .START_POWER_REQ :calc_charge_req:charge_req
    98 jump *label116 always
    99 label *label116
-    * set .START_POWER_REQ :calc_charge_req*retval
   100 label *label117
   101 # "Function: def calc_charge_req(in reactor, in time)"
   102 op sub *tmp102 @tick :t_startup2
 
   929 label *label81
   930 # "Function: def kilo(in val)"
   931 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  932 op div :surplus *tmp93 10
   933 label *label82
-    * set :surplus :kilo*retval
   934 sensor :kilo:val node1 @powerNetStored
   935 label *label83
   936 # "Function: def kilo(in val)"
 
  1005 op sub *tmp113 @tick :start_reactor:t_startup
  1006 op idiv :start_reactor:secs *tmp113 60
  1007 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+ 1008 set :start_reactor*retval true
  1009 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
  1010 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
  1011 sensor *tmp118 .NODE @powerNetStored
 
  1026 control enabled :start_reactor:reactor false
  1027 print "emergency mode"
  1028 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1029 set :start_reactor*retval false
  1030 jump *label47 always
  1031 label *label46
  1032 jump *label48 equal :start_reactor:enabled false
 
  1086 control enabled :start_reactor:reactor false
  1087 print "START FAIL battery"
  1088 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1089 set :start_reactor*retval false
  1090 jump *label61 always
  1091 label *label60
  1092 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1107 control enabled :start_reactor:reactor false
  1108 print "ABANDON - battery crit"
  1109 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1110 set :start_reactor*retval false
  1111 jump *label63 always
  1112 label *label62
  1113 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1136 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1137 print "IDLE"
  1138 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1139 set :start_reactor*retval false
  1140 jump *label65 always
  1141 label *label64
  1142 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1151 print :start_reactor:flow
  1152 print "W)"
  1153 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1154 set :start_reactor*retval false
  1155 jump *label67 always
  1156 label *label66
  1157 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1194 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1195 label *label76
  1196 label *label77
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1197 label *label45
  1198 return :start_reactor*retaddr
  1199 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   217 op mul *tmp137 15 1
   218 op lessThan *tmp138 :start_reactor:fuel_stored 15
   219 set *tmp139 false
-    * jump *label140 equal *tmp139 false
+  220 jump *label140 equal false false
   221 control enabled reactor1 false
   222 print "STOP system fuel low"
   223 print "\n"
 
   425 op mul *tmp137 15 2
   426 op lessThan *tmp138 :start_reactor:fuel_stored 30
   427 set *tmp139 *tmp138
-    * jump *label178 equal *tmp139 false
+  428 jump *label178 equal *tmp138 false
   429 control enabled reactor2 false
   430 print "STOP system fuel low"
   431 print "\n"
 
   661 op mul *tmp137 15 3
   662 op lessThan *tmp138 :start_reactor:fuel_stored 45
   663 set *tmp139 *tmp138
-    * jump *label216 equal *tmp139 false
+  664 jump *label216 equal *tmp138 false
   665 control enabled reactor3 false
   666 print "STOP system fuel low"
   667 print "\n"
 
   834 call *label3 :start_reactor*retaddr :start_reactor*retval
   835 set :fuel_5 :start_reactor*retval
   836 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  837 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   838 op or :fuel_many *tmp27 :start_reactor*retval
   839 label *label99
   840 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   217 op mul *tmp137 15 1
   218 op lessThan *tmp138 :start_reactor:fuel_stored 15
   219 set *tmp139 false
-    * jump *label140 equal false false
+  220 jump *label140 always
   221 control enabled reactor1 false
   222 print "STOP system fuel low"
   223 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    35 label *label7
    36 set .CONTAINER vault1
    37 set .NODE node1
-    * label *label105
    38 # "Function: def check_radar(in unit)"
    39 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    40 jump *label106 equal :check_radar:enemy_found null
 
    72 set *tmp8 true
    73 jump *label10 always
    74 label *label11
-    * label *label12
    75 set *tmp8 false
    76 jump *label10 always
    77 label *label10
    78 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label113
    79 # "Function: def calc_charge_req(in reactor, in time)"
    80 op sub *tmp102 @tick :t_startup1
    81 op idiv :calc_charge_req:secs *tmp102 60
 
    87 set .START_POWER_REQ 0
    88 jump *label116 always
    89 label *label114
-    * label *label115
    90 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    91 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    92 op idiv :calc_charge_req:charge_req *tmp110 0.04
    93 set .START_POWER_REQ :calc_charge_req:charge_req
    94 jump *label116 always
    95 label *label116
-    * label *label117
    96 # "Function: def calc_charge_req(in reactor, in time)"
    97 op sub *tmp102 @tick :t_startup2
    98 op idiv :calc_charge_req:secs *tmp102 60
 
   104 set :calc_charge_req*retval 0
   105 jump *label120 always
   106 label *label118
-    * label *label119
   107 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   108 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   109 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   111 jump *label120 always
   112 label *label120
   113 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label121
   114 # "Function: def calc_charge_req(in reactor, in time)"
   115 op sub *tmp102 @tick :t_startup3
   116 op idiv :calc_charge_req:secs *tmp102 60
 
   122 set :calc_charge_req*retval 0
   123 jump *label124 always
   124 label *label122
-    * label *label123
   125 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   126 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   127 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   129 jump *label124 always
   130 label *label124
   131 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label125
   132 # "Function: def calc_charge_req(in reactor, in time)"
   133 op sub *tmp102 @tick :t_startup4
   134 op idiv :calc_charge_req:secs *tmp102 60
 
   140 set :calc_charge_req*retval 0
   141 jump *label128 always
   142 label *label126
-    * label *label127
   143 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   144 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   145 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   147 jump *label128 always
   148 label *label128
   149 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label129
   150 # "Function: def calc_charge_req(in reactor, in time)"
   151 op sub *tmp102 @tick :t_startup5
   152 op idiv :calc_charge_req:secs *tmp102 60
 
   158 set :calc_charge_req*retval 0
   159 jump *label132 always
   160 label *label130
-    * label *label131
   161 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   162 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   163 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   165 jump *label132 always
   166 label *label132
   167 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label137
   168 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   169 op sub *tmp113 @tick :t_startup1
   170 op idiv :start_reactor:secs *tmp113 60
 
   223 jump *label153 always
   224 label *label142
   225 jump *label149 greaterThanEq :start_reactor:secs 30
-    * label *label143
   226 # "Function: def calc_charge_req(in reactor, in time)"
   227 op sub *tmp102 @tick :t_startup1
   228 op idiv :calc_charge_req:secs *tmp102 60
 
   234 set :calc_charge_req*retval 0
   235 jump *label146 always
   236 label *label144
-    * label *label145
   237 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   238 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   239 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   354 label *label171
   355 sensor *tmp201 reactor1 @enabled
   356 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label172
-    * label *label173
-    * label *label174
   357 set :fuel_1 :start_reactor:supply_fuel
   358 set :t_startup1 .RET_T_STARTUP
-    * label *label87
   359 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   360 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label88
-    * label *label89
   361 control config unloader1 *tmp97
   362 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label90
-    * label *label91
   363 control config unloader2 *tmp101
-    * label *label92
-    * label *label175
   364 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   365 op sub *tmp113 @tick :t_startup2
   366 op idiv :start_reactor:secs *tmp113 60
 
   419 jump *label191 always
   420 label *label180
   421 jump *label187 greaterThanEq :start_reactor:secs 30
-    * label *label181
   422 # "Function: def calc_charge_req(in reactor, in time)"
   423 op sub *tmp102 @tick :t_startup2
   424 op idiv :calc_charge_req:secs *tmp102 60
 
   430 set :calc_charge_req*retval 0
   431 jump *label184 always
   432 label *label182
-    * label *label183
   433 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   434 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   435 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   550 label *label209
   551 sensor *tmp201 reactor2 @enabled
   552 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label210
-    * label *label211
-    * label *label212
   553 set :fuel_2 :start_reactor:supply_fuel
   554 set :t_startup2 .RET_T_STARTUP
-    * label *label93
   555 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   556 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label94
-    * label *label95
   557 control config unloader3 *tmp97
   558 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label96
-    * label *label97
   559 control config unloader4 *tmp101
-    * label *label98
-    * label *label109
   560 # "Function: def check_radar(in unit)"
   561 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   562 jump *label110 equal :check_radar:enemy_found null
 
   584 label *label111
   585 label *label112
   586 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label213
   587 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   588 op sub *tmp113 @tick :t_startup3
   589 op idiv :start_reactor:secs *tmp113 60
 
   642 jump *label229 always
   643 label *label218
   644 jump *label225 greaterThanEq :start_reactor:secs 30
-    * label *label219
   645 # "Function: def calc_charge_req(in reactor, in time)"
   646 op sub *tmp102 @tick :t_startup3
   647 op idiv :calc_charge_req:secs *tmp102 60
 
   653 set :calc_charge_req*retval 0
   654 jump *label222 always
   655 label *label220
-    * label *label221
   656 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   657 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   658 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   773 label *label247
   774 sensor *tmp201 reactor3 @enabled
   775 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label248
-    * label *label249
-    * label *label250
   776 set :fuel_3 :start_reactor:supply_fuel
   777 set :t_startup3 .RET_T_STARTUP
   778 set :start_reactor:reactor reactor4
 
   793 set :t_startup5 .RET_T_STARTUP
   794 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   795 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label99
   796 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   797 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
-    * label *label100
-    * label *label101
   798 control config unloader5 *tmp97
   799 select *tmp101 equal :fuel_many false @blast-compound @scrap
-    * label *label102
-    * label *label103
   800 control config unloader6 *tmp101
-    * label *label104
   801 op or *tmp30 :fuel_1 :fuel_2
   802 op or *tmp31 *tmp30 :fuel_many
   803 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   854 label *label19
   855 label *label15
   856 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label13
   857 select *tmp51 notEqual *tmp32 false @pyratite @scrap
-    * label *label20
-    * label *label21
   858 control config unloader7 *tmp51
   859 # "Function: def diff_generators()"
   860 sensor *tmp53 node1 @powerNetStored
 
   873 control enabled generator1 true
   874 control enabled generator2 true
   875 label *label24
-    * label *label22
-    * label *label81
   876 # "Function: def kilo(in val)"
   877 op idiv *tmp93 .AVG_SURPLUS 100
   878 op div :surplus *tmp93 10
-    * label *label82
   879 sensor :kilo:val node1 @powerNetStored
-    * label *label83
   880 # "Function: def kilo(in val)"
   881 op idiv *tmp93 :kilo:val 100
   882 op div :kilo*retval *tmp93 10
-    * label *label84
   883 set :charge :kilo*retval
   884 jump *label25 lessThanEq .START_POWER_REQ 0
-    * label *label85
   885 # "Function: def kilo(in val)"
   886 op idiv *tmp93 .START_POWER_REQ 100
   887 op div :kilo*retval *tmp93 10
-    * label *label86
   888 print "Req "
   889 print :kilo*retval
   890 print "kJ / "
 
   913 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   914 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   915 label *label30
-    * label *label31
   916 label *label28
-    * label *label29
   917 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   918 op lessThan *tmp83 .AVG_SURPLUS 8000
   919 op land *tmp84 *tmp81 *tmp83
 
   924 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   925 op min .REACTORS_DESIRED 5 *tmp89
   926 label *label32
-    * label *label33
-    * label *label27
   927 label *label26
   928 jump *label34 equal .REACTORS_DESIRED 5
   929 print "Require only "
 
   931 print "/5 reactors."
   932 print "\n"
   933 label *label34
-    * label *label35
   934 printflush message1
-    * label *label8
   935 jump *label7 always
-    * label *label9
   936 end
   937 label *label3
   938 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
 
   993 jump *label57 always
   994 label *label56
   995 jump *label58 greaterThanEq :start_reactor:secs 30
-    * label *label133
   996 # "Function: def calc_charge_req(in reactor, in time)"
   997 op sub *tmp102 @tick :start_reactor:t_startup
   998 op idiv :calc_charge_req:secs *tmp102 60
 
  1004 set :calc_charge_req*retval 0
  1005 jump *label136 always
  1006 label *label134
-    * label *label135
  1007 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
  1008 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1009 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1124 label *label47
  1125 sensor *tmp201 :start_reactor:reactor @enabled
  1126 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label76
-    * label *label77
-    * label *label45
  1127 return :start_reactor*retaddr
  1128 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   198 control enabled reactor1 false
   199 print "STOP unwanted"
   200 print "\n"
-    * jump *label156 always
+  201 jump *label170 always
   202 label *label139
   203 op greaterThan *tmp136 1 1
   204 op mul *tmp137 15 1
 
   208 control enabled reactor1 false
   209 print "STOP system fuel low"
   210 print "\n"
-    * jump *label155 always
+  211 jump *label170 always
   212 label *label140
   213 jump *label141 greaterThan :start_reactor:fuel 1
   214 control enabled reactor1 false
   215 print "STOP fuel low"
   216 print "\n"
-    * jump *label154 always
+  217 jump *label170 always
   218 label *label141
   219 jump *label142 greaterThan :start_reactor:cryo 1
   220 control enabled reactor1 false
   221 print "STOP out of cryo"
   222 print "\n"
-    * jump *label153 always
+  223 jump *label170 always
   224 label *label142
   225 jump *label149 greaterThanEq :start_reactor:secs 30
   226 # "Function: def calc_charge_req(in reactor, in time)"
 
   249 print "START FAIL battery"
   250 print "\n"
   251 set :start_reactor:supply_fuel false
-    * jump *label148 always
+  252 jump *label170 always
   253 label *label147
   254 op sub :start_reactor:time_left 30 :start_reactor:secs
   255 print "Starting "
 
   260 print "J"
   261 print "\n"
   262 label *label148
-    * jump *label152 always
+  263 jump *label170 always
   264 label *label149
   265 op lessThan *tmp161 :start_reactor:charge 2000
   266 op lessThan *tmp162 :start_reactor:surplus -500
 
   270 print "ABANDON - battery crit"
   271 print "\n"
   272 set :start_reactor:supply_fuel false
-    * jump *label151 always
+  273 jump *label170 always
   274 label *label150
   275 op idiv :start_reactor:mins :start_reactor:secs 6
   276 op div :start_reactor:mins :start_reactor:mins 10
 
   323 jump *label160 lessThanEq *tmp191 10
   324 print "WAIT fuel"
   325 print "\n"
-    * jump *label161 always
+  326 jump *label167 always
   327 label *label160
   328 print "WAIT system fuel"
   329 print "\n"
 
   394 control enabled reactor2 false
   395 print "STOP unwanted"
   396 print "\n"
-    * jump *label194 always
+  397 jump *label208 always
   398 label *label177
   399 op greaterThan *tmp136 2 1
   400 op mul *tmp137 15 2
 
   404 control enabled reactor2 false
   405 print "STOP system fuel low"
   406 print "\n"
-    * jump *label193 always
+  407 jump *label208 always
   408 label *label178
   409 jump *label179 greaterThan :start_reactor:fuel 1
   410 control enabled reactor2 false
   411 print "STOP fuel low"
   412 print "\n"
-    * jump *label192 always
+  413 jump *label208 always
   414 label *label179
   415 jump *label180 greaterThan :start_reactor:cryo 1
   416 control enabled reactor2 false
   417 print "STOP out of cryo"
   418 print "\n"
-    * jump *label191 always
+  419 jump *label208 always
   420 label *label180
   421 jump *label187 greaterThanEq :start_reactor:secs 30
   422 # "Function: def calc_charge_req(in reactor, in time)"
 
   445 print "START FAIL battery"
   446 print "\n"
   447 set :start_reactor:supply_fuel false
-    * jump *label186 always
+  448 jump *label208 always
   449 label *label185
   450 op sub :start_reactor:time_left 30 :start_reactor:secs
   451 print "Starting "
 
   456 print "J"
   457 print "\n"
   458 label *label186
-    * jump *label190 always
+  459 jump *label208 always
   460 label *label187
   461 op lessThan *tmp161 :start_reactor:charge 2000
   462 op lessThan *tmp162 :start_reactor:surplus -500
 
   466 print "ABANDON - battery crit"
   467 print "\n"
   468 set :start_reactor:supply_fuel false
-    * jump *label189 always
+  469 jump *label208 always
   470 label *label188
   471 op idiv :start_reactor:mins :start_reactor:secs 6
   472 op div :start_reactor:mins :start_reactor:mins 10
 
   519 jump *label198 lessThanEq *tmp191 10
   520 print "WAIT fuel"
   521 print "\n"
-    * jump *label199 always
+  522 jump *label205 always
   523 label *label198
   524 print "WAIT system fuel"
   525 print "\n"
 
   617 control enabled reactor3 false
   618 print "STOP unwanted"
   619 print "\n"
-    * jump *label232 always
+  620 jump *label246 always
   621 label *label215
   622 op greaterThan *tmp136 3 1
   623 op mul *tmp137 15 3
 
   627 control enabled reactor3 false
   628 print "STOP system fuel low"
   629 print "\n"
-    * jump *label231 always
+  630 jump *label246 always
   631 label *label216
   632 jump *label217 greaterThan :start_reactor:fuel 1
   633 control enabled reactor3 false
   634 print "STOP fuel low"
   635 print "\n"
-    * jump *label230 always
+  636 jump *label246 always
   637 label *label217
   638 jump *label218 greaterThan :start_reactor:cryo 1
   639 control enabled reactor3 false
   640 print "STOP out of cryo"
   641 print "\n"
-    * jump *label229 always
+  642 jump *label246 always
   643 label *label218
   644 jump *label225 greaterThanEq :start_reactor:secs 30
   645 # "Function: def calc_charge_req(in reactor, in time)"
 
   668 print "START FAIL battery"
   669 print "\n"
   670 set :start_reactor:supply_fuel false
-    * jump *label224 always
+  671 jump *label246 always
   672 label *label223
   673 op sub :start_reactor:time_left 30 :start_reactor:secs
   674 print "Starting "
 
   679 print "J"
   680 print "\n"
   681 label *label224
-    * jump *label228 always
+  682 jump *label246 always
   683 label *label225
   684 op lessThan *tmp161 :start_reactor:charge 2000
   685 op lessThan *tmp162 :start_reactor:surplus -500
 
   689 print "ABANDON - battery crit"
   690 print "\n"
   691 set :start_reactor:supply_fuel false
-    * jump *label227 always
+  692 jump *label246 always
   693 label *label226
   694 op idiv :start_reactor:mins :start_reactor:secs 6
   695 op div :start_reactor:mins :start_reactor:mins 10
 
   742 jump *label236 lessThanEq *tmp191 10
   743 print "WAIT fuel"
   744 print "\n"
-    * jump *label237 always
+  745 jump *label243 always
   746 label *label236
   747 print "WAIT system fuel"
   748 print "\n"
 
   824 jump *label16 equal :emerg_shutdown false
   825 print " Enemies detected."
   826 print "\n"
-    * jump *label17 always
+  827 jump *label15 always
   828 label *label16
   829 print " Critical power."
   830 print "\n"
 
   968 control enabled :start_reactor:reactor false
   969 print "STOP unwanted"
   970 print "\n"
-    * jump *label51 always
+  971 jump *label49 always
   972 label *label50
   973 op greaterThan *tmp136 :start_reactor:reactor_num 1
   974 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   978 control enabled :start_reactor:reactor false
   979 print "STOP system fuel low"
   980 print "\n"
-    * jump *label53 always
+  981 jump *label49 always
   982 label *label52
   983 jump *label54 greaterThan :start_reactor:fuel 1
   984 control enabled :start_reactor:reactor false
   985 print "STOP fuel low"
   986 print "\n"
-    * jump *label55 always
+  987 jump *label49 always
   988 label *label54
   989 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   990 control enabled :start_reactor:reactor false
   991 print "STOP out of cryo"
   992 print "\n"
-    * jump *label57 always
+  993 jump *label49 always
   994 label *label56
   995 jump *label58 greaterThanEq :start_reactor:secs 30
   996 # "Function: def calc_charge_req(in reactor, in time)"
 
  1019 print "START FAIL battery"
  1020 print "\n"
  1021 set :start_reactor*retval false
-    * jump *label61 always
+ 1022 jump *label49 always
  1023 label *label60
  1024 op sub :start_reactor:time_left 30 :start_reactor:secs
  1025 print "Starting "
 
  1030 print "J"
  1031 print "\n"
  1032 label *label61
-    * jump *label59 always
+ 1033 jump *label49 always
  1034 label *label58
  1035 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1036 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1040 print "ABANDON - battery crit"
  1041 print "\n"
  1042 set :start_reactor*retval false
-    * jump *label63 always
+ 1043 jump *label49 always
  1044 label *label62
  1045 op idiv :start_reactor:mins :start_reactor:secs 6
  1046 op div :start_reactor:mins :start_reactor:mins 10
 
  1093 jump *label70 lessThanEq *tmp191 .FUEL_REQ
  1094 print "WAIT fuel"
  1095 print "\n"
-    * jump *label71 always
+ 1096 jump *label69 always
  1097 label *label70
  1098 print "WAIT system fuel"
  1099 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    54 control enabled reactor5 false
    55 set :check_radar*retval true
    56 jump *label108 always
-    * jump *label107 always
    57 label *label106
    58 control enabled projector1 false
    59 control enabled projector2 false
 
   204 op lessThan *tmp138 :start_reactor:fuel_stored 15
   205 set *tmp139 false
   206 jump *label140 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label170 always
   207 label *label140
   208 jump *label141 greaterThan :start_reactor:fuel 1
   209 control enabled reactor1 false
 
   254 print :calc_charge_req*retval
   255 print "J"
   256 print "\n"
-    * label *label148
   257 jump *label170 always
   258 label *label149
   259 op lessThan *tmp161 :start_reactor:charge 2000
 
   273 print " "
   274 print "mins"
   275 print "\n"
-    * label *label151
-    * label *label152
-    * label *label153
-    * label *label154
-    * label *label155
-    * label *label156
   276 jump *label170 always
   277 label *label157
   278 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   315 label *label160
   316 print "WAIT system fuel"
   317 print "\n"
-    * label *label161
   318 jump *label167 always
   319 label *label162
   320 op mul *tmp194 45 1
 
   442 print :calc_charge_req*retval
   443 print "J"
   444 print "\n"
-    * label *label186
   445 jump *label208 always
   446 label *label187
   447 op lessThan *tmp161 :start_reactor:charge 2000
 
   461 print " "
   462 print "mins"
   463 print "\n"
-    * label *label189
-    * label *label190
-    * label *label191
-    * label *label192
-    * label *label193
-    * label *label194
   464 jump *label208 always
   465 label *label195
   466 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   503 label *label198
   504 print "WAIT system fuel"
   505 print "\n"
-    * label *label199
   506 jump *label205 always
   507 label *label200
   508 op mul *tmp194 45 2
 
   555 control enabled reactor5 false
   556 set :check_radar*retval true
   557 jump *label112 always
-    * jump *label111 always
   558 label *label110
   559 control enabled projector1 false
   560 control enabled projector2 false
 
   656 print :calc_charge_req*retval
   657 print "J"
   658 print "\n"
-    * label *label224
   659 jump *label246 always
   660 label *label225
   661 op lessThan *tmp161 :start_reactor:charge 2000
 
   675 print " "
   676 print "mins"
   677 print "\n"
-    * label *label227
-    * label *label228
-    * label *label229
-    * label *label230
-    * label *label231
-    * label *label232
   678 jump *label246 always
   679 label *label233
   680 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   717 label *label236
   718 print "WAIT system fuel"
   719 print "\n"
-    * label *label237
   720 jump *label243 always
   721 label *label238
   722 op mul *tmp194 45 3
 
   798 label *label16
   799 print " Critical power."
   800 print "\n"
-    * label *label17
   801 jump *label15 always
   802 label *label14
   803 jump *label18 notEqual *tmp31 false
 
   902 label *label34
   903 printflush message1
   904 jump *label7 always
-    * end
   905 label *label3
   906 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   907 op sub *tmp113 @tick :start_reactor:t_startup
 
   997 print :calc_charge_req*retval
   998 print "J"
   999 print "\n"
-    * label *label61
  1000 jump *label49 always
  1001 label *label58
  1002 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
  1016 print " "
  1017 print "mins"
  1018 print "\n"
-    * label *label63
-    * label *label59
-    * label *label57
-    * label *label55
-    * label *label53
-    * label *label51
  1019 jump *label49 always
  1020 label *label48
  1021 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1058 label *label70
  1059 print "WAIT system fuel"
  1060 print "\n"
-    * label *label71
  1061 jump *label69 always
  1062 label *label68
  1063 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1085 sensor *tmp201 :start_reactor:reactor @enabled
  1086 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1087 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1:
 
    58 control enabled projector1 false
    59 control enabled projector2 false
    60 set :check_radar*retval false
-    * label *label107
    61 label *label108
    62 # "Function: def check_manual_shutdown()"
    63 op notEqual *tmp9 switch1 null
 
   558 control enabled projector1 false
   559 control enabled projector2 false
   560 set :check_radar*retval false
-    * label *label111
   561 label *label112
   562 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   563 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   202 op mul *tmp137 15 1
   203 op lessThan *tmp138 :start_reactor:fuel_stored 15
   204 set *tmp139 false
-    * jump *label140 always
   205 label *label140
   206 jump *label141 greaterThan :start_reactor:fuel 1
   207 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   202 op mul *tmp137 15 1
   203 op lessThan *tmp138 :start_reactor:fuel_stored 15
   204 set *tmp139 false
-    * label *label140
   205 jump *label141 greaterThan :start_reactor:fuel 1
   206 control enabled reactor1 false
   207 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    65 op equal *tmp11 *tmp10 false
    66 op land *tmp12 *tmp9 *tmp11
    67 jump *label11 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   68 print "User has disabled emergency switch\n"
    69 set *tmp8 true
    70 jump *label10 always
    71 label *label11
 
   179 op mul *tmp125 :start_reactor:surplus 0.2
   180 op add .AVG_SURPLUS *tmp124 *tmp125
   181 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  182 print "#1 - "
   183 jump *label138 equal :emerg_shutdown false
   184 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  185 print "emergency mode\n"
   186 set :start_reactor:supply_fuel false
   187 jump *label171 always
   188 label *label138
   189 jump *label157 equal :start_reactor:enabled false
   190 jump *label139 greaterThanEq .REACTORS_DESIRED 1
   191 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  192 print "STOP unwanted\n"
   193 jump *label170 always
   194 label *label139
   195 op greaterThan *tmp136 1 1
 
   198 set *tmp139 false
   199 jump *label141 greaterThan :start_reactor:fuel 1
   200 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  201 print "STOP fuel low\n"
   202 jump *label170 always
   203 label *label141
   204 jump *label142 greaterThan :start_reactor:cryo 1
   205 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  206 print "STOP out of cryo\n"
   207 jump *label170 always
   208 label *label142
   209 jump *label149 greaterThanEq :start_reactor:secs 30
 
   230 op land *tmp156 *tmp154 *tmp155
   231 jump *label147 equal *tmp156 false
   232 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  233 print "START FAIL battery\n"
   234 set :start_reactor:supply_fuel false
   235 jump *label170 always
   236 label *label147
   237 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  238 print "Starting {0} secs, req {0}J\n"
+  239 format :start_reactor:time_left
+  240 format :calc_charge_req*retval
   241 jump *label170 always
   242 label *label149
   243 op lessThan *tmp161 :start_reactor:charge 2000
 
   245 op land *tmp163 *tmp161 *tmp162
   246 jump *label150 equal *tmp163 false
   247 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  248 print "ABANDON - battery crit\n"
   249 set :start_reactor:supply_fuel false
   250 jump *label170 always
   251 label *label150
   252 op idiv :start_reactor:mins :start_reactor:secs 6
   253 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  254 print "RUN {0} mins\n"
+  255 format :start_reactor:mins
   256 jump *label170 always
   257 label *label157
   258 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   264 op mul *tmp175 2 1
   265 op add :start_reactor:cryo_req 3 2
   266 jump *label158 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  267 print "IDLE\n"
   268 set :start_reactor:supply_fuel false
   269 jump *label169 always
   270 label *label158
 
   274 op div :start_reactor:flow *tmp183 10
   275 op idiv *tmp186 :start_reactor:charge_units 0.001
   276 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  277 print "WAIT power. (%{0}J + %{0}W)\n"
+  278 format :start_reactor:charge
+  279 format :start_reactor:flow
   280 set :start_reactor:supply_fuel false
   281 jump *label168 always
   282 label *label159
 
   285 jump *label162 equal *tmp189 false
   286 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   287 jump *label160 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  288 print "WAIT fuel\n"
   289 jump *label167 always
   290 label *label160
-    * print "WAIT system fuel"
-    * print "\n"
+  291 print "WAIT system fuel\n"
   292 jump *label167 always
   293 label *label162
   294 op mul *tmp194 45 1
   295 jump *label163 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  296 print "WAIT buffer fuel\n"
   297 jump *label166 always
   298 label *label163
   299 jump *label164 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  300 print "WAIT cryo\n"
   301 jump *label165 always
   302 label *label164
-    * print "STARTUP"
-    * print "\n"
+  303 print "STARTUP\n"
   304 op add .START_POWER_REQ .START_POWER_REQ 23000
   305 control enabled reactor1 true
   306 label *label165
 
   336 op mul *tmp125 :start_reactor:surplus 0.2
   337 op add .AVG_SURPLUS *tmp124 *tmp125
   338 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  339 print "#2 - "
   340 jump *label176 equal :emerg_shutdown false
   341 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  342 print "emergency mode\n"
   343 set :start_reactor:supply_fuel false
   344 jump *label209 always
   345 label *label176
   346 jump *label195 equal :start_reactor:enabled false
   347 jump *label177 greaterThanEq .REACTORS_DESIRED 2
   348 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  349 print "STOP unwanted\n"
   350 jump *label208 always
   351 label *label177
   352 op greaterThan *tmp136 2 1
 
   355 set *tmp139 *tmp138
   356 jump *label178 equal *tmp138 false
   357 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  358 print "STOP system fuel low\n"
   359 jump *label208 always
   360 label *label178
   361 jump *label179 greaterThan :start_reactor:fuel 1
   362 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  363 print "STOP fuel low\n"
   364 jump *label208 always
   365 label *label179
   366 jump *label180 greaterThan :start_reactor:cryo 1
   367 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  368 print "STOP out of cryo\n"
   369 jump *label208 always
   370 label *label180
   371 jump *label187 greaterThanEq :start_reactor:secs 30
 
   392 op land *tmp156 *tmp154 *tmp155
   393 jump *label185 equal *tmp156 false
   394 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  395 print "START FAIL battery\n"
   396 set :start_reactor:supply_fuel false
   397 jump *label208 always
   398 label *label185
   399 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  400 print "Starting {0} secs, req {0}J\n"
+  401 format :start_reactor:time_left
+  402 format :calc_charge_req*retval
   403 jump *label208 always
   404 label *label187
   405 op lessThan *tmp161 :start_reactor:charge 2000
 
   407 op land *tmp163 *tmp161 *tmp162
   408 jump *label188 equal *tmp163 false
   409 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  410 print "ABANDON - battery crit\n"
   411 set :start_reactor:supply_fuel false
   412 jump *label208 always
   413 label *label188
   414 op idiv :start_reactor:mins :start_reactor:secs 6
   415 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  416 print "RUN {0} mins\n"
+  417 format :start_reactor:mins
   418 jump *label208 always
   419 label *label195
   420 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   426 op mul *tmp175 2 2
   427 op add :start_reactor:cryo_req 3 4
   428 jump *label196 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  429 print "IDLE\n"
   430 set :start_reactor:supply_fuel false
   431 jump *label207 always
   432 label *label196
 
   436 op div :start_reactor:flow *tmp183 10
   437 op idiv *tmp186 :start_reactor:charge_units 0.001
   438 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  439 print "WAIT power. (%{0}J + %{0}W)\n"
+  440 format :start_reactor:charge
+  441 format :start_reactor:flow
   442 set :start_reactor:supply_fuel false
   443 jump *label206 always
   444 label *label197
 
   447 jump *label200 equal *tmp189 false
   448 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   449 jump *label198 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  450 print "WAIT fuel\n"
   451 jump *label205 always
   452 label *label198
-    * print "WAIT system fuel"
-    * print "\n"
+  453 print "WAIT system fuel\n"
   454 jump *label205 always
   455 label *label200
   456 op mul *tmp194 45 2
   457 jump *label201 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  458 print "WAIT buffer fuel\n"
   459 jump *label204 always
   460 label *label201
   461 jump *label202 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  462 print "WAIT cryo\n"
   463 jump *label203 always
   464 label *label202
-    * print "STARTUP"
-    * print "\n"
+  465 print "STARTUP\n"
   466 op add .START_POWER_REQ .START_POWER_REQ 23000
   467 control enabled reactor2 true
   468 label *label203
 
   523 op mul *tmp125 :start_reactor:surplus 0.2
   524 op add .AVG_SURPLUS *tmp124 *tmp125
   525 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  526 print "#3 - "
   527 jump *label214 equal :emerg_shutdown false
   528 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  529 print "emergency mode\n"
   530 set :start_reactor:supply_fuel false
   531 jump *label247 always
   532 label *label214
   533 jump *label233 equal :start_reactor:enabled false
   534 jump *label215 greaterThanEq .REACTORS_DESIRED 3
   535 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  536 print "STOP unwanted\n"
   537 jump *label246 always
   538 label *label215
   539 op greaterThan *tmp136 3 1
 
   542 set *tmp139 *tmp138
   543 jump *label216 equal *tmp138 false
   544 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  545 print "STOP system fuel low\n"
   546 jump *label246 always
   547 label *label216
   548 jump *label217 greaterThan :start_reactor:fuel 1
   549 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  550 print "STOP fuel low\n"
   551 jump *label246 always
   552 label *label217
   553 jump *label218 greaterThan :start_reactor:cryo 1
   554 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  555 print "STOP out of cryo\n"
   556 jump *label246 always
   557 label *label218
   558 jump *label225 greaterThanEq :start_reactor:secs 30
 
   579 op land *tmp156 *tmp154 *tmp155
   580 jump *label223 equal *tmp156 false
   581 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  582 print "START FAIL battery\n"
   583 set :start_reactor:supply_fuel false
   584 jump *label246 always
   585 label *label223
   586 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  587 print "Starting {0} secs, req {0}J\n"
+  588 format :start_reactor:time_left
+  589 format :calc_charge_req*retval
   590 jump *label246 always
   591 label *label225
   592 op lessThan *tmp161 :start_reactor:charge 2000
 
   594 op land *tmp163 *tmp161 *tmp162
   595 jump *label226 equal *tmp163 false
   596 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  597 print "ABANDON - battery crit\n"
   598 set :start_reactor:supply_fuel false
   599 jump *label246 always
   600 label *label226
   601 op idiv :start_reactor:mins :start_reactor:secs 6
   602 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  603 print "RUN {0} mins\n"
+  604 format :start_reactor:mins
   605 jump *label246 always
   606 label *label233
   607 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   613 op mul *tmp175 2 3
   614 op add :start_reactor:cryo_req 3 6
   615 jump *label234 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  616 print "IDLE\n"
   617 set :start_reactor:supply_fuel false
   618 jump *label245 always
   619 label *label234
 
   623 op div :start_reactor:flow *tmp183 10
   624 op idiv *tmp186 :start_reactor:charge_units 0.001
   625 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  626 print "WAIT power. (%{0}J + %{0}W)\n"
+  627 format :start_reactor:charge
+  628 format :start_reactor:flow
   629 set :start_reactor:supply_fuel false
   630 jump *label244 always
   631 label *label235
 
   634 jump *label238 equal *tmp189 false
   635 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   636 jump *label236 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  637 print "WAIT fuel\n"
   638 jump *label243 always
   639 label *label236
-    * print "WAIT system fuel"
-    * print "\n"
+  640 print "WAIT system fuel\n"
   641 jump *label243 always
   642 label *label238
   643 op mul *tmp194 45 3
   644 jump *label239 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  645 print "WAIT buffer fuel\n"
   646 jump *label242 always
   647 label *label239
   648 jump *label240 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  649 print "WAIT cryo\n"
   650 jump *label241 always
   651 label *label240
-    * print "STARTUP"
-    * print "\n"
+  652 print "STARTUP\n"
   653 op add .START_POWER_REQ .START_POWER_REQ 23000
   654 control enabled reactor3 true
   655 label *label241
 
   702 op or *tmp43 *tmp42 :emerg_shutdown
   703 jump *label14 equal *tmp43 false
   704 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  705 print "Central Fuel at {0} / 0 - "
+  706 format :throttle_blast:fuel_stored
   707 jump *label16 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  708 print " Enemies detected.\n"
   709 jump *label15 always
   710 label *label16
-    * print " Critical power."
-    * print "\n"
+  711 print " Critical power.\n"
   712 jump *label15 always
   713 label *label14
   714 jump *label18 notEqual *tmp31 false
   715 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  716 print "Fuel {0} / 150 (due to emergency)\n"
+  717 format :throttle_blast:fuel_stored
   718 jump *label19 always
   719 label *label18
   720 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  721 print "Fuel {0} / 800\n"
+  722 format :throttle_blast:fuel_stored
   723 label *label19
   724 label *label15
   725 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   733 op lessThan *tmp57 .START_POWER_REQ 10
   734 op land *tmp58 *tmp56 *tmp57
   735 jump *label23 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  736 print "Differential now idle.\n"
   737 control enabled generator1 false
   738 control enabled generator2 false
   739 jump *label24 always
 
   753 # "Function: def kilo(in val)"
   754 op idiv *tmp93 .START_POWER_REQ 100
   755 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  756 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  757 format :kilo*retval
+  758 format :charge
+  759 format :surplus
   760 jump *label26 always
   761 label *label25
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  762 print "Power {0}kW, {0}kJ\n"
+  763 format :surplus
+  764 format :kilo*retval
   765 # "Function: def update_reactors_desired()"
   766 sensor *tmp71 node1 @powerNetStored
   767 sensor *tmp72 node1 @powerNetCapacity
 
   787 label *label32
   788 label *label26
   789 jump *label34 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  790 print "Require only {0}/5 reactors.\n"
+  791 format .REACTORS_DESIRED
   792 label *label34
   793 printflush message1
   794 jump *label7 always
 
   810 op mul *tmp125 :start_reactor:surplus 0.2
   811 op add .AVG_SURPLUS *tmp124 *tmp125
   812 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  813 print "#{0} - "
+  814 format :start_reactor:reactor_num
   815 jump *label46 equal :start_reactor:emerg_shutdown false
   816 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  817 print "emergency mode\n"
   818 set :start_reactor*retval false
   819 jump *label47 always
   820 label *label46
   821 jump *label48 equal :start_reactor:enabled false
   822 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   823 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  824 print "STOP unwanted\n"
   825 jump *label49 always
   826 label *label50
   827 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   830 op land *tmp139 *tmp136 *tmp138
   831 jump *label52 equal *tmp139 false
   832 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  833 print "STOP system fuel low\n"
   834 jump *label49 always
   835 label *label52
   836 jump *label54 greaterThan :start_reactor:fuel 1
   837 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  838 print "STOP fuel low\n"
   839 jump *label49 always
   840 label *label54
   841 jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
   842 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  843 print "STOP out of cryo\n"
   844 jump *label49 always
   845 label *label56
   846 jump *label58 greaterThanEq :start_reactor:secs 30
 
   867 op land *tmp156 *tmp154 *tmp155
   868 jump *label60 equal *tmp156 false
   869 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  870 print "START FAIL battery\n"
   871 set :start_reactor*retval false
   872 jump *label49 always
   873 label *label60
   874 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  875 print "Starting {0} secs, req {0}J\n"
+  876 format :start_reactor:time_left
+  877 format :calc_charge_req*retval
   878 jump *label49 always
   879 label *label58
   880 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   882 op land *tmp163 *tmp161 *tmp162
   883 jump *label62 equal *tmp163 false
   884 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  885 print "ABANDON - battery crit\n"
   886 set :start_reactor*retval false
   887 jump *label49 always
   888 label *label62
   889 op idiv :start_reactor:mins :start_reactor:secs 6
   890 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  891 print "RUN {0} mins\n"
+  892 format :start_reactor:mins
   893 jump *label49 always
   894 label *label48
   895 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   901 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   902 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   903 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  904 print "IDLE\n"
   905 set :start_reactor*retval false
   906 jump *label65 always
   907 label *label64
 
   911 op div :start_reactor:flow *tmp183 10
   912 op idiv *tmp186 :start_reactor:charge_units 0.001
   913 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  914 print "WAIT power. (%{0}J + %{0}W)\n"
+  915 format :start_reactor:charge
+  916 format :start_reactor:flow
   917 set :start_reactor*retval false
   918 jump *label67 always
   919 label *label66
 
   922 jump *label68 equal *tmp189 false
   923 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   924 jump *label70 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  925 print "WAIT fuel\n"
   926 jump *label69 always
   927 label *label70
-    * print "WAIT system fuel"
-    * print "\n"
+  928 print "WAIT system fuel\n"
   929 jump *label69 always
   930 label *label68
   931 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   932 jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  933 print "WAIT buffer fuel\n"
   934 jump *label73 always
   935 label *label72
   936 jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  937 print "WAIT cryo\n"
   938 jump *label75 always
   939 label *label74
-    * print "STARTUP"
-    * print "\n"
+  940 print "STARTUP\n"
   941 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   942 control enabled :start_reactor:reactor true
   943 label *label75

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label106 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label108 always
label *label106
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label108
# "Function: def check_manual_shutdown()"
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label11 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
jump *label10 always
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label114 equal *tmp107 false
set .START_POWER_REQ 0
jump *label116 always
label *label114
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label116 always
label *label116
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label118 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label120 always
label *label118
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label120 always
label *label120
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label122 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label124 always
label *label122
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label124 always
label *label124
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label126 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label128 always
label *label126
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label128 always
label *label128
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label130 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label132 always
label *label130
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label132 always
label *label132
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label138 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label171 always
label *label138
jump *label157 equal :start_reactor:enabled false
jump *label139 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label170 always
label *label139
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label141 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label170 always
label *label141
jump *label142 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label170 always
label *label142
jump *label149 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label144 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label146 always
label *label144
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label146 always
label *label146
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label147 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label147
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label170 always
label *label149
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label150 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label170 always
label *label150
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label170 always
label *label157
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label158 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label169 always
label *label158
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label159 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label168 always
label *label159
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label162 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label160 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label167 always
label *label160
print "WAIT system fuel\n"
jump *label167 always
label *label162
op mul *tmp194 45 1
jump *label163 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label166 always
label *label163
jump *label164 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label165 always
label *label164
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label165
label *label166
label *label167
label *label168
label *label169
label *label170
label *label171
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label176 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label209 always
label *label176
jump *label195 equal :start_reactor:enabled false
jump *label177 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label208 always
label *label177
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label178 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label208 always
label *label178
jump *label179 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label208 always
label *label179
jump *label180 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label208 always
label *label180
jump *label187 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label182 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label184 always
label *label182
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label184 always
label *label184
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label185 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label185
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label208 always
label *label187
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label188 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label208 always
label *label188
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label208 always
label *label195
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label196 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label207 always
label *label196
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label197 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label206 always
label *label197
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label200 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label198 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label205 always
label *label198
print "WAIT system fuel\n"
jump *label205 always
label *label200
op mul *tmp194 45 2
jump *label201 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label204 always
label *label201
jump *label202 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label203 always
label *label202
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label203
label *label204
label *label205
label *label206
label *label207
label *label208
label *label209
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label110 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label112 always
label *label110
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label112
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label214 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label247 always
label *label214
jump *label233 equal :start_reactor:enabled false
jump *label215 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label246 always
label *label215
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label216 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label246 always
label *label216
jump *label217 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label246 always
label *label217
jump *label218 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label246 always
label *label218
jump *label225 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label220 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label222 always
label *label220
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label222 always
label *label222
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label223 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label223
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label246 always
label *label225
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label226 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label246 always
label *label226
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label246 always
label *label233
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label234 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label245 always
label *label234
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label235 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label244 always
label *label235
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label238 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label236 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label243 always
label *label236
print "WAIT system fuel\n"
jump *label243 always
label *label238
op mul *tmp194 45 3
jump *label239 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label242 always
label *label239
jump *label240 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label241 always
label *label240
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label241
label *label242
label *label243
label *label244
label *label245
label *label246
label *label247
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or *tmp31 *tmp30 :fuel_many
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label14 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label16 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label15 always
label *label16
print " Critical power.\n"
jump *label15 always
label *label14
jump *label18 notEqual *tmp31 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label19 always
label *label18
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label19
label *label15
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
# "Function: def diff_generators()"
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label23 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label24 always
label *label23
control enabled generator1 true
control enabled generator2 true
label *label24
# "Function: def kilo(in val)"
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label25 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label26 always
label *label25
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label28 equal *tmp77 false
jump *label30 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label30
label *label28
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label32 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label32
label *label26
jump *label34 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label34
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label46 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label47 always
label *label46
jump *label48 equal :start_reactor:enabled false
jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label49 always
label *label50
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label52 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label49 always
label *label52
jump *label54 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label49 always
label *label54
jump *label56 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label49 always
label *label56
jump *label58 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label134 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label136 always
label *label134
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label136 always
label *label136
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label60 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label49 always
label *label60
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label49 always
label *label58
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label62 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label49 always
label *label62
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label49 always
label *label48
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label65 always
label *label64
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label66 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label67 always
label *label66
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label68 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label70 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label69 always
label *label70
print "WAIT system fuel\n"
jump *label69 always
label *label68
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label72 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label73 always
label *label72
jump *label74 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label75 always
label *label74
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label75
label *label73
label *label69
label *label67
label *label65
label *label49
label *label47
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
