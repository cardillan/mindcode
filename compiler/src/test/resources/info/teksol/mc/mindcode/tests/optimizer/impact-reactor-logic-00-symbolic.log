   661 instructions before optimizations.
    64 instructions eliminated by Temp Variables Elimination.
    60 instructions eliminated by Dead Code Elimination (10 iterations).
     1 instructions eliminated by Jump Normalization (5 iterations).
    18 instructions eliminated by Jump Optimization (2 passes, 5 iterations).
    17 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (4 iterations).
     3 instructions eliminated by If Expression Optimization (4 iterations).
    84 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
     1 loops improved by Loop Hoisting.
   550 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by JumpThreading.
     4 instructions eliminated by Unreachable Code Elimination.
   132 instructions eliminated by Print Merging.
   825 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 520):
  * Inline function 'kilo' defined at line 117:1                 cost     3, benefit      218.8, efficiency       72.9 (-8 instructions)
    Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 102:15                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 103:14                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 105:15                          cost     2, benefit       43.8, efficiency       21.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 528):
  * Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0 (-1 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 529):
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
  * Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3 (+6 instructions)
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 523):
  * Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9 (+44 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 479):
  ! Inline function 'start_reactor' defined at line 140:1        cost   631, benefit      687.5, efficiency        1.1
  * Inline function call at line 80:14                           cost   158, benefit      137.5, efficiency        0.9 (+151 instructions)
    Inline function call at line 84:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 328):
  ! Inline function 'start_reactor' defined at line 140:1        cost   473, benefit      550.0, efficiency        1.2
  * Inline function call at line 84:14                           cost   158, benefit      137.5, efficiency        0.9 (+152 instructions)
    Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 176):
  ! Inline function 'start_reactor' defined at line 140:1        cost   315, benefit      412.5, efficiency        1.3
  * Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9 (+152 instructions)
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 24):
  ! Inline function 'start_reactor' defined at line 140:1        cost   157, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 2: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        cost   154, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   155, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   155, benefit      137.5, efficiency        0.9

Pass 3: speed optimization selection (cost limit 39):
  ! Inline function 'start_reactor' defined at line 140:1        cost   154, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   155, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   155, benefit      137.5, efficiency        0.9

Pass 4: speed optimization selection (cost limit 39):
  ! Inline function 'start_reactor' defined at line 140:1        cost   154, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   155, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   155, benefit      137.5, efficiency        0.9

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    70 print "\n"
    71 set *tmp8 true
    72 jump *label10 always
-    * set *tmp13 null
    73 jump *label12 always
    74 label *label11
-    * set *tmp13 null
    75 label *label12
    76 set *tmp8 false
    77 jump *label10 always
 
   116 set :update_fuel.0:uld_in .ULD_IN_1
   117 set :update_fuel.0:uld_out .ULD_OUT_1
   118 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
-    * set *tmp20 :update_fuel.0*retval
   119 set :start_reactor.0:reactor reactor2
   120 set :start_reactor.0:reactor_num 2
   121 set :start_reactor.0:emerg_shutdown :emerg_shutdown
 
   129 set :update_fuel.0:uld_in .ULD_IN_2
   130 set :update_fuel.0:uld_out .ULD_OUT_2
   131 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
-    * set *tmp22 :update_fuel.0*retval
   132 set :check_radar.0:unit .TOWER
   133 call *label4 :check_radar.0*retaddr :check_radar.0*retval
   134 set *tmp23 :check_radar.0*retval
 
   167 set :update_fuel.0:uld_in .ULD_IN_MANY
   168 set :update_fuel.0:uld_out .ULD_OUT_MANY
   169 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
-    * set *tmp29 :update_fuel.0*retval
   170 op or *tmp30 :fuel_1 :fuel_2
   171 op or *tmp31 *tmp30 :fuel_many
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   205 print "\n"
   206 set *tmp45 null
   207 label *label17
-    * set *tmp44 *tmp45
   208 jump *label15 always
   209 label *label14
   210 op equal *tmp46 :throttle_blast.0:reactors_fueled false
 
   231 print "n"
   232 set *tmp47 null
   233 label *label19
-    * set *tmp44 *tmp47
   234 label *label15
   235 op lessThan *tmp48 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   236 set *tmp32 *tmp48
 
   266 control enabled generator2 true
   267 set *tmp59 true
   268 label *label24
-    * set *tmp52 *tmp59
   269 label *label22
   270 set :kilo.0:val .AVG_SURPLUS
   271 call *label0 :kilo.0*retaddr :kilo.0*retval
 
   290 print :surplus
   291 print "kW flow."
   292 print "\n"
-    * set *tmp68 null
   293 jump *label26 always
   294 label *label25
   295 print "Power "
 
   317 label *label30
   318 set *tmp80 null
   319 label *label31
-    * set *tmp78 *tmp80
   320 jump *label29 always
   321 label *label28
-    * set *tmp78 null
   322 label *label29
   323 op lessThan *tmp81 :update_reactors_desired.0:stored 0.8
   324 op mul *tmp82 .GOAL_BUFFER 0.8
 
   339 label *label33
   340 set *tmp70 *tmp85
   341 label *label27
-    * set *tmp68 *tmp70
   342 label *label26
   343 op notEqual *tmp91 .REACTORS_DESIRED 5
   344 jump *label34 equal *tmp91 false
 
   346 print .REACTORS_DESIRED
   347 print "/5 reactors."
   348 print "\n"
-    * set *tmp92 null
   349 jump *label35 always
   350 label *label34
-    * set *tmp92 null
   351 label *label35
   352 printflush message1
   353 label *label8
 
   399 jump *label43 equal *tmp107 false
   400 set :calc_charge_req.0*retval 0
   401 jump *label42 always
-    * set *tmp108 null
   402 jump *label44 always
   403 label *label43
-    * set *tmp108 null
   404 label *label44
   405 op sub *tmp109 30 :calc_charge_req.0:secs
   406 set :calc_charge_req.0:time_left *tmp109
 
   451 print "emergency mode"
   452 print "\n"
   453 set :start_reactor.0:supply_fuel false
-    * set *tmp128 :start_reactor.0:supply_fuel
   454 jump *label47 always
   455 label *label46
   456 jump *label48 equal :start_reactor.0:enabled false
 
   652 label *label65
   653 set *tmp131 *tmp178
   654 label *label49
-    * set *tmp128 *tmp131
   655 label *label47
   656 sensor *tmp201 :start_reactor.0:reactor @enabled
   657 op notEqual *tmp202 :start_reactor.0:enabled *tmp201
   658 jump *label76 equal *tmp202 false
   659 set *tmp204 @tick
   660 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   661 jump *label77 always
   662 label *label76
-    * set *tmp203 null
   663 label *label77
   664 set :start_reactor.0*retval :start_reactor.0:supply_fuel
   665 jump *label45 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   198 jump *label16 equal :throttle_blast.0:emerg_shutdown false
   199 print " Enemies detected."
   200 print "\n"
-    * set *tmp45 null
   201 jump *label17 always
   202 label *label16
   203 print " Critical power."
   204 print "\n"
-    * set *tmp45 null
   205 label *label17
   206 jump *label15 always
   207 label *label14
 
   216 print " "
   217 print "(due to emergency)"
   218 print "\n"
-    * set *tmp47 null
   219 jump *label19 always
   220 label *label18
   221 set :throttle_blast.0:limit .FUEL_LIMIT
 
   226 print :throttle_blast.0:limit
   227 print "\"
   228 print "n"
-    * set *tmp47 null
   229 label *label19
   230 label *label15
   231 op lessThan *tmp48 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
 
   255 print "\n"
   256 control enabled generator1 false
   257 control enabled generator2 false
-    * set *tmp59 false
   258 jump *label24 always
   259 label *label23
   260 control enabled generator1 true
   261 control enabled generator2 true
-    * set *tmp59 true
   262 label *label24
   263 label *label22
   264 set :kilo.0:val .AVG_SURPLUS
 
   306 jump *label30 equal *tmp79 false
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   309 jump *label31 always
   310 label *label30
-    * set *tmp80 null
   311 label *label31
   312 jump *label29 always
   313 label *label28
 
   329 label *label32
   330 set *tmp85 null
   331 label *label33
-    * set *tmp70 *tmp85
   332 label *label27
   333 label *label26
   334 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   374 set *tmp101 .FUEL_OFF
   375 label *label41
   376 control config *tmp98 *tmp101
-    * set :update_fuel.0*retval *tmp101
   377 label *label37
   378 return :update_fuel.0*retaddr
   379 end
 
   549 label *label53
   550 set *tmp133 *tmp140
   551 label *label51
-    * set *tmp131 *tmp133
   552 jump *label49 always
   553 label *label48
   554 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
 
   639 label *label67
   640 set *tmp178 *tmp181
   641 label *label65
-    * set *tmp131 *tmp178
   642 label *label49
   643 label *label47
   644 sensor *tmp201 :start_reactor.0:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   324 op add *tmp89 :update_reactors_desired.0:needed .REACTORS_DESIRED
   325 op min *tmp90 5 *tmp89
   326 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   327 jump *label33 always
   328 label *label32
-    * set *tmp85 null
   329 label *label33
   330 label *label27
   331 label *label26
 
   448 control enabled *tmp134 false
   449 print "STOP unwanted"
   450 print "\n"
-    * set *tmp133 null
   451 jump *label51 always
   452 label *label50
   453 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
 
   544 label *label55
   545 set *tmp140 *tmp144
   546 label *label53
-    * set *tmp133 *tmp140
   547 label *label51
   548 jump *label49 always
   549 label *label48
 
   563 print "IDLE"
   564 print "\n"
   565 set :start_reactor.0:supply_fuel false
-    * set *tmp178 :start_reactor.0:supply_fuel
   566 jump *label65 always
   567 label *label64
   568 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
 
   632 label *label69
   633 set *tmp181 *tmp190
   634 label *label67
-    * set *tmp178 *tmp181
   635 label *label65
   636 label *label49
   637 label *label47

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   459 control enabled *tmp141 false
   460 print "STOP system fuel low"
   461 print "\n"
-    * set *tmp140 null
   462 jump *label53 always
   463 label *label52
   464 op lessThanEq *tmp143 :start_reactor.0:fuel 1
 
   541 label *label57
   542 set *tmp144 *tmp148
   543 label *label55
-    * set *tmp140 *tmp144
   544 label *label53
   545 label *label51
   546 jump *label49 always
 
   581 print "W)"
   582 print "\n"
   583 set :start_reactor.0:supply_fuel false
-    * set *tmp181 :start_reactor.0:supply_fuel
   584 jump *label67 always
   585 label *label66
   586 op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
 
   627 label *label73
   628 set *tmp190 *tmp196
   629 label *label69
-    * set *tmp181 *tmp190
   630 label *label67
   631 label *label65
   632 label *label49

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   467 control enabled *tmp145 false
   468 print "STOP fuel low"
   469 print "\n"
-    * set *tmp144 null
   470 jump *label55 always
   471 label *label54
   472 op lessThanEq *tmp147 :start_reactor.0:cryo .CRYO_ABORT
 
   538 label *label59
   539 set *tmp148 *tmp152
   540 label *label57
-    * set *tmp144 *tmp148
   541 label *label55
   542 label *label53
   543 label *label51
 
   596 print "\n"
   597 set *tmp193 null
   598 label *label71
-    * set *tmp190 *tmp193
   599 jump *label69 always
   600 label *label68
   601 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
 
   622 label *label75
   623 set *tmp196 *tmp198
   624 label *label73
-    * set *tmp190 *tmp196
   625 label *label69
   626 label *label67
   627 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   475 control enabled *tmp149 false
   476 print "STOP out of cryo"
   477 print "\n"
-    * set *tmp148 null
   478 jump *label57 always
   479 label *label56
   480 op lessThan *tmp151 :start_reactor.0:secs 30
 
   535 label *label63
   536 set *tmp152 *tmp164
   537 label *label59
-    * set *tmp148 *tmp152
   538 label *label57
   539 label *label55
   540 label *label53
 
   587 jump *label70 equal *tmp192 false
   588 print "WAIT fuel"
   589 print "\n"
-    * set *tmp193 null
   590 jump *label71 always
   591 label *label70
   592 print "WAIT system fuel"
   593 print "\n"
-    * set *tmp193 null
   594 label *label71
   595 jump *label69 always
   596 label *label68
 
   599 jump *label72 equal *tmp195 false
   600 print "WAIT buffer fuel"
   601 print "\n"
-    * set *tmp196 null
   602 jump *label73 always
   603 label *label72
   604 op lessThan *tmp197 :start_reactor.0:cryo :start_reactor.0:cryo_req
 
   615 control enabled *tmp199 true
   616 set *tmp198 true
   617 label *label75
-    * set *tmp196 *tmp198
   618 label *label73
   619 label *label69
   620 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   507 print "\n"
   508 set *tmp157 null
   509 label *label61
-    * set *tmp152 *tmp157
   510 jump *label59 always
   511 label *label58
   512 op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
 
   532 print "\n"
   533 set *tmp164 null
   534 label *label63
-    * set *tmp152 *tmp164
   535 label *label59
   536 label *label57
   537 label *label55
 
   603 jump *label74 equal *tmp197 false
   604 print "WAIT cryo"
   605 print "\n"
-    * set *tmp198 null
   606 jump *label75 always
   607 label *label74
   608 print "STARTUP"
 
   610 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   611 set *tmp199 :start_reactor.0:reactor
   612 control enabled *tmp199 true
-    * set *tmp198 true
   613 label *label75
   614 label *label73
   615 label *label69

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   493 print "START FAIL battery"
   494 print "\n"
   495 set :start_reactor.0:supply_fuel false
-    * set *tmp157 :start_reactor.0:supply_fuel
   496 jump *label61 always
   497 label *label60
   498 op sub *tmp160 30 :start_reactor.0:secs
 
   504 print :start_reactor.0:charge_req
   505 print "J"
   506 print "\n"
-    * set *tmp157 null
   507 label *label61
   508 jump *label59 always
   509 label *label58
 
   516 print "ABANDON - battery crit"
   517 print "\n"
   518 set :start_reactor.0:supply_fuel false
-    * set *tmp164 :start_reactor.0:supply_fuel
   519 jump *label63 always
   520 label *label62
   521 op idiv *tmp167 :start_reactor.0:secs 6
 
   527 print " "
   528 print "mins"
   529 print "\n"
-    * set *tmp164 null
   530 label *label63
   531 label *label59
   532 label *label57

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-64 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar.0:unit .TOWER
    58 call *label4 :check_radar.0*retaddr :check_radar.0*retval
-    * set *tmp7 :check_radar.0*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar.0*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
    78 set :calc_charge_req.0:reactor reactor1
    79 set :calc_charge_req.0:time :t_startup1
    80 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set *tmp14 :calc_charge_req.0*retval
-    * set .START_POWER_REQ *tmp14
+   81 set .START_POWER_REQ :calc_charge_req.0*retval
    82 set :calc_charge_req.0:reactor reactor2
    83 set :calc_charge_req.0:time :t_startup2
    84 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set *tmp15 :calc_charge_req.0*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   85 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
    86 set :calc_charge_req.0:reactor reactor3
    87 set :calc_charge_req.0:time :t_startup3
    88 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set *tmp16 :calc_charge_req.0*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   89 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
    90 set :calc_charge_req.0:reactor reactor4
    91 set :calc_charge_req.0:time :t_startup4
    92 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set *tmp17 :calc_charge_req.0*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
    94 set :calc_charge_req.0:reactor reactor5
    95 set :calc_charge_req.0:time :t_startup5
    96 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set *tmp18 :calc_charge_req.0*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+   97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
    98 set :start_reactor.0:reactor reactor1
    99 set :start_reactor.0:reactor_num 1
   100 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   101 set :start_reactor.0:fuel_on :fuel_1
   102 set :start_reactor.0:t_startup :t_startup1
   103 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
-    * set *tmp19 :start_reactor.0*retval
-    * set :fuel_1 *tmp19
+  104 set :fuel_1 :start_reactor.0*retval
   105 set :t_startup1 .RET_T_STARTUP
   106 set :update_fuel.0:fuel :fuel_1
   107 set :update_fuel.0:uld_in .ULD_IN_1
 
   113 set :start_reactor.0:fuel_on :fuel_2
   114 set :start_reactor.0:t_startup :t_startup2
   115 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
-    * set *tmp21 :start_reactor.0*retval
-    * set :fuel_2 *tmp21
+  116 set :fuel_2 :start_reactor.0*retval
   117 set :t_startup2 .RET_T_STARTUP
   118 set :update_fuel.0:fuel :fuel_2
   119 set :update_fuel.0:uld_in .ULD_IN_2
 
   121 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
   122 set :check_radar.0:unit .TOWER
   123 call *label4 :check_radar.0*retaddr :check_radar.0*retval
-    * set *tmp23 :check_radar.0*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  124 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
   125 set :start_reactor.0:reactor reactor3
   126 set :start_reactor.0:reactor_num 3
   127 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   128 set :start_reactor.0:fuel_on :fuel_3
   129 set :start_reactor.0:t_startup :t_startup3
   130 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
-    * set *tmp24 :start_reactor.0*retval
-    * set :fuel_3 *tmp24
+  131 set :fuel_3 :start_reactor.0*retval
   132 set :t_startup3 .RET_T_STARTUP
   133 set :start_reactor.0:reactor reactor4
   134 set :start_reactor.0:reactor_num 4
 
   136 set :start_reactor.0:fuel_on :fuel_4
   137 set :start_reactor.0:t_startup :t_startup4
   138 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
-    * set *tmp25 :start_reactor.0*retval
-    * set :fuel_4 *tmp25
+  139 set :fuel_4 :start_reactor.0*retval
   140 set :t_startup4 .RET_T_STARTUP
   141 set :start_reactor.0:reactor reactor5
   142 set :start_reactor.0:reactor_num 5
 
   144 set :start_reactor.0:fuel_on :fuel_5
   145 set :start_reactor.0:t_startup :t_startup5
   146 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
-    * set *tmp26 :start_reactor.0*retval
-    * set :fuel_5 *tmp26
+  147 set :fuel_5 :start_reactor.0*retval
   148 set :t_startup5 .RET_T_STARTUP
   149 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  150 op or :fuel_many *tmp27 :fuel_5
   151 set :update_fuel.0:fuel :fuel_many
   152 set :update_fuel.0:uld_in .ULD_IN_MANY
   153 set :update_fuel.0:uld_out .ULD_OUT_MANY
 
   158 set :throttle_blast.0:reactors_fueled *tmp31
   159 set :throttle_blast.0:emerg_shutdown :emerg_shutdown
   160 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast.0:charge *tmp34
+  161 op floor :throttle_blast.0:charge *tmp33
   162 sensor *tmp35 .NODE @powerNetIn
   163 sensor *tmp36 .NODE @powerNetOut
   164 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast.0:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast.0:fuel_stored *tmp39
+  165 op floor :throttle_blast.0:surplus *tmp37
+  166 sensor :throttle_blast.0:fuel_stored .CONTAINER @blast-compound
   167 op lessThan *tmp40 :throttle_blast.0:charge .PWR_ABORT
   168 op lessThan *tmp41 :throttle_blast.0:surplus .FLOW_ABORT
   169 op land *tmp42 *tmp40 *tmp41
 
   210 print "n"
   211 label *label19
   212 label *label15
-    * op lessThan *tmp48 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
-    * set *tmp32 *tmp48
+  213 op lessThan *tmp32 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   214 jump *label13 always
   215 set *tmp32 null
   216 label *label13
 
   226 # "Function: def diff_generators()"
   227 sensor *tmp53 .NODE @powerNetStored
   228 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators.0:stored_pc *tmp55
+  229 op div :diff_generators.0:stored_pc *tmp53 *tmp54
   230 op greaterThan *tmp56 :diff_generators.0:stored_pc 0.9
   231 op lessThan *tmp57 .START_POWER_REQ 10
   232 op land *tmp58 *tmp56 *tmp57
 
   243 label *label22
   244 set :kilo.0:val .AVG_SURPLUS
   245 call *label0 :kilo.0*retaddr :kilo.0*retval
-    * set *tmp64 :kilo.0*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo.0:val *tmp65
+  246 set :surplus :kilo.0*retval
+  247 sensor :kilo.0:val .NODE @powerNetStored
   248 call *label0 :kilo.0*retaddr :kilo.0*retval
-    * set *tmp66 :kilo.0*retval
-    * set :charge *tmp66
+  249 set :charge :kilo.0*retval
   250 op greaterThan *tmp67 .START_POWER_REQ 0
   251 jump *label25 equal *tmp67 false
   252 set :kilo.0:val .START_POWER_REQ
   253 call *label0 :kilo.0*retaddr :kilo.0*retval
-    * set *tmp69 :kilo.0*retval
-    * set :req *tmp69
+  254 set :req :kilo.0*retval
   255 print "Req "
   256 print :req
   257 print "kJ / "
 
   271 # "Function: def update_reactors_desired()"
   272 sensor *tmp71 .NODE @powerNetStored
   273 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired.0:stored *tmp73
+  274 op div :update_reactors_desired.0:stored *tmp71 *tmp72
   275 op greaterThan *tmp74 :update_reactors_desired.0:stored 0.98
   276 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   277 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   294 jump *label32 equal *tmp84 false
   295 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   296 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired.0:needed *tmp88
+  297 op max :update_reactors_desired.0:needed 1 *tmp87
   298 op add *tmp89 :update_reactors_desired.0:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  299 op min .REACTORS_DESIRED 5 *tmp89
   300 jump *label33 always
   301 label *label32
   302 label *label33
 
   319 label *label0
   320 # "Function: def kilo(in val)"
   321 op idiv *tmp93 :kilo.0:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo.0*retval *tmp94
+  322 op div :kilo.0*retval *tmp93 10
   323 jump *label36 always
   324 set :kilo.0*retval null
   325 label *label36
 
   350 label *label2
   351 # "Function: def calc_charge_req(in reactor, in time)"
   352 op sub *tmp102 @tick :calc_charge_req.0:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req.0:secs *tmp103
+  353 op idiv :calc_charge_req.0:secs *tmp102 60
   354 op greaterThan *tmp104 :calc_charge_req.0:secs 30
   355 sensor *tmp105 :calc_charge_req.0:reactor @enabled
   356 op equal *tmp106 *tmp105 false
 
   361 jump *label44 always
   362 label *label43
   363 label *label44
-    * op sub *tmp109 30 :calc_charge_req.0:secs
-    * set :calc_charge_req.0:time_left *tmp109
+  364 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
   365 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
   366 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req.0:charge_req *tmp112
+  367 op floor :calc_charge_req.0:charge_req *tmp111
   368 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
   369 jump *label42 always
   370 set :calc_charge_req.0*retval null
 
   375 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   376 set .RET_T_STARTUP :start_reactor.0:t_startup
   377 op sub *tmp113 @tick :start_reactor.0:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor.0:secs *tmp114
-    * sensor *tmp115 :start_reactor.0:reactor @blast-compound
-    * set :start_reactor.0:fuel *tmp115
+  378 op idiv :start_reactor.0:secs *tmp113 60
+  379 sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
   380 set :start_reactor.0:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor.0:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor.0:reactor @cryofluid
-    * set :start_reactor.0:cryo *tmp117
+  381 sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
   383 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor.0:charge *tmp119
+  384 op floor :start_reactor.0:charge *tmp118
   385 sensor *tmp120 .NODE @powerNetIn
   386 sensor *tmp121 .NODE @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor.0:surplus *tmp123
+  388 op floor :start_reactor.0:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor.0:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor.0:reactor @enabled
-    * set :start_reactor.0:enabled *tmp127
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
   393 print "#"
   394 print :start_reactor.0:reactor_num
   395 print " "
   396 print "- "
   397 jump *label46 equal :start_reactor.0:emerg_shutdown false
-    * set *tmp129 :start_reactor.0:reactor
-    * control enabled *tmp129 false
+  398 control enabled :start_reactor.0:reactor false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor.0:supply_fuel false
 
   404 jump *label48 equal :start_reactor.0:enabled false
   405 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor.0:reactor_num
   406 jump *label50 equal *tmp132 false
-    * set *tmp134 :start_reactor.0:reactor
-    * control enabled *tmp134 false
+  407 control enabled :start_reactor.0:reactor false
   408 print "STOP unwanted"
   409 print "\n"
   410 jump *label51 always
 
   414 op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
   415 op land *tmp139 *tmp136 *tmp138
   416 jump *label52 equal *tmp139 false
-    * set *tmp141 :start_reactor.0:reactor
-    * control enabled *tmp141 false
+  417 control enabled :start_reactor.0:reactor false
   418 print "STOP system fuel low"
   419 print "\n"
   420 jump *label53 always
   421 label *label52
   422 op lessThanEq *tmp143 :start_reactor.0:fuel 1
   423 jump *label54 equal *tmp143 false
-    * set *tmp145 :start_reactor.0:reactor
-    * control enabled *tmp145 false
+  424 control enabled :start_reactor.0:reactor false
   425 print "STOP fuel low"
   426 print "\n"
   427 jump *label55 always
   428 label *label54
   429 op lessThanEq *tmp147 :start_reactor.0:cryo .CRYO_ABORT
   430 jump *label56 equal *tmp147 false
-    * set *tmp149 :start_reactor.0:reactor
-    * control enabled *tmp149 false
+  431 control enabled :start_reactor.0:reactor false
   432 print "STOP out of cryo"
   433 print "\n"
   434 jump *label57 always
 
   444 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
   445 op land *tmp156 *tmp154 *tmp155
   446 jump *label60 equal *tmp156 false
-    * set *tmp158 :start_reactor.0:reactor
-    * control enabled *tmp158 false
+  447 control enabled :start_reactor.0:reactor false
   448 print "START FAIL battery"
   449 print "\n"
   450 set :start_reactor.0:supply_fuel false
   451 jump *label61 always
   452 label *label60
-    * op sub *tmp160 30 :start_reactor.0:secs
-    * set :start_reactor.0:time_left *tmp160
+  453 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
   454 print "Starting "
   455 print :start_reactor.0:time_left
   456 print " "
 
   465 op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
   466 op land *tmp163 *tmp161 *tmp162
   467 jump *label62 equal *tmp163 false
-    * set *tmp165 :start_reactor.0:reactor
-    * control enabled *tmp165 false
+  468 control enabled :start_reactor.0:reactor false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor.0:supply_fuel false
   472 jump *label63 always
   473 label *label62
-    * op idiv *tmp167 :start_reactor.0:secs 6
-    * set :start_reactor.0:mins *tmp167
-    * op div *tmp168 :start_reactor.0:mins 10
-    * set :start_reactor.0:mins *tmp168
+  474 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
+  475 op div :start_reactor.0:mins :start_reactor.0:mins 10
   476 print "RUN "
   477 print :start_reactor.0:mins
   478 print " "
 
   489 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
   490 op sub *tmp170 *tmp169 .PWR_ABORT
   491 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor.0:charge_units *tmp172
+  492 op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
   493 op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor.0:flow_units *tmp174
+  494 op max :start_reactor.0:flow_units -0.1 *tmp173
   495 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor.0:cryo_req *tmp176
+  496 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
   497 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor.0:reactor_num
   498 jump *label64 equal *tmp177 false
   499 print "IDLE"
 
   506 jump *label66 equal *tmp180 false
   507 op mul *tmp182 :start_reactor.0:flow_units 1000
   508 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor.0:flow *tmp184
+  509 op div :start_reactor.0:flow *tmp183 10
   510 op mul *tmp185 :start_reactor.0:charge_units 1000
   511 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor.0:charge *tmp187
+  512 op div :start_reactor.0:charge *tmp186 10
   513 print "WAIT power. (%"
   514 print :start_reactor.0:charge
   515 print "J + %"
 
   550 print "STARTUP"
   551 print "\n"
   552 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor.0:reactor
-    * control enabled *tmp199 true
+  553 control enabled :start_reactor.0:reactor true
   554 label *label75
   555 label *label73
   556 label *label69
 
   561 sensor *tmp201 :start_reactor.0:reactor @enabled
   562 op notEqual *tmp202 :start_reactor.0:enabled *tmp201
   563 jump *label76 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  564 set .RET_T_STARTUP @tick
   565 jump *label77 always
   566 label *label76
   567 label *label77
 
   573 end
   574 label *label4
   575 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar.0:unit 1 *tmp205
-    * set :check_radar.0:enemy_found *tmp205
+  576 radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
   577 op notEqual *tmp206 :check_radar.0:enemy_found null
   578 jump *label79 equal *tmp206 false
   579 control enabled projector1 true
   580 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  581 control config .ULD_IN_1 .FUEL_OFF
+  582 control config .ULD_OUT_1 .FUEL
+  583 control config .ULD_IN_2 .FUEL_OFF
+  584 control config .ULD_OUT_2 .FUEL
+  585 control config .ULD_IN_MANY .FUEL_OFF
+  586 control config .ULD_OUT_MANY .FUEL
+  587 control config .ULD_MIXER .FUEL_OFF
   588 control enabled reactor1 false
   589 control enabled reactor2 false
   590 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   185 label *label17
   186 jump *label15 always
   187 label *label14
-    * op equal *tmp46 :throttle_blast.0:reactors_fueled false
-    * jump *label18 equal *tmp46 false
+  188 jump *label18 notEqual :throttle_blast.0:reactors_fueled false
   189 set :throttle_blast.0:limit .FUEL_LIMIT_LOW
   190 print "Fuel "
   191 print :throttle_blast.0:fuel_stored
 
   244 sensor :kilo.0:val .NODE @powerNetStored
   245 call *label0 :kilo.0*retaddr :kilo.0*retval
   246 set :charge :kilo.0*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label25 equal *tmp67 false
+  247 jump *label25 lessThanEq .START_POWER_REQ 0
   248 set :kilo.0:val .START_POWER_REQ
   249 call *label0 :kilo.0*retaddr :kilo.0*retval
   250 set :req :kilo.0*retval
 
   273 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   274 op land *tmp77 *tmp74 *tmp76
   275 jump *label28 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label30 equal *tmp79 false
+  276 jump *label30 lessThanEq .REACTORS_DESIRED 2
   277 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   278 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   279 jump *label31 always
 
   297 label *label33
   298 label *label27
   299 label *label26
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label34 equal *tmp91 false
+  300 jump *label34 equal .REACTORS_DESIRED 5
   301 print "Require only "
   302 print .REACTORS_DESIRED
   303 print "/5 reactors."
 
   330 label *label39
   331 control config *tmp95 *tmp97
   332 set *tmp98 :update_fuel.0:uld_out
-    * op equal *tmp100 :update_fuel.0:fuel false
-    * jump *label40 equal *tmp100 false
+  333 jump *label40 notEqual :update_fuel.0:fuel false
   334 set *tmp101 .FUEL
   335 jump *label41 always
   336 label *label40
 
   395 jump *label47 always
   396 label *label46
   397 jump *label48 equal :start_reactor.0:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * jump *label50 equal *tmp132 false
+  398 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
   399 control enabled :start_reactor.0:reactor false
   400 print "STOP unwanted"
   401 print "\n"
 
   411 print "\n"
   412 jump *label53 always
   413 label *label52
-    * op lessThanEq *tmp143 :start_reactor.0:fuel 1
-    * jump *label54 equal *tmp143 false
+  414 jump *label54 greaterThan :start_reactor.0:fuel 1
   415 control enabled :start_reactor.0:reactor false
   416 print "STOP fuel low"
   417 print "\n"
   418 jump *label55 always
   419 label *label54
-    * op lessThanEq *tmp147 :start_reactor.0:cryo .CRYO_ABORT
-    * jump *label56 equal *tmp147 false
+  420 jump *label56 greaterThan :start_reactor.0:cryo .CRYO_ABORT
   421 control enabled :start_reactor.0:reactor false
   422 print "STOP out of cryo"
   423 print "\n"
   424 jump *label57 always
   425 label *label56
-    * op lessThan *tmp151 :start_reactor.0:secs 30
-    * jump *label58 equal *tmp151 false
+  426 jump *label58 greaterThanEq :start_reactor.0:secs 30
   427 set :calc_charge_req.0:reactor :start_reactor.0:reactor
   428 set :calc_charge_req.0:time :start_reactor.0:t_startup
   429 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
 
   483 op max :start_reactor.0:flow_units -0.1 *tmp173
   484 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
   485 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * jump *label64 equal *tmp177 false
+  486 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
   487 print "IDLE"
   488 print "\n"
   489 set :start_reactor.0:supply_fuel false
   490 jump *label65 always
   491 label *label64
   492 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label66 equal *tmp180 false
+  493 jump *label66 greaterThanEq *tmp179 1
   494 op mul *tmp182 :start_reactor.0:flow_units 1000
   495 op floor *tmp183 *tmp182
   496 op div :start_reactor.0:flow *tmp183 10
 
   510 op land *tmp189 :start_reactor.0:fuel_on *tmp188
   511 jump *label68 equal *tmp189 false
   512 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label70 equal *tmp192 false
+  513 jump *label70 lessThanEq *tmp191 .FUEL_REQ
   514 print "WAIT fuel"
   515 print "\n"
   516 jump *label71 always
 
   521 jump *label69 always
   522 label *label68
   523 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
-    * op lessThan *tmp195 :start_reactor.0:fuel_stored *tmp194
-    * jump *label72 equal *tmp195 false
+  524 jump *label72 greaterThanEq :start_reactor.0:fuel_stored *tmp194
   525 print "WAIT buffer fuel"
   526 print "\n"
   527 jump *label73 always
   528 label *label72
-    * op lessThan *tmp197 :start_reactor.0:cryo :start_reactor.0:cryo_req
-    * jump *label74 equal *tmp197 false
+  529 jump *label74 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
   530 print "WAIT cryo"
   531 print "\n"
   532 jump *label75 always
 
   543 label *label49
   544 label *label47
   545 sensor *tmp201 :start_reactor.0:reactor @enabled
-    * op notEqual *tmp202 :start_reactor.0:enabled *tmp201
-    * jump *label76 equal *tmp202 false
+  546 jump *label76 equal :start_reactor.0:enabled *tmp201
   547 set .RET_T_STARTUP @tick
   548 jump *label77 always
   549 label *label76
 
   557 label *label4
   558 # "Function: def check_radar(in unit)"
   559 radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
-    * op notEqual *tmp206 :check_radar.0:enemy_found null
-    * jump *label79 equal *tmp206 false
+  560 jump *label79 equal :check_radar.0:enemy_found null
   561 control enabled projector1 true
   562 control enabled projector2 true
   563 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   275 jump *label30 lessThanEq .REACTORS_DESIRED 2
   276 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   277 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label31 always
   278 label *label30
   279 label *label31
-    * jump *label29 always
   280 label *label28
   281 label *label29
   282 op lessThan *tmp81 :update_reactors_desired.0:stored 0.8
 
   289 op max :update_reactors_desired.0:needed 1 *tmp87
   290 op add *tmp89 :update_reactors_desired.0:needed .REACTORS_DESIRED
   291 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label33 always
   292 label *label32
   293 label *label33
   294 label *label27
 
   298 print .REACTORS_DESIRED
   299 print "/5 reactors."
   300 print "\n"
-    * jump *label35 always
   301 label *label34
   302 label *label35
   303 printflush message1
 
   346 jump *label43 equal *tmp107 false
   347 set :calc_charge_req.0*retval 0
   348 jump *label42 always
-    * jump *label44 always
   349 label *label43
   350 label *label44
   351 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
 
   539 sensor *tmp201 :start_reactor.0:reactor @enabled
   540 jump *label76 equal :start_reactor.0:enabled *tmp201
   541 set .RET_T_STARTUP @tick
-    * jump *label77 always
   542 label *label76
   543 label *label77
   544 set :start_reactor.0*retval :start_reactor.0:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   350 label *label44
   351 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
   352 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req.0:charge_req *tmp111
+  353 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
   354 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
   355 jump *label42 always
   356 set :calc_charge_req.0*retval null
 
   484 label *label64
   485 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
   486 jump *label66 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor.0:flow_units 1000
-    * op floor *tmp183 *tmp182
+  487 op idiv *tmp183 :start_reactor.0:flow_units 0.001
   488 op div :start_reactor.0:flow *tmp183 10
-    * op mul *tmp185 :start_reactor.0:charge_units 1000
-    * op floor *tmp186 *tmp185
+  489 op idiv *tmp186 :start_reactor.0:charge_units 0.001
   490 op div :start_reactor.0:charge *tmp186 10
   491 print "WAIT power. (%"
   492 print :start_reactor.0:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar.0:unit .TOWER
+   55 set :check_radar.0:unit cyclone1
    56 call *label4 :check_radar.0*retaddr :check_radar.0*retval
    57 set :emerg_shutdown :check_radar.0*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar.0*retval *tmp8
    74 set :calc_charge_req.0:reactor reactor1
    75 set :calc_charge_req.0:time :t_startup1
    76 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
 
    99 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
   100 set :fuel_1 :start_reactor.0*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel.0:fuel :fuel_1
-    * set :update_fuel.0:uld_in .ULD_IN_1
-    * set :update_fuel.0:uld_out .ULD_OUT_1
+  102 set :update_fuel.0:fuel :start_reactor.0*retval
+  103 set :update_fuel.0:uld_in unloader1
+  104 set :update_fuel.0:uld_out unloader2
   105 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
   106 set :start_reactor.0:reactor reactor2
   107 set :start_reactor.0:reactor_num 2
 
   111 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
   112 set :fuel_2 :start_reactor.0*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel.0:fuel :fuel_2
-    * set :update_fuel.0:uld_in .ULD_IN_2
-    * set :update_fuel.0:uld_out .ULD_OUT_2
+  114 set :update_fuel.0:fuel :start_reactor.0*retval
+  115 set :update_fuel.0:uld_in unloader3
+  116 set :update_fuel.0:uld_out unloader4
   117 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
-    * set :check_radar.0:unit .TOWER
+  118 set :check_radar.0:unit cyclone1
   119 call *label4 :check_radar.0*retaddr :check_radar.0*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
   121 set :start_reactor.0:reactor reactor3
 
   143 set :fuel_5 :start_reactor.0*retval
   144 set :t_startup5 .RET_T_STARTUP
   145 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  146 op or :fuel_many *tmp27 :start_reactor.0*retval
   147 set :update_fuel.0:fuel :fuel_many
-    * set :update_fuel.0:uld_in .ULD_IN_MANY
-    * set :update_fuel.0:uld_out .ULD_OUT_MANY
+  148 set :update_fuel.0:uld_in unloader5
+  149 set :update_fuel.0:uld_out unloader6
   150 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
   151 op or *tmp30 :fuel_1 :fuel_2
   152 op or *tmp31 *tmp30 :fuel_many
   153 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   154 set :throttle_blast.0:reactors_fueled *tmp31
   155 set :throttle_blast.0:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  156 sensor *tmp33 node1 @powerNetStored
   157 op floor :throttle_blast.0:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  158 sensor *tmp35 node1 @powerNetIn
+  159 sensor *tmp36 node1 @powerNetOut
   160 op sub *tmp37 *tmp35 *tmp36
   161 op floor :throttle_blast.0:surplus *tmp37
-    * sensor :throttle_blast.0:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast.0:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast.0:surplus .FLOW_ABORT
+  162 sensor :throttle_blast.0:fuel_stored vault1 @blast-compound
+  163 op lessThan *tmp40 :throttle_blast.0:charge 5000
+  164 op lessThan *tmp41 :throttle_blast.0:surplus -500
   165 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast.0:emerg_shutdown
+  166 op or *tmp43 *tmp42 :emerg_shutdown
   167 jump *label14 equal *tmp43 false
   168 set :throttle_blast.0:limit 0
   169 print "Central Fuel at "
   170 print :throttle_blast.0:fuel_stored
   171 print " "
   172 print "/ "
-    * print :throttle_blast.0:limit
+  173 print 0
   174 print " "
   175 print "- "
-    * jump *label16 equal :throttle_blast.0:emerg_shutdown false
+  176 jump *label16 equal :emerg_shutdown false
   177 print " Enemies detected."
   178 print "\n"
   179 jump *label17 always
 
   183 label *label17
   184 jump *label15 always
   185 label *label14
-    * jump *label18 notEqual :throttle_blast.0:reactors_fueled false
-    * set :throttle_blast.0:limit .FUEL_LIMIT_LOW
+  186 jump *label18 notEqual *tmp31 false
+  187 set :throttle_blast.0:limit 150
   188 print "Fuel "
   189 print :throttle_blast.0:fuel_stored
   190 print " "
   191 print "/ "
-    * print :throttle_blast.0:limit
+  192 print .FUEL_LIMIT_LOW
   193 print " "
   194 print "(due to emergency)"
   195 print "\n"
   196 jump *label19 always
   197 label *label18
-    * set :throttle_blast.0:limit .FUEL_LIMIT
+  198 set :throttle_blast.0:limit 800
   199 print "Fuel "
   200 print :throttle_blast.0:fuel_stored
   201 print " "
   202 print "/ "
-    * print :throttle_blast.0:limit
+  203 print .FUEL_LIMIT
   204 print "\"
   205 print "n"
   206 label *label19
   207 label *label15
   208 op lessThan *tmp32 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   209 jump *label13 always
-    * set *tmp32 null
   210 label *label13
   211 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label20 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  212 set *tmp49 unloader7
+  213 jump *label20 equal *tmp32 false
+  214 set *tmp51 @pyratite
   215 jump *label21 always
   216 label *label20
-    * set *tmp51 .FUEL_OFF
+  217 set *tmp51 @scrap
   218 label *label21
-    * control config *tmp49 *tmp51
+  219 control config .ULD_MIXER *tmp51
   220 # "Function: def diff_generators()"
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  221 sensor *tmp53 node1 @powerNetStored
+  222 sensor *tmp54 node1 @powerNetCapacity
   223 op div :diff_generators.0:stored_pc *tmp53 *tmp54
   224 op greaterThan *tmp56 :diff_generators.0:stored_pc 0.9
   225 op lessThan *tmp57 .START_POWER_REQ 10
 
   238 set :kilo.0:val .AVG_SURPLUS
   239 call *label0 :kilo.0*retaddr :kilo.0*retval
   240 set :surplus :kilo.0*retval
-    * sensor :kilo.0:val .NODE @powerNetStored
+  241 sensor :kilo.0:val node1 @powerNetStored
   242 call *label0 :kilo.0*retaddr :kilo.0*retval
   243 set :charge :kilo.0*retval
   244 jump *label25 lessThanEq .START_POWER_REQ 0
 
   246 call *label0 :kilo.0*retaddr :kilo.0*retval
   247 set :req :kilo.0*retval
   248 print "Req "
-    * print :req
+  249 print :kilo.0*retval
   250 print "kJ / "
   251 print :charge
   252 print "kJ. "
 
   258 print "Power "
   259 print :surplus
   260 print "kW, "
-    * print :charge
+  261 print :kilo.0*retval
   262 print "kJ"
   263 print "\n"
   264 # "Function: def update_reactors_desired()"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  265 sensor *tmp71 node1 @powerNetStored
+  266 sensor *tmp72 node1 @powerNetCapacity
   267 op div :update_reactors_desired.0:stored *tmp71 *tmp72
   268 op greaterThan *tmp74 :update_reactors_desired.0:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  269 op add *tmp75 6500 10000
+  270 op greaterThan *tmp76 .AVG_SURPLUS 16500
   271 op land *tmp77 *tmp74 *tmp76
   272 jump *label28 equal *tmp77 false
   273 jump *label30 lessThanEq .REACTORS_DESIRED 2
   274 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  275 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   276 label *label30
   277 label *label31
   278 label *label28
   279 label *label29
   280 op lessThan *tmp81 :update_reactors_desired.0:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  281 op mul *tmp82 10000 0.8
+  282 op lessThan *tmp83 .AVG_SURPLUS 8000
   283 op land *tmp84 *tmp81 *tmp83
   284 jump *label32 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  285 op sub *tmp86 .AVG_SURPLUS 10000
+  286 op idiv *tmp87 *tmp86 6500
   287 op max :update_reactors_desired.0:needed 1 *tmp87
   288 op add *tmp89 :update_reactors_desired.0:needed .REACTORS_DESIRED
   289 op min .REACTORS_DESIRED 5 *tmp89
 
   308 op idiv *tmp93 :kilo.0:val 100
   309 op div :kilo.0*retval *tmp93 10
   310 jump *label36 always
-    * set :kilo.0*retval null
   311 label *label36
   312 return :kilo.0*retaddr
   313 end
 
   320 label *label38
   321 set *tmp97 .FUEL_OFF
   322 label *label39
-    * control config *tmp95 *tmp97
+  323 control config :update_fuel.0:uld_in *tmp97
   324 set *tmp98 :update_fuel.0:uld_out
   325 jump *label40 notEqual :update_fuel.0:fuel false
   326 set *tmp101 .FUEL
 
   328 label *label40
   329 set *tmp101 .FUEL_OFF
   330 label *label41
-    * control config *tmp98 *tmp101
+  331 control config :update_fuel.0:uld_out *tmp101
   332 label *label37
   333 return :update_fuel.0*retaddr
   334 end
 
   350 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
   351 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
   352 jump *label42 always
-    * set :calc_charge_req.0*retval null
   353 label *label42
   354 return :calc_charge_req.0*retaddr
   355 end
 
   417 set :calc_charge_req.0:time :start_reactor.0:t_startup
   418 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
   419 set :start_reactor.0:charge_req :calc_charge_req.0*retval
-    * op sub *tmp153 :start_reactor.0:charge :start_reactor.0:charge_req
+  420 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
   421 op lessThan *tmp154 *tmp153 .PWR_ABORT
   422 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
   423 op land *tmp156 *tmp154 *tmp155
 
   433 print :start_reactor.0:time_left
   434 print " "
   435 print "secs, req "
-    * print :start_reactor.0:charge_req
+  436 print :calc_charge_req.0*retval
   437 print "J"
   438 print "\n"
   439 label *label61
 
   536 label *label77
   537 set :start_reactor.0*retval :start_reactor.0:supply_fuel
   538 jump *label45 always
-    * set :start_reactor.0*retval null
   539 label *label45
   540 return :start_reactor.0*retaddr
   541 end
 
   559 control enabled reactor5 false
   560 set :check_radar.0*retval true
   561 jump *label78 always
-    * set *tmp207 null
   562 jump *label80 always
   563 label *label79
   564 control enabled projector1 false
   565 control enabled projector2 false
   566 set :check_radar.0*retval false
   567 jump *label78 always
-    * set *tmp207 null
   568 label *label80
-    * set :check_radar.0*retval *tmp207
+  569 set :check_radar.0*retval null
   570 label *label78
   571 return :check_radar.0*retaddr
   572 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar.0:unit cyclone1
    52 call *label4 :check_radar.0*retaddr :check_radar.0*retval
-    * set :emerg_shutdown :check_radar.0*retval
    53 # "Function: def check_manual_shutdown()"
    54 op notEqual *tmp9 switch1 null
    55 sensor *tmp10 switch1 @enabled
 
   146 op or *tmp30 :fuel_1 :fuel_2
   147 op or *tmp31 *tmp30 :fuel_many
   148 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast.0:reactors_fueled *tmp31
-    * set :throttle_blast.0:emerg_shutdown :emerg_shutdown
   149 sensor *tmp33 node1 @powerNetStored
   150 op floor :throttle_blast.0:charge *tmp33
   151 sensor *tmp35 node1 @powerNetIn
 
   182 print :throttle_blast.0:fuel_stored
   183 print " "
   184 print "/ "
-    * print .FUEL_LIMIT_LOW
+  185 print 150
   186 print " "
   187 print "(due to emergency)"
   188 print "\n"
 
   193 print :throttle_blast.0:fuel_stored
   194 print " "
   195 print "/ "
-    * print .FUEL_LIMIT
+  196 print 800
   197 print "\"
   198 print "n"
   199 label *label19
 
   201 op lessThan *tmp32 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   202 jump *label13 always
   203 label *label13
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   204 jump *label20 equal *tmp32 false
   205 set *tmp51 @pyratite
   206 jump *label21 always
   207 label *label20
   208 set *tmp51 @scrap
   209 label *label21
-    * control config .ULD_MIXER *tmp51
+  210 control config unloader7 *tmp51
   211 # "Function: def diff_generators()"
   212 sensor *tmp53 node1 @powerNetStored
   213 sensor *tmp54 node1 @powerNetCapacity
 
   235 jump *label25 lessThanEq .START_POWER_REQ 0
   236 set :kilo.0:val .START_POWER_REQ
   237 call *label0 :kilo.0*retaddr :kilo.0*retval
-    * set :req :kilo.0*retval
   238 print "Req "
   239 print :kilo.0*retval
   240 print "kJ / "
 
   256 sensor *tmp72 node1 @powerNetCapacity
   257 op div :update_reactors_desired.0:stored *tmp71 *tmp72
   258 op greaterThan *tmp74 :update_reactors_desired.0:stored 0.98
-    * op add *tmp75 6500 10000
   259 op greaterThan *tmp76 .AVG_SURPLUS 16500
   260 op land *tmp77 *tmp74 *tmp76
   261 jump *label28 equal *tmp77 false
 
   267 label *label28
   268 label *label29
   269 op lessThan *tmp81 :update_reactors_desired.0:stored 0.8
-    * op mul *tmp82 10000 0.8
   270 op lessThan *tmp83 .AVG_SURPLUS 8000
   271 op land *tmp84 *tmp81 *tmp83
   272 jump *label32 equal *tmp84 false
 
   301 end
   302 label *label1
   303 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp95 :update_fuel.0:uld_in
   304 jump *label38 equal :update_fuel.0:fuel false
   305 set *tmp97 .FUEL
   306 jump *label39 always
 
   308 set *tmp97 .FUEL_OFF
   309 label *label39
   310 control config :update_fuel.0:uld_in *tmp97
-    * set *tmp98 :update_fuel.0:uld_out
   311 jump *label40 notEqual :update_fuel.0:fuel false
   312 set *tmp101 .FUEL
   313 jump *label41 always
 
   402 set :calc_charge_req.0:reactor :start_reactor.0:reactor
   403 set :calc_charge_req.0:time :start_reactor.0:t_startup
   404 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
-    * set :start_reactor.0:charge_req :calc_charge_req.0*retval
   405 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
   406 op lessThan *tmp154 *tmp153 .PWR_ABORT
   407 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
 
   551 set :check_radar.0*retval false
   552 jump *label78 always
   553 label *label80
-    * set :check_radar.0*retval null
   554 label *label78
   555 return :check_radar.0*retaddr
   556 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, Loop Hoisting, pass 1, iteration 1:
 
    35 set .RET_T_STARTUP *tmp5
    36 set .REACTORS_DESIRED 5
    37 set .AVG_SURPLUS 500
+   38 set :start_reactor.0:reactor_num 1
+   39 set :start_reactor.0:reactor_num 2
+   40 set :start_reactor.0:reactor_num 3
+   41 set :start_reactor.0:reactor_num 4
+   42 set :start_reactor.0:reactor_num 5
    43 label *label7
    44 set .ULD_IN_1 unloader1
    45 set .ULD_OUT_1 unloader2
 
    89 call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
    90 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
    91 set :start_reactor.0:reactor reactor1
-    * set :start_reactor.0:reactor_num 1
    92 set :start_reactor.0:emerg_shutdown :emerg_shutdown
    93 set :start_reactor.0:fuel_on :fuel_1
    94 set :start_reactor.0:t_startup :t_startup1
 
   100 set :update_fuel.0:uld_out unloader2
   101 call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
   102 set :start_reactor.0:reactor reactor2
-    * set :start_reactor.0:reactor_num 2
   103 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   104 set :start_reactor.0:fuel_on :fuel_2
   105 set :start_reactor.0:t_startup :t_startup2
 
   114 call *label4 :check_radar.0*retaddr :check_radar.0*retval
   115 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
   116 set :start_reactor.0:reactor reactor3
-    * set :start_reactor.0:reactor_num 3
   117 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   118 set :start_reactor.0:fuel_on :fuel_3
   119 set :start_reactor.0:t_startup :t_startup3
 
   121 set :fuel_3 :start_reactor.0*retval
   122 set :t_startup3 .RET_T_STARTUP
   123 set :start_reactor.0:reactor reactor4
-    * set :start_reactor.0:reactor_num 4
   124 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   125 set :start_reactor.0:fuel_on :fuel_4
   126 set :start_reactor.0:t_startup :t_startup4
 
   128 set :fuel_4 :start_reactor.0*retval
   129 set :t_startup4 .RET_T_STARTUP
   130 set :start_reactor.0:reactor reactor5
-    * set :start_reactor.0:reactor_num 5
   131 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   132 set :start_reactor.0:fuel_on :fuel_5
   133 set :start_reactor.0:t_startup :t_startup5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   199 jump *label13 always
   200 label *label13
   201 jump *label20 equal *tmp32 false
-    * set *tmp51 @pyratite
+  202 control config unloader7 @pyratite
   203 jump *label21 always
   204 label *label20
-    * set *tmp51 @scrap
+  205 control config unloader7 @scrap
   206 label *label21
-    * control config unloader7 *tmp51
   207 # "Function: def diff_generators()"
   208 sensor *tmp53 node1 @powerNetStored
   209 sensor *tmp54 node1 @powerNetCapacity
 
   298 label *label1
   299 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   300 jump *label38 equal :update_fuel.0:fuel false
-    * set *tmp97 .FUEL
+  301 control config :update_fuel.0:uld_in .FUEL
   302 jump *label39 always
   303 label *label38
-    * set *tmp97 .FUEL_OFF
+  304 control config :update_fuel.0:uld_in .FUEL_OFF
   305 label *label39
-    * control config :update_fuel.0:uld_in *tmp97
   306 jump *label40 notEqual :update_fuel.0:fuel false
-    * set *tmp101 .FUEL
+  307 control config :update_fuel.0:uld_out .FUEL
   308 jump *label41 always
   309 label *label40
-    * set *tmp101 .FUEL_OFF
+  310 control config :update_fuel.0:uld_out .FUEL_OFF
   311 label *label41
-    * control config :update_fuel.0:uld_out *tmp101
   312 label *label37
   313 return :update_fuel.0*retaddr
   314 end

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   223 label *label24
   224 label *label22
   225 set :kilo.0:val .AVG_SURPLUS
-    * call *label0 :kilo.0*retaddr :kilo.0*retval
+  226 label *label81
+  227 # "Function: def kilo(in val)"
+  228 op idiv *tmp93 :kilo.0:val 100
+  229 op div :kilo.0*retval *tmp93 10
+  230 jump *label82 always
+  231 label *label82
   232 set :surplus :kilo.0*retval
   233 sensor :kilo.0:val node1 @powerNetStored
-    * call *label0 :kilo.0*retaddr :kilo.0*retval
+  234 label *label83
+  235 # "Function: def kilo(in val)"
+  236 op idiv *tmp93 :kilo.0:val 100
+  237 op div :kilo.0*retval *tmp93 10
+  238 jump *label84 always
+  239 label *label84
   240 set :charge :kilo.0*retval
   241 jump *label25 lessThanEq .START_POWER_REQ 0
   242 set :kilo.0:val .START_POWER_REQ
-    * call *label0 :kilo.0*retaddr :kilo.0*retval
+  243 label *label85
+  244 # "Function: def kilo(in val)"
+  245 op idiv *tmp93 :kilo.0:val 100
+  246 op div :kilo.0*retval *tmp93 10
+  247 jump *label86 always
+  248 label *label86
   249 print "Req "
   250 print :kilo.0*retval
   251 print "kJ / "
 
   302 jump *label7 always
   303 label *label9
   304 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo.0:val 100
-    * op div :kilo.0*retval *tmp93 10
-    * jump *label36 always
-    * label *label36
-    * return :kilo.0*retaddr
-    * end
   305 label *label1
   306 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   307 jump *label38 equal :update_fuel.0:fuel false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-4 instructions):
 
    35 set .RET_T_STARTUP *tmp5
    36 set .REACTORS_DESIRED 5
    37 set .AVG_SURPLUS 500
-    * set :start_reactor.0:reactor_num 1
-    * set :start_reactor.0:reactor_num 2
-    * set :start_reactor.0:reactor_num 3
-    * set :start_reactor.0:reactor_num 4
    38 set :start_reactor.0:reactor_num 5
    39 label *label7
    40 set .ULD_IN_1 unloader1
 
   221 set :kilo.0:val .AVG_SURPLUS
   222 label *label81
   223 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo.0:val 100
+  224 op idiv *tmp93 .AVG_SURPLUS 100
   225 op div :kilo.0*retval *tmp93 10
   226 jump *label82 always
   227 label *label82
 
   238 set :kilo.0:val .START_POWER_REQ
   239 label *label85
   240 # "Function: def kilo(in val)"
-    * op idiv *tmp93 :kilo.0:val 100
+  241 op idiv *tmp93 .START_POWER_REQ 100
   242 op div :kilo.0*retval *tmp93 10
   243 jump *label86 always
   244 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   218 control enabled generator2 true
   219 label *label24
   220 label *label22
-    * set :kilo.0:val .AVG_SURPLUS
   221 label *label81
   222 # "Function: def kilo(in val)"
   223 op idiv *tmp93 .AVG_SURPLUS 100
 
   234 label *label84
   235 set :charge :kilo.0*retval
   236 jump *label25 lessThanEq .START_POWER_REQ 0
-    * set :kilo.0:val .START_POWER_REQ
   237 label *label85
   238 # "Function: def kilo(in val)"
   239 op idiv *tmp93 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1 (+8 instructions):
 
    94 set :update_fuel.0:fuel :start_reactor.0*retval
    95 set :update_fuel.0:uld_in unloader1
    96 set :update_fuel.0:uld_out unloader2
-    * call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
+   97 label *label87
+   98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   99 jump *label88 equal :update_fuel.0:fuel false
+  100 control config :update_fuel.0:uld_in .FUEL
+  101 jump *label89 always
+  102 label *label88
+  103 control config :update_fuel.0:uld_in .FUEL_OFF
+  104 label *label89
+  105 jump *label90 notEqual :update_fuel.0:fuel false
+  106 control config :update_fuel.0:uld_out .FUEL
+  107 jump *label91 always
+  108 label *label90
+  109 control config :update_fuel.0:uld_out .FUEL_OFF
+  110 label *label91
+  111 label *label92
   112 set :start_reactor.0:reactor reactor2
   113 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   114 set :start_reactor.0:fuel_on :fuel_2
 
   119 set :update_fuel.0:fuel :start_reactor.0*retval
   120 set :update_fuel.0:uld_in unloader3
   121 set :update_fuel.0:uld_out unloader4
-    * call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
+  122 label *label93
+  123 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  124 jump *label94 equal :update_fuel.0:fuel false
+  125 control config :update_fuel.0:uld_in .FUEL
+  126 jump *label95 always
+  127 label *label94
+  128 control config :update_fuel.0:uld_in .FUEL_OFF
+  129 label *label95
+  130 jump *label96 notEqual :update_fuel.0:fuel false
+  131 control config :update_fuel.0:uld_out .FUEL
+  132 jump *label97 always
+  133 label *label96
+  134 control config :update_fuel.0:uld_out .FUEL_OFF
+  135 label *label97
+  136 label *label98
   137 set :check_radar.0:unit cyclone1
   138 call *label4 :check_radar.0*retaddr :check_radar.0*retval
   139 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
 
   163 set :update_fuel.0:fuel :fuel_many
   164 set :update_fuel.0:uld_in unloader5
   165 set :update_fuel.0:uld_out unloader6
-    * call *label1 :update_fuel.0*retaddr :update_fuel.0*retval
+  166 label *label99
+  167 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  168 jump *label100 equal :update_fuel.0:fuel false
+  169 control config :update_fuel.0:uld_in .FUEL
+  170 jump *label101 always
+  171 label *label100
+  172 control config :update_fuel.0:uld_in .FUEL_OFF
+  173 label *label101
+  174 jump *label102 notEqual :update_fuel.0:fuel false
+  175 control config :update_fuel.0:uld_out .FUEL
+  176 jump *label103 always
+  177 label *label102
+  178 control config :update_fuel.0:uld_out .FUEL_OFF
+  179 label *label103
+  180 label *label104
   181 op or *tmp30 :fuel_1 :fuel_2
   182 op or *tmp31 *tmp30 :fuel_many
   183 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   338 jump *label7 always
   339 label *label9
   340 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label38 equal :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_in .FUEL
-    * jump *label39 always
-    * label *label38
-    * control config :update_fuel.0:uld_in .FUEL_OFF
-    * label *label39
-    * jump *label40 notEqual :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_out .FUEL
-    * jump *label41 always
-    * label *label40
-    * control config :update_fuel.0:uld_out .FUEL_OFF
-    * label *label41
-    * label *label37
-    * return :update_fuel.0*retaddr
-    * end
   341 label *label2
   342 # "Function: def calc_charge_req(in reactor, in time)"
   343 op sub *tmp102 @tick :calc_charge_req.0:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    96 set :update_fuel.0:uld_out unloader2
    97 label *label87
    98 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label88 equal :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_in .FUEL
+   99 jump *label88 equal :start_reactor.0*retval false
+  100 control config unloader1 @blast-compound
   101 jump *label89 always
   102 label *label88
-    * control config :update_fuel.0:uld_in .FUEL_OFF
+  103 control config unloader1 @scrap
   104 label *label89
-    * jump *label90 notEqual :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_out .FUEL
+  105 jump *label90 notEqual :start_reactor.0*retval false
+  106 control config unloader2 @blast-compound
   107 jump *label91 always
   108 label *label90
-    * control config :update_fuel.0:uld_out .FUEL_OFF
+  109 control config unloader2 @scrap
   110 label *label91
   111 label *label92
   112 set :start_reactor.0:reactor reactor2
 
   121 set :update_fuel.0:uld_out unloader4
   122 label *label93
   123 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label94 equal :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_in .FUEL
+  124 jump *label94 equal :start_reactor.0*retval false
+  125 control config unloader3 @blast-compound
   126 jump *label95 always
   127 label *label94
-    * control config :update_fuel.0:uld_in .FUEL_OFF
+  128 control config unloader3 @scrap
   129 label *label95
-    * jump *label96 notEqual :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_out .FUEL
+  130 jump *label96 notEqual :start_reactor.0*retval false
+  131 control config unloader4 @blast-compound
   132 jump *label97 always
   133 label *label96
-    * control config :update_fuel.0:uld_out .FUEL_OFF
+  134 control config unloader4 @scrap
   135 label *label97
   136 label *label98
   137 set :check_radar.0:unit cyclone1
 
   165 set :update_fuel.0:uld_out unloader6
   166 label *label99
   167 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label100 equal :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_in .FUEL
+  168 jump *label100 equal :fuel_many false
+  169 control config unloader5 @blast-compound
   170 jump *label101 always
   171 label *label100
-    * control config :update_fuel.0:uld_in .FUEL_OFF
+  172 control config unloader5 @scrap
   173 label *label101
-    * jump *label102 notEqual :update_fuel.0:fuel false
-    * control config :update_fuel.0:uld_out .FUEL
+  174 jump *label102 notEqual :fuel_many false
+  175 control config unloader6 @blast-compound
   176 jump *label103 always
   177 label *label102
-    * control config :update_fuel.0:uld_out .FUEL_OFF
+  178 control config unloader6 @scrap
   179 label *label103
   180 label *label104
   181 op or *tmp30 :fuel_1 :fuel_2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    91 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
    92 set :fuel_1 :start_reactor.0*retval
    93 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel.0:fuel :start_reactor.0*retval
-    * set :update_fuel.0:uld_in unloader1
-    * set :update_fuel.0:uld_out unloader2
    94 label *label87
    95 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    96 jump *label88 equal :start_reactor.0*retval false
 
   113 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
   114 set :fuel_2 :start_reactor.0*retval
   115 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel.0:fuel :start_reactor.0*retval
-    * set :update_fuel.0:uld_in unloader3
-    * set :update_fuel.0:uld_out unloader4
   116 label *label93
   117 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   118 jump *label94 equal :start_reactor.0*retval false
 
   154 set :t_startup5 .RET_T_STARTUP
   155 op or *tmp27 :fuel_3 :fuel_4
   156 op or :fuel_many *tmp27 :start_reactor.0*retval
-    * set :update_fuel.0:fuel :fuel_many
-    * set :update_fuel.0:uld_in unloader5
-    * set :update_fuel.0:uld_out unloader6
   157 label *label99
   158 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   159 jump *label100 equal :fuel_many false

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    47 set .CONTAINER vault1
    48 set .NODE node1
    49 set :check_radar.0:unit cyclone1
-    * call *label4 :check_radar.0*retaddr :check_radar.0*retval
+   50 label *label105
+   51 # "Function: def check_radar(in unit)"
+   52 radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
+   53 jump *label106 equal :check_radar.0:enemy_found null
+   54 control enabled projector1 true
+   55 control enabled projector2 true
+   56 control config .ULD_IN_1 .FUEL_OFF
+   57 control config .ULD_OUT_1 .FUEL
+   58 control config .ULD_IN_2 .FUEL_OFF
+   59 control config .ULD_OUT_2 .FUEL
+   60 control config .ULD_IN_MANY .FUEL_OFF
+   61 control config .ULD_OUT_MANY .FUEL
+   62 control config .ULD_MIXER .FUEL_OFF
+   63 control enabled reactor1 false
+   64 control enabled reactor2 false
+   65 control enabled reactor3 false
+   66 control enabled reactor4 false
+   67 control enabled reactor5 false
+   68 set :check_radar.0*retval true
+   69 jump *label108 always
+   70 jump *label107 always
+   71 label *label106
+   72 control enabled projector1 false
+   73 control enabled projector2 false
+   74 set :check_radar.0*retval false
+   75 jump *label108 always
+   76 label *label107
+   77 label *label108
    78 # "Function: def check_manual_shutdown()"
    79 op notEqual *tmp9 switch1 null
    80 sensor *tmp10 switch1 @enabled
 
   156 label *label97
   157 label *label98
   158 set :check_radar.0:unit cyclone1
-    * call *label4 :check_radar.0*retaddr :check_radar.0*retval
+  159 label *label109
+  160 # "Function: def check_radar(in unit)"
+  161 radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
+  162 jump *label110 equal :check_radar.0:enemy_found null
+  163 control enabled projector1 true
+  164 control enabled projector2 true
+  165 control config .ULD_IN_1 .FUEL_OFF
+  166 control config .ULD_OUT_1 .FUEL
+  167 control config .ULD_IN_2 .FUEL_OFF
+  168 control config .ULD_OUT_2 .FUEL
+  169 control config .ULD_IN_MANY .FUEL_OFF
+  170 control config .ULD_OUT_MANY .FUEL
+  171 control config .ULD_MIXER .FUEL_OFF
+  172 control enabled reactor1 false
+  173 control enabled reactor2 false
+  174 control enabled reactor3 false
+  175 control enabled reactor4 false
+  176 control enabled reactor5 false
+  177 set :check_radar.0*retval true
+  178 jump *label112 always
+  179 jump *label111 always
+  180 label *label110
+  181 control enabled projector1 false
+  182 control enabled projector2 false
+  183 set :check_radar.0*retval false
+  184 jump *label112 always
+  185 label *label111
+  186 label *label112
   187 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
   188 set :start_reactor.0:reactor reactor3
   189 set :start_reactor.0:emerg_shutdown :emerg_shutdown
 
   589 label *label45
   590 return :start_reactor.0*retaddr
   591 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
-    * jump *label79 equal :check_radar.0:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar.0*retval true
-    * jump *label78 always
-    * jump *label80 always
-    * label *label79
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar.0*retval false
-    * jump *label78 always
-    * label *label80
-    * label *label78
-    * return :check_radar.0*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    49 set :check_radar.0:unit cyclone1
    50 label *label105
    51 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
+   52 radar enemy any any health cyclone1 1 :check_radar.0:enemy_found
    53 jump *label106 equal :check_radar.0:enemy_found null
    54 control enabled projector1 true
    55 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   56 control config unloader1 @scrap
+   57 control config unloader2 @blast-compound
+   58 control config unloader3 @scrap
+   59 control config unloader4 @blast-compound
+   60 control config unloader5 @scrap
+   61 control config unloader6 @blast-compound
+   62 control config unloader7 @scrap
    63 control enabled reactor1 false
    64 control enabled reactor2 false
    65 control enabled reactor3 false
 
   158 set :check_radar.0:unit cyclone1
   159 label *label109
   160 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar.0:unit 1 :check_radar.0:enemy_found
+  161 radar enemy any any health cyclone1 1 :check_radar.0:enemy_found
   162 jump *label110 equal :check_radar.0:enemy_found null
   163 control enabled projector1 true
   164 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  165 control config unloader1 @scrap
+  166 control config unloader2 @blast-compound
+  167 control config unloader3 @scrap
+  168 control config unloader4 @blast-compound
+  169 control config unloader5 @scrap
+  170 control config unloader6 @blast-compound
+  171 control config unloader7 @scrap
   172 control enabled reactor1 false
   173 control enabled reactor2 false
   174 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    35 set .AVG_SURPLUS 500
    36 set :start_reactor.0:reactor_num 5
    37 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    38 set .CONTAINER vault1
    39 set .NODE node1
-    * set :check_radar.0:unit cyclone1
    40 label *label105
    41 # "Function: def check_radar(in unit)"
    42 radar enemy any any health cyclone1 1 :check_radar.0:enemy_found
 
   145 control config unloader4 @scrap
   146 label *label97
   147 label *label98
-    * set :check_radar.0:unit cyclone1
   148 label *label109
   149 # "Function: def check_radar(in unit)"
   150 radar enemy any any health cyclone1 1 :check_radar.0:enemy_found

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    83 op or :emerg_shutdown :check_radar.0*retval *tmp8
    84 set :calc_charge_req.0:reactor reactor1
    85 set :calc_charge_req.0:time :t_startup1
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+   86 label *label113
+   87 # "Function: def calc_charge_req(in reactor, in time)"
+   88 op sub *tmp102 @tick :calc_charge_req.0:time
+   89 op idiv :calc_charge_req.0:secs *tmp102 60
+   90 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+   91 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+   92 op equal *tmp106 *tmp105 false
+   93 op or *tmp107 *tmp104 *tmp106
+   94 jump *label114 equal *tmp107 false
+   95 set :calc_charge_req.0*retval 0
+   96 jump *label116 always
+   97 label *label114
+   98 label *label115
+   99 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  100 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  101 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  102 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  103 jump *label116 always
+  104 label *label116
   105 set .START_POWER_REQ :calc_charge_req.0*retval
   106 set :calc_charge_req.0:reactor reactor2
   107 set :calc_charge_req.0:time :t_startup2
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+  108 label *label117
+  109 # "Function: def calc_charge_req(in reactor, in time)"
+  110 op sub *tmp102 @tick :calc_charge_req.0:time
+  111 op idiv :calc_charge_req.0:secs *tmp102 60
+  112 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  113 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  114 op equal *tmp106 *tmp105 false
+  115 op or *tmp107 *tmp104 *tmp106
+  116 jump *label118 equal *tmp107 false
+  117 set :calc_charge_req.0*retval 0
+  118 jump *label120 always
+  119 label *label118
+  120 label *label119
+  121 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  122 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  123 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  124 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  125 jump *label120 always
+  126 label *label120
   127 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
   128 set :calc_charge_req.0:reactor reactor3
   129 set :calc_charge_req.0:time :t_startup3
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+  130 label *label121
+  131 # "Function: def calc_charge_req(in reactor, in time)"
+  132 op sub *tmp102 @tick :calc_charge_req.0:time
+  133 op idiv :calc_charge_req.0:secs *tmp102 60
+  134 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  135 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  136 op equal *tmp106 *tmp105 false
+  137 op or *tmp107 *tmp104 *tmp106
+  138 jump *label122 equal *tmp107 false
+  139 set :calc_charge_req.0*retval 0
+  140 jump *label124 always
+  141 label *label122
+  142 label *label123
+  143 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  144 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  145 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  146 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  147 jump *label124 always
+  148 label *label124
   149 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
   150 set :calc_charge_req.0:reactor reactor4
   151 set :calc_charge_req.0:time :t_startup4
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+  152 label *label125
+  153 # "Function: def calc_charge_req(in reactor, in time)"
+  154 op sub *tmp102 @tick :calc_charge_req.0:time
+  155 op idiv :calc_charge_req.0:secs *tmp102 60
+  156 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  157 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  158 op equal *tmp106 *tmp105 false
+  159 op or *tmp107 *tmp104 *tmp106
+  160 jump *label126 equal *tmp107 false
+  161 set :calc_charge_req.0*retval 0
+  162 jump *label128 always
+  163 label *label126
+  164 label *label127
+  165 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  166 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  167 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  168 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  169 jump *label128 always
+  170 label *label128
   171 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
   172 set :calc_charge_req.0:reactor reactor5
   173 set :calc_charge_req.0:time :t_startup5
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+  174 label *label129
+  175 # "Function: def calc_charge_req(in reactor, in time)"
+  176 op sub *tmp102 @tick :calc_charge_req.0:time
+  177 op idiv :calc_charge_req.0:secs *tmp102 60
+  178 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  179 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  180 op equal *tmp106 *tmp105 false
+  181 op or *tmp107 *tmp104 *tmp106
+  182 jump *label130 equal *tmp107 false
+  183 set :calc_charge_req.0*retval 0
+  184 jump *label132 always
+  185 label *label130
+  186 label *label131
+  187 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  188 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  189 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  190 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  191 jump *label132 always
+  192 label *label132
   193 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
   194 set :start_reactor.0:reactor reactor1
   195 set :start_reactor.0:emerg_shutdown :emerg_shutdown
 
   462 jump *label7 always
   463 label *label9
   464 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
-    * op idiv :calc_charge_req.0:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label43 equal *tmp107 false
-    * set :calc_charge_req.0*retval 0
-    * jump *label42 always
-    * label *label43
-    * label *label44
-    * op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
-    * op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
-    * op idiv :calc_charge_req.0:charge_req *tmp110 0.04
-    * set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
-    * jump *label42 always
-    * label *label42
-    * return :calc_charge_req.0*retaddr
-    * end
   465 label *label3
   466 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   467 set .RET_T_STARTUP :start_reactor.0:t_startup
 
   524 jump *label58 greaterThanEq :start_reactor.0:secs 30
   525 set :calc_charge_req.0:reactor :start_reactor.0:reactor
   526 set :calc_charge_req.0:time :start_reactor.0:t_startup
-    * call *label2 :calc_charge_req.0*retaddr :calc_charge_req.0*retval
+  527 label *label133
+  528 # "Function: def calc_charge_req(in reactor, in time)"
+  529 op sub *tmp102 @tick :calc_charge_req.0:time
+  530 op idiv :calc_charge_req.0:secs *tmp102 60
+  531 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  532 sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  533 op equal *tmp106 *tmp105 false
+  534 op or *tmp107 *tmp104 *tmp106
+  535 jump *label134 equal *tmp107 false
+  536 set :calc_charge_req.0*retval 0
+  537 jump *label136 always
+  538 label *label134
+  539 label *label135
+  540 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  541 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  542 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  543 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  544 jump *label136 always
+  545 label *label136
   546 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
   547 op lessThan *tmp154 *tmp153 .PWR_ABORT
   548 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    85 set :calc_charge_req.0:time :t_startup1
    86 label *label113
    87 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+   88 op sub *tmp102 @tick :t_startup1
    89 op idiv :calc_charge_req.0:secs *tmp102 60
    90 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+   91 sensor *tmp105 reactor1 @enabled
    92 op equal *tmp106 *tmp105 false
    93 op or *tmp107 *tmp104 *tmp106
    94 jump *label114 equal *tmp107 false
 
   107 set :calc_charge_req.0:time :t_startup2
   108 label *label117
   109 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+  110 op sub *tmp102 @tick :t_startup2
   111 op idiv :calc_charge_req.0:secs *tmp102 60
   112 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  113 sensor *tmp105 reactor2 @enabled
   114 op equal *tmp106 *tmp105 false
   115 op or *tmp107 *tmp104 *tmp106
   116 jump *label118 equal *tmp107 false
 
   129 set :calc_charge_req.0:time :t_startup3
   130 label *label121
   131 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+  132 op sub *tmp102 @tick :t_startup3
   133 op idiv :calc_charge_req.0:secs *tmp102 60
   134 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  135 sensor *tmp105 reactor3 @enabled
   136 op equal *tmp106 *tmp105 false
   137 op or *tmp107 *tmp104 *tmp106
   138 jump *label122 equal *tmp107 false
 
   151 set :calc_charge_req.0:time :t_startup4
   152 label *label125
   153 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+  154 op sub *tmp102 @tick :t_startup4
   155 op idiv :calc_charge_req.0:secs *tmp102 60
   156 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  157 sensor *tmp105 reactor4 @enabled
   158 op equal *tmp106 *tmp105 false
   159 op or *tmp107 *tmp104 *tmp106
   160 jump *label126 equal *tmp107 false
 
   173 set :calc_charge_req.0:time :t_startup5
   174 label *label129
   175 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+  176 op sub *tmp102 @tick :t_startup5
   177 op idiv :calc_charge_req.0:secs *tmp102 60
   178 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  179 sensor *tmp105 reactor5 @enabled
   180 op equal *tmp106 *tmp105 false
   181 op or *tmp107 *tmp104 *tmp106
   182 jump *label130 equal *tmp107 false
 
   526 set :calc_charge_req.0:time :start_reactor.0:t_startup
   527 label *label133
   528 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :calc_charge_req.0:time
+  529 op sub *tmp102 @tick :start_reactor.0:t_startup
   530 op idiv :calc_charge_req.0:secs *tmp102 60
   531 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :calc_charge_req.0:reactor @enabled
+  532 sensor *tmp105 :start_reactor.0:reactor @enabled
   533 op equal *tmp106 *tmp105 false
   534 op or *tmp107 *tmp104 *tmp106
   535 jump *label134 equal *tmp107 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    81 jump *label10 always
    82 label *label10
    83 op or :emerg_shutdown :check_radar.0*retval *tmp8
-    * set :calc_charge_req.0:reactor reactor1
-    * set :calc_charge_req.0:time :t_startup1
    84 label *label113
    85 # "Function: def calc_charge_req(in reactor, in time)"
    86 op sub *tmp102 @tick :t_startup1
 
   101 jump *label116 always
   102 label *label116
   103 set .START_POWER_REQ :calc_charge_req.0*retval
-    * set :calc_charge_req.0:reactor reactor2
-    * set :calc_charge_req.0:time :t_startup2
   104 label *label117
   105 # "Function: def calc_charge_req(in reactor, in time)"
   106 op sub *tmp102 @tick :t_startup2
 
   121 jump *label120 always
   122 label *label120
   123 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
-    * set :calc_charge_req.0:reactor reactor3
-    * set :calc_charge_req.0:time :t_startup3
   124 label *label121
   125 # "Function: def calc_charge_req(in reactor, in time)"
   126 op sub *tmp102 @tick :t_startup3
 
   141 jump *label124 always
   142 label *label124
   143 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
-    * set :calc_charge_req.0:reactor reactor4
-    * set :calc_charge_req.0:time :t_startup4
   144 label *label125
   145 # "Function: def calc_charge_req(in reactor, in time)"
   146 op sub *tmp102 @tick :t_startup4
 
   161 jump *label128 always
   162 label *label128
   163 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
-    * set :calc_charge_req.0:reactor reactor5
-    * set :calc_charge_req.0:time :t_startup5
   164 label *label129
   165 # "Function: def calc_charge_req(in reactor, in time)"
   166 op sub *tmp102 @tick :t_startup5
 
   512 jump *label57 always
   513 label *label56
   514 jump *label58 greaterThanEq :start_reactor.0:secs 30
-    * set :calc_charge_req.0:reactor :start_reactor.0:reactor
-    * set :calc_charge_req.0:time :start_reactor.0:t_startup
   515 label *label133
   516 # "Function: def calc_charge_req(in reactor, in time)"
   517 op sub *tmp102 @tick :start_reactor.0:t_startup

Modifications by Inline function call at line 80:14 (+157 instructions):
 
   185 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   186 set :start_reactor.0:fuel_on :fuel_1
   187 set :start_reactor.0:t_startup :t_startup1
-    * call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
+  188 label *label137
+  189 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  190 set .RET_T_STARTUP :start_reactor.0:t_startup
+  191 op sub *tmp113 @tick :start_reactor.0:t_startup
+  192 op idiv :start_reactor.0:secs *tmp113 60
+  193 sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  194 set :start_reactor.0:supply_fuel true
+  195 sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
+  196 sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
+  197 sensor *tmp118 .NODE @powerNetStored
+  198 op floor :start_reactor.0:charge *tmp118
+  199 sensor *tmp120 .NODE @powerNetIn
+  200 sensor *tmp121 .NODE @powerNetOut
+  201 op sub *tmp122 *tmp120 *tmp121
+  202 op floor :start_reactor.0:surplus *tmp122
+  203 op mul *tmp124 .AVG_SURPLUS 0.8
+  204 op mul *tmp125 :start_reactor.0:surplus 0.2
+  205 op add .AVG_SURPLUS *tmp124 *tmp125
+  206 sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  207 print "#"
+  208 print :start_reactor.0:reactor_num
+  209 print " "
+  210 print "- "
+  211 jump *label138 equal :start_reactor.0:emerg_shutdown false
+  212 control enabled :start_reactor.0:reactor false
+  213 print "emergency mode"
+  214 print "\n"
+  215 set :start_reactor.0:supply_fuel false
+  216 jump *label171 always
+  217 label *label138
+  218 jump *label157 equal :start_reactor.0:enabled false
+  219 jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  220 control enabled :start_reactor.0:reactor false
+  221 print "STOP unwanted"
+  222 print "\n"
+  223 jump *label156 always
+  224 label *label139
+  225 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
+  226 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
+  227 op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
+  228 op land *tmp139 *tmp136 *tmp138
+  229 jump *label140 equal *tmp139 false
+  230 control enabled :start_reactor.0:reactor false
+  231 print "STOP system fuel low"
+  232 print "\n"
+  233 jump *label155 always
+  234 label *label140
+  235 jump *label141 greaterThan :start_reactor.0:fuel 1
+  236 control enabled :start_reactor.0:reactor false
+  237 print "STOP fuel low"
+  238 print "\n"
+  239 jump *label154 always
+  240 label *label141
+  241 jump *label142 greaterThan :start_reactor.0:cryo .CRYO_ABORT
+  242 control enabled :start_reactor.0:reactor false
+  243 print "STOP out of cryo"
+  244 print "\n"
+  245 jump *label153 always
+  246 label *label142
+  247 jump *label149 greaterThanEq :start_reactor.0:secs 30
+  248 label *label143
+  249 # "Function: def calc_charge_req(in reactor, in time)"
+  250 op sub *tmp102 @tick :start_reactor.0:t_startup
+  251 op idiv :calc_charge_req.0:secs *tmp102 60
+  252 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  253 sensor *tmp105 :start_reactor.0:reactor @enabled
+  254 op equal *tmp106 *tmp105 false
+  255 op or *tmp107 *tmp104 *tmp106
+  256 jump *label144 equal *tmp107 false
+  257 set :calc_charge_req.0*retval 0
+  258 jump *label146 always
+  259 label *label144
+  260 label *label145
+  261 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  262 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  263 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  264 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  265 jump *label146 always
+  266 label *label146
+  267 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
+  268 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  269 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  270 op land *tmp156 *tmp154 *tmp155
+  271 jump *label147 equal *tmp156 false
+  272 control enabled :start_reactor.0:reactor false
+  273 print "START FAIL battery"
+  274 print "\n"
+  275 set :start_reactor.0:supply_fuel false
+  276 jump *label148 always
+  277 label *label147
+  278 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
+  279 print "Starting "
+  280 print :start_reactor.0:time_left
+  281 print " "
+  282 print "secs, req "
+  283 print :calc_charge_req.0*retval
+  284 print "J"
+  285 print "\n"
+  286 label *label148
+  287 jump *label152 always
+  288 label *label149
+  289 op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
+  290 op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  291 op land *tmp163 *tmp161 *tmp162
+  292 jump *label150 equal *tmp163 false
+  293 control enabled :start_reactor.0:reactor false
+  294 print "ABANDON - battery crit"
+  295 print "\n"
+  296 set :start_reactor.0:supply_fuel false
+  297 jump *label151 always
+  298 label *label150
+  299 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
+  300 op div :start_reactor.0:mins :start_reactor.0:mins 10
+  301 print "RUN "
+  302 print :start_reactor.0:mins
+  303 print " "
+  304 print "mins"
+  305 print "\n"
+  306 label *label151
+  307 label *label152
+  308 label *label153
+  309 label *label154
+  310 label *label155
+  311 label *label156
+  312 jump *label170 always
+  313 label *label157
+  314 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
+  315 op sub *tmp170 *tmp169 .PWR_ABORT
+  316 op div *tmp171 *tmp170 .PWR_REQ
+  317 op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
+  318 op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  319 op max :start_reactor.0:flow_units -0.1 *tmp173
+  320 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
+  321 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
+  322 jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  323 print "IDLE"
+  324 print "\n"
+  325 set :start_reactor.0:supply_fuel false
+  326 jump *label169 always
+  327 label *label158
+  328 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
+  329 jump *label159 greaterThanEq *tmp179 1
+  330 op idiv *tmp183 :start_reactor.0:flow_units 0.001
+  331 op div :start_reactor.0:flow *tmp183 10
+  332 op idiv *tmp186 :start_reactor.0:charge_units 0.001
+  333 op div :start_reactor.0:charge *tmp186 10
+  334 print "WAIT power. (%"
+  335 print :start_reactor.0:charge
+  336 print "J + %"
+  337 print :start_reactor.0:flow
+  338 print "W)"
+  339 print "\n"
+  340 set :start_reactor.0:supply_fuel false
+  341 jump *label168 always
+  342 label *label159
+  343 op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
+  344 op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  345 jump *label162 equal *tmp189 false
+  346 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
+  347 jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  348 print "WAIT fuel"
+  349 print "\n"
+  350 jump *label161 always
+  351 label *label160
+  352 print "WAIT system fuel"
+  353 print "\n"
+  354 label *label161
+  355 jump *label167 always
+  356 label *label162
+  357 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
+  358 jump *label163 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  359 print "WAIT buffer fuel"
+  360 print "\n"
+  361 jump *label166 always
+  362 label *label163
+  363 jump *label164 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  364 print "WAIT cryo"
+  365 print "\n"
+  366 jump *label165 always
+  367 label *label164
+  368 print "STARTUP"
+  369 print "\n"
+  370 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  371 control enabled :start_reactor.0:reactor true
+  372 label *label165
+  373 label *label166
+  374 label *label167
+  375 label *label168
+  376 label *label169
+  377 label *label170
+  378 label *label171
+  379 sensor *tmp201 :start_reactor.0:reactor @enabled
+  380 jump *label172 equal :start_reactor.0:enabled *tmp201
+  381 set .RET_T_STARTUP @tick
+  382 label *label172
+  383 label *label173
+  384 set :start_reactor.0*retval :start_reactor.0:supply_fuel
+  385 jump *label174 always
+  386 label *label174
   387 set :fuel_1 :start_reactor.0*retval
   388 set :t_startup1 .RET_T_STARTUP
   389 label *label87

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    30 set :t_startup3 *tmp5
    31 set :t_startup4 *tmp5
    32 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    33 set .REACTORS_DESIRED 5
    34 set .AVG_SURPLUS 500
    35 set :start_reactor.0:reactor_num 5
 
   186 set :start_reactor.0:t_startup :t_startup1
   187 label *label137
   188 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor.0:t_startup
-    * op sub *tmp113 @tick :start_reactor.0:t_startup
+  189 set .RET_T_STARTUP :t_startup1
+  190 op sub *tmp113 @tick :t_startup1
   191 op idiv :start_reactor.0:secs *tmp113 60
-    * sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  192 sensor :start_reactor.0:fuel reactor1 @blast-compound
   193 set :start_reactor.0:supply_fuel true
-    * sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  194 sensor :start_reactor.0:fuel_stored vault1 @blast-compound
+  195 sensor :start_reactor.0:cryo reactor1 @cryofluid
+  196 sensor *tmp118 node1 @powerNetStored
   197 op floor :start_reactor.0:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  198 sensor *tmp120 node1 @powerNetIn
+  199 sensor *tmp121 node1 @powerNetOut
   200 op sub *tmp122 *tmp120 *tmp121
   201 op floor :start_reactor.0:surplus *tmp122
   202 op mul *tmp124 .AVG_SURPLUS 0.8
   203 op mul *tmp125 :start_reactor.0:surplus 0.2
   204 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  205 sensor :start_reactor.0:enabled reactor1 @enabled
   206 print "#"
-    * print :start_reactor.0:reactor_num
+  207 print 5
   208 print " "
   209 print "- "
-    * jump *label138 equal :start_reactor.0:emerg_shutdown false
-    * control enabled :start_reactor.0:reactor false
+  210 jump *label138 equal :emerg_shutdown false
+  211 control enabled reactor1 false
   212 print "emergency mode"
   213 print "\n"
   214 set :start_reactor.0:supply_fuel false
   215 jump *label171 always
   216 label *label138
   217 jump *label157 equal :start_reactor.0:enabled false
-    * jump *label139 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * control enabled :start_reactor.0:reactor false
+  218 jump *label139 greaterThanEq .REACTORS_DESIRED 5
+  219 control enabled reactor1 false
   220 print "STOP unwanted"
   221 print "\n"
   222 jump *label156 always
   223 label *label139
-    * op greaterThan *tmp136 :start_reactor.0:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
-    * op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  224 op greaterThan *tmp136 5 1
+  225 op mul *tmp137 15 5
+  226 op lessThan *tmp138 :start_reactor.0:fuel_stored 75
+  227 op land *tmp139 true *tmp138
   228 jump *label140 equal *tmp139 false
-    * control enabled :start_reactor.0:reactor false
+  229 control enabled reactor1 false
   230 print "STOP system fuel low"
   231 print "\n"
   232 jump *label155 always
   233 label *label140
   234 jump *label141 greaterThan :start_reactor.0:fuel 1
-    * control enabled :start_reactor.0:reactor false
+  235 control enabled reactor1 false
   236 print "STOP fuel low"
   237 print "\n"
   238 jump *label154 always
   239 label *label141
-    * jump *label142 greaterThan :start_reactor.0:cryo .CRYO_ABORT
-    * control enabled :start_reactor.0:reactor false
+  240 jump *label142 greaterThan :start_reactor.0:cryo 1
+  241 control enabled reactor1 false
   242 print "STOP out of cryo"
   243 print "\n"
   244 jump *label153 always
 
   246 jump *label149 greaterThanEq :start_reactor.0:secs 30
   247 label *label143
   248 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor.0:t_startup
+  249 op sub *tmp102 @tick :t_startup1
   250 op idiv :calc_charge_req.0:secs *tmp102 60
   251 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :start_reactor.0:reactor @enabled
+  252 sensor *tmp105 reactor1 @enabled
   253 op equal *tmp106 *tmp105 false
   254 op or *tmp107 *tmp104 *tmp106
   255 jump *label144 equal *tmp107 false
 
   264 jump *label146 always
   265 label *label146
   266 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  267 op lessThan *tmp154 *tmp153 5000
+  268 op lessThan *tmp155 :start_reactor.0:surplus -500
   269 op land *tmp156 *tmp154 *tmp155
   270 jump *label147 equal *tmp156 false
-    * control enabled :start_reactor.0:reactor false
+  271 control enabled reactor1 false
   272 print "START FAIL battery"
   273 print "\n"
   274 set :start_reactor.0:supply_fuel false
 
   285 label *label148
   286 jump *label152 always
   287 label *label149
-    * op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  288 op lessThan *tmp161 :start_reactor.0:charge 2000
+  289 op lessThan *tmp162 :start_reactor.0:surplus -500
   290 op land *tmp163 *tmp161 *tmp162
   291 jump *label150 equal *tmp163 false
-    * control enabled :start_reactor.0:reactor false
+  292 control enabled reactor1 false
   293 print "ABANDON - battery crit"
   294 print "\n"
   295 set :start_reactor.0:supply_fuel false
 
   311 jump *label170 always
   312 label *label157
   313 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  314 op sub *tmp170 *tmp169 5000
+  315 op div *tmp171 *tmp170 23000
+  316 op mul :start_reactor.0:charge_units *tmp171 0.6
+  317 op div *tmp173 :start_reactor.0:surplus 2000
   318 op max :start_reactor.0:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
-    * op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  319 op mul *tmp175 2 5
+  320 op add :start_reactor.0:cryo_req 3 10
+  321 jump *label158 greaterThanEq .REACTORS_DESIRED 5
   322 print "IDLE"
   323 print "\n"
   324 set :start_reactor.0:supply_fuel false
 
   339 set :start_reactor.0:supply_fuel false
   340 jump *label168 always
   341 label *label159
-    * op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  342 op lessThan *tmp188 :start_reactor.0:fuel 10
+  343 op land *tmp189 :fuel_1 *tmp188
   344 jump *label162 equal *tmp189 false
   345 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
-    * jump *label160 lessThanEq *tmp191 .FUEL_REQ
+  346 jump *label160 lessThanEq *tmp191 10
   347 print "WAIT fuel"
   348 print "\n"
   349 jump *label161 always
 
   353 label *label161
   354 jump *label167 always
   355 label *label162
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
-    * jump *label163 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  356 op mul *tmp194 45 5
+  357 jump *label163 greaterThanEq :start_reactor.0:fuel_stored 225
   358 print "WAIT buffer fuel"
   359 print "\n"
   360 jump *label166 always
   361 label *label163
-    * jump *label164 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  362 jump *label164 greaterThanEq :start_reactor.0:cryo 13
   363 print "WAIT cryo"
   364 print "\n"
   365 jump *label165 always
   366 label *label164
   367 print "STARTUP"
   368 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor.0:reactor true
+  369 op add .START_POWER_REQ .START_POWER_REQ 23000
+  370 control enabled reactor1 true
   371 label *label165
   372 label *label166
   373 label *label167
 
   375 label *label169
   376 label *label170
   377 label *label171
-    * sensor *tmp201 :start_reactor.0:reactor @enabled
+  378 sensor *tmp201 reactor1 @enabled
   379 jump *label172 equal :start_reactor.0:enabled *tmp201
   380 set .RET_T_STARTUP @tick
   381 label *label172
 
   383 set :start_reactor.0*retval :start_reactor.0:supply_fuel
   384 jump *label174 always
   385 label *label174
-    * set :fuel_1 :start_reactor.0*retval
+  386 set :fuel_1 :start_reactor.0:supply_fuel
   387 set :t_startup1 .RET_T_STARTUP
   388 label *label87
   389 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label88 equal :start_reactor.0*retval false
+  390 jump *label88 equal :start_reactor.0:supply_fuel false
   391 control config unloader1 @blast-compound
   392 jump *label89 always
   393 label *label88
   394 control config unloader1 @scrap
   395 label *label89
-    * jump *label90 notEqual :start_reactor.0*retval false
+  396 jump *label90 notEqual :start_reactor.0:supply_fuel false
   397 control config unloader2 @blast-compound
   398 jump *label91 always
   399 label *label90

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   180 jump *label132 always
   181 label *label132
   182 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
-    * set :start_reactor.0:reactor reactor1
-    * set :start_reactor.0:emerg_shutdown :emerg_shutdown
-    * set :start_reactor.0:fuel_on :fuel_1
-    * set :start_reactor.0:t_startup :t_startup1
   183 label *label137
   184 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   185 set .RET_T_STARTUP :t_startup1
 
   309 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
   310 op sub *tmp170 *tmp169 5000
   311 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor.0:charge_units *tmp171 0.6
+  312 op div :start_reactor.0:charge_units *tmp170 38333.333333333336
   313 op div *tmp173 :start_reactor.0:surplus 2000
   314 op max :start_reactor.0:flow_units -0.1 *tmp173
   315 op mul *tmp175 2 5
 
   376 set .RET_T_STARTUP @tick
   377 label *label172
   378 label *label173
-    * set :start_reactor.0*retval :start_reactor.0:supply_fuel
   379 jump *label174 always
   380 label *label174
   381 set :fuel_1 :start_reactor.0:supply_fuel

Modifications by Inline function call at line 84:14 (+157 instructions):
 
   399 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   400 set :start_reactor.0:fuel_on :fuel_2
   401 set :start_reactor.0:t_startup :t_startup2
-    * call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
+  402 label *label175
+  403 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  404 set .RET_T_STARTUP :start_reactor.0:t_startup
+  405 op sub *tmp113 @tick :start_reactor.0:t_startup
+  406 op idiv :start_reactor.0:secs *tmp113 60
+  407 sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  408 set :start_reactor.0:supply_fuel true
+  409 sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
+  410 sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
+  411 sensor *tmp118 .NODE @powerNetStored
+  412 op floor :start_reactor.0:charge *tmp118
+  413 sensor *tmp120 .NODE @powerNetIn
+  414 sensor *tmp121 .NODE @powerNetOut
+  415 op sub *tmp122 *tmp120 *tmp121
+  416 op floor :start_reactor.0:surplus *tmp122
+  417 op mul *tmp124 .AVG_SURPLUS 0.8
+  418 op mul *tmp125 :start_reactor.0:surplus 0.2
+  419 op add .AVG_SURPLUS *tmp124 *tmp125
+  420 sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  421 print "#"
+  422 print :start_reactor.0:reactor_num
+  423 print " "
+  424 print "- "
+  425 jump *label176 equal :start_reactor.0:emerg_shutdown false
+  426 control enabled :start_reactor.0:reactor false
+  427 print "emergency mode"
+  428 print "\n"
+  429 set :start_reactor.0:supply_fuel false
+  430 jump *label209 always
+  431 label *label176
+  432 jump *label195 equal :start_reactor.0:enabled false
+  433 jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  434 control enabled :start_reactor.0:reactor false
+  435 print "STOP unwanted"
+  436 print "\n"
+  437 jump *label194 always
+  438 label *label177
+  439 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
+  440 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
+  441 op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
+  442 op land *tmp139 *tmp136 *tmp138
+  443 jump *label178 equal *tmp139 false
+  444 control enabled :start_reactor.0:reactor false
+  445 print "STOP system fuel low"
+  446 print "\n"
+  447 jump *label193 always
+  448 label *label178
+  449 jump *label179 greaterThan :start_reactor.0:fuel 1
+  450 control enabled :start_reactor.0:reactor false
+  451 print "STOP fuel low"
+  452 print "\n"
+  453 jump *label192 always
+  454 label *label179
+  455 jump *label180 greaterThan :start_reactor.0:cryo .CRYO_ABORT
+  456 control enabled :start_reactor.0:reactor false
+  457 print "STOP out of cryo"
+  458 print "\n"
+  459 jump *label191 always
+  460 label *label180
+  461 jump *label187 greaterThanEq :start_reactor.0:secs 30
+  462 label *label181
+  463 # "Function: def calc_charge_req(in reactor, in time)"
+  464 op sub *tmp102 @tick :start_reactor.0:t_startup
+  465 op idiv :calc_charge_req.0:secs *tmp102 60
+  466 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  467 sensor *tmp105 :start_reactor.0:reactor @enabled
+  468 op equal *tmp106 *tmp105 false
+  469 op or *tmp107 *tmp104 *tmp106
+  470 jump *label182 equal *tmp107 false
+  471 set :calc_charge_req.0*retval 0
+  472 jump *label184 always
+  473 label *label182
+  474 label *label183
+  475 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  476 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  477 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  478 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  479 jump *label184 always
+  480 label *label184
+  481 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
+  482 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  483 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  484 op land *tmp156 *tmp154 *tmp155
+  485 jump *label185 equal *tmp156 false
+  486 control enabled :start_reactor.0:reactor false
+  487 print "START FAIL battery"
+  488 print "\n"
+  489 set :start_reactor.0:supply_fuel false
+  490 jump *label186 always
+  491 label *label185
+  492 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
+  493 print "Starting "
+  494 print :start_reactor.0:time_left
+  495 print " "
+  496 print "secs, req "
+  497 print :calc_charge_req.0*retval
+  498 print "J"
+  499 print "\n"
+  500 label *label186
+  501 jump *label190 always
+  502 label *label187
+  503 op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
+  504 op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  505 op land *tmp163 *tmp161 *tmp162
+  506 jump *label188 equal *tmp163 false
+  507 control enabled :start_reactor.0:reactor false
+  508 print "ABANDON - battery crit"
+  509 print "\n"
+  510 set :start_reactor.0:supply_fuel false
+  511 jump *label189 always
+  512 label *label188
+  513 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
+  514 op div :start_reactor.0:mins :start_reactor.0:mins 10
+  515 print "RUN "
+  516 print :start_reactor.0:mins
+  517 print " "
+  518 print "mins"
+  519 print "\n"
+  520 label *label189
+  521 label *label190
+  522 label *label191
+  523 label *label192
+  524 label *label193
+  525 label *label194
+  526 jump *label208 always
+  527 label *label195
+  528 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
+  529 op sub *tmp170 *tmp169 .PWR_ABORT
+  530 op div *tmp171 *tmp170 .PWR_REQ
+  531 op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
+  532 op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  533 op max :start_reactor.0:flow_units -0.1 *tmp173
+  534 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
+  535 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
+  536 jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  537 print "IDLE"
+  538 print "\n"
+  539 set :start_reactor.0:supply_fuel false
+  540 jump *label207 always
+  541 label *label196
+  542 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
+  543 jump *label197 greaterThanEq *tmp179 1
+  544 op idiv *tmp183 :start_reactor.0:flow_units 0.001
+  545 op div :start_reactor.0:flow *tmp183 10
+  546 op idiv *tmp186 :start_reactor.0:charge_units 0.001
+  547 op div :start_reactor.0:charge *tmp186 10
+  548 print "WAIT power. (%"
+  549 print :start_reactor.0:charge
+  550 print "J + %"
+  551 print :start_reactor.0:flow
+  552 print "W)"
+  553 print "\n"
+  554 set :start_reactor.0:supply_fuel false
+  555 jump *label206 always
+  556 label *label197
+  557 op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
+  558 op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  559 jump *label200 equal *tmp189 false
+  560 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
+  561 jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  562 print "WAIT fuel"
+  563 print "\n"
+  564 jump *label199 always
+  565 label *label198
+  566 print "WAIT system fuel"
+  567 print "\n"
+  568 label *label199
+  569 jump *label205 always
+  570 label *label200
+  571 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
+  572 jump *label201 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  573 print "WAIT buffer fuel"
+  574 print "\n"
+  575 jump *label204 always
+  576 label *label201
+  577 jump *label202 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  578 print "WAIT cryo"
+  579 print "\n"
+  580 jump *label203 always
+  581 label *label202
+  582 print "STARTUP"
+  583 print "\n"
+  584 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  585 control enabled :start_reactor.0:reactor true
+  586 label *label203
+  587 label *label204
+  588 label *label205
+  589 label *label206
+  590 label *label207
+  591 label *label208
+  592 label *label209
+  593 sensor *tmp201 :start_reactor.0:reactor @enabled
+  594 jump *label210 equal :start_reactor.0:enabled *tmp201
+  595 set .RET_T_STARTUP @tick
+  596 label *label210
+  597 label *label211
+  598 set :start_reactor.0*retval :start_reactor.0:supply_fuel
+  599 jump *label212 always
+  600 label *label212
   601 set :fuel_2 :start_reactor.0*retval
   602 set :t_startup2 .RET_T_STARTUP
   603 label *label93

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   401 set :start_reactor.0:t_startup :t_startup2
   402 label *label175
   403 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor.0:t_startup
-    * op sub *tmp113 @tick :start_reactor.0:t_startup
+  404 set .RET_T_STARTUP :t_startup2
+  405 op sub *tmp113 @tick :t_startup2
   406 op idiv :start_reactor.0:secs *tmp113 60
-    * sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  407 sensor :start_reactor.0:fuel reactor2 @blast-compound
   408 set :start_reactor.0:supply_fuel true
-    * sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  409 sensor :start_reactor.0:fuel_stored vault1 @blast-compound
+  410 sensor :start_reactor.0:cryo reactor2 @cryofluid
+  411 sensor *tmp118 node1 @powerNetStored
   412 op floor :start_reactor.0:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  413 sensor *tmp120 node1 @powerNetIn
+  414 sensor *tmp121 node1 @powerNetOut
   415 op sub *tmp122 *tmp120 *tmp121
   416 op floor :start_reactor.0:surplus *tmp122
   417 op mul *tmp124 .AVG_SURPLUS 0.8
   418 op mul *tmp125 :start_reactor.0:surplus 0.2
   419 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  420 sensor :start_reactor.0:enabled reactor2 @enabled
   421 print "#"
-    * print :start_reactor.0:reactor_num
+  422 print 5
   423 print " "
   424 print "- "
-    * jump *label176 equal :start_reactor.0:emerg_shutdown false
-    * control enabled :start_reactor.0:reactor false
+  425 jump *label176 equal :emerg_shutdown false
+  426 control enabled reactor2 false
   427 print "emergency mode"
   428 print "\n"
   429 set :start_reactor.0:supply_fuel false
   430 jump *label209 always
   431 label *label176
   432 jump *label195 equal :start_reactor.0:enabled false
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * control enabled :start_reactor.0:reactor false
+  433 jump *label177 greaterThanEq .REACTORS_DESIRED 5
+  434 control enabled reactor2 false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label194 always
   438 label *label177
-    * op greaterThan *tmp136 :start_reactor.0:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
-    * op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  439 op greaterThan *tmp136 5 1
+  440 op mul *tmp137 15 5
+  441 op lessThan *tmp138 :start_reactor.0:fuel_stored 75
+  442 op land *tmp139 true *tmp138
   443 jump *label178 equal *tmp139 false
-    * control enabled :start_reactor.0:reactor false
+  444 control enabled reactor2 false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label193 always
   448 label *label178
   449 jump *label179 greaterThan :start_reactor.0:fuel 1
-    * control enabled :start_reactor.0:reactor false
+  450 control enabled reactor2 false
   451 print "STOP fuel low"
   452 print "\n"
   453 jump *label192 always
   454 label *label179
-    * jump *label180 greaterThan :start_reactor.0:cryo .CRYO_ABORT
-    * control enabled :start_reactor.0:reactor false
+  455 jump *label180 greaterThan :start_reactor.0:cryo 1
+  456 control enabled reactor2 false
   457 print "STOP out of cryo"
   458 print "\n"
   459 jump *label191 always
 
   461 jump *label187 greaterThanEq :start_reactor.0:secs 30
   462 label *label181
   463 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor.0:t_startup
+  464 op sub *tmp102 @tick :t_startup2
   465 op idiv :calc_charge_req.0:secs *tmp102 60
   466 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :start_reactor.0:reactor @enabled
+  467 sensor *tmp105 reactor2 @enabled
   468 op equal *tmp106 *tmp105 false
   469 op or *tmp107 *tmp104 *tmp106
   470 jump *label182 equal *tmp107 false
 
   479 jump *label184 always
   480 label *label184
   481 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  482 op lessThan *tmp154 *tmp153 5000
+  483 op lessThan *tmp155 :start_reactor.0:surplus -500
   484 op land *tmp156 *tmp154 *tmp155
   485 jump *label185 equal *tmp156 false
-    * control enabled :start_reactor.0:reactor false
+  486 control enabled reactor2 false
   487 print "START FAIL battery"
   488 print "\n"
   489 set :start_reactor.0:supply_fuel false
 
   500 label *label186
   501 jump *label190 always
   502 label *label187
-    * op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  503 op lessThan *tmp161 :start_reactor.0:charge 2000
+  504 op lessThan *tmp162 :start_reactor.0:surplus -500
   505 op land *tmp163 *tmp161 *tmp162
   506 jump *label188 equal *tmp163 false
-    * control enabled :start_reactor.0:reactor false
+  507 control enabled reactor2 false
   508 print "ABANDON - battery crit"
   509 print "\n"
   510 set :start_reactor.0:supply_fuel false
 
   526 jump *label208 always
   527 label *label195
   528 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  529 op sub *tmp170 *tmp169 5000
+  530 op div *tmp171 *tmp170 23000
+  531 op mul :start_reactor.0:charge_units *tmp171 0.6
+  532 op div *tmp173 :start_reactor.0:surplus 2000
   533 op max :start_reactor.0:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
-    * op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  534 op mul *tmp175 2 5
+  535 op add :start_reactor.0:cryo_req 3 10
+  536 jump *label196 greaterThanEq .REACTORS_DESIRED 5
   537 print "IDLE"
   538 print "\n"
   539 set :start_reactor.0:supply_fuel false
 
   554 set :start_reactor.0:supply_fuel false
   555 jump *label206 always
   556 label *label197
-    * op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  557 op lessThan *tmp188 :start_reactor.0:fuel 10
+  558 op land *tmp189 :fuel_2 *tmp188
   559 jump *label200 equal *tmp189 false
   560 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
-    * jump *label198 lessThanEq *tmp191 .FUEL_REQ
+  561 jump *label198 lessThanEq *tmp191 10
   562 print "WAIT fuel"
   563 print "\n"
   564 jump *label199 always
 
   568 label *label199
   569 jump *label205 always
   570 label *label200
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
-    * jump *label201 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  571 op mul *tmp194 45 5
+  572 jump *label201 greaterThanEq :start_reactor.0:fuel_stored 225
   573 print "WAIT buffer fuel"
   574 print "\n"
   575 jump *label204 always
   576 label *label201
-    * jump *label202 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  577 jump *label202 greaterThanEq :start_reactor.0:cryo 13
   578 print "WAIT cryo"
   579 print "\n"
   580 jump *label203 always
   581 label *label202
   582 print "STARTUP"
   583 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor.0:reactor true
+  584 op add .START_POWER_REQ .START_POWER_REQ 23000
+  585 control enabled reactor2 true
   586 label *label203
   587 label *label204
   588 label *label205
 
   590 label *label207
   591 label *label208
   592 label *label209
-    * sensor *tmp201 :start_reactor.0:reactor @enabled
+  593 sensor *tmp201 reactor2 @enabled
   594 jump *label210 equal :start_reactor.0:enabled *tmp201
   595 set .RET_T_STARTUP @tick
   596 label *label210
 
   598 set :start_reactor.0*retval :start_reactor.0:supply_fuel
   599 jump *label212 always
   600 label *label212
-    * set :fuel_2 :start_reactor.0*retval
+  601 set :fuel_2 :start_reactor.0:supply_fuel
   602 set :t_startup2 .RET_T_STARTUP
   603 label *label93
   604 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label94 equal :start_reactor.0*retval false
+  605 jump *label94 equal :start_reactor.0:supply_fuel false
   606 control config unloader3 @blast-compound
   607 jump *label95 always
   608 label *label94
   609 control config unloader3 @scrap
   610 label *label95
-    * jump *label96 notEqual :start_reactor.0*retval false
+  611 jump *label96 notEqual :start_reactor.0:supply_fuel false
   612 control config unloader4 @blast-compound
   613 jump *label97 always
   614 label *label96

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   395 control config unloader2 @scrap
   396 label *label91
   397 label *label92
-    * set :start_reactor.0:reactor reactor2
-    * set :start_reactor.0:emerg_shutdown :emerg_shutdown
-    * set :start_reactor.0:fuel_on :fuel_2
-    * set :start_reactor.0:t_startup :t_startup2
   398 label *label175
   399 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   400 set .RET_T_STARTUP :t_startup2
 
   524 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
   525 op sub *tmp170 *tmp169 5000
   526 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor.0:charge_units *tmp171 0.6
+  527 op div :start_reactor.0:charge_units *tmp170 38333.333333333336
   528 op div *tmp173 :start_reactor.0:surplus 2000
   529 op max :start_reactor.0:flow_units -0.1 *tmp173
   530 op mul *tmp175 2 5
 
   591 set .RET_T_STARTUP @tick
   592 label *label210
   593 label *label211
-    * set :start_reactor.0*retval :start_reactor.0:supply_fuel
   594 jump *label212 always
   595 label *label212
   596 set :fuel_2 :start_reactor.0:supply_fuel

Modifications by Inline function call at line 89:14 (+157 instructions):
 
   643 set :start_reactor.0:emerg_shutdown :emerg_shutdown
   644 set :start_reactor.0:fuel_on :fuel_3
   645 set :start_reactor.0:t_startup :t_startup3
-    * call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
+  646 label *label213
+  647 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  648 set .RET_T_STARTUP :start_reactor.0:t_startup
+  649 op sub *tmp113 @tick :start_reactor.0:t_startup
+  650 op idiv :start_reactor.0:secs *tmp113 60
+  651 sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  652 set :start_reactor.0:supply_fuel true
+  653 sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
+  654 sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
+  655 sensor *tmp118 .NODE @powerNetStored
+  656 op floor :start_reactor.0:charge *tmp118
+  657 sensor *tmp120 .NODE @powerNetIn
+  658 sensor *tmp121 .NODE @powerNetOut
+  659 op sub *tmp122 *tmp120 *tmp121
+  660 op floor :start_reactor.0:surplus *tmp122
+  661 op mul *tmp124 .AVG_SURPLUS 0.8
+  662 op mul *tmp125 :start_reactor.0:surplus 0.2
+  663 op add .AVG_SURPLUS *tmp124 *tmp125
+  664 sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  665 print "#"
+  666 print :start_reactor.0:reactor_num
+  667 print " "
+  668 print "- "
+  669 jump *label214 equal :start_reactor.0:emerg_shutdown false
+  670 control enabled :start_reactor.0:reactor false
+  671 print "emergency mode"
+  672 print "\n"
+  673 set :start_reactor.0:supply_fuel false
+  674 jump *label247 always
+  675 label *label214
+  676 jump *label233 equal :start_reactor.0:enabled false
+  677 jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  678 control enabled :start_reactor.0:reactor false
+  679 print "STOP unwanted"
+  680 print "\n"
+  681 jump *label232 always
+  682 label *label215
+  683 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
+  684 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
+  685 op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
+  686 op land *tmp139 *tmp136 *tmp138
+  687 jump *label216 equal *tmp139 false
+  688 control enabled :start_reactor.0:reactor false
+  689 print "STOP system fuel low"
+  690 print "\n"
+  691 jump *label231 always
+  692 label *label216
+  693 jump *label217 greaterThan :start_reactor.0:fuel 1
+  694 control enabled :start_reactor.0:reactor false
+  695 print "STOP fuel low"
+  696 print "\n"
+  697 jump *label230 always
+  698 label *label217
+  699 jump *label218 greaterThan :start_reactor.0:cryo .CRYO_ABORT
+  700 control enabled :start_reactor.0:reactor false
+  701 print "STOP out of cryo"
+  702 print "\n"
+  703 jump *label229 always
+  704 label *label218
+  705 jump *label225 greaterThanEq :start_reactor.0:secs 30
+  706 label *label219
+  707 # "Function: def calc_charge_req(in reactor, in time)"
+  708 op sub *tmp102 @tick :start_reactor.0:t_startup
+  709 op idiv :calc_charge_req.0:secs *tmp102 60
+  710 op greaterThan *tmp104 :calc_charge_req.0:secs 30
+  711 sensor *tmp105 :start_reactor.0:reactor @enabled
+  712 op equal *tmp106 *tmp105 false
+  713 op or *tmp107 *tmp104 *tmp106
+  714 jump *label220 equal *tmp107 false
+  715 set :calc_charge_req.0*retval 0
+  716 jump *label222 always
+  717 label *label220
+  718 label *label221
+  719 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
+  720 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
+  721 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
+  722 set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+  723 jump *label222 always
+  724 label *label222
+  725 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
+  726 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  727 op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  728 op land *tmp156 *tmp154 *tmp155
+  729 jump *label223 equal *tmp156 false
+  730 control enabled :start_reactor.0:reactor false
+  731 print "START FAIL battery"
+  732 print "\n"
+  733 set :start_reactor.0:supply_fuel false
+  734 jump *label224 always
+  735 label *label223
+  736 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
+  737 print "Starting "
+  738 print :start_reactor.0:time_left
+  739 print " "
+  740 print "secs, req "
+  741 print :calc_charge_req.0*retval
+  742 print "J"
+  743 print "\n"
+  744 label *label224
+  745 jump *label228 always
+  746 label *label225
+  747 op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
+  748 op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  749 op land *tmp163 *tmp161 *tmp162
+  750 jump *label226 equal *tmp163 false
+  751 control enabled :start_reactor.0:reactor false
+  752 print "ABANDON - battery crit"
+  753 print "\n"
+  754 set :start_reactor.0:supply_fuel false
+  755 jump *label227 always
+  756 label *label226
+  757 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
+  758 op div :start_reactor.0:mins :start_reactor.0:mins 10
+  759 print "RUN "
+  760 print :start_reactor.0:mins
+  761 print " "
+  762 print "mins"
+  763 print "\n"
+  764 label *label227
+  765 label *label228
+  766 label *label229
+  767 label *label230
+  768 label *label231
+  769 label *label232
+  770 jump *label246 always
+  771 label *label233
+  772 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
+  773 op sub *tmp170 *tmp169 .PWR_ABORT
+  774 op div *tmp171 *tmp170 .PWR_REQ
+  775 op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
+  776 op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  777 op max :start_reactor.0:flow_units -0.1 *tmp173
+  778 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
+  779 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
+  780 jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  781 print "IDLE"
+  782 print "\n"
+  783 set :start_reactor.0:supply_fuel false
+  784 jump *label245 always
+  785 label *label234
+  786 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
+  787 jump *label235 greaterThanEq *tmp179 1
+  788 op idiv *tmp183 :start_reactor.0:flow_units 0.001
+  789 op div :start_reactor.0:flow *tmp183 10
+  790 op idiv *tmp186 :start_reactor.0:charge_units 0.001
+  791 op div :start_reactor.0:charge *tmp186 10
+  792 print "WAIT power. (%"
+  793 print :start_reactor.0:charge
+  794 print "J + %"
+  795 print :start_reactor.0:flow
+  796 print "W)"
+  797 print "\n"
+  798 set :start_reactor.0:supply_fuel false
+  799 jump *label244 always
+  800 label *label235
+  801 op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
+  802 op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  803 jump *label238 equal *tmp189 false
+  804 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
+  805 jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  806 print "WAIT fuel"
+  807 print "\n"
+  808 jump *label237 always
+  809 label *label236
+  810 print "WAIT system fuel"
+  811 print "\n"
+  812 label *label237
+  813 jump *label243 always
+  814 label *label238
+  815 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
+  816 jump *label239 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  817 print "WAIT buffer fuel"
+  818 print "\n"
+  819 jump *label242 always
+  820 label *label239
+  821 jump *label240 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  822 print "WAIT cryo"
+  823 print "\n"
+  824 jump *label241 always
+  825 label *label240
+  826 print "STARTUP"
+  827 print "\n"
+  828 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  829 control enabled :start_reactor.0:reactor true
+  830 label *label241
+  831 label *label242
+  832 label *label243
+  833 label *label244
+  834 label *label245
+  835 label *label246
+  836 label *label247
+  837 sensor *tmp201 :start_reactor.0:reactor @enabled
+  838 jump *label248 equal :start_reactor.0:enabled *tmp201
+  839 set .RET_T_STARTUP @tick
+  840 label *label248
+  841 label *label249
+  842 set :start_reactor.0*retval :start_reactor.0:supply_fuel
+  843 jump *label250 always
+  844 label *label250
   845 set :fuel_3 :start_reactor.0*retval
   846 set :t_startup3 .RET_T_STARTUP
   847 set :start_reactor.0:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   645 set :start_reactor.0:t_startup :t_startup3
   646 label *label213
   647 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor.0:t_startup
-    * op sub *tmp113 @tick :start_reactor.0:t_startup
+  648 set .RET_T_STARTUP :t_startup3
+  649 op sub *tmp113 @tick :t_startup3
   650 op idiv :start_reactor.0:secs *tmp113 60
-    * sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
+  651 sensor :start_reactor.0:fuel reactor3 @blast-compound
   652 set :start_reactor.0:supply_fuel true
-    * sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  653 sensor :start_reactor.0:fuel_stored vault1 @blast-compound
+  654 sensor :start_reactor.0:cryo reactor3 @cryofluid
+  655 sensor *tmp118 node1 @powerNetStored
   656 op floor :start_reactor.0:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  657 sensor *tmp120 node1 @powerNetIn
+  658 sensor *tmp121 node1 @powerNetOut
   659 op sub *tmp122 *tmp120 *tmp121
   660 op floor :start_reactor.0:surplus *tmp122
   661 op mul *tmp124 .AVG_SURPLUS 0.8
   662 op mul *tmp125 :start_reactor.0:surplus 0.2
   663 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
+  664 sensor :start_reactor.0:enabled reactor3 @enabled
   665 print "#"
-    * print :start_reactor.0:reactor_num
+  666 print 5
   667 print " "
   668 print "- "
-    * jump *label214 equal :start_reactor.0:emerg_shutdown false
-    * control enabled :start_reactor.0:reactor false
+  669 jump *label214 equal :emerg_shutdown false
+  670 control enabled reactor3 false
   671 print "emergency mode"
   672 print "\n"
   673 set :start_reactor.0:supply_fuel false
   674 jump *label247 always
   675 label *label214
   676 jump *label233 equal :start_reactor.0:enabled false
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * control enabled :start_reactor.0:reactor false
+  677 jump *label215 greaterThanEq .REACTORS_DESIRED 5
+  678 control enabled reactor3 false
   679 print "STOP unwanted"
   680 print "\n"
   681 jump *label232 always
   682 label *label215
-    * op greaterThan *tmp136 :start_reactor.0:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
-    * op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  683 op greaterThan *tmp136 5 1
+  684 op mul *tmp137 15 5
+  685 op lessThan *tmp138 :start_reactor.0:fuel_stored 75
+  686 op land *tmp139 true *tmp138
   687 jump *label216 equal *tmp139 false
-    * control enabled :start_reactor.0:reactor false
+  688 control enabled reactor3 false
   689 print "STOP system fuel low"
   690 print "\n"
   691 jump *label231 always
   692 label *label216
   693 jump *label217 greaterThan :start_reactor.0:fuel 1
-    * control enabled :start_reactor.0:reactor false
+  694 control enabled reactor3 false
   695 print "STOP fuel low"
   696 print "\n"
   697 jump *label230 always
   698 label *label217
-    * jump *label218 greaterThan :start_reactor.0:cryo .CRYO_ABORT
-    * control enabled :start_reactor.0:reactor false
+  699 jump *label218 greaterThan :start_reactor.0:cryo 1
+  700 control enabled reactor3 false
   701 print "STOP out of cryo"
   702 print "\n"
   703 jump *label229 always
 
   705 jump *label225 greaterThanEq :start_reactor.0:secs 30
   706 label *label219
   707 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp102 @tick :start_reactor.0:t_startup
+  708 op sub *tmp102 @tick :t_startup3
   709 op idiv :calc_charge_req.0:secs *tmp102 60
   710 op greaterThan *tmp104 :calc_charge_req.0:secs 30
-    * sensor *tmp105 :start_reactor.0:reactor @enabled
+  711 sensor *tmp105 reactor3 @enabled
   712 op equal *tmp106 *tmp105 false
   713 op or *tmp107 *tmp104 *tmp106
   714 jump *label220 equal *tmp107 false
 
   723 jump *label222 always
   724 label *label222
   725 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
+  726 op lessThan *tmp154 *tmp153 5000
+  727 op lessThan *tmp155 :start_reactor.0:surplus -500
   728 op land *tmp156 *tmp154 *tmp155
   729 jump *label223 equal *tmp156 false
-    * control enabled :start_reactor.0:reactor false
+  730 control enabled reactor3 false
   731 print "START FAIL battery"
   732 print "\n"
   733 set :start_reactor.0:supply_fuel false
 
   744 label *label224
   745 jump *label228 always
   746 label *label225
-    * op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
+  747 op lessThan *tmp161 :start_reactor.0:charge 2000
+  748 op lessThan *tmp162 :start_reactor.0:surplus -500
   749 op land *tmp163 *tmp161 *tmp162
   750 jump *label226 equal *tmp163 false
-    * control enabled :start_reactor.0:reactor false
+  751 control enabled reactor3 false
   752 print "ABANDON - battery crit"
   753 print "\n"
   754 set :start_reactor.0:supply_fuel false
 
   770 jump *label246 always
   771 label *label233
   772 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
+  773 op sub *tmp170 *tmp169 5000
+  774 op div *tmp171 *tmp170 23000
+  775 op mul :start_reactor.0:charge_units *tmp171 0.6
+  776 op div *tmp173 :start_reactor.0:surplus 2000
   777 op max :start_reactor.0:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
-    * op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
+  778 op mul *tmp175 2 5
+  779 op add :start_reactor.0:cryo_req 3 10
+  780 jump *label234 greaterThanEq .REACTORS_DESIRED 5
   781 print "IDLE"
   782 print "\n"
   783 set :start_reactor.0:supply_fuel false
 
   798 set :start_reactor.0:supply_fuel false
   799 jump *label244 always
   800 label *label235
-    * op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor.0:fuel_on *tmp188
+  801 op lessThan *tmp188 :start_reactor.0:fuel 10
+  802 op land *tmp189 :fuel_3 *tmp188
   803 jump *label238 equal *tmp189 false
   804 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
-    * jump *label236 lessThanEq *tmp191 .FUEL_REQ
+  805 jump *label236 lessThanEq *tmp191 10
   806 print "WAIT fuel"
   807 print "\n"
   808 jump *label237 always
 
   812 label *label237
   813 jump *label243 always
   814 label *label238
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
-    * jump *label239 greaterThanEq :start_reactor.0:fuel_stored *tmp194
+  815 op mul *tmp194 45 5
+  816 jump *label239 greaterThanEq :start_reactor.0:fuel_stored 225
   817 print "WAIT buffer fuel"
   818 print "\n"
   819 jump *label242 always
   820 label *label239
-    * jump *label240 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
+  821 jump *label240 greaterThanEq :start_reactor.0:cryo 13
   822 print "WAIT cryo"
   823 print "\n"
   824 jump *label241 always
   825 label *label240
   826 print "STARTUP"
   827 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor.0:reactor true
+  828 op add .START_POWER_REQ .START_POWER_REQ 23000
+  829 control enabled reactor3 true
   830 label *label241
   831 label *label242
   832 label *label243
 
   834 label *label245
   835 label *label246
   836 label *label247
-    * sensor *tmp201 :start_reactor.0:reactor @enabled
+  837 sensor *tmp201 reactor3 @enabled
   838 jump *label248 equal :start_reactor.0:enabled *tmp201
   839 set .RET_T_STARTUP @tick
   840 label *label248
 
   842 set :start_reactor.0*retval :start_reactor.0:supply_fuel
   843 jump *label250 always
   844 label *label250
-    * set :fuel_3 :start_reactor.0*retval
+  845 set :fuel_3 :start_reactor.0:supply_fuel
   846 set :t_startup3 .RET_T_STARTUP
   847 set :start_reactor.0:reactor reactor4
   848 set :start_reactor.0:emerg_shutdown :emerg_shutdown

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   639 label *label111
   640 label *label112
   641 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
-    * set :start_reactor.0:reactor reactor3
-    * set :start_reactor.0:emerg_shutdown :emerg_shutdown
-    * set :start_reactor.0:fuel_on :fuel_3
-    * set :start_reactor.0:t_startup :t_startup3
   642 label *label213
   643 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   644 set .RET_T_STARTUP :t_startup3
 
   768 op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
   769 op sub *tmp170 *tmp169 5000
   770 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor.0:charge_units *tmp171 0.6
+  771 op div :start_reactor.0:charge_units *tmp170 38333.333333333336
   772 op div *tmp173 :start_reactor.0:surplus 2000
   773 op max :start_reactor.0:flow_units -0.1 *tmp173
   774 op mul *tmp175 2 5
 
   835 set .RET_T_STARTUP @tick
   836 label *label248
   837 label *label249
-    * set :start_reactor.0*retval :start_reactor.0:supply_fuel
   838 jump *label250 always
   839 label *label250
   840 set :fuel_3 :start_reactor.0:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    61 control enabled projector1 false
    62 control enabled projector2 false
    63 set :check_radar.0*retval false
-    * jump *label108 always
    64 label *label107
    65 label *label108
    66 # "Function: def check_manual_shutdown()"
 
   375 set .RET_T_STARTUP @tick
   376 label *label172
   377 label *label173
-    * jump *label174 always
   378 label *label174
   379 set :fuel_1 :start_reactor.0:supply_fuel
   380 set :t_startup1 .RET_T_STARTUP
 
   589 set .RET_T_STARTUP @tick
   590 label *label210
   591 label *label211
-    * jump *label212 always
   592 label *label212
   593 set :fuel_2 :start_reactor.0:supply_fuel
   594 set :t_startup2 .RET_T_STARTUP
 
   632 control enabled projector1 false
   633 control enabled projector2 false
   634 set :check_radar.0*retval false
-    * jump *label112 always
   635 label *label111
   636 label *label112
   637 op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
 
   831 set .RET_T_STARTUP @tick
   832 label *label248
   833 label *label249
-    * jump *label250 always
   834 label *label250
   835 set :fuel_3 :start_reactor.0:supply_fuel
   836 set :t_startup3 .RET_T_STARTUP
 
   921 label *label19
   922 label *label15
   923 op lessThan *tmp32 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
-    * jump *label13 always
   924 label *label13
   925 jump *label20 equal *tmp32 false
   926 control config unloader7 @pyratite
 
   950 # "Function: def kilo(in val)"
   951 op idiv *tmp93 .AVG_SURPLUS 100
   952 op div :kilo.0*retval *tmp93 10
-    * jump *label82 always
   953 label *label82
   954 set :surplus :kilo.0*retval
   955 sensor :kilo.0:val node1 @powerNetStored
 
   957 # "Function: def kilo(in val)"
   958 op idiv *tmp93 :kilo.0:val 100
   959 op div :kilo.0*retval *tmp93 10
-    * jump *label84 always
   960 label *label84
   961 set :charge :kilo.0*retval
   962 jump *label25 lessThanEq .START_POWER_REQ 0
 
   964 # "Function: def kilo(in val)"
   965 op idiv *tmp93 .START_POWER_REQ 100
   966 op div :kilo.0*retval *tmp93 10
-    * jump *label86 always
   967 label *label86
   968 print "Req "
   969 print :kilo.0*retval
 
  1218 label *label76
  1219 label *label77
  1220 set :start_reactor.0*retval :start_reactor.0:supply_fuel
-    * jump *label45 always
  1221 label *label45
  1222 return :start_reactor.0*retaddr
  1223 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-4 instructions):
 
    88 op equal *tmp106 *tmp105 false
    89 op or *tmp107 *tmp104 *tmp106
    90 jump *label114 equal *tmp107 false
-    * set :calc_charge_req.0*retval 0
+   91 set .START_POWER_REQ 0
    92 jump *label116 always
    93 label *label114
    94 label *label115
    95 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
    96 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
    97 op idiv :calc_charge_req.0:charge_req *tmp110 0.04
-    * set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+   98 set .START_POWER_REQ :calc_charge_req.0:charge_req
    99 jump *label116 always
   100 label *label116
-    * set .START_POWER_REQ :calc_charge_req.0*retval
   101 label *label117
   102 # "Function: def calc_charge_req(in reactor, in time)"
   103 op sub *tmp102 @tick :t_startup2
 
   948 label *label81
   949 # "Function: def kilo(in val)"
   950 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo.0*retval *tmp93 10
+  951 op div :surplus *tmp93 10
   952 label *label82
-    * set :surplus :kilo.0*retval
   953 sensor :kilo.0:val node1 @powerNetStored
   954 label *label83
   955 # "Function: def kilo(in val)"
 
  1025 op sub *tmp113 @tick :start_reactor.0:t_startup
  1026 op idiv :start_reactor.0:secs *tmp113 60
  1027 sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
-    * set :start_reactor.0:supply_fuel true
+ 1028 set :start_reactor.0*retval true
  1029 sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
  1030 sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
  1031 sensor *tmp118 .NODE @powerNetStored
 
  1046 control enabled :start_reactor.0:reactor false
  1047 print "emergency mode"
  1048 print "\n"
-    * set :start_reactor.0:supply_fuel false
+ 1049 set :start_reactor.0*retval false
  1050 jump *label47 always
  1051 label *label46
  1052 jump *label48 equal :start_reactor.0:enabled false
 
  1094 label *label135
  1095 op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
  1096 op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
-    * op idiv :calc_charge_req.0:charge_req *tmp110 0.04
-    * set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
+ 1097 op idiv :calc_charge_req.0*retval *tmp110 0.04
  1098 jump *label136 always
  1099 label *label136
  1100 op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
 
  1105 control enabled :start_reactor.0:reactor false
  1106 print "START FAIL battery"
  1107 print "\n"
-    * set :start_reactor.0:supply_fuel false
+ 1108 set :start_reactor.0*retval false
  1109 jump *label61 always
  1110 label *label60
  1111 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
 
  1126 control enabled :start_reactor.0:reactor false
  1127 print "ABANDON - battery crit"
  1128 print "\n"
-    * set :start_reactor.0:supply_fuel false
+ 1129 set :start_reactor.0*retval false
  1130 jump *label63 always
  1131 label *label62
  1132 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
 
  1155 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
  1156 print "IDLE"
  1157 print "\n"
-    * set :start_reactor.0:supply_fuel false
+ 1158 set :start_reactor.0*retval false
  1159 jump *label65 always
  1160 label *label64
  1161 op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
 
  1170 print :start_reactor.0:flow
  1171 print "W)"
  1172 print "\n"
-    * set :start_reactor.0:supply_fuel false
+ 1173 set :start_reactor.0*retval false
  1174 jump *label67 always
  1175 label *label66
  1176 op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
 
  1214 set .RET_T_STARTUP @tick
  1215 label *label76
  1216 label *label77
-    * set :start_reactor.0*retval :start_reactor.0:supply_fuel
  1217 label *label45
  1218 return :start_reactor.0*retaddr
  1219 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   847 call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
   848 set :fuel_5 :start_reactor.0*retval
   849 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  850 op or *tmp27 :start_reactor.0:supply_fuel :fuel_4
   851 op or :fuel_many *tmp27 :start_reactor.0*retval
   852 label *label99
   853 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Jump Optimization, pass 3, iteration 1 (-1 instructions):
 
   919 print "n"
   920 label *label19
   921 label *label15
-    * op lessThan *tmp32 :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   922 label *label13
-    * jump *label20 equal *tmp32 false
+  923 jump *label20 greaterThanEq :throttle_blast.0:fuel_stored :throttle_blast.0:limit
   924 control config unloader7 @pyratite
   925 jump *label21 always
   926 label *label20

Modifications by Final phase, Jump Threading, iteration 1:
 
   213 control enabled reactor1 false
   214 print "STOP unwanted"
   215 print "\n"
-    * jump *label156 always
+  216 jump *label170 always
   217 label *label139
   218 op greaterThan *tmp136 5 1
   219 op mul *tmp137 15 5
 
   223 control enabled reactor1 false
   224 print "STOP system fuel low"
   225 print "\n"
-    * jump *label155 always
+  226 jump *label170 always
   227 label *label140
   228 jump *label141 greaterThan :start_reactor.0:fuel 1
   229 control enabled reactor1 false
   230 print "STOP fuel low"
   231 print "\n"
-    * jump *label154 always
+  232 jump *label170 always
   233 label *label141
   234 jump *label142 greaterThan :start_reactor.0:cryo 1
   235 control enabled reactor1 false
   236 print "STOP out of cryo"
   237 print "\n"
-    * jump *label153 always
+  238 jump *label170 always
   239 label *label142
   240 jump *label149 greaterThanEq :start_reactor.0:secs 30
   241 label *label143
 
   266 print "START FAIL battery"
   267 print "\n"
   268 set :start_reactor.0:supply_fuel false
-    * jump *label148 always
+  269 jump *label170 always
   270 label *label147
   271 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
   272 print "Starting "
 
   277 print "J"
   278 print "\n"
   279 label *label148
-    * jump *label152 always
+  280 jump *label170 always
   281 label *label149
   282 op lessThan *tmp161 :start_reactor.0:charge 2000
   283 op lessThan *tmp162 :start_reactor.0:surplus -500
 
   287 print "ABANDON - battery crit"
   288 print "\n"
   289 set :start_reactor.0:supply_fuel false
-    * jump *label151 always
+  290 jump *label170 always
   291 label *label150
   292 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   293 op div :start_reactor.0:mins :start_reactor.0:mins 10
 
   340 jump *label160 lessThanEq *tmp191 10
   341 print "WAIT fuel"
   342 print "\n"
-    * jump *label161 always
+  343 jump *label167 always
   344 label *label160
   345 print "WAIT system fuel"
   346 print "\n"
 
   427 control enabled reactor2 false
   428 print "STOP unwanted"
   429 print "\n"
-    * jump *label194 always
+  430 jump *label208 always
   431 label *label177
   432 op greaterThan *tmp136 5 1
   433 op mul *tmp137 15 5
 
   437 control enabled reactor2 false
   438 print "STOP system fuel low"
   439 print "\n"
-    * jump *label193 always
+  440 jump *label208 always
   441 label *label178
   442 jump *label179 greaterThan :start_reactor.0:fuel 1
   443 control enabled reactor2 false
   444 print "STOP fuel low"
   445 print "\n"
-    * jump *label192 always
+  446 jump *label208 always
   447 label *label179
   448 jump *label180 greaterThan :start_reactor.0:cryo 1
   449 control enabled reactor2 false
   450 print "STOP out of cryo"
   451 print "\n"
-    * jump *label191 always
+  452 jump *label208 always
   453 label *label180
   454 jump *label187 greaterThanEq :start_reactor.0:secs 30
   455 label *label181
 
   480 print "START FAIL battery"
   481 print "\n"
   482 set :start_reactor.0:supply_fuel false
-    * jump *label186 always
+  483 jump *label208 always
   484 label *label185
   485 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
   486 print "Starting "
 
   491 print "J"
   492 print "\n"
   493 label *label186
-    * jump *label190 always
+  494 jump *label208 always
   495 label *label187
   496 op lessThan *tmp161 :start_reactor.0:charge 2000
   497 op lessThan *tmp162 :start_reactor.0:surplus -500
 
   501 print "ABANDON - battery crit"
   502 print "\n"
   503 set :start_reactor.0:supply_fuel false
-    * jump *label189 always
+  504 jump *label208 always
   505 label *label188
   506 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   507 op div :start_reactor.0:mins :start_reactor.0:mins 10
 
   554 jump *label198 lessThanEq *tmp191 10
   555 print "WAIT fuel"
   556 print "\n"
-    * jump *label199 always
+  557 jump *label205 always
   558 label *label198
   559 print "WAIT system fuel"
   560 print "\n"
 
   669 control enabled reactor3 false
   670 print "STOP unwanted"
   671 print "\n"
-    * jump *label232 always
+  672 jump *label246 always
   673 label *label215
   674 op greaterThan *tmp136 5 1
   675 op mul *tmp137 15 5
 
   679 control enabled reactor3 false
   680 print "STOP system fuel low"
   681 print "\n"
-    * jump *label231 always
+  682 jump *label246 always
   683 label *label216
   684 jump *label217 greaterThan :start_reactor.0:fuel 1
   685 control enabled reactor3 false
   686 print "STOP fuel low"
   687 print "\n"
-    * jump *label230 always
+  688 jump *label246 always
   689 label *label217
   690 jump *label218 greaterThan :start_reactor.0:cryo 1
   691 control enabled reactor3 false
   692 print "STOP out of cryo"
   693 print "\n"
-    * jump *label229 always
+  694 jump *label246 always
   695 label *label218
   696 jump *label225 greaterThanEq :start_reactor.0:secs 30
   697 label *label219
 
   722 print "START FAIL battery"
   723 print "\n"
   724 set :start_reactor.0:supply_fuel false
-    * jump *label224 always
+  725 jump *label246 always
   726 label *label223
   727 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
   728 print "Starting "
 
   733 print "J"
   734 print "\n"
   735 label *label224
-    * jump *label228 always
+  736 jump *label246 always
   737 label *label225
   738 op lessThan *tmp161 :start_reactor.0:charge 2000
   739 op lessThan *tmp162 :start_reactor.0:surplus -500
 
   743 print "ABANDON - battery crit"
   744 print "\n"
   745 set :start_reactor.0:supply_fuel false
-    * jump *label227 always
+  746 jump *label246 always
   747 label *label226
   748 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   749 op div :start_reactor.0:mins :start_reactor.0:mins 10
 
   796 jump *label236 lessThanEq *tmp191 10
   797 print "WAIT fuel"
   798 print "\n"
-    * jump *label237 always
+  799 jump *label243 always
   800 label *label236
   801 print "WAIT system fuel"
   802 print "\n"
 
   890 jump *label16 equal :emerg_shutdown false
   891 print " Enemies detected."
   892 print "\n"
-    * jump *label17 always
+  893 jump *label15 always
   894 label *label16
   895 print " Critical power."
   896 print "\n"
 
  1053 control enabled :start_reactor.0:reactor false
  1054 print "STOP unwanted"
  1055 print "\n"
-    * jump *label51 always
+ 1056 jump *label49 always
  1057 label *label50
  1058 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
  1059 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
 
  1063 control enabled :start_reactor.0:reactor false
  1064 print "STOP system fuel low"
  1065 print "\n"
-    * jump *label53 always
+ 1066 jump *label49 always
  1067 label *label52
  1068 jump *label54 greaterThan :start_reactor.0:fuel 1
  1069 control enabled :start_reactor.0:reactor false
  1070 print "STOP fuel low"
  1071 print "\n"
-    * jump *label55 always
+ 1072 jump *label49 always
  1073 label *label54
  1074 jump *label56 greaterThan :start_reactor.0:cryo .CRYO_ABORT
  1075 control enabled :start_reactor.0:reactor false
  1076 print "STOP out of cryo"
  1077 print "\n"
-    * jump *label57 always
+ 1078 jump *label49 always
  1079 label *label56
  1080 jump *label58 greaterThanEq :start_reactor.0:secs 30
  1081 label *label133
 
  1105 print "START FAIL battery"
  1106 print "\n"
  1107 set :start_reactor.0*retval false
-    * jump *label61 always
+ 1108 jump *label49 always
  1109 label *label60
  1110 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
  1111 print "Starting "
 
  1116 print "J"
  1117 print "\n"
  1118 label *label61
-    * jump *label59 always
+ 1119 jump *label49 always
  1120 label *label58
  1121 op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
  1122 op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
 
  1126 print "ABANDON - battery crit"
  1127 print "\n"
  1128 set :start_reactor.0*retval false
-    * jump *label63 always
+ 1129 jump *label49 always
  1130 label *label62
  1131 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
  1132 op div :start_reactor.0:mins :start_reactor.0:mins 10
 
  1179 jump *label70 lessThanEq *tmp191 .FUEL_REQ
  1180 print "WAIT fuel"
  1181 print "\n"
-    * jump *label71 always
+ 1182 jump *label69 always
  1183 label *label70
  1184 print "WAIT system fuel"
  1185 print "\n"

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-4 instructions):
 
    56 control enabled reactor5 false
    57 set :check_radar.0*retval true
    58 jump *label108 always
-    * jump *label107 always
    59 label *label106
    60 control enabled projector1 false
    61 control enabled projector2 false
 
   625 control enabled reactor5 false
   626 set :check_radar.0*retval true
   627 jump *label112 always
-    * jump *label111 always
   628 label *label110
   629 control enabled projector1 false
   630 control enabled projector2 false
 
  1014 printflush message1
  1015 label *label8
  1016 jump *label7 always
-    * label *label9
-    * end
  1017 label *label3
  1018 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
  1019 set .RET_T_STARTUP :start_reactor.0:t_startup
 
  1211 label *label77
  1212 label *label45
  1213 return :start_reactor.0*retaddr
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-132 instructions):
 
    68 op equal *tmp11 *tmp10 false
    69 op land *tmp12 *tmp9 *tmp11
    70 jump *label11 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   71 print "User has disabled emergency switch\n"
    72 set *tmp8 true
    73 jump *label10 always
    74 label *label11
 
   195 op mul *tmp125 :start_reactor.0:surplus 0.2
   196 op add .AVG_SURPLUS *tmp124 *tmp125
   197 sensor :start_reactor.0:enabled reactor1 @enabled
-    * print "#"
-    * print 5
-    * print " "
-    * print "- "
+  198 print "#5 - "
   199 jump *label138 equal :emerg_shutdown false
   200 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  201 print "emergency mode\n"
   202 set :start_reactor.0:supply_fuel false
   203 jump *label171 always
   204 label *label138
   205 jump *label157 equal :start_reactor.0:enabled false
   206 jump *label139 greaterThanEq .REACTORS_DESIRED 5
   207 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  208 print "STOP unwanted\n"
   209 jump *label170 always
   210 label *label139
   211 op greaterThan *tmp136 5 1
 
   214 op land *tmp139 true *tmp138
   215 jump *label140 equal *tmp139 false
   216 control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
+  217 print "STOP system fuel low\n"
   218 jump *label170 always
   219 label *label140
   220 jump *label141 greaterThan :start_reactor.0:fuel 1
   221 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  222 print "STOP fuel low\n"
   223 jump *label170 always
   224 label *label141
   225 jump *label142 greaterThan :start_reactor.0:cryo 1
   226 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  227 print "STOP out of cryo\n"
   228 jump *label170 always
   229 label *label142
   230 jump *label149 greaterThanEq :start_reactor.0:secs 30
 
   253 op land *tmp156 *tmp154 *tmp155
   254 jump *label147 equal *tmp156 false
   255 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  256 print "START FAIL battery\n"
   257 set :start_reactor.0:supply_fuel false
   258 jump *label170 always
   259 label *label147
   260 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
-    * print "Starting "
-    * print :start_reactor.0:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req.0*retval
-    * print "J"
-    * print "\n"
+  261 print "Starting {0} secs, req {0}J\n"
+  262 format :start_reactor.0:time_left
+  263 format :calc_charge_req.0*retval
   264 label *label148
   265 jump *label170 always
   266 label *label149
 
   269 op land *tmp163 *tmp161 *tmp162
   270 jump *label150 equal *tmp163 false
   271 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  272 print "ABANDON - battery crit\n"
   273 set :start_reactor.0:supply_fuel false
   274 jump *label170 always
   275 label *label150
   276 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   277 op div :start_reactor.0:mins :start_reactor.0:mins 10
-    * print "RUN "
-    * print :start_reactor.0:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  278 print "RUN {0} mins\n"
+  279 format :start_reactor.0:mins
   280 label *label151
   281 label *label152
   282 label *label153
 
   294 op mul *tmp175 2 5
   295 op add :start_reactor.0:cryo_req 3 10
   296 jump *label158 greaterThanEq .REACTORS_DESIRED 5
-    * print "IDLE"
-    * print "\n"
+  297 print "IDLE\n"
   298 set :start_reactor.0:supply_fuel false
   299 jump *label169 always
   300 label *label158
 
   304 op div :start_reactor.0:flow *tmp183 10
   305 op idiv *tmp186 :start_reactor.0:charge_units 0.001
   306 op div :start_reactor.0:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor.0:charge
-    * print "J + %"
-    * print :start_reactor.0:flow
-    * print "W)"
-    * print "\n"
+  307 print "WAIT power. (%{0}J + %{0}W)\n"
+  308 format :start_reactor.0:charge
+  309 format :start_reactor.0:flow
   310 set :start_reactor.0:supply_fuel false
   311 jump *label168 always
   312 label *label159
 
   315 jump *label162 equal *tmp189 false
   316 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
   317 jump *label160 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  318 print "WAIT fuel\n"
   319 jump *label167 always
   320 label *label160
-    * print "WAIT system fuel"
-    * print "\n"
+  321 print "WAIT system fuel\n"
   322 label *label161
   323 jump *label167 always
   324 label *label162
   325 op mul *tmp194 45 5
   326 jump *label163 greaterThanEq :start_reactor.0:fuel_stored 225
-    * print "WAIT buffer fuel"
-    * print "\n"
+  327 print "WAIT buffer fuel\n"
   328 jump *label166 always
   329 label *label163
   330 jump *label164 greaterThanEq :start_reactor.0:cryo 13
-    * print "WAIT cryo"
-    * print "\n"
+  331 print "WAIT cryo\n"
   332 jump *label165 always
   333 label *label164
-    * print "STARTUP"
-    * print "\n"
+  334 print "STARTUP\n"
   335 op add .START_POWER_REQ .START_POWER_REQ 23000
   336 control enabled reactor1 true
   337 label *label165
 
   383 op mul *tmp125 :start_reactor.0:surplus 0.2
   384 op add .AVG_SURPLUS *tmp124 *tmp125
   385 sensor :start_reactor.0:enabled reactor2 @enabled
-    * print "#"
-    * print 5
-    * print " "
-    * print "- "
+  386 print "#5 - "
   387 jump *label176 equal :emerg_shutdown false
   388 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  389 print "emergency mode\n"
   390 set :start_reactor.0:supply_fuel false
   391 jump *label209 always
   392 label *label176
   393 jump *label195 equal :start_reactor.0:enabled false
   394 jump *label177 greaterThanEq .REACTORS_DESIRED 5
   395 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  396 print "STOP unwanted\n"
   397 jump *label208 always
   398 label *label177
   399 op greaterThan *tmp136 5 1
 
   402 op land *tmp139 true *tmp138
   403 jump *label178 equal *tmp139 false
   404 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  405 print "STOP system fuel low\n"
   406 jump *label208 always
   407 label *label178
   408 jump *label179 greaterThan :start_reactor.0:fuel 1
   409 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  410 print "STOP fuel low\n"
   411 jump *label208 always
   412 label *label179
   413 jump *label180 greaterThan :start_reactor.0:cryo 1
   414 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  415 print "STOP out of cryo\n"
   416 jump *label208 always
   417 label *label180
   418 jump *label187 greaterThanEq :start_reactor.0:secs 30
 
   441 op land *tmp156 *tmp154 *tmp155
   442 jump *label185 equal *tmp156 false
   443 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  444 print "START FAIL battery\n"
   445 set :start_reactor.0:supply_fuel false
   446 jump *label208 always
   447 label *label185
   448 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
-    * print "Starting "
-    * print :start_reactor.0:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req.0*retval
-    * print "J"
-    * print "\n"
+  449 print "Starting {0} secs, req {0}J\n"
+  450 format :start_reactor.0:time_left
+  451 format :calc_charge_req.0*retval
   452 label *label186
   453 jump *label208 always
   454 label *label187
 
   457 op land *tmp163 *tmp161 *tmp162
   458 jump *label188 equal *tmp163 false
   459 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  460 print "ABANDON - battery crit\n"
   461 set :start_reactor.0:supply_fuel false
   462 jump *label208 always
   463 label *label188
   464 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   465 op div :start_reactor.0:mins :start_reactor.0:mins 10
-    * print "RUN "
-    * print :start_reactor.0:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  466 print "RUN {0} mins\n"
+  467 format :start_reactor.0:mins
   468 label *label189
   469 label *label190
   470 label *label191
 
   482 op mul *tmp175 2 5
   483 op add :start_reactor.0:cryo_req 3 10
   484 jump *label196 greaterThanEq .REACTORS_DESIRED 5
-    * print "IDLE"
-    * print "\n"
+  485 print "IDLE\n"
   486 set :start_reactor.0:supply_fuel false
   487 jump *label207 always
   488 label *label196
 
   492 op div :start_reactor.0:flow *tmp183 10
   493 op idiv *tmp186 :start_reactor.0:charge_units 0.001
   494 op div :start_reactor.0:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor.0:charge
-    * print "J + %"
-    * print :start_reactor.0:flow
-    * print "W)"
-    * print "\n"
+  495 print "WAIT power. (%{0}J + %{0}W)\n"
+  496 format :start_reactor.0:charge
+  497 format :start_reactor.0:flow
   498 set :start_reactor.0:supply_fuel false
   499 jump *label206 always
   500 label *label197
 
   503 jump *label200 equal *tmp189 false
   504 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
   505 jump *label198 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  506 print "WAIT fuel\n"
   507 jump *label205 always
   508 label *label198
-    * print "WAIT system fuel"
-    * print "\n"
+  509 print "WAIT system fuel\n"
   510 label *label199
   511 jump *label205 always
   512 label *label200
   513 op mul *tmp194 45 5
   514 jump *label201 greaterThanEq :start_reactor.0:fuel_stored 225
-    * print "WAIT buffer fuel"
-    * print "\n"
+  515 print "WAIT buffer fuel\n"
   516 jump *label204 always
   517 label *label201
   518 jump *label202 greaterThanEq :start_reactor.0:cryo 13
-    * print "WAIT cryo"
-    * print "\n"
+  519 print "WAIT cryo\n"
   520 jump *label203 always
   521 label *label202
-    * print "STARTUP"
-    * print "\n"
+  522 print "STARTUP\n"
   523 op add .START_POWER_REQ .START_POWER_REQ 23000
   524 control enabled reactor2 true
   525 label *label203
 
   598 op mul *tmp125 :start_reactor.0:surplus 0.2
   599 op add .AVG_SURPLUS *tmp124 *tmp125
   600 sensor :start_reactor.0:enabled reactor3 @enabled
-    * print "#"
-    * print 5
-    * print " "
-    * print "- "
+  601 print "#5 - "
   602 jump *label214 equal :emerg_shutdown false
   603 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  604 print "emergency mode\n"
   605 set :start_reactor.0:supply_fuel false
   606 jump *label247 always
   607 label *label214
   608 jump *label233 equal :start_reactor.0:enabled false
   609 jump *label215 greaterThanEq .REACTORS_DESIRED 5
   610 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  611 print "STOP unwanted\n"
   612 jump *label246 always
   613 label *label215
   614 op greaterThan *tmp136 5 1
 
   617 op land *tmp139 true *tmp138
   618 jump *label216 equal *tmp139 false
   619 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  620 print "STOP system fuel low\n"
   621 jump *label246 always
   622 label *label216
   623 jump *label217 greaterThan :start_reactor.0:fuel 1
   624 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  625 print "STOP fuel low\n"
   626 jump *label246 always
   627 label *label217
   628 jump *label218 greaterThan :start_reactor.0:cryo 1
   629 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  630 print "STOP out of cryo\n"
   631 jump *label246 always
   632 label *label218
   633 jump *label225 greaterThanEq :start_reactor.0:secs 30
 
   656 op land *tmp156 *tmp154 *tmp155
   657 jump *label223 equal *tmp156 false
   658 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  659 print "START FAIL battery\n"
   660 set :start_reactor.0:supply_fuel false
   661 jump *label246 always
   662 label *label223
   663 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
-    * print "Starting "
-    * print :start_reactor.0:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req.0*retval
-    * print "J"
-    * print "\n"
+  664 print "Starting {0} secs, req {0}J\n"
+  665 format :start_reactor.0:time_left
+  666 format :calc_charge_req.0*retval
   667 label *label224
   668 jump *label246 always
   669 label *label225
 
   672 op land *tmp163 *tmp161 *tmp162
   673 jump *label226 equal *tmp163 false
   674 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  675 print "ABANDON - battery crit\n"
   676 set :start_reactor.0:supply_fuel false
   677 jump *label246 always
   678 label *label226
   679 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
   680 op div :start_reactor.0:mins :start_reactor.0:mins 10
-    * print "RUN "
-    * print :start_reactor.0:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  681 print "RUN {0} mins\n"
+  682 format :start_reactor.0:mins
   683 label *label227
   684 label *label228
   685 label *label229
 
   697 op mul *tmp175 2 5
   698 op add :start_reactor.0:cryo_req 3 10
   699 jump *label234 greaterThanEq .REACTORS_DESIRED 5
-    * print "IDLE"
-    * print "\n"
+  700 print "IDLE\n"
   701 set :start_reactor.0:supply_fuel false
   702 jump *label245 always
   703 label *label234
 
   707 op div :start_reactor.0:flow *tmp183 10
   708 op idiv *tmp186 :start_reactor.0:charge_units 0.001
   709 op div :start_reactor.0:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor.0:charge
-    * print "J + %"
-    * print :start_reactor.0:flow
-    * print "W)"
-    * print "\n"
+  710 print "WAIT power. (%{0}J + %{0}W)\n"
+  711 format :start_reactor.0:charge
+  712 format :start_reactor.0:flow
   713 set :start_reactor.0:supply_fuel false
   714 jump *label244 always
   715 label *label235
 
   718 jump *label238 equal *tmp189 false
   719 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
   720 jump *label236 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  721 print "WAIT fuel\n"
   722 jump *label243 always
   723 label *label236
-    * print "WAIT system fuel"
-    * print "\n"
+  724 print "WAIT system fuel\n"
   725 label *label237
   726 jump *label243 always
   727 label *label238
   728 op mul *tmp194 45 5
   729 jump *label239 greaterThanEq :start_reactor.0:fuel_stored 225
-    * print "WAIT buffer fuel"
-    * print "\n"
+  730 print "WAIT buffer fuel\n"
   731 jump *label242 always
   732 label *label239
   733 jump *label240 greaterThanEq :start_reactor.0:cryo 13
-    * print "WAIT cryo"
-    * print "\n"
+  734 print "WAIT cryo\n"
   735 jump *label241 always
   736 label *label240
-    * print "STARTUP"
-    * print "\n"
+  737 print "STARTUP\n"
   738 op add .START_POWER_REQ .START_POWER_REQ 23000
   739 control enabled reactor3 true
   740 label *label241
 
   799 op or *tmp43 *tmp42 :emerg_shutdown
   800 jump *label14 equal *tmp43 false
   801 set :throttle_blast.0:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast.0:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  802 print "Central Fuel at {0} / 0 - "
+  803 format :throttle_blast.0:fuel_stored
   804 jump *label16 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  805 print " Enemies detected.\n"
   806 jump *label15 always
   807 label *label16
-    * print " Critical power."
-    * print "\n"
+  808 print " Critical power.\n"
   809 label *label17
   810 jump *label15 always
   811 label *label14
   812 jump *label18 notEqual *tmp31 false
   813 set :throttle_blast.0:limit 150
-    * print "Fuel "
-    * print :throttle_blast.0:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  814 print "Fuel {0} / 150 (due to emergency)\n"
+  815 format :throttle_blast.0:fuel_stored
   816 jump *label19 always
   817 label *label18
   818 set :throttle_blast.0:limit 800
-    * print "Fuel "
-    * print :throttle_blast.0:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  819 print "Fuel {0} / 800\n"
+  820 format :throttle_blast.0:fuel_stored
   821 label *label19
   822 label *label15
   823 label *label13
 
   835 op lessThan *tmp57 .START_POWER_REQ 10
   836 op land *tmp58 *tmp56 *tmp57
   837 jump *label23 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  838 print "Differential now idle.\n"
   839 control enabled generator1 false
   840 control enabled generator2 false
   841 jump *label24 always
 
   862 op idiv *tmp93 .START_POWER_REQ 100
   863 op div :kilo.0*retval *tmp93 10
   864 label *label86
-    * print "Req "
-    * print :kilo.0*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  865 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  866 format :kilo.0*retval
+  867 format :charge
+  868 format :surplus
   869 jump *label26 always
   870 label *label25
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo.0*retval
-    * print "kJ"
-    * print "\n"
+  871 print "Power {0}kW, {0}kJ\n"
+  872 format :surplus
+  873 format :kilo.0*retval
   874 # "Function: def update_reactors_desired()"
   875 sensor *tmp71 node1 @powerNetStored
   876 sensor *tmp72 node1 @powerNetCapacity
 
   900 label *label27
   901 label *label26
   902 jump *label34 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  903 print "Require only {0}/5 reactors.\n"
+  904 format .REACTORS_DESIRED
   905 label *label34
   906 label *label35
   907 printflush message1
 
   926 op mul *tmp125 :start_reactor.0:surplus 0.2
   927 op add .AVG_SURPLUS *tmp124 *tmp125
   928 sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
-    * print "#"
-    * print :start_reactor.0:reactor_num
-    * print " "
-    * print "- "
+  929 print "#{0} - "
+  930 format :start_reactor.0:reactor_num
   931 jump *label46 equal :start_reactor.0:emerg_shutdown false
   932 control enabled :start_reactor.0:reactor false
-    * print "emergency mode"
-    * print "\n"
+  933 print "emergency mode\n"
   934 set :start_reactor.0*retval false
   935 jump *label47 always
   936 label *label46
   937 jump *label48 equal :start_reactor.0:enabled false
   938 jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
   939 control enabled :start_reactor.0:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  940 print "STOP unwanted\n"
   941 jump *label49 always
   942 label *label50
   943 op greaterThan *tmp136 :start_reactor.0:reactor_num 1
 
   946 op land *tmp139 *tmp136 *tmp138
   947 jump *label52 equal *tmp139 false
   948 control enabled :start_reactor.0:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  949 print "STOP system fuel low\n"
   950 jump *label49 always
   951 label *label52
   952 jump *label54 greaterThan :start_reactor.0:fuel 1
   953 control enabled :start_reactor.0:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  954 print "STOP fuel low\n"
   955 jump *label49 always
   956 label *label54
   957 jump *label56 greaterThan :start_reactor.0:cryo .CRYO_ABORT
   958 control enabled :start_reactor.0:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  959 print "STOP out of cryo\n"
   960 jump *label49 always
   961 label *label56
   962 jump *label58 greaterThanEq :start_reactor.0:secs 30
 
   984 op land *tmp156 *tmp154 *tmp155
   985 jump *label60 equal *tmp156 false
   986 control enabled :start_reactor.0:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  987 print "START FAIL battery\n"
   988 set :start_reactor.0*retval false
   989 jump *label49 always
   990 label *label60
   991 op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
-    * print "Starting "
-    * print :start_reactor.0:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req.0*retval
-    * print "J"
-    * print "\n"
+  992 print "Starting {0} secs, req {0}J\n"
+  993 format :start_reactor.0:time_left
+  994 format :calc_charge_req.0*retval
   995 label *label61
   996 jump *label49 always
   997 label *label58
 
  1000 op land *tmp163 *tmp161 *tmp162
  1001 jump *label62 equal *tmp163 false
  1002 control enabled :start_reactor.0:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+ 1003 print "ABANDON - battery crit\n"
  1004 set :start_reactor.0*retval false
  1005 jump *label49 always
  1006 label *label62
  1007 op idiv :start_reactor.0:mins :start_reactor.0:secs 6
  1008 op div :start_reactor.0:mins :start_reactor.0:mins 10
-    * print "RUN "
-    * print :start_reactor.0:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+ 1009 print "RUN {0} mins\n"
+ 1010 format :start_reactor.0:mins
  1011 label *label63
  1012 label *label59
  1013 label *label57
 
  1025 op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
  1026 op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
  1027 jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
-    * print "IDLE"
-    * print "\n"
+ 1028 print "IDLE\n"
  1029 set :start_reactor.0*retval false
  1030 jump *label65 always
  1031 label *label64
 
  1035 op div :start_reactor.0:flow *tmp183 10
  1036 op idiv *tmp186 :start_reactor.0:charge_units 0.001
  1037 op div :start_reactor.0:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor.0:charge
-    * print "J + %"
-    * print :start_reactor.0:flow
-    * print "W)"
-    * print "\n"
+ 1038 print "WAIT power. (%{0}J + %{0}W)\n"
+ 1039 format :start_reactor.0:charge
+ 1040 format :start_reactor.0:flow
  1041 set :start_reactor.0*retval false
  1042 jump *label67 always
  1043 label *label66
 
  1046 jump *label68 equal *tmp189 false
  1047 op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
  1048 jump *label70 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+ 1049 print "WAIT fuel\n"
  1050 jump *label69 always
  1051 label *label70
-    * print "WAIT system fuel"
-    * print "\n"
+ 1052 print "WAIT system fuel\n"
  1053 label *label71
  1054 jump *label69 always
  1055 label *label68
  1056 op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
  1057 jump *label72 greaterThanEq :start_reactor.0:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+ 1058 print "WAIT buffer fuel\n"
  1059 jump *label73 always
  1060 label *label72
  1061 jump *label74 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+ 1062 print "WAIT cryo\n"
  1063 jump *label75 always
  1064 label *label74
-    * print "STARTUP"
-    * print "\n"
+ 1065 print "STARTUP\n"
  1066 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
  1067 control enabled :start_reactor.0:reactor true
  1068 label *label75

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
set :start_reactor.0:reactor_num 5
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar.0:enemy_found
jump *label106 equal :check_radar.0:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar.0*retval true
jump *label108 always
label *label106
control enabled projector1 false
control enabled projector2 false
set :check_radar.0*retval false
label *label108
# "Function: def check_manual_shutdown()"
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label11 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
jump *label10 always
label *label10
op or :emerg_shutdown :check_radar.0*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label114 equal *tmp107 false
set .START_POWER_REQ 0
jump *label116 always
label *label114
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req.0:charge_req
jump *label116 always
label *label116
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label118 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label120 always
label *label118
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label120 always
label *label120
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label122 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label124 always
label *label122
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label124 always
label *label124
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label126 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label128 always
label *label126
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label128 always
label *label128
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label130 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label132 always
label *label130
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label132 always
label *label132
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req.0*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor.0:secs *tmp113 60
sensor :start_reactor.0:fuel reactor1 @blast-compound
set :start_reactor.0:supply_fuel true
sensor :start_reactor.0:fuel_stored vault1 @blast-compound
sensor :start_reactor.0:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor.0:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor.0:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor.0:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor.0:enabled reactor1 @enabled
print "#5 - "
jump *label138 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor.0:supply_fuel false
jump *label171 always
label *label138
jump *label157 equal :start_reactor.0:enabled false
jump *label139 greaterThanEq .REACTORS_DESIRED 5
control enabled reactor1 false
print "STOP unwanted\n"
jump *label170 always
label *label139
op greaterThan *tmp136 5 1
op mul *tmp137 15 5
op lessThan *tmp138 :start_reactor.0:fuel_stored 75
op land *tmp139 true *tmp138
jump *label140 equal *tmp139 false
control enabled reactor1 false
print "STOP system fuel low\n"
jump *label170 always
label *label140
jump *label141 greaterThan :start_reactor.0:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label170 always
label *label141
jump *label142 greaterThan :start_reactor.0:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label170 always
label *label142
jump *label149 greaterThanEq :start_reactor.0:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label144 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label146 always
label *label144
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label146 always
label *label146
op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor.0:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label147 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor.0:supply_fuel false
jump *label170 always
label *label147
op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor.0:time_left
format :calc_charge_req.0*retval
jump *label170 always
label *label149
op lessThan *tmp161 :start_reactor.0:charge 2000
op lessThan *tmp162 :start_reactor.0:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label150 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor.0:supply_fuel false
jump *label170 always
label *label150
op idiv :start_reactor.0:mins :start_reactor.0:secs 6
op div :start_reactor.0:mins :start_reactor.0:mins 10
print "RUN {0} mins\n"
format :start_reactor.0:mins
jump *label170 always
label *label157
op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor.0:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor.0:surplus 2000
op max :start_reactor.0:flow_units -0.1 *tmp173
op mul *tmp175 2 5
op add :start_reactor.0:cryo_req 3 10
jump *label158 greaterThanEq .REACTORS_DESIRED 5
print "IDLE\n"
set :start_reactor.0:supply_fuel false
jump *label169 always
label *label158
op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
jump *label159 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor.0:flow_units 0.001
op div :start_reactor.0:flow *tmp183 10
op idiv *tmp186 :start_reactor.0:charge_units 0.001
op div :start_reactor.0:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor.0:charge
format :start_reactor.0:flow
set :start_reactor.0:supply_fuel false
jump *label168 always
label *label159
op lessThan *tmp188 :start_reactor.0:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label162 equal *tmp189 false
op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
jump *label160 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label167 always
label *label160
print "WAIT system fuel\n"
jump *label167 always
label *label162
op mul *tmp194 45 5
jump *label163 greaterThanEq :start_reactor.0:fuel_stored 225
print "WAIT buffer fuel\n"
jump *label166 always
label *label163
jump *label164 greaterThanEq :start_reactor.0:cryo 13
print "WAIT cryo\n"
jump *label165 always
label *label164
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label165
label *label166
label *label167
label *label168
label *label169
label *label170
label *label171
sensor *tmp201 reactor1 @enabled
jump *label172 equal :start_reactor.0:enabled *tmp201
set .RET_T_STARTUP @tick
label *label172
set :fuel_1 :start_reactor.0:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label88 equal :start_reactor.0:supply_fuel false
control config unloader1 @blast-compound
jump *label89 always
label *label88
control config unloader1 @scrap
label *label89
jump *label90 notEqual :start_reactor.0:supply_fuel false
control config unloader2 @blast-compound
jump *label91 always
label *label90
control config unloader2 @scrap
label *label91
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor.0:secs *tmp113 60
sensor :start_reactor.0:fuel reactor2 @blast-compound
set :start_reactor.0:supply_fuel true
sensor :start_reactor.0:fuel_stored vault1 @blast-compound
sensor :start_reactor.0:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor.0:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor.0:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor.0:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor.0:enabled reactor2 @enabled
print "#5 - "
jump *label176 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor.0:supply_fuel false
jump *label209 always
label *label176
jump *label195 equal :start_reactor.0:enabled false
jump *label177 greaterThanEq .REACTORS_DESIRED 5
control enabled reactor2 false
print "STOP unwanted\n"
jump *label208 always
label *label177
op greaterThan *tmp136 5 1
op mul *tmp137 15 5
op lessThan *tmp138 :start_reactor.0:fuel_stored 75
op land *tmp139 true *tmp138
jump *label178 equal *tmp139 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label208 always
label *label178
jump *label179 greaterThan :start_reactor.0:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label208 always
label *label179
jump *label180 greaterThan :start_reactor.0:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label208 always
label *label180
jump *label187 greaterThanEq :start_reactor.0:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label182 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label184 always
label *label182
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label184 always
label *label184
op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor.0:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label185 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor.0:supply_fuel false
jump *label208 always
label *label185
op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor.0:time_left
format :calc_charge_req.0*retval
jump *label208 always
label *label187
op lessThan *tmp161 :start_reactor.0:charge 2000
op lessThan *tmp162 :start_reactor.0:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label188 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor.0:supply_fuel false
jump *label208 always
label *label188
op idiv :start_reactor.0:mins :start_reactor.0:secs 6
op div :start_reactor.0:mins :start_reactor.0:mins 10
print "RUN {0} mins\n"
format :start_reactor.0:mins
jump *label208 always
label *label195
op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor.0:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor.0:surplus 2000
op max :start_reactor.0:flow_units -0.1 *tmp173
op mul *tmp175 2 5
op add :start_reactor.0:cryo_req 3 10
jump *label196 greaterThanEq .REACTORS_DESIRED 5
print "IDLE\n"
set :start_reactor.0:supply_fuel false
jump *label207 always
label *label196
op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
jump *label197 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor.0:flow_units 0.001
op div :start_reactor.0:flow *tmp183 10
op idiv *tmp186 :start_reactor.0:charge_units 0.001
op div :start_reactor.0:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor.0:charge
format :start_reactor.0:flow
set :start_reactor.0:supply_fuel false
jump *label206 always
label *label197
op lessThan *tmp188 :start_reactor.0:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label200 equal *tmp189 false
op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
jump *label198 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label205 always
label *label198
print "WAIT system fuel\n"
jump *label205 always
label *label200
op mul *tmp194 45 5
jump *label201 greaterThanEq :start_reactor.0:fuel_stored 225
print "WAIT buffer fuel\n"
jump *label204 always
label *label201
jump *label202 greaterThanEq :start_reactor.0:cryo 13
print "WAIT cryo\n"
jump *label203 always
label *label202
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label203
label *label204
label *label205
label *label206
label *label207
label *label208
label *label209
sensor *tmp201 reactor2 @enabled
jump *label210 equal :start_reactor.0:enabled *tmp201
set .RET_T_STARTUP @tick
label *label210
set :fuel_2 :start_reactor.0:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label94 equal :start_reactor.0:supply_fuel false
control config unloader3 @blast-compound
jump *label95 always
label *label94
control config unloader3 @scrap
label *label95
jump *label96 notEqual :start_reactor.0:supply_fuel false
control config unloader4 @blast-compound
jump *label97 always
label *label96
control config unloader4 @scrap
label *label97
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar.0:enemy_found
jump *label110 equal :check_radar.0:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar.0*retval true
jump *label112 always
label *label110
control enabled projector1 false
control enabled projector2 false
set :check_radar.0*retval false
label *label112
op or :emerg_shutdown :emerg_shutdown :check_radar.0*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor.0:secs *tmp113 60
sensor :start_reactor.0:fuel reactor3 @blast-compound
set :start_reactor.0:supply_fuel true
sensor :start_reactor.0:fuel_stored vault1 @blast-compound
sensor :start_reactor.0:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor.0:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor.0:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor.0:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor.0:enabled reactor3 @enabled
print "#5 - "
jump *label214 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor.0:supply_fuel false
jump *label247 always
label *label214
jump *label233 equal :start_reactor.0:enabled false
jump *label215 greaterThanEq .REACTORS_DESIRED 5
control enabled reactor3 false
print "STOP unwanted\n"
jump *label246 always
label *label215
op greaterThan *tmp136 5 1
op mul *tmp137 15 5
op lessThan *tmp138 :start_reactor.0:fuel_stored 75
op land *tmp139 true *tmp138
jump *label216 equal *tmp139 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label246 always
label *label216
jump *label217 greaterThan :start_reactor.0:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label246 always
label *label217
jump *label218 greaterThan :start_reactor.0:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label246 always
label *label218
jump *label225 greaterThanEq :start_reactor.0:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label220 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label222 always
label *label220
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0:charge_req *tmp110 0.04
set :calc_charge_req.0*retval :calc_charge_req.0:charge_req
jump *label222 always
label *label222
op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor.0:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label223 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor.0:supply_fuel false
jump *label246 always
label *label223
op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor.0:time_left
format :calc_charge_req.0*retval
jump *label246 always
label *label225
op lessThan *tmp161 :start_reactor.0:charge 2000
op lessThan *tmp162 :start_reactor.0:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label226 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor.0:supply_fuel false
jump *label246 always
label *label226
op idiv :start_reactor.0:mins :start_reactor.0:secs 6
op div :start_reactor.0:mins :start_reactor.0:mins 10
print "RUN {0} mins\n"
format :start_reactor.0:mins
jump *label246 always
label *label233
op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor.0:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor.0:surplus 2000
op max :start_reactor.0:flow_units -0.1 *tmp173
op mul *tmp175 2 5
op add :start_reactor.0:cryo_req 3 10
jump *label234 greaterThanEq .REACTORS_DESIRED 5
print "IDLE\n"
set :start_reactor.0:supply_fuel false
jump *label245 always
label *label234
op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
jump *label235 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor.0:flow_units 0.001
op div :start_reactor.0:flow *tmp183 10
op idiv *tmp186 :start_reactor.0:charge_units 0.001
op div :start_reactor.0:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor.0:charge
format :start_reactor.0:flow
set :start_reactor.0:supply_fuel false
jump *label244 always
label *label235
op lessThan *tmp188 :start_reactor.0:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label238 equal *tmp189 false
op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
jump *label236 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label243 always
label *label236
print "WAIT system fuel\n"
jump *label243 always
label *label238
op mul *tmp194 45 5
jump *label239 greaterThanEq :start_reactor.0:fuel_stored 225
print "WAIT buffer fuel\n"
jump *label242 always
label *label239
jump *label240 greaterThanEq :start_reactor.0:cryo 13
print "WAIT cryo\n"
jump *label241 always
label *label240
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label241
label *label242
label *label243
label *label244
label *label245
label *label246
label *label247
sensor *tmp201 reactor3 @enabled
jump *label248 equal :start_reactor.0:enabled *tmp201
set .RET_T_STARTUP @tick
label *label248
set :fuel_3 :start_reactor.0:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor.0:reactor reactor4
set :start_reactor.0:emerg_shutdown :emerg_shutdown
set :start_reactor.0:fuel_on :fuel_4
set :start_reactor.0:t_startup :t_startup4
call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
set :fuel_4 :start_reactor.0*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor.0:reactor reactor5
set :start_reactor.0:emerg_shutdown :emerg_shutdown
set :start_reactor.0:fuel_on :fuel_5
set :start_reactor.0:t_startup :t_startup5
call *label3 :start_reactor.0*retaddr :start_reactor.0*retval
set :fuel_5 :start_reactor.0*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor.0:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor.0*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
jump *label100 equal :fuel_many false
control config unloader5 @blast-compound
jump *label101 always
label *label100
control config unloader5 @scrap
label *label101
jump *label102 notEqual :fuel_many false
control config unloader6 @blast-compound
jump *label103 always
label *label102
control config unloader6 @scrap
label *label103
op or *tmp30 :fuel_1 :fuel_2
op or *tmp31 *tmp30 :fuel_many
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast.0:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast.0:surplus *tmp37
sensor :throttle_blast.0:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast.0:charge 5000
op lessThan *tmp41 :throttle_blast.0:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label14 equal *tmp43 false
set :throttle_blast.0:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast.0:fuel_stored
jump *label16 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label15 always
label *label16
print " Critical power.\n"
jump *label15 always
label *label14
jump *label18 notEqual *tmp31 false
set :throttle_blast.0:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast.0:fuel_stored
jump *label19 always
label *label18
set :throttle_blast.0:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast.0:fuel_stored
label *label19
label *label15
jump *label20 greaterThanEq :throttle_blast.0:fuel_stored :throttle_blast.0:limit
control config unloader7 @pyratite
jump *label21 always
label *label20
control config unloader7 @scrap
label *label21
# "Function: def diff_generators()"
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators.0:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators.0:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label23 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label24 always
label *label23
control enabled generator1 true
control enabled generator2 true
label *label24
# "Function: def kilo(in val)"
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo.0:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp93 :kilo.0:val 100
op div :kilo.0*retval *tmp93 10
set :charge :kilo.0*retval
jump *label25 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo.0*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo.0*retval
format :charge
format :surplus
jump *label26 always
label *label25
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo.0*retval
# "Function: def update_reactors_desired()"
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired.0:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired.0:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label28 equal *tmp77 false
jump *label30 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label30
label *label28
op lessThan *tmp81 :update_reactors_desired.0:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label32 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired.0:needed 1 *tmp87
op add *tmp89 :update_reactors_desired.0:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label32
label *label26
jump *label34 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label34
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
set .RET_T_STARTUP :start_reactor.0:t_startup
op sub *tmp113 @tick :start_reactor.0:t_startup
op idiv :start_reactor.0:secs *tmp113 60
sensor :start_reactor.0:fuel :start_reactor.0:reactor @blast-compound
set :start_reactor.0*retval true
sensor :start_reactor.0:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor.0:cryo :start_reactor.0:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor.0:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor.0:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor.0:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor.0:enabled :start_reactor.0:reactor @enabled
print "#{0} - "
format :start_reactor.0:reactor_num
jump *label46 equal :start_reactor.0:emerg_shutdown false
control enabled :start_reactor.0:reactor false
print "emergency mode\n"
set :start_reactor.0*retval false
jump *label47 always
label *label46
jump *label48 equal :start_reactor.0:enabled false
jump *label50 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
control enabled :start_reactor.0:reactor false
print "STOP unwanted\n"
jump *label49 always
label *label50
op greaterThan *tmp136 :start_reactor.0:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor.0:reactor_num
op lessThan *tmp138 :start_reactor.0:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label52 equal *tmp139 false
control enabled :start_reactor.0:reactor false
print "STOP system fuel low\n"
jump *label49 always
label *label52
jump *label54 greaterThan :start_reactor.0:fuel 1
control enabled :start_reactor.0:reactor false
print "STOP fuel low\n"
jump *label49 always
label *label54
jump *label56 greaterThan :start_reactor.0:cryo .CRYO_ABORT
control enabled :start_reactor.0:reactor false
print "STOP out of cryo\n"
jump *label49 always
label *label56
jump *label58 greaterThanEq :start_reactor.0:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp102 @tick :start_reactor.0:t_startup
op idiv :calc_charge_req.0:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req.0:secs 30
sensor *tmp105 :start_reactor.0:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label134 equal *tmp107 false
set :calc_charge_req.0*retval 0
jump *label136 always
label *label134
op sub :calc_charge_req.0:time_left 30 :calc_charge_req.0:secs
op mul *tmp110 :calc_charge_req.0:time_left :calc_charge_req.0:time_left
op idiv :calc_charge_req.0*retval *tmp110 0.04
jump *label136 always
label *label136
op sub *tmp153 :start_reactor.0:charge :calc_charge_req.0*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor.0:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label60 equal *tmp156 false
control enabled :start_reactor.0:reactor false
print "START FAIL battery\n"
set :start_reactor.0*retval false
jump *label49 always
label *label60
op sub :start_reactor.0:time_left 30 :start_reactor.0:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor.0:time_left
format :calc_charge_req.0*retval
jump *label49 always
label *label58
op lessThan *tmp161 :start_reactor.0:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor.0:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label62 equal *tmp163 false
control enabled :start_reactor.0:reactor false
print "ABANDON - battery crit\n"
set :start_reactor.0*retval false
jump *label49 always
label *label62
op idiv :start_reactor.0:mins :start_reactor.0:secs 6
op div :start_reactor.0:mins :start_reactor.0:mins 10
print "RUN {0} mins\n"
format :start_reactor.0:mins
jump *label49 always
label *label48
op sub *tmp169 :start_reactor.0:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor.0:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor.0:surplus .FLOW_REQ
op max :start_reactor.0:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor.0:reactor_num
op add :start_reactor.0:cryo_req .CRYO_REQ *tmp175
jump *label64 greaterThanEq .REACTORS_DESIRED :start_reactor.0:reactor_num
print "IDLE\n"
set :start_reactor.0*retval false
jump *label65 always
label *label64
op add *tmp179 :start_reactor.0:flow_units :start_reactor.0:charge_units
jump *label66 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor.0:flow_units 0.001
op div :start_reactor.0:flow *tmp183 10
op idiv *tmp186 :start_reactor.0:charge_units 0.001
op div :start_reactor.0:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor.0:charge
format :start_reactor.0:flow
set :start_reactor.0*retval false
jump *label67 always
label *label66
op lessThan *tmp188 :start_reactor.0:fuel .FUEL_REQ
op land *tmp189 :start_reactor.0:fuel_on *tmp188
jump *label68 equal *tmp189 false
op add *tmp191 :start_reactor.0:fuel :start_reactor.0:fuel_stored
jump *label70 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label69 always
label *label70
print "WAIT system fuel\n"
jump *label69 always
label *label68
op mul *tmp194 .FUEL_TOT_REQ :start_reactor.0:reactor_num
jump *label72 greaterThanEq :start_reactor.0:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label73 always
label *label72
jump *label74 greaterThanEq :start_reactor.0:cryo :start_reactor.0:cryo_req
print "WAIT cryo\n"
jump *label75 always
label *label74
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor.0:reactor true
label *label75
label *label73
label *label69
label *label67
label *label65
label *label49
label *label47
sensor *tmp201 :start_reactor.0:reactor @enabled
jump *label76 equal :start_reactor.0:enabled *tmp201
set .RET_T_STARTUP @tick
label *label76
return :start_reactor.0*retaddr
