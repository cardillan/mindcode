   684 instructions before optimizations.
    63 instructions eliminated by Temp Variables Elimination (6 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     3 instructions eliminated by Jump Normalization (2 passes, 5 iterations).
    37 instructions eliminated by Condition Optimization (2 passes, 7 iterations).
    39 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (3 iterations).
    21 instructions eliminated by Boolean Optimization (2 passes, 6 iterations).
       2 short-circuited expressions turned to full evaluations.
       5 fully-evaluated expressions optimized using selects.
    83 instructions eliminated by Data Flow Optimization (9 passes, 29 iterations).
   499 instructions added by Function Inlining (10 iterations).
    17 function calls inlined by Function Inlining.
     5 instructions eliminated by Jump Straightening (6 iterations).
    34 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   730 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 548):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 552):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 561):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332 (+33 instructions)
    Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 528):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 522):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935 (+139 instructions)
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 383):
  ! Inline function 'start_reactor' defined at line 140:1        size  +440, benefit      550.0, efficiency      1.250
  * Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 243):
  ! Inline function 'start_reactor' defined at line 140:1        size  +293, benefit      412.5, efficiency      1.408
  * Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 103):
  ! Inline function 'start_reactor' defined at line 140:1        size  +146, benefit      275.0, efficiency      1.884
  ! Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
  ! Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 2: speed optimization selection (cost limit 131):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Pass 3: speed optimization selection (cost limit 131):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    73 print "\n"
    74 set *tmp8 true
    75 jump *label10 always
-    * set *tmp12 null
    76 jump *label12 always
    77 label *label11
-    * set *tmp12 null
    78 label *label12
    79 set *tmp8 false
    80 jump *label10 always
 
   119 set :update_fuel:uld_in .ULD_IN_1
   120 set :update_fuel:uld_out .ULD_OUT_1
   121 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp19 :update_fuel*retval
   122 set :start_reactor:reactor reactor2
   123 set :start_reactor:reactor_num 2
   124 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   132 set :update_fuel:uld_in .ULD_IN_2
   133 set :update_fuel:uld_out .ULD_OUT_2
   134 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp21 :update_fuel*retval
   135 set :check_radar:unit .TOWER
   136 call *label4 :check_radar*retaddr :check_radar*retval
   137 set *tmp22 :check_radar*retval
 
   181 set :update_fuel:uld_in .ULD_IN_MANY
   182 set :update_fuel:uld_out .ULD_OUT_MANY
   183 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set *tmp27 :update_fuel*retval
   184 jump *label22 notEqual :fuel_1 false
   185 label *label24
   186 jump *label22 notEqual :fuel_2 false
 
   235 print "\n"
   236 set *tmp40 null
   237 label *label32
-    * set *tmp39 *tmp40
   238 jump *label27 always
   239 label *label26
   240 op equal *tmp41 :throttle_blast:reactors_fueled false
 
   261 print "n"
   262 set *tmp42 null
   263 label *label34
-    * set *tmp39 *tmp42
   264 label *label27
   265 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
   266 set *tmp29 *tmp43
 
   299 control enabled generator2 true
   300 set *tmp53 true
   301 label *label39
-    * set *tmp47 *tmp53
   302 label *label37
   303 set :kilo:val .AVG_SURPLUS
   304 call *label0 :kilo*retaddr :kilo*retval
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp62 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   353 label *label49
   354 set *tmp73 null
   355 label *label50
-    * set *tmp71 *tmp73
   356 jump *label46 always
   357 label *label45
-    * set *tmp71 null
   358 label *label46
   359 op lessThan *tmp74 :update_reactors_desired:stored 0.8
   360 jump *label51 equal *tmp74 false
 
   378 label *label52
   379 set *tmp64 *tmp77
   380 label *label44
-    * set *tmp62 *tmp64
   381 label *label43
   382 op notEqual *tmp83 .REACTORS_DESIRED 5
   383 jump *label55 equal *tmp83 false
 
   385 print .REACTORS_DESIRED
   386 print "/5 reactors."
   387 print "\n"
-    * set *tmp84 null
   388 jump *label56 always
   389 label *label55
-    * set *tmp84 null
   390 label *label56
   391 printflush message1
   392 label *label8
 
   441 label *label66
   442 set :calc_charge_req*retval 0
   443 jump *label63 always
-    * set *tmp99 null
   444 jump *label65 always
   445 label *label64
-    * set *tmp99 null
   446 label *label65
   447 op sub *tmp100 30 :calc_charge_req:secs
   448 set :calc_charge_req:time_left *tmp100
 
   493 print "emergency mode"
   494 print "\n"
   495 set :start_reactor:supply_fuel false
-    * set *tmp119 :start_reactor:supply_fuel
   496 jump *label70 always
   497 label *label69
   498 jump *label71 equal :start_reactor:enabled false
 
   706 label *label94
   707 set *tmp122 *tmp166
   708 label *label72
-    * set *tmp119 *tmp122
   709 label *label70
   710 sensor *tmp188 :start_reactor:reactor @enabled
   711 op notEqual *tmp189 :start_reactor:enabled *tmp188
   712 jump *label107 equal *tmp189 false
   713 set *tmp191 @tick
   714 set .RET_T_STARTUP *tmp191
-    * set *tmp190 .RET_T_STARTUP
   715 jump *label108 always
   716 label *label107
-    * set *tmp190 null
   717 label *label108
   718 set :start_reactor*retval :start_reactor:supply_fuel
   719 jump *label68 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   228 jump *label31 equal :throttle_blast:emerg_shutdown false
   229 print " Enemies detected."
   230 print "\n"
-    * set *tmp40 null
   231 jump *label32 always
   232 label *label31
   233 print " Critical power."
   234 print "\n"
-    * set *tmp40 null
   235 label *label32
   236 jump *label27 always
   237 label *label26
 
   246 print " "
   247 print "(due to emergency)"
   248 print "\n"
-    * set *tmp42 null
   249 jump *label34 always
   250 label *label33
   251 set :throttle_blast:limit .FUEL_LIMIT
 
   256 print :throttle_blast:limit
   257 print "\"
   258 print "n"
-    * set *tmp42 null
   259 label *label34
   260 label *label27
   261 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
 
   288 print "\n"
   289 control enabled generator1 false
   290 control enabled generator2 false
-    * set *tmp53 false
   291 jump *label39 always
   292 label *label38
   293 control enabled generator1 true
   294 control enabled generator2 true
-    * set *tmp53 true
   295 label *label39
   296 label *label37
   297 set :kilo:val .AVG_SURPLUS
 
   342 jump *label49 equal *tmp72 false
   343 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   344 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp73 .AVG_SURPLUS
   345 jump *label50 always
   346 label *label49
-    * set *tmp73 null
   347 label *label50
   348 jump *label46 always
   349 label *label45
 
   368 label *label51
   369 set *tmp77 null
   370 label *label52
-    * set *tmp64 *tmp77
   371 label *label44
   372 label *label43
   373 op notEqual *tmp83 .REACTORS_DESIRED 5
 
   413 set *tmp93 .FUEL_OFF
   414 label *label62
   415 control config *tmp90 *tmp93
-    * set :update_fuel*retval *tmp93
   416 label *label58
   417 return :update_fuel*retaddr
   418 end
 
   600 label *label76
   601 set *tmp124 *tmp130
   602 label *label74
-    * set *tmp122 *tmp124
   603 jump *label72 always
   604 label *label71
   605 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   693 label *label96
   694 set *tmp166 *tmp169
   695 label *label94
-    * set *tmp122 *tmp166
   696 label *label72
   697 label *label70
   698 sensor *tmp188 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   363 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   364 op min *tmp82 5 *tmp81
   365 set .REACTORS_DESIRED *tmp82
-    * set *tmp77 .REACTORS_DESIRED
   366 jump *label52 always
   367 label *label51
-    * set *tmp77 null
   368 label *label52
   369 label *label44
   370 label *label43
 
   490 control enabled *tmp125 false
   491 print "STOP unwanted"
   492 print "\n"
-    * set *tmp124 null
   493 jump *label74 always
   494 label *label73
   495 op greaterThan *tmp127 :start_reactor:reactor_num 1
 
   595 label *label80
   596 set *tmp130 *tmp134
   597 label *label76
-    * set *tmp124 *tmp130
   598 label *label74
   599 jump *label72 always
   600 label *label71
 
   614 print "IDLE"
   615 print "\n"
   616 set :start_reactor:supply_fuel false
-    * set *tmp166 :start_reactor:supply_fuel
   617 jump *label94 always
   618 label *label93
   619 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
 
   686 label *label98
   687 set *tmp169 *tmp177
   688 label *label96
-    * set *tmp166 *tmp169
   689 label *label94
   690 label *label72
   691 label *label70

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   504 control enabled *tmp131 false
   505 print "STOP system fuel low"
   506 print "\n"
-    * set *tmp130 null
   507 jump *label76 always
   508 label *label75
   509 op lessThanEq *tmp133 :start_reactor:fuel 1
 
   592 label *label82
   593 set *tmp134 *tmp138
   594 label *label80
-    * set *tmp130 *tmp134
   595 label *label76
   596 label *label74
   597 jump *label72 always
 
   632 print "W)"
   633 print "\n"
   634 set :start_reactor:supply_fuel false
-    * set *tmp169 :start_reactor:supply_fuel
   635 jump *label96 always
   636 label *label95
   637 jump *label97 equal :start_reactor:fuel_on false
 
   681 label *label104
   682 set *tmp177 *tmp183
   683 label *label98
-    * set *tmp169 *tmp177
   684 label *label96
   685 label *label94
   686 label *label72

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   512 control enabled *tmp135 false
   513 print "STOP fuel low"
   514 print "\n"
-    * set *tmp134 null
   515 jump *label80 always
   516 label *label79
   517 op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
 
   589 label *label84
   590 set *tmp138 *tmp142
   591 label *label82
-    * set *tmp134 *tmp138
   592 label *label80
   593 label *label76
   594 label *label74
 
   650 print "\n"
   651 set *tmp180 null
   652 label *label102
-    * set *tmp177 *tmp180
   653 jump *label98 always
   654 label *label97
   655 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   676 label *label106
   677 set *tmp183 *tmp185
   678 label *label104
-    * set *tmp177 *tmp183
   679 label *label98
   680 label *label96
   681 label *label94

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   520 control enabled *tmp139 false
   521 print "STOP out of cryo"
   522 print "\n"
-    * set *tmp138 null
   523 jump *label82 always
   524 label *label81
   525 op lessThan *tmp141 :start_reactor:secs 30
 
   586 label *label90
   587 set *tmp142 *tmp152
   588 label *label84
-    * set *tmp138 *tmp142
   589 label *label82
   590 label *label80
   591 label *label76
 
   641 jump *label101 equal *tmp179 false
   642 print "WAIT fuel"
   643 print "\n"
-    * set *tmp180 null
   644 jump *label102 always
   645 label *label101
   646 print "WAIT system fuel"
   647 print "\n"
-    * set *tmp180 null
   648 label *label102
   649 jump *label98 always
   650 label *label97
 
   653 jump *label103 equal *tmp182 false
   654 print "WAIT buffer fuel"
   655 print "\n"
-    * set *tmp183 null
   656 jump *label104 always
   657 label *label103
   658 op lessThan *tmp184 :start_reactor:cryo :start_reactor:cryo_req
 
   669 control enabled *tmp186 true
   670 set *tmp185 true
   671 label *label106
-    * set *tmp183 *tmp185
   672 label *label104
   673 label *label98
   674 label *label96

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   555 print "\n"
   556 set *tmp146 null
   557 label *label86
-    * set *tmp142 *tmp146
   558 jump *label84 always
   559 label *label83
   560 op lessThan *tmp150 :start_reactor:charge .PWR_ABANDON
 
   583 print "\n"
   584 set *tmp152 null
   585 label *label90
-    * set *tmp142 *tmp152
   586 label *label84
   587 label *label82
   588 label *label80
 
   657 jump *label105 equal *tmp184 false
   658 print "WAIT cryo"
   659 print "\n"
-    * set *tmp185 null
   660 jump *label106 always
   661 label *label105
   662 print "STARTUP"
 
   664 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   665 set *tmp186 :start_reactor:reactor
   666 control enabled *tmp186 true
-    * set *tmp185 true
   667 label *label106
   668 label *label104
   669 label *label98

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   541 print "START FAIL battery"
   542 print "\n"
   543 set :start_reactor:supply_fuel false
-    * set *tmp146 :start_reactor:supply_fuel
   544 jump *label86 always
   545 label *label85
   546 op sub *tmp149 30 :start_reactor:secs
 
   552 print :start_reactor:charge_req
   553 print "J"
   554 print "\n"
-    * set *tmp146 null
   555 label *label86
   556 jump *label84 always
   557 label *label83
 
   567 print "ABANDON - battery crit"
   568 print "\n"
   569 set :start_reactor:supply_fuel false
-    * set *tmp152 :start_reactor:supply_fuel
   570 jump *label90 always
   571 label *label89
   572 op idiv *tmp155 :start_reactor:secs 6
 
   578 print " "
   579 print "mins"
   580 print "\n"
-    * set *tmp152 null
   581 label *label90
   582 label *label84
   583 label *label82

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-63 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    56 set .NODE node1
    57 set :check_radar:unit .TOWER
    58 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   59 set :emerg_shutdown :check_radar*retval
    60 # "Function: def check_manual_shutdown()"
    61 op notEqual *tmp9 switch1 null
    62 jump *label11 equal *tmp9 false
 
    81 set :calc_charge_req:reactor reactor1
    82 set :calc_charge_req:time :t_startup1
    83 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp13 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp13
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp14 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp14
+   88 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    89 set :calc_charge_req:reactor reactor3
    90 set :calc_charge_req:time :t_startup3
    91 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   92 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    93 set :calc_charge_req:reactor reactor4
    94 set :calc_charge_req:time :t_startup4
    95 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor5
    98 set :calc_charge_req:time :t_startup5
    99 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  100 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   101 set :start_reactor:reactor reactor1
   102 set :start_reactor:reactor_num 1
   103 set :start_reactor:emerg_shutdown :emerg_shutdown
   104 set :start_reactor:fuel_on :fuel_1
   105 set :start_reactor:t_startup :t_startup1
   106 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp18 :start_reactor*retval
-    * set :fuel_1 *tmp18
+  107 set :fuel_1 :start_reactor*retval
   108 set :t_startup1 .RET_T_STARTUP
   109 set :update_fuel:fuel :fuel_1
   110 set :update_fuel:uld_in .ULD_IN_1
 
   116 set :start_reactor:fuel_on :fuel_2
   117 set :start_reactor:t_startup :t_startup2
   118 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp20 :start_reactor*retval
-    * set :fuel_2 *tmp20
+  119 set :fuel_2 :start_reactor*retval
   120 set :t_startup2 .RET_T_STARTUP
   121 set :update_fuel:fuel :fuel_2
   122 set :update_fuel:uld_in .ULD_IN_2
 
   124 call *label1 :update_fuel*retaddr :update_fuel*retval
   125 set :check_radar:unit .TOWER
   126 call *label4 :check_radar*retaddr :check_radar*retval
-    * set *tmp22 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp22
+  127 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   128 set :start_reactor:reactor reactor3
   129 set :start_reactor:reactor_num 3
   130 set :start_reactor:emerg_shutdown :emerg_shutdown
   131 set :start_reactor:fuel_on :fuel_3
   132 set :start_reactor:t_startup :t_startup3
   133 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp23 :start_reactor*retval
-    * set :fuel_3 *tmp23
+  134 set :fuel_3 :start_reactor*retval
   135 set :t_startup3 .RET_T_STARTUP
   136 set :start_reactor:reactor reactor4
   137 set :start_reactor:reactor_num 4
 
   139 set :start_reactor:fuel_on :fuel_4
   140 set :start_reactor:t_startup :t_startup4
   141 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_4 *tmp24
+  142 set :fuel_4 :start_reactor*retval
   143 set :t_startup4 .RET_T_STARTUP
   144 set :start_reactor:reactor reactor5
   145 set :start_reactor:reactor_num 5
 
   147 set :start_reactor:fuel_on :fuel_5
   148 set :start_reactor:t_startup :t_startup5
   149 call *label3 :start_reactor*retaddr :start_reactor*retval
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_5 *tmp25
+  150 set :fuel_5 :start_reactor*retval
   151 set :t_startup5 .RET_T_STARTUP
   152 jump *label17 notEqual :fuel_3 false
   153 label *label19
 
   184 set :throttle_blast:reactors_fueled *tmp28
   185 set :throttle_blast:emerg_shutdown :emerg_shutdown
   186 sensor *tmp30 .NODE @powerNetStored
-    * op floor *tmp31 *tmp30
-    * set :throttle_blast:charge *tmp31
+  187 op floor :throttle_blast:charge *tmp30
   188 sensor *tmp32 .NODE @powerNetIn
   189 sensor *tmp33 .NODE @powerNetOut
   190 op sub *tmp34 *tmp32 *tmp33
-    * op floor *tmp35 *tmp34
-    * set :throttle_blast:surplus *tmp35
-    * sensor *tmp36 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp36
+  191 op floor :throttle_blast:surplus *tmp34
+  192 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   193 op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
   194 jump *label29 equal *tmp37 false
   195 label *label30
 
   241 print "n"
   242 label *label34
   243 label *label27
-    * op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp29 *tmp43
+  244 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   245 jump *label25 always
   246 set *tmp29 null
   247 label *label25
 
   257 # "Function: def diff_generators()"
   258 sensor *tmp48 .NODE @powerNetStored
   259 sensor *tmp49 .NODE @powerNetCapacity
-    * op div *tmp50 *tmp48 *tmp49
-    * set :diff_generators:stored_pc *tmp50
+  260 op div :diff_generators:stored_pc *tmp48 *tmp49
   261 op greaterThan *tmp51 :diff_generators:stored_pc 0.9
   262 jump *label38 equal *tmp51 false
   263 label *label41
 
   277 label *label37
   278 set :kilo:val .AVG_SURPLUS
   279 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp58 :kilo*retval
-    * set :surplus *tmp58
-    * sensor *tmp59 .NODE @powerNetStored
-    * set :kilo:val *tmp59
+  280 set :surplus :kilo*retval
+  281 sensor :kilo:val .NODE @powerNetStored
   282 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp60 :kilo*retval
-    * set :charge *tmp60
+  283 set :charge :kilo*retval
   284 op greaterThan *tmp61 .START_POWER_REQ 0
   285 jump *label42 equal *tmp61 false
   286 set :kilo:val .START_POWER_REQ
   287 call *label0 :kilo*retaddr :kilo*retval
-    * set *tmp63 :kilo*retval
-    * set :req *tmp63
+  288 set :req :kilo*retval
   289 print "Req "
   290 print :req
   291 print "kJ / "
 
   305 # "Function: def update_reactors_desired()"
   306 sensor *tmp65 .NODE @powerNetStored
   307 sensor *tmp66 .NODE @powerNetCapacity
-    * op div *tmp67 *tmp65 *tmp66
-    * set :update_reactors_desired:stored *tmp67
+  308 op div :update_reactors_desired:stored *tmp65 *tmp66
   309 op greaterThan *tmp68 :update_reactors_desired:stored 0.98
   310 jump *label45 equal *tmp68 false
   311 label *label48
 
   334 label *label53
   335 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
   336 op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
-    * op max *tmp80 1 *tmp79
-    * set :update_reactors_desired:needed *tmp80
+  337 op max :update_reactors_desired:needed 1 *tmp79
   338 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp82 5 *tmp81
-    * set .REACTORS_DESIRED *tmp82
+  339 op min .REACTORS_DESIRED 5 *tmp81
   340 jump *label52 always
   341 label *label51
   342 label *label52
 
   359 label *label0
   360 # "Function: def kilo(in val)"
   361 op idiv *tmp85 :kilo:val 100
-    * op div *tmp86 *tmp85 10
-    * set :kilo*retval *tmp86
+  362 op div :kilo*retval *tmp85 10
   363 jump *label57 always
   364 set :kilo*retval null
   365 label *label57
 
   390 label *label2
   391 # "Function: def calc_charge_req(in reactor, in time)"
   392 op sub *tmp94 @tick :calc_charge_req:time
-    * op idiv *tmp95 *tmp94 60
-    * set :calc_charge_req:secs *tmp95
+  393 op idiv :calc_charge_req:secs *tmp94 60
   394 op greaterThan *tmp96 :calc_charge_req:secs 30
   395 jump *label66 notEqual *tmp96 false
   396 label *label67
 
   404 jump *label65 always
   405 label *label64
   406 label *label65
-    * op sub *tmp100 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp100
+  407 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   408 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   409 op mul *tmp102 *tmp101 25
-    * op floor *tmp103 *tmp102
-    * set :calc_charge_req:charge_req *tmp103
+  410 op floor :calc_charge_req:charge_req *tmp102
   411 set :calc_charge_req*retval :calc_charge_req:charge_req
   412 jump *label63 always
   413 set :calc_charge_req*retval null
 
   418 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   419 set .RET_T_STARTUP :start_reactor:t_startup
   420 op sub *tmp104 @tick :start_reactor:t_startup
-    * op idiv *tmp105 *tmp104 60
-    * set :start_reactor:secs *tmp105
-    * sensor *tmp106 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp106
+  421 op idiv :start_reactor:secs *tmp104 60
+  422 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   423 set :start_reactor:supply_fuel true
-    * sensor *tmp107 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp107
-    * sensor *tmp108 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp108
+  424 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  425 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   426 sensor *tmp109 .NODE @powerNetStored
-    * op floor *tmp110 *tmp109
-    * set :start_reactor:charge *tmp110
+  427 op floor :start_reactor:charge *tmp109
   428 sensor *tmp111 .NODE @powerNetIn
   429 sensor *tmp112 .NODE @powerNetOut
   430 op sub *tmp113 *tmp111 *tmp112
-    * op floor *tmp114 *tmp113
-    * set :start_reactor:surplus *tmp114
+  431 op floor :start_reactor:surplus *tmp113
   432 op mul *tmp115 .AVG_SURPLUS 0.8
   433 op mul *tmp116 :start_reactor:surplus 0.2
-    * op add *tmp117 *tmp115 *tmp116
-    * set .AVG_SURPLUS *tmp117
-    * sensor *tmp118 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp118
+  434 op add .AVG_SURPLUS *tmp115 *tmp116
+  435 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   436 print "#"
   437 print :start_reactor:reactor_num
   438 print " "
   439 print "- "
   440 jump *label69 equal :start_reactor:emerg_shutdown false
-    * set *tmp120 :start_reactor:reactor
-    * control enabled *tmp120 false
+  441 control enabled :start_reactor:reactor false
   442 print "emergency mode"
   443 print "\n"
   444 set :start_reactor:supply_fuel false
 
   447 jump *label71 equal :start_reactor:enabled false
   448 op lessThan *tmp123 .REACTORS_DESIRED :start_reactor:reactor_num
   449 jump *label73 equal *tmp123 false
-    * set *tmp125 :start_reactor:reactor
-    * control enabled *tmp125 false
+  450 control enabled :start_reactor:reactor false
   451 print "STOP unwanted"
   452 print "\n"
   453 jump *label74 always
 
   460 jump *label75 equal *tmp129 false
   461 jump *label77 always
   462 label *label77
-    * set *tmp131 :start_reactor:reactor
-    * control enabled *tmp131 false
+  463 control enabled :start_reactor:reactor false
   464 print "STOP system fuel low"
   465 print "\n"
   466 jump *label76 always
   467 label *label75
   468 op lessThanEq *tmp133 :start_reactor:fuel 1
   469 jump *label79 equal *tmp133 false
-    * set *tmp135 :start_reactor:reactor
-    * control enabled *tmp135 false
+  470 control enabled :start_reactor:reactor false
   471 print "STOP fuel low"
   472 print "\n"
   473 jump *label80 always
   474 label *label79
   475 op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
   476 jump *label81 equal *tmp137 false
-    * set *tmp139 :start_reactor:reactor
-    * control enabled *tmp139 false
+  477 control enabled :start_reactor:reactor false
   478 print "STOP out of cryo"
   479 print "\n"
   480 jump *label82 always
 
   493 jump *label85 equal *tmp145 false
   494 jump *label87 always
   495 label *label87
-    * set *tmp147 :start_reactor:reactor
-    * control enabled *tmp147 false
+  496 control enabled :start_reactor:reactor false
   497 print "START FAIL battery"
   498 print "\n"
   499 set :start_reactor:supply_fuel false
   500 jump *label86 always
   501 label *label85
-    * op sub *tmp149 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp149
+  502 op sub :start_reactor:time_left 30 :start_reactor:secs
   503 print "Starting "
   504 print :start_reactor:time_left
   505 print " "
 
   517 jump *label89 equal *tmp151 false
   518 jump *label91 always
   519 label *label91
-    * set *tmp153 :start_reactor:reactor
-    * control enabled *tmp153 false
+  520 control enabled :start_reactor:reactor false
   521 print "ABANDON - battery crit"
   522 print "\n"
   523 set :start_reactor:supply_fuel false
   524 jump *label90 always
   525 label *label89
-    * op idiv *tmp155 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp155
-    * op div *tmp156 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp156
+  526 op idiv :start_reactor:mins :start_reactor:secs 6
+  527 op div :start_reactor:mins :start_reactor:mins 10
   528 print "RUN "
   529 print :start_reactor:mins
   530 print " "
 
   541 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   542 op sub *tmp158 *tmp157 .PWR_ABORT
   543 op div *tmp159 *tmp158 .PWR_REQ
-    * op mul *tmp160 *tmp159 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp160
+  544 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
   545 op div *tmp161 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp162 -0.1 *tmp161
-    * set :start_reactor:flow_units *tmp162
+  546 op max :start_reactor:flow_units -0.1 *tmp161
   547 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp164 .CRYO_REQ *tmp163
-    * set :start_reactor:cryo_req *tmp164
+  548 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
   549 op lessThan *tmp165 .REACTORS_DESIRED :start_reactor:reactor_num
   550 jump *label93 equal *tmp165 false
   551 print "IDLE"
 
   558 jump *label95 equal *tmp168 false
   559 op mul *tmp170 :start_reactor:flow_units 1000
   560 op floor *tmp171 *tmp170
-    * op div *tmp172 *tmp171 10
-    * set :start_reactor:flow *tmp172
+  561 op div :start_reactor:flow *tmp171 10
   562 op mul *tmp173 :start_reactor:charge_units 1000
   563 op floor *tmp174 *tmp173
-    * op div *tmp175 *tmp174 10
-    * set :start_reactor:charge *tmp175
+  564 op div :start_reactor:charge *tmp174 10
   565 print "WAIT power. (%"
   566 print :start_reactor:charge
   567 print "J + %"
 
   605 print "STARTUP"
   606 print "\n"
   607 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp186 :start_reactor:reactor
-    * control enabled *tmp186 true
+  608 control enabled :start_reactor:reactor true
   609 label *label106
   610 label *label104
   611 label *label98
 
   616 sensor *tmp188 :start_reactor:reactor @enabled
   617 op notEqual *tmp189 :start_reactor:enabled *tmp188
   618 jump *label107 equal *tmp189 false
-    * set *tmp191 @tick
-    * set .RET_T_STARTUP *tmp191
+  619 set .RET_T_STARTUP @tick
   620 jump *label108 always
   621 label *label107
   622 label *label108
 
   628 end
   629 label *label4
   630 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 *tmp192
-    * set :check_radar:enemy_found *tmp192
+  631 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   632 op notEqual *tmp193 :check_radar:enemy_found null
   633 jump *label110 equal *tmp193 false
   634 control enabled projector1 true
   635 control enabled projector2 true
-    * set *tmp197 .ULD_IN_1
-    * control config *tmp197 .FUEL_OFF
-    * set *tmp199 .ULD_OUT_1
-    * control config *tmp199 .FUEL
-    * set *tmp201 .ULD_IN_2
-    * control config *tmp201 .FUEL_OFF
-    * set *tmp203 .ULD_OUT_2
-    * control config *tmp203 .FUEL
-    * set *tmp205 .ULD_IN_MANY
-    * control config *tmp205 .FUEL_OFF
-    * set *tmp207 .ULD_OUT_MANY
-    * control config *tmp207 .FUEL
-    * set *tmp209 .ULD_MIXER
-    * control config *tmp209 .FUEL_OFF
+  636 control config .ULD_IN_1 .FUEL_OFF
+  637 control config .ULD_OUT_1 .FUEL
+  638 control config .ULD_IN_2 .FUEL_OFF
+  639 control config .ULD_OUT_2 .FUEL
+  640 control config .ULD_IN_MANY .FUEL_OFF
+  641 control config .ULD_OUT_MANY .FUEL
+  642 control config .ULD_MIXER .FUEL_OFF
   643 control enabled reactor1 false
   644 control enabled reactor2 false
   645 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-5 instructions):
 
   153 jump *label17 notEqual :fuel_4 false
   154 jump *label18 always
   155 label *label18
-    * jump *label17 notEqual :fuel_5 false
-    * jump *label15 always
+  156 jump *label15 equal :fuel_5 false
   157 label *label17
   158 set *tmp26 true
   159 jump *label16 always
 
   170 jump *label22 notEqual :fuel_2 false
   171 jump *label23 always
   172 label *label23
-    * jump *label22 notEqual :fuel_many false
-    * jump *label20 always
+  173 jump *label20 equal :fuel_many false
   174 label *label22
   175 set *tmp28 true
   176 jump *label21 always
 
   191 jump *label29 equal *tmp37 false
   192 label *label30
   193 op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label29 equal *tmp38 false
-    * jump *label28 always
+  194 jump *label28 notEqual *tmp38 false
   195 label *label29
-    * jump *label28 notEqual :throttle_blast:emerg_shutdown false
-    * jump *label26 always
+  196 jump *label26 equal :throttle_blast:emerg_shutdown false
   197 label *label28
   198 set :throttle_blast:limit 0
   199 print "Central Fuel at "
 
   391 label *label67
   392 sensor *tmp97 :calc_charge_req:reactor @enabled
   393 op equal *tmp98 *tmp97 false
-    * jump *label66 notEqual *tmp98 false
-    * jump *label64 always
+  394 jump *label64 equal *tmp98 false
   395 label *label66
   396 set :calc_charge_req*retval 0
   397 jump *label63 always

Modifications by Iterated phase, Condition Optimization, pass 1, iteration 1 (-36 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
-    * op notEqual *tmp9 switch1 null
-    * jump *label11 equal *tmp9 false
+   59 jump *label11 equal switch1 null
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
-    * op equal *tmp11 *tmp10 false
-    * jump *label11 equal *tmp11 false
+   62 jump *label11 notEqual *tmp10 false
    63 jump *label13 always
    64 label *label13
    65 print "User has disabled emergency switch"
 
   184 op sub *tmp34 *tmp32 *tmp33
   185 op floor :throttle_blast:surplus *tmp34
   186 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
-    * jump *label29 equal *tmp37 false
+  187 jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
   188 label *label30
-    * op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label28 notEqual *tmp38 false
+  189 jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
   190 label *label29
   191 jump *label26 equal :throttle_blast:emerg_shutdown false
   192 label *label28
 
   208 label *label32
   209 jump *label27 always
   210 label *label26
-    * op equal *tmp41 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp41 false
+  211 jump *label33 notEqual :throttle_blast:reactors_fueled false
   212 set :throttle_blast:limit .FUEL_LIMIT_LOW
   213 print "Fuel "
   214 print :throttle_blast:fuel_stored
 
   247 sensor *tmp48 .NODE @powerNetStored
   248 sensor *tmp49 .NODE @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp48 *tmp49
-    * op greaterThan *tmp51 :diff_generators:stored_pc 0.9
-    * jump *label38 equal *tmp51 false
+  250 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   251 label *label41
-    * op lessThan *tmp52 .START_POWER_REQ 10
-    * jump *label38 equal *tmp52 false
+  252 jump *label38 greaterThanEq .START_POWER_REQ 10
   253 jump *label40 always
   254 label *label40
   255 print "Differential now idle."
 
   268 sensor :kilo:val .NODE @powerNetStored
   269 call *label0 :kilo*retaddr :kilo*retval
   270 set :charge :kilo*retval
-    * op greaterThan *tmp61 .START_POWER_REQ 0
-    * jump *label42 equal *tmp61 false
+  271 jump *label42 lessThanEq .START_POWER_REQ 0
   272 set :kilo:val .START_POWER_REQ
   273 call *label0 :kilo*retaddr :kilo*retval
   274 set :req :kilo*retval
 
   292 sensor *tmp65 .NODE @powerNetStored
   293 sensor *tmp66 .NODE @powerNetCapacity
   294 op div :update_reactors_desired:stored *tmp65 *tmp66
-    * op greaterThan *tmp68 :update_reactors_desired:stored 0.98
-    * jump *label45 equal *tmp68 false
+  295 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   296 label *label48
   297 op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp70 .AVG_SURPLUS *tmp69
-    * jump *label45 equal *tmp70 false
+  298 jump *label45 lessThanEq .AVG_SURPLUS *tmp69
   299 jump *label47 always
   300 label *label47
-    * op greaterThan *tmp72 .REACTORS_DESIRED 2
-    * jump *label49 equal *tmp72 false
+  301 jump *label49 lessThanEq .REACTORS_DESIRED 2
   302 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   303 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   304 jump *label50 always
 
   307 jump *label46 always
   308 label *label45
   309 label *label46
-    * op lessThan *tmp74 :update_reactors_desired:stored 0.8
-    * jump *label51 equal *tmp74 false
+  310 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   311 label *label54
   312 op mul *tmp75 .GOAL_BUFFER 0.8
-    * op lessThan *tmp76 .AVG_SURPLUS *tmp75
-    * jump *label51 equal *tmp76 false
+  313 jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
   314 jump *label53 always
   315 label *label53
   316 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
 
   323 label *label52
   324 label *label44
   325 label *label43
-    * op notEqual *tmp83 .REACTORS_DESIRED 5
-    * jump *label55 equal *tmp83 false
+  326 jump *label55 equal .REACTORS_DESIRED 5
   327 print "Require only "
   328 print .REACTORS_DESIRED
   329 print "/5 reactors."
 
   356 label *label60
   357 control config *tmp87 *tmp89
   358 set *tmp90 :update_fuel:uld_out
-    * op equal *tmp92 :update_fuel:fuel false
-    * jump *label61 equal *tmp92 false
+  359 jump *label61 notEqual :update_fuel:fuel false
   360 set *tmp93 .FUEL
   361 jump *label62 always
   362 label *label61
 
   370 # "Function: def calc_charge_req(in reactor, in time)"
   371 op sub *tmp94 @tick :calc_charge_req:time
   372 op idiv :calc_charge_req:secs *tmp94 60
-    * op greaterThan *tmp96 :calc_charge_req:secs 30
-    * jump *label66 notEqual *tmp96 false
+  373 jump *label66 greaterThan :calc_charge_req:secs 30
   374 label *label67
   375 sensor *tmp97 :calc_charge_req:reactor @enabled
-    * op equal *tmp98 *tmp97 false
-    * jump *label64 equal *tmp98 false
+  376 jump *label64 notEqual *tmp97 false
   377 label *label66
   378 set :calc_charge_req*retval 0
   379 jump *label63 always
 
   421 jump *label70 always
   422 label *label69
   423 jump *label71 equal :start_reactor:enabled false
-    * op lessThan *tmp123 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label73 equal *tmp123 false
+  424 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   425 control enabled :start_reactor:reactor false
   426 print "STOP unwanted"
   427 print "\n"
   428 jump *label74 always
   429 label *label73
-    * op greaterThan *tmp127 :start_reactor:reactor_num 1
-    * jump *label75 equal *tmp127 false
+  430 jump *label75 lessThanEq :start_reactor:reactor_num 1
   431 label *label78
   432 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp129 :start_reactor:fuel_stored *tmp128
-    * jump *label75 equal *tmp129 false
+  433 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
   434 jump *label77 always
   435 label *label77
   436 control enabled :start_reactor:reactor false
 
   438 print "\n"
   439 jump *label76 always
   440 label *label75
-    * op lessThanEq *tmp133 :start_reactor:fuel 1
-    * jump *label79 equal *tmp133 false
+  441 jump *label79 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label80 always
   446 label *label79
-    * op lessThanEq *tmp137 :start_reactor:cryo .CRYO_ABORT
-    * jump *label81 equal *tmp137 false
+  447 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label82 always
   452 label *label81
-    * op lessThan *tmp141 :start_reactor:secs 30
-    * jump *label83 equal *tmp141 false
+  453 jump *label83 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   457 set :start_reactor:charge_req :calc_charge_req*retval
   458 op sub *tmp143 :start_reactor:charge :start_reactor:charge_req
-    * op lessThan *tmp144 *tmp143 .PWR_ABORT
-    * jump *label85 equal *tmp144 false
+  459 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   460 label *label88
-    * op lessThan *tmp145 :start_reactor:surplus .FLOW_ABORT
-    * jump *label85 equal *tmp145 false
+  461 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   462 jump *label87 always
   463 label *label87
   464 control enabled :start_reactor:reactor false
 
   478 label *label86
   479 jump *label84 always
   480 label *label83
-    * op lessThan *tmp150 :start_reactor:charge .PWR_ABANDON
-    * jump *label89 equal *tmp150 false
+  481 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   482 label *label92
-    * op lessThan *tmp151 :start_reactor:surplus .FLOW_ABORT
-    * jump *label89 equal *tmp151 false
+  483 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   484 jump *label91 always
   485 label *label91
   486 control enabled :start_reactor:reactor false
 
   512 op max :start_reactor:flow_units -0.1 *tmp161
   513 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * op lessThan *tmp165 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label93 equal *tmp165 false
+  515 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label94 always
   520 label *label93
   521 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp168 *tmp167 1
-    * jump *label95 equal *tmp168 false
+  522 jump *label95 greaterThanEq *tmp167 1
   523 op mul *tmp170 :start_reactor:flow_units 1000
   524 op floor *tmp171 *tmp170
   525 op div :start_reactor:flow *tmp171 10
 
   537 label *label95
   538 jump *label97 equal :start_reactor:fuel_on false
   539 label *label100
-    * op lessThan *tmp176 :start_reactor:fuel .FUEL_REQ
-    * jump *label97 equal *tmp176 false
+  540 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   541 jump *label99 always
   542 label *label99
   543 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp179 *tmp178 .FUEL_REQ
-    * jump *label101 equal *tmp179 false
+  544 jump *label101 lessThanEq *tmp178 .FUEL_REQ
   545 print "WAIT fuel"
   546 print "\n"
   547 jump *label102 always
 
   552 jump *label98 always
   553 label *label97
   554 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp182 :start_reactor:fuel_stored *tmp181
-    * jump *label103 equal *tmp182 false
+  555 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
   556 print "WAIT buffer fuel"
   557 print "\n"
   558 jump *label104 always
   559 label *label103
-    * op lessThan *tmp184 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label105 equal *tmp184 false
+  560 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   561 print "WAIT cryo"
   562 print "\n"
   563 jump *label106 always
 
   574 label *label72
   575 label *label70
   576 sensor *tmp188 :start_reactor:reactor @enabled
-    * op notEqual *tmp189 :start_reactor:enabled *tmp188
-    * jump *label107 equal *tmp189 false
+  577 jump *label107 equal :start_reactor:enabled *tmp188
   578 set .RET_T_STARTUP @tick
   579 jump *label108 always
   580 label *label107
 
   588 label *label4
   589 # "Function: def check_radar(in unit)"
   590 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp193 :check_radar:enemy_found null
-    * jump *label110 equal *tmp193 false
+  591 jump *label110 equal :check_radar:enemy_found null
   592 control enabled projector1 true
   593 control enabled projector2 true
   594 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-17 instructions):
 
    60 label *label14
    61 sensor *tmp10 switch1 @enabled
    62 jump *label11 notEqual *tmp10 false
-    * jump *label13 always
    63 label *label13
    64 print "User has disabled emergency switch"
    65 print "\n"
    66 set *tmp8 true
    67 jump *label10 always
-    * jump *label12 always
    68 label *label11
    69 label *label12
    70 set *tmp8 false
 
   146 jump *label17 notEqual :fuel_3 false
   147 label *label19
   148 jump *label17 notEqual :fuel_4 false
-    * jump *label18 always
   149 label *label18
   150 jump *label15 equal :fuel_5 false
   151 label *label17
 
   162 jump *label22 notEqual :fuel_1 false
   163 label *label24
   164 jump *label22 notEqual :fuel_2 false
-    * jump *label23 always
   165 label *label23
   166 jump *label20 equal :fuel_many false
   167 label *label22
 
   246 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   247 label *label41
   248 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * jump *label40 always
   249 label *label40
   250 print "Differential now idle."
   251 print "\n"
 
   291 label *label48
   292 op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
   293 jump *label45 lessThanEq .AVG_SURPLUS *tmp69
-    * jump *label47 always
   294 label *label47
   295 jump *label49 lessThanEq .REACTORS_DESIRED 2
   296 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   297 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label50 always
   298 label *label49
   299 label *label50
-    * jump *label46 always
   300 label *label45
   301 label *label46
   302 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   303 label *label54
   304 op mul *tmp75 .GOAL_BUFFER 0.8
   305 jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
-    * jump *label53 always
   306 label *label53
   307 op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
   308 op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
   309 op max :update_reactors_desired:needed 1 *tmp79
   310 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   311 op min .REACTORS_DESIRED 5 *tmp81
-    * jump *label52 always
   312 label *label51
   313 label *label52
   314 label *label44
 
   318 print .REACTORS_DESIRED
   319 print "/5 reactors."
   320 print "\n"
-    * jump *label56 always
   321 label *label55
   322 label *label56
   323 printflush message1
 
   366 label *label66
   367 set :calc_charge_req*retval 0
   368 jump *label63 always
-    * jump *label65 always
   369 label *label64
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   419 label *label78
   420 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   421 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * jump *label77 always
   422 label *label77
   423 control enabled :start_reactor:reactor false
   424 print "STOP system fuel low"
 
   446 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   447 label *label88
   448 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label87 always
   449 label *label87
   450 control enabled :start_reactor:reactor false
   451 print "START FAIL battery"
 
   467 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   468 label *label92
   469 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label91 always
   470 label *label91
   471 control enabled :start_reactor:reactor false
   472 print "ABANDON - battery crit"
 
   523 jump *label97 equal :start_reactor:fuel_on false
   524 label *label100
   525 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * jump *label99 always
   526 label *label99
   527 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   528 jump *label101 lessThanEq *tmp178 .FUEL_REQ
 
   560 sensor *tmp188 :start_reactor:reactor @enabled
   561 jump *label107 equal :start_reactor:enabled *tmp188
   562 set .RET_T_STARTUP @tick
-    * jump *label108 always
   563 label *label107
   564 label *label108
   565 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   370 label *label65
   371 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   372 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp102 *tmp101 25
-    * op floor :calc_charge_req:charge_req *tmp102
+  373 op idiv :calc_charge_req:charge_req *tmp101 0.04
   374 set :calc_charge_req*retval :calc_charge_req:charge_req
   375 jump *label63 always
   376 set :calc_charge_req*retval null
 
   504 label *label93
   505 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
   506 jump *label95 greaterThanEq *tmp167 1
-    * op mul *tmp170 :start_reactor:flow_units 1000
-    * op floor *tmp171 *tmp170
+  507 op idiv *tmp171 :start_reactor:flow_units 0.001
   508 op div :start_reactor:flow *tmp171 10
-    * op mul *tmp173 :start_reactor:charge_units 1000
-    * op floor *tmp174 *tmp173
+  509 op idiv *tmp174 :start_reactor:charge_units 0.001
   510 op div :start_reactor:charge *tmp174 10
   511 print "WAIT power. (%"
   512 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 call *label4 :check_radar*retaddr :check_radar*retval
    57 set :emerg_shutdown :check_radar*retval
    58 # "Function: def check_manual_shutdown()"
 
    69 label *label12
    70 set *tmp8 false
    71 jump *label10 always
-    * set *tmp8 null
    72 label *label10
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 set :calc_charge_req:reactor reactor1
    75 set :calc_charge_req:time :t_startup1
    76 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
 
    99 call *label3 :start_reactor*retaddr :start_reactor*retval
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  102 set :update_fuel:fuel :start_reactor*retval
+  103 set :update_fuel:uld_in unloader1
+  104 set :update_fuel:uld_out unloader2
   105 call *label1 :update_fuel*retaddr :update_fuel*retval
   106 set :start_reactor:reactor reactor2
   107 set :start_reactor:reactor_num 2
 
   111 call *label3 :start_reactor*retaddr :start_reactor*retval
   112 set :fuel_2 :start_reactor*retval
   113 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  114 set :update_fuel:fuel :start_reactor*retval
+  115 set :update_fuel:uld_in unloader3
+  116 set :update_fuel:uld_out unloader4
   117 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * set :check_radar:unit .TOWER
+  118 set :check_radar:unit cyclone1
   119 call *label4 :check_radar*retaddr :check_radar*retval
   120 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   121 set :start_reactor:reactor reactor3
 
   146 label *label19
   147 jump *label17 notEqual :fuel_4 false
   148 label *label18
-    * jump *label15 equal :fuel_5 false
+  149 jump *label15 equal :start_reactor*retval false
   150 label *label17
   151 set *tmp26 true
   152 jump *label16 always
 
   154 set *tmp26 false
   155 label *label16
   156 set :fuel_many *tmp26
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  157 set :update_fuel:fuel *tmp26
+  158 set :update_fuel:uld_in unloader5
+  159 set :update_fuel:uld_out unloader6
   160 call *label1 :update_fuel*retaddr :update_fuel*retval
   161 jump *label22 notEqual :fuel_1 false
   162 label *label24
   163 jump *label22 notEqual :fuel_2 false
   164 label *label23
-    * jump *label20 equal :fuel_many false
+  165 jump *label20 equal *tmp26 false
   166 label *label22
   167 set *tmp28 true
   168 jump *label21 always
 
   172 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   173 set :throttle_blast:reactors_fueled *tmp28
   174 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp30 .NODE @powerNetStored
+  175 sensor *tmp30 node1 @powerNetStored
   176 op floor :throttle_blast:charge *tmp30
-    * sensor *tmp32 .NODE @powerNetIn
-    * sensor *tmp33 .NODE @powerNetOut
+  177 sensor *tmp32 node1 @powerNetIn
+  178 sensor *tmp33 node1 @powerNetOut
   179 op sub *tmp34 *tmp32 *tmp33
   180 op floor :throttle_blast:surplus *tmp34
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * jump *label29 greaterThanEq :throttle_blast:charge .PWR_ABORT
+  181 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  182 jump *label29 greaterThanEq :throttle_blast:charge 5000
   183 label *label30
-    * jump *label28 lessThan :throttle_blast:surplus .FLOW_ABORT
+  184 jump *label28 lessThan :throttle_blast:surplus -500
   185 label *label29
-    * jump *label26 equal :throttle_blast:emerg_shutdown false
+  186 jump *label26 equal :emerg_shutdown false
   187 label *label28
   188 set :throttle_blast:limit 0
   189 print "Central Fuel at "
   190 print :throttle_blast:fuel_stored
   191 print " "
   192 print "/ "
-    * print :throttle_blast:limit
+  193 print 0
   194 print " "
   195 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  196 jump *label31 equal :emerg_shutdown false
   197 print " Enemies detected."
   198 print "\n"
   199 jump *label32 always
 
   203 label *label32
   204 jump *label27 always
   205 label *label26
-    * jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  206 jump *label33 notEqual *tmp28 false
+  207 set :throttle_blast:limit 150
   208 print "Fuel "
   209 print :throttle_blast:fuel_stored
   210 print " "
   211 print "/ "
-    * print :throttle_blast:limit
+  212 print .FUEL_LIMIT_LOW
   213 print " "
   214 print "(due to emergency)"
   215 print "\n"
   216 jump *label34 always
   217 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  218 set :throttle_blast:limit 800
   219 print "Fuel "
   220 print :throttle_blast:fuel_stored
   221 print " "
   222 print "/ "
-    * print :throttle_blast:limit
+  223 print .FUEL_LIMIT
   224 print "\"
   225 print "n"
   226 label *label34
   227 label *label27
   228 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   229 jump *label25 always
-    * set *tmp29 null
   230 label *label25
   231 set :feed_mixers *tmp29
-    * set *tmp44 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp46 .MIXER_IN
+  232 set *tmp44 unloader7
+  233 jump *label35 equal *tmp29 false
+  234 set *tmp46 @pyratite
   235 jump *label36 always
   236 label *label35
-    * set *tmp46 .FUEL_OFF
+  237 set *tmp46 @scrap
   238 label *label36
-    * control config *tmp44 *tmp46
+  239 control config .ULD_MIXER *tmp46
   240 # "Function: def diff_generators()"
-    * sensor *tmp48 .NODE @powerNetStored
-    * sensor *tmp49 .NODE @powerNetCapacity
+  241 sensor *tmp48 node1 @powerNetStored
+  242 sensor *tmp49 node1 @powerNetCapacity
   243 op div :diff_generators:stored_pc *tmp48 *tmp49
   244 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   245 label *label41
 
   258 set :kilo:val .AVG_SURPLUS
   259 call *label0 :kilo*retaddr :kilo*retval
   260 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  261 sensor :kilo:val node1 @powerNetStored
   262 call *label0 :kilo*retaddr :kilo*retval
   263 set :charge :kilo*retval
   264 jump *label42 lessThanEq .START_POWER_REQ 0
 
   266 call *label0 :kilo*retaddr :kilo*retval
   267 set :req :kilo*retval
   268 print "Req "
-    * print :req
+  269 print :kilo*retval
   270 print "kJ / "
   271 print :charge
   272 print "kJ. "
 
   278 print "Power "
   279 print :surplus
   280 print "kW, "
-    * print :charge
+  281 print :kilo*retval
   282 print "kJ"
   283 print "\n"
   284 # "Function: def update_reactors_desired()"
-    * sensor *tmp65 .NODE @powerNetStored
-    * sensor *tmp66 .NODE @powerNetCapacity
+  285 sensor *tmp65 node1 @powerNetStored
+  286 sensor *tmp66 node1 @powerNetCapacity
   287 op div :update_reactors_desired:stored *tmp65 *tmp66
   288 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   289 label *label48
-    * op add *tmp69 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * jump *label45 lessThanEq .AVG_SURPLUS *tmp69
+  290 op add *tmp69 6500 10000
+  291 jump *label45 lessThanEq .AVG_SURPLUS 16500
   292 label *label47
   293 jump *label49 lessThanEq .REACTORS_DESIRED 2
   294 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  295 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   296 label *label49
   297 label *label50
   298 label *label45
   299 label *label46
   300 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   301 label *label54
-    * op mul *tmp75 .GOAL_BUFFER 0.8
-    * jump *label51 greaterThanEq .AVG_SURPLUS *tmp75
+  302 op mul *tmp75 10000 0.8
+  303 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   304 label *label53
-    * op sub *tmp78 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp79 *tmp78 .GENERATOR_OUTPUT
+  305 op sub *tmp78 .AVG_SURPLUS 10000
+  306 op idiv *tmp79 *tmp78 6500
   307 op max :update_reactors_desired:needed 1 *tmp79
   308 op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
   309 op min .REACTORS_DESIRED 5 *tmp81
 
   328 op idiv *tmp85 :kilo:val 100
   329 op div :kilo*retval *tmp85 10
   330 jump *label57 always
-    * set :kilo*retval null
   331 label *label57
   332 return :kilo*retaddr
   333 end
 
   340 label *label59
   341 set *tmp89 .FUEL_OFF
   342 label *label60
-    * control config *tmp87 *tmp89
+  343 control config :update_fuel:uld_in *tmp89
   344 set *tmp90 :update_fuel:uld_out
   345 jump *label61 notEqual :update_fuel:fuel false
   346 set *tmp93 .FUEL
 
   348 label *label61
   349 set *tmp93 .FUEL_OFF
   350 label *label62
-    * control config *tmp90 *tmp93
+  351 control config :update_fuel:uld_out *tmp93
   352 label *label58
   353 return :update_fuel*retaddr
   354 end
 
   370 op idiv :calc_charge_req:charge_req *tmp101 0.04
   371 set :calc_charge_req*retval :calc_charge_req:charge_req
   372 jump *label63 always
-    * set :calc_charge_req*retval null
   373 label *label63
   374 return :calc_charge_req*retaddr
   375 end
 
   437 set :calc_charge_req:time :start_reactor:t_startup
   438 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   439 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp143 :start_reactor:charge :start_reactor:charge_req
+  440 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   441 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   442 label *label88
   443 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   453 print :start_reactor:time_left
   454 print " "
   455 print "secs, req "
-    * print :start_reactor:charge_req
+  456 print :calc_charge_req*retval
   457 print "J"
   458 print "\n"
   459 label *label86
 
   557 label *label108
   558 set :start_reactor*retval :start_reactor:supply_fuel
   559 jump *label68 always
-    * set :start_reactor*retval null
   560 label *label68
   561 return :start_reactor*retaddr
   562 end
 
   580 control enabled reactor5 false
   581 set :check_radar*retval true
   582 jump *label109 always
-    * set *tmp194 null
   583 jump *label111 always
   584 label *label110
   585 control enabled projector1 false
   586 control enabled projector2 false
   587 set :check_radar*retval false
   588 jump *label109 always
-    * set *tmp194 null
   589 label *label111
-    * set :check_radar*retval *tmp194
+  590 set :check_radar*retval null
   591 label *label109
   592 return :check_radar*retaddr
   593 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-17 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 call *label4 :check_radar*retaddr :check_radar*retval
-    * set :emerg_shutdown :check_radar*retval
    53 # "Function: def check_manual_shutdown()"
    54 jump *label11 equal switch1 null
    55 label *label14
 
   148 label *label15
   149 set *tmp26 false
   150 label *label16
-    * set :fuel_many *tmp26
   151 set :update_fuel:fuel *tmp26
   152 set :update_fuel:uld_in unloader5
   153 set :update_fuel:uld_out unloader6
 
   164 set *tmp28 false
   165 label *label21
   166 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
-    * set :throttle_blast:reactors_fueled *tmp28
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   167 sensor *tmp30 node1 @powerNetStored
   168 op floor :throttle_blast:charge *tmp30
   169 sensor *tmp32 node1 @powerNetIn
 
   201 print :throttle_blast:fuel_stored
   202 print " "
   203 print "/ "
-    * print .FUEL_LIMIT_LOW
+  204 print 150
   205 print " "
   206 print "(due to emergency)"
   207 print "\n"
 
   212 print :throttle_blast:fuel_stored
   213 print " "
   214 print "/ "
-    * print .FUEL_LIMIT
+  215 print 800
   216 print "\"
   217 print "n"
   218 label *label34
 
   220 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   221 jump *label25 always
   222 label *label25
-    * set :feed_mixers *tmp29
-    * set *tmp44 unloader7
   223 jump *label35 equal *tmp29 false
   224 set *tmp46 @pyratite
   225 jump *label36 always
   226 label *label35
   227 set *tmp46 @scrap
   228 label *label36
-    * control config .ULD_MIXER *tmp46
+  229 control config unloader7 *tmp46
   230 # "Function: def diff_generators()"
   231 sensor *tmp48 node1 @powerNetStored
   232 sensor *tmp49 node1 @powerNetCapacity
 
   254 jump *label42 lessThanEq .START_POWER_REQ 0
   255 set :kilo:val .START_POWER_REQ
   256 call *label0 :kilo*retaddr :kilo*retval
-    * set :req :kilo*retval
   257 print "Req "
   258 print :kilo*retval
   259 print "kJ / "
 
   276 op div :update_reactors_desired:stored *tmp65 *tmp66
   277 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
   278 label *label48
-    * op add *tmp69 6500 10000
   279 jump *label45 lessThanEq .AVG_SURPLUS 16500
   280 label *label47
   281 jump *label49 lessThanEq .REACTORS_DESIRED 2
 
   287 label *label46
   288 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
   289 label *label54
-    * op mul *tmp75 10000 0.8
   290 jump *label51 greaterThanEq .AVG_SURPLUS 8000
   291 label *label53
   292 op sub *tmp78 .AVG_SURPLUS 10000
 
   320 end
   321 label *label1
   322 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * set *tmp87 :update_fuel:uld_in
   323 jump *label59 equal :update_fuel:fuel false
   324 set *tmp89 .FUEL
   325 jump *label60 always
 
   327 set *tmp89 .FUEL_OFF
   328 label *label60
   329 control config :update_fuel:uld_in *tmp89
-    * set *tmp90 :update_fuel:uld_out
   330 jump *label61 notEqual :update_fuel:fuel false
   331 set *tmp93 .FUEL
   332 jump *label62 always
 
   421 set :calc_charge_req:reactor :start_reactor:reactor
   422 set :calc_charge_req:time :start_reactor:t_startup
   423 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
-    * set :start_reactor:charge_req :calc_charge_req*retval
   424 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   425 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   426 label *label88
 
   571 set :check_radar*retval false
   572 jump *label109 always
   573 label *label111
-    * set :check_radar*retval null
   574 label *label109
   575 return :check_radar*retaddr
   576 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, Boolean Optimization, pass 1, iteration 1 (-20 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp218 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp218 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
    45 call *label4 :check_radar*retaddr :check_radar*retval
    46 # "Function: def check_manual_shutdown()"
    47 jump *label11 equal switch1 null
-    * label *label14
    48 sensor *tmp10 switch1 @enabled
    49 jump *label11 notEqual *tmp10 false
-    * label *label13
    50 print "User has disabled emergency switch"
    51 print "\n"
    52 set *tmp8 true
 
   128 call *label3 :start_reactor*retaddr :start_reactor*retval
   129 set :fuel_5 :start_reactor*retval
   130 set :t_startup5 .RET_T_STARTUP
-    * jump *label17 notEqual :fuel_3 false
-    * label *label19
-    * jump *label17 notEqual :fuel_4 false
-    * label *label18
-    * jump *label15 equal :start_reactor*retval false
-    * label *label17
-    * set *tmp26 true
-    * jump *label16 always
-    * label *label15
-    * set *tmp26 false
-    * label *label16
+  131 op or *tmp219 :fuel_3 :fuel_4
+  132 op or *tmp26 *tmp219 :start_reactor*retval
   133 set :update_fuel:fuel *tmp26
   134 set :update_fuel:uld_in unloader5
   135 set :update_fuel:uld_out unloader6
   136 call *label1 :update_fuel*retaddr :update_fuel*retval
-    * jump *label22 notEqual :fuel_1 false
-    * label *label24
-    * jump *label22 notEqual :fuel_2 false
-    * label *label23
-    * jump *label20 equal *tmp26 false
-    * label *label22
-    * set *tmp28 true
-    * jump *label21 always
-    * label *label20
-    * set *tmp28 false
-    * label *label21
+  137 op or *tmp220 :fuel_1 :fuel_2
+  138 op or *tmp28 *tmp220 *tmp26
   139 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
   140 sensor *tmp30 node1 @powerNetStored
   141 op floor :throttle_blast:charge *tmp30
 
   145 op floor :throttle_blast:surplus *tmp34
   146 sensor :throttle_blast:fuel_stored vault1 @blast-compound
   147 jump *label29 greaterThanEq :throttle_blast:charge 5000
-    * label *label30
   148 jump *label28 lessThan :throttle_blast:surplus -500
   149 label *label29
   150 jump *label26 equal :emerg_shutdown false
 
   192 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   193 jump *label25 always
   194 label *label25
-    * jump *label35 equal *tmp29 false
-    * set *tmp46 @pyratite
-    * jump *label36 always
-    * label *label35
-    * set *tmp46 @scrap
-    * label *label36
+  195 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   196 control config unloader7 *tmp46
   197 # "Function: def diff_generators()"
   198 sensor *tmp48 node1 @powerNetStored
   199 sensor *tmp49 node1 @powerNetCapacity
   200 op div :diff_generators:stored_pc *tmp48 *tmp49
   201 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
-    * label *label41
   202 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * label *label40
   203 print "Differential now idle."
   204 print "\n"
   205 control enabled generator1 false
 
   240 sensor *tmp66 node1 @powerNetCapacity
   241 op div :update_reactors_desired:stored *tmp65 *tmp66
   242 jump *label45 lessThanEq :update_reactors_desired:stored 0.98
-    * label *label48
   243 jump *label45 lessThanEq .AVG_SURPLUS 16500
-    * label *label47
   244 jump *label49 lessThanEq .REACTORS_DESIRED 2
   245 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   246 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
 
   249 label *label45
   250 label *label46
   251 jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
-    * label *label54
   252 jump *label51 greaterThanEq .AVG_SURPLUS 8000
-    * label *label53
   253 op sub *tmp78 .AVG_SURPLUS 10000
   254 op idiv *tmp79 *tmp78 6500
   255 op max :update_reactors_desired:needed 1 *tmp79
 
   281 end
   282 label *label1
   283 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * jump *label59 equal :update_fuel:fuel false
-    * set *tmp89 .FUEL
-    * jump *label60 always
-    * label *label59
-    * set *tmp89 .FUEL_OFF
-    * label *label60
+  284 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   285 control config :update_fuel:uld_in *tmp89
-    * jump *label61 notEqual :update_fuel:fuel false
-    * set *tmp93 .FUEL
-    * jump *label62 always
-    * label *label61
-    * set *tmp93 .FUEL_OFF
-    * label *label62
+  286 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   287 control config :update_fuel:uld_out *tmp93
   288 label *label58
   289 return :update_fuel*retaddr
 
   293 op sub *tmp94 @tick :calc_charge_req:time
   294 op idiv :calc_charge_req:secs *tmp94 60
   295 jump *label66 greaterThan :calc_charge_req:secs 30
-    * label *label67
   296 sensor *tmp97 :calc_charge_req:reactor @enabled
   297 jump *label64 notEqual *tmp97 false
   298 label *label66
 
   346 jump *label74 always
   347 label *label73
   348 jump *label75 lessThanEq :start_reactor:reactor_num 1
-    * label *label78
   349 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   350 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * label *label77
   351 control enabled :start_reactor:reactor false
   352 print "STOP system fuel low"
   353 print "\n"
 
   371 call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
   372 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   373 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
-    * label *label88
   374 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label87
   375 control enabled :start_reactor:reactor false
   376 print "START FAIL battery"
   377 print "\n"
 
   390 jump *label84 always
   391 label *label83
   392 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * label *label92
   393 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label91
   394 control enabled :start_reactor:reactor false
   395 print "ABANDON - battery crit"
   396 print "\n"
 
   442 jump *label96 always
   443 label *label95
   444 jump *label97 equal :start_reactor:fuel_on false
-    * label *label100
   445 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * label *label99
   446 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   447 jump *label101 lessThanEq *tmp178 .FUEL_REQ
   448 print "WAIT fuel"
 
   476 label *label94
   477 label *label72
   478 label *label70
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * jump *label107 equal :start_reactor:enabled *tmp188
-    * set .RET_T_STARTUP @tick
-    * label *label107
-    * label *label108
+  479 sensor *tmp188 :start_reactor:reactor @enabled
+  480 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick .RET_T_STARTUP
   481 set :start_reactor*retval :start_reactor:supply_fuel
   482 jump *label68 always
   483 label *label68

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   211 label *label39
   212 label *label37
   213 set :kilo:val .AVG_SURPLUS
-    * call *label0 :kilo*retaddr :kilo*retval
+  214 label *label114
+  215 # "Function: def kilo(in val)"
+  216 op idiv *tmp85 :kilo:val 100
+  217 op div :kilo*retval *tmp85 10
+  218 jump *label115 always
+  219 label *label115
   220 set :surplus :kilo*retval
   221 sensor :kilo:val node1 @powerNetStored
-    * call *label0 :kilo*retaddr :kilo*retval
+  222 label *label116
+  223 # "Function: def kilo(in val)"
+  224 op idiv *tmp85 :kilo:val 100
+  225 op div :kilo*retval *tmp85 10
+  226 jump *label117 always
+  227 label *label117
   228 set :charge :kilo*retval
   229 jump *label42 lessThanEq .START_POWER_REQ 0
   230 set :kilo:val .START_POWER_REQ
-    * call *label0 :kilo*retaddr :kilo*retval
+  231 label *label118
+  232 # "Function: def kilo(in val)"
+  233 op idiv *tmp85 :kilo:val 100
+  234 op div :kilo*retval *tmp85 10
+  235 jump *label119 always
+  236 label *label119
   237 print "Req "
   238 print :kilo*retval
   239 print "kJ / "
 
   286 jump *label7 always
   287 label *label9
   288 end
-    * label *label0
-    * # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
-    * op div :kilo*retval *tmp85 10
-    * jump *label57 always
-    * label *label57
-    * return :kilo*retaddr
-    * end
   289 label *label1
   290 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   291 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   213 set :kilo:val .AVG_SURPLUS
   214 label *label114
   215 # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
+  216 op idiv *tmp85 .AVG_SURPLUS 100
   217 op div :kilo*retval *tmp85 10
   218 jump *label115 always
   219 label *label115
 
   230 set :kilo:val .START_POWER_REQ
   231 label *label118
   232 # "Function: def kilo(in val)"
-    * op idiv *tmp85 :kilo:val 100
+  233 op idiv *tmp85 .START_POWER_REQ 100
   234 op div :kilo*retval *tmp85 10
   235 jump *label119 always
   236 label *label119

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   210 control enabled generator2 true
   211 label *label39
   212 label *label37
-    * set :kilo:val .AVG_SURPLUS
   213 label *label114
   214 # "Function: def kilo(in val)"
   215 op idiv *tmp85 .AVG_SURPLUS 100
 
   226 label *label117
   227 set :charge :kilo*retval
   228 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   229 label *label118
   230 # "Function: def kilo(in val)"
   231 op idiv *tmp85 .START_POWER_REQ 100

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
    88 set :update_fuel:fuel :start_reactor*retval
    89 set :update_fuel:uld_in unloader1
    90 set :update_fuel:uld_out unloader2
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+   91 label *label120
+   92 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+   93 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+   94 control config :update_fuel:uld_in *tmp89
+   95 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+   96 control config :update_fuel:uld_out *tmp93
+   97 label *label121
    98 set :start_reactor:reactor reactor2
    99 set :start_reactor:reactor_num 2
   100 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   106 set :update_fuel:fuel :start_reactor*retval
   107 set :update_fuel:uld_in unloader3
   108 set :update_fuel:uld_out unloader4
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  109 label *label122
+  110 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  111 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  112 control config :update_fuel:uld_in *tmp89
+  113 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  114 control config :update_fuel:uld_out *tmp93
+  115 label *label123
   116 set :check_radar:unit cyclone1
   117 call *label4 :check_radar*retaddr :check_radar*retval
   118 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   145 set :update_fuel:fuel *tmp26
   146 set :update_fuel:uld_in unloader5
   147 set :update_fuel:uld_out unloader6
-    * call *label1 :update_fuel*retaddr :update_fuel*retval
+  148 label *label124
+  149 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
+  150 select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  151 control config :update_fuel:uld_in *tmp89
+  152 select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  153 control config :update_fuel:uld_out *tmp93
+  154 label *label125
   155 op or *tmp220 :fuel_1 :fuel_2
   156 op or *tmp28 *tmp220 *tmp26
   157 # "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
 
   302 jump *label7 always
   303 label *label9
   304 end
-    * label *label1
-    * # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
-    * label *label58
-    * return :update_fuel*retaddr
-    * end
   305 label *label2
   306 # "Function: def calc_charge_req(in reactor, in time)"
   307 op sub *tmp94 @tick :calc_charge_req:time

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    90 set :update_fuel:uld_out unloader2
    91 label *label120
    92 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+   93 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+   94 control config unloader1 *tmp89
+   95 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+   96 control config unloader2 *tmp93
    97 label *label121
    98 set :start_reactor:reactor reactor2
    99 set :start_reactor:reactor_num 2
 
   108 set :update_fuel:uld_out unloader4
   109 label *label122
   110 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+  111 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  112 control config unloader3 *tmp89
+  113 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  114 control config unloader4 *tmp93
   115 label *label123
   116 set :check_radar:unit cyclone1
   117 call *label4 :check_radar*retaddr :check_radar*retval
 
   147 set :update_fuel:uld_out unloader6
   148 label *label124
   149 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp89
-    * select *tmp93 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp93
+  150 select *tmp89 notEqual *tmp26 false @blast-compound @scrap
+  151 control config unloader5 *tmp89
+  152 select *tmp93 equal *tmp26 false @blast-compound @scrap
+  153 control config unloader6 *tmp93
   154 label *label125
   155 op or *tmp220 :fuel_1 :fuel_2
   156 op or *tmp28 *tmp220 *tmp26

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    85 call *label3 :start_reactor*retaddr :start_reactor*retval
    86 set :fuel_1 :start_reactor*retval
    87 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
    88 label *label120
    89 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
    90 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
 
   100 call *label3 :start_reactor*retaddr :start_reactor*retval
   101 set :fuel_2 :start_reactor*retval
   102 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   103 label *label122
   104 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   105 select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
 
   136 set :t_startup5 .RET_T_STARTUP
   137 op or *tmp219 :fuel_3 :fuel_4
   138 op or *tmp26 *tmp219 :start_reactor*retval
-    * set :update_fuel:fuel *tmp26
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   139 label *label124
   140 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
   141 select *tmp89 notEqual *tmp26 false @blast-compound @scrap

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+46 instructions):
 
    59 op or :emerg_shutdown :check_radar*retval *tmp8
    60 set :calc_charge_req:reactor reactor1
    61 set :calc_charge_req:time :t_startup1
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   62 label *label126
+   63 # "Function: def calc_charge_req(in reactor, in time)"
+   64 op sub *tmp94 @tick :calc_charge_req:time
+   65 op idiv :calc_charge_req:secs *tmp94 60
+   66 jump *label127 greaterThan :calc_charge_req:secs 30
+   67 sensor *tmp97 :calc_charge_req:reactor @enabled
+   68 jump *label128 notEqual *tmp97 false
+   69 label *label127
+   70 set :calc_charge_req*retval 0
+   71 jump *label130 always
+   72 label *label128
+   73 label *label129
+   74 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   75 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+   76 op idiv :calc_charge_req:charge_req *tmp101 0.04
+   77 set :calc_charge_req*retval :calc_charge_req:charge_req
+   78 jump *label130 always
+   79 label *label130
    80 set .START_POWER_REQ :calc_charge_req*retval
    81 set :calc_charge_req:reactor reactor2
    82 set :calc_charge_req:time :t_startup2
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+   83 label *label131
+   84 # "Function: def calc_charge_req(in reactor, in time)"
+   85 op sub *tmp94 @tick :calc_charge_req:time
+   86 op idiv :calc_charge_req:secs *tmp94 60
+   87 jump *label132 greaterThan :calc_charge_req:secs 30
+   88 sensor *tmp97 :calc_charge_req:reactor @enabled
+   89 jump *label133 notEqual *tmp97 false
+   90 label *label132
+   91 set :calc_charge_req*retval 0
+   92 jump *label135 always
+   93 label *label133
+   94 label *label134
+   95 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   96 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+   97 op idiv :calc_charge_req:charge_req *tmp101 0.04
+   98 set :calc_charge_req*retval :calc_charge_req:charge_req
+   99 jump *label135 always
+  100 label *label135
   101 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   102 set :calc_charge_req:reactor reactor3
   103 set :calc_charge_req:time :t_startup3
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  104 label *label136
+  105 # "Function: def calc_charge_req(in reactor, in time)"
+  106 op sub *tmp94 @tick :calc_charge_req:time
+  107 op idiv :calc_charge_req:secs *tmp94 60
+  108 jump *label137 greaterThan :calc_charge_req:secs 30
+  109 sensor *tmp97 :calc_charge_req:reactor @enabled
+  110 jump *label138 notEqual *tmp97 false
+  111 label *label137
+  112 set :calc_charge_req*retval 0
+  113 jump *label140 always
+  114 label *label138
+  115 label *label139
+  116 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  117 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  118 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  119 set :calc_charge_req*retval :calc_charge_req:charge_req
+  120 jump *label140 always
+  121 label *label140
   122 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   123 set :calc_charge_req:reactor reactor4
   124 set :calc_charge_req:time :t_startup4
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  125 label *label141
+  126 # "Function: def calc_charge_req(in reactor, in time)"
+  127 op sub *tmp94 @tick :calc_charge_req:time
+  128 op idiv :calc_charge_req:secs *tmp94 60
+  129 jump *label142 greaterThan :calc_charge_req:secs 30
+  130 sensor *tmp97 :calc_charge_req:reactor @enabled
+  131 jump *label143 notEqual *tmp97 false
+  132 label *label142
+  133 set :calc_charge_req*retval 0
+  134 jump *label145 always
+  135 label *label143
+  136 label *label144
+  137 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  138 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  139 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  140 set :calc_charge_req*retval :calc_charge_req:charge_req
+  141 jump *label145 always
+  142 label *label145
   143 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   144 set :calc_charge_req:reactor reactor5
   145 set :calc_charge_req:time :t_startup5
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  146 label *label146
+  147 # "Function: def calc_charge_req(in reactor, in time)"
+  148 op sub *tmp94 @tick :calc_charge_req:time
+  149 op idiv :calc_charge_req:secs *tmp94 60
+  150 jump *label147 greaterThan :calc_charge_req:secs 30
+  151 sensor *tmp97 :calc_charge_req:reactor @enabled
+  152 jump *label148 notEqual *tmp97 false
+  153 label *label147
+  154 set :calc_charge_req*retval 0
+  155 jump *label150 always
+  156 label *label148
+  157 label *label149
+  158 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  159 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  160 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  161 set :calc_charge_req*retval :calc_charge_req:charge_req
+  162 jump *label150 always
+  163 label *label150
   164 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   165 set :start_reactor:reactor reactor1
   166 set :start_reactor:reactor_num 1
 
   378 jump *label7 always
   379 label *label9
   380 end
-    * label *label2
-    * # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp94 60
-    * jump *label66 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
-    * jump *label64 notEqual *tmp97 false
-    * label *label66
-    * set :calc_charge_req*retval 0
-    * jump *label63 always
-    * label *label64
-    * label *label65
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp101 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label63 always
-    * label *label63
-    * return :calc_charge_req*retaddr
-    * end
   381 label *label3
   382 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   383 set .RET_T_STARTUP :start_reactor:t_startup
 
   438 jump *label83 greaterThanEq :start_reactor:secs 30
   439 set :calc_charge_req:reactor :start_reactor:reactor
   440 set :calc_charge_req:time :start_reactor:t_startup
-    * call *label2 :calc_charge_req*retaddr :calc_charge_req*retval
+  441 label *label151
+  442 # "Function: def calc_charge_req(in reactor, in time)"
+  443 op sub *tmp94 @tick :calc_charge_req:time
+  444 op idiv :calc_charge_req:secs *tmp94 60
+  445 jump *label152 greaterThan :calc_charge_req:secs 30
+  446 sensor *tmp97 :calc_charge_req:reactor @enabled
+  447 jump *label153 notEqual *tmp97 false
+  448 label *label152
+  449 set :calc_charge_req*retval 0
+  450 jump *label155 always
+  451 label *label153
+  452 label *label154
+  453 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  454 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  455 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  456 set :calc_charge_req*retval :calc_charge_req:charge_req
+  457 jump *label155 always
+  458 label *label155
   459 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   460 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   461 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    61 set :calc_charge_req:time :t_startup1
    62 label *label126
    63 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+   64 op sub *tmp94 @tick :t_startup1
    65 op idiv :calc_charge_req:secs *tmp94 60
    66 jump *label127 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+   67 sensor *tmp97 reactor1 @enabled
    68 jump *label128 notEqual *tmp97 false
    69 label *label127
    70 set :calc_charge_req*retval 0
 
    82 set :calc_charge_req:time :t_startup2
    83 label *label131
    84 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+   85 op sub *tmp94 @tick :t_startup2
    86 op idiv :calc_charge_req:secs *tmp94 60
    87 jump *label132 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+   88 sensor *tmp97 reactor2 @enabled
    89 jump *label133 notEqual *tmp97 false
    90 label *label132
    91 set :calc_charge_req*retval 0
 
   103 set :calc_charge_req:time :t_startup3
   104 label *label136
   105 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  106 op sub *tmp94 @tick :t_startup3
   107 op idiv :calc_charge_req:secs *tmp94 60
   108 jump *label137 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  109 sensor *tmp97 reactor3 @enabled
   110 jump *label138 notEqual *tmp97 false
   111 label *label137
   112 set :calc_charge_req*retval 0
 
   124 set :calc_charge_req:time :t_startup4
   125 label *label141
   126 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  127 op sub *tmp94 @tick :t_startup4
   128 op idiv :calc_charge_req:secs *tmp94 60
   129 jump *label142 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  130 sensor *tmp97 reactor4 @enabled
   131 jump *label143 notEqual *tmp97 false
   132 label *label142
   133 set :calc_charge_req*retval 0
 
   145 set :calc_charge_req:time :t_startup5
   146 label *label146
   147 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  148 op sub *tmp94 @tick :t_startup5
   149 op idiv :calc_charge_req:secs *tmp94 60
   150 jump *label147 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  151 sensor *tmp97 reactor5 @enabled
   152 jump *label148 notEqual *tmp97 false
   153 label *label147
   154 set :calc_charge_req*retval 0
 
   440 set :calc_charge_req:time :start_reactor:t_startup
   441 label *label151
   442 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :calc_charge_req:time
+  443 op sub *tmp94 @tick :start_reactor:t_startup
   444 op idiv :calc_charge_req:secs *tmp94 60
   445 jump *label152 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :calc_charge_req:reactor @enabled
+  446 sensor *tmp97 :start_reactor:reactor @enabled
   447 jump *label153 notEqual *tmp97 false
   448 label *label152
   449 set :calc_charge_req*retval 0
 
   564 label *label72
   565 label *label70
   566 sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick .RET_T_STARTUP
+  567 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
   568 set :start_reactor*retval :start_reactor:supply_fuel
   569 jump *label68 always
   570 label *label68

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    57 jump *label10 always
    58 label *label10
    59 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    60 label *label126
    61 # "Function: def calc_charge_req(in reactor, in time)"
    62 op sub *tmp94 @tick :t_startup1
 
    76 jump *label130 always
    77 label *label130
    78 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    79 label *label131
    80 # "Function: def calc_charge_req(in reactor, in time)"
    81 op sub *tmp94 @tick :t_startup2
 
    95 jump *label135 always
    96 label *label135
    97 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
    98 label *label136
    99 # "Function: def calc_charge_req(in reactor, in time)"
   100 op sub *tmp94 @tick :t_startup3
 
   114 jump *label140 always
   115 label *label140
   116 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   117 label *label141
   118 # "Function: def calc_charge_req(in reactor, in time)"
   119 op sub *tmp94 @tick :t_startup4
 
   133 jump *label145 always
   134 label *label145
   135 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   136 label *label146
   137 # "Function: def calc_charge_req(in reactor, in time)"
   138 op sub *tmp94 @tick :t_startup5
 
   370 end
   371 label *label3
   372 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * set .RET_T_STARTUP :start_reactor:t_startup
   373 op sub *tmp104 @tick :start_reactor:t_startup
   374 op idiv :start_reactor:secs *tmp104 60
   375 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   425 jump *label82 always
   426 label *label81
   427 jump *label83 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   428 label *label151
   429 # "Function: def calc_charge_req(in reactor, in time)"
   430 op sub *tmp94 @tick :start_reactor:t_startup

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    42 set .CONTAINER vault1
    43 set .NODE node1
    44 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+   45 label *label156
+   46 # "Function: def check_radar(in unit)"
+   47 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   48 jump *label157 equal :check_radar:enemy_found null
+   49 control enabled projector1 true
+   50 control enabled projector2 true
+   51 control config .ULD_IN_1 .FUEL_OFF
+   52 control config .ULD_OUT_1 .FUEL
+   53 control config .ULD_IN_2 .FUEL_OFF
+   54 control config .ULD_OUT_2 .FUEL
+   55 control config .ULD_IN_MANY .FUEL_OFF
+   56 control config .ULD_OUT_MANY .FUEL
+   57 control config .ULD_MIXER .FUEL_OFF
+   58 control enabled reactor1 false
+   59 control enabled reactor2 false
+   60 control enabled reactor3 false
+   61 control enabled reactor4 false
+   62 control enabled reactor5 false
+   63 set :check_radar*retval true
+   64 jump *label159 always
+   65 jump *label158 always
+   66 label *label157
+   67 control enabled projector1 false
+   68 control enabled projector2 false
+   69 set :check_radar*retval false
+   70 jump *label159 always
+   71 label *label158
+   72 label *label159
    73 # "Function: def check_manual_shutdown()"
    74 jump *label11 equal switch1 null
    75 sensor *tmp10 switch1 @enabled
 
   210 control config unloader4 *tmp93
   211 label *label123
   212 set :check_radar:unit cyclone1
-    * call *label4 :check_radar*retaddr :check_radar*retval
+  213 label *label160
+  214 # "Function: def check_radar(in unit)"
+  215 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  216 jump *label161 equal :check_radar:enemy_found null
+  217 control enabled projector1 true
+  218 control enabled projector2 true
+  219 control config .ULD_IN_1 .FUEL_OFF
+  220 control config .ULD_OUT_1 .FUEL
+  221 control config .ULD_IN_2 .FUEL_OFF
+  222 control config .ULD_OUT_2 .FUEL
+  223 control config .ULD_IN_MANY .FUEL_OFF
+  224 control config .ULD_OUT_MANY .FUEL
+  225 control config .ULD_MIXER .FUEL_OFF
+  226 control enabled reactor1 false
+  227 control enabled reactor2 false
+  228 control enabled reactor3 false
+  229 control enabled reactor4 false
+  230 control enabled reactor5 false
+  231 set :check_radar*retval true
+  232 jump *label163 always
+  233 jump *label162 always
+  234 label *label161
+  235 control enabled projector1 false
+  236 control enabled projector2 false
+  237 set :check_radar*retval false
+  238 jump *label163 always
+  239 label *label162
+  240 label *label163
   241 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   242 set :start_reactor:reactor reactor3
   243 set :start_reactor:reactor_num 3
 
   611 label *label68
   612 return :start_reactor*retaddr
   613 end
-    * label *label4
-    * # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label110 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label109 always
-    * jump *label111 always
-    * label *label110
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label109 always
-    * label *label111
-    * label *label109
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    44 set :check_radar:unit cyclone1
    45 label *label156
    46 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   47 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    48 jump *label157 equal :check_radar:enemy_found null
    49 control enabled projector1 true
    50 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   51 control config unloader1 @scrap
+   52 control config unloader2 @blast-compound
+   53 control config unloader3 @scrap
+   54 control config unloader4 @blast-compound
+   55 control config unloader5 @scrap
+   56 control config unloader6 @blast-compound
+   57 control config unloader7 @scrap
    58 control enabled reactor1 false
    59 control enabled reactor2 false
    60 control enabled reactor3 false
 
   212 set :check_radar:unit cyclone1
   213 label *label160
   214 # "Function: def check_radar(in unit)"
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  215 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   216 jump *label161 equal :check_radar:enemy_found null
   217 control enabled projector1 true
   218 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  219 control config unloader1 @scrap
+  220 control config unloader2 @blast-compound
+  221 control config unloader3 @scrap
+  222 control config unloader4 @blast-compound
+  223 control config unloader5 @scrap
+  224 control config unloader6 @blast-compound
+  225 control config unloader7 @scrap
   226 control enabled reactor1 false
   227 control enabled reactor2 false
   228 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    30 set .REACTORS_DESIRED 5
    31 set .AVG_SURPLUS 500
    32 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    33 set .CONTAINER vault1
    34 set .NODE node1
-    * set :check_radar:unit cyclone1
    35 label *label156
    36 # "Function: def check_radar(in unit)"
    37 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
   199 select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
   200 control config unloader4 *tmp93
   201 label *label123
-    * set :check_radar:unit cyclone1
   202 label *label160
   203 # "Function: def check_radar(in unit)"
   204 radar enemy any any health cyclone1 1 :check_radar:enemy_found

Modifications by Inline function call at line 80:14 (+146 instructions):
 
   174 set :start_reactor:emerg_shutdown :emerg_shutdown
   175 set :start_reactor:fuel_on :fuel_1
   176 set :start_reactor:t_startup :t_startup1
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  177 label *label164
+  178 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  179 op sub *tmp104 @tick :start_reactor:t_startup
+  180 op idiv :start_reactor:secs *tmp104 60
+  181 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  182 set :start_reactor:supply_fuel true
+  183 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  184 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  185 sensor *tmp109 .NODE @powerNetStored
+  186 op floor :start_reactor:charge *tmp109
+  187 sensor *tmp111 .NODE @powerNetIn
+  188 sensor *tmp112 .NODE @powerNetOut
+  189 op sub *tmp113 *tmp111 *tmp112
+  190 op floor :start_reactor:surplus *tmp113
+  191 op mul *tmp115 .AVG_SURPLUS 0.8
+  192 op mul *tmp116 :start_reactor:surplus 0.2
+  193 op add .AVG_SURPLUS *tmp115 *tmp116
+  194 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  195 print "#"
+  196 print :start_reactor:reactor_num
+  197 print " "
+  198 print "- "
+  199 jump *label165 equal :start_reactor:emerg_shutdown false
+  200 control enabled :start_reactor:reactor false
+  201 print "emergency mode"
+  202 print "\n"
+  203 set :start_reactor:supply_fuel false
+  204 jump *label199 always
+  205 label *label165
+  206 jump *label185 equal :start_reactor:enabled false
+  207 jump *label166 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  208 control enabled :start_reactor:reactor false
+  209 print "STOP unwanted"
+  210 print "\n"
+  211 jump *label184 always
+  212 label *label166
+  213 jump *label167 lessThanEq :start_reactor:reactor_num 1
+  214 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  215 jump *label167 greaterThanEq :start_reactor:fuel_stored *tmp128
+  216 control enabled :start_reactor:reactor false
+  217 print "STOP system fuel low"
+  218 print "\n"
+  219 jump *label183 always
+  220 label *label167
+  221 jump *label168 greaterThan :start_reactor:fuel 1
+  222 control enabled :start_reactor:reactor false
+  223 print "STOP fuel low"
+  224 print "\n"
+  225 jump *label182 always
+  226 label *label168
+  227 jump *label169 greaterThan :start_reactor:cryo .CRYO_ABORT
+  228 control enabled :start_reactor:reactor false
+  229 print "STOP out of cryo"
+  230 print "\n"
+  231 jump *label181 always
+  232 label *label169
+  233 jump *label177 greaterThanEq :start_reactor:secs 30
+  234 label *label170
+  235 # "Function: def calc_charge_req(in reactor, in time)"
+  236 op sub *tmp94 @tick :start_reactor:t_startup
+  237 op idiv :calc_charge_req:secs *tmp94 60
+  238 jump *label171 greaterThan :calc_charge_req:secs 30
+  239 sensor *tmp97 :start_reactor:reactor @enabled
+  240 jump *label172 notEqual *tmp97 false
+  241 label *label171
+  242 set :calc_charge_req*retval 0
+  243 jump *label174 always
+  244 label *label172
+  245 label *label173
+  246 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  247 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  248 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  249 set :calc_charge_req*retval :calc_charge_req:charge_req
+  250 jump *label174 always
+  251 label *label174
+  252 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  253 jump *label175 greaterThanEq *tmp143 .PWR_ABORT
+  254 jump *label175 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  255 control enabled :start_reactor:reactor false
+  256 print "START FAIL battery"
+  257 print "\n"
+  258 set :start_reactor:supply_fuel false
+  259 jump *label176 always
+  260 label *label175
+  261 op sub :start_reactor:time_left 30 :start_reactor:secs
+  262 print "Starting "
+  263 print :start_reactor:time_left
+  264 print " "
+  265 print "secs, req "
+  266 print :calc_charge_req*retval
+  267 print "J"
+  268 print "\n"
+  269 label *label176
+  270 jump *label180 always
+  271 label *label177
+  272 jump *label178 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  273 jump *label178 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  274 control enabled :start_reactor:reactor false
+  275 print "ABANDON - battery crit"
+  276 print "\n"
+  277 set :start_reactor:supply_fuel false
+  278 jump *label179 always
+  279 label *label178
+  280 op idiv :start_reactor:mins :start_reactor:secs 6
+  281 op div :start_reactor:mins :start_reactor:mins 10
+  282 print "RUN "
+  283 print :start_reactor:mins
+  284 print " "
+  285 print "mins"
+  286 print "\n"
+  287 label *label179
+  288 label *label180
+  289 label *label181
+  290 label *label182
+  291 label *label183
+  292 label *label184
+  293 jump *label198 always
+  294 label *label185
+  295 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  296 op sub *tmp158 *tmp157 .PWR_ABORT
+  297 op div *tmp159 *tmp158 .PWR_REQ
+  298 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  299 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  300 op max :start_reactor:flow_units -0.1 *tmp161
+  301 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  302 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  303 jump *label186 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  304 print "IDLE"
+  305 print "\n"
+  306 set :start_reactor:supply_fuel false
+  307 jump *label197 always
+  308 label *label186
+  309 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  310 jump *label187 greaterThanEq *tmp167 1
+  311 op idiv *tmp171 :start_reactor:flow_units 0.001
+  312 op div :start_reactor:flow *tmp171 10
+  313 op idiv *tmp174 :start_reactor:charge_units 0.001
+  314 op div :start_reactor:charge *tmp174 10
+  315 print "WAIT power. (%"
+  316 print :start_reactor:charge
+  317 print "J + %"
+  318 print :start_reactor:flow
+  319 print "W)"
+  320 print "\n"
+  321 set :start_reactor:supply_fuel false
+  322 jump *label196 always
+  323 label *label187
+  324 jump *label190 equal :start_reactor:fuel_on false
+  325 jump *label190 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  326 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  327 jump *label188 lessThanEq *tmp178 .FUEL_REQ
+  328 print "WAIT fuel"
+  329 print "\n"
+  330 jump *label189 always
+  331 label *label188
+  332 print "WAIT system fuel"
+  333 print "\n"
+  334 label *label189
+  335 jump *label195 always
+  336 label *label190
+  337 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  338 jump *label191 greaterThanEq :start_reactor:fuel_stored *tmp181
+  339 print "WAIT buffer fuel"
+  340 print "\n"
+  341 jump *label194 always
+  342 label *label191
+  343 jump *label192 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  344 print "WAIT cryo"
+  345 print "\n"
+  346 jump *label193 always
+  347 label *label192
+  348 print "STARTUP"
+  349 print "\n"
+  350 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  351 control enabled :start_reactor:reactor true
+  352 label *label193
+  353 label *label194
+  354 label *label195
+  355 label *label196
+  356 label *label197
+  357 label *label198
+  358 label *label199
+  359 sensor *tmp188 :start_reactor:reactor @enabled
+  360 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  361 set :start_reactor*retval :start_reactor:supply_fuel
+  362 jump *label200 always
+  363 label *label200
   364 set :fuel_1 :start_reactor*retval
   365 set :t_startup1 .RET_T_STARTUP
   366 label *label120

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   175 set :start_reactor:t_startup :t_startup1
   176 label *label164
   177 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  178 op sub *tmp104 @tick :t_startup1
   179 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  180 sensor :start_reactor:fuel reactor1 @blast-compound
   181 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  182 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  183 sensor :start_reactor:cryo reactor1 @cryofluid
+  184 sensor *tmp109 node1 @powerNetStored
   185 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  186 sensor *tmp111 node1 @powerNetIn
+  187 sensor *tmp112 node1 @powerNetOut
   188 op sub *tmp113 *tmp111 *tmp112
   189 op floor :start_reactor:surplus *tmp113
   190 op mul *tmp115 .AVG_SURPLUS 0.8
   191 op mul *tmp116 :start_reactor:surplus 0.2
   192 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  193 sensor :start_reactor:enabled reactor1 @enabled
   194 print "#"
-    * print :start_reactor:reactor_num
+  195 print 1
   196 print " "
   197 print "- "
-    * jump *label165 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  198 jump *label165 equal :emerg_shutdown false
+  199 control enabled reactor1 false
   200 print "emergency mode"
   201 print "\n"
   202 set :start_reactor:supply_fuel false
   203 jump *label199 always
   204 label *label165
   205 jump *label185 equal :start_reactor:enabled false
-    * jump *label166 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  206 jump *label166 greaterThanEq .REACTORS_DESIRED 1
+  207 control enabled reactor1 false
   208 print "STOP unwanted"
   209 print "\n"
   210 jump *label184 always
   211 label *label166
-    * jump *label167 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label167 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * control enabled :start_reactor:reactor false
+  212 jump *label167 lessThanEq 1 1
+  213 op mul *tmp128 15 1
+  214 jump *label167 greaterThanEq :start_reactor:fuel_stored 15
+  215 control enabled reactor1 false
   216 print "STOP system fuel low"
   217 print "\n"
   218 jump *label183 always
   219 label *label167
   220 jump *label168 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  221 control enabled reactor1 false
   222 print "STOP fuel low"
   223 print "\n"
   224 jump *label182 always
   225 label *label168
-    * jump *label169 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  226 jump *label169 greaterThan :start_reactor:cryo 1
+  227 control enabled reactor1 false
   228 print "STOP out of cryo"
   229 print "\n"
   230 jump *label181 always
 
   232 jump *label177 greaterThanEq :start_reactor:secs 30
   233 label *label170
   234 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  235 op sub *tmp94 @tick :t_startup1
   236 op idiv :calc_charge_req:secs *tmp94 60
   237 jump *label171 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  238 sensor *tmp97 reactor1 @enabled
   239 jump *label172 notEqual *tmp97 false
   240 label *label171
   241 set :calc_charge_req*retval 0
 
   249 jump *label174 always
   250 label *label174
   251 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label175 greaterThanEq *tmp143 .PWR_ABORT
-    * jump *label175 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  252 jump *label175 greaterThanEq *tmp143 5000
+  253 jump *label175 greaterThanEq :start_reactor:surplus -500
+  254 control enabled reactor1 false
   255 print "START FAIL battery"
   256 print "\n"
   257 set :start_reactor:supply_fuel false
 
   268 label *label176
   269 jump *label180 always
   270 label *label177
-    * jump *label178 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label178 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  271 jump *label178 greaterThanEq :start_reactor:charge 2000
+  272 jump *label178 greaterThanEq :start_reactor:surplus -500
+  273 control enabled reactor1 false
   274 print "ABANDON - battery crit"
   275 print "\n"
   276 set :start_reactor:supply_fuel false
 
   292 jump *label198 always
   293 label *label185
   294 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  295 op sub *tmp158 *tmp157 5000
+  296 op div *tmp159 *tmp158 23000
+  297 op mul :start_reactor:charge_units *tmp159 0.6
+  298 op div *tmp161 :start_reactor:surplus 2000
   299 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label186 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  300 op mul *tmp163 2 1
+  301 op add :start_reactor:cryo_req 3 2
+  302 jump *label186 greaterThanEq .REACTORS_DESIRED 1
   303 print "IDLE"
   304 print "\n"
   305 set :start_reactor:supply_fuel false
 
   320 set :start_reactor:supply_fuel false
   321 jump *label196 always
   322 label *label187
-    * jump *label190 equal :start_reactor:fuel_on false
-    * jump *label190 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  323 jump *label190 equal :fuel_1 false
+  324 jump *label190 greaterThanEq :start_reactor:fuel 10
   325 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label188 lessThanEq *tmp178 .FUEL_REQ
+  326 jump *label188 lessThanEq *tmp178 10
   327 print "WAIT fuel"
   328 print "\n"
   329 jump *label189 always
 
   333 label *label189
   334 jump *label195 always
   335 label *label190
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label191 greaterThanEq :start_reactor:fuel_stored *tmp181
+  336 op mul *tmp181 45 1
+  337 jump *label191 greaterThanEq :start_reactor:fuel_stored 45
   338 print "WAIT buffer fuel"
   339 print "\n"
   340 jump *label194 always
   341 label *label191
-    * jump *label192 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  342 jump *label192 greaterThanEq :start_reactor:cryo 5
   343 print "WAIT cryo"
   344 print "\n"
   345 jump *label193 always
   346 label *label192
   347 print "STARTUP"
   348 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  349 op add .START_POWER_REQ .START_POWER_REQ 23000
+  350 control enabled reactor1 true
   351 label *label193
   352 label *label194
   353 label *label195
 
   355 label *label197
   356 label *label198
   357 label *label199
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  358 sensor *tmp188 reactor1 @enabled
+  359 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
   360 set :start_reactor*retval :start_reactor:supply_fuel
   361 jump *label200 always
   362 label *label200
-    * set :fuel_1 :start_reactor*retval
+  363 set :fuel_1 :start_reactor:supply_fuel
   364 set :t_startup1 .RET_T_STARTUP
   365 label *label120
   366 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  367 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   368 control config unloader1 *tmp89
-    * select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  369 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   370 control config unloader2 *tmp93
   371 label *label121
   372 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   168 jump *label150 always
   169 label *label150
   170 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   171 label *label164
   172 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   173 op sub *tmp104 @tick :t_startup1
 
   289 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   290 op sub *tmp158 *tmp157 5000
   291 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  292 op div :start_reactor:charge_units *tmp158 38333.333333333336
   293 op div *tmp161 :start_reactor:surplus 2000
   294 op max :start_reactor:flow_units -0.1 *tmp161
   295 op mul *tmp163 2 1
 
   352 label *label199
   353 sensor *tmp188 reactor1 @enabled
   354 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   355 jump *label200 always
   356 label *label200
   357 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+146 instructions):
 
   368 set :start_reactor:emerg_shutdown :emerg_shutdown
   369 set :start_reactor:fuel_on :fuel_2
   370 set :start_reactor:t_startup :t_startup2
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  371 label *label201
+  372 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  373 op sub *tmp104 @tick :start_reactor:t_startup
+  374 op idiv :start_reactor:secs *tmp104 60
+  375 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  376 set :start_reactor:supply_fuel true
+  377 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  378 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  379 sensor *tmp109 .NODE @powerNetStored
+  380 op floor :start_reactor:charge *tmp109
+  381 sensor *tmp111 .NODE @powerNetIn
+  382 sensor *tmp112 .NODE @powerNetOut
+  383 op sub *tmp113 *tmp111 *tmp112
+  384 op floor :start_reactor:surplus *tmp113
+  385 op mul *tmp115 .AVG_SURPLUS 0.8
+  386 op mul *tmp116 :start_reactor:surplus 0.2
+  387 op add .AVG_SURPLUS *tmp115 *tmp116
+  388 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  389 print "#"
+  390 print :start_reactor:reactor_num
+  391 print " "
+  392 print "- "
+  393 jump *label202 equal :start_reactor:emerg_shutdown false
+  394 control enabled :start_reactor:reactor false
+  395 print "emergency mode"
+  396 print "\n"
+  397 set :start_reactor:supply_fuel false
+  398 jump *label236 always
+  399 label *label202
+  400 jump *label222 equal :start_reactor:enabled false
+  401 jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  402 control enabled :start_reactor:reactor false
+  403 print "STOP unwanted"
+  404 print "\n"
+  405 jump *label221 always
+  406 label *label203
+  407 jump *label204 lessThanEq :start_reactor:reactor_num 1
+  408 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  409 jump *label204 greaterThanEq :start_reactor:fuel_stored *tmp128
+  410 control enabled :start_reactor:reactor false
+  411 print "STOP system fuel low"
+  412 print "\n"
+  413 jump *label220 always
+  414 label *label204
+  415 jump *label205 greaterThan :start_reactor:fuel 1
+  416 control enabled :start_reactor:reactor false
+  417 print "STOP fuel low"
+  418 print "\n"
+  419 jump *label219 always
+  420 label *label205
+  421 jump *label206 greaterThan :start_reactor:cryo .CRYO_ABORT
+  422 control enabled :start_reactor:reactor false
+  423 print "STOP out of cryo"
+  424 print "\n"
+  425 jump *label218 always
+  426 label *label206
+  427 jump *label214 greaterThanEq :start_reactor:secs 30
+  428 label *label207
+  429 # "Function: def calc_charge_req(in reactor, in time)"
+  430 op sub *tmp94 @tick :start_reactor:t_startup
+  431 op idiv :calc_charge_req:secs *tmp94 60
+  432 jump *label208 greaterThan :calc_charge_req:secs 30
+  433 sensor *tmp97 :start_reactor:reactor @enabled
+  434 jump *label209 notEqual *tmp97 false
+  435 label *label208
+  436 set :calc_charge_req*retval 0
+  437 jump *label211 always
+  438 label *label209
+  439 label *label210
+  440 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  441 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  442 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  443 set :calc_charge_req*retval :calc_charge_req:charge_req
+  444 jump *label211 always
+  445 label *label211
+  446 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  447 jump *label212 greaterThanEq *tmp143 .PWR_ABORT
+  448 jump *label212 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  449 control enabled :start_reactor:reactor false
+  450 print "START FAIL battery"
+  451 print "\n"
+  452 set :start_reactor:supply_fuel false
+  453 jump *label213 always
+  454 label *label212
+  455 op sub :start_reactor:time_left 30 :start_reactor:secs
+  456 print "Starting "
+  457 print :start_reactor:time_left
+  458 print " "
+  459 print "secs, req "
+  460 print :calc_charge_req*retval
+  461 print "J"
+  462 print "\n"
+  463 label *label213
+  464 jump *label217 always
+  465 label *label214
+  466 jump *label215 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  467 jump *label215 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  468 control enabled :start_reactor:reactor false
+  469 print "ABANDON - battery crit"
+  470 print "\n"
+  471 set :start_reactor:supply_fuel false
+  472 jump *label216 always
+  473 label *label215
+  474 op idiv :start_reactor:mins :start_reactor:secs 6
+  475 op div :start_reactor:mins :start_reactor:mins 10
+  476 print "RUN "
+  477 print :start_reactor:mins
+  478 print " "
+  479 print "mins"
+  480 print "\n"
+  481 label *label216
+  482 label *label217
+  483 label *label218
+  484 label *label219
+  485 label *label220
+  486 label *label221
+  487 jump *label235 always
+  488 label *label222
+  489 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  490 op sub *tmp158 *tmp157 .PWR_ABORT
+  491 op div *tmp159 *tmp158 .PWR_REQ
+  492 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  493 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  494 op max :start_reactor:flow_units -0.1 *tmp161
+  495 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  496 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  497 jump *label223 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  498 print "IDLE"
+  499 print "\n"
+  500 set :start_reactor:supply_fuel false
+  501 jump *label234 always
+  502 label *label223
+  503 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  504 jump *label224 greaterThanEq *tmp167 1
+  505 op idiv *tmp171 :start_reactor:flow_units 0.001
+  506 op div :start_reactor:flow *tmp171 10
+  507 op idiv *tmp174 :start_reactor:charge_units 0.001
+  508 op div :start_reactor:charge *tmp174 10
+  509 print "WAIT power. (%"
+  510 print :start_reactor:charge
+  511 print "J + %"
+  512 print :start_reactor:flow
+  513 print "W)"
+  514 print "\n"
+  515 set :start_reactor:supply_fuel false
+  516 jump *label233 always
+  517 label *label224
+  518 jump *label227 equal :start_reactor:fuel_on false
+  519 jump *label227 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  520 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  521 jump *label225 lessThanEq *tmp178 .FUEL_REQ
+  522 print "WAIT fuel"
+  523 print "\n"
+  524 jump *label226 always
+  525 label *label225
+  526 print "WAIT system fuel"
+  527 print "\n"
+  528 label *label226
+  529 jump *label232 always
+  530 label *label227
+  531 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  532 jump *label228 greaterThanEq :start_reactor:fuel_stored *tmp181
+  533 print "WAIT buffer fuel"
+  534 print "\n"
+  535 jump *label231 always
+  536 label *label228
+  537 jump *label229 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  538 print "WAIT cryo"
+  539 print "\n"
+  540 jump *label230 always
+  541 label *label229
+  542 print "STARTUP"
+  543 print "\n"
+  544 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  545 control enabled :start_reactor:reactor true
+  546 label *label230
+  547 label *label231
+  548 label *label232
+  549 label *label233
+  550 label *label234
+  551 label *label235
+  552 label *label236
+  553 sensor *tmp188 :start_reactor:reactor @enabled
+  554 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  555 set :start_reactor*retval :start_reactor:supply_fuel
+  556 jump *label237 always
+  557 label *label237
   558 set :fuel_2 :start_reactor*retval
   559 set :t_startup2 .RET_T_STARTUP
   560 label *label122

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   370 set :start_reactor:t_startup :t_startup2
   371 label *label201
   372 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  373 op sub *tmp104 @tick :t_startup2
   374 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  375 sensor :start_reactor:fuel reactor2 @blast-compound
   376 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  377 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  378 sensor :start_reactor:cryo reactor2 @cryofluid
+  379 sensor *tmp109 node1 @powerNetStored
   380 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  381 sensor *tmp111 node1 @powerNetIn
+  382 sensor *tmp112 node1 @powerNetOut
   383 op sub *tmp113 *tmp111 *tmp112
   384 op floor :start_reactor:surplus *tmp113
   385 op mul *tmp115 .AVG_SURPLUS 0.8
   386 op mul *tmp116 :start_reactor:surplus 0.2
   387 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  388 sensor :start_reactor:enabled reactor2 @enabled
   389 print "#"
-    * print :start_reactor:reactor_num
+  390 print 2
   391 print " "
   392 print "- "
-    * jump *label202 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  393 jump *label202 equal :emerg_shutdown false
+  394 control enabled reactor2 false
   395 print "emergency mode"
   396 print "\n"
   397 set :start_reactor:supply_fuel false
   398 jump *label236 always
   399 label *label202
   400 jump *label222 equal :start_reactor:enabled false
-    * jump *label203 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  401 jump *label203 greaterThanEq .REACTORS_DESIRED 2
+  402 control enabled reactor2 false
   403 print "STOP unwanted"
   404 print "\n"
   405 jump *label221 always
   406 label *label203
-    * jump *label204 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label204 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * control enabled :start_reactor:reactor false
+  407 jump *label204 lessThanEq 2 1
+  408 op mul *tmp128 15 2
+  409 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
+  410 control enabled reactor2 false
   411 print "STOP system fuel low"
   412 print "\n"
   413 jump *label220 always
   414 label *label204
   415 jump *label205 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  416 control enabled reactor2 false
   417 print "STOP fuel low"
   418 print "\n"
   419 jump *label219 always
   420 label *label205
-    * jump *label206 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  421 jump *label206 greaterThan :start_reactor:cryo 1
+  422 control enabled reactor2 false
   423 print "STOP out of cryo"
   424 print "\n"
   425 jump *label218 always
 
   427 jump *label214 greaterThanEq :start_reactor:secs 30
   428 label *label207
   429 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  430 op sub *tmp94 @tick :t_startup2
   431 op idiv :calc_charge_req:secs *tmp94 60
   432 jump *label208 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  433 sensor *tmp97 reactor2 @enabled
   434 jump *label209 notEqual *tmp97 false
   435 label *label208
   436 set :calc_charge_req*retval 0
 
   444 jump *label211 always
   445 label *label211
   446 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label212 greaterThanEq *tmp143 .PWR_ABORT
-    * jump *label212 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  447 jump *label212 greaterThanEq *tmp143 5000
+  448 jump *label212 greaterThanEq :start_reactor:surplus -500
+  449 control enabled reactor2 false
   450 print "START FAIL battery"
   451 print "\n"
   452 set :start_reactor:supply_fuel false
 
   463 label *label213
   464 jump *label217 always
   465 label *label214
-    * jump *label215 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label215 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  466 jump *label215 greaterThanEq :start_reactor:charge 2000
+  467 jump *label215 greaterThanEq :start_reactor:surplus -500
+  468 control enabled reactor2 false
   469 print "ABANDON - battery crit"
   470 print "\n"
   471 set :start_reactor:supply_fuel false
 
   487 jump *label235 always
   488 label *label222
   489 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  490 op sub *tmp158 *tmp157 5000
+  491 op div *tmp159 *tmp158 23000
+  492 op mul :start_reactor:charge_units *tmp159 0.6
+  493 op div *tmp161 :start_reactor:surplus 2000
   494 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label223 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  495 op mul *tmp163 2 2
+  496 op add :start_reactor:cryo_req 3 4
+  497 jump *label223 greaterThanEq .REACTORS_DESIRED 2
   498 print "IDLE"
   499 print "\n"
   500 set :start_reactor:supply_fuel false
 
   515 set :start_reactor:supply_fuel false
   516 jump *label233 always
   517 label *label224
-    * jump *label227 equal :start_reactor:fuel_on false
-    * jump *label227 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  518 jump *label227 equal :fuel_2 false
+  519 jump *label227 greaterThanEq :start_reactor:fuel 10
   520 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label225 lessThanEq *tmp178 .FUEL_REQ
+  521 jump *label225 lessThanEq *tmp178 10
   522 print "WAIT fuel"
   523 print "\n"
   524 jump *label226 always
 
   528 label *label226
   529 jump *label232 always
   530 label *label227
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label228 greaterThanEq :start_reactor:fuel_stored *tmp181
+  531 op mul *tmp181 45 2
+  532 jump *label228 greaterThanEq :start_reactor:fuel_stored 90
   533 print "WAIT buffer fuel"
   534 print "\n"
   535 jump *label231 always
   536 label *label228
-    * jump *label229 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  537 jump *label229 greaterThanEq :start_reactor:cryo 7
   538 print "WAIT cryo"
   539 print "\n"
   540 jump *label230 always
   541 label *label229
   542 print "STARTUP"
   543 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  544 op add .START_POWER_REQ .START_POWER_REQ 23000
+  545 control enabled reactor2 true
   546 label *label230
   547 label *label231
   548 label *label232
 
   550 label *label234
   551 label *label235
   552 label *label236
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  553 sensor *tmp188 reactor2 @enabled
+  554 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
   555 set :start_reactor*retval :start_reactor:supply_fuel
   556 jump *label237 always
   557 label *label237
-    * set :fuel_2 :start_reactor*retval
+  558 set :fuel_2 :start_reactor:supply_fuel
   559 set :t_startup2 .RET_T_STARTUP
   560 label *label122
   561 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
-    * select *tmp89 notEqual :start_reactor*retval false @blast-compound @scrap
+  562 select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   563 control config unloader3 *tmp89
-    * select *tmp93 equal :start_reactor*retval false @blast-compound @scrap
+  564 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   565 control config unloader4 *tmp93
   566 label *label123
   567 label *label160

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   363 select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
   364 control config unloader2 *tmp93
   365 label *label121
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   366 label *label201
   367 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   368 op sub *tmp104 @tick :t_startup2
 
   484 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   485 op sub *tmp158 *tmp157 5000
   486 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  487 op div :start_reactor:charge_units *tmp158 38333.333333333336
   488 op div *tmp161 :start_reactor:surplus 2000
   489 op max :start_reactor:flow_units -0.1 *tmp161
   490 op mul *tmp163 2 2
 
   547 label *label236
   548 sensor *tmp188 reactor2 @enabled
   549 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   550 jump *label237 always
   551 label *label237
   552 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+146 instructions):
 
   592 set :start_reactor:emerg_shutdown :emerg_shutdown
   593 set :start_reactor:fuel_on :fuel_3
   594 set :start_reactor:t_startup :t_startup3
-    * call *label3 :start_reactor*retaddr :start_reactor*retval
+  595 label *label238
+  596 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
+  597 op sub *tmp104 @tick :start_reactor:t_startup
+  598 op idiv :start_reactor:secs *tmp104 60
+  599 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  600 set :start_reactor:supply_fuel true
+  601 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  602 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  603 sensor *tmp109 .NODE @powerNetStored
+  604 op floor :start_reactor:charge *tmp109
+  605 sensor *tmp111 .NODE @powerNetIn
+  606 sensor *tmp112 .NODE @powerNetOut
+  607 op sub *tmp113 *tmp111 *tmp112
+  608 op floor :start_reactor:surplus *tmp113
+  609 op mul *tmp115 .AVG_SURPLUS 0.8
+  610 op mul *tmp116 :start_reactor:surplus 0.2
+  611 op add .AVG_SURPLUS *tmp115 *tmp116
+  612 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  613 print "#"
+  614 print :start_reactor:reactor_num
+  615 print " "
+  616 print "- "
+  617 jump *label239 equal :start_reactor:emerg_shutdown false
+  618 control enabled :start_reactor:reactor false
+  619 print "emergency mode"
+  620 print "\n"
+  621 set :start_reactor:supply_fuel false
+  622 jump *label273 always
+  623 label *label239
+  624 jump *label259 equal :start_reactor:enabled false
+  625 jump *label240 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  626 control enabled :start_reactor:reactor false
+  627 print "STOP unwanted"
+  628 print "\n"
+  629 jump *label258 always
+  630 label *label240
+  631 jump *label241 lessThanEq :start_reactor:reactor_num 1
+  632 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  633 jump *label241 greaterThanEq :start_reactor:fuel_stored *tmp128
+  634 control enabled :start_reactor:reactor false
+  635 print "STOP system fuel low"
+  636 print "\n"
+  637 jump *label257 always
+  638 label *label241
+  639 jump *label242 greaterThan :start_reactor:fuel 1
+  640 control enabled :start_reactor:reactor false
+  641 print "STOP fuel low"
+  642 print "\n"
+  643 jump *label256 always
+  644 label *label242
+  645 jump *label243 greaterThan :start_reactor:cryo .CRYO_ABORT
+  646 control enabled :start_reactor:reactor false
+  647 print "STOP out of cryo"
+  648 print "\n"
+  649 jump *label255 always
+  650 label *label243
+  651 jump *label251 greaterThanEq :start_reactor:secs 30
+  652 label *label244
+  653 # "Function: def calc_charge_req(in reactor, in time)"
+  654 op sub *tmp94 @tick :start_reactor:t_startup
+  655 op idiv :calc_charge_req:secs *tmp94 60
+  656 jump *label245 greaterThan :calc_charge_req:secs 30
+  657 sensor *tmp97 :start_reactor:reactor @enabled
+  658 jump *label246 notEqual *tmp97 false
+  659 label *label245
+  660 set :calc_charge_req*retval 0
+  661 jump *label248 always
+  662 label *label246
+  663 label *label247
+  664 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  665 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
+  666 op idiv :calc_charge_req:charge_req *tmp101 0.04
+  667 set :calc_charge_req*retval :calc_charge_req:charge_req
+  668 jump *label248 always
+  669 label *label248
+  670 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
+  671 jump *label249 greaterThanEq *tmp143 .PWR_ABORT
+  672 jump *label249 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  673 control enabled :start_reactor:reactor false
+  674 print "START FAIL battery"
+  675 print "\n"
+  676 set :start_reactor:supply_fuel false
+  677 jump *label250 always
+  678 label *label249
+  679 op sub :start_reactor:time_left 30 :start_reactor:secs
+  680 print "Starting "
+  681 print :start_reactor:time_left
+  682 print " "
+  683 print "secs, req "
+  684 print :calc_charge_req*retval
+  685 print "J"
+  686 print "\n"
+  687 label *label250
+  688 jump *label254 always
+  689 label *label251
+  690 jump *label252 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  691 jump *label252 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  692 control enabled :start_reactor:reactor false
+  693 print "ABANDON - battery crit"
+  694 print "\n"
+  695 set :start_reactor:supply_fuel false
+  696 jump *label253 always
+  697 label *label252
+  698 op idiv :start_reactor:mins :start_reactor:secs 6
+  699 op div :start_reactor:mins :start_reactor:mins 10
+  700 print "RUN "
+  701 print :start_reactor:mins
+  702 print " "
+  703 print "mins"
+  704 print "\n"
+  705 label *label253
+  706 label *label254
+  707 label *label255
+  708 label *label256
+  709 label *label257
+  710 label *label258
+  711 jump *label272 always
+  712 label *label259
+  713 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
+  714 op sub *tmp158 *tmp157 .PWR_ABORT
+  715 op div *tmp159 *tmp158 .PWR_REQ
+  716 op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
+  717 op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  718 op max :start_reactor:flow_units -0.1 *tmp161
+  719 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
+  720 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
+  721 jump *label260 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  722 print "IDLE"
+  723 print "\n"
+  724 set :start_reactor:supply_fuel false
+  725 jump *label271 always
+  726 label *label260
+  727 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
+  728 jump *label261 greaterThanEq *tmp167 1
+  729 op idiv *tmp171 :start_reactor:flow_units 0.001
+  730 op div :start_reactor:flow *tmp171 10
+  731 op idiv *tmp174 :start_reactor:charge_units 0.001
+  732 op div :start_reactor:charge *tmp174 10
+  733 print "WAIT power. (%"
+  734 print :start_reactor:charge
+  735 print "J + %"
+  736 print :start_reactor:flow
+  737 print "W)"
+  738 print "\n"
+  739 set :start_reactor:supply_fuel false
+  740 jump *label270 always
+  741 label *label261
+  742 jump *label264 equal :start_reactor:fuel_on false
+  743 jump *label264 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  744 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
+  745 jump *label262 lessThanEq *tmp178 .FUEL_REQ
+  746 print "WAIT fuel"
+  747 print "\n"
+  748 jump *label263 always
+  749 label *label262
+  750 print "WAIT system fuel"
+  751 print "\n"
+  752 label *label263
+  753 jump *label269 always
+  754 label *label264
+  755 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
+  756 jump *label265 greaterThanEq :start_reactor:fuel_stored *tmp181
+  757 print "WAIT buffer fuel"
+  758 print "\n"
+  759 jump *label268 always
+  760 label *label265
+  761 jump *label266 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  762 print "WAIT cryo"
+  763 print "\n"
+  764 jump *label267 always
+  765 label *label266
+  766 print "STARTUP"
+  767 print "\n"
+  768 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  769 control enabled :start_reactor:reactor true
+  770 label *label267
+  771 label *label268
+  772 label *label269
+  773 label *label270
+  774 label *label271
+  775 label *label272
+  776 label *label273
+  777 sensor *tmp188 :start_reactor:reactor @enabled
+  778 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  779 set :start_reactor*retval :start_reactor:supply_fuel
+  780 jump *label274 always
+  781 label *label274
   782 set :fuel_3 :start_reactor*retval
   783 set :t_startup3 .RET_T_STARTUP
   784 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   594 set :start_reactor:t_startup :t_startup3
   595 label *label238
   596 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
-    * op sub *tmp104 @tick :start_reactor:t_startup
+  597 op sub *tmp104 @tick :t_startup3
   598 op idiv :start_reactor:secs *tmp104 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  599 sensor :start_reactor:fuel reactor3 @blast-compound
   600 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp109 .NODE @powerNetStored
+  601 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  602 sensor :start_reactor:cryo reactor3 @cryofluid
+  603 sensor *tmp109 node1 @powerNetStored
   604 op floor :start_reactor:charge *tmp109
-    * sensor *tmp111 .NODE @powerNetIn
-    * sensor *tmp112 .NODE @powerNetOut
+  605 sensor *tmp111 node1 @powerNetIn
+  606 sensor *tmp112 node1 @powerNetOut
   607 op sub *tmp113 *tmp111 *tmp112
   608 op floor :start_reactor:surplus *tmp113
   609 op mul *tmp115 .AVG_SURPLUS 0.8
   610 op mul *tmp116 :start_reactor:surplus 0.2
   611 op add .AVG_SURPLUS *tmp115 *tmp116
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  612 sensor :start_reactor:enabled reactor3 @enabled
   613 print "#"
-    * print :start_reactor:reactor_num
+  614 print 3
   615 print " "
   616 print "- "
-    * jump *label239 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  617 jump *label239 equal :emerg_shutdown false
+  618 control enabled reactor3 false
   619 print "emergency mode"
   620 print "\n"
   621 set :start_reactor:supply_fuel false
   622 jump *label273 always
   623 label *label239
   624 jump *label259 equal :start_reactor:enabled false
-    * jump *label240 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  625 jump *label240 greaterThanEq .REACTORS_DESIRED 3
+  626 control enabled reactor3 false
   627 print "STOP unwanted"
   628 print "\n"
   629 jump *label258 always
   630 label *label240
-    * jump *label241 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label241 greaterThanEq :start_reactor:fuel_stored *tmp128
-    * control enabled :start_reactor:reactor false
+  631 jump *label241 lessThanEq 3 1
+  632 op mul *tmp128 15 3
+  633 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
+  634 control enabled reactor3 false
   635 print "STOP system fuel low"
   636 print "\n"
   637 jump *label257 always
   638 label *label241
   639 jump *label242 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  640 control enabled reactor3 false
   641 print "STOP fuel low"
   642 print "\n"
   643 jump *label256 always
   644 label *label242
-    * jump *label243 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  645 jump *label243 greaterThan :start_reactor:cryo 1
+  646 control enabled reactor3 false
   647 print "STOP out of cryo"
   648 print "\n"
   649 jump *label255 always
 
   651 jump *label251 greaterThanEq :start_reactor:secs 30
   652 label *label244
   653 # "Function: def calc_charge_req(in reactor, in time)"
-    * op sub *tmp94 @tick :start_reactor:t_startup
+  654 op sub *tmp94 @tick :t_startup3
   655 op idiv :calc_charge_req:secs *tmp94 60
   656 jump *label245 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp97 :start_reactor:reactor @enabled
+  657 sensor *tmp97 reactor3 @enabled
   658 jump *label246 notEqual *tmp97 false
   659 label *label245
   660 set :calc_charge_req*retval 0
 
   668 jump *label248 always
   669 label *label248
   670 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
-    * jump *label249 greaterThanEq *tmp143 .PWR_ABORT
-    * jump *label249 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  671 jump *label249 greaterThanEq *tmp143 5000
+  672 jump *label249 greaterThanEq :start_reactor:surplus -500
+  673 control enabled reactor3 false
   674 print "START FAIL battery"
   675 print "\n"
   676 set :start_reactor:supply_fuel false
 
   687 label *label250
   688 jump *label254 always
   689 label *label251
-    * jump *label252 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label252 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * control enabled :start_reactor:reactor false
+  690 jump *label252 greaterThanEq :start_reactor:charge 2000
+  691 jump *label252 greaterThanEq :start_reactor:surplus -500
+  692 control enabled reactor3 false
   693 print "ABANDON - battery crit"
   694 print "\n"
   695 set :start_reactor:supply_fuel false
 
   711 jump *label272 always
   712 label *label259
   713 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp158 *tmp157 .PWR_ABORT
-    * op div *tmp159 *tmp158 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
-    * op div *tmp161 :start_reactor:surplus .FLOW_REQ
+  714 op sub *tmp158 *tmp157 5000
+  715 op div *tmp159 *tmp158 23000
+  716 op mul :start_reactor:charge_units *tmp159 0.6
+  717 op div *tmp161 :start_reactor:surplus 2000
   718 op max :start_reactor:flow_units -0.1 *tmp161
-    * op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp163
-    * jump *label260 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  719 op mul *tmp163 2 3
+  720 op add :start_reactor:cryo_req 3 6
+  721 jump *label260 greaterThanEq .REACTORS_DESIRED 3
   722 print "IDLE"
   723 print "\n"
   724 set :start_reactor:supply_fuel false
 
   739 set :start_reactor:supply_fuel false
   740 jump *label270 always
   741 label *label261
-    * jump *label264 equal :start_reactor:fuel_on false
-    * jump *label264 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  742 jump *label264 equal :fuel_3 false
+  743 jump *label264 greaterThanEq :start_reactor:fuel 10
   744 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label262 lessThanEq *tmp178 .FUEL_REQ
+  745 jump *label262 lessThanEq *tmp178 10
   746 print "WAIT fuel"
   747 print "\n"
   748 jump *label263 always
 
   752 label *label263
   753 jump *label269 always
   754 label *label264
-    * op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label265 greaterThanEq :start_reactor:fuel_stored *tmp181
+  755 op mul *tmp181 45 3
+  756 jump *label265 greaterThanEq :start_reactor:fuel_stored 135
   757 print "WAIT buffer fuel"
   758 print "\n"
   759 jump *label268 always
   760 label *label265
-    * jump *label266 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  761 jump *label266 greaterThanEq :start_reactor:cryo 9
   762 print "WAIT cryo"
   763 print "\n"
   764 jump *label267 always
   765 label *label266
   766 print "STARTUP"
   767 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  768 op add .START_POWER_REQ .START_POWER_REQ 23000
+  769 control enabled reactor3 true
   770 label *label267
   771 label *label268
   772 label *label269
 
   774 label *label271
   775 label *label272
   776 label *label273
-    * sensor *tmp188 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
+  777 sensor *tmp188 reactor3 @enabled
+  778 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
   779 set :start_reactor*retval :start_reactor:supply_fuel
   780 jump *label274 always
   781 label *label274
-    * set :fuel_3 :start_reactor*retval
+  782 set :fuel_3 :start_reactor:supply_fuel
   783 set :t_startup3 .RET_T_STARTUP
   784 set :start_reactor:reactor reactor4
   785 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   587 label *label162
   588 label *label163
   589 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   590 label *label238
   591 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   592 op sub *tmp104 @tick :t_startup3
 
   708 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
   709 op sub *tmp158 *tmp157 5000
   710 op div *tmp159 *tmp158 23000
-    * op mul :start_reactor:charge_units *tmp159 0.6
+  711 op div :start_reactor:charge_units *tmp158 38333.333333333336
   712 op div *tmp161 :start_reactor:surplus 2000
   713 op max :start_reactor:flow_units -0.1 *tmp161
   714 op mul *tmp163 2 3
 
   771 label *label273
   772 sensor *tmp188 reactor3 @enabled
   773 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   774 jump *label274 always
   775 label *label274
   776 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Jump Normalization, pass 2, iteration 1 (-2 instructions):
 
   204 print "\n"
   205 jump *label184 always
   206 label *label166
-    * jump *label167 lessThanEq 1 1
+  207 jump *label167 always
   208 op mul *tmp128 15 1
   209 jump *label167 greaterThanEq :start_reactor:fuel_stored 15
   210 control enabled reactor1 false
 
   399 print "\n"
   400 jump *label221 always
   401 label *label203
-    * jump *label204 lessThanEq 2 1
   402 op mul *tmp128 15 2
   403 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   404 control enabled reactor2 false
 
   622 print "\n"
   623 jump *label258 always
   624 label *label240
-    * jump *label241 lessThanEq 3 1
   625 op mul *tmp128 15 3
   626 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   627 control enabled reactor3 false

Modifications by Iterated phase, Condition Optimization, pass 2, iteration 1 (-1 instructions):
 
   853 print "n"
   854 label *label34
   855 label *label27
-    * op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   856 jump *label25 always
   857 label *label25
-    * select *tmp46 notEqual *tmp29 false @pyratite @scrap
+  858 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   859 control config unloader7 *tmp46
   860 # "Function: def diff_generators()"
   861 sensor *tmp48 node1 @powerNetStored

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-22 instructions):
 
    50 control enabled reactor4 false
    51 control enabled reactor5 false
    52 set :check_radar*retval true
-    * jump *label159 always
    53 jump *label158 always
    54 label *label157
    55 control enabled projector1 false
    56 control enabled projector2 false
    57 set :check_radar*retval false
-    * jump *label159 always
    58 label *label158
    59 label *label159
    60 # "Function: def check_manual_shutdown()"
 
    68 label *label11
    69 label *label12
    70 set *tmp8 false
-    * jump *label10 always
    71 label *label10
    72 op or :emerg_shutdown :check_radar*retval *tmp8
    73 label *label126
 
    86 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
    87 op idiv :calc_charge_req:charge_req *tmp101 0.04
    88 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label130 always
    89 label *label130
    90 set .START_POWER_REQ :calc_charge_req*retval
    91 label *label131
 
   104 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   105 op idiv :calc_charge_req:charge_req *tmp101 0.04
   106 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label135 always
   107 label *label135
   108 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   109 label *label136
 
   122 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   123 op idiv :calc_charge_req:charge_req *tmp101 0.04
   124 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label140 always
   125 label *label140
   126 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   127 label *label141
 
   140 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   141 op idiv :calc_charge_req:charge_req *tmp101 0.04
   142 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label145 always
   143 label *label145
   144 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   145 label *label146
 
   158 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   159 op idiv :calc_charge_req:charge_req *tmp101 0.04
   160 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label150 always
   161 label *label150
   162 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   163 label *label164
 
   233 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   234 op idiv :calc_charge_req:charge_req *tmp101 0.04
   235 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label174 always
   236 label *label174
   237 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   238 jump *label175 greaterThanEq *tmp143 5000
 
   343 label *label199
   344 sensor *tmp188 reactor1 @enabled
   345 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
-    * jump *label200 always
   346 label *label200
   347 set :fuel_1 :start_reactor:supply_fuel
   348 set :t_startup1 .RET_T_STARTUP
 
   425 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   426 op idiv :calc_charge_req:charge_req *tmp101 0.04
   427 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label211 always
   428 label *label211
   429 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   430 jump *label212 greaterThanEq *tmp143 5000
 
   535 label *label236
   536 sensor *tmp188 reactor2 @enabled
   537 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
-    * jump *label237 always
   538 label *label237
   539 set :fuel_2 :start_reactor:supply_fuel
   540 set :t_startup2 .RET_T_STARTUP
 
   564 control enabled reactor4 false
   565 control enabled reactor5 false
   566 set :check_radar*retval true
-    * jump *label163 always
   567 jump *label162 always
   568 label *label161
   569 control enabled projector1 false
   570 control enabled projector2 false
   571 set :check_radar*retval false
-    * jump *label163 always
   572 label *label162
   573 label *label163
   574 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   644 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
   645 op idiv :calc_charge_req:charge_req *tmp101 0.04
   646 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label248 always
   647 label *label248
   648 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
   649 jump *label249 greaterThanEq *tmp143 5000
 
   754 label *label273
   755 sensor *tmp188 reactor3 @enabled
   756 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
-    * jump *label274 always
   757 label *label274
   758 set :fuel_3 :start_reactor:supply_fuel
   759 set :t_startup3 .RET_T_STARTUP
 
   837 print "n"
   838 label *label34
   839 label *label27
-    * jump *label25 always
   840 label *label25
   841 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   842 control config unloader7 *tmp46
 
   860 # "Function: def kilo(in val)"
   861 op idiv *tmp85 .AVG_SURPLUS 100
   862 op div :kilo*retval *tmp85 10
-    * jump *label115 always
   863 label *label115
   864 set :surplus :kilo*retval
   865 sensor :kilo:val node1 @powerNetStored
 
   867 # "Function: def kilo(in val)"
   868 op idiv *tmp85 :kilo:val 100
   869 op div :kilo*retval *tmp85 10
-    * jump *label117 always
   870 label *label117
   871 set :charge :kilo*retval
   872 jump *label42 lessThanEq .START_POWER_REQ 0
 
   874 # "Function: def kilo(in val)"
   875 op idiv *tmp85 .START_POWER_REQ 100
   876 op div :kilo*retval *tmp85 10
-    * jump *label119 always
   877 label *label119
   878 print "Req "
   879 print :kilo*retval
 
  1000 op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
  1001 op idiv :calc_charge_req:charge_req *tmp101 0.04
  1002 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label155 always
  1003 label *label155
  1004 op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
  1005 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
 
  1111 sensor *tmp188 :start_reactor:reactor @enabled
  1112 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
  1113 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label68 always
  1114 label *label68
  1115 return :start_reactor*retaddr
  1116 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-2 instructions):
 
   859 label *label114
   860 # "Function: def kilo(in val)"
   861 op idiv *tmp85 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp85 10
+  862 op div :surplus *tmp85 10
   863 label *label115
-    * set :surplus :kilo*retval
   864 sensor :kilo:val node1 @powerNetStored
   865 label *label116
   866 # "Function: def kilo(in val)"
 
   931 op sub *tmp104 @tick :start_reactor:t_startup
   932 op idiv :start_reactor:secs *tmp104 60
   933 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  934 set :start_reactor*retval true
   935 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   936 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   937 sensor *tmp109 .NODE @powerNetStored
 
   952 control enabled :start_reactor:reactor false
   953 print "emergency mode"
   954 print "\n"
-    * set :start_reactor:supply_fuel false
+  955 set :start_reactor*retval false
   956 jump *label70 always
   957 label *label69
   958 jump *label71 equal :start_reactor:enabled false
 
  1006 control enabled :start_reactor:reactor false
  1007 print "START FAIL battery"
  1008 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1009 set :start_reactor*retval false
  1010 jump *label86 always
  1011 label *label85
  1012 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1025 control enabled :start_reactor:reactor false
  1026 print "ABANDON - battery crit"
  1027 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1028 set :start_reactor*retval false
  1029 jump *label90 always
  1030 label *label89
  1031 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1054 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1055 print "IDLE"
  1056 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1057 set :start_reactor*retval false
  1058 jump *label94 always
  1059 label *label93
  1060 op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
 
  1069 print :start_reactor:flow
  1070 print "W)"
  1071 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1072 set :start_reactor*retval false
  1073 jump *label96 always
  1074 label *label95
  1075 jump *label97 equal :start_reactor:fuel_on false
 
  1109 label *label70
  1110 sensor *tmp188 :start_reactor:reactor @enabled
  1111 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1112 label *label68
  1113 return :start_reactor*retaddr
  1114 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   773 call *label3 :start_reactor*retaddr :start_reactor*retval
   774 set :fuel_5 :start_reactor*retval
   775 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp219 :fuel_3 :fuel_4
+  776 op or *tmp219 :start_reactor:supply_fuel :fuel_4
   777 op or *tmp26 *tmp219 :start_reactor*retval
   778 label *label124
   779 # "Function: def update_fuel(in fuel, in uld_in, in uld_out)"

Modifications by Iterated phase, Boolean Optimization, pass 2, iteration 1 (-1 instructions):
 
   198 label *label166
   199 jump *label167 always
   200 op mul *tmp128 15 1
-    * jump *label167 greaterThanEq :start_reactor:fuel_stored 15
   201 control enabled reactor1 false
   202 print "STOP system fuel low"
   203 print "\n"

Modifications by Jumps phase, Jump Threading, pass 4, iteration 1:
 
   176 jump *label199 always
   177 label *label165
   178 jump *label185 equal :start_reactor:enabled false
-    * jump *label166 greaterThanEq .REACTORS_DESIRED 1
+  179 jump *label167 greaterThanEq .REACTORS_DESIRED 1
   180 control enabled reactor1 false
   181 print "STOP unwanted"
   182 print "\n"
-    * jump *label184 always
+  183 jump *label198 always
   184 label *label166
   185 jump *label167 always
   186 op mul *tmp128 15 1
   187 control enabled reactor1 false
   188 print "STOP system fuel low"
   189 print "\n"
-    * jump *label183 always
+  190 jump *label198 always
   191 label *label167
   192 jump *label168 greaterThan :start_reactor:fuel 1
   193 control enabled reactor1 false
   194 print "STOP fuel low"
   195 print "\n"
-    * jump *label182 always
+  196 jump *label198 always
   197 label *label168
   198 jump *label169 greaterThan :start_reactor:cryo 1
   199 control enabled reactor1 false
   200 print "STOP out of cryo"
   201 print "\n"
-    * jump *label181 always
+  202 jump *label198 always
   203 label *label169
   204 jump *label177 greaterThanEq :start_reactor:secs 30
   205 # "Function: def calc_charge_req(in reactor, in time)"
 
   224 print "START FAIL battery"
   225 print "\n"
   226 set :start_reactor:supply_fuel false
-    * jump *label176 always
+  227 jump *label198 always
   228 label *label175
   229 op sub :start_reactor:time_left 30 :start_reactor:secs
   230 print "Starting "
 
   235 print "J"
   236 print "\n"
   237 label *label176
-    * jump *label180 always
+  238 jump *label198 always
   239 label *label177
   240 jump *label178 greaterThanEq :start_reactor:charge 2000
   241 jump *label178 greaterThanEq :start_reactor:surplus -500
 
   243 print "ABANDON - battery crit"
   244 print "\n"
   245 set :start_reactor:supply_fuel false
-    * jump *label179 always
+  246 jump *label198 always
   247 label *label178
   248 op idiv :start_reactor:mins :start_reactor:secs 6
   249 op div :start_reactor:mins :start_reactor:mins 10
 
   295 jump *label188 lessThanEq *tmp178 10
   296 print "WAIT fuel"
   297 print "\n"
-    * jump *label189 always
+  298 jump *label195 always
   299 label *label188
   300 print "WAIT system fuel"
   301 print "\n"
 
   366 control enabled reactor2 false
   367 print "STOP unwanted"
   368 print "\n"
-    * jump *label221 always
+  369 jump *label235 always
   370 label *label203
   371 op mul *tmp128 15 2
   372 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   373 control enabled reactor2 false
   374 print "STOP system fuel low"
   375 print "\n"
-    * jump *label220 always
+  376 jump *label235 always
   377 label *label204
   378 jump *label205 greaterThan :start_reactor:fuel 1
   379 control enabled reactor2 false
   380 print "STOP fuel low"
   381 print "\n"
-    * jump *label219 always
+  382 jump *label235 always
   383 label *label205
   384 jump *label206 greaterThan :start_reactor:cryo 1
   385 control enabled reactor2 false
   386 print "STOP out of cryo"
   387 print "\n"
-    * jump *label218 always
+  388 jump *label235 always
   389 label *label206
   390 jump *label214 greaterThanEq :start_reactor:secs 30
   391 # "Function: def calc_charge_req(in reactor, in time)"
 
   410 print "START FAIL battery"
   411 print "\n"
   412 set :start_reactor:supply_fuel false
-    * jump *label213 always
+  413 jump *label235 always
   414 label *label212
   415 op sub :start_reactor:time_left 30 :start_reactor:secs
   416 print "Starting "
 
   421 print "J"
   422 print "\n"
   423 label *label213
-    * jump *label217 always
+  424 jump *label235 always
   425 label *label214
   426 jump *label215 greaterThanEq :start_reactor:charge 2000
   427 jump *label215 greaterThanEq :start_reactor:surplus -500
 
   429 print "ABANDON - battery crit"
   430 print "\n"
   431 set :start_reactor:supply_fuel false
-    * jump *label216 always
+  432 jump *label235 always
   433 label *label215
   434 op idiv :start_reactor:mins :start_reactor:secs 6
   435 op div :start_reactor:mins :start_reactor:mins 10
 
   481 jump *label225 lessThanEq *tmp178 10
   482 print "WAIT fuel"
   483 print "\n"
-    * jump *label226 always
+  484 jump *label232 always
   485 label *label225
   486 print "WAIT system fuel"
   487 print "\n"
 
   577 control enabled reactor3 false
   578 print "STOP unwanted"
   579 print "\n"
-    * jump *label258 always
+  580 jump *label272 always
   581 label *label240
   582 op mul *tmp128 15 3
   583 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   584 control enabled reactor3 false
   585 print "STOP system fuel low"
   586 print "\n"
-    * jump *label257 always
+  587 jump *label272 always
   588 label *label241
   589 jump *label242 greaterThan :start_reactor:fuel 1
   590 control enabled reactor3 false
   591 print "STOP fuel low"
   592 print "\n"
-    * jump *label256 always
+  593 jump *label272 always
   594 label *label242
   595 jump *label243 greaterThan :start_reactor:cryo 1
   596 control enabled reactor3 false
   597 print "STOP out of cryo"
   598 print "\n"
-    * jump *label255 always
+  599 jump *label272 always
   600 label *label243
   601 jump *label251 greaterThanEq :start_reactor:secs 30
   602 # "Function: def calc_charge_req(in reactor, in time)"
 
   621 print "START FAIL battery"
   622 print "\n"
   623 set :start_reactor:supply_fuel false
-    * jump *label250 always
+  624 jump *label272 always
   625 label *label249
   626 op sub :start_reactor:time_left 30 :start_reactor:secs
   627 print "Starting "
 
   632 print "J"
   633 print "\n"
   634 label *label250
-    * jump *label254 always
+  635 jump *label272 always
   636 label *label251
   637 jump *label252 greaterThanEq :start_reactor:charge 2000
   638 jump *label252 greaterThanEq :start_reactor:surplus -500
 
   640 print "ABANDON - battery crit"
   641 print "\n"
   642 set :start_reactor:supply_fuel false
-    * jump *label253 always
+  643 jump *label272 always
   644 label *label252
   645 op idiv :start_reactor:mins :start_reactor:secs 6
   646 op div :start_reactor:mins :start_reactor:mins 10
 
   692 jump *label262 lessThanEq *tmp178 10
   693 print "WAIT fuel"
   694 print "\n"
-    * jump *label263 always
+  695 jump *label269 always
   696 label *label262
   697 print "WAIT system fuel"
   698 print "\n"
 
   774 jump *label31 equal :emerg_shutdown false
   775 print " Enemies detected."
   776 print "\n"
-    * jump *label32 always
+  777 jump *label27 always
   778 label *label31
   779 print " Critical power."
   780 print "\n"
 
   911 control enabled :start_reactor:reactor false
   912 print "STOP unwanted"
   913 print "\n"
-    * jump *label74 always
+  914 jump *label72 always
   915 label *label73
   916 jump *label75 lessThanEq :start_reactor:reactor_num 1
   917 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   919 control enabled :start_reactor:reactor false
   920 print "STOP system fuel low"
   921 print "\n"
-    * jump *label76 always
+  922 jump *label72 always
   923 label *label75
   924 jump *label79 greaterThan :start_reactor:fuel 1
   925 control enabled :start_reactor:reactor false
   926 print "STOP fuel low"
   927 print "\n"
-    * jump *label80 always
+  928 jump *label72 always
   929 label *label79
   930 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   931 control enabled :start_reactor:reactor false
   932 print "STOP out of cryo"
   933 print "\n"
-    * jump *label82 always
+  934 jump *label72 always
   935 label *label81
   936 jump *label83 greaterThanEq :start_reactor:secs 30
   937 # "Function: def calc_charge_req(in reactor, in time)"
 
   956 print "START FAIL battery"
   957 print "\n"
   958 set :start_reactor*retval false
-    * jump *label86 always
+  959 jump *label72 always
   960 label *label85
   961 op sub :start_reactor:time_left 30 :start_reactor:secs
   962 print "Starting "
 
   967 print "J"
   968 print "\n"
   969 label *label86
-    * jump *label84 always
+  970 jump *label72 always
   971 label *label83
   972 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   973 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   975 print "ABANDON - battery crit"
   976 print "\n"
   977 set :start_reactor*retval false
-    * jump *label90 always
+  978 jump *label72 always
   979 label *label89
   980 op idiv :start_reactor:mins :start_reactor:secs 6
   981 op div :start_reactor:mins :start_reactor:mins 10
 
  1027 jump *label101 lessThanEq *tmp178 .FUEL_REQ
  1028 print "WAIT fuel"
  1029 print "\n"
-    * jump *label102 always
+ 1030 jump *label98 always
  1031 label *label101
  1032 print "WAIT system fuel"
  1033 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-8 instructions):
 
   181 print "STOP unwanted"
   182 print "\n"
   183 jump *label198 always
-    * label *label166
-    * jump *label167 always
-    * op mul *tmp128 15 1
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label198 always
   184 label *label167
   185 jump *label168 greaterThan :start_reactor:fuel 1
   186 control enabled reactor1 false
 
   227 print :calc_charge_req*retval
   228 print "J"
   229 print "\n"
-    * label *label176
   230 jump *label198 always
   231 label *label177
   232 jump *label178 greaterThanEq :start_reactor:charge 2000
 
   244 print " "
   245 print "mins"
   246 print "\n"
-    * label *label179
-    * label *label180
-    * label *label181
-    * label *label182
-    * label *label183
-    * label *label184
   247 jump *label198 always
   248 label *label185
   249 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   285 label *label188
   286 print "WAIT system fuel"
   287 print "\n"
-    * label *label189
   288 jump *label195 always
   289 label *label190
   290 op mul *tmp181 45 1
 
   405 print :calc_charge_req*retval
   406 print "J"
   407 print "\n"
-    * label *label213
   408 jump *label235 always
   409 label *label214
   410 jump *label215 greaterThanEq :start_reactor:charge 2000
 
   422 print " "
   423 print "mins"
   424 print "\n"
-    * label *label216
-    * label *label217
-    * label *label218
-    * label *label219
-    * label *label220
-    * label *label221
   425 jump *label235 always
   426 label *label222
   427 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   463 label *label225
   464 print "WAIT system fuel"
   465 print "\n"
-    * label *label226
   466 jump *label232 always
   467 label *label227
   468 op mul *tmp181 45 2
 
   608 print :calc_charge_req*retval
   609 print "J"
   610 print "\n"
-    * label *label250
   611 jump *label272 always
   612 label *label251
   613 jump *label252 greaterThanEq :start_reactor:charge 2000
 
   625 print " "
   626 print "mins"
   627 print "\n"
-    * label *label253
-    * label *label254
-    * label *label255
-    * label *label256
-    * label *label257
-    * label *label258
   628 jump *label272 always
   629 label *label259
   630 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   666 label *label262
   667 print "WAIT system fuel"
   668 print "\n"
-    * label *label263
   669 jump *label269 always
   670 label *label264
   671 op mul *tmp181 45 3
 
   747 label *label31
   748 print " Critical power."
   749 print "\n"
-    * label *label32
   750 jump *label27 always
   751 label *label26
   752 jump *label33 notEqual *tmp28 false
 
   844 label *label55
   845 printflush message1
   846 jump *label7 always
-    * end
   847 label *label3
   848 # "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
   849 op sub *tmp104 @tick :start_reactor:t_startup
 
   933 print :calc_charge_req*retval
   934 print "J"
   935 print "\n"
-    * label *label86
   936 jump *label72 always
   937 label *label83
   938 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
 
   950 print " "
   951 print "mins"
   952 print "\n"
-    * label *label90
-    * label *label84
-    * label *label82
-    * label *label80
-    * label *label76
-    * label *label74
   953 jump *label72 always
   954 label *label71
   955 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   991 label *label101
   992 print "WAIT system fuel"
   993 print "\n"
-    * label *label102
   994 jump *label98 always
   995 label *label97
   996 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1018 sensor *tmp188 :start_reactor:reactor @enabled
  1019 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
  1020 return :start_reactor*retaddr
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    59 jump *label11 equal switch1 null
    60 sensor *tmp10 switch1 @enabled
    61 jump *label11 notEqual *tmp10 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   62 print "User has disabled emergency switch\n"
    63 set *tmp8 true
    64 jump *label10 always
    65 label *label11
 
   163 op mul *tmp116 :start_reactor:surplus 0.2
   164 op add .AVG_SURPLUS *tmp115 *tmp116
   165 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  166 print "#1 - "
   167 jump *label165 equal :emerg_shutdown false
   168 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  169 print "emergency mode\n"
   170 set :start_reactor:supply_fuel false
   171 jump *label199 always
   172 label *label165
   173 jump *label185 equal :start_reactor:enabled false
   174 jump *label167 greaterThanEq .REACTORS_DESIRED 1
   175 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  176 print "STOP unwanted\n"
   177 jump *label198 always
   178 label *label167
   179 jump *label168 greaterThan :start_reactor:fuel 1
   180 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  181 print "STOP fuel low\n"
   182 jump *label198 always
   183 label *label168
   184 jump *label169 greaterThan :start_reactor:cryo 1
   185 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  186 print "STOP out of cryo\n"
   187 jump *label198 always
   188 label *label169
   189 jump *label177 greaterThanEq :start_reactor:secs 30
 
   206 jump *label175 greaterThanEq *tmp143 5000
   207 jump *label175 greaterThanEq :start_reactor:surplus -500
   208 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  209 print "START FAIL battery\n"
   210 set :start_reactor:supply_fuel false
   211 jump *label198 always
   212 label *label175
   213 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  214 print "Starting {0} secs, req {0}J\n"
+  215 format :start_reactor:time_left
+  216 format :calc_charge_req*retval
   217 jump *label198 always
   218 label *label177
   219 jump *label178 greaterThanEq :start_reactor:charge 2000
   220 jump *label178 greaterThanEq :start_reactor:surplus -500
   221 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  222 print "ABANDON - battery crit\n"
   223 set :start_reactor:supply_fuel false
   224 jump *label198 always
   225 label *label178
   226 op idiv :start_reactor:mins :start_reactor:secs 6
   227 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  228 print "RUN {0} mins\n"
+  229 format :start_reactor:mins
   230 jump *label198 always
   231 label *label185
   232 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   238 op mul *tmp163 2 1
   239 op add :start_reactor:cryo_req 3 2
   240 jump *label186 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  241 print "IDLE\n"
   242 set :start_reactor:supply_fuel false
   243 jump *label197 always
   244 label *label186
 
   248 op div :start_reactor:flow *tmp171 10
   249 op idiv *tmp174 :start_reactor:charge_units 0.001
   250 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  251 print "WAIT power. (%{0}J + %{0}W)\n"
+  252 format :start_reactor:charge
+  253 format :start_reactor:flow
   254 set :start_reactor:supply_fuel false
   255 jump *label196 always
   256 label *label187
 
   258 jump *label190 greaterThanEq :start_reactor:fuel 10
   259 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   260 jump *label188 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  261 print "WAIT fuel\n"
   262 jump *label195 always
   263 label *label188
-    * print "WAIT system fuel"
-    * print "\n"
+  264 print "WAIT system fuel\n"
   265 jump *label195 always
   266 label *label190
   267 op mul *tmp181 45 1
   268 jump *label191 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  269 print "WAIT buffer fuel\n"
   270 jump *label194 always
   271 label *label191
   272 jump *label192 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  273 print "WAIT cryo\n"
   274 jump *label193 always
   275 label *label192
-    * print "STARTUP"
-    * print "\n"
+  276 print "STARTUP\n"
   277 op add .START_POWER_REQ .START_POWER_REQ 23000
   278 control enabled reactor1 true
   279 label *label193
 
   309 op mul *tmp116 :start_reactor:surplus 0.2
   310 op add .AVG_SURPLUS *tmp115 *tmp116
   311 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  312 print "#2 - "
   313 jump *label202 equal :emerg_shutdown false
   314 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  315 print "emergency mode\n"
   316 set :start_reactor:supply_fuel false
   317 jump *label236 always
   318 label *label202
   319 jump *label222 equal :start_reactor:enabled false
   320 jump *label203 greaterThanEq .REACTORS_DESIRED 2
   321 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  322 print "STOP unwanted\n"
   323 jump *label235 always
   324 label *label203
   325 op mul *tmp128 15 2
   326 jump *label204 greaterThanEq :start_reactor:fuel_stored 30
   327 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  328 print "STOP system fuel low\n"
   329 jump *label235 always
   330 label *label204
   331 jump *label205 greaterThan :start_reactor:fuel 1
   332 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  333 print "STOP fuel low\n"
   334 jump *label235 always
   335 label *label205
   336 jump *label206 greaterThan :start_reactor:cryo 1
   337 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  338 print "STOP out of cryo\n"
   339 jump *label235 always
   340 label *label206
   341 jump *label214 greaterThanEq :start_reactor:secs 30
 
   358 jump *label212 greaterThanEq *tmp143 5000
   359 jump *label212 greaterThanEq :start_reactor:surplus -500
   360 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  361 print "START FAIL battery\n"
   362 set :start_reactor:supply_fuel false
   363 jump *label235 always
   364 label *label212
   365 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  366 print "Starting {0} secs, req {0}J\n"
+  367 format :start_reactor:time_left
+  368 format :calc_charge_req*retval
   369 jump *label235 always
   370 label *label214
   371 jump *label215 greaterThanEq :start_reactor:charge 2000
   372 jump *label215 greaterThanEq :start_reactor:surplus -500
   373 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  374 print "ABANDON - battery crit\n"
   375 set :start_reactor:supply_fuel false
   376 jump *label235 always
   377 label *label215
   378 op idiv :start_reactor:mins :start_reactor:secs 6
   379 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  380 print "RUN {0} mins\n"
+  381 format :start_reactor:mins
   382 jump *label235 always
   383 label *label222
   384 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   390 op mul *tmp163 2 2
   391 op add :start_reactor:cryo_req 3 4
   392 jump *label223 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  393 print "IDLE\n"
   394 set :start_reactor:supply_fuel false
   395 jump *label234 always
   396 label *label223
 
   400 op div :start_reactor:flow *tmp171 10
   401 op idiv *tmp174 :start_reactor:charge_units 0.001
   402 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  403 print "WAIT power. (%{0}J + %{0}W)\n"
+  404 format :start_reactor:charge
+  405 format :start_reactor:flow
   406 set :start_reactor:supply_fuel false
   407 jump *label233 always
   408 label *label224
 
   410 jump *label227 greaterThanEq :start_reactor:fuel 10
   411 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   412 jump *label225 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  413 print "WAIT fuel\n"
   414 jump *label232 always
   415 label *label225
-    * print "WAIT system fuel"
-    * print "\n"
+  416 print "WAIT system fuel\n"
   417 jump *label232 always
   418 label *label227
   419 op mul *tmp181 45 2
   420 jump *label228 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  421 print "WAIT buffer fuel\n"
   422 jump *label231 always
   423 label *label228
   424 jump *label229 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  425 print "WAIT cryo\n"
   426 jump *label230 always
   427 label *label229
-    * print "STARTUP"
-    * print "\n"
+  428 print "STARTUP\n"
   429 op add .START_POWER_REQ .START_POWER_REQ 23000
   430 control enabled reactor2 true
   431 label *label230
 
   486 op mul *tmp116 :start_reactor:surplus 0.2
   487 op add .AVG_SURPLUS *tmp115 *tmp116
   488 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  489 print "#3 - "
   490 jump *label239 equal :emerg_shutdown false
   491 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  492 print "emergency mode\n"
   493 set :start_reactor:supply_fuel false
   494 jump *label273 always
   495 label *label239
   496 jump *label259 equal :start_reactor:enabled false
   497 jump *label240 greaterThanEq .REACTORS_DESIRED 3
   498 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  499 print "STOP unwanted\n"
   500 jump *label272 always
   501 label *label240
   502 op mul *tmp128 15 3
   503 jump *label241 greaterThanEq :start_reactor:fuel_stored 45
   504 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  505 print "STOP system fuel low\n"
   506 jump *label272 always
   507 label *label241
   508 jump *label242 greaterThan :start_reactor:fuel 1
   509 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  510 print "STOP fuel low\n"
   511 jump *label272 always
   512 label *label242
   513 jump *label243 greaterThan :start_reactor:cryo 1
   514 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  515 print "STOP out of cryo\n"
   516 jump *label272 always
   517 label *label243
   518 jump *label251 greaterThanEq :start_reactor:secs 30
 
   535 jump *label249 greaterThanEq *tmp143 5000
   536 jump *label249 greaterThanEq :start_reactor:surplus -500
   537 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  538 print "START FAIL battery\n"
   539 set :start_reactor:supply_fuel false
   540 jump *label272 always
   541 label *label249
   542 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  543 print "Starting {0} secs, req {0}J\n"
+  544 format :start_reactor:time_left
+  545 format :calc_charge_req*retval
   546 jump *label272 always
   547 label *label251
   548 jump *label252 greaterThanEq :start_reactor:charge 2000
   549 jump *label252 greaterThanEq :start_reactor:surplus -500
   550 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  551 print "ABANDON - battery crit\n"
   552 set :start_reactor:supply_fuel false
   553 jump *label272 always
   554 label *label252
   555 op idiv :start_reactor:mins :start_reactor:secs 6
   556 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  557 print "RUN {0} mins\n"
+  558 format :start_reactor:mins
   559 jump *label272 always
   560 label *label259
   561 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   567 op mul *tmp163 2 3
   568 op add :start_reactor:cryo_req 3 6
   569 jump *label260 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  570 print "IDLE\n"
   571 set :start_reactor:supply_fuel false
   572 jump *label271 always
   573 label *label260
 
   577 op div :start_reactor:flow *tmp171 10
   578 op idiv *tmp174 :start_reactor:charge_units 0.001
   579 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  580 print "WAIT power. (%{0}J + %{0}W)\n"
+  581 format :start_reactor:charge
+  582 format :start_reactor:flow
   583 set :start_reactor:supply_fuel false
   584 jump *label270 always
   585 label *label261
 
   587 jump *label264 greaterThanEq :start_reactor:fuel 10
   588 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   589 jump *label262 lessThanEq *tmp178 10
-    * print "WAIT fuel"
-    * print "\n"
+  590 print "WAIT fuel\n"
   591 jump *label269 always
   592 label *label262
-    * print "WAIT system fuel"
-    * print "\n"
+  593 print "WAIT system fuel\n"
   594 jump *label269 always
   595 label *label264
   596 op mul *tmp181 45 3
   597 jump *label265 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  598 print "WAIT buffer fuel\n"
   599 jump *label268 always
   600 label *label265
   601 jump *label266 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  602 print "WAIT cryo\n"
   603 jump *label267 always
   604 label *label266
-    * print "STARTUP"
-    * print "\n"
+  605 print "STARTUP\n"
   606 op add .START_POWER_REQ .START_POWER_REQ 23000
   607 control enabled reactor3 true
   608 label *label267
 
   655 jump *label26 equal :emerg_shutdown false
   656 label *label28
   657 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  658 print "Central Fuel at {0} / 0 - "
+  659 format :throttle_blast:fuel_stored
   660 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  661 print " Enemies detected.\n"
   662 jump *label27 always
   663 label *label31
-    * print " Critical power."
-    * print "\n"
+  664 print " Critical power.\n"
   665 jump *label27 always
   666 label *label26
   667 jump *label33 notEqual *tmp28 false
   668 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  669 print "Fuel {0} / 150 (due to emergency)\n"
+  670 format :throttle_blast:fuel_stored
   671 jump *label34 always
   672 label *label33
   673 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  674 print "Fuel {0} / 800\n"
+  675 format :throttle_blast:fuel_stored
   676 label *label34
   677 label *label27
   678 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
 
   683 op div :diff_generators:stored_pc *tmp48 *tmp49
   684 jump *label38 lessThanEq :diff_generators:stored_pc 0.9
   685 jump *label38 greaterThanEq .START_POWER_REQ 10
-    * print "Differential now idle."
-    * print "\n"
+  686 print "Differential now idle.\n"
   687 control enabled generator1 false
   688 control enabled generator2 false
   689 jump *label39 always
 
   703 # "Function: def kilo(in val)"
   704 op idiv *tmp85 .START_POWER_REQ 100
   705 op div :kilo*retval *tmp85 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  706 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  707 format :kilo*retval
+  708 format :charge
+  709 format :surplus
   710 jump *label43 always
   711 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  712 print "Power {0}kW, {0}kJ\n"
+  713 format :surplus
+  714 format :kilo*retval
   715 # "Function: def update_reactors_desired()"
   716 sensor *tmp65 node1 @powerNetStored
   717 sensor *tmp66 node1 @powerNetCapacity
 
   733 label *label51
   734 label *label43
   735 jump *label55 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  736 print "Require only {0}/5 reactors.\n"
+  737 format .REACTORS_DESIRED
   738 label *label55
   739 printflush message1
   740 jump *label7 always
 
   756 op mul *tmp116 :start_reactor:surplus 0.2
   757 op add .AVG_SURPLUS *tmp115 *tmp116
   758 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  759 print "#{0} - "
+  760 format :start_reactor:reactor_num
   761 jump *label69 equal :start_reactor:emerg_shutdown false
   762 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  763 print "emergency mode\n"
   764 set :start_reactor*retval false
   765 jump *label70 always
   766 label *label69
   767 jump *label71 equal :start_reactor:enabled false
   768 jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   769 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  770 print "STOP unwanted\n"
   771 jump *label72 always
   772 label *label73
   773 jump *label75 lessThanEq :start_reactor:reactor_num 1
   774 op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
   775 jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
   776 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  777 print "STOP system fuel low\n"
   778 jump *label72 always
   779 label *label75
   780 jump *label79 greaterThan :start_reactor:fuel 1
   781 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  782 print "STOP fuel low\n"
   783 jump *label72 always
   784 label *label79
   785 jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
   786 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  787 print "STOP out of cryo\n"
   788 jump *label72 always
   789 label *label81
   790 jump *label83 greaterThanEq :start_reactor:secs 30
 
   807 jump *label85 greaterThanEq *tmp143 .PWR_ABORT
   808 jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   809 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  810 print "START FAIL battery\n"
   811 set :start_reactor*retval false
   812 jump *label72 always
   813 label *label85
   814 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  815 print "Starting {0} secs, req {0}J\n"
+  816 format :start_reactor:time_left
+  817 format :calc_charge_req*retval
   818 jump *label72 always
   819 label *label83
   820 jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
   821 jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   822 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  823 print "ABANDON - battery crit\n"
   824 set :start_reactor*retval false
   825 jump *label72 always
   826 label *label89
   827 op idiv :start_reactor:mins :start_reactor:secs 6
   828 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  829 print "RUN {0} mins\n"
+  830 format :start_reactor:mins
   831 jump *label72 always
   832 label *label71
   833 op sub *tmp157 :start_reactor:charge .START_POWER_REQ
 
   839 op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
   840 op add :start_reactor:cryo_req .CRYO_REQ *tmp163
   841 jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  842 print "IDLE\n"
   843 set :start_reactor*retval false
   844 jump *label94 always
   845 label *label93
 
   849 op div :start_reactor:flow *tmp171 10
   850 op idiv *tmp174 :start_reactor:charge_units 0.001
   851 op div :start_reactor:charge *tmp174 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  852 print "WAIT power. (%{0}J + %{0}W)\n"
+  853 format :start_reactor:charge
+  854 format :start_reactor:flow
   855 set :start_reactor*retval false
   856 jump *label96 always
   857 label *label95
 
   859 jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
   860 op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
   861 jump *label101 lessThanEq *tmp178 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  862 print "WAIT fuel\n"
   863 jump *label98 always
   864 label *label101
-    * print "WAIT system fuel"
-    * print "\n"
+  865 print "WAIT system fuel\n"
   866 jump *label98 always
   867 label *label97
   868 op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
   869 jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
-    * print "WAIT buffer fuel"
-    * print "\n"
+  870 print "WAIT buffer fuel\n"
   871 jump *label104 always
   872 label *label103
   873 jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  874 print "WAIT cryo\n"
   875 jump *label106 always
   876 label *label105
-    * print "STARTUP"
-    * print "\n"
+  877 print "STARTUP\n"
   878 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   879 control enabled :start_reactor:reactor true
   880 label *label106

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp218 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp218 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label157 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label158 always
label *label157
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label158
# "Function: def check_manual_shutdown()"
jump *label11 equal switch1 null
sensor *tmp10 switch1 @enabled
jump *label11 notEqual *tmp10 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label10 always
label *label11
set *tmp8 false
label *label10
op or :emerg_shutdown :check_radar*retval *tmp8
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp94 60
jump *label127 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor1 @enabled
jump *label128 notEqual *tmp97 false
label *label127
set :calc_charge_req*retval 0
jump *label130 always
label *label128
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label130
set .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp94 60
jump *label132 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor2 @enabled
jump *label133 notEqual *tmp97 false
label *label132
set :calc_charge_req*retval 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label135
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp94 60
jump *label137 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor3 @enabled
jump *label138 notEqual *tmp97 false
label *label137
set :calc_charge_req*retval 0
jump *label140 always
label *label138
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label140
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp94 60
jump *label142 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor4 @enabled
jump *label143 notEqual *tmp97 false
label *label142
set :calc_charge_req*retval 0
jump *label145 always
label *label143
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label145
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp94 60
jump *label147 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor5 @enabled
jump *label148 notEqual *tmp97 false
label *label147
set :calc_charge_req*retval 0
jump *label150 always
label *label148
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label150
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup1
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label165 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label199 always
label *label165
jump *label185 equal :start_reactor:enabled false
jump *label167 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label198 always
label *label167
jump *label168 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label198 always
label *label168
jump *label169 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label198 always
label *label169
jump *label177 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp94 60
jump *label171 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor1 @enabled
jump *label172 notEqual *tmp97 false
label *label171
set :calc_charge_req*retval 0
jump *label174 always
label *label172
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label174
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label175 greaterThanEq *tmp143 5000
jump *label175 greaterThanEq :start_reactor:surplus -500
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label198 always
label *label175
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label198 always
label *label177
jump *label178 greaterThanEq :start_reactor:charge 2000
jump *label178 greaterThanEq :start_reactor:surplus -500
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label198 always
label *label178
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label198 always
label *label185
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 1
op add :start_reactor:cryo_req 3 2
jump *label186 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label197 always
label *label186
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label187 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label196 always
label *label187
jump *label190 equal :fuel_1 false
jump *label190 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label188 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label195 always
label *label188
print "WAIT system fuel\n"
jump *label195 always
label *label190
op mul *tmp181 45 1
jump *label191 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label194 always
label *label191
jump *label192 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label193 always
label *label192
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label193
label *label194
label *label195
label *label196
label *label197
label *label198
label *label199
sensor *tmp188 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp89
select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp93
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup2
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label202 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label236 always
label *label202
jump *label222 equal :start_reactor:enabled false
jump *label203 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label235 always
label *label203
op mul *tmp128 15 2
jump *label204 greaterThanEq :start_reactor:fuel_stored 30
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label235 always
label *label204
jump *label205 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label235 always
label *label205
jump *label206 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label235 always
label *label206
jump *label214 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp94 60
jump *label208 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor2 @enabled
jump *label209 notEqual *tmp97 false
label *label208
set :calc_charge_req*retval 0
jump *label211 always
label *label209
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label211
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label212 greaterThanEq *tmp143 5000
jump *label212 greaterThanEq :start_reactor:surplus -500
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label235 always
label *label212
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label235 always
label *label214
jump *label215 greaterThanEq :start_reactor:charge 2000
jump *label215 greaterThanEq :start_reactor:surplus -500
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label235 always
label *label215
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label235 always
label *label222
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 2
op add :start_reactor:cryo_req 3 4
jump *label223 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label234 always
label *label223
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label224 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label233 always
label *label224
jump *label227 equal :fuel_2 false
jump *label227 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label225 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label232 always
label *label225
print "WAIT system fuel\n"
jump *label232 always
label *label227
op mul *tmp181 45 2
jump *label228 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label231 always
label *label228
jump *label229 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label230 always
label *label229
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label230
label *label231
label *label232
label *label233
label *label234
label *label235
label *label236
sensor *tmp188 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp89
select *tmp93 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp93
# "Function: def check_radar(in unit)"
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label161 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label162 always
label *label161
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label162
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :t_startup3
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp109 node1 @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 node1 @powerNetIn
sensor *tmp112 node1 @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label239 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label273 always
label *label239
jump *label259 equal :start_reactor:enabled false
jump *label240 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label272 always
label *label240
op mul *tmp128 15 3
jump *label241 greaterThanEq :start_reactor:fuel_stored 45
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label272 always
label *label241
jump *label242 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label272 always
label *label242
jump *label243 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label272 always
label *label243
jump *label251 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp94 60
jump *label245 greaterThan :calc_charge_req:secs 30
sensor *tmp97 reactor3 @enabled
jump *label246 notEqual *tmp97 false
label *label245
set :calc_charge_req*retval 0
jump *label248 always
label *label246
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label248
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label249 greaterThanEq *tmp143 5000
jump *label249 greaterThanEq :start_reactor:surplus -500
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label272 always
label *label249
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label272 always
label *label251
jump *label252 greaterThanEq :start_reactor:charge 2000
jump *label252 greaterThanEq :start_reactor:surplus -500
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label272 always
label *label252
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label272 always
label *label259
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 5000
op div *tmp159 *tmp158 23000
op div :start_reactor:charge_units *tmp158 38333.333333333336
op div *tmp161 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 2 3
op add :start_reactor:cryo_req 3 6
jump *label260 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label271 always
label *label260
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label261 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label270 always
label *label261
jump *label264 equal :fuel_3 false
jump *label264 greaterThanEq :start_reactor:fuel 10
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label262 lessThanEq *tmp178 10
print "WAIT fuel\n"
jump *label269 always
label *label262
print "WAIT system fuel\n"
jump *label269 always
label *label264
op mul *tmp181 45 3
jump *label265 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label268 always
label *label265
jump *label266 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label267 always
label *label266
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label267
label *label268
label *label269
label *label270
label *label271
label *label272
label *label273
sensor *tmp188 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
call *label3 :start_reactor*retaddr :start_reactor*retval
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp219 :start_reactor:supply_fuel :fuel_4
op or *tmp26 *tmp219 :start_reactor*retval
# "Function: def update_fuel(in fuel, in uld_in, in uld_out)"
select *tmp89 notEqual *tmp26 false @blast-compound @scrap
control config unloader5 *tmp89
select *tmp93 equal *tmp26 false @blast-compound @scrap
control config unloader6 *tmp93
op or *tmp220 :fuel_1 :fuel_2
op or *tmp28 *tmp220 *tmp26
# "Function: def throttle_blast(in reactors_fueled, in emerg_shutdown)"
sensor *tmp30 node1 @powerNetStored
op floor :throttle_blast:charge *tmp30
sensor *tmp32 node1 @powerNetIn
sensor *tmp33 node1 @powerNetOut
op sub *tmp34 *tmp32 *tmp33
op floor :throttle_blast:surplus *tmp34
sensor :throttle_blast:fuel_stored vault1 @blast-compound
jump *label29 greaterThanEq :throttle_blast:charge 5000
jump *label28 lessThan :throttle_blast:surplus -500
label *label29
jump *label26 equal :emerg_shutdown false
label *label28
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label27 always
label *label31
print " Critical power.\n"
jump *label27 always
label *label26
jump *label33 notEqual *tmp28 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label27
select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
control config unloader7 *tmp46
# "Function: def diff_generators()"
sensor *tmp48 node1 @powerNetStored
sensor *tmp49 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp48 *tmp49
jump *label38 lessThanEq :diff_generators:stored_pc 0.9
jump *label38 greaterThanEq .START_POWER_REQ 10
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
# "Function: def kilo(in val)"
op idiv *tmp85 .AVG_SURPLUS 100
op div :surplus *tmp85 10
sensor :kilo:val node1 @powerNetStored
# "Function: def kilo(in val)"
op idiv *tmp85 :kilo:val 100
op div :kilo*retval *tmp85 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
# "Function: def kilo(in val)"
op idiv *tmp85 .START_POWER_REQ 100
op div :kilo*retval *tmp85 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
# "Function: def update_reactors_desired()"
sensor *tmp65 node1 @powerNetStored
sensor *tmp66 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp65 *tmp66
jump *label45 lessThanEq :update_reactors_desired:stored 0.98
jump *label45 lessThanEq .AVG_SURPLUS 16500
jump *label49 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label49
label *label45
jump *label51 greaterThanEq :update_reactors_desired:stored 0.8
jump *label51 greaterThanEq .AVG_SURPLUS 8000
op sub *tmp78 .AVG_SURPLUS 10000
op idiv *tmp79 *tmp78 6500
op max :update_reactors_desired:needed 1 *tmp79
op add *tmp81 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp81
label *label51
label *label43
jump *label55 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label55
printflush message1
jump *label7 always
label *label3
# "Function: def start_reactor(in reactor, in reactor_num, in emerg_shutdown, in fuel_on, in t_startup)"
op sub *tmp104 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp104 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp109 .NODE @powerNetStored
op floor :start_reactor:charge *tmp109
sensor *tmp111 .NODE @powerNetIn
sensor *tmp112 .NODE @powerNetOut
op sub *tmp113 *tmp111 *tmp112
op floor :start_reactor:surplus *tmp113
op mul *tmp115 .AVG_SURPLUS 0.8
op mul *tmp116 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp115 *tmp116
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label69 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label70 always
label *label69
jump *label71 equal :start_reactor:enabled false
jump *label73 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label72 always
label *label73
jump *label75 lessThanEq :start_reactor:reactor_num 1
op mul *tmp128 .FUEL_TOT_ABORT :start_reactor:reactor_num
jump *label75 greaterThanEq :start_reactor:fuel_stored *tmp128
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label72 always
label *label75
jump *label79 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label72 always
label *label79
jump *label81 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label72 always
label *label81
jump *label83 greaterThanEq :start_reactor:secs 30
# "Function: def calc_charge_req(in reactor, in time)"
op sub *tmp94 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp94 60
jump *label152 greaterThan :calc_charge_req:secs 30
sensor *tmp97 :start_reactor:reactor @enabled
jump *label153 notEqual *tmp97 false
label *label152
set :calc_charge_req*retval 0
jump *label155 always
label *label153
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp101 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp101 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label155
op sub *tmp143 :start_reactor:charge :calc_charge_req*retval
jump *label85 greaterThanEq *tmp143 .PWR_ABORT
jump *label85 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label72 always
label *label85
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label72 always
label *label83
jump *label89 greaterThanEq :start_reactor:charge .PWR_ABANDON
jump *label89 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label72 always
label *label89
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label72 always
label *label71
op sub *tmp157 :start_reactor:charge .START_POWER_REQ
op sub *tmp158 *tmp157 .PWR_ABORT
op div *tmp159 *tmp158 .PWR_REQ
op mul :start_reactor:charge_units *tmp159 .PWR_RESERVE
op div *tmp161 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp161
op mul *tmp163 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp163
jump *label93 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label94 always
label *label93
op add *tmp167 :start_reactor:flow_units :start_reactor:charge_units
jump *label95 greaterThanEq *tmp167 1
op idiv *tmp171 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp171 10
op idiv *tmp174 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp174 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label96 always
label *label95
jump *label97 equal :start_reactor:fuel_on false
jump *label97 greaterThanEq :start_reactor:fuel .FUEL_REQ
op add *tmp178 :start_reactor:fuel :start_reactor:fuel_stored
jump *label101 lessThanEq *tmp178 .FUEL_REQ
print "WAIT fuel\n"
jump *label98 always
label *label101
print "WAIT system fuel\n"
jump *label98 always
label *label97
op mul *tmp181 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label103 greaterThanEq :start_reactor:fuel_stored *tmp181
print "WAIT buffer fuel\n"
jump *label104 always
label *label103
jump *label105 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label106 always
label *label105
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label106
label *label104
label *label98
label *label96
label *label94
label *label72
label *label70
sensor *tmp188 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp188 @tick :start_reactor:t_startup
return :start_reactor*retaddr
