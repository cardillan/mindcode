   668 instructions before optimizations.
    56 instructions eliminated by Temp Variables Elimination (6 iterations).
     4 instructions eliminated by Case Expression Optimization.
    85 instructions eliminated by Dead Code Elimination (7 iterations).
     1 instructions eliminated by Jump Normalization (5 iterations).
    47 instructions eliminated by Condition Optimization (2 passes, 7 iterations).
    42 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     1 instructions eliminated by Expression Optimization (3 iterations).
    16 instructions eliminated by Boolean Optimization (7 iterations).
       4 final jumps of a short-circuited expression optimized.
       5 fully-evaluated expressions optimized using selects.
     2 instructions eliminated by If Expression Optimization (3 iterations).
     8 instructions eliminated by Data Flow Optimization (2 passes, 9 iterations).
     1 instructions eliminated by Loop Rotation (3 iterations).
       1 loop conditions were fully rotated.
       2 loop conditions were partially rotated.
    10 instructions eliminated by Case Switching (6 iterations).
     3 case expressions converted to fast dispatch by Case Switching.
    16 instructions eliminated by Jump Straightening (6 iterations).
    12 instructions updated by Jump Threading.
     1 instructions eliminated by Unreachable Code Elimination (2 iterations).
    39 instructions eliminated by Print Merging.
   339 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 607):
  o Fast-dispatch case at line 210:16                            size    -2, benefit       25.0, efficiency   Infinity
  o Fast-dispatch case at line 236:5                             size    -2, benefit       25.0, efficiency   Infinity
  * Fast-dispatch case at line 419:9                             size    -8, benefit     2187.5, efficiency   Infinity (-8 instructions)

Pass 1: speed optimization selection (cost limit 615):
  * Fast-dispatch case at line 210:16                            size    -2, benefit       25.0, efficiency   Infinity (-2 instructions)
  o Fast-dispatch case at line 236:5                             size    -2, benefit       25.0, efficiency   Infinity

Pass 1: speed optimization selection (cost limit 617):
  * Fast-dispatch case at line 236:5                             size    -2, benefit       25.0, efficiency   Infinity (-1 instructions)

Modifications by Initial phase, Case Expression Optimization, iteration 1 (-4 instructions):
 
    19 print :block
    20 print "\n"
    21 sensor *tmp5 :block @type
-    * set *tmp6 *tmp5
-    * jump *label8 equal *tmp6 @impact-reactor
+   22 jump *label8 equal *tmp5 @impact-reactor
    23 jump *label7 always
    24 label *label8
    25 set .START :n
 
    27 set *tmp4 :reactors
    28 jump *label6 always
    29 label *label7
-    * jump *label10 equal *tmp6 @overdrive-projector
-    * jump *label10 equal *tmp6 @overdrive-dome
+   30 jump *label10 equal *tmp5 @overdrive-projector
+   31 jump *label10 equal *tmp5 @overdrive-dome
    32 jump *label9 always
    33 label *label10
    34 set .START :n
 
   192 label *label18
   193 set *tmp44 null
   194 label *label19
-    * set *tmp61 .MODE
-    * jump *label35 equal *tmp61 0
+  195 jump *label35 equal .MODE 0
   196 jump *label34 always
   197 label *label35
   198 set *tmp60 "[salmon]SHUTDOWN[]"
   199 jump *label33 always
   200 label *label34
-    * jump *label37 equal *tmp61 1
+  201 jump *label37 equal .MODE 1
   202 jump *label36 always
   203 label *label37
   204 set *tmp60 "[gold]STARTUP[]"
   205 jump *label33 always
   206 label *label36
-    * jump *label39 equal *tmp61 2
+  207 jump *label39 equal .MODE 2
   208 jump *label38 always
   209 label *label39
   210 set *tmp60 "[green]RUNNING[]"
 
   291 print :net_power
   292 print "["
   293 print "]"
-    * set *tmp77 .MODE
-    * jump *label50 equal *tmp77 0
+  294 jump *label50 equal .MODE 0
   295 jump *label49 always
   296 label *label50
   297 set .REACTORS_ON 0
 
   322 set *tmp76 *tmp82
   323 jump *label48 always
   324 label *label49
-    * jump *label54 equal *tmp77 1
+  325 jump *label54 equal .MODE 1
   326 jump *label53 always
   327 label *label54
   328 jump *label55 equal .OUTPUT_1 false
 
   487 set *tmp76 *tmp90
   488 jump *label48 always
   489 label *label53
-    * jump *label90 equal *tmp77 2
+  490 jump *label90 equal .MODE 2
   491 jump *label89 always
   492 label *label90
   493 jump *label91 equal .COOLANT_FLAG false
 
   728 getlink *tmp189 :n
   729 set :block *tmp189
   730 sensor *tmp191 :block @type
-    * set *tmp192 *tmp191
-    * jump *label145 equal *tmp192 @impact-reactor
+  731 jump *label145 equal *tmp191 @impact-reactor
   732 jump *label144 always
   733 label *label145
   734 op add :reactors :reactors 1
 
   747 set *tmp190 *tmp196
   748 jump *label143 always
   749 label *label144
-    * jump *label149 equal *tmp192 @overdrive-projector
-    * jump *label149 equal *tmp192 @overdrive-dome
+  750 jump *label149 equal *tmp191 @overdrive-projector
+  751 jump *label149 equal *tmp191 @overdrive-dome
   752 jump *label148 always
   753 label *label149
   754 set *tmp198 :block
 
   756 set *tmp190 .OVERDRIVE
   757 jump *label143 always
   758 label *label148
-    * jump *label151 equal *tmp192 @conduit
-    * jump *label151 equal *tmp192 @pulse-conduit
-    * jump *label151 equal *tmp192 @plated-conduit
-    * jump *label151 equal *tmp192 @conveyor
-    * jump *label151 equal *tmp192 @titanium-conveyor
-    * jump *label151 equal *tmp192 @plastanium-conveyor
-    * jump *label151 equal *tmp192 @armored-conveyor
+  759 jump *label151 equal *tmp191 @conduit
+  760 jump *label151 equal *tmp191 @pulse-conduit
+  761 jump *label151 equal *tmp191 @plated-conduit
+  762 jump *label151 equal *tmp191 @conveyor
+  763 jump *label151 equal *tmp191 @titanium-conveyor
+  764 jump *label151 equal *tmp191 @plastanium-conveyor
+  765 jump *label151 equal *tmp191 @armored-conveyor
   766 jump *label150 always
   767 label *label151
   768 set *tmp200 :block

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-57 instructions):
 
    24 label *label8
    25 set .START :n
    26 op add :reactors :reactors 1
-    * set *tmp4 :reactors
    27 jump *label6 always
    28 label *label7
    29 jump *label10 equal *tmp5 @overdrive-projector
 
    31 jump *label9 always
    32 label *label10
    33 set .START :n
-    * set *tmp4 .START
    34 jump *label6 always
    35 label *label9
-    * set *tmp4 null
    36 label *label6
    37 label *label4
    38 jump *label3 always
 
    42 op equal *tmp8 :reactors 0
    43 jump *label11 equal *tmp8 false
    44 print "No reactor."
-    * set *tmp9 "No reactor."
    45 jump *label12 always
    46 label *label11
-    * set *tmp9 null
    47 label *label12
    48 printflush message1
    49 label *label1
 
    75 op equal *tmp21 .MODE 0
    76 jump *label13 equal *tmp21 false
    77 set .REASON "Processor reset"
-    * set *tmp22 .REASON
    78 jump *label14 always
    79 label *label13
    80 set .REASON "Reason unknown -- out of power?"
-    * set *tmp22 .REASON
    81 label *label14
    82 op notEqual *tmp24 .MODE 0
    83 control enabled switch1 *tmp24
 
   180 label *label28
   181 set *tmp47 *tmp54
   182 label *label21
-    * set *tmp44 *tmp47
   183 jump *label19 always
   184 label *label18
-    * set *tmp44 null
   185 label *label19
   186 jump *label35 equal .MODE 0
   187 jump *label34 always
 
   222 print " ([gold]"
   223 print :multiplier
   224 print "x[])"
-    * set *tmp62 "x[])"
   225 jump *label41 always
   226 label *label40
-    * set *tmp62 null
   227 label *label41
   228 print "\n=================================="
   229 sensor *tmp68 tank1 @totalLiquids
   230 op lessThan *tmp69 *tmp68 750
   231 jump *label42 equal *tmp69 false
   232 print "\n[salmon]Cryofluid level critical![]"
-    * set *tmp70 "\n[salmon]Cryofluid level critical![]"
   233 jump *label43 always
   234 label *label42
-    * set *tmp70 null
   235 label *label43
   236 sensor *tmp71 vault1 @blast-compound
   237 op lessThan *tmp72 *tmp71 700
   238 jump *label44 equal *tmp72 false
   239 print "\n[salmon]Blast compound level critical![]"
-    * set *tmp73 "\n[salmon]Blast compound level critical![]"
   240 jump *label45 always
   241 label *label44
-    * set *tmp73 null
   242 label *label45
   243 op equal *tmp74 :enough_battery false
   244 jump *label46 equal *tmp74 false
 
   248 print :missing_battery
   249 print " "
   250 print "K[] of additional storage to internal battery."
-    * set *tmp75 null
   251 jump *label47 always
   252 label *label46
-    * set *tmp75 null
   253 label *label47
   254 print "\n"
   255 print "Internal battery:    [gold]"
 
   302 label *label51
   303 set *tmp82 null
   304 label *label52
-    * set *tmp76 *tmp82
   305 jump *label48 always
   306 label *label49
   307 jump *label54 equal .MODE 1
 
   358 print :neededPower
   359 print "["
   360 print "]"
-    * set *tmp97 null
   361 jump *label64 always
   362 label *label63
-    * set *tmp97 null
   363 label *label64
   364 op greaterThan *tmp98 :net_power 100
   365 jump *label65 equal *tmp98 false
   366 set .OVERDRIVE true
-    * set *tmp99 .OVERDRIVE
   367 jump *label66 always
   368 label *label65
-    * set *tmp99 null
   369 label *label66
   370 op lessThan *tmp100 .REACTORS_ON :reactors
   371 jump *label67 equal *tmp100 false
 
   389 set .OUTPUT_3 .OUTPUT_2
   390 set .OUTPUT_2 .OUTPUT_1
   391 set .OUTPUT_1 1
-    * set *tmp105 .OUTPUT_1
   392 jump *label73 always
   393 label *label72
-    * set *tmp105 null
   394 label *label73
   395 op equal *tmp106 .OUTPUT_1 0
   396 jump *label74 equal *tmp106 false
 
   407 label *label76
   408 set *tmp111 null
   409 label *label77
-    * set *tmp107 *tmp111
   410 jump *label75 always
   411 label *label74
-    * set *tmp107 null
   412 label *label75
   413 jump *label78 equal :canStart false
   414 label *label81
 
   429 set .REACTORS_ON *tmp118
   430 op add *tmp119 @time 2000
   431 set :nextStart *tmp119
-    * set *tmp114 :nextStart
   432 jump *label79 always
   433 label *label78
-    * set *tmp114 null
   434 label *label79
   435 op greaterThanEq *tmp120 .REACTORS_ON :reactors
   436 jump *label84 equal *tmp120 false
 
   456 label *label85
   457 set *tmp90 *tmp123
   458 label *label60
-    * set *tmp76 *tmp90
   459 jump *label48 always
   460 label *label53
   461 jump *label90 equal .MODE 2
 
   471 set .MODE 0
   472 control enabled switch1 false
   473 set .REASON "Cryo level too low"
-    * set *tmp127 .REASON
   474 jump *label92 always
   475 label *label91
-    * set *tmp127 null
   476 label *label92
   477 jump *label95 equal .FUEL_FLAG false
   478 label *label98
 
   484 set .MODE 0
   485 control enabled switch1 false
   486 set .REASON "Blast compound level too low"
-    * set *tmp131 .REASON
   487 jump *label96 always
   488 label *label95
-    * set *tmp131 null
   489 label *label96
   490 jump *label101 notEqual .COOLANT_FLAG false
   491 label *label102
 
   545 op idiv *tmp152 :commit_level 1000
   546 print "\nCommit threshold:   [gold]"
   547 print *tmp152
-    * set *tmp144 *tmp152
   548 jump *label112 always
   549 label *label111
-    * set *tmp144 null
   550 label *label112
   551 op equal *tmp153 :commit_level 0
   552 jump *label116 equal *tmp153 false
   553 op idiv *tmp155 :min_level 1000
   554 print "\nRestart threshold: [gold]"
   555 print *tmp155
-    * set *tmp154 *tmp155
   556 jump *label117 always
   557 label *label116
-    * set *tmp154 null
   558 label *label117
   559 print "[] K"
   560 op lessThan *tmp156 :total_battery :min_level
 
   583 label *label124
   584 op add *tmp165 @time 6000
   585 set :nextDecommit *tmp165
-    * set *tmp164 :nextDecommit
   586 jump *label123 always
   587 label *label122
-    * set *tmp164 null
   588 label *label123
   589 op greaterThan *tmp166 @time :nextDecommit
   590 jump *label126 equal *tmp166 false
   591 jump *label128 equal .OVERDRIVE false
   592 set .OVERDRIVE false
-    * set *tmp168 .OVERDRIVE
   593 jump *label129 always
   594 label *label128
   595 op sub *tmp169 .REACTORS_ON 1
   596 op max *tmp170 *tmp169 1
   597 set .REACTORS_ON *tmp170
   598 set .CAN_COMMIT true
-    * set *tmp168 .CAN_COMMIT
   599 label *label129
   600 op add *tmp171 @time 6000
   601 set :nextDecommit *tmp171
 
   616 label *label127
   617 set *tmp159 *tmp167
   618 label *label119
-    * set *tmp140 *tmp159
   619 jump *label108 always
   620 label *label107
   621 sensor *tmp174 switch2 @enabled
   622 jump *label132 equal *tmp174 false
   623 print "\n[salmon]Load adapting not possible.[]"
-    * set *tmp175 "\n[salmon]Load adapting not possible.[]"
   624 jump *label133 always
   625 label *label132
   626 print "\n[gold]Load adapting not active.[]"
-    * set *tmp175 "\n[gold]Load adapting not active.[]"
   627 label *label133
   628 set .REACTORS_ON :reactors
   629 set .OVERDRIVE true
-    * set *tmp140 .OVERDRIVE
   630 label *label108
   631 op mul *tmp176 PLANT_PROTECTION 47500
   632 op lessThan *tmp177 :total_battery *tmp176
   633 jump *label134 equal *tmp177 false
   634 set .OUTPUT_2 0
   635 set .OUTPUT_3 0
-    * set *tmp178 .OUTPUT_3
   636 jump *label135 always
   637 label *label134
-    * set *tmp178 null
   638 label *label135
   639 op equal *tmp179 .OUTPUT_2 0
   640 jump *label136 equal *tmp179 false
 
   653 label *label136
   654 set *tmp180 null
   655 label *label137
-    * set *tmp76 *tmp180
   656 jump *label48 always
   657 label *label89
-    * set *tmp76 null
   658 label *label48
   659 print "\n"
   660 print .STARTUPS
 
   695 label *label146
   696 set *tmp196 null
   697 label *label147
-    * set *tmp190 *tmp196
   698 jump *label143 always
   699 label *label144
   700 jump *label149 equal *tmp191 @overdrive-projector
 
   703 label *label149
   704 set *tmp198 :block
   705 control enabled *tmp198 .OVERDRIVE
-    * set *tmp190 .OVERDRIVE
   706 jump *label143 always
   707 label *label148
   708 jump *label151 equal *tmp191 @conduit
 
   716 label *label151
   717 set *tmp200 :block
   718 control enabled *tmp200 :startup
-    * set *tmp190 :startup
   719 jump *label143 always
   720 label *label150
-    * set *tmp190 null
   721 label *label143
   722 label *label141
   723 op add :n :n 1
 
   732 op add :reactors :reactors *tmp207
   733 read *tmp208 cell2 4
   734 op add :boosts :boosts *tmp208
-    * set *tmp203 :boosts
   735 jump *label153 always
   736 label *label152
-    * set *tmp203 null
   737 label *label153
   738 op min *tmp209 .REACTORS_ON :reactors
   739 set .REACTORS_ON *tmp209
 
   742 set .STARTUPS 0
   743 set .RESETS 0
   744 set .COMMITS 0
-    * set *tmp211 .COMMITS
   745 jump *label155 always
   746 label *label154
   747 write .MODE cell1 0
 
   755 write .STARTUPS cell1 8
   756 write .RESETS cell1 9
   757 write .COMMITS cell1 10
-    * set *tmp211 .COMMITS
   758 label *label155
   759 label *label16
   760 jump *label15 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-14 instructions):
 
   125 jump *label20 equal *tmp46 false
   126 set .MODE 0
   127 set .REASON "Manual power off"
-    * set *tmp47 .REASON
   128 jump *label21 always
   129 label *label20
   130 op mul *tmp48 .REACTORS_ON 1200
 
   177 set :failure_cnt 0
   178 set *tmp54 :failure_cnt
   179 label *label28
-    * set *tmp47 *tmp54
   180 label *label21
   181 jump *label19 always
   182 label *label18
 
   295 set :failure_cnt 0
   296 set .GENERATOR true
   297 set .REASON "Unknown -- out of power?"
-    * set *tmp82 .REASON
   298 jump *label52 always
   299 label *label51
-    * set *tmp82 null
   300 label *label52
   301 jump *label48 always
   302 label *label49
 
   336 print " K[]"
   337 set *tmp92 " K[]"
   338 label *label62
-    * set *tmp90 *tmp92
   339 jump *label60 always
   340 label *label59
   341 op add *tmp94 .OUTPUT_1 .OUTPUT_2
 
   397 jump *label76 equal *tmp110 false
   398 op add *tmp112 @time 2000
   399 set :nextStart *tmp112
-    * set *tmp111 :nextStart
   400 jump *label77 always
   401 label *label76
-    * set *tmp111 null
   402 label *label77
   403 jump *label75 always
   404 label *label74
 
   447 label *label84
   448 set *tmp123 null
   449 label *label85
-    * set *tmp90 *tmp123
   450 label *label60
   451 jump *label48 always
   452 label *label53
 
   563 set .REACTORS_ON :reactors
   564 op add *tmp161 @time 6000
   565 set :nextDecommit *tmp161
-    * set *tmp159 :nextDecommit
   566 jump *label119 always
   567 label *label118
   568 op lessThan *tmp162 :battery_level 47500
 
   605 label *label131
   606 set *tmp167 *tmp173
   607 label *label127
-    * set *tmp159 *tmp167
   608 label *label119
   609 jump *label108 always
   610 label *label107
 
   638 print "\n*** [gold]Surge tower 2 offline[] ***"
   639 set *tmp182 "\n*** [gold]Surge tower 2 offline[] ***"
   640 label *label139
-    * set *tmp180 *tmp182
   641 jump *label137 always
   642 label *label136
-    * set *tmp180 null
   643 label *label137
   644 jump *label48 always
   645 label *label89
 
   678 jump *label146 equal :enabled false
   679 sensor *tmp197 :block @timescale
   680 op add :boosts :boosts *tmp197
-    * set *tmp196 :boosts
   681 jump *label147 always
   682 label *label146
-    * set *tmp196 null
   683 label *label147
   684 jump *label143 always
   685 label *label144

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-10 instructions):
 
   171 label *label31
   172 set *tmp58 null
   173 label *label32
-    * set *tmp54 *tmp58
   174 jump *label28 always
   175 label *label27
   176 set :failure_cnt 0
-    * set *tmp54 :failure_cnt
   177 label *label28
   178 label *label21
   179 jump *label19 always
 
   326 set .REACTORS_ON 1
   327 op add *tmp93 @time 2000
   328 set :nextStart *tmp93
-    * set *tmp92 :nextStart
   329 jump *label62 always
   330 label *label61
   331 print "\nRequired startup energy: [gold]"
   332 print 25
   333 print " K[]"
-    * set *tmp92 " K[]"
   334 label *label62
   335 jump *label60 always
   336 label *label59
 
   438 set .COOLANT_FLAG 0
   439 set .FUEL_FLAG 0
   440 set .GENERATOR false
-    * set *tmp123 .GENERATOR
   441 jump *label85 always
   442 label *label84
-    * set *tmp123 null
   443 label *label85
   444 label *label60
   445 jump *label48 always
 
   584 label *label129
   585 op add *tmp171 @time 6000
   586 set :nextDecommit *tmp171
-    * set *tmp167 :nextDecommit
   587 jump *label127 always
   588 label *label126
   589 op lessThan *tmp172 :total_battery :commit_level
 
   596 label *label130
   597 set *tmp173 null
   598 label *label131
-    * set *tmp167 *tmp173
   599 label *label127
   600 label *label119
   601 jump *label108 always
 
   624 jump *label138 equal *tmp181 false
   625 set .OUTPUT_2 1
   626 set .OUTPUT_3 1
-    * set *tmp182 .OUTPUT_3
   627 jump *label139 always
   628 label *label138
   629 print "\n*** [gold]Surge tower 2 offline[] ***"
-    * set *tmp182 "\n*** [gold]Surge tower 2 offline[] ***"
   630 label *label139
   631 jump *label137 always
   632 label *label136

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   166 print "\nMin. consumption: "
   167 print :min_consumption
   168 printflush message2
-    * set *tmp58 null
   169 jump *label32 always
   170 label *label31
-    * set *tmp58 null
   171 label *label32
   172 jump *label28 always
   173 label *label27
 
   589 op add .REACTORS_ON .REACTORS_ON 1
   590 op add .COMMITS .COMMITS 1
   591 set .CAN_COMMIT false
-    * set *tmp173 .CAN_COMMIT
   592 jump *label131 always
   593 label *label130
-    * set *tmp173 null
   594 label *label131
   595 label *label127
   596 label *label119

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-56 instructions):
 
     7 op equal *tmp0 :reactors 0
     8 jump *label2 equal *tmp0 false
     9 set :reactors 0
-    * set *tmp1 @links
-    * set :n *tmp1
+   10 set :n @links
    11 label *label3
    12 op greaterThan *tmp2 :n 0
    13 jump *label5 equal *tmp2 false
    14 op sub :n :n 1
-    * getlink *tmp3 :n
-    * set :block *tmp3
+   15 getlink :block :n
    16 print "Found: "
    17 print :block
    18 print "\n"
 
    47 label *label1
    48 jump *label0 always
    49 label *label2
-    * read *tmp10 cell1 0
-    * set .MODE *tmp10
-    * read *tmp11 cell1 1
-    * set .OUTPUT_1 *tmp11
-    * read *tmp12 cell1 2
-    * set .OUTPUT_2 *tmp12
-    * read *tmp13 cell1 3
-    * set .OUTPUT_3 *tmp13
-    * read *tmp14 cell1 4
-    * set .REACTORS_ON *tmp14
-    * read *tmp15 cell1 5
-    * set .OVERDRIVE *tmp15
-    * read *tmp16 cell1 6
-    * set .GENERATOR *tmp16
-    * read *tmp17 cell1 7
-    * set .CAN_COMMIT *tmp17
-    * read *tmp18 cell1 8
-    * set .STARTUPS *tmp18
-    * read *tmp19 cell1 9
-    * set .RESETS *tmp19
-    * read *tmp20 cell1 10
-    * set .COMMITS *tmp20
+   50 read .MODE cell1 0
+   51 read .OUTPUT_1 cell1 1
+   52 read .OUTPUT_2 cell1 2
+   53 read .OUTPUT_3 cell1 3
+   54 read .REACTORS_ON cell1 4
+   55 read .OVERDRIVE cell1 5
+   56 read .GENERATOR cell1 6
+   57 read .CAN_COMMIT cell1 7
+   58 read .STARTUPS cell1 8
+   59 read .RESETS cell1 9
+   60 read .COMMITS cell1 10
    61 set :reactors .REACTORS_ON
    62 op equal *tmp21 .MODE 0
    63 jump *label13 equal *tmp21 false
 
    71 set :failure_cnt 0
    72 set :boosts 0
    73 set :nextStart 0
-    * op add *tmp25 @time 6000
-    * set :nextDecommit *tmp25
+   74 op add :nextDecommit @time 6000
    75 label *label15
    76 jump *label17 equal true false
    77 sensor *tmp26 battery1 @totalPower
-    * op floor *tmp27 *tmp26
-    * set :battery_level *tmp27
-    * op idiv *tmp28 :battery_level 1000
-    * set :battery_level_str *tmp28
+   78 op floor :battery_level *tmp26
+   79 op idiv :battery_level_str :battery_level 1000
    80 sensor *tmp29 battery1 @powerNetStored
-    * op floor *tmp30 *tmp29
-    * set :total_battery *tmp30
-    * op idiv *tmp31 :total_battery 1000
-    * set :total_battery_str *tmp31
-    * sensor *tmp32 battery1 @powerNetOut
-    * set :consumption *tmp32
-    * read *tmp33 bank1 509
-    * set :production *tmp33
-    * read *tmp34 bank1 510
-    * set :net_power *tmp34
-    * read *tmp35 bank1 511
-    * set :battery_change *tmp35
-    * sensor *tmp36 battery1 @powerNetCapacity
-    * set :total_capacity *tmp36
-    * op idiv *tmp37 :total_capacity 1000
-    * set :total_capacity_str *tmp37
-    * op mul *tmp38 100000 :reactors
-    * set :required_capacity *tmp38
-    * op greaterThanEq *tmp39 :total_capacity :required_capacity
-    * set :enough_battery *tmp39
+   81 op floor :total_battery *tmp29
+   82 op idiv :total_battery_str :total_battery 1000
+   83 sensor :consumption battery1 @powerNetOut
+   84 read :production bank1 509
+   85 read :net_power bank1 510
+   86 read :battery_change bank1 511
+   87 sensor :total_capacity battery1 @powerNetCapacity
+   88 op idiv :total_capacity_str :total_capacity 1000
+   89 op mul :required_capacity 100000 :reactors
+   90 op greaterThanEq :enough_battery :total_capacity :required_capacity
    91 op sub *tmp40 :required_capacity :total_capacity
    92 op div *tmp41 *tmp40 1000
-    * op ceil *tmp42 *tmp41
-    * set :missing_battery *tmp42
+   93 op ceil :missing_battery *tmp41
    94 op notEqual *tmp43 .MODE 0
    95 jump *label18 equal *tmp43 false
    96 sensor *tmp45 switch1 @enabled
 
   100 set .REASON "Manual power off"
   101 jump *label21 always
   102 label *label20
-    * op mul *tmp48 .REACTORS_ON 1200
-    * set :min_consumption *tmp48
-    * op lessThan *tmp49 :consumption :min_consumption
-    * set :failure1 *tmp49
+  103 op mul :min_consumption .REACTORS_ON 1200
+  104 op lessThan :failure1 :consumption :min_consumption
   105 op equal *tmp50 :battery_level 0
   106 jump *label22 equal *tmp50 false
   107 label *label26
 
   182 op div *tmp64 *tmp63 .REACTORS_ON
   183 op add *tmp65 *tmp64 0.5
   184 op floor *tmp66 *tmp65
-    * op div *tmp67 *tmp66 100
-    * set :multiplier *tmp67
+  185 op div :multiplier *tmp66 100
   186 print " ([gold]"
   187 print :multiplier
   188 print "x[])"
 
   248 set .OUTPUT_3 0
   249 op greaterThanEq *tmp78 :net_power -150
   250 op lessThan *tmp79 :total_battery 47500
-    * op land *tmp80 *tmp78 *tmp79
-    * set .GENERATOR *tmp80
+  251 op land .GENERATOR *tmp78 *tmp79
   252 print "\nShutdown reason: [gold]"
   253 print .REASON
   254 print "[]"
 
   284 sensor *tmp85 :nextBattery @powerNetOut
   285 op mul *tmp86 *tmp85 1.05
   286 op floor *tmp87 *tmp86
-    * op max *tmp88 *tmp87 1000
-    * set :neededPower *tmp88
+  287 op max :neededPower *tmp87 1000
   288 op equal *tmp89 .REACTORS_ON 0
   289 jump *label59 equal *tmp89 false
   290 op greaterThanEq *tmp91 :total_battery 25000
   291 jump *label61 equal *tmp91 false
   292 set .REACTORS_ON 1
-    * op add *tmp93 @time 2000
-    * set :nextStart *tmp93
+  293 op add :nextStart @time 2000
   294 jump *label62 always
   295 label *label61
   296 print "\nRequired startup energy: [gold]"
 
   300 jump *label60 always
   301 label *label59
   302 op add *tmp94 .OUTPUT_1 .OUTPUT_2
-    * op add *tmp95 *tmp94 .OUTPUT_3
-    * set :outputs *tmp95
+  303 op add :outputs *tmp94 .OUTPUT_3
   304 print "\n"
   305 print "[gold]"
   306 print :outputs
 
   349 label *label73
   350 op equal *tmp106 .OUTPUT_1 0
   351 jump *label74 equal *tmp106 false
-    * op mul *tmp108 6300 :boosts
-    * set :availablePower *tmp108
-    * op div *tmp109 :neededPower :availablePower
-    * set :ratio *tmp109
+  352 op mul :availablePower 6300 :boosts
+  353 op div :ratio :neededPower :availablePower
   354 op lessThan *tmp110 :ratio 1
   355 jump *label76 equal *tmp110 false
-    * op add *tmp112 @time 2000
-    * set :nextStart *tmp112
+  356 op add :nextStart @time 2000
   357 jump *label77 always
   358 label *label76
   359 label *label77
 
   367 jump *label80 always
   368 label *label80
   369 jump *label82 equal FAST_START false
-    * op idiv *tmp116 :total_battery 25000
-    * set *tmp115 *tmp116
+  370 op idiv *tmp115 :total_battery 25000
   371 jump *label83 always
   372 label *label82
   373 set *tmp115 1
   374 label *label83
   375 set :start_at_once *tmp115
   376 op add *tmp117 .REACTORS_ON :start_at_once
-    * op min *tmp118 *tmp117 :reactors
-    * set .REACTORS_ON *tmp118
-    * op add *tmp119 @time 2000
-    * set :nextStart *tmp119
+  377 op min .REACTORS_ON *tmp117 :reactors
+  378 op add :nextStart @time 2000
   379 jump *label79 always
   380 label *label78
   381 label *label79
 
   391 jump *label86 always
   392 label *label86
   393 set .MODE 2
-    * op add *tmp124 @time 6000
-    * set :nextDecommit *tmp124
+  394 op add :nextDecommit @time 6000
   395 set .COOLANT_FLAG 0
   396 set .FUEL_FLAG 0
   397 set .GENERATOR false
 
   462 jump *label107 equal *tmp139 false
   463 jump *label109 always
   464 label *label109
-    * op mul *tmp141 0.5 :required_capacity
-    * set :min_level *tmp141
+  465 op mul :min_level 0.5 :required_capacity
   466 set :commit_level 0
   467 jump *label111 equal .CAN_COMMIT false
   468 label *label115
 
   475 jump *label113 always
   476 label *label113
   477 op sub *tmp145 :battery_change 1500
-    * op sub *tmp146 *tmp145 1000
-    * set :p *tmp146
+  478 op sub :p *tmp145 1000
   479 op mul *tmp147 :p 0.00472972972972973
   480 op add *tmp148 -5 *tmp147
   481 op mul *tmp149 :p *tmp148
-    * op add *tmp150 25000 *tmp149
-    * set :commit_margin *tmp150
-    * op add *tmp151 :min_level :commit_margin
-    * set :commit_level *tmp151
+  482 op add :commit_margin 25000 *tmp149
+  483 op add :commit_level :min_level :commit_margin
   484 op idiv *tmp152 :commit_level 1000
   485 print "\nCommit threshold:   [gold]"
   486 print *tmp152
 
   508 op add .RESETS .RESETS *tmp160
   509 set .OVERDRIVE true
   510 set .REACTORS_ON :reactors
-    * op add *tmp161 @time 6000
-    * set :nextDecommit *tmp161
+  511 op add :nextDecommit @time 6000
   512 jump *label119 always
   513 label *label118
   514 op lessThan *tmp162 :battery_level 47500
 
   518 jump *label124 notEqual *tmp163 false
   519 jump *label122 always
   520 label *label124
-    * op add *tmp165 @time 6000
-    * set :nextDecommit *tmp165
+  521 op add :nextDecommit @time 6000
   522 jump *label123 always
   523 label *label122
   524 label *label123
 
   529 jump *label129 always
   530 label *label128
   531 op sub *tmp169 .REACTORS_ON 1
-    * op max *tmp170 *tmp169 1
-    * set .REACTORS_ON *tmp170
+  532 op max .REACTORS_ON *tmp169 1
   533 set .CAN_COMMIT true
   534 label *label129
-    * op add *tmp171 @time 6000
-    * set :nextDecommit *tmp171
+  535 op add :nextDecommit @time 6000
   536 jump *label127 always
   537 label *label126
   538 op lessThan *tmp172 :total_battery :commit_level
 
   593 control enabled diode3 .OUTPUT_3
   594 control enabled generator1 .GENERATOR
   595 control enabled generator2 .GENERATOR
-    * op equal *tmp188 .MODE 1
-    * set :startup *tmp188
+  596 op equal :startup .MODE 1
   597 set :reactors 0
   598 set :boosts 0
   599 set :enabled true
   600 set :n .START
   601 label *label140
   602 jump *label142 greaterThanEq :n @links
-    * getlink *tmp189 :n
-    * set :block *tmp189
+  603 getlink :block :n
   604 sensor *tmp191 :block @type
   605 jump *label145 equal *tmp191 @impact-reactor
   606 jump *label144 always
   607 label *label145
   608 op add :reactors :reactors 1
-    * op lessThanEq *tmp193 :reactors .REACTORS_ON
-    * set :enabled *tmp193
-    * set *tmp194 :block
-    * control enabled *tmp194 :enabled
+  609 op lessThanEq :enabled :reactors .REACTORS_ON
+  610 control enabled :block :enabled
   611 jump *label146 equal :enabled false
   612 sensor *tmp197 :block @timescale
   613 op add :boosts :boosts *tmp197
 
   620 jump *label149 equal *tmp191 @overdrive-dome
   621 jump *label148 always
   622 label *label149
-    * set *tmp198 :block
-    * control enabled *tmp198 .OVERDRIVE
+  623 control enabled :block .OVERDRIVE
   624 jump *label143 always
   625 label *label148
   626 jump *label151 equal *tmp191 @conduit
 
   632 jump *label151 equal *tmp191 @armored-conveyor
   633 jump *label150 always
   634 label *label151
-    * set *tmp200 :block
-    * control enabled *tmp200 :startup
+  635 control enabled :block :startup
   636 jump *label143 always
   637 label *label150
   638 label *label143
 
   652 jump *label153 always
   653 label *label152
   654 label *label153
-    * op min *tmp209 .REACTORS_ON :reactors
-    * set .REACTORS_ON *tmp209
+  655 op min .REACTORS_ON .REACTORS_ON :reactors
   656 op equal *tmp210 cell1 null
   657 jump *label154 equal *tmp210 false
   658 set .STARTUPS 0

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    73 set :nextStart 0
    74 op add :nextDecommit @time 6000
    75 label *label15
-    * jump *label17 equal true false
    76 sensor *tmp26 battery1 @totalPower
    77 op floor :battery_level *tmp26
    78 op idiv :battery_level_str :battery_level 1000

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-16 instructions):
 
    17 print :block
    18 print "\n"
    19 sensor *tmp5 :block @type
-    * jump *label8 equal *tmp5 @impact-reactor
-    * jump *label7 always
+   20 jump *label7 notEqual *tmp5 @impact-reactor
    21 label *label8
    22 set .START :n
    23 op add :reactors :reactors 1
    24 jump *label6 always
    25 label *label7
    26 jump *label10 equal *tmp5 @overdrive-projector
-    * jump *label10 equal *tmp5 @overdrive-dome
-    * jump *label9 always
+   27 jump *label9 notEqual *tmp5 @overdrive-dome
    28 label *label10
    29 set .START :n
    30 jump *label6 always
 
   118 set :failure2 *tmp53
   119 jump *label29 notEqual :failure1 false
   120 label *label30
-    * jump *label29 notEqual :failure2 false
-    * jump *label27 always
+  121 jump *label27 equal :failure2 false
   122 label *label29
   123 op add :failure_cnt :failure_cnt 1
   124 read *tmp55 cell2 1
 
   144 jump *label19 always
   145 label *label18
   146 label *label19
-    * jump *label35 equal .MODE 0
-    * jump *label34 always
+  147 jump *label34 notEqual .MODE 0
   148 label *label35
   149 set *tmp60 "[salmon]SHUTDOWN[]"
   150 jump *label33 always
   151 label *label34
-    * jump *label37 equal .MODE 1
-    * jump *label36 always
+  152 jump *label36 notEqual .MODE 1
   153 label *label37
   154 set *tmp60 "[gold]STARTUP[]"
   155 jump *label33 always
   156 label *label36
-    * jump *label39 equal .MODE 2
-    * jump *label38 always
+  157 jump *label38 notEqual .MODE 2
   158 label *label39
   159 set *tmp60 "[green]RUNNING[]"
   160 jump *label33 always
 
   231 print :net_power
   232 print "["
   233 print "]"
-    * jump *label50 equal .MODE 0
-    * jump *label49 always
+  234 jump *label49 notEqual .MODE 0
   235 label *label50
   236 set .REACTORS_ON 0
   237 set .OVERDRIVE 0
 
   257 label *label52
   258 jump *label48 always
   259 label *label49
-    * jump *label54 equal .MODE 1
-    * jump *label53 always
+  260 jump *label53 notEqual .MODE 1
   261 label *label54
   262 jump *label55 equal .OUTPUT_1 false
   263 jump *label57 equal .OUTPUT_2 false
 
   392 label *label60
   393 jump *label48 always
   394 label *label53
-    * jump *label90 equal .MODE 2
-    * jump *label89 always
+  395 jump *label89 notEqual .MODE 2
   396 label *label90
   397 jump *label91 equal .COOLANT_FLAG false
   398 label *label94
 
   424 label *label102
   425 sensor *tmp133 tank1 @totalLiquids
   426 op greaterThan *tmp134 *tmp133 1000
-    * jump *label101 notEqual *tmp134 false
-    * jump *label99 always
+  427 jump *label99 equal *tmp134 false
   428 label *label101
   429 set *tmp135 true
   430 jump *label100 always
 
   436 label *label106
   437 sensor *tmp136 vault1 @blast-compound
   438 op greaterThan *tmp137 *tmp136 800
-    * jump *label105 notEqual *tmp137 false
-    * jump *label103 always
+  439 jump *label103 equal *tmp137 false
   440 label *label105
   441 set *tmp138 true
   442 jump *label104 always
 
   489 label *label121
   490 op mul *tmp157 .REACTORS_ON -2500
   491 op lessThan *tmp158 :battery_change *tmp157
-    * jump *label120 notEqual *tmp158 false
-    * jump *label118 always
+  492 jump *label118 equal *tmp158 false
   493 label *label120
   494 op equal *tmp160 .OVERDRIVE false
   495 op add .RESETS .RESETS *tmp160
 
   502 jump *label124 notEqual *tmp162 false
   503 label *label125
   504 op lessThan *tmp163 :battery_change -100
-    * jump *label124 notEqual *tmp163 false
-    * jump *label122 always
+  505 jump *label122 equal *tmp163 false
   506 label *label124
   507 op add :nextDecommit @time 6000
   508 jump *label123 always
 
   588 jump *label142 greaterThanEq :n @links
   589 getlink :block :n
   590 sensor *tmp191 :block @type
-    * jump *label145 equal *tmp191 @impact-reactor
-    * jump *label144 always
+  591 jump *label144 notEqual *tmp191 @impact-reactor
   592 label *label145
   593 op add :reactors :reactors 1
   594 op lessThanEq :enabled :reactors .REACTORS_ON
 
   602 jump *label143 always
   603 label *label144
   604 jump *label149 equal *tmp191 @overdrive-projector
-    * jump *label149 equal *tmp191 @overdrive-dome
-    * jump *label148 always
+  605 jump *label148 notEqual *tmp191 @overdrive-dome
   606 label *label149
   607 control enabled :block .OVERDRIVE
   608 jump *label143 always
 
   613 jump *label151 equal *tmp191 @conveyor
   614 jump *label151 equal *tmp191 @titanium-conveyor
   615 jump *label151 equal *tmp191 @plastanium-conveyor
-    * jump *label151 equal *tmp191 @armored-conveyor
-    * jump *label150 always
+  616 jump *label150 notEqual *tmp191 @armored-conveyor
   617 label *label151
   618 control enabled :block :startup
   619 jump *label143 always

Modifications by Iterated phase, Condition Optimization, pass 1, iteration 1 (-46 instructions):
 
     4 set .COOLANT_FLAG .FUEL_FLAG
     5 set :reactors 0
     6 label *label0
-    * op equal *tmp0 :reactors 0
-    * jump *label2 equal *tmp0 false
+    7 jump *label2 notEqual :reactors 0
     8 set :reactors 0
     9 set :n @links
    10 label *label3
-    * op greaterThan *tmp2 :n 0
-    * jump *label5 equal *tmp2 false
+   11 jump *label5 lessThanEq :n 0
    12 op sub :n :n 1
    13 getlink :block :n
    14 print "Found: "
 
    33 label *label5
    34 read *tmp7 cell2 1
    35 op add :reactors :reactors *tmp7
-    * op equal *tmp8 :reactors 0
-    * jump *label11 equal *tmp8 false
+   36 jump *label11 notEqual :reactors 0
    37 print "No reactor."
    38 jump *label12 always
    39 label *label11
 
    54 read .RESETS cell1 9
    55 read .COMMITS cell1 10
    56 set :reactors .REACTORS_ON
-    * op equal *tmp21 .MODE 0
-    * jump *label13 equal *tmp21 false
+   57 jump *label13 notEqual .MODE 0
    58 set .REASON "Processor reset"
    59 jump *label14 always
    60 label *label13
 
    84 op sub *tmp40 :required_capacity :total_capacity
    85 op div *tmp41 *tmp40 1000
    86 op ceil :missing_battery *tmp41
-    * op notEqual *tmp43 .MODE 0
-    * jump *label18 equal *tmp43 false
+   87 jump *label18 equal .MODE 0
    88 sensor *tmp45 switch1 @enabled
-    * op equal *tmp46 *tmp45 false
-    * jump *label20 equal *tmp46 false
+   89 jump *label20 notEqual *tmp45 false
    90 set .MODE 0
    91 set .REASON "Manual power off"
    92 jump *label21 always
    93 label *label20
    94 op mul :min_consumption .REACTORS_ON 1200
-    * op lessThan :failure1 :consumption :min_consumption
-    * op equal *tmp50 :battery_level 0
-    * jump *label22 equal *tmp50 false
+   95 jump *label22 notEqual :battery_level 0
    96 label *label26
-    * op greaterThan *tmp51 :consumption 0
-    * jump *label22 equal *tmp51 false
+   97 jump *label22 lessThanEq :consumption 0
    98 jump *label25 always
    99 label *label25
-    * op equal *tmp52 :production 0
-    * jump *label22 equal *tmp52 false
+  100 jump *label22 notEqual :production 0
   101 jump *label24 always
   102 label *label24
   103 set *tmp53 true
 
   106 set *tmp53 false
   107 label *label23
   108 set :failure2 *tmp53
-    * jump *label29 notEqual :failure1 false
+  109 jump *label29 lessThan :consumption :min_consumption
   110 label *label30
   111 jump *label27 equal :failure2 false
   112 label *label29
   113 op add :failure_cnt :failure_cnt 1
   114 read *tmp55 cell2 1
   115 op add *tmp56 10 *tmp55
-    * op greaterThan *tmp57 :failure_cnt *tmp56
-    * jump *label31 equal *tmp57 false
+  116 jump *label31 lessThanEq :failure_cnt *tmp56
   117 set .MODE 0
   118 control enabled switch1 false
   119 set .REASON "Unknown -- out of power?"
 
   173 label *label41
   174 print "\n=================================="
   175 sensor *tmp68 tank1 @totalLiquids
-    * op lessThan *tmp69 *tmp68 750
-    * jump *label42 equal *tmp69 false
+  176 jump *label42 greaterThanEq *tmp68 750
   177 print "\n[salmon]Cryofluid level critical![]"
   178 jump *label43 always
   179 label *label42
   180 label *label43
   181 sensor *tmp71 vault1 @blast-compound
-    * op lessThan *tmp72 *tmp71 700
-    * jump *label44 equal *tmp72 false
+  182 jump *label44 greaterThanEq *tmp71 700
   183 print "\n[salmon]Blast compound level critical![]"
   184 jump *label45 always
   185 label *label44
   186 label *label45
-    * op equal *tmp74 :enough_battery false
-    * jump *label46 equal *tmp74 false
+  187 jump *label46 notEqual :enough_battery false
   188 print "\n[salmon]Insufficient battery storage![]"
   189 print "\n"
   190 print "Link [gold]"
 
   262 op mul *tmp86 *tmp85 1.05
   263 op floor *tmp87 *tmp86
   264 op max :neededPower *tmp87 1000
-    * op equal *tmp89 .REACTORS_ON 0
-    * jump *label59 equal *tmp89 false
-    * op greaterThanEq *tmp91 :total_battery 25000
-    * jump *label61 equal *tmp91 false
+  265 jump *label59 notEqual .REACTORS_ON 0
+  266 jump *label61 lessThan :total_battery 25000
   267 set .REACTORS_ON 1
   268 op add :nextStart @time 2000
   269 jump *label62 always
 
   281 print :outputs
   282 print "["
   283 print "] surge tower(s) online"
-    * op equal *tmp96 .OUTPUT_3 0
-    * jump *label63 equal *tmp96 false
+  284 jump *label63 notEqual .OUTPUT_3 0
   285 print "\n"
   286 print "Required power level: [gold]"
   287 print :neededPower
 
   290 jump *label64 always
   291 label *label63
   292 label *label64
-    * op greaterThan *tmp98 :net_power 100
-    * jump *label65 equal *tmp98 false
+  293 jump *label65 lessThanEq :net_power 100
   294 set .OVERDRIVE true
   295 jump *label66 always
   296 label *label65
   297 label *label66
-    * op lessThan *tmp100 .REACTORS_ON :reactors
-    * jump *label67 equal *tmp100 false
+  298 jump *label67 greaterThanEq .REACTORS_ON :reactors
   299 label *label71
-    * op greaterThan *tmp101 :net_power 1000
-    * jump *label67 equal *tmp101 false
+  300 jump *label67 lessThanEq :net_power 1000
   301 jump *label70 always
   302 label *label70
-    * op greaterThanEq *tmp102 :total_battery 25000
-    * jump *label67 equal *tmp102 false
+  303 jump *label67 lessThan :total_battery 25000
   304 jump *label69 always
   305 label *label69
   306 set *tmp103 true
 
   309 set *tmp103 false
   310 label *label68
   311 set :canStart *tmp103
-    * op greaterThanEq *tmp104 :net_power :neededPower
-    * jump *label72 equal *tmp104 false
+  312 jump *label72 lessThan :net_power :neededPower
   313 set .OUTPUT_3 .OUTPUT_2
   314 set .OUTPUT_2 .OUTPUT_1
   315 set .OUTPUT_1 1
   316 jump *label73 always
   317 label *label72
   318 label *label73
-    * op equal *tmp106 .OUTPUT_1 0
-    * jump *label74 equal *tmp106 false
+  319 jump *label74 notEqual .OUTPUT_1 0
   320 op mul :availablePower 6300 :boosts
   321 op div :ratio :neededPower :availablePower
-    * op lessThan *tmp110 :ratio 1
-    * jump *label76 equal *tmp110 false
+  322 jump *label76 greaterThanEq :ratio 1
   323 op add :nextStart @time 2000
   324 jump *label77 always
   325 label *label76
 
   329 label *label75
   330 jump *label78 equal :canStart false
   331 label *label81
-    * op greaterThan *tmp113 @time :nextStart
-    * jump *label78 equal *tmp113 false
+  332 jump *label78 lessThanEq @time :nextStart
   333 jump *label80 always
   334 label *label80
   335 jump *label82 equal FAST_START false
 
   345 jump *label79 always
   346 label *label78
   347 label *label79
-    * op greaterThanEq *tmp120 .REACTORS_ON :reactors
-    * jump *label84 equal *tmp120 false
+  348 jump *label84 lessThan .REACTORS_ON :reactors
   349 label *label88
-    * op greaterThan *tmp121 @time :nextStart
-    * jump *label84 equal *tmp121 false
+  350 jump *label84 lessThanEq @time :nextStart
   351 jump *label87 always
   352 label *label87
-    * op greaterThan *tmp122 .OUTPUT_3 0
-    * jump *label84 equal *tmp122 false
+  353 jump *label84 lessThanEq .OUTPUT_3 0
   354 jump *label86 always
   355 label *label86
   356 set .MODE 2
 
   369 jump *label91 equal .COOLANT_FLAG false
   370 label *label94
   371 sensor *tmp125 tank1 @totalLiquids
-    * op lessThan *tmp126 *tmp125 750
-    * jump *label91 equal *tmp126 false
+  372 jump *label91 greaterThanEq *tmp125 750
   373 jump *label93 always
   374 label *label93
   375 set .MODE 0
 
   381 jump *label95 equal .FUEL_FLAG false
   382 label *label98
   383 sensor *tmp129 vault1 @blast-compound
-    * op lessThan *tmp130 *tmp129 700
-    * jump *label95 equal *tmp130 false
+  384 jump *label95 greaterThanEq *tmp129 700
   385 jump *label97 always
   386 label *label97
   387 set .MODE 0
 
   393 jump *label101 notEqual .COOLANT_FLAG false
   394 label *label102
   395 sensor *tmp133 tank1 @totalLiquids
-    * op greaterThan *tmp134 *tmp133 1000
-    * jump *label99 equal *tmp134 false
+  396 jump *label99 lessThanEq *tmp133 1000
   397 label *label101
   398 set *tmp135 true
   399 jump *label100 always
 
   404 jump *label105 notEqual .FUEL_FLAG false
   405 label *label106
   406 sensor *tmp136 vault1 @blast-compound
-    * op greaterThan *tmp137 *tmp136 800
-    * jump *label103 equal *tmp137 false
+  407 jump *label103 lessThanEq *tmp136 800
   408 label *label105
   409 set *tmp138 true
   410 jump *label104 always
 
   422 set :commit_level 0
   423 jump *label111 equal .CAN_COMMIT false
   424 label *label115
-    * op lessThan *tmp142 :battery_change 0
-    * jump *label111 equal *tmp142 false
+  425 jump *label111 greaterThanEq :battery_change 0
   426 jump *label114 always
   427 label *label114
-    * op lessThan *tmp143 .REACTORS_ON :reactors
-    * jump *label111 equal *tmp143 false
+  428 jump *label111 greaterThanEq .REACTORS_ON :reactors
   429 jump *label113 always
   430 label *label113
   431 op sub *tmp145 :battery_change 1500
 
   441 jump *label112 always
   442 label *label111
   443 label *label112
-    * op equal *tmp153 :commit_level 0
-    * jump *label116 equal *tmp153 false
+  444 jump *label116 notEqual :commit_level 0
   445 op idiv *tmp155 :min_level 1000
   446 print "\nRestart threshold: [gold]"
   447 print *tmp155
 
   449 label *label116
   450 label *label117
   451 print "[] K"
-    * op lessThan *tmp156 :total_battery :min_level
-    * jump *label120 notEqual *tmp156 false
+  452 jump *label120 lessThan :total_battery :min_level
   453 label *label121
   454 op mul *tmp157 .REACTORS_ON -2500
-    * op lessThan *tmp158 :battery_change *tmp157
-    * jump *label118 equal *tmp158 false
+  455 jump *label118 greaterThanEq :battery_change *tmp157
   456 label *label120
   457 op equal *tmp160 .OVERDRIVE false
   458 op add .RESETS .RESETS *tmp160
 
   461 op add :nextDecommit @time 6000
   462 jump *label119 always
   463 label *label118
-    * op lessThan *tmp162 :battery_level 47500
-    * jump *label124 notEqual *tmp162 false
+  464 jump *label124 lessThan :battery_level 47500
   465 label *label125
-    * op lessThan *tmp163 :battery_change -100
-    * jump *label122 equal *tmp163 false
+  466 jump *label122 greaterThanEq :battery_change -100
   467 label *label124
   468 op add :nextDecommit @time 6000
   469 jump *label123 always
   470 label *label122
   471 label *label123
-    * op greaterThan *tmp166 @time :nextDecommit
-    * jump *label126 equal *tmp166 false
+  472 jump *label126 lessThanEq @time :nextDecommit
   473 jump *label128 equal .OVERDRIVE false
   474 set .OVERDRIVE false
   475 jump *label129 always
 
   481 op add :nextDecommit @time 6000
   482 jump *label127 always
   483 label *label126
-    * op lessThan *tmp172 :total_battery :commit_level
-    * jump *label130 equal *tmp172 false
+  484 jump *label130 greaterThanEq :total_battery :commit_level
   485 op add .REACTORS_ON .REACTORS_ON 1
   486 op add .COMMITS .COMMITS 1
   487 set .CAN_COMMIT false
 
   503 set .OVERDRIVE true
   504 label *label108
   505 op mul *tmp176 PLANT_PROTECTION 47500
-    * op lessThan *tmp177 :total_battery *tmp176
-    * jump *label134 equal *tmp177 false
+  506 jump *label134 greaterThanEq :total_battery *tmp176
   507 set .OUTPUT_2 0
   508 set .OUTPUT_3 0
   509 jump *label135 always
   510 label *label134
   511 label *label135
-    * op equal *tmp179 .OUTPUT_2 0
-    * jump *label136 equal *tmp179 false
-    * op greaterThan *tmp181 :total_battery 47500
-    * jump *label138 equal *tmp181 false
+  512 jump *label136 notEqual .OUTPUT_2 0
+  513 jump *label138 lessThanEq :total_battery 47500
   514 set .OUTPUT_2 1
   515 set .OUTPUT_3 1
   516 jump *label139 always
 
   579 op add :n :n 1
   580 jump *label140 always
   581 label *label142
-    * op notEqual *tmp202 cell2 null
-    * jump *label152 equal *tmp202 false
+  582 jump *label152 equal cell2 null
   583 write :reactors cell2 0
   584 write .REACTORS_ON cell2 2
   585 write .OVERDRIVE cell2 3
 
   591 label *label152
   592 label *label153
   593 op min .REACTORS_ON .REACTORS_ON :reactors
-    * op equal *tmp210 cell1 null
-    * jump *label154 equal *tmp210 false
+  594 jump *label154 notEqual cell1 null
   595 set .STARTUPS 0
   596 set .RESETS 0
   597 set .COMMITS 0

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-40 instructions):
 
    25 jump *label9 notEqual *tmp5 @overdrive-dome
    26 label *label10
    27 set .START :n
-    * jump *label6 always
    28 label *label9
    29 label *label6
    30 label *label4
 
    34 op add :reactors :reactors *tmp7
    35 jump *label11 notEqual :reactors 0
    36 print "No reactor."
-    * jump *label12 always
    37 label *label11
    38 label *label12
    39 printflush message1
 
    93 jump *label22 notEqual :battery_level 0
    94 label *label26
    95 jump *label22 lessThanEq :consumption 0
-    * jump *label25 always
    96 label *label25
    97 jump *label22 notEqual :production 0
-    * jump *label24 always
    98 label *label24
    99 set *tmp53 true
   100 jump *label23 always
 
   118 print "\nMin. consumption: "
   119 print :min_consumption
   120 printflush message2
-    * jump *label32 always
   121 label *label31
   122 label *label32
   123 jump *label28 always
 
   125 set :failure_cnt 0
   126 label *label28
   127 label *label21
-    * jump *label19 always
   128 label *label18
   129 label *label19
   130 jump *label34 notEqual .MODE 0
 
   162 print " ([gold]"
   163 print :multiplier
   164 print "x[])"
-    * jump *label41 always
   165 label *label40
   166 label *label41
   167 print "\n=================================="
   168 sensor *tmp68 tank1 @totalLiquids
   169 jump *label42 greaterThanEq *tmp68 750
   170 print "\n[salmon]Cryofluid level critical![]"
-    * jump *label43 always
   171 label *label42
   172 label *label43
   173 sensor *tmp71 vault1 @blast-compound
   174 jump *label44 greaterThanEq *tmp71 700
   175 print "\n[salmon]Blast compound level critical![]"
-    * jump *label45 always
   176 label *label44
   177 label *label45
   178 jump *label46 notEqual :enough_battery false
 
   182 print :missing_battery
   183 print " "
   184 print "K[] of additional storage to internal battery."
-    * jump *label47 always
   185 label *label46
   186 label *label47
   187 print "\n"
 
   228 set :failure_cnt 0
   229 set .GENERATOR true
   230 set .REASON "Unknown -- out of power?"
-    * jump *label52 always
   231 label *label51
   232 label *label52
   233 jump *label48 always
 
   276 print :neededPower
   277 print "["
   278 print "]"
-    * jump *label64 always
   279 label *label63
   280 label *label64
   281 jump *label65 lessThanEq :net_power 100
   282 set .OVERDRIVE true
-    * jump *label66 always
   283 label *label65
   284 label *label66
   285 jump *label67 greaterThanEq .REACTORS_ON :reactors
   286 label *label71
   287 jump *label67 lessThanEq :net_power 1000
-    * jump *label70 always
   288 label *label70
   289 jump *label67 lessThan :total_battery 25000
-    * jump *label69 always
   290 label *label69
   291 set *tmp103 true
   292 jump *label68 always
 
   298 set .OUTPUT_3 .OUTPUT_2
   299 set .OUTPUT_2 .OUTPUT_1
   300 set .OUTPUT_1 1
-    * jump *label73 always
   301 label *label72
   302 label *label73
   303 jump *label74 notEqual .OUTPUT_1 0
 
   305 op div :ratio :neededPower :availablePower
   306 jump *label76 greaterThanEq :ratio 1
   307 op add :nextStart @time 2000
-    * jump *label77 always
   308 label *label76
   309 label *label77
-    * jump *label75 always
   310 label *label74
   311 label *label75
   312 jump *label78 equal :canStart false
   313 label *label81
   314 jump *label78 lessThanEq @time :nextStart
-    * jump *label80 always
   315 label *label80
   316 jump *label82 equal FAST_START false
   317 op idiv *tmp115 :total_battery 25000
 
   323 op add *tmp117 .REACTORS_ON :start_at_once
   324 op min .REACTORS_ON *tmp117 :reactors
   325 op add :nextStart @time 2000
-    * jump *label79 always
   326 label *label78
   327 label *label79
   328 jump *label84 lessThan .REACTORS_ON :reactors
   329 label *label88
   330 jump *label84 lessThanEq @time :nextStart
-    * jump *label87 always
   331 label *label87
   332 jump *label84 lessThanEq .OUTPUT_3 0
-    * jump *label86 always
   333 label *label86
   334 set .MODE 2
   335 op add :nextDecommit @time 6000
   336 set .COOLANT_FLAG 0
   337 set .FUEL_FLAG 0
   338 set .GENERATOR false
-    * jump *label85 always
   339 label *label84
   340 label *label85
   341 label *label60
 
   347 label *label94
   348 sensor *tmp125 tank1 @totalLiquids
   349 jump *label91 greaterThanEq *tmp125 750
-    * jump *label93 always
   350 label *label93
   351 set .MODE 0
   352 control enabled switch1 false
   353 set .REASON "Cryo level too low"
-    * jump *label92 always
   354 label *label91
   355 label *label92
   356 jump *label95 equal .FUEL_FLAG false
   357 label *label98
   358 sensor *tmp129 vault1 @blast-compound
   359 jump *label95 greaterThanEq *tmp129 700
-    * jump *label97 always
   360 label *label97
   361 set .MODE 0
   362 control enabled switch1 false
   363 set .REASON "Blast compound level too low"
-    * jump *label96 always
   364 label *label95
   365 label *label96
   366 jump *label101 notEqual .COOLANT_FLAG false
 
   389 label *label110
   390 sensor *tmp139 switch2 @enabled
   391 jump *label107 equal *tmp139 false
-    * jump *label109 always
   392 label *label109
   393 op mul :min_level 0.5 :required_capacity
   394 set :commit_level 0
   395 jump *label111 equal .CAN_COMMIT false
   396 label *label115
   397 jump *label111 greaterThanEq :battery_change 0
-    * jump *label114 always
   398 label *label114
   399 jump *label111 greaterThanEq .REACTORS_ON :reactors
-    * jump *label113 always
   400 label *label113
   401 op sub *tmp145 :battery_change 1500
   402 op sub :p *tmp145 1000
 
   408 op idiv *tmp152 :commit_level 1000
   409 print "\nCommit threshold:   [gold]"
   410 print *tmp152
-    * jump *label112 always
   411 label *label111
   412 label *label112
   413 jump *label116 notEqual :commit_level 0
   414 op idiv *tmp155 :min_level 1000
   415 print "\nRestart threshold: [gold]"
   416 print *tmp155
-    * jump *label117 always
   417 label *label116
   418 label *label117
   419 print "[] K"
 
   434 jump *label122 greaterThanEq :battery_change -100
   435 label *label124
   436 op add :nextDecommit @time 6000
-    * jump *label123 always
   437 label *label122
   438 label *label123
   439 jump *label126 lessThanEq @time :nextDecommit
 
   452 op add .REACTORS_ON .REACTORS_ON 1
   453 op add .COMMITS .COMMITS 1
   454 set .CAN_COMMIT false
-    * jump *label131 always
   455 label *label130
   456 label *label131
   457 label *label127
 
   472 jump *label134 greaterThanEq :total_battery *tmp176
   473 set .OUTPUT_2 0
   474 set .OUTPUT_3 0
-    * jump *label135 always
   475 label *label134
   476 label *label135
   477 jump *label136 notEqual .OUTPUT_2 0
 
   482 label *label138
   483 print "\n*** [gold]Surge tower 2 offline[] ***"
   484 label *label139
-    * jump *label137 always
   485 label *label136
   486 label *label137
-    * jump *label48 always
   487 label *label89
   488 label *label48
   489 print "\n"
 
   515 jump *label146 equal :enabled false
   516 sensor *tmp197 :block @timescale
   517 op add :boosts :boosts *tmp197
-    * jump *label147 always
   518 label *label146
   519 label *label147
   520 jump *label143 always
 
   534 jump *label150 notEqual *tmp191 @armored-conveyor
   535 label *label151
   536 control enabled :block :startup
-    * jump *label143 always
   537 label *label150
   538 label *label143
   539 label *label141
 
   548 op add :reactors :reactors *tmp207
   549 read *tmp208 cell2 4
   550 op add :boosts :boosts *tmp208
-    * jump *label153 always
   551 label *label152
   552 label *label153
   553 op min .REACTORS_ON .REACTORS_ON :reactors

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-1 instructions):
 
   248 label *label56
   249 set :nextBattery *tmp83
   250 sensor *tmp85 :nextBattery @powerNetOut
-    * op mul *tmp86 *tmp85 1.05
-    * op floor *tmp87 *tmp86
+  251 op idiv *tmp87 *tmp85 0.9523809523809523
   252 op max :neededPower *tmp87 1000
   253 jump *label59 notEqual .REACTORS_ON 0
   254 jump *label61 lessThan :total_battery 25000

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
     0 set PLANT_PROTECTION 1
     1 set FAST_START 1
     2 set .START 0
-    * set .FUEL_FLAG .START
-    * set .COOLANT_FLAG .FUEL_FLAG
+    3 set .FUEL_FLAG 0
+    4 set .COOLANT_FLAG .START
     5 set :reactors 0
     6 label *label0
     7 jump *label2 notEqual :reactors 0
 
   104 set :failure2 *tmp53
   105 jump *label29 lessThan :consumption :min_consumption
   106 label *label30
-    * jump *label27 equal :failure2 false
+  107 jump *label27 equal *tmp53 false
   108 label *label29
   109 op add :failure_cnt :failure_cnt 1
   110 read *tmp55 cell2 1
 
   145 set *tmp60 null
   146 label *label33
   147 set .STR_MODE *tmp60
-    * print .STR_MODE
+  148 print *tmp60
   149 print ","
   150 print " reactors [green]"
   151 print .REACTORS_ON
 
   247 set *tmp83 battery2
   248 label *label56
   249 set :nextBattery *tmp83
-    * sensor *tmp85 :nextBattery @powerNetOut
+  250 sensor *tmp85 *tmp83 @powerNetOut
   251 op idiv *tmp87 *tmp85 0.9523809523809523
   252 op max :neededPower *tmp87 1000
   253 jump *label59 notEqual .REACTORS_ON 0
 
   308 label *label77
   309 label *label74
   310 label *label75
-    * jump *label78 equal :canStart false
+  311 jump *label78 equal *tmp103 false
   312 label *label81
   313 jump *label78 lessThanEq @time :nextStart
   314 label *label80
 
   319 set *tmp115 1
   320 label *label83
   321 set :start_at_once *tmp115
-    * op add *tmp117 .REACTORS_ON :start_at_once
+  322 op add *tmp117 .REACTORS_ON *tmp115
   323 op min .REACTORS_ON *tmp117 :reactors
   324 op add :nextStart @time 2000
   325 label *label78
 
   389 sensor *tmp139 switch2 @enabled
   390 jump *label107 equal *tmp139 false
   391 label *label109
-    * op mul :min_level 0.5 :required_capacity
+  392 op mul :min_level :reactors 50000
   393 set :commit_level 0
   394 jump *label111 equal .CAN_COMMIT false
   395 label *label115
 
   398 jump *label111 greaterThanEq .REACTORS_ON :reactors
   399 label *label113
   400 op sub *tmp145 :battery_change 1500
-    * op sub :p *tmp145 1000
+  401 op sub :p :battery_change 2500
   402 op mul *tmp147 :p 0.00472972972972973
   403 op add *tmp148 -5 *tmp147
   404 op mul *tmp149 :p *tmp148
 
   500 op equal :startup .MODE 1
   501 set :reactors 0
   502 set :boosts 0
-    * set :enabled true
   503 set :n .START
   504 label *label140
   505 jump *label142 greaterThanEq :n @links

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
     1 set FAST_START 1
     2 set .START 0
     3 set .FUEL_FLAG 0
-    * set .COOLANT_FLAG .START
+    4 set .COOLANT_FLAG 0
     5 set :reactors 0
     6 label *label0
     7 jump *label2 notEqual :reactors 0
 
   101 label *label22
   102 set *tmp53 false
   103 label *label23
-    * set :failure2 *tmp53
   104 jump *label29 lessThan :consumption :min_consumption
   105 label *label30
   106 jump *label27 equal *tmp53 false
 
   143 label *label38
   144 set *tmp60 null
   145 label *label33
-    * set .STR_MODE *tmp60
   146 print *tmp60
   147 print ","
   148 print " reactors [green]"
 
   244 label *label55
   245 set *tmp83 battery2
   246 label *label56
-    * set :nextBattery *tmp83
   247 sensor *tmp85 *tmp83 @powerNetOut
   248 op idiv *tmp87 *tmp85 0.9523809523809523
   249 op max :neededPower *tmp87 1000
 
   289 label *label67
   290 set *tmp103 false
   291 label *label68
-    * set :canStart *tmp103
   292 jump *label72 lessThan :net_power :neededPower
   293 set .OUTPUT_3 .OUTPUT_2
   294 set .OUTPUT_2 .OUTPUT_1
 
   314 label *label82
   315 set *tmp115 1
   316 label *label83
-    * set :start_at_once *tmp115
   317 op add *tmp117 .REACTORS_ON *tmp115
   318 op min .REACTORS_ON *tmp117 :reactors
   319 op add :nextStart @time 2000
 
   392 label *label114
   393 jump *label111 greaterThanEq .REACTORS_ON :reactors
   394 label *label113
-    * op sub *tmp145 :battery_change 1500
   395 op sub :p :battery_change 2500
   396 op mul *tmp147 :p 0.00472972972972973
   397 op add *tmp148 -5 *tmp147

Modifications by Iterated phase, Loop Rotation, pass 1, iteration 1 (-1 instructions):
 
     4 set .COOLANT_FLAG 0
     5 set :reactors 0
     6 label *label0
-    * jump *label2 notEqual :reactors 0
+    7 label *label156
     8 set :reactors 0
     9 set :n @links
    10 label *label3
    11 jump *label5 lessThanEq :n 0
+   12 label *label157
    13 op sub :n :n 1
    14 getlink :block :n
    15 print "Found: "
 
    29 label *label9
    30 label *label6
    31 label *label4
-    * jump *label3 always
+   32 jump *label157 greaterThan :n 0
    33 label *label5
    34 read *tmp7 cell2 1
    35 op add :reactors :reactors *tmp7
 
    39 label *label12
    40 printflush message1
    41 label *label1
-    * jump *label0 always
+   42 jump *label156 equal :reactors 0
    43 label *label2
    44 read .MODE cell1 0
    45 read .OUTPUT_1 cell1 1
 
   498 set :n .START
   499 label *label140
   500 jump *label142 greaterThanEq :n @links
+  501 label *label158
   502 getlink :block :n
   503 sensor *tmp191 :block @type
   504 jump *label144 notEqual *tmp191 @impact-reactor
 
   532 label *label143
   533 label *label141
   534 op add :n :n 1
-    * jump *label140 always
+  535 jump *label158 lessThan :n @links
   536 label *label142
   537 jump *label152 equal cell2 null
   538 write :reactors cell2 0

Modifications by Iterated phase, Boolean Optimization, pass 1, iteration 1 (-13 instructions):
 
    53 read .RESETS cell1 9
    54 read .COMMITS cell1 10
    55 set :reactors .REACTORS_ON
-    * jump *label13 notEqual .MODE 0
-    * set .REASON "Processor reset"
-    * jump *label14 always
-    * label *label13
-    * set .REASON "Reason unknown -- out of power?"
-    * label *label14
+   56 select .REASON equal .MODE 0 "Processor reset" "Reason unknown -- out of power?"
    57 op notEqual *tmp24 .MODE 0
    58 control enabled switch1 *tmp24
    59 set :failure_cnt 0
 
    87 label *label20
    88 op mul :min_consumption .REACTORS_ON 1200
    89 jump *label22 notEqual :battery_level 0
-    * label *label26
    90 jump *label22 lessThanEq :consumption 0
-    * label *label25
-    * jump *label22 notEqual :production 0
-    * label *label24
-    * set *tmp53 true
+   91 op equal *tmp53 :production 0
    92 jump *label23 always
    93 label *label22
    94 set *tmp53 false
    95 label *label23
    96 jump *label29 lessThan :consumption :min_consumption
-    * label *label30
    97 jump *label27 equal *tmp53 false
    98 label *label29
    99 op add :failure_cnt :failure_cnt 1
 
   224 jump *label53 notEqual .MODE 1
   225 label *label54
   226 jump *label55 equal .OUTPUT_1 false
-    * jump *label57 equal .OUTPUT_2 false
-    * set *tmp84 battery4
-    * jump *label58 always
-    * label *label57
-    * set *tmp84 battery3
-    * label *label58
+  227 select *tmp84 notEqual .OUTPUT_2 false battery4 battery3
   228 set *tmp83 *tmp84
   229 jump *label56 always
   230 label *label55
 
   260 print "]"
   261 label *label63
   262 label *label64
-    * jump *label65 lessThanEq :net_power 100
-    * set .OVERDRIVE true
-    * label *label65
-    * label *label66
+  263 select .OVERDRIVE greaterThan :net_power 100 true .OVERDRIVE
   264 jump *label67 greaterThanEq .REACTORS_ON :reactors
-    * label *label71
   265 jump *label67 lessThanEq :net_power 1000
-    * label *label70
-    * jump *label67 lessThan :total_battery 25000
-    * label *label69
-    * set *tmp103 true
+  266 op greaterThanEq *tmp103 :total_battery 25000
   267 jump *label68 always
   268 label *label67
   269 set *tmp103 false
 
   284 label *label74
   285 label *label75
   286 jump *label78 equal *tmp103 false
-    * label *label81
   287 jump *label78 lessThanEq @time :nextStart
-    * label *label80
-    * jump *label82 equal FAST_START false
-    * op idiv *tmp115 :total_battery 25000
-    * jump *label83 always
-    * label *label82
-    * set *tmp115 1
-    * label *label83
+  288 op idiv *tmp212 :total_battery 25000
+  289 select *tmp115 notEqual FAST_START false *tmp212 1
   290 op add *tmp117 .REACTORS_ON *tmp115
   291 op min .REACTORS_ON *tmp117 :reactors
   292 op add :nextStart @time 2000
   293 label *label78
   294 label *label79
   295 jump *label84 lessThan .REACTORS_ON :reactors
-    * label *label88
   296 jump *label84 lessThanEq @time :nextStart
-    * label *label87
   297 jump *label84 lessThanEq .OUTPUT_3 0
-    * label *label86
   298 set .MODE 2
   299 op add :nextDecommit @time 6000
   300 set .COOLANT_FLAG 0
 
   308 jump *label89 notEqual .MODE 2
   309 label *label90
   310 jump *label91 equal .COOLANT_FLAG false
-    * label *label94
   311 sensor *tmp125 tank1 @totalLiquids
   312 jump *label91 greaterThanEq *tmp125 750
-    * label *label93
   313 set .MODE 0
   314 control enabled switch1 false
   315 set .REASON "Cryo level too low"
   316 label *label91
   317 label *label92
   318 jump *label95 equal .FUEL_FLAG false
-    * label *label98
   319 sensor *tmp129 vault1 @blast-compound
   320 jump *label95 greaterThanEq *tmp129 700
-    * label *label97
   321 set .MODE 0
   322 control enabled switch1 false
   323 set .REASON "Blast compound level too low"
   324 label *label95
   325 label *label96
-    * jump *label101 notEqual .COOLANT_FLAG false
-    * label *label102
-    * sensor *tmp133 tank1 @totalLiquids
-    * jump *label99 lessThanEq *tmp133 1000
+  326 jump *label99 equal .COOLANT_FLAG false
   327 label *label101
   328 set *tmp135 true
   329 jump *label100 always
   330 label *label99
-    * set *tmp135 false
+  331 sensor *tmp133 tank1 @totalLiquids
+  332 op greaterThan *tmp135 *tmp133 1000
   333 label *label100
   334 set .COOLANT_FLAG *tmp135
-    * jump *label105 notEqual .FUEL_FLAG false
-    * label *label106
-    * sensor *tmp136 vault1 @blast-compound
-    * jump *label103 lessThanEq *tmp136 800
+  335 jump *label103 equal .FUEL_FLAG false
   336 label *label105
   337 set *tmp138 true
   338 jump *label104 always
   339 label *label103
-    * set *tmp138 false
+  340 sensor *tmp136 vault1 @blast-compound
+  341 op greaterThan *tmp138 *tmp136 800
   342 label *label104
   343 set .FUEL_FLAG *tmp138
   344 jump *label107 equal :enough_battery false
-    * label *label110
   345 sensor *tmp139 switch2 @enabled
   346 jump *label107 equal *tmp139 false
-    * label *label109
   347 op mul :min_level :reactors 50000
   348 set :commit_level 0
   349 jump *label111 equal .CAN_COMMIT false
-    * label *label115
   350 jump *label111 greaterThanEq :battery_change 0
-    * label *label114
   351 jump *label111 greaterThanEq .REACTORS_ON :reactors
-    * label *label113
   352 op sub :p :battery_change 2500
   353 op mul *tmp147 :p 0.00472972972972973
   354 op add *tmp148 -5 *tmp147
 
   368 label *label117
   369 print "[] K"
   370 jump *label120 lessThan :total_battery :min_level
-    * label *label121
   371 op mul *tmp157 .REACTORS_ON -2500
   372 jump *label118 greaterThanEq :battery_change *tmp157
   373 label *label120
 
   379 jump *label119 always
   380 label *label118
   381 jump *label124 lessThan :battery_level 47500
-    * label *label125
   382 jump *label122 greaterThanEq :battery_change -100
   383 label *label124
   384 op add :nextDecommit @time 6000

Modifications by Iterated phase, Boolean Optimization, pass 1, iteration 2 (-3 instructions):
 
   223 label *label49
   224 jump *label53 notEqual .MODE 1
   225 label *label54
-    * jump *label55 equal .OUTPUT_1 false
-    * select *tmp84 notEqual .OUTPUT_2 false battery4 battery3
-    * set *tmp83 *tmp84
-    * jump *label56 always
-    * label *label55
-    * set *tmp83 battery2
-    * label *label56
+  226 select *tmp84 notEqual .OUTPUT_2 false battery4 battery3
+  227 select *tmp83 notEqual .OUTPUT_1 false *tmp84 battery2
   228 sensor *tmp85 *tmp83 @powerNetOut
   229 op idiv *tmp87 *tmp85 0.9523809523809523
   230 op max :neededPower *tmp87 1000
 
   319 label *label95
   320 label *label96
   321 jump *label99 equal .COOLANT_FLAG false
-    * label *label101
   322 set *tmp135 true
   323 jump *label100 always
   324 label *label99
 
   327 label *label100
   328 set .COOLANT_FLAG *tmp135
   329 jump *label103 equal .FUEL_FLAG false
-    * label *label105
   330 set *tmp138 true
   331 jump *label104 always
   332 label *label103

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-2 instructions):
 
    86 jump *label21 always
    87 label *label20
    88 op mul :min_consumption .REACTORS_ON 1200
-    * jump *label22 notEqual :battery_level 0
-    * jump *label22 lessThanEq :consumption 0
+   89 set *tmp53 false
+   90 jump *label23 notEqual :battery_level 0
+   91 jump *label23 lessThanEq :consumption 0
    92 op equal *tmp53 :production 0
    93 jump *label23 always
-    * label *label22
-    * set *tmp53 false
    94 label *label23
    95 jump *label29 lessThan :consumption :min_consumption
    96 jump *label27 equal *tmp53 false
 
   255 label *label63
   256 label *label64
   257 select .OVERDRIVE greaterThan :net_power 100 true .OVERDRIVE
-    * jump *label67 greaterThanEq .REACTORS_ON :reactors
-    * jump *label67 lessThanEq :net_power 1000
+  258 set *tmp103 false
+  259 jump *label68 greaterThanEq .REACTORS_ON :reactors
+  260 jump *label68 lessThanEq :net_power 1000
   261 op greaterThanEq *tmp103 :total_battery 25000
   262 jump *label68 always
-    * label *label67
-    * set *tmp103 false
   263 label *label68
   264 jump *label72 lessThan :net_power :neededPower
   265 set .OUTPUT_3 .OUTPUT_2
 
   317 label *label95
   318 label *label96
   319 jump *label99 equal .COOLANT_FLAG false
-    * set *tmp135 true
+  320 set .COOLANT_FLAG true
   321 jump *label100 always
   322 label *label99
   323 sensor *tmp133 tank1 @totalLiquids
-    * op greaterThan *tmp135 *tmp133 1000
+  324 op greaterThan .COOLANT_FLAG *tmp133 1000
   325 label *label100
-    * set .COOLANT_FLAG *tmp135
   326 jump *label103 equal .FUEL_FLAG false
-    * set *tmp138 true
+  327 set .FUEL_FLAG true
   328 jump *label104 always
   329 label *label103
   330 sensor *tmp136 vault1 @blast-compound
-    * op greaterThan *tmp138 *tmp136 800
+  331 op greaterThan .FUEL_FLAG *tmp136 800
   332 label *label104
-    * set .FUEL_FLAG *tmp138
   333 jump *label107 equal :enough_battery false
   334 sensor *tmp139 switch2 @enabled
   335 jump *label107 equal *tmp139 false

Modifications by Fast-dispatch case at line 419:9 (-7 instructions):
 
   444 label *label158
   445 getlink :block :n
   446 sensor *tmp191 :block @type
-    * jump *label144 notEqual *tmp191 @impact-reactor
+  447 sensor *tmp213 *tmp191 @id
+  448 multijump *tmp213 0 0 (m:*label162)
+  449 multilabel *label167 (m:*label162)
+  450 multilabel *label163 (m:*label162)
+  451 label *label161
+  452 jump *label143 always
+  453 multilabel *label166 (m:*label162)
   454 label *label145
   455 op add :reactors :reactors 1
   456 op lessThanEq :enabled :reactors .REACTORS_ON
 
   462 label *label147
   463 jump *label143 always
   464 label *label144
-    * jump *label149 equal *tmp191 @overdrive-projector
-    * jump *label148 notEqual *tmp191 @overdrive-dome
+  465 multilabel *label164 (m:*label162)
   466 label *label149
   467 control enabled :block .OVERDRIVE
   468 jump *label143 always
   469 label *label148
-    * jump *label151 equal *tmp191 @conduit
-    * jump *label151 equal *tmp191 @pulse-conduit
-    * jump *label151 equal *tmp191 @plated-conduit
-    * jump *label151 equal *tmp191 @conveyor
-    * jump *label151 equal *tmp191 @titanium-conveyor
-    * jump *label151 equal *tmp191 @plastanium-conveyor
-    * jump *label150 notEqual *tmp191 @armored-conveyor
+  470 multilabel *label165 (m:*label162)
   471 label *label151
   472 control enabled :block :startup
-    * label *label150
   473 label *label143
   474 label *label141
   475 op add :n :n 1

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
     2 set .START 0
     3 set .FUEL_FLAG 0
     4 set .COOLANT_FLAG 0
-    * set :reactors 0
     5 label *label0
     6 label *label156
     7 set :reactors 0
 
   439 set :boosts 0
   440 set :n .START
   441 label *label140
-    * jump *label142 greaterThanEq :n @links
+  442 jump *label142 greaterThanEq .START @links
   443 label *label158
   444 getlink :block :n
   445 sensor *tmp191 :block @type

Modifications by Fast-dispatch case at line 210:16 (-2 instructions):
 
   115 label *label21
   116 label *label18
   117 label *label19
-    * jump *label34 notEqual .MODE 0
+  118 multijump .MODE 0 0 (m:*label169)
+  119 multilabel *label173 (m:*label169)
+  120 label *label168
+  121 set *tmp60 null
+  122 jump *label33 always
+  123 multilabel *label170 (m:*label169)
   124 label *label35
   125 set *tmp60 "[salmon]SHUTDOWN[]"
   126 jump *label33 always
   127 label *label34
-    * jump *label36 notEqual .MODE 1
+  128 multilabel *label171 (m:*label169)
   129 label *label37
   130 set *tmp60 "[gold]STARTUP[]"
   131 jump *label33 always
   132 label *label36
-    * jump *label38 notEqual .MODE 2
+  133 multilabel *label172 (m:*label169)
   134 label *label39
   135 set *tmp60 "[green]RUNNING[]"
-    * jump *label33 always
-    * label *label38
-    * set *tmp60 null
   136 label *label33
   137 print *tmp60
   138 print ","

Modifications by Fast-dispatch case at line 236:5 (-1 instructions):
 
   196 print :net_power
   197 print "["
   198 print "]"
-    * jump *label49 notEqual .MODE 0
+  199 multijump .MODE 0 0 (m:*label175)
+  200 multilabel *label179 (m:*label175)
+  201 label *label174
+  202 jump *label48 always
+  203 multilabel *label176 (m:*label175)
   204 label *label50
   205 set .REACTORS_ON 0
   206 set .OVERDRIVE 0
 
   225 label *label52
   226 jump *label48 always
   227 label *label49
-    * jump *label53 notEqual .MODE 1
+  228 multilabel *label177 (m:*label175)
   229 label *label54
   230 select *tmp84 notEqual .OUTPUT_2 false battery4 battery3
   231 select *tmp83 notEqual .OUTPUT_1 false *tmp84 battery2
 
   303 label *label60
   304 jump *label48 always
   305 label *label53
-    * jump *label89 notEqual .MODE 2
+  306 multilabel *label178 (m:*label175)
   307 label *label90
   308 jump *label91 equal .COOLANT_FLAG false
   309 sensor *tmp125 tank1 @totalLiquids
 
   426 label *label139
   427 label *label136
   428 label *label137
-    * label *label89
   429 label *label48
   430 print "\n"
   431 print .STARTUPS

Modifications by Iterated phase, Condition Optimization, pass 2, iteration 1 (-1 instructions):
 
    73 sensor :total_capacity battery1 @powerNetCapacity
    74 op idiv :total_capacity_str :total_capacity 1000
    75 op mul :required_capacity 100000 :reactors
-    * op greaterThanEq :enough_battery :total_capacity :required_capacity
    76 op sub *tmp40 :required_capacity :total_capacity
    77 op div *tmp41 *tmp40 1000
    78 op ceil :missing_battery *tmp41
 
   163 print "\n[salmon]Blast compound level critical![]"
   164 label *label44
   165 label *label45
-    * jump *label46 notEqual :enough_battery false
+  166 jump *label46 greaterThanEq :total_capacity :required_capacity
   167 print "\n[salmon]Insufficient battery storage![]"
   168 print "\n"
   169 print "Link [gold]"
 
   334 sensor *tmp136 vault1 @blast-compound
   335 op greaterThan .FUEL_FLAG *tmp136 800
   336 label *label104
-    * jump *label107 equal :enough_battery false
+  337 jump *label107 lessThan :total_capacity :required_capacity
   338 sensor *tmp139 switch2 @enabled
   339 jump *label107 equal *tmp139 false
   340 op mul :min_level :reactors 50000
 
   458 op add :reactors :reactors 1
   459 op lessThanEq :enabled :reactors .REACTORS_ON
   460 control enabled :block :enabled
-    * jump *label146 equal :enabled false
+  461 jump *label146 greaterThan :reactors .REACTORS_ON
   462 sensor *tmp197 :block @timescale
   463 op add :boosts :boosts *tmp197
   464 label *label146

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-2 instructions):
 
    88 jump *label23 notEqual :battery_level 0
    89 jump *label23 lessThanEq :consumption 0
    90 op equal *tmp53 :production 0
-    * jump *label23 always
    91 label *label23
    92 jump *label29 lessThan :consumption :min_consumption
    93 jump *label27 equal *tmp53 false
 
   262 jump *label68 greaterThanEq .REACTORS_ON :reactors
   263 jump *label68 lessThanEq :net_power 1000
   264 op greaterThanEq *tmp103 :total_battery 25000
-    * jump *label68 always
   265 label *label68
   266 jump *label72 lessThan :net_power :neededPower
   267 set .OUTPUT_3 .OUTPUT_2

Modifications by Jumps phase, Jump Threading, pass 4, iteration 1:
 
    88 op add :failure_cnt :failure_cnt 1
    89 read *tmp55 cell2 1
    90 op add *tmp56 10 *tmp55
-    * jump *label31 lessThanEq :failure_cnt *tmp56
+   91 jump *label28 lessThanEq :failure_cnt *tmp56
    92 set .MODE 0
    93 control enabled switch1 false
    94 set .REASON "Unknown -- out of power?"
 
   191 print .REASON
   192 print "[]"
   193 sensor *tmp81 switch1 @enabled
-    * jump *label51 equal *tmp81 false
+  194 jump *label48 equal *tmp81 false
   195 set .MODE 1
   196 op add .STARTUPS .STARTUPS 1
   197 set :nextStart 0
 
   210 jump *label61 lessThan :total_battery 25000
   211 set .REACTORS_ON 1
   212 op add :nextStart @time 2000
-    * jump *label62 always
+  213 jump *label48 always
   214 label *label61
   215 print "\nRequired startup energy: [gold]"
   216 print 25
   217 print " K[]"
   218 label *label62
-    * jump *label60 always
+  219 jump *label48 always
   220 label *label59
   221 op add *tmp94 .OUTPUT_1 .OUTPUT_2
   222 op add :outputs *tmp94 .OUTPUT_3
 
   258 op min .REACTORS_ON *tmp117 :reactors
   259 op add :nextStart @time 2000
   260 label *label78
-    * jump *label84 lessThan .REACTORS_ON :reactors
-    * jump *label84 lessThanEq @time :nextStart
-    * jump *label84 lessThanEq .OUTPUT_3 0
+  261 jump *label48 lessThan .REACTORS_ON :reactors
+  262 jump *label48 lessThanEq @time :nextStart
+  263 jump *label48 lessThanEq .OUTPUT_3 0
   264 set .MODE 2
   265 op add :nextDecommit @time 6000
   266 set .COOLANT_FLAG 0
 
   331 set .OVERDRIVE true
   332 set .REACTORS_ON :reactors
   333 op add :nextDecommit @time 6000
-    * jump *label119 always
+  334 jump *label108 always
   335 label *label118
   336 jump *label124 lessThan :battery_level 47500
   337 jump *label122 greaterThanEq :battery_change -100
 
   348 set .CAN_COMMIT true
   349 label *label129
   350 op add :nextDecommit @time 6000
-    * jump *label127 always
+  351 jump *label108 always
   352 label *label126
-    * jump *label130 greaterThanEq :total_battery :commit_level
+  353 jump *label108 greaterThanEq :total_battery :commit_level
   354 op add .REACTORS_ON .REACTORS_ON 1
   355 op add .COMMITS .COMMITS 1
   356 set .CAN_COMMIT false
 
   413 op add :reactors :reactors 1
   414 op lessThanEq :enabled :reactors .REACTORS_ON
   415 control enabled :block :enabled
-    * jump *label146 greaterThan :reactors .REACTORS_ON
+  416 jump *label143 greaterThan :reactors .REACTORS_ON
   417 sensor *tmp197 :block @timescale
   418 op add :boosts :boosts *tmp197
   419 label *label146
 
   441 set .STARTUPS 0
   442 set .RESETS 0
   443 set .COMMITS 0
-    * jump *label155 always
+  444 jump *label15 always
   445 label *label154
   446 write .MODE cell1 0
   447 write .OUTPUT_1 cell1 1

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-1 instructions):
 
    97 print "\nMin. consumption: "
    98 print :min_consumption
    99 printflush message2
-    * label *label31
   100 jump *label28 always
   101 label *label27
   102 set :failure_cnt 0
 
   197 set :failure_cnt 0
   198 set .GENERATOR true
   199 set .REASON "Unknown -- out of power?"
-    * label *label51
   200 jump *label48 always
   201 multilabel *label177 (m:*label175)
   202 select *tmp84 notEqual .OUTPUT_2 false battery4 battery3
 
   213 print "\nRequired startup energy: [gold]"
   214 print 25
   215 print " K[]"
-    * label *label62
   216 jump *label48 always
   217 label *label59
   218 op add *tmp94 .OUTPUT_1 .OUTPUT_2
 
   263 set .COOLANT_FLAG 0
   264 set .FUEL_FLAG 0
   265 set .GENERATOR false
-    * label *label84
-    * label *label60
   266 jump *label48 always
   267 multilabel *label178 (m:*label175)
   268 jump *label91 equal .COOLANT_FLAG false
 
   349 op add .REACTORS_ON .REACTORS_ON 1
   350 op add .COMMITS .COMMITS 1
   351 set .CAN_COMMIT false
-    * label *label130
-    * label *label127
-    * label *label119
   352 jump *label108 always
   353 label *label107
   354 sensor *tmp174 switch2 @enabled
 
   408 jump *label143 greaterThan :reactors .REACTORS_ON
   409 sensor *tmp197 :block @timescale
   410 op add :boosts :boosts *tmp197
-    * label *label146
   411 jump *label143 always
   412 multilabel *label164 (m:*label162)
   413 control enabled :block .OVERDRIVE
 
   445 write .STARTUPS cell1 8
   446 write .RESETS cell1 9
   447 write .COMMITS cell1 10
-    * label *label155
   448 jump *label15 always
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-39 instructions):
 
     9 label *label157
    10 op sub :n :n 1
    11 getlink :block :n
-    * print "Found: "
-    * print :block
-    * print "\n"
+   12 print "Found: {0}\n"
+   13 format :block
    14 sensor *tmp5 :block @type
    15 jump *label7 notEqual *tmp5 @impact-reactor
    16 set .START :n
 
    91 set .MODE 0
    92 control enabled switch1 false
    93 set .REASON "Unknown -- out of power?"
-    * print "Consumption: "
-    * print :consumption
-    * print "\nMin. consumption: "
+   94 print "Consumption: {0}\nMin. consumption: "
+   95 format :consumption
    96 print :min_consumption
    97 printflush message2
    98 jump *label28 always
 
   115 set *tmp60 "[green]RUNNING[]"
   116 label *label33
   117 print *tmp60
-    * print ","
-    * print " reactors [green]"
-    * print .REACTORS_ON
-    * print "/"
-    * print :reactors
-    * print "["
-    * print "]"
+  118 print ", reactors [green]{0}/{0}[]"
+  119 format .REACTORS_ON
+  120 format :reactors
   121 jump *label40 equal .OVERDRIVE false
   122 op mul *tmp63 100 :boosts
   123 op div *tmp64 *tmp63 .REACTORS_ON
   124 op add *tmp65 *tmp64 0.5
   125 op floor *tmp66 *tmp65
   126 op div :multiplier *tmp66 100
-    * print " ([gold]"
-    * print :multiplier
-    * print "x[])"
+  127 print " ([gold]{0}x[])"
+  128 format :multiplier
   129 label *label40
   130 print "\n=================================="
   131 sensor *tmp68 tank1 @totalLiquids
 
   137 print "\n[salmon]Blast compound level critical![]"
   138 label *label44
   139 jump *label46 greaterThanEq :total_capacity :required_capacity
-    * print "\n[salmon]Insufficient battery storage![]"
-    * print "\n"
-    * print "Link [gold]"
-    * print :missing_battery
-    * print " "
-    * print "K[] of additional storage to internal battery."
+  140 print "\n[salmon]Insufficient battery storage![]\nLink [gold]{0} K[] of additional storage to internal battery."
+  141 format :missing_battery
   142 label *label46
-    * print "\n"
-    * print "Internal battery:    [gold]"
-    * print :battery_level_str
-    * print "["
-    * print "]/[green]50[] K"
-    * print "\n"
-    * print "Total battery:        [gold]"
-    * print :total_battery_str
-    * print "["
-    * print "]/[green]"
-    * print :total_capacity_str
-    * print "["
-    * print "] K"
-    * print "\n"
-    * print "Battery change:     [gold]"
-    * print :battery_change
-    * print "["
-    * print "]"
-    * print "\n"
-    * print "Power balance:       [gold]"
-    * print :net_power
-    * print "["
-    * print "]"
+  143 print "\nInternal battery:    [gold]{0}[]/[green]50[] K\nTotal battery:        [gold]{0}[]/[green]{0}[] K\nBattery change:     [gold]{0}[]\nPower balance:       [gold]{0}[]"
+  144 format :battery_level_str
+  145 format :total_battery_str
+  146 format :total_capacity_str
+  147 format :battery_change
+  148 format :net_power
   149 multijump .MODE 0 0 (m:*label175)
   150 multilabel *label179 (m:*label175)
   151 jump *label48 always
 
   158 op greaterThanEq *tmp78 :net_power -150
   159 op lessThan *tmp79 :total_battery 47500
   160 op land .GENERATOR *tmp78 *tmp79
-    * print "\nShutdown reason: [gold]"
-    * print .REASON
-    * print "[]"
+  161 print "\nShutdown reason: [gold]{0}[]"
+  162 format .REASON
   163 sensor *tmp81 switch1 @enabled
   164 jump *label48 equal *tmp81 false
   165 set .MODE 1
 
   181 op add :nextStart @time 2000
   182 jump *label48 always
   183 label *label61
-    * print "\nRequired startup energy: [gold]"
-    * print 25
-    * print " K[]"
+  184 print "\nRequired startup energy: [gold]25 K[]"
   185 jump *label48 always
   186 label *label59
   187 op add *tmp94 .OUTPUT_1 .OUTPUT_2
   188 op add :outputs *tmp94 .OUTPUT_3
-    * print "\n"
-    * print "[gold]"
-    * print :outputs
-    * print "["
-    * print "] surge tower(s) online"
+  189 print "\n[gold]{0}[] surge tower(s) online"
+  190 format :outputs
   191 jump *label63 notEqual .OUTPUT_3 0
-    * print "\n"
-    * print "Required power level: [gold]"
-    * print :neededPower
-    * print "["
-    * print "]"
+  192 print "\nRequired power level: [gold]{0}[]"
+  193 format :neededPower
   194 label *label63
   195 select .OVERDRIVE greaterThan :net_power 100 true .OVERDRIVE
   196 set *tmp103 false
 
   339 label *label139
   340 label *label136
   341 label *label48
-    * print "\n"
-    * print .STARTUPS
-    * print "-"
-    * print .RESETS
-    * print "-"
+  342 print "\n{0}-{0}-"
+  343 format .STARTUPS
+  344 format .RESETS
   345 print .COMMITS
   346 printflush message1
   347 control enabled diode1 .OUTPUT_1

Final code before resolving virtual instructions:

set PLANT_PROTECTION 1
set FAST_START 1
set .START 0
set .FUEL_FLAG 0
set .COOLANT_FLAG 0
label *label156
set :reactors 0
set :n @links
jump *label5 lessThanEq :n 0
label *label157
op sub :n :n 1
getlink :block :n
print "Found: {0}\n"
format :block
sensor *tmp5 :block @type
jump *label7 notEqual *tmp5 @impact-reactor
set .START :n
op add :reactors :reactors 1
jump *label6 always
label *label7
jump *label10 equal *tmp5 @overdrive-projector
jump *label9 notEqual *tmp5 @overdrive-dome
label *label10
set .START :n
label *label9
label *label6
jump *label157 greaterThan :n 0
label *label5
read *tmp7 cell2 1
op add :reactors :reactors *tmp7
jump *label11 notEqual :reactors 0
print "No reactor."
label *label11
printflush message1
jump *label156 equal :reactors 0
read .MODE cell1 0
read .OUTPUT_1 cell1 1
read .OUTPUT_2 cell1 2
read .OUTPUT_3 cell1 3
read .REACTORS_ON cell1 4
read .OVERDRIVE cell1 5
read .GENERATOR cell1 6
read .CAN_COMMIT cell1 7
read .STARTUPS cell1 8
read .RESETS cell1 9
read .COMMITS cell1 10
set :reactors .REACTORS_ON
select .REASON equal .MODE 0 "Processor reset" "Reason unknown -- out of power?"
op notEqual *tmp24 .MODE 0
control enabled switch1 *tmp24
set :failure_cnt 0
set :boosts 0
set :nextStart 0
op add :nextDecommit @time 6000
label *label15
sensor *tmp26 battery1 @totalPower
op floor :battery_level *tmp26
op idiv :battery_level_str :battery_level 1000
sensor *tmp29 battery1 @powerNetStored
op floor :total_battery *tmp29
op idiv :total_battery_str :total_battery 1000
sensor :consumption battery1 @powerNetOut
read :production bank1 509
read :net_power bank1 510
read :battery_change bank1 511
sensor :total_capacity battery1 @powerNetCapacity
op idiv :total_capacity_str :total_capacity 1000
op mul :required_capacity 100000 :reactors
op sub *tmp40 :required_capacity :total_capacity
op div *tmp41 *tmp40 1000
op ceil :missing_battery *tmp41
jump *label18 equal .MODE 0
sensor *tmp45 switch1 @enabled
jump *label20 notEqual *tmp45 false
set .MODE 0
set .REASON "Manual power off"
jump *label21 always
label *label20
op mul :min_consumption .REACTORS_ON 1200
set *tmp53 false
jump *label23 notEqual :battery_level 0
jump *label23 lessThanEq :consumption 0
op equal *tmp53 :production 0
label *label23
jump *label29 lessThan :consumption :min_consumption
jump *label27 equal *tmp53 false
label *label29
op add :failure_cnt :failure_cnt 1
read *tmp55 cell2 1
op add *tmp56 10 *tmp55
jump *label28 lessThanEq :failure_cnt *tmp56
set .MODE 0
control enabled switch1 false
set .REASON "Unknown -- out of power?"
print "Consumption: {0}\nMin. consumption: "
format :consumption
print :min_consumption
printflush message2
jump *label28 always
label *label27
set :failure_cnt 0
label *label28
label *label21
label *label18
multijump .MODE 0 0
multilabel *label173
set *tmp60 null
jump *label33 always
multilabel *label170
set *tmp60 "[salmon]SHUTDOWN[]"         # Origin: 88, keys: 0
jump *label33 always
multilabel *label171
set *tmp60 "[gold]STARTUP[]"            # Origin: 88, keys: 1
jump *label33 always
multilabel *label172
set *tmp60 "[green]RUNNING[]"           # Origin: 88, keys: 2
label *label33
print *tmp60
print ", reactors [green]{0}/{0}[]"
format .REACTORS_ON
format :reactors
jump *label40 equal .OVERDRIVE false
op mul *tmp63 100 :boosts
op div *tmp64 *tmp63 .REACTORS_ON
op add *tmp65 *tmp64 0.5
op floor *tmp66 *tmp65
op div :multiplier *tmp66 100
print " ([gold]{0}x[])"
format :multiplier
label *label40
print "\n=================================="
sensor *tmp68 tank1 @totalLiquids
jump *label42 greaterThanEq *tmp68 750
print "\n[salmon]Cryofluid level critical![]"
label *label42
sensor *tmp71 vault1 @blast-compound
jump *label44 greaterThanEq *tmp71 700
print "\n[salmon]Blast compound level critical![]"
label *label44
jump *label46 greaterThanEq :total_capacity :required_capacity
print "\n[salmon]Insufficient battery storage![]\nLink [gold]{0} K[] of additional storage to internal battery."
format :missing_battery
label *label46
print "\nInternal battery:    [gold]{0}[]/[green]50[] K\nTotal battery:        [gold]{0}[]/[green]{0}[] K\nBattery change:     [gold]{0}[]\nPower balance:       [gold]{0}[]"
format :battery_level_str
format :total_battery_str
format :total_capacity_str
format :battery_change
format :net_power
multijump .MODE 0 0
multilabel *label179
jump *label48 always
multilabel *label176
set .REACTORS_ON 0                      # Origin: 124, keys: 0
set .OVERDRIVE 0
set .OUTPUT_1 0
set .OUTPUT_2 0
set .OUTPUT_3 0
op greaterThanEq *tmp78 :net_power -150
op lessThan *tmp79 :total_battery 47500
op land .GENERATOR *tmp78 *tmp79
print "\nShutdown reason: [gold]{0}[]"
format .REASON
sensor *tmp81 switch1 @enabled
jump *label48 equal *tmp81 false
set .MODE 1
op add .STARTUPS .STARTUPS 1
set :nextStart 0
set :failure_cnt 0
set .GENERATOR true
set .REASON "Unknown -- out of power?"
jump *label48 always
multilabel *label177
select *tmp84 notEqual .OUTPUT_2 false battery4 battery3 # Origin: 124, keys: 1
select *tmp83 notEqual .OUTPUT_1 false *tmp84 battery2
sensor *tmp85 *tmp83 @powerNetOut
op idiv *tmp87 *tmp85 0.9523809523809523
op max :neededPower *tmp87 1000
jump *label59 notEqual .REACTORS_ON 0
jump *label61 lessThan :total_battery 25000
set .REACTORS_ON 1
op add :nextStart @time 2000
jump *label48 always
label *label61
print "\nRequired startup energy: [gold]25 K[]"
jump *label48 always
label *label59
op add *tmp94 .OUTPUT_1 .OUTPUT_2
op add :outputs *tmp94 .OUTPUT_3
print "\n[gold]{0}[] surge tower(s) online"
format :outputs
jump *label63 notEqual .OUTPUT_3 0
print "\nRequired power level: [gold]{0}[]"
format :neededPower
label *label63
select .OVERDRIVE greaterThan :net_power 100 true .OVERDRIVE
set *tmp103 false
jump *label68 greaterThanEq .REACTORS_ON :reactors
jump *label68 lessThanEq :net_power 1000
op greaterThanEq *tmp103 :total_battery 25000
label *label68
jump *label72 lessThan :net_power :neededPower
set .OUTPUT_3 .OUTPUT_2
set .OUTPUT_2 .OUTPUT_1
set .OUTPUT_1 1
label *label72
jump *label74 notEqual .OUTPUT_1 0
op mul :availablePower 6300 :boosts
op div :ratio :neededPower :availablePower
jump *label76 greaterThanEq :ratio 1
op add :nextStart @time 2000
label *label76
label *label74
jump *label78 equal *tmp103 false
jump *label78 lessThanEq @time :nextStart
op idiv *tmp212 :total_battery 25000
select *tmp115 notEqual FAST_START false *tmp212 1
op add *tmp117 .REACTORS_ON *tmp115
op min .REACTORS_ON *tmp117 :reactors
op add :nextStart @time 2000
label *label78
jump *label48 lessThan .REACTORS_ON :reactors
jump *label48 lessThanEq @time :nextStart
jump *label48 lessThanEq .OUTPUT_3 0
set .MODE 2
op add :nextDecommit @time 6000
set .COOLANT_FLAG 0
set .FUEL_FLAG 0
set .GENERATOR false
jump *label48 always
multilabel *label178
jump *label91 equal .COOLANT_FLAG false
sensor *tmp125 tank1 @totalLiquids
jump *label91 greaterThanEq *tmp125 750
set .MODE 0
control enabled switch1 false
set .REASON "Cryo level too low"
label *label91
jump *label95 equal .FUEL_FLAG false
sensor *tmp129 vault1 @blast-compound
jump *label95 greaterThanEq *tmp129 700
set .MODE 0
control enabled switch1 false
set .REASON "Blast compound level too low"
label *label95
jump *label99 equal .COOLANT_FLAG false
set .COOLANT_FLAG true
jump *label100 always
label *label99
sensor *tmp133 tank1 @totalLiquids
op greaterThan .COOLANT_FLAG *tmp133 1000
label *label100
jump *label103 equal .FUEL_FLAG false
set .FUEL_FLAG true
jump *label104 always
label *label103
sensor *tmp136 vault1 @blast-compound
op greaterThan .FUEL_FLAG *tmp136 800
label *label104
jump *label107 lessThan :total_capacity :required_capacity
sensor *tmp139 switch2 @enabled
jump *label107 equal *tmp139 false
op mul :min_level :reactors 50000
set :commit_level 0
jump *label111 equal .CAN_COMMIT false
jump *label111 greaterThanEq :battery_change 0
jump *label111 greaterThanEq .REACTORS_ON :reactors
op sub :p :battery_change 2500
op mul *tmp147 :p 0.00472972972972973
op add *tmp148 -5 *tmp147
op mul *tmp149 :p *tmp148
op add :commit_margin 25000 *tmp149
op add :commit_level :min_level :commit_margin
op idiv *tmp152 :commit_level 1000
print "\nCommit threshold:   [gold]"
print *tmp152
label *label111
jump *label116 notEqual :commit_level 0
op idiv *tmp155 :min_level 1000
print "\nRestart threshold: [gold]"
print *tmp155
label *label116
print "[] K"
jump *label120 lessThan :total_battery :min_level
op mul *tmp157 .REACTORS_ON -2500
jump *label118 greaterThanEq :battery_change *tmp157
label *label120
op equal *tmp160 .OVERDRIVE false
op add .RESETS .RESETS *tmp160
set .OVERDRIVE true
set .REACTORS_ON :reactors
op add :nextDecommit @time 6000
jump *label108 always
label *label118
jump *label124 lessThan :battery_level 47500
jump *label122 greaterThanEq :battery_change -100
label *label124
op add :nextDecommit @time 6000
label *label122
jump *label126 lessThanEq @time :nextDecommit
jump *label128 equal .OVERDRIVE false
set .OVERDRIVE false
jump *label129 always
label *label128
op sub *tmp169 .REACTORS_ON 1
op max .REACTORS_ON *tmp169 1
set .CAN_COMMIT true
label *label129
op add :nextDecommit @time 6000
jump *label108 always
label *label126
jump *label108 greaterThanEq :total_battery :commit_level
op add .REACTORS_ON .REACTORS_ON 1
op add .COMMITS .COMMITS 1
set .CAN_COMMIT false
jump *label108 always
label *label107
sensor *tmp174 switch2 @enabled
jump *label132 equal *tmp174 false
print "\n[salmon]Load adapting not possible.[]"
jump *label133 always
label *label132
print "\n[gold]Load adapting not active.[]"
label *label133
set .REACTORS_ON :reactors
set .OVERDRIVE true
label *label108
op mul *tmp176 PLANT_PROTECTION 47500
jump *label134 greaterThanEq :total_battery *tmp176
set .OUTPUT_2 0
set .OUTPUT_3 0
label *label134
jump *label136 notEqual .OUTPUT_2 0
jump *label138 lessThanEq :total_battery 47500
set .OUTPUT_2 1
set .OUTPUT_3 1
jump *label139 always
label *label138
print "\n*** [gold]Surge tower 2 offline[] ***"
label *label139
label *label136
label *label48
print "\n{0}-{0}-"
format .STARTUPS
format .RESETS
print .COMMITS
printflush message1
control enabled diode1 .OUTPUT_1
control enabled diode2 .OUTPUT_2
control enabled diode3 .OUTPUT_3
control enabled generator1 .GENERATOR
control enabled generator2 .GENERATOR
op equal :startup .MODE 1
set :reactors 0
set :boosts 0
set :n .START
jump *label142 greaterThanEq .START @links
label *label158
getlink :block :n
sensor *tmp191 :block @type
sensor *tmp213 *tmp191 @id
multijump *tmp213 0 0
multilabel *label167
multilabel *label163
jump *label143 always
multilabel *label166
op add :reactors :reactors 1            # Origin: 299, keys: 82
op lessThanEq :enabled :reactors .REACTORS_ON
control enabled :block :enabled
jump *label143 greaterThan :reactors .REACTORS_ON
sensor *tmp197 :block @timescale
op add :boosts :boosts *tmp197
jump *label143 always
multilabel *label164
control enabled :block .OVERDRIVE       # Origin: 299, keys: 37, 38
jump *label143 always
multilabel *label165
control enabled :block :startup         # Origin: 299, keys: 41 .. 44, 60 .. 62
label *label143
op add :n :n 1
jump *label158 lessThan :n @links
label *label142
jump *label152 equal cell2 null
write :reactors cell2 0
write .REACTORS_ON cell2 2
write .OVERDRIVE cell2 3
read *tmp207 cell2 1
op add :reactors :reactors *tmp207
read *tmp208 cell2 4
op add :boosts :boosts *tmp208
label *label152
op min .REACTORS_ON .REACTORS_ON :reactors
jump *label154 notEqual cell1 null
set .STARTUPS 0
set .RESETS 0
set .COMMITS 0
jump *label15 always
label *label154
write .MODE cell1 0
write .OUTPUT_1 cell1 1
write .OUTPUT_2 cell1 2
write .OUTPUT_3 cell1 3
write .REACTORS_ON cell1 4
write .OVERDRIVE cell1 5
write .GENERATOR cell1 6
write .CAN_COMMIT cell1 7
write .STARTUPS cell1 8
write .RESETS cell1 9
write .COMMITS cell1 10
jump *label15 always
