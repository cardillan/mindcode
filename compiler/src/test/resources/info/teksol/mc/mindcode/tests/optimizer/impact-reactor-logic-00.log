   661 instructions before optimizations.
    65 instructions eliminated by Temp Variables Elimination (7 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    28 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    12 instructions eliminated by If Expression Optimization (5 iterations).
    82 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   536 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   790 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 529):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 533):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 542):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 536):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+43 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 493):
  ! Inline function 'start_reactor' defined at line 140:1        size  +623, benefit      687.5, efficiency      1.104
  * Inline function call at line 80:14                           size  +156, benefit      137.5, efficiency      0.881 (+148 instructions)
    Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 345):
  ! Inline function 'start_reactor' defined at line 140:1        size  +467, benefit      550.0, efficiency      1.178
  * Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 196):
  ! Inline function 'start_reactor' defined at line 140:1        size  +311, benefit      412.5, efficiency      1.326
  * Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 47):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 2: speed optimization selection (cost limit 70):
  ! Inline function 'start_reactor' defined at line 140:1        size  +152, benefit      275.0, efficiency      1.809
  ! Inline function call at line 91:14                           size  +153, benefit      137.5, efficiency      0.899
  ! Inline function call at line 93:14                           size  +153, benefit      137.5, efficiency      0.899

Pass 3: speed optimization selection (cost limit 70):
  ! Inline function 'start_reactor' defined at line 140:1        size  +152, benefit      275.0, efficiency      1.809
  ! Inline function call at line 91:14                           size  +153, benefit      137.5, efficiency      0.899
  ! Inline function call at line 93:14                           size  +153, benefit      137.5, efficiency      0.899

Pass 4: speed optimization selection (cost limit 70):
  ! Inline function 'start_reactor' defined at line 140:1        size  +152, benefit      275.0, efficiency      1.809
  ! Inline function call at line 91:14                           size  +153, benefit      137.5, efficiency      0.899
  ! Inline function call at line 93:14                           size  +153, benefit      137.5, efficiency      0.899

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    71 print "\n"
    72 set *tmp8 true
    73 jump *label11 always
-    * set *tmp13 null
    74 jump *label13 always
    75 label *label12
-    * set *tmp13 null
    76 label *label13
    77 set *tmp8 false
    78 jump *label11 always
 
   131 setaddr :update_fuel*retaddr *label20 (h:*label20)
   132 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   133 label *label20
-    * set *tmp20 :update_fuel*retval
   134 set :start_reactor:reactor reactor2
   135 set :start_reactor:reactor_num 2
   136 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   148 setaddr :update_fuel*retaddr *label22 (h:*label22)
   149 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   150 label *label22
-    * set *tmp22 :update_fuel*retval
   151 set :check_radar:unit .TOWER
   152 setaddr :check_radar*retaddr *label23 (h:*label23)
   153 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   196 setaddr :update_fuel*retaddr *label27 (h:*label27)
   197 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   198 label *label27
-    * set *tmp29 :update_fuel*retval
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or *tmp31 *tmp30 :fuel_many
   201 set :throttle_blast:reactors_fueled *tmp31
 
   233 print "\n"
   234 set *tmp45 null
   235 label *label32
-    * set *tmp44 *tmp45
   236 jump *label30 always
   237 label *label29
   238 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   259 print "n"
   260 set *tmp47 null
   261 label *label34
-    * set *tmp44 *tmp47
   262 label *label30
   263 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   264 set *tmp32 *tmp48
 
   293 control enabled generator2 true
   294 set *tmp59 true
   295 label *label39
-    * set *tmp52 *tmp59
   296 label *label37
   297 set :kilo:val .AVG_SURPLUS
   298 setaddr :kilo*retaddr *label40 (h:*label40)
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp68 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   349 label *label48
   350 set *tmp80 null
   351 label *label49
-    * set *tmp78 *tmp80
   352 jump *label47 always
   353 label *label46
-    * set *tmp78 null
   354 label *label47
   355 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   356 op mul *tmp82 .GOAL_BUFFER 0.8
 
   371 label *label51
   372 set *tmp70 *tmp85
   373 label *label45
-    * set *tmp68 *tmp70
   374 label *label43
   375 op notEqual *tmp91 .REACTORS_DESIRED 5
   376 jump *label52 equal *tmp91 false
 
   378 print .REACTORS_DESIRED
   379 print "/5 reactors."
   380 print "\n"
-    * set *tmp92 null
   381 jump *label53 always
   382 label *label52
-    * set *tmp92 null
   383 label *label53
   384 printflush message1
   385 label *label8
 
   428 jump *label61 equal *tmp107 false
   429 set :calc_charge_req*retval 0
   430 jump *label60 always
-    * set *tmp108 null
   431 jump *label62 always
   432 label *label61
-    * set *tmp108 null
   433 label *label62
   434 op sub *tmp109 30 :calc_charge_req:secs
   435 set :calc_charge_req:time_left *tmp109
 
   479 print "emergency mode"
   480 print "\n"
   481 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   482 jump *label65 always
   483 label *label64
   484 jump *label66 equal :start_reactor:enabled false
 
   682 label *label84
   683 set *tmp131 *tmp178
   684 label *label67
-    * set *tmp128 *tmp131
   685 label *label65
   686 sensor *tmp201 :start_reactor:reactor @enabled
   687 op notEqual *tmp202 :start_reactor:enabled *tmp201
   688 jump *label95 equal *tmp202 false
   689 set *tmp204 @tick
   690 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   691 jump *label96 always
   692 label *label95
-    * set *tmp203 null
   693 label *label96
   694 set :start_reactor*retval :start_reactor:supply_fuel
   695 jump *label63 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   226 jump *label31 equal :throttle_blast:emerg_shutdown false
   227 print " Enemies detected."
   228 print "\n"
-    * set *tmp45 null
   229 jump *label32 always
   230 label *label31
   231 print " Critical power."
   232 print "\n"
-    * set *tmp45 null
   233 label *label32
   234 jump *label30 always
   235 label *label29
 
   244 print " "
   245 print "(due to emergency)"
   246 print "\n"
-    * set *tmp47 null
   247 jump *label34 always
   248 label *label33
   249 set :throttle_blast:limit .FUEL_LIMIT
 
   254 print :throttle_blast:limit
   255 print "\"
   256 print "n"
-    * set *tmp47 null
   257 label *label34
   258 label *label30
   259 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   282 print "\n"
   283 control enabled generator1 false
   284 control enabled generator2 false
-    * set *tmp59 false
   285 jump *label39 always
   286 label *label38
   287 control enabled generator1 true
   288 control enabled generator2 true
-    * set *tmp59 true
   289 label *label39
   290 label *label37
   291 set :kilo:val .AVG_SURPLUS
 
   338 jump *label48 equal *tmp79 false
   339 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   340 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   341 jump *label49 always
   342 label *label48
-    * set *tmp80 null
   343 label *label49
   344 jump *label47 always
   345 label *label46
 
   361 label *label50
   362 set *tmp85 null
   363 label *label51
-    * set *tmp70 *tmp85
   364 label *label45
   365 label *label43
   366 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   404 set *tmp101 .FUEL_OFF
   405 label *label59
   406 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   407 label *label55
   408 return :update_fuel*retaddr
   409 end
 
   579 label *label71
   580 set *tmp133 *tmp140
   581 label *label69
-    * set *tmp131 *tmp133
   582 jump *label67 always
   583 label *label66
   584 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   669 label *label86
   670 set *tmp178 *tmp181
   671 label *label84
-    * set *tmp131 *tmp178
   672 label *label67
   673 label *label65
   674 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   356 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   357 op min *tmp90 5 *tmp89
   358 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   359 jump *label51 always
   360 label *label50
-    * set *tmp85 null
   361 label *label51
   362 label *label45
   363 label *label43
 
   476 control enabled *tmp134 false
   477 print "STOP unwanted"
   478 print "\n"
-    * set *tmp133 null
   479 jump *label69 always
   480 label *label68
   481 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   574 label *label73
   575 set *tmp140 *tmp144
   576 label *label71
-    * set *tmp133 *tmp140
   577 label *label69
   578 jump *label67 always
   579 label *label66
 
   593 print "IDLE"
   594 print "\n"
   595 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   596 jump *label84 always
   597 label *label83
   598 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   662 label *label88
   663 set *tmp181 *tmp190
   664 label *label86
-    * set *tmp178 *tmp181
   665 label *label84
   666 label *label67
   667 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   487 control enabled *tmp141 false
   488 print "STOP system fuel low"
   489 print "\n"
-    * set *tmp140 null
   490 jump *label71 always
   491 label *label70
   492 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   571 label *label75
   572 set *tmp144 *tmp148
   573 label *label73
-    * set *tmp140 *tmp144
   574 label *label71
   575 label *label69
   576 jump *label67 always
 
   611 print "W)"
   612 print "\n"
   613 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   614 jump *label86 always
   615 label *label85
   616 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   657 label *label92
   658 set *tmp190 *tmp196
   659 label *label88
-    * set *tmp181 *tmp190
   660 label *label86
   661 label *label84
   662 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   495 control enabled *tmp145 false
   496 print "STOP fuel low"
   497 print "\n"
-    * set *tmp144 null
   498 jump *label73 always
   499 label *label72
   500 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   568 label *label77
   569 set *tmp148 *tmp152
   570 label *label75
-    * set *tmp144 *tmp148
   571 label *label73
   572 label *label71
   573 label *label69
 
   626 print "\n"
   627 set *tmp193 null
   628 label *label90
-    * set *tmp190 *tmp193
   629 jump *label88 always
   630 label *label87
   631 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   652 label *label94
   653 set *tmp196 *tmp198
   654 label *label92
-    * set *tmp190 *tmp196
   655 label *label88
   656 label *label86
   657 label *label84

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   503 control enabled *tmp149 false
   504 print "STOP out of cryo"
   505 print "\n"
-    * set *tmp148 null
   506 jump *label75 always
   507 label *label74
   508 op lessThan *tmp151 :start_reactor:secs 30
 
   565 label *label82
   566 set *tmp152 *tmp164
   567 label *label77
-    * set *tmp148 *tmp152
   568 label *label75
   569 label *label73
   570 label *label71
 
   617 jump *label89 equal *tmp192 false
   618 print "WAIT fuel"
   619 print "\n"
-    * set *tmp193 null
   620 jump *label90 always
   621 label *label89
   622 print "WAIT system fuel"
   623 print "\n"
-    * set *tmp193 null
   624 label *label90
   625 jump *label88 always
   626 label *label87
 
   629 jump *label91 equal *tmp195 false
   630 print "WAIT buffer fuel"
   631 print "\n"
-    * set *tmp196 null
   632 jump *label92 always
   633 label *label91
   634 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   645 control enabled *tmp199 true
   646 set *tmp198 true
   647 label *label94
-    * set *tmp196 *tmp198
   648 label *label92
   649 label *label88
   650 label *label86

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   537 print "\n"
   538 set *tmp157 null
   539 label *label80
-    * set *tmp152 *tmp157
   540 jump *label77 always
   541 label *label76
   542 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   562 print "\n"
   563 set *tmp164 null
   564 label *label82
-    * set *tmp152 *tmp164
   565 label *label77
   566 label *label75
   567 label *label73
 
   633 jump *label93 equal *tmp197 false
   634 print "WAIT cryo"
   635 print "\n"
-    * set *tmp198 null
   636 jump *label94 always
   637 label *label93
   638 print "STARTUP"
 
   640 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   641 set *tmp199 :start_reactor:reactor
   642 control enabled *tmp199 true
-    * set *tmp198 true
   643 label *label94
   644 label *label92
   645 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   523 print "START FAIL battery"
   524 print "\n"
   525 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   526 jump *label80 always
   527 label *label79
   528 op sub *tmp160 30 :start_reactor:secs
 
   534 print :start_reactor:charge_req
   535 print "J"
   536 print "\n"
-    * set *tmp157 null
   537 label *label80
   538 jump *label77 always
   539 label *label76
 
   546 print "ABANDON - battery crit"
   547 print "\n"
   548 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   549 jump *label82 always
   550 label *label81
   551 op idiv *tmp167 :start_reactor:secs 6
 
   557 print " "
   558 print "mins"
   559 print "\n"
-    * set *tmp164 null
   560 label *label82
   561 label *label77
   562 label *label75

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-65 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :check_radar*retaddr *label10 (h:*label10)
    59 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    60 label *label10
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :check_radar*retval
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
    64 op equal *tmp11 *tmp10 false
 
    81 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
    82 call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
    83 label *label14
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 setaddr :calc_charge_req*retaddr *label15 (h:*label15)
    88 call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
    89 label *label15
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   90 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    91 set :calc_charge_req:reactor reactor3
    92 set :calc_charge_req:time :t_startup3
    93 setaddr :calc_charge_req*retaddr *label16 (h:*label16)
    94 call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
    95 label *label16
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor4
    98 set :calc_charge_req:time :t_startup4
    99 setaddr :calc_charge_req*retaddr *label17 (h:*label17)
   100 call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
   101 label *label17
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  102 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   103 set :calc_charge_req:reactor reactor5
   104 set :calc_charge_req:time :t_startup5
   105 setaddr :calc_charge_req*retaddr *label18 (h:*label18)
   106 call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
   107 label *label18
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+  108 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   109 set :start_reactor:reactor reactor1
   110 set :start_reactor:reactor_num 1
   111 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   114 setaddr :start_reactor*retaddr *label19 (h:*label19)
   115 call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
   116 label *label19
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  117 set :fuel_1 :start_reactor*retval
   118 set :t_startup1 .RET_T_STARTUP
   119 set :update_fuel:fuel :fuel_1
   120 set :update_fuel:uld_in .ULD_IN_1
 
   130 setaddr :start_reactor*retaddr *label21 (h:*label21)
   131 call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
   132 label *label21
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  133 set :fuel_2 :start_reactor*retval
   134 set :t_startup2 .RET_T_STARTUP
   135 set :update_fuel:fuel :fuel_2
   136 set :update_fuel:uld_in .ULD_IN_2
 
   142 setaddr :check_radar*retaddr *label23 (h:*label23)
   143 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   144 label *label23
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  145 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   146 set :start_reactor:reactor reactor3
   147 set :start_reactor:reactor_num 3
   148 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   151 setaddr :start_reactor*retaddr *label24 (h:*label24)
   152 call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
   153 label *label24
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  154 set :fuel_3 :start_reactor*retval
   155 set :t_startup3 .RET_T_STARTUP
   156 set :start_reactor:reactor reactor4
   157 set :start_reactor:reactor_num 4
 
   161 setaddr :start_reactor*retaddr *label25 (h:*label25)
   162 call *label3 *invalid :start_reactor*retval (m:*label25) (h:*label25)
   163 label *label25
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  164 set :fuel_4 :start_reactor*retval
   165 set :t_startup4 .RET_T_STARTUP
   166 set :start_reactor:reactor reactor5
   167 set :start_reactor:reactor_num 5
 
   171 setaddr :start_reactor*retaddr *label26 (h:*label26)
   172 call *label3 *invalid :start_reactor*retval (m:*label26) (h:*label26)
   173 label *label26
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  174 set :fuel_5 :start_reactor*retval
   175 set :t_startup5 .RET_T_STARTUP
   176 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  177 op or :fuel_many *tmp27 :fuel_5
   178 set :update_fuel:fuel :fuel_many
   179 set :update_fuel:uld_in .ULD_IN_MANY
   180 set :update_fuel:uld_out .ULD_OUT_MANY
 
   182 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   183 label *label27
   184 op or *tmp30 :fuel_1 :fuel_2
-    * op or *tmp31 *tmp30 :fuel_many
-    * set :throttle_blast:reactors_fueled *tmp31
+  185 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   186 set :throttle_blast:emerg_shutdown :emerg_shutdown
   187 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  188 op floor :throttle_blast:charge *tmp33
   189 sensor *tmp35 .NODE @powerNetIn
   190 sensor *tmp36 .NODE @powerNetOut
   191 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  192 op floor :throttle_blast:surplus *tmp37
+  193 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   194 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   195 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   196 op land *tmp42 *tmp40 *tmp41
 
   237 print "n"
   238 label *label34
   239 label *label30
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  240 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   241 jump *label28 always
   242 set *tmp32 null
   243 label *label28
 
   252 control config *tmp49 *tmp51
   253 sensor *tmp53 .NODE @powerNetStored
   254 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  255 op div :diff_generators:stored_pc *tmp53 *tmp54
   256 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   257 op lessThan *tmp57 .START_POWER_REQ 10
   258 op land *tmp58 *tmp56 *tmp57
 
   271 setaddr :kilo*retaddr *label40 (h:*label40)
   272 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   273 label *label40
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  274 set :surplus :kilo*retval
+  275 sensor :kilo:val .NODE @powerNetStored
   276 setaddr :kilo*retaddr *label41 (h:*label41)
   277 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   278 label *label41
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  279 set :charge :kilo*retval
   280 op greaterThan *tmp67 .START_POWER_REQ 0
   281 jump *label42 equal *tmp67 false
   282 set :kilo:val .START_POWER_REQ
   283 setaddr :kilo*retaddr *label44 (h:*label44)
   284 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   285 label *label44
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  286 set :req :kilo*retval
   287 print "Req "
   288 print :req
   289 print "kJ / "
 
   302 print "\n"
   303 sensor *tmp71 .NODE @powerNetStored
   304 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  305 op div :update_reactors_desired:stored *tmp71 *tmp72
   306 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   307 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   308 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   325 jump *label50 equal *tmp84 false
   326 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   327 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  328 op max :update_reactors_desired:needed 1 *tmp87
   329 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  330 op min .REACTORS_DESIRED 5 *tmp89
   331 jump *label51 always
   332 label *label50
   333 label *label51
 
   349 end
   350 label *label0
   351 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  352 op div :kilo*retval *tmp93 10
   353 jump *label54 always
   354 set :kilo*retval null
   355 label *label54
 
   378 end
   379 label *label2
   380 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  381 op idiv :calc_charge_req:secs *tmp102 60
   382 op greaterThan *tmp104 :calc_charge_req:secs 30
   383 sensor *tmp105 :calc_charge_req:reactor @enabled
   384 op equal *tmp106 *tmp105 false
 
   389 jump *label62 always
   390 label *label61
   391 label *label62
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  392 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   393 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   394 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  395 op floor :calc_charge_req:charge_req *tmp111
   396 set :calc_charge_req*retval :calc_charge_req:charge_req
   397 jump *label60 always
   398 set :calc_charge_req*retval null
 
   402 label *label3
   403 set .RET_T_STARTUP :start_reactor:t_startup
   404 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  405 op idiv :start_reactor:secs *tmp113 60
+  406 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   407 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  408 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  409 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   410 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  411 op floor :start_reactor:charge *tmp118
   412 sensor *tmp120 .NODE @powerNetIn
   413 sensor *tmp121 .NODE @powerNetOut
   414 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  415 op floor :start_reactor:surplus *tmp122
   416 op mul *tmp124 .AVG_SURPLUS 0.8
   417 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  418 op add .AVG_SURPLUS *tmp124 *tmp125
+  419 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   420 print "#"
   421 print :start_reactor:reactor_num
   422 print " "
   423 print "- "
   424 jump *label64 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  425 control enabled :start_reactor:reactor false
   426 print "emergency mode"
   427 print "\n"
   428 set :start_reactor:supply_fuel false
 
   431 jump *label66 equal :start_reactor:enabled false
   432 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   433 jump *label68 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  434 control enabled :start_reactor:reactor false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label69 always
 
   441 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   442 op land *tmp139 *tmp136 *tmp138
   443 jump *label70 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  444 control enabled :start_reactor:reactor false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label71 always
   448 label *label70
   449 op lessThanEq *tmp143 :start_reactor:fuel 1
   450 jump *label72 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  451 control enabled :start_reactor:reactor false
   452 print "STOP fuel low"
   453 print "\n"
   454 jump *label73 always
   455 label *label72
   456 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   457 jump *label74 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  458 control enabled :start_reactor:reactor false
   459 print "STOP out of cryo"
   460 print "\n"
   461 jump *label75 always
 
   473 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   474 op land *tmp156 *tmp154 *tmp155
   475 jump *label79 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  476 control enabled :start_reactor:reactor false
   477 print "START FAIL battery"
   478 print "\n"
   479 set :start_reactor:supply_fuel false
   480 jump *label80 always
   481 label *label79
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  482 op sub :start_reactor:time_left 30 :start_reactor:secs
   483 print "Starting "
   484 print :start_reactor:time_left
   485 print " "
 
   494 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   495 op land *tmp163 *tmp161 *tmp162
   496 jump *label81 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  497 control enabled :start_reactor:reactor false
   498 print "ABANDON - battery crit"
   499 print "\n"
   500 set :start_reactor:supply_fuel false
   501 jump *label82 always
   502 label *label81
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  503 op idiv :start_reactor:mins :start_reactor:secs 6
+  504 op div :start_reactor:mins :start_reactor:mins 10
   505 print "RUN "
   506 print :start_reactor:mins
   507 print " "
 
   518 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   519 op sub *tmp170 *tmp169 .PWR_ABORT
   520 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  521 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   522 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  523 op max :start_reactor:flow_units -0.1 *tmp173
   524 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  525 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   526 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   527 jump *label83 equal *tmp177 false
   528 print "IDLE"
 
   535 jump *label85 equal *tmp180 false
   536 op mul *tmp182 :start_reactor:flow_units 1000
   537 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  538 op div :start_reactor:flow *tmp183 10
   539 op mul *tmp185 :start_reactor:charge_units 1000
   540 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  541 op div :start_reactor:charge *tmp186 10
   542 print "WAIT power. (%"
   543 print :start_reactor:charge
   544 print "J + %"
 
   579 print "STARTUP"
   580 print "\n"
   581 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  582 control enabled :start_reactor:reactor true
   583 label *label94
   584 label *label92
   585 label *label88
 
   590 sensor *tmp201 :start_reactor:reactor @enabled
   591 op notEqual *tmp202 :start_reactor:enabled *tmp201
   592 jump *label95 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  593 set .RET_T_STARTUP @tick
   594 jump *label96 always
   595 label *label95
   596 label *label96
 
   601 return :start_reactor*retaddr
   602 end
   603 label *label4
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  604 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   605 op notEqual *tmp206 :check_radar:enemy_found null
   606 jump *label98 equal *tmp206 false
   607 control enabled projector1 true
   608 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  609 control config .ULD_IN_1 .FUEL_OFF
+  610 control config .ULD_OUT_1 .FUEL
+  611 control config .ULD_IN_2 .FUEL_OFF
+  612 control config .ULD_OUT_2 .FUEL
+  613 control config .ULD_IN_MANY .FUEL_OFF
+  614 control config .ULD_OUT_MANY .FUEL
+  615 control config .ULD_MIXER .FUEL_OFF
   616 control enabled reactor1 false
   617 control enabled reactor2 false
   618 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   212 label *label32
   213 jump *label30 always
   214 label *label29
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp46 false
+  215 jump *label33 notEqual :throttle_blast:reactors_fueled false
   216 set :throttle_blast:limit .FUEL_LIMIT_LOW
   217 print "Fuel "
   218 print :throttle_blast:fuel_stored
 
   274 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   275 label *label41
   276 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label42 equal *tmp67 false
+  277 jump *label42 lessThanEq .START_POWER_REQ 0
   278 set :kilo:val .START_POWER_REQ
   279 setaddr :kilo*retaddr *label44 (h:*label44)
   280 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
 
   304 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   305 op land *tmp77 *tmp74 *tmp76
   306 jump *label46 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label48 equal *tmp79 false
+  307 jump *label48 lessThanEq .REACTORS_DESIRED 2
   308 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   309 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   310 jump *label49 always
 
   328 label *label51
   329 label *label45
   330 label *label43
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label52 equal *tmp91 false
+  331 jump *label52 equal .REACTORS_DESIRED 5
   332 print "Require only "
   333 print .REACTORS_DESIRED
   334 print "/5 reactors."
 
   359 label *label57
   360 control config *tmp95 *tmp97
   361 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label58 equal *tmp100 false
+  362 jump *label58 notEqual :update_fuel:fuel false
   363 set *tmp101 .FUEL
   364 jump *label59 always
   365 label *label58
 
   422 jump *label65 always
   423 label *label64
   424 jump *label66 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label68 equal *tmp132 false
+  425 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   426 control enabled :start_reactor:reactor false
   427 print "STOP unwanted"
   428 print "\n"
 
   438 print "\n"
   439 jump *label71 always
   440 label *label70
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label72 equal *tmp143 false
+  441 jump *label72 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label73 always
   446 label *label72
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label74 equal *tmp147 false
+  447 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label75 always
   452 label *label74
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label76 equal *tmp151 false
+  453 jump *label76 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
 
   512 op max :start_reactor:flow_units -0.1 *tmp173
   513 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label83 equal *tmp177 false
+  515 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label84 always
   520 label *label83
   521 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label85 equal *tmp180 false
+  522 jump *label85 greaterThanEq *tmp179 1
   523 op mul *tmp182 :start_reactor:flow_units 1000
   524 op floor *tmp183 *tmp182
   525 op div :start_reactor:flow *tmp183 10
 
   539 op land *tmp189 :start_reactor:fuel_on *tmp188
   540 jump *label87 equal *tmp189 false
   541 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label89 equal *tmp192 false
+  542 jump *label89 lessThanEq *tmp191 .FUEL_REQ
   543 print "WAIT fuel"
   544 print "\n"
   545 jump *label90 always
 
   550 jump *label88 always
   551 label *label87
   552 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label91 equal *tmp195 false
+  553 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
   554 print "WAIT buffer fuel"
   555 print "\n"
   556 jump *label92 always
   557 label *label91
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label93 equal *tmp197 false
+  558 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   559 print "WAIT cryo"
   560 print "\n"
   561 jump *label94 always
 
   572 label *label67
   573 label *label65
   574 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label95 equal *tmp202 false
+  575 jump *label95 equal :start_reactor:enabled *tmp201
   576 set .RET_T_STARTUP @tick
   577 jump *label96 always
   578 label *label95
 
   585 end
   586 label *label4
   587 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label98 equal *tmp206 false
+  588 jump *label98 equal :check_radar:enemy_found null
   589 control enabled projector1 true
   590 control enabled projector2 true
   591 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   306 jump *label48 lessThanEq .REACTORS_DESIRED 2
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label49 always
   309 label *label48
   310 label *label49
-    * jump *label47 always
   311 label *label46
   312 label *label47
   313 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   320 op max :update_reactors_desired:needed 1 *tmp87
   321 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   322 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label51 always
   323 label *label50
   324 label *label51
   325 label *label45
 
   329 print .REACTORS_DESIRED
   330 print "/5 reactors."
   331 print "\n"
-    * jump *label53 always
   332 label *label52
   333 label *label53
   334 printflush message1
 
   374 jump *label61 equal *tmp107 false
   375 set :calc_charge_req*retval 0
   376 jump *label60 always
-    * jump *label62 always
   377 label *label61
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   568 sensor *tmp201 :start_reactor:reactor @enabled
   569 jump *label95 equal :start_reactor:enabled *tmp201
   570 set .RET_T_STARTUP @tick
-    * jump *label96 always
   571 label *label95
   572 label *label96
   573 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   380 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  381 op idiv :calc_charge_req:charge_req *tmp110 0.04
   382 set :calc_charge_req*retval :calc_charge_req:charge_req
   383 jump *label60 always
   384 set :calc_charge_req*retval null
 
   513 label *label83
   514 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   515 jump *label85 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  516 op idiv *tmp183 :start_reactor:flow_units 0.001
   517 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  518 op idiv *tmp186 :start_reactor:charge_units 0.001
   519 op div :start_reactor:charge *tmp186 10
   520 print "WAIT power. (%"
   521 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 setaddr :check_radar*retaddr *label10 (h:*label10)
    57 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    58 label *label10
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :check_radar*retval *tmp8
    75 set :calc_charge_req:reactor reactor1
    76 set :calc_charge_req:time :t_startup1
    77 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
 
   112 label *label19
   113 set :fuel_1 :start_reactor*retval
   114 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  115 set :update_fuel:fuel :start_reactor*retval
+  116 set :update_fuel:uld_in unloader1
+  117 set :update_fuel:uld_out unloader2
   118 setaddr :update_fuel*retaddr *label20 (h:*label20)
   119 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   120 label *label20
 
   128 label *label21
   129 set :fuel_2 :start_reactor*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  131 set :update_fuel:fuel :start_reactor*retval
+  132 set :update_fuel:uld_in unloader3
+  133 set :update_fuel:uld_out unloader4
   134 setaddr :update_fuel*retaddr *label22 (h:*label22)
   135 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   136 label *label22
-    * set :check_radar:unit .TOWER
+  137 set :check_radar:unit cyclone1
   138 setaddr :check_radar*retaddr *label23 (h:*label23)
   139 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   140 label *label23
 
   170 set :fuel_5 :start_reactor*retval
   171 set :t_startup5 .RET_T_STARTUP
   172 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  173 op or :fuel_many *tmp27 :start_reactor*retval
   174 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  175 set :update_fuel:uld_in unloader5
+  176 set :update_fuel:uld_out unloader6
   177 setaddr :update_fuel*retaddr *label27 (h:*label27)
   178 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   179 label *label27
   180 op or *tmp30 :fuel_1 :fuel_2
   181 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   182 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  183 sensor *tmp33 node1 @powerNetStored
   184 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  185 sensor *tmp35 node1 @powerNetIn
+  186 sensor *tmp36 node1 @powerNetOut
   187 op sub *tmp37 *tmp35 *tmp36
   188 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  189 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  190 op lessThan *tmp40 :throttle_blast:charge 5000
+  191 op lessThan *tmp41 :throttle_blast:surplus -500
   192 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  193 op or *tmp43 *tmp42 :emerg_shutdown
   194 jump *label29 equal *tmp43 false
   195 set :throttle_blast:limit 0
   196 print "Central Fuel at "
   197 print :throttle_blast:fuel_stored
   198 print " "
   199 print "/ "
-    * print :throttle_blast:limit
+  200 print 0
   201 print " "
   202 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  203 jump *label31 equal :emerg_shutdown false
   204 print " Enemies detected."
   205 print "\n"
   206 jump *label32 always
 
   211 jump *label30 always
   212 label *label29
   213 jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  214 set :throttle_blast:limit 150
   215 print "Fuel "
   216 print :throttle_blast:fuel_stored
   217 print " "
   218 print "/ "
-    * print :throttle_blast:limit
+  219 print .FUEL_LIMIT_LOW
   220 print " "
   221 print "(due to emergency)"
   222 print "\n"
   223 jump *label34 always
   224 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  225 set :throttle_blast:limit 800
   226 print "Fuel "
   227 print :throttle_blast:fuel_stored
   228 print " "
   229 print "/ "
-    * print :throttle_blast:limit
+  230 print .FUEL_LIMIT
   231 print "\"
   232 print "n"
   233 label *label34
   234 label *label30
   235 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   236 jump *label28 always
-    * set *tmp32 null
   237 label *label28
   238 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  239 set *tmp49 unloader7
+  240 jump *label35 equal *tmp32 false
+  241 set *tmp51 @pyratite
   242 jump *label36 always
   243 label *label35
-    * set *tmp51 .FUEL_OFF
+  244 set *tmp51 @scrap
   245 label *label36
-    * control config *tmp49 *tmp51
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  246 control config .ULD_MIXER *tmp51
+  247 sensor *tmp53 node1 @powerNetStored
+  248 sensor *tmp54 node1 @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp53 *tmp54
   250 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   251 op lessThan *tmp57 .START_POWER_REQ 10
 
   266 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   267 label *label40
   268 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  269 sensor :kilo:val node1 @powerNetStored
   270 setaddr :kilo*retaddr *label41 (h:*label41)
   271 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   272 label *label41
 
   278 label *label44
   279 set :req :kilo*retval
   280 print "Req "
-    * print :req
+  281 print :kilo*retval
   282 print "kJ / "
   283 print :charge
   284 print "kJ. "
 
   290 print "Power "
   291 print :surplus
   292 print "kW, "
-    * print :charge
+  293 print :kilo*retval
   294 print "kJ"
   295 print "\n"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  296 sensor *tmp71 node1 @powerNetStored
+  297 sensor *tmp72 node1 @powerNetCapacity
   298 op div :update_reactors_desired:stored *tmp71 *tmp72
   299 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  300 op add *tmp75 6500 10000
+  301 op greaterThan *tmp76 .AVG_SURPLUS 16500
   302 op land *tmp77 *tmp74 *tmp76
   303 jump *label46 equal *tmp77 false
   304 jump *label48 lessThanEq .REACTORS_DESIRED 2
   305 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  306 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   307 label *label48
   308 label *label49
   309 label *label46
   310 label *label47
   311 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  312 op mul *tmp82 10000 0.8
+  313 op lessThan *tmp83 .AVG_SURPLUS 8000
   314 op land *tmp84 *tmp81 *tmp83
   315 jump *label50 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  316 op sub *tmp86 .AVG_SURPLUS 10000
+  317 op idiv *tmp87 *tmp86 6500
   318 op max :update_reactors_desired:needed 1 *tmp87
   319 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   320 op min .REACTORS_DESIRED 5 *tmp89
 
   338 op idiv *tmp93 :kilo:val 100
   339 op div :kilo*retval *tmp93 10
   340 jump *label54 always
-    * set :kilo*retval null
   341 label *label54
   342 return :kilo*retaddr
   343 end
 
   349 label *label56
   350 set *tmp97 .FUEL_OFF
   351 label *label57
-    * control config *tmp95 *tmp97
+  352 control config :update_fuel:uld_in *tmp97
   353 set *tmp98 :update_fuel:uld_out
   354 jump *label58 notEqual :update_fuel:fuel false
   355 set *tmp101 .FUEL
 
   357 label *label58
   358 set *tmp101 .FUEL_OFF
   359 label *label59
-    * control config *tmp98 *tmp101
+  360 control config :update_fuel:uld_out *tmp101
   361 label *label55
   362 return :update_fuel*retaddr
   363 end
 
   378 op idiv :calc_charge_req:charge_req *tmp110 0.04
   379 set :calc_charge_req*retval :calc_charge_req:charge_req
   380 jump *label60 always
-    * set :calc_charge_req*retval null
   381 label *label60
   382 return :calc_charge_req*retaddr
   383 end
 
   446 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   447 label *label78
   448 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  449 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   450 op lessThan *tmp154 *tmp153 .PWR_ABORT
   451 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   452 op land *tmp156 *tmp154 *tmp155
 
   462 print :start_reactor:time_left
   463 print " "
   464 print "secs, req "
-    * print :start_reactor:charge_req
+  465 print :calc_charge_req*retval
   466 print "J"
   467 print "\n"
   468 label *label80
 
   565 label *label96
   566 set :start_reactor*retval :start_reactor:supply_fuel
   567 jump *label63 always
-    * set :start_reactor*retval null
   568 label *label63
   569 return :start_reactor*retaddr
   570 end
 
   587 control enabled reactor5 false
   588 set :check_radar*retval true
   589 jump *label97 always
-    * set *tmp207 null
   590 jump *label99 always
   591 label *label98
   592 control enabled projector1 false
   593 control enabled projector2 false
   594 set :check_radar*retval false
   595 jump *label97 always
-    * set *tmp207 null
   596 label *label99
-    * set :check_radar*retval *tmp207
+  597 set :check_radar*retval null
   598 label *label97
   599 return :check_radar*retaddr
   600 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-15 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 setaddr :check_radar*retaddr *label10 (h:*label10)
    53 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    54 label *label10
-    * set :emerg_shutdown :check_radar*retval
    55 op notEqual *tmp9 switch1 null
    56 sensor *tmp10 switch1 @enabled
    57 op equal *tmp11 *tmp10 false
 
   174 label *label27
   175 op or *tmp30 :fuel_1 :fuel_2
   176 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   177 sensor *tmp33 node1 @powerNetStored
   178 op floor :throttle_blast:charge *tmp33
   179 sensor *tmp35 node1 @powerNetIn
 
   210 print :throttle_blast:fuel_stored
   211 print " "
   212 print "/ "
-    * print .FUEL_LIMIT_LOW
+  213 print 150
   214 print " "
   215 print "(due to emergency)"
   216 print "\n"
 
   221 print :throttle_blast:fuel_stored
   222 print " "
   223 print "/ "
-    * print .FUEL_LIMIT
+  224 print 800
   225 print "\"
   226 print "n"
   227 label *label34
 
   229 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   230 jump *label28 always
   231 label *label28
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   232 jump *label35 equal *tmp32 false
   233 set *tmp51 @pyratite
   234 jump *label36 always
   235 label *label35
   236 set *tmp51 @scrap
   237 label *label36
-    * control config .ULD_MIXER *tmp51
+  238 control config unloader7 *tmp51
   239 sensor *tmp53 node1 @powerNetStored
   240 sensor *tmp54 node1 @powerNetCapacity
   241 op div :diff_generators:stored_pc *tmp53 *tmp54
 
   268 setaddr :kilo*retaddr *label44 (h:*label44)
   269 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   270 label *label44
-    * set :req :kilo*retval
   271 print "Req "
   272 print :kilo*retval
   273 print "kJ / "
 
   288 sensor *tmp72 node1 @powerNetCapacity
   289 op div :update_reactors_desired:stored *tmp71 *tmp72
   290 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   291 op greaterThan *tmp76 .AVG_SURPLUS 16500
   292 op land *tmp77 *tmp74 *tmp76
   293 jump *label46 equal *tmp77 false
 
   299 label *label46
   300 label *label47
   301 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   302 op lessThan *tmp83 .AVG_SURPLUS 8000
   303 op land *tmp84 *tmp81 *tmp83
   304 jump *label50 equal *tmp84 false
 
   331 return :kilo*retaddr
   332 end
   333 label *label1
-    * set *tmp95 :update_fuel:uld_in
   334 jump *label56 equal :update_fuel:fuel false
   335 set *tmp97 .FUEL
   336 jump *label57 always
 
   338 set *tmp97 .FUEL_OFF
   339 label *label57
   340 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   341 jump *label58 notEqual :update_fuel:fuel false
   342 set *tmp101 .FUEL
   343 jump *label59 always
 
   432 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
   433 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   434 label *label78
-    * set :start_reactor:charge_req :calc_charge_req*retval
   435 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   436 op lessThan *tmp154 *tmp153 .PWR_ABORT
   437 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   580 set :check_radar*retval false
   581 jump *label97 always
   582 label *label99
-    * set :check_radar*retval null
   583 label *label97
   584 return :check_radar*retaddr
   585 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-12 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp231 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
   222 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   223 jump *label28 always
   224 label *label28
-    * jump *label35 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label36 always
-    * label *label35
-    * set *tmp51 @scrap
-    * label *label36
+  225 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   226 control config unloader7 *tmp51
   227 sensor *tmp53 node1 @powerNetStored
   228 sensor *tmp54 node1 @powerNetCapacity
 
   319 return :kilo*retaddr
   320 end
   321 label *label1
-    * jump *label56 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label57 always
-    * label *label56
-    * set *tmp97 .FUEL_OFF
-    * label *label57
+  322 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   323 control config :update_fuel:uld_in *tmp97
-    * jump *label58 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label59 always
-    * label *label58
-    * set *tmp101 .FUEL_OFF
-    * label *label59
+  324 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   325 control config :update_fuel:uld_out *tmp101
   326 label *label55
   327 return :update_fuel*retaddr
 
   522 label *label84
   523 label *label67
   524 label *label65
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label95 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
-    * label *label95
-    * label *label96
+  525 sensor *tmp201 :start_reactor:reactor @enabled
+  526 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   527 set :start_reactor*retval :start_reactor:supply_fuel
   528 jump *label63 always
   529 label *label63

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   242 label *label39
   243 label *label37
   244 set :kilo:val .AVG_SURPLUS
-    * setaddr :kilo*retaddr *label40 (h:*label40)
-    * call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
-    * label *label40
+  245 label *label100
+  246 op idiv *tmp93 :kilo:val 100
+  247 op div :kilo*retval *tmp93 10
+  248 jump *label101 always
+  249 label *label101
   250 set :surplus :kilo*retval
   251 sensor :kilo:val node1 @powerNetStored
-    * setaddr :kilo*retaddr *label41 (h:*label41)
-    * call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
-    * label *label41
+  252 label *label102
+  253 op idiv *tmp93 :kilo:val 100
+  254 op div :kilo*retval *tmp93 10
+  255 jump *label103 always
+  256 label *label103
   257 set :charge :kilo*retval
   258 jump *label42 lessThanEq .START_POWER_REQ 0
   259 set :kilo:val .START_POWER_REQ
-    * setaddr :kilo*retaddr *label44 (h:*label44)
-    * call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
-    * label *label44
+  260 label *label104
+  261 op idiv *tmp93 :kilo:val 100
+  262 op div :kilo*retval *tmp93 10
+  263 jump *label105 always
+  264 label *label105
   265 print "Req "
   266 print :kilo*retval
   267 print "kJ / "
 
   317 jump *label7 always
   318 label *label9
   319 end
-    * label *label0
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label54 always
-    * label *label54
-    * return :kilo*retaddr
-    * end
   320 label *label1
   321 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   322 control config :update_fuel:uld_in *tmp97

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   243 label *label37
   244 set :kilo:val .AVG_SURPLUS
   245 label *label100
-    * op idiv *tmp93 :kilo:val 100
+  246 op idiv *tmp93 .AVG_SURPLUS 100
   247 op div :kilo*retval *tmp93 10
   248 jump *label101 always
   249 label *label101
 
   258 jump *label42 lessThanEq .START_POWER_REQ 0
   259 set :kilo:val .START_POWER_REQ
   260 label *label104
-    * op idiv *tmp93 :kilo:val 100
+  261 op idiv *tmp93 .START_POWER_REQ 100
   262 op div :kilo*retval *tmp93 10
   263 jump *label105 always
   264 label *label105

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   241 control enabled generator2 true
   242 label *label39
   243 label *label37
-    * set :kilo:val .AVG_SURPLUS
   244 label *label100
   245 op idiv *tmp93 .AVG_SURPLUS 100
   246 op div :kilo*retval *tmp93 10
 
   255 label *label103
   256 set :charge :kilo*retval
   257 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   258 label *label104
   259 op idiv *tmp93 .START_POWER_REQ 100
   260 op div :kilo*retval *tmp93 10

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
   103 set :update_fuel:fuel :start_reactor*retval
   104 set :update_fuel:uld_in unloader1
   105 set :update_fuel:uld_out unloader2
-    * setaddr :update_fuel*retaddr *label20 (h:*label20)
-    * call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
-    * label *label20
+  106 label *label106
+  107 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  108 control config :update_fuel:uld_in *tmp97
+  109 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  110 control config :update_fuel:uld_out *tmp101
+  111 label *label107
   112 set :start_reactor:reactor reactor2
   113 set :start_reactor:reactor_num 2
   114 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   122 set :update_fuel:fuel :start_reactor*retval
   123 set :update_fuel:uld_in unloader3
   124 set :update_fuel:uld_out unloader4
-    * setaddr :update_fuel*retaddr *label22 (h:*label22)
-    * call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
-    * label *label22
+  125 label *label108
+  126 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  127 control config :update_fuel:uld_in *tmp97
+  128 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  129 control config :update_fuel:uld_out *tmp101
+  130 label *label109
   131 set :check_radar:unit cyclone1
   132 setaddr :check_radar*retaddr *label23 (h:*label23)
   133 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   168 set :update_fuel:fuel :fuel_many
   169 set :update_fuel:uld_in unloader5
   170 set :update_fuel:uld_out unloader6
-    * setaddr :update_fuel*retaddr *label27 (h:*label27)
-    * call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
-    * label *label27
+  171 label *label110
+  172 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  173 control config :update_fuel:uld_in *tmp97
+  174 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  175 control config :update_fuel:uld_out *tmp101
+  176 label *label111
   177 op or *tmp30 :fuel_1 :fuel_2
   178 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   179 sensor *tmp33 node1 @powerNetStored
 
   324 jump *label7 always
   325 label *label9
   326 end
-    * label *label1
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
-    * label *label55
-    * return :update_fuel*retaddr
-    * end
   327 label *label2
   328 op sub *tmp102 @tick :calc_charge_req:time
   329 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   104 set :update_fuel:uld_in unloader1
   105 set :update_fuel:uld_out unloader2
   106 label *label106
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  107 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  108 control config unloader1 *tmp97
+  109 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  110 control config unloader2 *tmp101
   111 label *label107
   112 set :start_reactor:reactor reactor2
   113 set :start_reactor:reactor_num 2
 
   123 set :update_fuel:uld_in unloader3
   124 set :update_fuel:uld_out unloader4
   125 label *label108
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  126 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  127 control config unloader3 *tmp97
+  128 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  129 control config unloader4 *tmp101
   130 label *label109
   131 set :check_radar:unit cyclone1
   132 setaddr :check_radar*retaddr *label23 (h:*label23)
 
   169 set :update_fuel:uld_in unloader5
   170 set :update_fuel:uld_out unloader6
   171 label *label110
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  172 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
+  173 control config unloader5 *tmp97
+  174 select *tmp101 equal :fuel_many false @blast-compound @scrap
+  175 control config unloader6 *tmp101
   176 label *label111
   177 op or *tmp30 :fuel_1 :fuel_2
   178 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   100 label *label19
   101 set :fuel_1 :start_reactor*retval
   102 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
   103 label *label106
   104 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   105 control config unloader1 *tmp97
 
   116 label *label21
   117 set :fuel_2 :start_reactor*retval
   118 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   119 label *label108
   120 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   121 control config unloader3 *tmp97
 
   159 set :t_startup5 .RET_T_STARTUP
   160 op or *tmp27 :fuel_3 :fuel_4
   161 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   162 label *label110
   163 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   164 control config unloader5 *tmp97

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    42 set .CONTAINER vault1
    43 set .NODE node1
    44 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label10 (h:*label10)
-    * call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
-    * label *label10
+   45 label *label112
+   46 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   47 jump *label113 equal :check_radar:enemy_found null
+   48 control enabled projector1 true
+   49 control enabled projector2 true
+   50 control config .ULD_IN_1 .FUEL_OFF
+   51 control config .ULD_OUT_1 .FUEL
+   52 control config .ULD_IN_2 .FUEL_OFF
+   53 control config .ULD_OUT_2 .FUEL
+   54 control config .ULD_IN_MANY .FUEL_OFF
+   55 control config .ULD_OUT_MANY .FUEL
+   56 control config .ULD_MIXER .FUEL_OFF
+   57 control enabled reactor1 false
+   58 control enabled reactor2 false
+   59 control enabled reactor3 false
+   60 control enabled reactor4 false
+   61 control enabled reactor5 false
+   62 set :check_radar*retval true
+   63 jump *label115 always
+   64 jump *label114 always
+   65 label *label113
+   66 control enabled projector1 false
+   67 control enabled projector2 false
+   68 set :check_radar*retval false
+   69 jump *label115 always
+   70 label *label114
+   71 label *label115
    72 op notEqual *tmp9 switch1 null
    73 sensor *tmp10 switch1 @enabled
    74 op equal *tmp11 *tmp10 false
 
   147 control config unloader4 *tmp101
   148 label *label109
   149 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label23 (h:*label23)
-    * call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
-    * label *label23
+  150 label *label116
+  151 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  152 jump *label117 equal :check_radar:enemy_found null
+  153 control enabled projector1 true
+  154 control enabled projector2 true
+  155 control config .ULD_IN_1 .FUEL_OFF
+  156 control config .ULD_OUT_1 .FUEL
+  157 control config .ULD_IN_2 .FUEL_OFF
+  158 control config .ULD_OUT_2 .FUEL
+  159 control config .ULD_IN_MANY .FUEL_OFF
+  160 control config .ULD_OUT_MANY .FUEL
+  161 control config .ULD_MIXER .FUEL_OFF
+  162 control enabled reactor1 false
+  163 control enabled reactor2 false
+  164 control enabled reactor3 false
+  165 control enabled reactor4 false
+  166 control enabled reactor5 false
+  167 set :check_radar*retval true
+  168 jump *label119 always
+  169 jump *label118 always
+  170 label *label117
+  171 control enabled projector1 false
+  172 control enabled projector2 false
+  173 set :check_radar*retval false
+  174 jump *label119 always
+  175 label *label118
+  176 label *label119
   177 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   178 set :start_reactor:reactor reactor3
   179 set :start_reactor:reactor_num 3
 
   566 label *label63
   567 return :start_reactor*retaddr
   568 end
-    * label *label4
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label98 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label97 always
-    * jump *label99 always
-    * label *label98
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label97 always
-    * label *label99
-    * label *label97
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    43 set .NODE node1
    44 set :check_radar:unit cyclone1
    45 label *label112
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   46 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    47 jump *label113 equal :check_radar:enemy_found null
    48 control enabled projector1 true
    49 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   50 control config unloader1 @scrap
+   51 control config unloader2 @blast-compound
+   52 control config unloader3 @scrap
+   53 control config unloader4 @blast-compound
+   54 control config unloader5 @scrap
+   55 control config unloader6 @blast-compound
+   56 control config unloader7 @scrap
    57 control enabled reactor1 false
    58 control enabled reactor2 false
    59 control enabled reactor3 false
 
   148 label *label109
   149 set :check_radar:unit cyclone1
   150 label *label116
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  151 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   152 jump *label117 equal :check_radar:enemy_found null
   153 control enabled projector1 true
   154 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  155 control config unloader1 @scrap
+  156 control config unloader2 @blast-compound
+  157 control config unloader3 @scrap
+  158 control config unloader4 @blast-compound
+  159 control config unloader5 @scrap
+  160 control config unloader6 @blast-compound
+  161 control config unloader7 @scrap
   162 control enabled reactor1 false
   163 control enabled reactor2 false
   164 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    30 set .REACTORS_DESIRED 5
    31 set .AVG_SURPLUS 500
    32 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    33 set .CONTAINER vault1
    34 set .NODE node1
-    * set :check_radar:unit cyclone1
    35 label *label112
    36 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    37 jump *label113 equal :check_radar:enemy_found null
 
   136 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   137 control config unloader4 *tmp101
   138 label *label109
-    * set :check_radar:unit cyclone1
   139 label *label116
   140 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   141 jump *label117 equal :check_radar:enemy_found null

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    76 op or :emerg_shutdown :check_radar*retval *tmp8
    77 set :calc_charge_req:reactor reactor1
    78 set :calc_charge_req:time :t_startup1
-    * setaddr :calc_charge_req*retaddr *label14 (h:*label14)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
-    * label *label14
+   79 label *label120
+   80 op sub *tmp102 @tick :calc_charge_req:time
+   81 op idiv :calc_charge_req:secs *tmp102 60
+   82 op greaterThan *tmp104 :calc_charge_req:secs 30
+   83 sensor *tmp105 :calc_charge_req:reactor @enabled
+   84 op equal *tmp106 *tmp105 false
+   85 op or *tmp107 *tmp104 *tmp106
+   86 jump *label121 equal *tmp107 false
+   87 set :calc_charge_req*retval 0
+   88 jump *label123 always
+   89 label *label121
+   90 label *label122
+   91 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   92 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+   93 op idiv :calc_charge_req:charge_req *tmp110 0.04
+   94 set :calc_charge_req*retval :calc_charge_req:charge_req
+   95 jump *label123 always
+   96 label *label123
    97 set .START_POWER_REQ :calc_charge_req*retval
    98 set :calc_charge_req:reactor reactor2
    99 set :calc_charge_req:time :t_startup2
-    * setaddr :calc_charge_req*retaddr *label15 (h:*label15)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
-    * label *label15
+  100 label *label124
+  101 op sub *tmp102 @tick :calc_charge_req:time
+  102 op idiv :calc_charge_req:secs *tmp102 60
+  103 op greaterThan *tmp104 :calc_charge_req:secs 30
+  104 sensor *tmp105 :calc_charge_req:reactor @enabled
+  105 op equal *tmp106 *tmp105 false
+  106 op or *tmp107 *tmp104 *tmp106
+  107 jump *label125 equal *tmp107 false
+  108 set :calc_charge_req*retval 0
+  109 jump *label127 always
+  110 label *label125
+  111 label *label126
+  112 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  113 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  114 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  115 set :calc_charge_req*retval :calc_charge_req:charge_req
+  116 jump *label127 always
+  117 label *label127
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   119 set :calc_charge_req:reactor reactor3
   120 set :calc_charge_req:time :t_startup3
-    * setaddr :calc_charge_req*retaddr *label16 (h:*label16)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
-    * label *label16
+  121 label *label128
+  122 op sub *tmp102 @tick :calc_charge_req:time
+  123 op idiv :calc_charge_req:secs *tmp102 60
+  124 op greaterThan *tmp104 :calc_charge_req:secs 30
+  125 sensor *tmp105 :calc_charge_req:reactor @enabled
+  126 op equal *tmp106 *tmp105 false
+  127 op or *tmp107 *tmp104 *tmp106
+  128 jump *label129 equal *tmp107 false
+  129 set :calc_charge_req*retval 0
+  130 jump *label131 always
+  131 label *label129
+  132 label *label130
+  133 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  134 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  135 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  136 set :calc_charge_req*retval :calc_charge_req:charge_req
+  137 jump *label131 always
+  138 label *label131
   139 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   140 set :calc_charge_req:reactor reactor4
   141 set :calc_charge_req:time :t_startup4
-    * setaddr :calc_charge_req*retaddr *label17 (h:*label17)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
-    * label *label17
+  142 label *label132
+  143 op sub *tmp102 @tick :calc_charge_req:time
+  144 op idiv :calc_charge_req:secs *tmp102 60
+  145 op greaterThan *tmp104 :calc_charge_req:secs 30
+  146 sensor *tmp105 :calc_charge_req:reactor @enabled
+  147 op equal *tmp106 *tmp105 false
+  148 op or *tmp107 *tmp104 *tmp106
+  149 jump *label133 equal *tmp107 false
+  150 set :calc_charge_req*retval 0
+  151 jump *label135 always
+  152 label *label133
+  153 label *label134
+  154 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  155 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  156 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  157 set :calc_charge_req*retval :calc_charge_req:charge_req
+  158 jump *label135 always
+  159 label *label135
   160 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   161 set :calc_charge_req:reactor reactor5
   162 set :calc_charge_req:time :t_startup5
-    * setaddr :calc_charge_req*retaddr *label18 (h:*label18)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
-    * label *label18
+  163 label *label136
+  164 op sub *tmp102 @tick :calc_charge_req:time
+  165 op idiv :calc_charge_req:secs *tmp102 60
+  166 op greaterThan *tmp104 :calc_charge_req:secs 30
+  167 sensor *tmp105 :calc_charge_req:reactor @enabled
+  168 op equal *tmp106 *tmp105 false
+  169 op or *tmp107 *tmp104 *tmp106
+  170 jump *label137 equal *tmp107 false
+  171 set :calc_charge_req*retval 0
+  172 jump *label139 always
+  173 label *label137
+  174 label *label138
+  175 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  176 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  177 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  178 set :calc_charge_req*retval :calc_charge_req:charge_req
+  179 jump *label139 always
+  180 label *label139
   181 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   182 set :start_reactor:reactor reactor1
   183 set :start_reactor:reactor_num 1
 
   427 jump *label7 always
   428 label *label9
   429 end
-    * label *label2
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label61 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label60 always
-    * label *label61
-    * label *label62
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label60 always
-    * label *label60
-    * return :calc_charge_req*retaddr
-    * end
   430 label *label3
   431 set .RET_T_STARTUP :start_reactor:t_startup
   432 op sub *tmp113 @tick :start_reactor:t_startup
 
   488 jump *label76 greaterThanEq :start_reactor:secs 30
   489 set :calc_charge_req:reactor :start_reactor:reactor
   490 set :calc_charge_req:time :start_reactor:t_startup
-    * setaddr :calc_charge_req*retaddr *label78 (h:*label78)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
-    * label *label78
+  491 label *label140
+  492 op sub *tmp102 @tick :calc_charge_req:time
+  493 op idiv :calc_charge_req:secs *tmp102 60
+  494 op greaterThan *tmp104 :calc_charge_req:secs 30
+  495 sensor *tmp105 :calc_charge_req:reactor @enabled
+  496 op equal *tmp106 *tmp105 false
+  497 op or *tmp107 *tmp104 *tmp106
+  498 jump *label141 equal *tmp107 false
+  499 set :calc_charge_req*retval 0
+  500 jump *label143 always
+  501 label *label141
+  502 label *label142
+  503 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  504 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  505 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  506 set :calc_charge_req*retval :calc_charge_req:charge_req
+  507 jump *label143 always
+  508 label *label143
   509 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   510 op lessThan *tmp154 *tmp153 .PWR_ABORT
   511 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    77 set :calc_charge_req:reactor reactor1
    78 set :calc_charge_req:time :t_startup1
    79 label *label120
-    * op sub *tmp102 @tick :calc_charge_req:time
+   80 op sub *tmp102 @tick :t_startup1
    81 op idiv :calc_charge_req:secs *tmp102 60
    82 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+   83 sensor *tmp105 reactor1 @enabled
    84 op equal *tmp106 *tmp105 false
    85 op or *tmp107 *tmp104 *tmp106
    86 jump *label121 equal *tmp107 false
 
    98 set :calc_charge_req:reactor reactor2
    99 set :calc_charge_req:time :t_startup2
   100 label *label124
-    * op sub *tmp102 @tick :calc_charge_req:time
+  101 op sub *tmp102 @tick :t_startup2
   102 op idiv :calc_charge_req:secs *tmp102 60
   103 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  104 sensor *tmp105 reactor2 @enabled
   105 op equal *tmp106 *tmp105 false
   106 op or *tmp107 *tmp104 *tmp106
   107 jump *label125 equal *tmp107 false
 
   119 set :calc_charge_req:reactor reactor3
   120 set :calc_charge_req:time :t_startup3
   121 label *label128
-    * op sub *tmp102 @tick :calc_charge_req:time
+  122 op sub *tmp102 @tick :t_startup3
   123 op idiv :calc_charge_req:secs *tmp102 60
   124 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  125 sensor *tmp105 reactor3 @enabled
   126 op equal *tmp106 *tmp105 false
   127 op or *tmp107 *tmp104 *tmp106
   128 jump *label129 equal *tmp107 false
 
   140 set :calc_charge_req:reactor reactor4
   141 set :calc_charge_req:time :t_startup4
   142 label *label132
-    * op sub *tmp102 @tick :calc_charge_req:time
+  143 op sub *tmp102 @tick :t_startup4
   144 op idiv :calc_charge_req:secs *tmp102 60
   145 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  146 sensor *tmp105 reactor4 @enabled
   147 op equal *tmp106 *tmp105 false
   148 op or *tmp107 *tmp104 *tmp106
   149 jump *label133 equal *tmp107 false
 
   161 set :calc_charge_req:reactor reactor5
   162 set :calc_charge_req:time :t_startup5
   163 label *label136
-    * op sub *tmp102 @tick :calc_charge_req:time
+  164 op sub *tmp102 @tick :t_startup5
   165 op idiv :calc_charge_req:secs *tmp102 60
   166 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  167 sensor *tmp105 reactor5 @enabled
   168 op equal *tmp106 *tmp105 false
   169 op or *tmp107 *tmp104 *tmp106
   170 jump *label137 equal *tmp107 false
 
   489 set :calc_charge_req:reactor :start_reactor:reactor
   490 set :calc_charge_req:time :start_reactor:t_startup
   491 label *label140
-    * op sub *tmp102 @tick :calc_charge_req:time
+  492 op sub *tmp102 @tick :start_reactor:t_startup
   493 op idiv :calc_charge_req:secs *tmp102 60
   494 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  495 sensor *tmp105 :start_reactor:reactor @enabled
   496 op equal *tmp106 *tmp105 false
   497 op or *tmp107 *tmp104 *tmp106
   498 jump *label141 equal *tmp107 false
 
   619 label *label67
   620 label *label65
   621 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  622 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   623 set :start_reactor*retval :start_reactor:supply_fuel
   624 jump *label63 always
   625 label *label63

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    74 jump *label11 always
    75 label *label11
    76 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    77 label *label120
    78 op sub *tmp102 @tick :t_startup1
    79 op idiv :calc_charge_req:secs *tmp102 60
 
    93 jump *label123 always
    94 label *label123
    95 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    96 label *label124
    97 op sub *tmp102 @tick :t_startup2
    98 op idiv :calc_charge_req:secs *tmp102 60
 
   112 jump *label127 always
   113 label *label127
   114 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   115 label *label128
   116 op sub *tmp102 @tick :t_startup3
   117 op idiv :calc_charge_req:secs *tmp102 60
 
   131 jump *label131 always
   132 label *label131
   133 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   134 label *label132
   135 op sub *tmp102 @tick :t_startup4
   136 op idiv :calc_charge_req:secs *tmp102 60
 
   150 jump *label135 always
   151 label *label135
   152 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   153 label *label136
   154 op sub *tmp102 @tick :t_startup5
   155 op idiv :calc_charge_req:secs *tmp102 60
 
   418 label *label9
   419 end
   420 label *label3
-    * set .RET_T_STARTUP :start_reactor:t_startup
   421 op sub *tmp113 @tick :start_reactor:t_startup
   422 op idiv :start_reactor:secs *tmp113 60
   423 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   475 jump *label75 always
   476 label *label74
   477 jump *label76 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   478 label *label140
   479 op sub *tmp102 @tick :start_reactor:t_startup
   480 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Inline function call at line 80:14 (+155 instructions):
 
   174 set :start_reactor:emerg_shutdown :emerg_shutdown
   175 set :start_reactor:fuel_on :fuel_1
   176 set :start_reactor:t_startup :t_startup1
-    * setaddr :start_reactor*retaddr *label19 (h:*label19)
-    * call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
-    * label *label19
+  177 label *label144
+  178 op sub *tmp113 @tick :start_reactor:t_startup
+  179 op idiv :start_reactor:secs *tmp113 60
+  180 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  181 set :start_reactor:supply_fuel true
+  182 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  183 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  184 sensor *tmp118 .NODE @powerNetStored
+  185 op floor :start_reactor:charge *tmp118
+  186 sensor *tmp120 .NODE @powerNetIn
+  187 sensor *tmp121 .NODE @powerNetOut
+  188 op sub *tmp122 *tmp120 *tmp121
+  189 op floor :start_reactor:surplus *tmp122
+  190 op mul *tmp124 .AVG_SURPLUS 0.8
+  191 op mul *tmp125 :start_reactor:surplus 0.2
+  192 op add .AVG_SURPLUS *tmp124 *tmp125
+  193 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  194 print "#"
+  195 print :start_reactor:reactor_num
+  196 print " "
+  197 print "- "
+  198 jump *label145 equal :start_reactor:emerg_shutdown false
+  199 control enabled :start_reactor:reactor false
+  200 print "emergency mode"
+  201 print "\n"
+  202 set :start_reactor:supply_fuel false
+  203 jump *label178 always
+  204 label *label145
+  205 jump *label164 equal :start_reactor:enabled false
+  206 jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  207 control enabled :start_reactor:reactor false
+  208 print "STOP unwanted"
+  209 print "\n"
+  210 jump *label163 always
+  211 label *label146
+  212 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  213 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  214 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  215 op land *tmp139 *tmp136 *tmp138
+  216 jump *label147 equal *tmp139 false
+  217 control enabled :start_reactor:reactor false
+  218 print "STOP system fuel low"
+  219 print "\n"
+  220 jump *label162 always
+  221 label *label147
+  222 jump *label148 greaterThan :start_reactor:fuel 1
+  223 control enabled :start_reactor:reactor false
+  224 print "STOP fuel low"
+  225 print "\n"
+  226 jump *label161 always
+  227 label *label148
+  228 jump *label149 greaterThan :start_reactor:cryo .CRYO_ABORT
+  229 control enabled :start_reactor:reactor false
+  230 print "STOP out of cryo"
+  231 print "\n"
+  232 jump *label160 always
+  233 label *label149
+  234 jump *label156 greaterThanEq :start_reactor:secs 30
+  235 label *label150
+  236 op sub *tmp102 @tick :start_reactor:t_startup
+  237 op idiv :calc_charge_req:secs *tmp102 60
+  238 op greaterThan *tmp104 :calc_charge_req:secs 30
+  239 sensor *tmp105 :start_reactor:reactor @enabled
+  240 op equal *tmp106 *tmp105 false
+  241 op or *tmp107 *tmp104 *tmp106
+  242 jump *label151 equal *tmp107 false
+  243 set :calc_charge_req*retval 0
+  244 jump *label153 always
+  245 label *label151
+  246 label *label152
+  247 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  248 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  249 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  250 set :calc_charge_req*retval :calc_charge_req:charge_req
+  251 jump *label153 always
+  252 label *label153
+  253 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  254 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  255 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  256 op land *tmp156 *tmp154 *tmp155
+  257 jump *label154 equal *tmp156 false
+  258 control enabled :start_reactor:reactor false
+  259 print "START FAIL battery"
+  260 print "\n"
+  261 set :start_reactor:supply_fuel false
+  262 jump *label155 always
+  263 label *label154
+  264 op sub :start_reactor:time_left 30 :start_reactor:secs
+  265 print "Starting "
+  266 print :start_reactor:time_left
+  267 print " "
+  268 print "secs, req "
+  269 print :calc_charge_req*retval
+  270 print "J"
+  271 print "\n"
+  272 label *label155
+  273 jump *label159 always
+  274 label *label156
+  275 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  276 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  277 op land *tmp163 *tmp161 *tmp162
+  278 jump *label157 equal *tmp163 false
+  279 control enabled :start_reactor:reactor false
+  280 print "ABANDON - battery crit"
+  281 print "\n"
+  282 set :start_reactor:supply_fuel false
+  283 jump *label158 always
+  284 label *label157
+  285 op idiv :start_reactor:mins :start_reactor:secs 6
+  286 op div :start_reactor:mins :start_reactor:mins 10
+  287 print "RUN "
+  288 print :start_reactor:mins
+  289 print " "
+  290 print "mins"
+  291 print "\n"
+  292 label *label158
+  293 label *label159
+  294 label *label160
+  295 label *label161
+  296 label *label162
+  297 label *label163
+  298 jump *label177 always
+  299 label *label164
+  300 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  301 op sub *tmp170 *tmp169 .PWR_ABORT
+  302 op div *tmp171 *tmp170 .PWR_REQ
+  303 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  304 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  305 op max :start_reactor:flow_units -0.1 *tmp173
+  306 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  307 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  308 jump *label165 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  309 print "IDLE"
+  310 print "\n"
+  311 set :start_reactor:supply_fuel false
+  312 jump *label176 always
+  313 label *label165
+  314 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  315 jump *label166 greaterThanEq *tmp179 1
+  316 op idiv *tmp183 :start_reactor:flow_units 0.001
+  317 op div :start_reactor:flow *tmp183 10
+  318 op idiv *tmp186 :start_reactor:charge_units 0.001
+  319 op div :start_reactor:charge *tmp186 10
+  320 print "WAIT power. (%"
+  321 print :start_reactor:charge
+  322 print "J + %"
+  323 print :start_reactor:flow
+  324 print "W)"
+  325 print "\n"
+  326 set :start_reactor:supply_fuel false
+  327 jump *label175 always
+  328 label *label166
+  329 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  330 op land *tmp189 :start_reactor:fuel_on *tmp188
+  331 jump *label169 equal *tmp189 false
+  332 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  333 jump *label167 lessThanEq *tmp191 .FUEL_REQ
+  334 print "WAIT fuel"
+  335 print "\n"
+  336 jump *label168 always
+  337 label *label167
+  338 print "WAIT system fuel"
+  339 print "\n"
+  340 label *label168
+  341 jump *label174 always
+  342 label *label169
+  343 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  344 jump *label170 greaterThanEq :start_reactor:fuel_stored *tmp194
+  345 print "WAIT buffer fuel"
+  346 print "\n"
+  347 jump *label173 always
+  348 label *label170
+  349 jump *label171 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  350 print "WAIT cryo"
+  351 print "\n"
+  352 jump *label172 always
+  353 label *label171
+  354 print "STARTUP"
+  355 print "\n"
+  356 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  357 control enabled :start_reactor:reactor true
+  358 label *label172
+  359 label *label173
+  360 label *label174
+  361 label *label175
+  362 label *label176
+  363 label *label177
+  364 label *label178
+  365 sensor *tmp201 :start_reactor:reactor @enabled
+  366 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  367 set :start_reactor*retval :start_reactor:supply_fuel
+  368 jump *label179 always
+  369 label *label179
   370 set :fuel_1 :start_reactor*retval
   371 set :t_startup1 .RET_T_STARTUP
   372 label *label106

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   174 set :start_reactor:fuel_on :fuel_1
   175 set :start_reactor:t_startup :t_startup1
   176 label *label144
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  177 op sub *tmp113 @tick :t_startup1
   178 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  179 sensor :start_reactor:fuel reactor1 @blast-compound
   180 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  181 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  182 sensor :start_reactor:cryo reactor1 @cryofluid
+  183 sensor *tmp118 node1 @powerNetStored
   184 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  185 sensor *tmp120 node1 @powerNetIn
+  186 sensor *tmp121 node1 @powerNetOut
   187 op sub *tmp122 *tmp120 *tmp121
   188 op floor :start_reactor:surplus *tmp122
   189 op mul *tmp124 .AVG_SURPLUS 0.8
   190 op mul *tmp125 :start_reactor:surplus 0.2
   191 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  192 sensor :start_reactor:enabled reactor1 @enabled
   193 print "#"
-    * print :start_reactor:reactor_num
+  194 print 1
   195 print " "
   196 print "- "
-    * jump *label145 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  197 jump *label145 equal :emerg_shutdown false
+  198 control enabled reactor1 false
   199 print "emergency mode"
   200 print "\n"
   201 set :start_reactor:supply_fuel false
   202 jump *label178 always
   203 label *label145
   204 jump *label164 equal :start_reactor:enabled false
-    * jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  205 jump *label146 greaterThanEq .REACTORS_DESIRED 1
+  206 control enabled reactor1 false
   207 print "STOP unwanted"
   208 print "\n"
   209 jump *label163 always
   210 label *label146
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  211 op greaterThan *tmp136 1 1
+  212 op mul *tmp137 15 1
+  213 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  214 op land *tmp139 false *tmp138
   215 jump *label147 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  216 control enabled reactor1 false
   217 print "STOP system fuel low"
   218 print "\n"
   219 jump *label162 always
   220 label *label147
   221 jump *label148 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  222 control enabled reactor1 false
   223 print "STOP fuel low"
   224 print "\n"
   225 jump *label161 always
   226 label *label148
-    * jump *label149 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  227 jump *label149 greaterThan :start_reactor:cryo 1
+  228 control enabled reactor1 false
   229 print "STOP out of cryo"
   230 print "\n"
   231 jump *label160 always
   232 label *label149
   233 jump *label156 greaterThanEq :start_reactor:secs 30
   234 label *label150
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  235 op sub *tmp102 @tick :t_startup1
   236 op idiv :calc_charge_req:secs *tmp102 60
   237 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  238 sensor *tmp105 reactor1 @enabled
   239 op equal *tmp106 *tmp105 false
   240 op or *tmp107 *tmp104 *tmp106
   241 jump *label151 equal *tmp107 false
 
   250 jump *label153 always
   251 label *label153
   252 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  253 op lessThan *tmp154 *tmp153 5000
+  254 op lessThan *tmp155 :start_reactor:surplus -500
   255 op land *tmp156 *tmp154 *tmp155
   256 jump *label154 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  257 control enabled reactor1 false
   258 print "START FAIL battery"
   259 print "\n"
   260 set :start_reactor:supply_fuel false
 
   271 label *label155
   272 jump *label159 always
   273 label *label156
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  274 op lessThan *tmp161 :start_reactor:charge 2000
+  275 op lessThan *tmp162 :start_reactor:surplus -500
   276 op land *tmp163 *tmp161 *tmp162
   277 jump *label157 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  278 control enabled reactor1 false
   279 print "ABANDON - battery crit"
   280 print "\n"
   281 set :start_reactor:supply_fuel false
 
   297 jump *label177 always
   298 label *label164
   299 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  300 op sub *tmp170 *tmp169 5000
+  301 op div *tmp171 *tmp170 23000
+  302 op mul :start_reactor:charge_units *tmp171 0.6
+  303 op div *tmp173 :start_reactor:surplus 2000
   304 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label165 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  305 op mul *tmp175 2 1
+  306 op add :start_reactor:cryo_req 3 2
+  307 jump *label165 greaterThanEq .REACTORS_DESIRED 1
   308 print "IDLE"
   309 print "\n"
   310 set :start_reactor:supply_fuel false
 
   325 set :start_reactor:supply_fuel false
   326 jump *label175 always
   327 label *label166
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  328 op lessThan *tmp188 :start_reactor:fuel 10
+  329 op land *tmp189 :fuel_1 *tmp188
   330 jump *label169 equal *tmp189 false
   331 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label167 lessThanEq *tmp191 .FUEL_REQ
+  332 jump *label167 lessThanEq *tmp191 10
   333 print "WAIT fuel"
   334 print "\n"
   335 jump *label168 always
 
   339 label *label168
   340 jump *label174 always
   341 label *label169
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label170 greaterThanEq :start_reactor:fuel_stored *tmp194
+  342 op mul *tmp194 45 1
+  343 jump *label170 greaterThanEq :start_reactor:fuel_stored 45
   344 print "WAIT buffer fuel"
   345 print "\n"
   346 jump *label173 always
   347 label *label170
-    * jump *label171 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  348 jump *label171 greaterThanEq :start_reactor:cryo 5
   349 print "WAIT cryo"
   350 print "\n"
   351 jump *label172 always
   352 label *label171
   353 print "STARTUP"
   354 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  355 op add .START_POWER_REQ .START_POWER_REQ 23000
+  356 control enabled reactor1 true
   357 label *label172
   358 label *label173
   359 label *label174
 
   361 label *label176
   362 label *label177
   363 label *label178
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  364 sensor *tmp201 reactor1 @enabled
+  365 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   366 set :start_reactor*retval :start_reactor:supply_fuel
   367 jump *label179 always
   368 label *label179
-    * set :fuel_1 :start_reactor*retval
+  369 set :fuel_1 :start_reactor:supply_fuel
   370 set :t_startup1 .RET_T_STARTUP
   371 label *label106
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  372 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   373 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  374 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   375 control config unloader2 *tmp101
   376 label *label107
   377 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   168 jump *label139 always
   169 label *label139
   170 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   171 label *label144
   172 op sub *tmp113 @tick :t_startup1
   173 op idiv :start_reactor:secs *tmp113 60
 
   294 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   295 op sub *tmp170 *tmp169 5000
   296 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  297 op div :start_reactor:charge_units *tmp170 38333.333333333336
   298 op div *tmp173 :start_reactor:surplus 2000
   299 op max :start_reactor:flow_units -0.1 *tmp173
   300 op mul *tmp175 2 1
 
   358 label *label178
   359 sensor *tmp201 reactor1 @enabled
   360 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   361 jump *label179 always
   362 label *label179
   363 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+155 instructions):
 
   373 set :start_reactor:emerg_shutdown :emerg_shutdown
   374 set :start_reactor:fuel_on :fuel_2
   375 set :start_reactor:t_startup :t_startup2
-    * setaddr :start_reactor*retaddr *label21 (h:*label21)
-    * call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
-    * label *label21
+  376 label *label180
+  377 op sub *tmp113 @tick :start_reactor:t_startup
+  378 op idiv :start_reactor:secs *tmp113 60
+  379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  380 set :start_reactor:supply_fuel true
+  381 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  382 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  383 sensor *tmp118 .NODE @powerNetStored
+  384 op floor :start_reactor:charge *tmp118
+  385 sensor *tmp120 .NODE @powerNetIn
+  386 sensor *tmp121 .NODE @powerNetOut
+  387 op sub *tmp122 *tmp120 *tmp121
+  388 op floor :start_reactor:surplus *tmp122
+  389 op mul *tmp124 .AVG_SURPLUS 0.8
+  390 op mul *tmp125 :start_reactor:surplus 0.2
+  391 op add .AVG_SURPLUS *tmp124 *tmp125
+  392 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  393 print "#"
+  394 print :start_reactor:reactor_num
+  395 print " "
+  396 print "- "
+  397 jump *label181 equal :start_reactor:emerg_shutdown false
+  398 control enabled :start_reactor:reactor false
+  399 print "emergency mode"
+  400 print "\n"
+  401 set :start_reactor:supply_fuel false
+  402 jump *label214 always
+  403 label *label181
+  404 jump *label200 equal :start_reactor:enabled false
+  405 jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  406 control enabled :start_reactor:reactor false
+  407 print "STOP unwanted"
+  408 print "\n"
+  409 jump *label199 always
+  410 label *label182
+  411 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  412 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  413 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  414 op land *tmp139 *tmp136 *tmp138
+  415 jump *label183 equal *tmp139 false
+  416 control enabled :start_reactor:reactor false
+  417 print "STOP system fuel low"
+  418 print "\n"
+  419 jump *label198 always
+  420 label *label183
+  421 jump *label184 greaterThan :start_reactor:fuel 1
+  422 control enabled :start_reactor:reactor false
+  423 print "STOP fuel low"
+  424 print "\n"
+  425 jump *label197 always
+  426 label *label184
+  427 jump *label185 greaterThan :start_reactor:cryo .CRYO_ABORT
+  428 control enabled :start_reactor:reactor false
+  429 print "STOP out of cryo"
+  430 print "\n"
+  431 jump *label196 always
+  432 label *label185
+  433 jump *label192 greaterThanEq :start_reactor:secs 30
+  434 label *label186
+  435 op sub *tmp102 @tick :start_reactor:t_startup
+  436 op idiv :calc_charge_req:secs *tmp102 60
+  437 op greaterThan *tmp104 :calc_charge_req:secs 30
+  438 sensor *tmp105 :start_reactor:reactor @enabled
+  439 op equal *tmp106 *tmp105 false
+  440 op or *tmp107 *tmp104 *tmp106
+  441 jump *label187 equal *tmp107 false
+  442 set :calc_charge_req*retval 0
+  443 jump *label189 always
+  444 label *label187
+  445 label *label188
+  446 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  447 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  448 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  449 set :calc_charge_req*retval :calc_charge_req:charge_req
+  450 jump *label189 always
+  451 label *label189
+  452 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  453 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  454 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  455 op land *tmp156 *tmp154 *tmp155
+  456 jump *label190 equal *tmp156 false
+  457 control enabled :start_reactor:reactor false
+  458 print "START FAIL battery"
+  459 print "\n"
+  460 set :start_reactor:supply_fuel false
+  461 jump *label191 always
+  462 label *label190
+  463 op sub :start_reactor:time_left 30 :start_reactor:secs
+  464 print "Starting "
+  465 print :start_reactor:time_left
+  466 print " "
+  467 print "secs, req "
+  468 print :calc_charge_req*retval
+  469 print "J"
+  470 print "\n"
+  471 label *label191
+  472 jump *label195 always
+  473 label *label192
+  474 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  475 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  476 op land *tmp163 *tmp161 *tmp162
+  477 jump *label193 equal *tmp163 false
+  478 control enabled :start_reactor:reactor false
+  479 print "ABANDON - battery crit"
+  480 print "\n"
+  481 set :start_reactor:supply_fuel false
+  482 jump *label194 always
+  483 label *label193
+  484 op idiv :start_reactor:mins :start_reactor:secs 6
+  485 op div :start_reactor:mins :start_reactor:mins 10
+  486 print "RUN "
+  487 print :start_reactor:mins
+  488 print " "
+  489 print "mins"
+  490 print "\n"
+  491 label *label194
+  492 label *label195
+  493 label *label196
+  494 label *label197
+  495 label *label198
+  496 label *label199
+  497 jump *label213 always
+  498 label *label200
+  499 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  500 op sub *tmp170 *tmp169 .PWR_ABORT
+  501 op div *tmp171 *tmp170 .PWR_REQ
+  502 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  503 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  504 op max :start_reactor:flow_units -0.1 *tmp173
+  505 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  506 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  507 jump *label201 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  508 print "IDLE"
+  509 print "\n"
+  510 set :start_reactor:supply_fuel false
+  511 jump *label212 always
+  512 label *label201
+  513 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  514 jump *label202 greaterThanEq *tmp179 1
+  515 op idiv *tmp183 :start_reactor:flow_units 0.001
+  516 op div :start_reactor:flow *tmp183 10
+  517 op idiv *tmp186 :start_reactor:charge_units 0.001
+  518 op div :start_reactor:charge *tmp186 10
+  519 print "WAIT power. (%"
+  520 print :start_reactor:charge
+  521 print "J + %"
+  522 print :start_reactor:flow
+  523 print "W)"
+  524 print "\n"
+  525 set :start_reactor:supply_fuel false
+  526 jump *label211 always
+  527 label *label202
+  528 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  529 op land *tmp189 :start_reactor:fuel_on *tmp188
+  530 jump *label205 equal *tmp189 false
+  531 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  532 jump *label203 lessThanEq *tmp191 .FUEL_REQ
+  533 print "WAIT fuel"
+  534 print "\n"
+  535 jump *label204 always
+  536 label *label203
+  537 print "WAIT system fuel"
+  538 print "\n"
+  539 label *label204
+  540 jump *label210 always
+  541 label *label205
+  542 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  543 jump *label206 greaterThanEq :start_reactor:fuel_stored *tmp194
+  544 print "WAIT buffer fuel"
+  545 print "\n"
+  546 jump *label209 always
+  547 label *label206
+  548 jump *label207 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  549 print "WAIT cryo"
+  550 print "\n"
+  551 jump *label208 always
+  552 label *label207
+  553 print "STARTUP"
+  554 print "\n"
+  555 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  556 control enabled :start_reactor:reactor true
+  557 label *label208
+  558 label *label209
+  559 label *label210
+  560 label *label211
+  561 label *label212
+  562 label *label213
+  563 label *label214
+  564 sensor *tmp201 :start_reactor:reactor @enabled
+  565 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  566 set :start_reactor*retval :start_reactor:supply_fuel
+  567 jump *label215 always
+  568 label *label215
   569 set :fuel_2 :start_reactor*retval
   570 set :t_startup2 .RET_T_STARTUP
   571 label *label108

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   374 set :start_reactor:fuel_on :fuel_2
   375 set :start_reactor:t_startup :t_startup2
   376 label *label180
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  377 op sub *tmp113 @tick :t_startup2
   378 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  379 sensor :start_reactor:fuel reactor2 @blast-compound
   380 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  381 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  382 sensor :start_reactor:cryo reactor2 @cryofluid
+  383 sensor *tmp118 node1 @powerNetStored
   384 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  385 sensor *tmp120 node1 @powerNetIn
+  386 sensor *tmp121 node1 @powerNetOut
   387 op sub *tmp122 *tmp120 *tmp121
   388 op floor :start_reactor:surplus *tmp122
   389 op mul *tmp124 .AVG_SURPLUS 0.8
   390 op mul *tmp125 :start_reactor:surplus 0.2
   391 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  392 sensor :start_reactor:enabled reactor2 @enabled
   393 print "#"
-    * print :start_reactor:reactor_num
+  394 print 2
   395 print " "
   396 print "- "
-    * jump *label181 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  397 jump *label181 equal :emerg_shutdown false
+  398 control enabled reactor2 false
   399 print "emergency mode"
   400 print "\n"
   401 set :start_reactor:supply_fuel false
   402 jump *label214 always
   403 label *label181
   404 jump *label200 equal :start_reactor:enabled false
-    * jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  405 jump *label182 greaterThanEq .REACTORS_DESIRED 2
+  406 control enabled reactor2 false
   407 print "STOP unwanted"
   408 print "\n"
   409 jump *label199 always
   410 label *label182
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  411 op greaterThan *tmp136 2 1
+  412 op mul *tmp137 15 2
+  413 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  414 op land *tmp139 true *tmp138
   415 jump *label183 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  416 control enabled reactor2 false
   417 print "STOP system fuel low"
   418 print "\n"
   419 jump *label198 always
   420 label *label183
   421 jump *label184 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  422 control enabled reactor2 false
   423 print "STOP fuel low"
   424 print "\n"
   425 jump *label197 always
   426 label *label184
-    * jump *label185 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  427 jump *label185 greaterThan :start_reactor:cryo 1
+  428 control enabled reactor2 false
   429 print "STOP out of cryo"
   430 print "\n"
   431 jump *label196 always
   432 label *label185
   433 jump *label192 greaterThanEq :start_reactor:secs 30
   434 label *label186
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  435 op sub *tmp102 @tick :t_startup2
   436 op idiv :calc_charge_req:secs *tmp102 60
   437 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  438 sensor *tmp105 reactor2 @enabled
   439 op equal *tmp106 *tmp105 false
   440 op or *tmp107 *tmp104 *tmp106
   441 jump *label187 equal *tmp107 false
 
   450 jump *label189 always
   451 label *label189
   452 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  453 op lessThan *tmp154 *tmp153 5000
+  454 op lessThan *tmp155 :start_reactor:surplus -500
   455 op land *tmp156 *tmp154 *tmp155
   456 jump *label190 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  457 control enabled reactor2 false
   458 print "START FAIL battery"
   459 print "\n"
   460 set :start_reactor:supply_fuel false
 
   471 label *label191
   472 jump *label195 always
   473 label *label192
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  474 op lessThan *tmp161 :start_reactor:charge 2000
+  475 op lessThan *tmp162 :start_reactor:surplus -500
   476 op land *tmp163 *tmp161 *tmp162
   477 jump *label193 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  478 control enabled reactor2 false
   479 print "ABANDON - battery crit"
   480 print "\n"
   481 set :start_reactor:supply_fuel false
 
   497 jump *label213 always
   498 label *label200
   499 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  500 op sub *tmp170 *tmp169 5000
+  501 op div *tmp171 *tmp170 23000
+  502 op mul :start_reactor:charge_units *tmp171 0.6
+  503 op div *tmp173 :start_reactor:surplus 2000
   504 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label201 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  505 op mul *tmp175 2 2
+  506 op add :start_reactor:cryo_req 3 4
+  507 jump *label201 greaterThanEq .REACTORS_DESIRED 2
   508 print "IDLE"
   509 print "\n"
   510 set :start_reactor:supply_fuel false
 
   525 set :start_reactor:supply_fuel false
   526 jump *label211 always
   527 label *label202
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  528 op lessThan *tmp188 :start_reactor:fuel 10
+  529 op land *tmp189 :fuel_2 *tmp188
   530 jump *label205 equal *tmp189 false
   531 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label203 lessThanEq *tmp191 .FUEL_REQ
+  532 jump *label203 lessThanEq *tmp191 10
   533 print "WAIT fuel"
   534 print "\n"
   535 jump *label204 always
 
   539 label *label204
   540 jump *label210 always
   541 label *label205
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label206 greaterThanEq :start_reactor:fuel_stored *tmp194
+  542 op mul *tmp194 45 2
+  543 jump *label206 greaterThanEq :start_reactor:fuel_stored 90
   544 print "WAIT buffer fuel"
   545 print "\n"
   546 jump *label209 always
   547 label *label206
-    * jump *label207 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  548 jump *label207 greaterThanEq :start_reactor:cryo 7
   549 print "WAIT cryo"
   550 print "\n"
   551 jump *label208 always
   552 label *label207
   553 print "STARTUP"
   554 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  555 op add .START_POWER_REQ .START_POWER_REQ 23000
+  556 control enabled reactor2 true
   557 label *label208
   558 label *label209
   559 label *label210
 
   561 label *label212
   562 label *label213
   563 label *label214
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  564 sensor *tmp201 reactor2 @enabled
+  565 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   566 set :start_reactor*retval :start_reactor:supply_fuel
   567 jump *label215 always
   568 label *label215
-    * set :fuel_2 :start_reactor*retval
+  569 set :fuel_2 :start_reactor:supply_fuel
   570 set :t_startup2 .RET_T_STARTUP
   571 label *label108
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  572 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   573 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  574 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   575 control config unloader4 *tmp101
   576 label *label109
   577 label *label116

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   368 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   369 control config unloader2 *tmp101
   370 label *label107
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   371 label *label180
   372 op sub *tmp113 @tick :t_startup2
   373 op idiv :start_reactor:secs *tmp113 60
 
   494 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   495 op sub *tmp170 *tmp169 5000
   496 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  497 op div :start_reactor:charge_units *tmp170 38333.333333333336
   498 op div *tmp173 :start_reactor:surplus 2000
   499 op max :start_reactor:flow_units -0.1 *tmp173
   500 op mul *tmp175 2 2
 
   558 label *label214
   559 sensor *tmp201 reactor2 @enabled
   560 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   561 jump *label215 always
   562 label *label215
   563 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+155 instructions):
 
   601 set :start_reactor:emerg_shutdown :emerg_shutdown
   602 set :start_reactor:fuel_on :fuel_3
   603 set :start_reactor:t_startup :t_startup3
-    * setaddr :start_reactor*retaddr *label24 (h:*label24)
-    * call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
-    * label *label24
+  604 label *label216
+  605 op sub *tmp113 @tick :start_reactor:t_startup
+  606 op idiv :start_reactor:secs *tmp113 60
+  607 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  608 set :start_reactor:supply_fuel true
+  609 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  610 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  611 sensor *tmp118 .NODE @powerNetStored
+  612 op floor :start_reactor:charge *tmp118
+  613 sensor *tmp120 .NODE @powerNetIn
+  614 sensor *tmp121 .NODE @powerNetOut
+  615 op sub *tmp122 *tmp120 *tmp121
+  616 op floor :start_reactor:surplus *tmp122
+  617 op mul *tmp124 .AVG_SURPLUS 0.8
+  618 op mul *tmp125 :start_reactor:surplus 0.2
+  619 op add .AVG_SURPLUS *tmp124 *tmp125
+  620 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  621 print "#"
+  622 print :start_reactor:reactor_num
+  623 print " "
+  624 print "- "
+  625 jump *label217 equal :start_reactor:emerg_shutdown false
+  626 control enabled :start_reactor:reactor false
+  627 print "emergency mode"
+  628 print "\n"
+  629 set :start_reactor:supply_fuel false
+  630 jump *label250 always
+  631 label *label217
+  632 jump *label236 equal :start_reactor:enabled false
+  633 jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  634 control enabled :start_reactor:reactor false
+  635 print "STOP unwanted"
+  636 print "\n"
+  637 jump *label235 always
+  638 label *label218
+  639 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  640 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  641 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  642 op land *tmp139 *tmp136 *tmp138
+  643 jump *label219 equal *tmp139 false
+  644 control enabled :start_reactor:reactor false
+  645 print "STOP system fuel low"
+  646 print "\n"
+  647 jump *label234 always
+  648 label *label219
+  649 jump *label220 greaterThan :start_reactor:fuel 1
+  650 control enabled :start_reactor:reactor false
+  651 print "STOP fuel low"
+  652 print "\n"
+  653 jump *label233 always
+  654 label *label220
+  655 jump *label221 greaterThan :start_reactor:cryo .CRYO_ABORT
+  656 control enabled :start_reactor:reactor false
+  657 print "STOP out of cryo"
+  658 print "\n"
+  659 jump *label232 always
+  660 label *label221
+  661 jump *label228 greaterThanEq :start_reactor:secs 30
+  662 label *label222
+  663 op sub *tmp102 @tick :start_reactor:t_startup
+  664 op idiv :calc_charge_req:secs *tmp102 60
+  665 op greaterThan *tmp104 :calc_charge_req:secs 30
+  666 sensor *tmp105 :start_reactor:reactor @enabled
+  667 op equal *tmp106 *tmp105 false
+  668 op or *tmp107 *tmp104 *tmp106
+  669 jump *label223 equal *tmp107 false
+  670 set :calc_charge_req*retval 0
+  671 jump *label225 always
+  672 label *label223
+  673 label *label224
+  674 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  675 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  676 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  677 set :calc_charge_req*retval :calc_charge_req:charge_req
+  678 jump *label225 always
+  679 label *label225
+  680 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  681 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  682 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  683 op land *tmp156 *tmp154 *tmp155
+  684 jump *label226 equal *tmp156 false
+  685 control enabled :start_reactor:reactor false
+  686 print "START FAIL battery"
+  687 print "\n"
+  688 set :start_reactor:supply_fuel false
+  689 jump *label227 always
+  690 label *label226
+  691 op sub :start_reactor:time_left 30 :start_reactor:secs
+  692 print "Starting "
+  693 print :start_reactor:time_left
+  694 print " "
+  695 print "secs, req "
+  696 print :calc_charge_req*retval
+  697 print "J"
+  698 print "\n"
+  699 label *label227
+  700 jump *label231 always
+  701 label *label228
+  702 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  703 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  704 op land *tmp163 *tmp161 *tmp162
+  705 jump *label229 equal *tmp163 false
+  706 control enabled :start_reactor:reactor false
+  707 print "ABANDON - battery crit"
+  708 print "\n"
+  709 set :start_reactor:supply_fuel false
+  710 jump *label230 always
+  711 label *label229
+  712 op idiv :start_reactor:mins :start_reactor:secs 6
+  713 op div :start_reactor:mins :start_reactor:mins 10
+  714 print "RUN "
+  715 print :start_reactor:mins
+  716 print " "
+  717 print "mins"
+  718 print "\n"
+  719 label *label230
+  720 label *label231
+  721 label *label232
+  722 label *label233
+  723 label *label234
+  724 label *label235
+  725 jump *label249 always
+  726 label *label236
+  727 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  728 op sub *tmp170 *tmp169 .PWR_ABORT
+  729 op div *tmp171 *tmp170 .PWR_REQ
+  730 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  731 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  732 op max :start_reactor:flow_units -0.1 *tmp173
+  733 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  734 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  735 jump *label237 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  736 print "IDLE"
+  737 print "\n"
+  738 set :start_reactor:supply_fuel false
+  739 jump *label248 always
+  740 label *label237
+  741 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  742 jump *label238 greaterThanEq *tmp179 1
+  743 op idiv *tmp183 :start_reactor:flow_units 0.001
+  744 op div :start_reactor:flow *tmp183 10
+  745 op idiv *tmp186 :start_reactor:charge_units 0.001
+  746 op div :start_reactor:charge *tmp186 10
+  747 print "WAIT power. (%"
+  748 print :start_reactor:charge
+  749 print "J + %"
+  750 print :start_reactor:flow
+  751 print "W)"
+  752 print "\n"
+  753 set :start_reactor:supply_fuel false
+  754 jump *label247 always
+  755 label *label238
+  756 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  757 op land *tmp189 :start_reactor:fuel_on *tmp188
+  758 jump *label241 equal *tmp189 false
+  759 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  760 jump *label239 lessThanEq *tmp191 .FUEL_REQ
+  761 print "WAIT fuel"
+  762 print "\n"
+  763 jump *label240 always
+  764 label *label239
+  765 print "WAIT system fuel"
+  766 print "\n"
+  767 label *label240
+  768 jump *label246 always
+  769 label *label241
+  770 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  771 jump *label242 greaterThanEq :start_reactor:fuel_stored *tmp194
+  772 print "WAIT buffer fuel"
+  773 print "\n"
+  774 jump *label245 always
+  775 label *label242
+  776 jump *label243 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  777 print "WAIT cryo"
+  778 print "\n"
+  779 jump *label244 always
+  780 label *label243
+  781 print "STARTUP"
+  782 print "\n"
+  783 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  784 control enabled :start_reactor:reactor true
+  785 label *label244
+  786 label *label245
+  787 label *label246
+  788 label *label247
+  789 label *label248
+  790 label *label249
+  791 label *label250
+  792 sensor *tmp201 :start_reactor:reactor @enabled
+  793 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  794 set :start_reactor*retval :start_reactor:supply_fuel
+  795 jump *label251 always
+  796 label *label251
   797 set :fuel_3 :start_reactor*retval
   798 set :t_startup3 .RET_T_STARTUP
   799 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   602 set :start_reactor:fuel_on :fuel_3
   603 set :start_reactor:t_startup :t_startup3
   604 label *label216
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  605 op sub *tmp113 @tick :t_startup3
   606 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  607 sensor :start_reactor:fuel reactor3 @blast-compound
   608 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  609 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  610 sensor :start_reactor:cryo reactor3 @cryofluid
+  611 sensor *tmp118 node1 @powerNetStored
   612 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  613 sensor *tmp120 node1 @powerNetIn
+  614 sensor *tmp121 node1 @powerNetOut
   615 op sub *tmp122 *tmp120 *tmp121
   616 op floor :start_reactor:surplus *tmp122
   617 op mul *tmp124 .AVG_SURPLUS 0.8
   618 op mul *tmp125 :start_reactor:surplus 0.2
   619 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  620 sensor :start_reactor:enabled reactor3 @enabled
   621 print "#"
-    * print :start_reactor:reactor_num
+  622 print 3
   623 print " "
   624 print "- "
-    * jump *label217 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  625 jump *label217 equal :emerg_shutdown false
+  626 control enabled reactor3 false
   627 print "emergency mode"
   628 print "\n"
   629 set :start_reactor:supply_fuel false
   630 jump *label250 always
   631 label *label217
   632 jump *label236 equal :start_reactor:enabled false
-    * jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  633 jump *label218 greaterThanEq .REACTORS_DESIRED 3
+  634 control enabled reactor3 false
   635 print "STOP unwanted"
   636 print "\n"
   637 jump *label235 always
   638 label *label218
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  639 op greaterThan *tmp136 3 1
+  640 op mul *tmp137 15 3
+  641 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  642 op land *tmp139 true *tmp138
   643 jump *label219 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  644 control enabled reactor3 false
   645 print "STOP system fuel low"
   646 print "\n"
   647 jump *label234 always
   648 label *label219
   649 jump *label220 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  650 control enabled reactor3 false
   651 print "STOP fuel low"
   652 print "\n"
   653 jump *label233 always
   654 label *label220
-    * jump *label221 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  655 jump *label221 greaterThan :start_reactor:cryo 1
+  656 control enabled reactor3 false
   657 print "STOP out of cryo"
   658 print "\n"
   659 jump *label232 always
   660 label *label221
   661 jump *label228 greaterThanEq :start_reactor:secs 30
   662 label *label222
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  663 op sub *tmp102 @tick :t_startup3
   664 op idiv :calc_charge_req:secs *tmp102 60
   665 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  666 sensor *tmp105 reactor3 @enabled
   667 op equal *tmp106 *tmp105 false
   668 op or *tmp107 *tmp104 *tmp106
   669 jump *label223 equal *tmp107 false
 
   678 jump *label225 always
   679 label *label225
   680 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  681 op lessThan *tmp154 *tmp153 5000
+  682 op lessThan *tmp155 :start_reactor:surplus -500
   683 op land *tmp156 *tmp154 *tmp155
   684 jump *label226 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  685 control enabled reactor3 false
   686 print "START FAIL battery"
   687 print "\n"
   688 set :start_reactor:supply_fuel false
 
   699 label *label227
   700 jump *label231 always
   701 label *label228
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  702 op lessThan *tmp161 :start_reactor:charge 2000
+  703 op lessThan *tmp162 :start_reactor:surplus -500
   704 op land *tmp163 *tmp161 *tmp162
   705 jump *label229 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  706 control enabled reactor3 false
   707 print "ABANDON - battery crit"
   708 print "\n"
   709 set :start_reactor:supply_fuel false
 
   725 jump *label249 always
   726 label *label236
   727 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  728 op sub *tmp170 *tmp169 5000
+  729 op div *tmp171 *tmp170 23000
+  730 op mul :start_reactor:charge_units *tmp171 0.6
+  731 op div *tmp173 :start_reactor:surplus 2000
   732 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label237 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  733 op mul *tmp175 2 3
+  734 op add :start_reactor:cryo_req 3 6
+  735 jump *label237 greaterThanEq .REACTORS_DESIRED 3
   736 print "IDLE"
   737 print "\n"
   738 set :start_reactor:supply_fuel false
 
   753 set :start_reactor:supply_fuel false
   754 jump *label247 always
   755 label *label238
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  756 op lessThan *tmp188 :start_reactor:fuel 10
+  757 op land *tmp189 :fuel_3 *tmp188
   758 jump *label241 equal *tmp189 false
   759 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label239 lessThanEq *tmp191 .FUEL_REQ
+  760 jump *label239 lessThanEq *tmp191 10
   761 print "WAIT fuel"
   762 print "\n"
   763 jump *label240 always
 
   767 label *label240
   768 jump *label246 always
   769 label *label241
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label242 greaterThanEq :start_reactor:fuel_stored *tmp194
+  770 op mul *tmp194 45 3
+  771 jump *label242 greaterThanEq :start_reactor:fuel_stored 135
   772 print "WAIT buffer fuel"
   773 print "\n"
   774 jump *label245 always
   775 label *label242
-    * jump *label243 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  776 jump *label243 greaterThanEq :start_reactor:cryo 9
   777 print "WAIT cryo"
   778 print "\n"
   779 jump *label244 always
   780 label *label243
   781 print "STARTUP"
   782 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  783 op add .START_POWER_REQ .START_POWER_REQ 23000
+  784 control enabled reactor3 true
   785 label *label244
   786 label *label245
   787 label *label246
 
   789 label *label248
   790 label *label249
   791 label *label250
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  792 sensor *tmp201 reactor3 @enabled
+  793 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   794 set :start_reactor*retval :start_reactor:supply_fuel
   795 jump *label251 always
   796 label *label251
-    * set :fuel_3 :start_reactor*retval
+  797 set :fuel_3 :start_reactor:supply_fuel
   798 set :t_startup3 .RET_T_STARTUP
   799 set :start_reactor:reactor reactor4
   800 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   596 label *label118
   597 label *label119
   598 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   599 label *label216
   600 op sub *tmp113 @tick :t_startup3
   601 op idiv :start_reactor:secs *tmp113 60
 
   722 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   723 op sub *tmp170 *tmp169 5000
   724 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  725 op div :start_reactor:charge_units *tmp170 38333.333333333336
   726 op div *tmp173 :start_reactor:surplus 2000
   727 op max :start_reactor:flow_units -0.1 *tmp173
   728 op mul *tmp175 2 3
 
   786 label *label250
   787 sensor *tmp201 reactor3 @enabled
   788 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   789 jump *label251 always
   790 label *label251
   791 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-20 instructions):
 
    55 control enabled projector1 false
    56 control enabled projector2 false
    57 set :check_radar*retval false
-    * jump *label115 always
    58 label *label114
    59 label *label115
    60 op notEqual *tmp9 switch1 null
 
    69 label *label12
    70 label *label13
    71 set *tmp8 false
-    * jump *label11 always
    72 label *label11
    73 op or :emerg_shutdown :check_radar*retval *tmp8
    74 label *label120
 
    87 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    88 op idiv :calc_charge_req:charge_req *tmp110 0.04
    89 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label123 always
    90 label *label123
    91 set .START_POWER_REQ :calc_charge_req*retval
    92 label *label124
 
   105 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   106 op idiv :calc_charge_req:charge_req *tmp110 0.04
   107 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label127 always
   108 label *label127
   109 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   110 label *label128
 
   123 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   124 op idiv :calc_charge_req:charge_req *tmp110 0.04
   125 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label131 always
   126 label *label131
   127 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   128 label *label132
 
   141 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   142 op idiv :calc_charge_req:charge_req *tmp110 0.04
   143 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label135 always
   144 label *label135
   145 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   146 label *label136
 
   159 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   160 op idiv :calc_charge_req:charge_req *tmp110 0.04
   161 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label139 always
   162 label *label139
   163 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   164 label *label144
 
   235 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   236 op idiv :calc_charge_req:charge_req *tmp110 0.04
   237 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label153 always
   238 label *label153
   239 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   240 op lessThan *tmp154 *tmp153 5000
 
   350 label *label178
   351 sensor *tmp201 reactor1 @enabled
   352 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * jump *label179 always
   353 label *label179
   354 set :fuel_1 :start_reactor:supply_fuel
   355 set :t_startup1 .RET_T_STARTUP
 
   433 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   434 op idiv :calc_charge_req:charge_req *tmp110 0.04
   435 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label189 always
   436 label *label189
   437 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   438 op lessThan *tmp154 *tmp153 5000
 
   548 label *label214
   549 sensor *tmp201 reactor2 @enabled
   550 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * jump *label215 always
   551 label *label215
   552 set :fuel_2 :start_reactor:supply_fuel
   553 set :t_startup2 .RET_T_STARTUP
 
   581 control enabled projector1 false
   582 control enabled projector2 false
   583 set :check_radar*retval false
-    * jump *label119 always
   584 label *label118
   585 label *label119
   586 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   658 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   659 op idiv :calc_charge_req:charge_req *tmp110 0.04
   660 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label225 always
   661 label *label225
   662 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   663 op lessThan *tmp154 *tmp153 5000
 
   773 label *label250
   774 sensor *tmp201 reactor3 @enabled
   775 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * jump *label251 always
   776 label *label251
   777 set :fuel_3 :start_reactor:supply_fuel
   778 set :t_startup3 .RET_T_STARTUP
 
   859 label *label34
   860 label *label30
   861 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label28 always
   862 label *label28
   863 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   864 control config unloader7 *tmp51
 
   882 label *label100
   883 op idiv *tmp93 .AVG_SURPLUS 100
   884 op div :kilo*retval *tmp93 10
-    * jump *label101 always
   885 label *label101
   886 set :surplus :kilo*retval
   887 sensor :kilo:val node1 @powerNetStored
   888 label *label102
   889 op idiv *tmp93 :kilo:val 100
   890 op div :kilo*retval *tmp93 10
-    * jump *label103 always
   891 label *label103
   892 set :charge :kilo*retval
   893 jump *label42 lessThanEq .START_POWER_REQ 0
   894 label *label104
   895 op idiv *tmp93 .START_POWER_REQ 100
   896 op div :kilo*retval *tmp93 10
-    * jump *label105 always
   897 label *label105
   898 print "Req "
   899 print :kilo*retval
 
  1024 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1025 op idiv :calc_charge_req:charge_req *tmp110 0.04
  1026 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label143 always
  1027 label *label143
  1028 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
  1029 op lessThan *tmp154 *tmp153 .PWR_ABORT
 
  1140 sensor *tmp201 :start_reactor:reactor @enabled
  1141 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1142 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label63 always
  1143 label *label63
  1144 return :start_reactor*retaddr
  1145 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   199 op greaterThan *tmp136 1 1
   200 op mul *tmp137 15 1
   201 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  202 set *tmp139 false
   203 jump *label147 equal *tmp139 false
   204 control enabled reactor1 false
   205 print "STOP system fuel low"
 
   397 op greaterThan *tmp136 2 1
   398 op mul *tmp137 15 2
   399 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  400 set *tmp139 *tmp138
   401 jump *label183 equal *tmp139 false
   402 control enabled reactor2 false
   403 print "STOP system fuel low"
 
   622 op greaterThan *tmp136 3 1
   623 op mul *tmp137 15 3
   624 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  625 set *tmp139 *tmp138
   626 jump *label219 equal *tmp139 false
   627 control enabled reactor3 false
   628 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
    79 op equal *tmp106 *tmp105 false
    80 op or *tmp107 *tmp104 *tmp106
    81 jump *label121 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+   82 set .START_POWER_REQ 0
    83 jump *label123 always
    84 label *label121
    85 label *label122
    86 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    87 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    88 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+   89 set .START_POWER_REQ :calc_charge_req:charge_req
    90 label *label123
-    * set .START_POWER_REQ :calc_charge_req*retval
    91 label *label124
    92 op sub *tmp102 @tick :t_startup2
    93 op idiv :calc_charge_req:secs *tmp102 60
 
   880 label *label37
   881 label *label100
   882 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  883 op div :surplus *tmp93 10
   884 label *label101
-    * set :surplus :kilo*retval
   885 sensor :kilo:val node1 @powerNetStored
   886 label *label102
   887 op idiv *tmp93 :kilo:val 100
 
   952 op sub *tmp113 @tick :start_reactor:t_startup
   953 op idiv :start_reactor:secs *tmp113 60
   954 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  955 set :start_reactor*retval true
   956 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   957 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   958 sensor *tmp118 .NODE @powerNetStored
 
   973 control enabled :start_reactor:reactor false
   974 print "emergency mode"
   975 print "\n"
-    * set :start_reactor:supply_fuel false
+  976 set :start_reactor*retval false
   977 jump *label65 always
   978 label *label64
   979 jump *label66 equal :start_reactor:enabled false
 
  1031 control enabled :start_reactor:reactor false
  1032 print "START FAIL battery"
  1033 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1034 set :start_reactor*retval false
  1035 jump *label80 always
  1036 label *label79
  1037 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1052 control enabled :start_reactor:reactor false
  1053 print "ABANDON - battery crit"
  1054 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1055 set :start_reactor*retval false
  1056 jump *label82 always
  1057 label *label81
  1058 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1081 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1082 print "IDLE"
  1083 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1084 set :start_reactor*retval false
  1085 jump *label84 always
  1086 label *label83
  1087 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1096 print :start_reactor:flow
  1097 print "W)"
  1098 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1099 set :start_reactor*retval false
  1100 jump *label86 always
  1101 label *label85
  1102 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1137 label *label65
  1138 sensor *tmp201 :start_reactor:reactor @enabled
  1139 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1140 label *label63
  1141 return :start_reactor*retaddr
  1142 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   199 op mul *tmp137 15 1
   200 op lessThan *tmp138 :start_reactor:fuel_stored 15
   201 set *tmp139 false
-    * jump *label147 equal *tmp139 false
+  202 jump *label147 equal false false
   203 control enabled reactor1 false
   204 print "STOP system fuel low"
   205 print "\n"
 
   397 op mul *tmp137 15 2
   398 op lessThan *tmp138 :start_reactor:fuel_stored 30
   399 set *tmp139 *tmp138
-    * jump *label183 equal *tmp139 false
+  400 jump *label183 equal *tmp138 false
   401 control enabled reactor2 false
   402 print "STOP system fuel low"
   403 print "\n"
 
   622 op mul *tmp137 15 3
   623 op lessThan *tmp138 :start_reactor:fuel_stored 45
   624 set *tmp139 *tmp138
-    * jump *label219 equal *tmp139 false
+  625 jump *label219 equal *tmp138 false
   626 control enabled reactor3 false
   627 print "STOP system fuel low"
   628 print "\n"
 
   795 label *label26
   796 set :fuel_5 :start_reactor*retval
   797 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  798 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   799 op or :fuel_many *tmp27 :start_reactor*retval
   800 label *label110
   801 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   199 op mul *tmp137 15 1
   200 op lessThan *tmp138 :start_reactor:fuel_stored 15
   201 set *tmp139 false
-    * jump *label147 equal false false
+  202 jump *label147 always
   203 control enabled reactor1 false
   204 print "STOP system fuel low"
   205 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    31 label *label7
    32 set .CONTAINER vault1
    33 set .NODE node1
-    * label *label112
    34 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    35 jump *label113 equal :check_radar:enemy_found null
    36 control enabled projector1 true
 
    66 set *tmp8 true
    67 jump *label11 always
    68 label *label12
-    * label *label13
    69 set *tmp8 false
    70 label *label11
    71 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label120
    72 op sub *tmp102 @tick :t_startup1
    73 op idiv :calc_charge_req:secs *tmp102 60
    74 op greaterThan *tmp104 :calc_charge_req:secs 30
 
    79 set .START_POWER_REQ 0
    80 jump *label123 always
    81 label *label121
-    * label *label122
    82 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    83 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    84 op idiv :calc_charge_req:charge_req *tmp110 0.04
    85 set .START_POWER_REQ :calc_charge_req:charge_req
    86 label *label123
-    * label *label124
    87 op sub *tmp102 @tick :t_startup2
    88 op idiv :calc_charge_req:secs *tmp102 60
    89 op greaterThan *tmp104 :calc_charge_req:secs 30
 
    94 set :calc_charge_req*retval 0
    95 jump *label127 always
    96 label *label125
-    * label *label126
    97 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    98 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    99 op idiv :calc_charge_req:charge_req *tmp110 0.04
   100 set :calc_charge_req*retval :calc_charge_req:charge_req
   101 label *label127
   102 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label128
   103 op sub *tmp102 @tick :t_startup3
   104 op idiv :calc_charge_req:secs *tmp102 60
   105 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   110 set :calc_charge_req*retval 0
   111 jump *label131 always
   112 label *label129
-    * label *label130
   113 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   114 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   115 op idiv :calc_charge_req:charge_req *tmp110 0.04
   116 set :calc_charge_req*retval :calc_charge_req:charge_req
   117 label *label131
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label132
   119 op sub *tmp102 @tick :t_startup4
   120 op idiv :calc_charge_req:secs *tmp102 60
   121 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   126 set :calc_charge_req*retval 0
   127 jump *label135 always
   128 label *label133
-    * label *label134
   129 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   130 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   131 op idiv :calc_charge_req:charge_req *tmp110 0.04
   132 set :calc_charge_req*retval :calc_charge_req:charge_req
   133 label *label135
   134 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label136
   135 op sub *tmp102 @tick :t_startup5
   136 op idiv :calc_charge_req:secs *tmp102 60
   137 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   142 set :calc_charge_req*retval 0
   143 jump *label139 always
   144 label *label137
-    * label *label138
   145 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   146 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   147 op idiv :calc_charge_req:charge_req *tmp110 0.04
   148 set :calc_charge_req*retval :calc_charge_req:charge_req
   149 label *label139
   150 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label144
   151 op sub *tmp113 @tick :t_startup1
   152 op idiv :start_reactor:secs *tmp113 60
   153 sensor :start_reactor:fuel reactor1 @blast-compound
 
   205 jump *label160 always
   206 label *label149
   207 jump *label156 greaterThanEq :start_reactor:secs 30
-    * label *label150
   208 op sub *tmp102 @tick :t_startup1
   209 op idiv :calc_charge_req:secs *tmp102 60
   210 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   215 set :calc_charge_req*retval 0
   216 jump *label153 always
   217 label *label151
-    * label *label152
   218 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   219 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   220 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   334 label *label178
   335 sensor *tmp201 reactor1 @enabled
   336 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label179
   337 set :fuel_1 :start_reactor:supply_fuel
   338 set :t_startup1 .RET_T_STARTUP
-    * label *label106
   339 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   340 control config unloader1 *tmp97
   341 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   342 control config unloader2 *tmp101
-    * label *label107
-    * label *label180
   343 op sub *tmp113 @tick :t_startup2
   344 op idiv :start_reactor:secs *tmp113 60
   345 sensor :start_reactor:fuel reactor2 @blast-compound
 
   397 jump *label196 always
   398 label *label185
   399 jump *label192 greaterThanEq :start_reactor:secs 30
-    * label *label186
   400 op sub *tmp102 @tick :t_startup2
   401 op idiv :calc_charge_req:secs *tmp102 60
   402 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   407 set :calc_charge_req*retval 0
   408 jump *label189 always
   409 label *label187
-    * label *label188
   410 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   411 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   412 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   526 label *label214
   527 sensor *tmp201 reactor2 @enabled
   528 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label215
   529 set :fuel_2 :start_reactor:supply_fuel
   530 set :t_startup2 .RET_T_STARTUP
-    * label *label108
   531 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   532 control config unloader3 *tmp97
   533 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   534 control config unloader4 *tmp101
-    * label *label109
-    * label *label116
   535 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   536 jump *label117 equal :check_radar:enemy_found null
   537 control enabled projector1 true
 
   558 label *label118
   559 label *label119
   560 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label216
   561 op sub *tmp113 @tick :t_startup3
   562 op idiv :start_reactor:secs *tmp113 60
   563 sensor :start_reactor:fuel reactor3 @blast-compound
 
   615 jump *label232 always
   616 label *label221
   617 jump *label228 greaterThanEq :start_reactor:secs 30
-    * label *label222
   618 op sub *tmp102 @tick :t_startup3
   619 op idiv :calc_charge_req:secs *tmp102 60
   620 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   625 set :calc_charge_req*retval 0
   626 jump *label225 always
   627 label *label223
-    * label *label224
   628 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   629 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   630 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   744 label *label250
   745 sensor *tmp201 reactor3 @enabled
   746 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label251
   747 set :fuel_3 :start_reactor:supply_fuel
   748 set :t_startup3 .RET_T_STARTUP
   749 set :start_reactor:reactor reactor4
 
   768 set :t_startup5 .RET_T_STARTUP
   769 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   770 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label110
   771 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   772 control config unloader5 *tmp97
   773 select *tmp101 equal :fuel_many false @blast-compound @scrap
   774 control config unloader6 *tmp101
-    * label *label111
   775 op or *tmp30 :fuel_1 :fuel_2
   776 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   777 sensor *tmp33 node1 @powerNetStored
 
   827 label *label34
   828 label *label30
   829 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label28
   830 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   831 control config unloader7 *tmp51
   832 sensor *tmp53 node1 @powerNetStored
 
   845 control enabled generator1 true
   846 control enabled generator2 true
   847 label *label39
-    * label *label37
-    * label *label100
   848 op idiv *tmp93 .AVG_SURPLUS 100
   849 op div :surplus *tmp93 10
-    * label *label101
   850 sensor :kilo:val node1 @powerNetStored
-    * label *label102
   851 op idiv *tmp93 :kilo:val 100
   852 op div :kilo*retval *tmp93 10
-    * label *label103
   853 set :charge :kilo*retval
   854 jump *label42 lessThanEq .START_POWER_REQ 0
-    * label *label104
   855 op idiv *tmp93 .START_POWER_REQ 100
   856 op div :kilo*retval *tmp93 10
-    * label *label105
   857 print "Req "
   858 print :kilo*retval
   859 print "kJ / "
 
   881 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   882 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   883 label *label48
-    * label *label49
   884 label *label46
-    * label *label47
   885 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   886 op lessThan *tmp83 .AVG_SURPLUS 8000
   887 op land *tmp84 *tmp81 *tmp83
 
   892 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   893 op min .REACTORS_DESIRED 5 *tmp89
   894 label *label50
-    * label *label51
-    * label *label45
   895 label *label43
   896 jump *label52 equal .REACTORS_DESIRED 5
   897 print "Require only "
 
   899 print "/5 reactors."
   900 print "\n"
   901 label *label52
-    * label *label53
   902 printflush message1
-    * label *label8
   903 jump *label7 always
-    * label *label9
   904 end
   905 label *label3
   906 op sub *tmp113 @tick :start_reactor:t_startup
 
   960 jump *label75 always
   961 label *label74
   962 jump *label76 greaterThanEq :start_reactor:secs 30
-    * label *label140
   963 op sub *tmp102 @tick :start_reactor:t_startup
   964 op idiv :calc_charge_req:secs *tmp102 60
   965 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   970 set :calc_charge_req*retval 0
   971 jump *label143 always
   972 label *label141
-    * label *label142
   973 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   974 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   975 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1089 label *label65
  1090 sensor *tmp201 :start_reactor:reactor @enabled
  1091 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label63
  1092 return :start_reactor*retaddr
  1093 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   180 control enabled reactor1 false
   181 print "STOP unwanted"
   182 print "\n"
-    * jump *label163 always
+  183 jump *label177 always
   184 label *label146
   185 op greaterThan *tmp136 1 1
   186 op mul *tmp137 15 1
 
   190 control enabled reactor1 false
   191 print "STOP system fuel low"
   192 print "\n"
-    * jump *label162 always
+  193 jump *label177 always
   194 label *label147
   195 jump *label148 greaterThan :start_reactor:fuel 1
   196 control enabled reactor1 false
   197 print "STOP fuel low"
   198 print "\n"
-    * jump *label161 always
+  199 jump *label177 always
   200 label *label148
   201 jump *label149 greaterThan :start_reactor:cryo 1
   202 control enabled reactor1 false
   203 print "STOP out of cryo"
   204 print "\n"
-    * jump *label160 always
+  205 jump *label177 always
   206 label *label149
   207 jump *label156 greaterThanEq :start_reactor:secs 30
   208 op sub *tmp102 @tick :t_startup1
 
   229 print "START FAIL battery"
   230 print "\n"
   231 set :start_reactor:supply_fuel false
-    * jump *label155 always
+  232 jump *label177 always
   233 label *label154
   234 op sub :start_reactor:time_left 30 :start_reactor:secs
   235 print "Starting "
 
   240 print "J"
   241 print "\n"
   242 label *label155
-    * jump *label159 always
+  243 jump *label177 always
   244 label *label156
   245 op lessThan *tmp161 :start_reactor:charge 2000
   246 op lessThan *tmp162 :start_reactor:surplus -500
 
   250 print "ABANDON - battery crit"
   251 print "\n"
   252 set :start_reactor:supply_fuel false
-    * jump *label158 always
+  253 jump *label177 always
   254 label *label157
   255 op idiv :start_reactor:mins :start_reactor:secs 6
   256 op div :start_reactor:mins :start_reactor:mins 10
 
   303 jump *label167 lessThanEq *tmp191 10
   304 print "WAIT fuel"
   305 print "\n"
-    * jump *label168 always
+  306 jump *label174 always
   307 label *label167
   308 print "WAIT system fuel"
   309 print "\n"
 
   372 control enabled reactor2 false
   373 print "STOP unwanted"
   374 print "\n"
-    * jump *label199 always
+  375 jump *label213 always
   376 label *label182
   377 op greaterThan *tmp136 2 1
   378 op mul *tmp137 15 2
 
   382 control enabled reactor2 false
   383 print "STOP system fuel low"
   384 print "\n"
-    * jump *label198 always
+  385 jump *label213 always
   386 label *label183
   387 jump *label184 greaterThan :start_reactor:fuel 1
   388 control enabled reactor2 false
   389 print "STOP fuel low"
   390 print "\n"
-    * jump *label197 always
+  391 jump *label213 always
   392 label *label184
   393 jump *label185 greaterThan :start_reactor:cryo 1
   394 control enabled reactor2 false
   395 print "STOP out of cryo"
   396 print "\n"
-    * jump *label196 always
+  397 jump *label213 always
   398 label *label185
   399 jump *label192 greaterThanEq :start_reactor:secs 30
   400 op sub *tmp102 @tick :t_startup2
 
   421 print "START FAIL battery"
   422 print "\n"
   423 set :start_reactor:supply_fuel false
-    * jump *label191 always
+  424 jump *label213 always
   425 label *label190
   426 op sub :start_reactor:time_left 30 :start_reactor:secs
   427 print "Starting "
 
   432 print "J"
   433 print "\n"
   434 label *label191
-    * jump *label195 always
+  435 jump *label213 always
   436 label *label192
   437 op lessThan *tmp161 :start_reactor:charge 2000
   438 op lessThan *tmp162 :start_reactor:surplus -500
 
   442 print "ABANDON - battery crit"
   443 print "\n"
   444 set :start_reactor:supply_fuel false
-    * jump *label194 always
+  445 jump *label213 always
   446 label *label193
   447 op idiv :start_reactor:mins :start_reactor:secs 6
   448 op div :start_reactor:mins :start_reactor:mins 10
 
   495 jump *label203 lessThanEq *tmp191 10
   496 print "WAIT fuel"
   497 print "\n"
-    * jump *label204 always
+  498 jump *label210 always
   499 label *label203
   500 print "WAIT system fuel"
   501 print "\n"
 
   590 control enabled reactor3 false
   591 print "STOP unwanted"
   592 print "\n"
-    * jump *label235 always
+  593 jump *label249 always
   594 label *label218
   595 op greaterThan *tmp136 3 1
   596 op mul *tmp137 15 3
 
   600 control enabled reactor3 false
   601 print "STOP system fuel low"
   602 print "\n"
-    * jump *label234 always
+  603 jump *label249 always
   604 label *label219
   605 jump *label220 greaterThan :start_reactor:fuel 1
   606 control enabled reactor3 false
   607 print "STOP fuel low"
   608 print "\n"
-    * jump *label233 always
+  609 jump *label249 always
   610 label *label220
   611 jump *label221 greaterThan :start_reactor:cryo 1
   612 control enabled reactor3 false
   613 print "STOP out of cryo"
   614 print "\n"
-    * jump *label232 always
+  615 jump *label249 always
   616 label *label221
   617 jump *label228 greaterThanEq :start_reactor:secs 30
   618 op sub *tmp102 @tick :t_startup3
 
   639 print "START FAIL battery"
   640 print "\n"
   641 set :start_reactor:supply_fuel false
-    * jump *label227 always
+  642 jump *label249 always
   643 label *label226
   644 op sub :start_reactor:time_left 30 :start_reactor:secs
   645 print "Starting "
 
   650 print "J"
   651 print "\n"
   652 label *label227
-    * jump *label231 always
+  653 jump *label249 always
   654 label *label228
   655 op lessThan *tmp161 :start_reactor:charge 2000
   656 op lessThan *tmp162 :start_reactor:surplus -500
 
   660 print "ABANDON - battery crit"
   661 print "\n"
   662 set :start_reactor:supply_fuel false
-    * jump *label230 always
+  663 jump *label249 always
   664 label *label229
   665 op idiv :start_reactor:mins :start_reactor:secs 6
   666 op div :start_reactor:mins :start_reactor:mins 10
 
   713 jump *label239 lessThanEq *tmp191 10
   714 print "WAIT fuel"
   715 print "\n"
-    * jump *label240 always
+  716 jump *label246 always
   717 label *label239
   718 print "WAIT system fuel"
   719 print "\n"
 
   797 jump *label31 equal :emerg_shutdown false
   798 print " Enemies detected."
   799 print "\n"
-    * jump *label32 always
+  800 jump *label30 always
   801 label *label31
   802 print " Critical power."
   803 print "\n"
 
   935 control enabled :start_reactor:reactor false
   936 print "STOP unwanted"
   937 print "\n"
-    * jump *label69 always
+  938 jump *label67 always
   939 label *label68
   940 op greaterThan *tmp136 :start_reactor:reactor_num 1
   941 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   945 control enabled :start_reactor:reactor false
   946 print "STOP system fuel low"
   947 print "\n"
-    * jump *label71 always
+  948 jump *label67 always
   949 label *label70
   950 jump *label72 greaterThan :start_reactor:fuel 1
   951 control enabled :start_reactor:reactor false
   952 print "STOP fuel low"
   953 print "\n"
-    * jump *label73 always
+  954 jump *label67 always
   955 label *label72
   956 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   957 control enabled :start_reactor:reactor false
   958 print "STOP out of cryo"
   959 print "\n"
-    * jump *label75 always
+  960 jump *label67 always
   961 label *label74
   962 jump *label76 greaterThanEq :start_reactor:secs 30
   963 op sub *tmp102 @tick :start_reactor:t_startup
 
   984 print "START FAIL battery"
   985 print "\n"
   986 set :start_reactor*retval false
-    * jump *label80 always
+  987 jump *label67 always
   988 label *label79
   989 op sub :start_reactor:time_left 30 :start_reactor:secs
   990 print "Starting "
 
   995 print "J"
   996 print "\n"
   997 label *label80
-    * jump *label77 always
+  998 jump *label67 always
   999 label *label76
  1000 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1001 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1005 print "ABANDON - battery crit"
  1006 print "\n"
  1007 set :start_reactor*retval false
-    * jump *label82 always
+ 1008 jump *label67 always
  1009 label *label81
  1010 op idiv :start_reactor:mins :start_reactor:secs 6
  1011 op div :start_reactor:mins :start_reactor:mins 10
 
  1058 jump *label89 lessThanEq *tmp191 .FUEL_REQ
  1059 print "WAIT fuel"
  1060 print "\n"
-    * jump *label90 always
+ 1061 jump *label88 always
  1062 label *label89
  1063 print "WAIT system fuel"
  1064 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    49 control enabled reactor5 false
    50 set :check_radar*retval true
    51 jump *label115 always
-    * jump *label114 always
    52 label *label113
    53 control enabled projector1 false
    54 control enabled projector2 false
 
   186 op lessThan *tmp138 :start_reactor:fuel_stored 15
   187 set *tmp139 false
   188 jump *label147 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label177 always
   189 label *label147
   190 jump *label148 greaterThan :start_reactor:fuel 1
   191 control enabled reactor1 false
 
   234 print :calc_charge_req*retval
   235 print "J"
   236 print "\n"
-    * label *label155
   237 jump *label177 always
   238 label *label156
   239 op lessThan *tmp161 :start_reactor:charge 2000
 
   253 print " "
   254 print "mins"
   255 print "\n"
-    * label *label158
-    * label *label159
-    * label *label160
-    * label *label161
-    * label *label162
-    * label *label163
   256 jump *label177 always
   257 label *label164
   258 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   295 label *label167
   296 print "WAIT system fuel"
   297 print "\n"
-    * label *label168
   298 jump *label174 always
   299 label *label169
   300 op mul *tmp194 45 1
 
   418 print :calc_charge_req*retval
   419 print "J"
   420 print "\n"
-    * label *label191
   421 jump *label213 always
   422 label *label192
   423 op lessThan *tmp161 :start_reactor:charge 2000
 
   437 print " "
   438 print "mins"
   439 print "\n"
-    * label *label194
-    * label *label195
-    * label *label196
-    * label *label197
-    * label *label198
-    * label *label199
   440 jump *label213 always
   441 label *label200
   442 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   479 label *label203
   480 print "WAIT system fuel"
   481 print "\n"
-    * label *label204
   482 jump *label210 always
   483 label *label205
   484 op mul *tmp194 45 2
 
   529 control enabled reactor5 false
   530 set :check_radar*retval true
   531 jump *label119 always
-    * jump *label118 always
   532 label *label117
   533 control enabled projector1 false
   534 control enabled projector2 false
 
   627 print :calc_charge_req*retval
   628 print "J"
   629 print "\n"
-    * label *label227
   630 jump *label249 always
   631 label *label228
   632 op lessThan *tmp161 :start_reactor:charge 2000
 
   646 print " "
   647 print "mins"
   648 print "\n"
-    * label *label230
-    * label *label231
-    * label *label232
-    * label *label233
-    * label *label234
-    * label *label235
   649 jump *label249 always
   650 label *label236
   651 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   688 label *label239
   689 print "WAIT system fuel"
   690 print "\n"
-    * label *label240
   691 jump *label246 always
   692 label *label241
   693 op mul *tmp194 45 3
 
   771 label *label31
   772 print " Critical power."
   773 print "\n"
-    * label *label32
   774 jump *label30 always
   775 label *label29
   776 jump *label33 notEqual :throttle_blast:reactors_fueled false
 
   870 label *label52
   871 printflush message1
   872 jump *label7 always
-    * end
   873 label *label3
   874 op sub *tmp113 @tick :start_reactor:t_startup
   875 op idiv :start_reactor:secs *tmp113 60
 
   962 print :calc_charge_req*retval
   963 print "J"
   964 print "\n"
-    * label *label80
   965 jump *label67 always
   966 label *label76
   967 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   981 print " "
   982 print "mins"
   983 print "\n"
-    * label *label82
-    * label *label77
-    * label *label75
-    * label *label73
-    * label *label71
-    * label *label69
   984 jump *label67 always
   985 label *label66
   986 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1023 label *label89
  1024 print "WAIT system fuel"
  1025 print "\n"
-    * label *label90
  1026 jump *label88 always
  1027 label *label87
  1028 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1050 sensor *tmp201 :start_reactor:reactor @enabled
  1051 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1052 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1:
 
    53 control enabled projector1 false
    54 control enabled projector2 false
    55 set :check_radar*retval false
-    * label *label114
    56 label *label115
    57 op notEqual *tmp9 switch1 null
    58 sensor *tmp10 switch1 @enabled
 
   532 control enabled projector1 false
   533 control enabled projector2 false
   534 set :check_radar*retval false
-    * label *label118
   535 label *label119
   536 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   537 op sub *tmp113 @tick :t_startup3

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   184 op mul *tmp137 15 1
   185 op lessThan *tmp138 :start_reactor:fuel_stored 15
   186 set *tmp139 false
-    * jump *label147 always
   187 label *label147
   188 jump *label148 greaterThan :start_reactor:fuel 1
   189 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   184 op mul *tmp137 15 1
   185 op lessThan *tmp138 :start_reactor:fuel_stored 15
   186 set *tmp139 false
-    * label *label147
   187 jump *label148 greaterThan :start_reactor:fuel 1
   188 control enabled reactor1 false
   189 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    59 op equal *tmp11 *tmp10 false
    60 op land *tmp12 *tmp9 *tmp11
    61 jump *label12 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   62 print "User has disabled emergency switch\n"
    63 set *tmp8 true
    64 jump *label11 always
    65 label *label12
 
   161 op mul *tmp125 :start_reactor:surplus 0.2
   162 op add .AVG_SURPLUS *tmp124 *tmp125
   163 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  164 print "#1 - "
   165 jump *label145 equal :emerg_shutdown false
   166 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  167 print "emergency mode\n"
   168 set :start_reactor:supply_fuel false
   169 jump *label178 always
   170 label *label145
   171 jump *label164 equal :start_reactor:enabled false
   172 jump *label146 greaterThanEq .REACTORS_DESIRED 1
   173 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  174 print "STOP unwanted\n"
   175 jump *label177 always
   176 label *label146
   177 op greaterThan *tmp136 1 1
 
   180 set *tmp139 false
   181 jump *label148 greaterThan :start_reactor:fuel 1
   182 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  183 print "STOP fuel low\n"
   184 jump *label177 always
   185 label *label148
   186 jump *label149 greaterThan :start_reactor:cryo 1
   187 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  188 print "STOP out of cryo\n"
   189 jump *label177 always
   190 label *label149
   191 jump *label156 greaterThanEq :start_reactor:secs 30
 
   210 op land *tmp156 *tmp154 *tmp155
   211 jump *label154 equal *tmp156 false
   212 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  213 print "START FAIL battery\n"
   214 set :start_reactor:supply_fuel false
   215 jump *label177 always
   216 label *label154
   217 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  218 print "Starting {0} secs, req {0}J\n"
+  219 format :start_reactor:time_left
+  220 format :calc_charge_req*retval
   221 jump *label177 always
   222 label *label156
   223 op lessThan *tmp161 :start_reactor:charge 2000
 
   225 op land *tmp163 *tmp161 *tmp162
   226 jump *label157 equal *tmp163 false
   227 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  228 print "ABANDON - battery crit\n"
   229 set :start_reactor:supply_fuel false
   230 jump *label177 always
   231 label *label157
   232 op idiv :start_reactor:mins :start_reactor:secs 6
   233 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  234 print "RUN {0} mins\n"
+  235 format :start_reactor:mins
   236 jump *label177 always
   237 label *label164
   238 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   244 op mul *tmp175 2 1
   245 op add :start_reactor:cryo_req 3 2
   246 jump *label165 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  247 print "IDLE\n"
   248 set :start_reactor:supply_fuel false
   249 jump *label176 always
   250 label *label165
 
   254 op div :start_reactor:flow *tmp183 10
   255 op idiv *tmp186 :start_reactor:charge_units 0.001
   256 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  257 print "WAIT power. (%{0}J + %{0}W)\n"
+  258 format :start_reactor:charge
+  259 format :start_reactor:flow
   260 set :start_reactor:supply_fuel false
   261 jump *label175 always
   262 label *label166
 
   265 jump *label169 equal *tmp189 false
   266 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   267 jump *label167 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  268 print "WAIT fuel\n"
   269 jump *label174 always
   270 label *label167
-    * print "WAIT system fuel"
-    * print "\n"
+  271 print "WAIT system fuel\n"
   272 jump *label174 always
   273 label *label169
   274 op mul *tmp194 45 1
   275 jump *label170 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  276 print "WAIT buffer fuel\n"
   277 jump *label173 always
   278 label *label170
   279 jump *label171 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  280 print "WAIT cryo\n"
   281 jump *label172 always
   282 label *label171
-    * print "STARTUP"
-    * print "\n"
+  283 print "STARTUP\n"
   284 op add .START_POWER_REQ .START_POWER_REQ 23000
   285 control enabled reactor1 true
   286 label *label172
 
   314 op mul *tmp125 :start_reactor:surplus 0.2
   315 op add .AVG_SURPLUS *tmp124 *tmp125
   316 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  317 print "#2 - "
   318 jump *label181 equal :emerg_shutdown false
   319 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  320 print "emergency mode\n"
   321 set :start_reactor:supply_fuel false
   322 jump *label214 always
   323 label *label181
   324 jump *label200 equal :start_reactor:enabled false
   325 jump *label182 greaterThanEq .REACTORS_DESIRED 2
   326 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  327 print "STOP unwanted\n"
   328 jump *label213 always
   329 label *label182
   330 op greaterThan *tmp136 2 1
 
   333 set *tmp139 *tmp138
   334 jump *label183 equal *tmp138 false
   335 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  336 print "STOP system fuel low\n"
   337 jump *label213 always
   338 label *label183
   339 jump *label184 greaterThan :start_reactor:fuel 1
   340 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  341 print "STOP fuel low\n"
   342 jump *label213 always
   343 label *label184
   344 jump *label185 greaterThan :start_reactor:cryo 1
   345 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  346 print "STOP out of cryo\n"
   347 jump *label213 always
   348 label *label185
   349 jump *label192 greaterThanEq :start_reactor:secs 30
 
   368 op land *tmp156 *tmp154 *tmp155
   369 jump *label190 equal *tmp156 false
   370 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  371 print "START FAIL battery\n"
   372 set :start_reactor:supply_fuel false
   373 jump *label213 always
   374 label *label190
   375 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  376 print "Starting {0} secs, req {0}J\n"
+  377 format :start_reactor:time_left
+  378 format :calc_charge_req*retval
   379 jump *label213 always
   380 label *label192
   381 op lessThan *tmp161 :start_reactor:charge 2000
 
   383 op land *tmp163 *tmp161 *tmp162
   384 jump *label193 equal *tmp163 false
   385 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  386 print "ABANDON - battery crit\n"
   387 set :start_reactor:supply_fuel false
   388 jump *label213 always
   389 label *label193
   390 op idiv :start_reactor:mins :start_reactor:secs 6
   391 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  392 print "RUN {0} mins\n"
+  393 format :start_reactor:mins
   394 jump *label213 always
   395 label *label200
   396 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   402 op mul *tmp175 2 2
   403 op add :start_reactor:cryo_req 3 4
   404 jump *label201 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  405 print "IDLE\n"
   406 set :start_reactor:supply_fuel false
   407 jump *label212 always
   408 label *label201
 
   412 op div :start_reactor:flow *tmp183 10
   413 op idiv *tmp186 :start_reactor:charge_units 0.001
   414 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  415 print "WAIT power. (%{0}J + %{0}W)\n"
+  416 format :start_reactor:charge
+  417 format :start_reactor:flow
   418 set :start_reactor:supply_fuel false
   419 jump *label211 always
   420 label *label202
 
   423 jump *label205 equal *tmp189 false
   424 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   425 jump *label203 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  426 print "WAIT fuel\n"
   427 jump *label210 always
   428 label *label203
-    * print "WAIT system fuel"
-    * print "\n"
+  429 print "WAIT system fuel\n"
   430 jump *label210 always
   431 label *label205
   432 op mul *tmp194 45 2
   433 jump *label206 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  434 print "WAIT buffer fuel\n"
   435 jump *label209 always
   436 label *label206
   437 jump *label207 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  438 print "WAIT cryo\n"
   439 jump *label208 always
   440 label *label207
-    * print "STARTUP"
-    * print "\n"
+  441 print "STARTUP\n"
   442 op add .START_POWER_REQ .START_POWER_REQ 23000
   443 control enabled reactor2 true
   444 label *label208
 
   496 op mul *tmp125 :start_reactor:surplus 0.2
   497 op add .AVG_SURPLUS *tmp124 *tmp125
   498 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  499 print "#3 - "
   500 jump *label217 equal :emerg_shutdown false
   501 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  502 print "emergency mode\n"
   503 set :start_reactor:supply_fuel false
   504 jump *label250 always
   505 label *label217
   506 jump *label236 equal :start_reactor:enabled false
   507 jump *label218 greaterThanEq .REACTORS_DESIRED 3
   508 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  509 print "STOP unwanted\n"
   510 jump *label249 always
   511 label *label218
   512 op greaterThan *tmp136 3 1
 
   515 set *tmp139 *tmp138
   516 jump *label219 equal *tmp138 false
   517 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  518 print "STOP system fuel low\n"
   519 jump *label249 always
   520 label *label219
   521 jump *label220 greaterThan :start_reactor:fuel 1
   522 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  523 print "STOP fuel low\n"
   524 jump *label249 always
   525 label *label220
   526 jump *label221 greaterThan :start_reactor:cryo 1
   527 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  528 print "STOP out of cryo\n"
   529 jump *label249 always
   530 label *label221
   531 jump *label228 greaterThanEq :start_reactor:secs 30
 
   550 op land *tmp156 *tmp154 *tmp155
   551 jump *label226 equal *tmp156 false
   552 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  553 print "START FAIL battery\n"
   554 set :start_reactor:supply_fuel false
   555 jump *label249 always
   556 label *label226
   557 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  558 print "Starting {0} secs, req {0}J\n"
+  559 format :start_reactor:time_left
+  560 format :calc_charge_req*retval
   561 jump *label249 always
   562 label *label228
   563 op lessThan *tmp161 :start_reactor:charge 2000
 
   565 op land *tmp163 *tmp161 *tmp162
   566 jump *label229 equal *tmp163 false
   567 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  568 print "ABANDON - battery crit\n"
   569 set :start_reactor:supply_fuel false
   570 jump *label249 always
   571 label *label229
   572 op idiv :start_reactor:mins :start_reactor:secs 6
   573 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  574 print "RUN {0} mins\n"
+  575 format :start_reactor:mins
   576 jump *label249 always
   577 label *label236
   578 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   584 op mul *tmp175 2 3
   585 op add :start_reactor:cryo_req 3 6
   586 jump *label237 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  587 print "IDLE\n"
   588 set :start_reactor:supply_fuel false
   589 jump *label248 always
   590 label *label237
 
   594 op div :start_reactor:flow *tmp183 10
   595 op idiv *tmp186 :start_reactor:charge_units 0.001
   596 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  597 print "WAIT power. (%{0}J + %{0}W)\n"
+  598 format :start_reactor:charge
+  599 format :start_reactor:flow
   600 set :start_reactor:supply_fuel false
   601 jump *label247 always
   602 label *label238
 
   605 jump *label241 equal *tmp189 false
   606 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   607 jump *label239 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  608 print "WAIT fuel\n"
   609 jump *label246 always
   610 label *label239
-    * print "WAIT system fuel"
-    * print "\n"
+  611 print "WAIT system fuel\n"
   612 jump *label246 always
   613 label *label241
   614 op mul *tmp194 45 3
   615 jump *label242 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  616 print "WAIT buffer fuel\n"
   617 jump *label245 always
   618 label *label242
   619 jump *label243 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  620 print "WAIT cryo\n"
   621 jump *label244 always
   622 label *label243
-    * print "STARTUP"
-    * print "\n"
+  623 print "STARTUP\n"
   624 op add .START_POWER_REQ .START_POWER_REQ 23000
   625 control enabled reactor3 true
   626 label *label244
 
   675 op or *tmp43 *tmp42 :emerg_shutdown
   676 jump *label29 equal *tmp43 false
   677 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  678 print "Central Fuel at {0} / 0 - "
+  679 format :throttle_blast:fuel_stored
   680 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  681 print " Enemies detected.\n"
   682 jump *label30 always
   683 label *label31
-    * print " Critical power."
-    * print "\n"
+  684 print " Critical power.\n"
   685 jump *label30 always
   686 label *label29
   687 jump *label33 notEqual :throttle_blast:reactors_fueled false
   688 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  689 print "Fuel {0} / 150 (due to emergency)\n"
+  690 format :throttle_blast:fuel_stored
   691 jump *label34 always
   692 label *label33
   693 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  694 print "Fuel {0} / 800\n"
+  695 format :throttle_blast:fuel_stored
   696 label *label34
   697 label *label30
   698 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   705 op lessThan *tmp57 .START_POWER_REQ 10
   706 op land *tmp58 *tmp56 *tmp57
   707 jump *label38 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  708 print "Differential now idle.\n"
   709 control enabled generator1 false
   710 control enabled generator2 false
   711 jump *label39 always
 
   722 jump *label42 lessThanEq .START_POWER_REQ 0
   723 op idiv *tmp93 .START_POWER_REQ 100
   724 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  725 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  726 format :kilo*retval
+  727 format :charge
+  728 format :surplus
   729 jump *label43 always
   730 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  731 print "Power {0}kW, {0}kJ\n"
+  732 format :surplus
+  733 format :kilo*retval
   734 sensor *tmp71 node1 @powerNetStored
   735 sensor *tmp72 node1 @powerNetCapacity
   736 op div :update_reactors_desired:stored *tmp71 *tmp72
 
   755 label *label50
   756 label *label43
   757 jump *label52 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  758 print "Require only {0}/5 reactors.\n"
+  759 format .REACTORS_DESIRED
   760 label *label52
   761 printflush message1
   762 jump *label7 always
 
   777 op mul *tmp125 :start_reactor:surplus 0.2
   778 op add .AVG_SURPLUS *tmp124 *tmp125
   779 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  780 print "#{0} - "
+  781 format :start_reactor:reactor_num
   782 jump *label64 equal :start_reactor:emerg_shutdown false
   783 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  784 print "emergency mode\n"
   785 set :start_reactor*retval false
   786 jump *label65 always
   787 label *label64
   788 jump *label66 equal :start_reactor:enabled false
   789 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   790 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  791 print "STOP unwanted\n"
   792 jump *label67 always
   793 label *label68
   794 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   797 op land *tmp139 *tmp136 *tmp138
   798 jump *label70 equal *tmp139 false
   799 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  800 print "STOP system fuel low\n"
   801 jump *label67 always
   802 label *label70
   803 jump *label72 greaterThan :start_reactor:fuel 1
   804 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  805 print "STOP fuel low\n"
   806 jump *label67 always
   807 label *label72
   808 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   809 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  810 print "STOP out of cryo\n"
   811 jump *label67 always
   812 label *label74
   813 jump *label76 greaterThanEq :start_reactor:secs 30
 
   832 op land *tmp156 *tmp154 *tmp155
   833 jump *label79 equal *tmp156 false
   834 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  835 print "START FAIL battery\n"
   836 set :start_reactor*retval false
   837 jump *label67 always
   838 label *label79
   839 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  840 print "Starting {0} secs, req {0}J\n"
+  841 format :start_reactor:time_left
+  842 format :calc_charge_req*retval
   843 jump *label67 always
   844 label *label76
   845 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   847 op land *tmp163 *tmp161 *tmp162
   848 jump *label81 equal *tmp163 false
   849 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  850 print "ABANDON - battery crit\n"
   851 set :start_reactor*retval false
   852 jump *label67 always
   853 label *label81
   854 op idiv :start_reactor:mins :start_reactor:secs 6
   855 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  856 print "RUN {0} mins\n"
+  857 format :start_reactor:mins
   858 jump *label67 always
   859 label *label66
   860 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   866 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   867 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   868 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  869 print "IDLE\n"
   870 set :start_reactor*retval false
   871 jump *label84 always
   872 label *label83
 
   876 op div :start_reactor:flow *tmp183 10
   877 op idiv *tmp186 :start_reactor:charge_units 0.001
   878 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  879 print "WAIT power. (%{0}J + %{0}W)\n"
+  880 format :start_reactor:charge
+  881 format :start_reactor:flow
   882 set :start_reactor*retval false
   883 jump *label86 always
   884 label *label85
 
   887 jump *label87 equal *tmp189 false
   888 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   889 jump *label89 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  890 print "WAIT fuel\n"
   891 jump *label88 always
   892 label *label89
-    * print "WAIT system fuel"
-    * print "\n"
+  893 print "WAIT system fuel\n"
   894 jump *label88 always
   895 label *label87
   896 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   897 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  898 print "WAIT buffer fuel\n"
   899 jump *label92 always
   900 label *label91
   901 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  902 print "WAIT cryo\n"
   903 jump *label94 always
   904 label *label93
-    * print "STARTUP"
-    * print "\n"
+  905 print "STARTUP\n"
   906 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   907 control enabled :start_reactor:reactor true
   908 label *label94

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp231 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label113 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label115 always
label *label113
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label115
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label12 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always
label *label12
set *tmp8 false
label *label11
op or :emerg_shutdown :check_radar*retval *tmp8
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label121 equal *tmp107 false
set .START_POWER_REQ 0
jump *label123 always
label *label121
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
label *label123
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label125 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label127 always
label *label125
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label127
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label129 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label131 always
label *label129
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label131
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label133 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label135
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label137 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label139 always
label *label137
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label139
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label145 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label178 always
label *label145
jump *label164 equal :start_reactor:enabled false
jump *label146 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label177 always
label *label146
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label148 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label177 always
label *label148
jump *label149 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label177 always
label *label149
jump *label156 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label151 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label153 always
label *label151
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label153
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label154 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label177 always
label *label154
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label177 always
label *label156
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label157 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label177 always
label *label157
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label177 always
label *label164
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label165 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label176 always
label *label165
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label166 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label175 always
label *label166
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label169 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label167 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label174 always
label *label167
print "WAIT system fuel\n"
jump *label174 always
label *label169
op mul *tmp194 45 1
jump *label170 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label173 always
label *label170
jump *label171 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label172 always
label *label171
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label172
label *label173
label *label174
label *label175
label *label176
label *label177
label *label178
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label181 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label214 always
label *label181
jump *label200 equal :start_reactor:enabled false
jump *label182 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label213 always
label *label182
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label183 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label213 always
label *label183
jump *label184 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label213 always
label *label184
jump *label185 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label213 always
label *label185
jump *label192 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label187 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label189 always
label *label187
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label189
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label190 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label213 always
label *label190
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label213 always
label *label192
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label193 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label213 always
label *label193
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label213 always
label *label200
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label201 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label212 always
label *label201
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label202 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label211 always
label *label202
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label205 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label203 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label210 always
label *label203
print "WAIT system fuel\n"
jump *label210 always
label *label205
op mul *tmp194 45 2
jump *label206 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label209 always
label *label206
jump *label207 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label208 always
label *label207
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label208
label *label209
label *label210
label *label211
label *label212
label *label213
label *label214
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label117 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label119 always
label *label117
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label119
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label217 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label250 always
label *label217
jump *label236 equal :start_reactor:enabled false
jump *label218 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label249 always
label *label218
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label219 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label249 always
label *label219
jump *label220 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label249 always
label *label220
jump *label221 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label249 always
label *label221
jump *label228 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label223 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label225 always
label *label223
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label225
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label226 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label249 always
label *label226
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label249 always
label *label228
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label229 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label249 always
label *label229
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label249 always
label *label236
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label237 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label248 always
label *label237
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label238 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label247 always
label *label238
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label241 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label239 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label246 always
label *label239
print "WAIT system fuel\n"
jump *label246 always
label *label241
op mul *tmp194 45 3
jump *label242 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label245 always
label *label242
jump *label243 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label244 always
label *label243
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label244
label *label245
label *label246
label *label247
label *label248
label *label249
label *label250
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
setaddr :start_reactor*retaddr *label25
call *label3 *invalid :start_reactor*retval
label *label25
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
setaddr :start_reactor*retaddr *label26
call *label3 *invalid :start_reactor*retval
label *label26
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label29 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label30 always
label *label31
print " Critical power.\n"
jump *label30 always
label *label29
jump *label33 notEqual :throttle_blast:reactors_fueled false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label30
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label38 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label46 equal *tmp77 false
jump *label48 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label48
label *label46
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label50 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label50
label *label43
jump *label52 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label52
printflush message1
jump *label7 always
label *label3
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label64 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label65 always
label *label64
jump *label66 equal :start_reactor:enabled false
jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label67 always
label *label68
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label70 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label67 always
label *label70
jump *label72 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label67 always
label *label72
jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label67 always
label *label74
jump *label76 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label141 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label143 always
label *label141
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label143
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label79 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label67 always
label *label79
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label67 always
label *label76
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label81 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label67 always
label *label81
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label67 always
label *label66
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label84 always
label *label83
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label85 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label86 always
label *label85
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label87 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label89 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label88 always
label *label89
print "WAIT system fuel\n"
jump *label88 always
label *label87
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label92 always
label *label91
jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label94 always
label *label93
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label94
label *label92
label *label88
label *label86
label *label84
label *label67
label *label65
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
