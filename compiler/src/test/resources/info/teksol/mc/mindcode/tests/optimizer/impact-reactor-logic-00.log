   697 instructions before optimizations.
    76 instructions eliminated by Temp Variables Elimination (6 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     3 instructions eliminated by Jump Normalization (2 passes, 5 iterations).
    37 instructions eliminated by Condition Optimization (2 passes, 7 iterations).
    40 instructions eliminated by Single Step Elimination (3 passes, 8 iterations).
     3 instructions eliminated by Expression Optimization (3 iterations).
    21 instructions eliminated by Boolean Optimization (2 passes, 6 iterations).
       2 short-circuited expressions turned to full evaluations.
       5 fully-evaluated expressions optimized using selects.
    67 instructions eliminated by Data Flow Optimization (9 passes, 29 iterations).
   499 instructions added by Function Inlining (10 iterations).
    17 function calls inlined by Function Inlining.
     5 instructions eliminated by Jump Straightening (6 iterations).
    33 instructions updated by Jump Threading.
     7 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   746 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 547):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 551):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332
  ! Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 560):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +54, benefit      503.9, efficiency      9.332 (+38 instructions)
    Inline function 'start_reactor' defined at line 140:1        size  +559, benefit      687.5, efficiency      1.230
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 74:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 75:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 76:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 77:24                           size   +11, benefit      100.0, efficiency      9.091
    Inline function call at line 80:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 84:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 91:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 93:14                           size  +140, benefit      137.5, efficiency      0.982
    Inline function call at line 173:26                          size   +11, benefit        3.9, efficiency      0.355

Pass 1: speed optimization selection (cost limit 522):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+13 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 509):
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935 (+140 instructions)
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 369):
  ! Inline function 'start_reactor' defined at line 140:1        size  +440, benefit      550.0, efficiency      1.250
  * Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935 (+141 instructions)
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 228):
  ! Inline function 'start_reactor' defined at line 140:1        size  +293, benefit      412.5, efficiency      1.408
  * Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935 (+141 instructions)
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 1: speed optimization selection (cost limit 87):
  ! Inline function 'start_reactor' defined at line 140:1        size  +146, benefit      275.0, efficiency      1.884
  ! Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
  ! Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935

Pass 2: speed optimization selection (cost limit 115):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Pass 3: speed optimization selection (cost limit 115):
  ! Inline function 'start_reactor' defined at line 140:1        size  +143, benefit      275.0, efficiency      1.923
  ! Inline function call at line 91:14                           size  +144, benefit      137.5, efficiency      0.955
  ! Inline function call at line 93:14                           size  +144, benefit      137.5, efficiency      0.955

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    74 print "\n"
    75 set *tmp8 true
    76 jump *label11 always
-    * set *tmp12 null
    77 jump *label13 always
    78 label *label12
-    * set *tmp12 null
    79 label *label13
    80 set *tmp8 false
    81 jump *label11 always
 
   134 setaddr :update_fuel*retaddr *label22 (h:*label22)
   135 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   136 label *label22
-    * set *tmp19 :update_fuel*retval
   137 set :start_reactor:reactor reactor2
   138 set :start_reactor:reactor_num 2
   139 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   151 setaddr :update_fuel*retaddr *label24 (h:*label24)
   152 call *label1 *invalid :update_fuel*retval (m:*label24) (h:*label24)
   153 label *label24
-    * set *tmp21 :update_fuel*retval
   154 set :check_radar:unit .TOWER
   155 setaddr :check_radar*retaddr *label25 (h:*label25)
   156 call *label4 *invalid :check_radar*retval (m:*label25) (h:*label25)
 
   210 setaddr :update_fuel*retaddr *label34 (h:*label34)
   211 call *label1 *invalid :update_fuel*retval (m:*label34) (h:*label34)
   212 label *label34
-    * set *tmp27 :update_fuel*retval
   213 jump *label37 notEqual :fuel_1 false
   214 label *label39
   215 jump *label37 notEqual :fuel_2 false
 
   263 print "\n"
   264 set *tmp40 null
   265 label *label47
-    * set *tmp39 *tmp40
   266 jump *label42 always
   267 label *label41
   268 op equal *tmp41 :throttle_blast:reactors_fueled false
 
   289 print "n"
   290 set *tmp42 null
   291 label *label49
-    * set *tmp39 *tmp42
   292 label *label42
   293 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
   294 set *tmp29 *tmp43
 
   330 control enabled *tmp60 true
   331 set *tmp53 true
   332 label *label54
-    * set *tmp47 *tmp53
   333 label *label52
   334 set :kilo:val .AVG_SURPLUS
   335 setaddr :kilo*retaddr *label57 (h:*label57)
 
   360 print :surplus
   361 print "kW flow."
   362 print "\n"
-    * set *tmp66 null
   363 jump *label60 always
   364 label *label59
   365 print "Power "
 
   389 label *label67
   390 set *tmp77 null
   391 label *label68
-    * set *tmp75 *tmp77
   392 jump *label64 always
   393 label *label63
-    * set *tmp75 null
   394 label *label64
   395 op lessThan *tmp78 :update_reactors_desired:stored 0.8
   396 jump *label69 equal *tmp78 false
 
   414 label *label70
   415 set *tmp68 *tmp81
   416 label *label62
-    * set *tmp66 *tmp68
   417 label *label60
   418 op notEqual *tmp87 .REACTORS_DESIRED 5
   419 jump *label73 equal *tmp87 false
 
   421 print .REACTORS_DESIRED
   422 print "/5 reactors."
   423 print "\n"
-    * set *tmp88 null
   424 jump *label74 always
   425 label *label73
-    * set *tmp88 null
   426 label *label74
   427 printflush message1
   428 label *label8
 
   474 label *label84
   475 set :calc_charge_req*retval 0
   476 jump *label81 always
-    * set *tmp103 null
   477 jump *label83 always
   478 label *label82
-    * set *tmp103 null
   479 label *label83
   480 op sub *tmp104 30 :calc_charge_req:secs
   481 set :calc_charge_req:time_left *tmp104
 
   525 print "emergency mode"
   526 print "\n"
   527 set :start_reactor:supply_fuel false
-    * set *tmp123 :start_reactor:supply_fuel
   528 jump *label88 always
   529 label *label87
   530 jump *label89 equal :start_reactor:enabled false
 
   740 label *label113
   741 set *tmp126 *tmp170
   742 label *label90
-    * set *tmp123 *tmp126
   743 label *label88
   744 sensor *tmp192 :start_reactor:reactor @enabled
   745 op notEqual *tmp193 :start_reactor:enabled *tmp192
   746 jump *label126 equal *tmp193 false
   747 set *tmp195 @tick
   748 set .RET_T_STARTUP *tmp195
-    * set *tmp194 .RET_T_STARTUP
   749 jump *label127 always
   750 label *label126
-    * set *tmp194 null
   751 label *label127
   752 set :start_reactor*retval :start_reactor:supply_fuel
   753 jump *label86 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   256 jump *label46 equal :throttle_blast:emerg_shutdown false
   257 print " Enemies detected."
   258 print "\n"
-    * set *tmp40 null
   259 jump *label47 always
   260 label *label46
   261 print " Critical power."
   262 print "\n"
-    * set *tmp40 null
   263 label *label47
   264 jump *label42 always
   265 label *label41
 
   274 print " "
   275 print "(due to emergency)"
   276 print "\n"
-    * set *tmp42 null
   277 jump *label49 always
   278 label *label48
   279 set :throttle_blast:limit .FUEL_LIMIT
 
   284 print :throttle_blast:limit
   285 print "\"
   286 print "n"
-    * set *tmp42 null
   287 label *label49
   288 label *label42
   289 op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
 
   317 control enabled *tmp54 false
   318 set *tmp56 generator2
   319 control enabled *tmp56 false
-    * set *tmp53 false
   320 jump *label54 always
   321 label *label53
   322 set *tmp58 generator1
   323 control enabled *tmp58 true
   324 set *tmp60 generator2
   325 control enabled *tmp60 true
-    * set *tmp53 true
   326 label *label54
   327 label *label52
   328 set :kilo:val .AVG_SURPLUS
 
   378 jump *label67 equal *tmp76 false
   379 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   380 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp77 .AVG_SURPLUS
   381 jump *label68 always
   382 label *label67
-    * set *tmp77 null
   383 label *label68
   384 jump *label64 always
   385 label *label63
 
   404 label *label69
   405 set *tmp81 null
   406 label *label70
-    * set *tmp68 *tmp81
   407 label *label62
   408 label *label60
   409 op notEqual *tmp87 .REACTORS_DESIRED 5
 
   447 set *tmp97 .FUEL_OFF
   448 label *label80
   449 control config *tmp94 *tmp97
-    * set :update_fuel*retval *tmp97
   450 label *label76
   451 return :update_fuel*retaddr
   452 end
 
   634 label *label94
   635 set *tmp128 *tmp134
   636 label *label92
-    * set *tmp126 *tmp128
   637 jump *label90 always
   638 label *label89
   639 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   727 label *label115
   728 set *tmp170 *tmp173
   729 label *label113
-    * set *tmp126 *tmp170
   730 label *label90
   731 label *label88
   732 sensor *tmp192 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   399 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   400 op min *tmp86 5 *tmp85
   401 set .REACTORS_DESIRED *tmp86
-    * set *tmp81 .REACTORS_DESIRED
   402 jump *label70 always
   403 label *label69
-    * set *tmp81 null
   404 label *label70
   405 label *label62
   406 label *label60
 
   522 control enabled *tmp129 false
   523 print "STOP unwanted"
   524 print "\n"
-    * set *tmp128 null
   525 jump *label92 always
   526 label *label91
   527 op greaterThan *tmp131 :start_reactor:reactor_num 1
 
   629 label *label98
   630 set *tmp134 *tmp138
   631 label *label94
-    * set *tmp128 *tmp134
   632 label *label92
   633 jump *label90 always
   634 label *label89
 
   648 print "IDLE"
   649 print "\n"
   650 set :start_reactor:supply_fuel false
-    * set *tmp170 :start_reactor:supply_fuel
   651 jump *label113 always
   652 label *label112
   653 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
 
   720 label *label117
   721 set *tmp173 *tmp181
   722 label *label115
-    * set *tmp170 *tmp173
   723 label *label113
   724 label *label90
   725 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   536 control enabled *tmp135 false
   537 print "STOP system fuel low"
   538 print "\n"
-    * set *tmp134 null
   539 jump *label94 always
   540 label *label93
   541 op lessThanEq *tmp137 :start_reactor:fuel 1
 
   626 label *label100
   627 set *tmp138 *tmp142
   628 label *label98
-    * set *tmp134 *tmp138
   629 label *label94
   630 label *label92
   631 jump *label90 always
 
   666 print "W)"
   667 print "\n"
   668 set :start_reactor:supply_fuel false
-    * set *tmp173 :start_reactor:supply_fuel
   669 jump *label115 always
   670 label *label114
   671 jump *label116 equal :start_reactor:fuel_on false
 
   715 label *label123
   716 set *tmp181 *tmp187
   717 label *label117
-    * set *tmp173 *tmp181
   718 label *label115
   719 label *label113
   720 label *label90

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   544 control enabled *tmp139 false
   545 print "STOP fuel low"
   546 print "\n"
-    * set *tmp138 null
   547 jump *label98 always
   548 label *label97
   549 op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
 
   623 label *label102
   624 set *tmp142 *tmp146
   625 label *label100
-    * set *tmp138 *tmp142
   626 label *label98
   627 label *label94
   628 label *label92
 
   684 print "\n"
   685 set *tmp184 null
   686 label *label121
-    * set *tmp181 *tmp184
   687 jump *label117 always
   688 label *label116
   689 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   710 label *label125
   711 set *tmp187 *tmp189
   712 label *label123
-    * set *tmp181 *tmp187
   713 label *label117
   714 label *label115
   715 label *label113

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   552 control enabled *tmp143 false
   553 print "STOP out of cryo"
   554 print "\n"
-    * set *tmp142 null
   555 jump *label100 always
   556 label *label99
   557 op lessThan *tmp145 :start_reactor:secs 30
 
   620 label *label109
   621 set *tmp146 *tmp156
   622 label *label102
-    * set *tmp142 *tmp146
   623 label *label100
   624 label *label98
   625 label *label94
 
   675 jump *label120 equal *tmp183 false
   676 print "WAIT fuel"
   677 print "\n"
-    * set *tmp184 null
   678 jump *label121 always
   679 label *label120
   680 print "WAIT system fuel"
   681 print "\n"
-    * set *tmp184 null
   682 label *label121
   683 jump *label117 always
   684 label *label116
 
   687 jump *label122 equal *tmp186 false
   688 print "WAIT buffer fuel"
   689 print "\n"
-    * set *tmp187 null
   690 jump *label123 always
   691 label *label122
   692 op lessThan *tmp188 :start_reactor:cryo :start_reactor:cryo_req
 
   703 control enabled *tmp190 true
   704 set *tmp189 true
   705 label *label125
-    * set *tmp187 *tmp189
   706 label *label123
   707 label *label117
   708 label *label115

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   589 print "\n"
   590 set *tmp150 null
   591 label *label105
-    * set *tmp146 *tmp150
   592 jump *label102 always
   593 label *label101
   594 op lessThan *tmp154 :start_reactor:charge .PWR_ABANDON
 
   617 print "\n"
   618 set *tmp156 null
   619 label *label109
-    * set *tmp146 *tmp156
   620 label *label102
   621 label *label100
   622 label *label98
 
   691 jump *label124 equal *tmp188 false
   692 print "WAIT cryo"
   693 print "\n"
-    * set *tmp189 null
   694 jump *label125 always
   695 label *label124
   696 print "STARTUP"
 
   698 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   699 set *tmp190 :start_reactor:reactor
   700 control enabled *tmp190 true
-    * set *tmp189 true
   701 label *label125
   702 label *label123
   703 label *label117

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   575 print "START FAIL battery"
   576 print "\n"
   577 set :start_reactor:supply_fuel false
-    * set *tmp150 :start_reactor:supply_fuel
   578 jump *label105 always
   579 label *label104
   580 op sub *tmp153 30 :start_reactor:secs
 
   586 print :start_reactor:charge_req
   587 print "J"
   588 print "\n"
-    * set *tmp150 null
   589 label *label105
   590 jump *label102 always
   591 label *label101
 
   601 print "ABANDON - battery crit"
   602 print "\n"
   603 set :start_reactor:supply_fuel false
-    * set *tmp156 :start_reactor:supply_fuel
   604 jump *label109 always
   605 label *label108
   606 op idiv *tmp159 :start_reactor:secs 6
 
   612 print " "
   613 print "mins"
   614 print "\n"
-    * set *tmp156 null
   615 label *label109
   616 label *label102
   617 label *label100

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-76 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :check_radar*retaddr *label10 (h:*label10)
    59 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    60 label *label10
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :check_radar*retval
    62 op notEqual *tmp9 switch1 null
    63 jump *label12 equal *tmp9 false
    64 label *label15
 
    84 setaddr :calc_charge_req*retaddr *label16 (h:*label16)
    85 call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
    86 label *label16
-    * set *tmp13 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp13
+   87 set .START_POWER_REQ :calc_charge_req*retval
    88 set :calc_charge_req:reactor reactor2
    89 set :calc_charge_req:time :t_startup2
    90 setaddr :calc_charge_req*retaddr *label17 (h:*label17)
    91 call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
    92 label *label17
-    * set *tmp14 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp14
+   93 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    94 set :calc_charge_req:reactor reactor3
    95 set :calc_charge_req:time :t_startup3
    96 setaddr :calc_charge_req*retaddr *label18 (h:*label18)
    97 call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
    98 label *label18
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   99 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   100 set :calc_charge_req:reactor reactor4
   101 set :calc_charge_req:time :t_startup4
   102 setaddr :calc_charge_req*retaddr *label19 (h:*label19)
   103 call *label2 *invalid :calc_charge_req*retval (m:*label19) (h:*label19)
   104 label *label19
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+  105 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   106 set :calc_charge_req:reactor reactor5
   107 set :calc_charge_req:time :t_startup5
   108 setaddr :calc_charge_req*retaddr *label20 (h:*label20)
   109 call *label2 *invalid :calc_charge_req*retval (m:*label20) (h:*label20)
   110 label *label20
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  111 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   112 set :start_reactor:reactor reactor1
   113 set :start_reactor:reactor_num 1
   114 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   117 setaddr :start_reactor*retaddr *label21 (h:*label21)
   118 call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
   119 label *label21
-    * set *tmp18 :start_reactor*retval
-    * set :fuel_1 *tmp18
+  120 set :fuel_1 :start_reactor*retval
   121 set :t_startup1 .RET_T_STARTUP
   122 set :update_fuel:fuel :fuel_1
   123 set :update_fuel:uld_in .ULD_IN_1
 
   133 setaddr :start_reactor*retaddr *label23 (h:*label23)
   134 call *label3 *invalid :start_reactor*retval (m:*label23) (h:*label23)
   135 label *label23
-    * set *tmp20 :start_reactor*retval
-    * set :fuel_2 *tmp20
+  136 set :fuel_2 :start_reactor*retval
   137 set :t_startup2 .RET_T_STARTUP
   138 set :update_fuel:fuel :fuel_2
   139 set :update_fuel:uld_in .ULD_IN_2
 
   145 setaddr :check_radar*retaddr *label25 (h:*label25)
   146 call *label4 *invalid :check_radar*retval (m:*label25) (h:*label25)
   147 label *label25
-    * set *tmp22 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp22
+  148 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   149 set :start_reactor:reactor reactor3
   150 set :start_reactor:reactor_num 3
   151 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   154 setaddr :start_reactor*retaddr *label26 (h:*label26)
   155 call *label3 *invalid :start_reactor*retval (m:*label26) (h:*label26)
   156 label *label26
-    * set *tmp23 :start_reactor*retval
-    * set :fuel_3 *tmp23
+  157 set :fuel_3 :start_reactor*retval
   158 set :t_startup3 .RET_T_STARTUP
   159 set :start_reactor:reactor reactor4
   160 set :start_reactor:reactor_num 4
 
   164 setaddr :start_reactor*retaddr *label27 (h:*label27)
   165 call *label3 *invalid :start_reactor*retval (m:*label27) (h:*label27)
   166 label *label27
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_4 *tmp24
+  167 set :fuel_4 :start_reactor*retval
   168 set :t_startup4 .RET_T_STARTUP
   169 set :start_reactor:reactor reactor5
   170 set :start_reactor:reactor_num 5
 
   174 setaddr :start_reactor*retaddr *label28 (h:*label28)
   175 call *label3 *invalid :start_reactor*retval (m:*label28) (h:*label28)
   176 label *label28
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_5 *tmp25
+  177 set :fuel_5 :start_reactor*retval
   178 set :t_startup5 .RET_T_STARTUP
   179 jump *label31 notEqual :fuel_3 false
   180 label *label33
 
   212 set :throttle_blast:reactors_fueled *tmp28
   213 set :throttle_blast:emerg_shutdown :emerg_shutdown
   214 sensor *tmp30 .NODE @powerNetStored
-    * op floor *tmp31 *tmp30
-    * set :throttle_blast:charge *tmp31
+  215 op floor :throttle_blast:charge *tmp30
   216 sensor *tmp32 .NODE @powerNetIn
   217 sensor *tmp33 .NODE @powerNetOut
   218 op sub *tmp34 *tmp32 *tmp33
-    * op floor *tmp35 *tmp34
-    * set :throttle_blast:surplus *tmp35
-    * sensor *tmp36 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp36
+  219 op floor :throttle_blast:surplus *tmp34
+  220 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   221 op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
   222 jump *label44 equal *tmp37 false
   223 label *label45
 
   269 print "n"
   270 label *label49
   271 label *label42
-    * op lessThan *tmp43 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp29 *tmp43
+  272 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   273 jump *label40 always
   274 set *tmp29 null
   275 label *label40
 
   284 control config *tmp44 *tmp46
   285 sensor *tmp48 .NODE @powerNetStored
   286 sensor *tmp49 .NODE @powerNetCapacity
-    * op div *tmp50 *tmp48 *tmp49
-    * set :diff_generators:stored_pc *tmp50
+  287 op div :diff_generators:stored_pc *tmp48 *tmp49
   288 op greaterThan *tmp51 :diff_generators:stored_pc 0.9
   289 jump *label53 equal *tmp51 false
   290 label *label56
 
   294 label *label55
   295 print "Differential now idle."
   296 print "\n"
-    * set *tmp54 generator1
-    * control enabled *tmp54 false
-    * set *tmp56 generator2
-    * control enabled *tmp56 false
+  297 control enabled generator1 false
+  298 control enabled generator2 false
   299 jump *label54 always
   300 label *label53
-    * set *tmp58 generator1
-    * control enabled *tmp58 true
-    * set *tmp60 generator2
-    * control enabled *tmp60 true
+  301 control enabled generator1 true
+  302 control enabled generator2 true
   303 label *label54
   304 label *label52
   305 set :kilo:val .AVG_SURPLUS
   306 setaddr :kilo*retaddr *label57 (h:*label57)
   307 call *label0 *invalid :kilo*retval (m:*label57) (h:*label57)
   308 label *label57
-    * set *tmp62 :kilo*retval
-    * set :surplus *tmp62
-    * sensor *tmp63 .NODE @powerNetStored
-    * set :kilo:val *tmp63
+  309 set :surplus :kilo*retval
+  310 sensor :kilo:val .NODE @powerNetStored
   311 setaddr :kilo*retaddr *label58 (h:*label58)
   312 call *label0 *invalid :kilo*retval (m:*label58) (h:*label58)
   313 label *label58
-    * set *tmp64 :kilo*retval
-    * set :charge *tmp64
+  314 set :charge :kilo*retval
   315 op greaterThan *tmp65 .START_POWER_REQ 0
   316 jump *label59 equal *tmp65 false
   317 set :kilo:val .START_POWER_REQ
   318 setaddr :kilo*retaddr *label61 (h:*label61)
   319 call *label0 *invalid :kilo*retval (m:*label61) (h:*label61)
   320 label *label61
-    * set *tmp67 :kilo*retval
-    * set :req *tmp67
+  321 set :req :kilo*retval
   322 print "Req "
   323 print :req
   324 print "kJ / "
 
   337 print "\n"
   338 sensor *tmp69 .NODE @powerNetStored
   339 sensor *tmp70 .NODE @powerNetCapacity
-    * op div *tmp71 *tmp69 *tmp70
-    * set :update_reactors_desired:stored *tmp71
+  340 op div :update_reactors_desired:stored *tmp69 *tmp70
   341 op greaterThan *tmp72 :update_reactors_desired:stored 0.98
   342 jump *label63 equal *tmp72 false
   343 label *label66
 
   366 label *label71
   367 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
   368 op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
-    * op max *tmp84 1 *tmp83
-    * set :update_reactors_desired:needed *tmp84
+  369 op max :update_reactors_desired:needed 1 *tmp83
   370 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp86 5 *tmp85
-    * set .REACTORS_DESIRED *tmp86
+  371 op min .REACTORS_DESIRED 5 *tmp85
   372 jump *label70 always
   373 label *label69
   374 label *label70
 
   390 end
   391 label *label0
   392 op idiv *tmp89 :kilo:val 100
-    * op div *tmp90 *tmp89 10
-    * set :kilo*retval *tmp90
+  393 op div :kilo*retval *tmp89 10
   394 jump *label75 always
   395 set :kilo*retval null
   396 label *label75
 
   419 end
   420 label *label2
   421 op sub *tmp98 @tick :calc_charge_req:time
-    * op idiv *tmp99 *tmp98 60
-    * set :calc_charge_req:secs *tmp99
+  422 op idiv :calc_charge_req:secs *tmp98 60
   423 op greaterThan *tmp100 :calc_charge_req:secs 30
   424 jump *label84 notEqual *tmp100 false
   425 label *label85
 
   433 jump *label83 always
   434 label *label82
   435 label *label83
-    * op sub *tmp104 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp104
+  436 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   437 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   438 op mul *tmp106 *tmp105 25
-    * op floor *tmp107 *tmp106
-    * set :calc_charge_req:charge_req *tmp107
+  439 op floor :calc_charge_req:charge_req *tmp106
   440 set :calc_charge_req*retval :calc_charge_req:charge_req
   441 jump *label81 always
   442 set :calc_charge_req*retval null
 
   446 label *label3
   447 set .RET_T_STARTUP :start_reactor:t_startup
   448 op sub *tmp108 @tick :start_reactor:t_startup
-    * op idiv *tmp109 *tmp108 60
-    * set :start_reactor:secs *tmp109
-    * sensor *tmp110 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp110
+  449 op idiv :start_reactor:secs *tmp108 60
+  450 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   451 set :start_reactor:supply_fuel true
-    * sensor *tmp111 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp111
-    * sensor *tmp112 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp112
+  452 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  453 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   454 sensor *tmp113 .NODE @powerNetStored
-    * op floor *tmp114 *tmp113
-    * set :start_reactor:charge *tmp114
+  455 op floor :start_reactor:charge *tmp113
   456 sensor *tmp115 .NODE @powerNetIn
   457 sensor *tmp116 .NODE @powerNetOut
   458 op sub *tmp117 *tmp115 *tmp116
-    * op floor *tmp118 *tmp117
-    * set :start_reactor:surplus *tmp118
+  459 op floor :start_reactor:surplus *tmp117
   460 op mul *tmp119 .AVG_SURPLUS 0.8
   461 op mul *tmp120 :start_reactor:surplus 0.2
-    * op add *tmp121 *tmp119 *tmp120
-    * set .AVG_SURPLUS *tmp121
-    * sensor *tmp122 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp122
+  462 op add .AVG_SURPLUS *tmp119 *tmp120
+  463 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   464 print "#"
   465 print :start_reactor:reactor_num
   466 print " "
   467 print "- "
   468 jump *label87 equal :start_reactor:emerg_shutdown false
-    * set *tmp124 :start_reactor:reactor
-    * control enabled *tmp124 false
+  469 control enabled :start_reactor:reactor false
   470 print "emergency mode"
   471 print "\n"
   472 set :start_reactor:supply_fuel false
 
   475 jump *label89 equal :start_reactor:enabled false
   476 op lessThan *tmp127 .REACTORS_DESIRED :start_reactor:reactor_num
   477 jump *label91 equal *tmp127 false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  478 control enabled :start_reactor:reactor false
   479 print "STOP unwanted"
   480 print "\n"
   481 jump *label92 always
 
   488 jump *label93 equal *tmp133 false
   489 jump *label95 always
   490 label *label95
-    * set *tmp135 :start_reactor:reactor
-    * control enabled *tmp135 false
+  491 control enabled :start_reactor:reactor false
   492 print "STOP system fuel low"
   493 print "\n"
   494 jump *label94 always
   495 label *label93
   496 op lessThanEq *tmp137 :start_reactor:fuel 1
   497 jump *label97 equal *tmp137 false
-    * set *tmp139 :start_reactor:reactor
-    * control enabled *tmp139 false
+  498 control enabled :start_reactor:reactor false
   499 print "STOP fuel low"
   500 print "\n"
   501 jump *label98 always
   502 label *label97
   503 op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
   504 jump *label99 equal *tmp141 false
-    * set *tmp143 :start_reactor:reactor
-    * control enabled *tmp143 false
+  505 control enabled :start_reactor:reactor false
   506 print "STOP out of cryo"
   507 print "\n"
   508 jump *label100 always
 
   523 jump *label104 equal *tmp149 false
   524 jump *label106 always
   525 label *label106
-    * set *tmp151 :start_reactor:reactor
-    * control enabled *tmp151 false
+  526 control enabled :start_reactor:reactor false
   527 print "START FAIL battery"
   528 print "\n"
   529 set :start_reactor:supply_fuel false
   530 jump *label105 always
   531 label *label104
-    * op sub *tmp153 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp153
+  532 op sub :start_reactor:time_left 30 :start_reactor:secs
   533 print "Starting "
   534 print :start_reactor:time_left
   535 print " "
 
   547 jump *label108 equal *tmp155 false
   548 jump *label110 always
   549 label *label110
-    * set *tmp157 :start_reactor:reactor
-    * control enabled *tmp157 false
+  550 control enabled :start_reactor:reactor false
   551 print "ABANDON - battery crit"
   552 print "\n"
   553 set :start_reactor:supply_fuel false
   554 jump *label109 always
   555 label *label108
-    * op idiv *tmp159 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp159
-    * op div *tmp160 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp160
+  556 op idiv :start_reactor:mins :start_reactor:secs 6
+  557 op div :start_reactor:mins :start_reactor:mins 10
   558 print "RUN "
   559 print :start_reactor:mins
   560 print " "
 
   571 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   572 op sub *tmp162 *tmp161 .PWR_ABORT
   573 op div *tmp163 *tmp162 .PWR_REQ
-    * op mul *tmp164 *tmp163 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp164
+  574 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
   575 op div *tmp165 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp166 -0.1 *tmp165
-    * set :start_reactor:flow_units *tmp166
+  576 op max :start_reactor:flow_units -0.1 *tmp165
   577 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp168 .CRYO_REQ *tmp167
-    * set :start_reactor:cryo_req *tmp168
+  578 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
   579 op lessThan *tmp169 .REACTORS_DESIRED :start_reactor:reactor_num
   580 jump *label112 equal *tmp169 false
   581 print "IDLE"
 
   588 jump *label114 equal *tmp172 false
   589 op mul *tmp174 :start_reactor:flow_units 1000
   590 op floor *tmp175 *tmp174
-    * op div *tmp176 *tmp175 10
-    * set :start_reactor:flow *tmp176
+  591 op div :start_reactor:flow *tmp175 10
   592 op mul *tmp177 :start_reactor:charge_units 1000
   593 op floor *tmp178 *tmp177
-    * op div *tmp179 *tmp178 10
-    * set :start_reactor:charge *tmp179
+  594 op div :start_reactor:charge *tmp178 10
   595 print "WAIT power. (%"
   596 print :start_reactor:charge
   597 print "J + %"
 
   635 print "STARTUP"
   636 print "\n"
   637 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp190 :start_reactor:reactor
-    * control enabled *tmp190 true
+  638 control enabled :start_reactor:reactor true
   639 label *label125
   640 label *label123
   641 label *label117
 
   646 sensor *tmp192 :start_reactor:reactor @enabled
   647 op notEqual *tmp193 :start_reactor:enabled *tmp192
   648 jump *label126 equal *tmp193 false
-    * set *tmp195 @tick
-    * set .RET_T_STARTUP *tmp195
+  649 set .RET_T_STARTUP @tick
   650 jump *label127 always
   651 label *label126
   652 label *label127
 
   657 return :start_reactor*retaddr
   658 end
   659 label *label4
-    * radar enemy any any health :check_radar:unit 1 *tmp196
-    * set :check_radar:enemy_found *tmp196
+  660 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   661 op notEqual *tmp197 :check_radar:enemy_found null
   662 jump *label129 equal *tmp197 false
-    * set *tmp199 projector1
-    * control enabled *tmp199 true
-    * set *tmp201 projector2
-    * control enabled *tmp201 true
-    * set *tmp203 .ULD_IN_1
-    * control config *tmp203 .FUEL_OFF
-    * set *tmp205 .ULD_OUT_1
-    * control config *tmp205 .FUEL
-    * set *tmp207 .ULD_IN_2
-    * control config *tmp207 .FUEL_OFF
-    * set *tmp209 .ULD_OUT_2
-    * control config *tmp209 .FUEL
-    * set *tmp211 .ULD_IN_MANY
-    * control config *tmp211 .FUEL_OFF
-    * set *tmp213 .ULD_OUT_MANY
-    * control config *tmp213 .FUEL
-    * set *tmp215 .ULD_MIXER
-    * control config *tmp215 .FUEL_OFF
-    * set *tmp217 reactor1
-    * control enabled *tmp217 false
-    * set *tmp219 reactor2
-    * control enabled *tmp219 false
-    * set *tmp221 reactor3
-    * control enabled *tmp221 false
-    * set *tmp223 reactor4
-    * control enabled *tmp223 false
-    * set *tmp225 reactor5
-    * control enabled *tmp225 false
+  663 control enabled projector1 true
+  664 control enabled projector2 true
+  665 control config .ULD_IN_1 .FUEL_OFF
+  666 control config .ULD_OUT_1 .FUEL
+  667 control config .ULD_IN_2 .FUEL_OFF
+  668 control config .ULD_OUT_2 .FUEL
+  669 control config .ULD_IN_MANY .FUEL_OFF
+  670 control config .ULD_OUT_MANY .FUEL
+  671 control config .ULD_MIXER .FUEL_OFF
+  672 control enabled reactor1 false
+  673 control enabled reactor2 false
+  674 control enabled reactor3 false
+  675 control enabled reactor4 false
+  676 control enabled reactor5 false
   677 set :check_radar*retval true
   678 jump *label128 always
   679 set *tmp198 null
   680 jump *label130 always
   681 label *label129
-    * set *tmp227 projector1
-    * control enabled *tmp227 false
-    * set *tmp229 projector2
-    * control enabled *tmp229 false
+  682 control enabled projector1 false
+  683 control enabled projector2 false
   684 set :check_radar*retval false
   685 jump *label128 always
   686 set *tmp198 null

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Straightening, pass 1, iteration 1 (-5 instructions):
 
   180 jump *label31 notEqual :fuel_4 false
   181 jump *label32 always
   182 label *label32
-    * jump *label31 notEqual :fuel_5 false
-    * jump *label29 always
+  183 jump *label29 equal :fuel_5 false
   184 label *label31
   185 set *tmp26 true
   186 jump *label30 always
 
   199 jump *label37 notEqual :fuel_2 false
   200 jump *label38 always
   201 label *label38
-    * jump *label37 notEqual :fuel_many false
-    * jump *label35 always
+  202 jump *label35 equal :fuel_many false
   203 label *label37
   204 set *tmp28 true
   205 jump *label36 always
 
   219 jump *label44 equal *tmp37 false
   220 label *label45
   221 op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label44 equal *tmp38 false
-    * jump *label43 always
+  222 jump *label43 notEqual *tmp38 false
   223 label *label44
-    * jump *label43 notEqual :throttle_blast:emerg_shutdown false
-    * jump *label41 always
+  224 jump *label41 equal :throttle_blast:emerg_shutdown false
   225 label *label43
   226 set :throttle_blast:limit 0
   227 print "Central Fuel at "
 
   420 label *label85
   421 sensor *tmp101 :calc_charge_req:reactor @enabled
   422 op equal *tmp102 *tmp101 false
-    * jump *label84 notEqual *tmp102 false
-    * jump *label82 always
+  423 jump *label82 equal *tmp102 false
   424 label *label84
   425 set :calc_charge_req*retval 0
   426 jump *label81 always

Modifications by Iterated phase, Condition Optimization, pass 1, iteration 1 (-36 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
    57 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    58 label *label10
    59 set :emerg_shutdown :check_radar*retval
-    * op notEqual *tmp9 switch1 null
-    * jump *label12 equal *tmp9 false
+   60 jump *label12 equal switch1 null
    61 label *label15
    62 sensor *tmp10 switch1 @enabled
-    * op equal *tmp11 *tmp10 false
-    * jump *label12 equal *tmp11 false
+   63 jump *label12 notEqual *tmp10 false
    64 jump *label14 always
    65 label *label14
    66 print "User has disabled emergency switch"
 
   212 op sub *tmp34 *tmp32 *tmp33
   213 op floor :throttle_blast:surplus *tmp34
   214 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp37 :throttle_blast:charge .PWR_ABORT
-    * jump *label44 equal *tmp37 false
+  215 jump *label44 greaterThanEq :throttle_blast:charge .PWR_ABORT
   216 label *label45
-    * op lessThan *tmp38 :throttle_blast:surplus .FLOW_ABORT
-    * jump *label43 notEqual *tmp38 false
+  217 jump *label43 lessThan :throttle_blast:surplus .FLOW_ABORT
   218 label *label44
   219 jump *label41 equal :throttle_blast:emerg_shutdown false
   220 label *label43
 
   236 label *label47
   237 jump *label42 always
   238 label *label41
-    * op equal *tmp41 :throttle_blast:reactors_fueled false
-    * jump *label48 equal *tmp41 false
+  239 jump *label48 notEqual :throttle_blast:reactors_fueled false
   240 set :throttle_blast:limit .FUEL_LIMIT_LOW
   241 print "Fuel "
   242 print :throttle_blast:fuel_stored
 
   274 sensor *tmp48 .NODE @powerNetStored
   275 sensor *tmp49 .NODE @powerNetCapacity
   276 op div :diff_generators:stored_pc *tmp48 *tmp49
-    * op greaterThan *tmp51 :diff_generators:stored_pc 0.9
-    * jump *label53 equal *tmp51 false
+  277 jump *label53 lessThanEq :diff_generators:stored_pc 0.9
   278 label *label56
-    * op lessThan *tmp52 .START_POWER_REQ 10
-    * jump *label53 equal *tmp52 false
+  279 jump *label53 greaterThanEq .START_POWER_REQ 10
   280 jump *label55 always
   281 label *label55
   282 print "Differential now idle."
 
   299 call *label0 *invalid :kilo*retval (m:*label58) (h:*label58)
   300 label *label58
   301 set :charge :kilo*retval
-    * op greaterThan *tmp65 .START_POWER_REQ 0
-    * jump *label59 equal *tmp65 false
+  302 jump *label59 lessThanEq .START_POWER_REQ 0
   303 set :kilo:val .START_POWER_REQ
   304 setaddr :kilo*retaddr *label61 (h:*label61)
   305 call *label0 *invalid :kilo*retval (m:*label61) (h:*label61)
 
   324 sensor *tmp69 .NODE @powerNetStored
   325 sensor *tmp70 .NODE @powerNetCapacity
   326 op div :update_reactors_desired:stored *tmp69 *tmp70
-    * op greaterThan *tmp72 :update_reactors_desired:stored 0.98
-    * jump *label63 equal *tmp72 false
+  327 jump *label63 lessThanEq :update_reactors_desired:stored 0.98
   328 label *label66
   329 op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp74 .AVG_SURPLUS *tmp73
-    * jump *label63 equal *tmp74 false
+  330 jump *label63 lessThanEq .AVG_SURPLUS *tmp73
   331 jump *label65 always
   332 label *label65
-    * op greaterThan *tmp76 .REACTORS_DESIRED 2
-    * jump *label67 equal *tmp76 false
+  333 jump *label67 lessThanEq .REACTORS_DESIRED 2
   334 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   335 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   336 jump *label68 always
 
   339 jump *label64 always
   340 label *label63
   341 label *label64
-    * op lessThan *tmp78 :update_reactors_desired:stored 0.8
-    * jump *label69 equal *tmp78 false
+  342 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
   343 label *label72
   344 op mul *tmp79 .GOAL_BUFFER 0.8
-    * op lessThan *tmp80 .AVG_SURPLUS *tmp79
-    * jump *label69 equal *tmp80 false
+  345 jump *label69 greaterThanEq .AVG_SURPLUS *tmp79
   346 jump *label71 always
   347 label *label71
   348 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
 
   355 label *label70
   356 label *label62
   357 label *label60
-    * op notEqual *tmp87 .REACTORS_DESIRED 5
-    * jump *label73 equal *tmp87 false
+  358 jump *label73 equal .REACTORS_DESIRED 5
   359 print "Require only "
   360 print .REACTORS_DESIRED
   361 print "/5 reactors."
 
   386 label *label78
   387 control config *tmp91 *tmp93
   388 set *tmp94 :update_fuel:uld_out
-    * op equal *tmp96 :update_fuel:fuel false
-    * jump *label79 equal *tmp96 false
+  389 jump *label79 notEqual :update_fuel:fuel false
   390 set *tmp97 .FUEL
   391 jump *label80 always
   392 label *label79
 
   399 label *label2
   400 op sub *tmp98 @tick :calc_charge_req:time
   401 op idiv :calc_charge_req:secs *tmp98 60
-    * op greaterThan *tmp100 :calc_charge_req:secs 30
-    * jump *label84 notEqual *tmp100 false
+  402 jump *label84 greaterThan :calc_charge_req:secs 30
   403 label *label85
   404 sensor *tmp101 :calc_charge_req:reactor @enabled
-    * op equal *tmp102 *tmp101 false
-    * jump *label82 equal *tmp102 false
+  405 jump *label82 notEqual *tmp101 false
   406 label *label84
   407 set :calc_charge_req*retval 0
   408 jump *label81 always
 
   449 jump *label88 always
   450 label *label87
   451 jump *label89 equal :start_reactor:enabled false
-    * op lessThan *tmp127 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label91 equal *tmp127 false
+  452 jump *label91 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   453 control enabled :start_reactor:reactor false
   454 print "STOP unwanted"
   455 print "\n"
   456 jump *label92 always
   457 label *label91
-    * op greaterThan *tmp131 :start_reactor:reactor_num 1
-    * jump *label93 equal *tmp131 false
+  458 jump *label93 lessThanEq :start_reactor:reactor_num 1
   459 label *label96
   460 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp133 :start_reactor:fuel_stored *tmp132
-    * jump *label93 equal *tmp133 false
+  461 jump *label93 greaterThanEq :start_reactor:fuel_stored *tmp132
   462 jump *label95 always
   463 label *label95
   464 control enabled :start_reactor:reactor false
 
   466 print "\n"
   467 jump *label94 always
   468 label *label93
-    * op lessThanEq *tmp137 :start_reactor:fuel 1
-    * jump *label97 equal *tmp137 false
+  469 jump *label97 greaterThan :start_reactor:fuel 1
   470 control enabled :start_reactor:reactor false
   471 print "STOP fuel low"
   472 print "\n"
   473 jump *label98 always
   474 label *label97
-    * op lessThanEq *tmp141 :start_reactor:cryo .CRYO_ABORT
-    * jump *label99 equal *tmp141 false
+  475 jump *label99 greaterThan :start_reactor:cryo .CRYO_ABORT
   476 control enabled :start_reactor:reactor false
   477 print "STOP out of cryo"
   478 print "\n"
   479 jump *label100 always
   480 label *label99
-    * op lessThan *tmp145 :start_reactor:secs 30
-    * jump *label101 equal *tmp145 false
+  481 jump *label101 greaterThanEq :start_reactor:secs 30
   482 set :calc_charge_req:reactor :start_reactor:reactor
   483 set :calc_charge_req:time :start_reactor:t_startup
   484 setaddr :calc_charge_req*retaddr *label103 (h:*label103)
 
   486 label *label103
   487 set :start_reactor:charge_req :calc_charge_req*retval
   488 op sub *tmp147 :start_reactor:charge :start_reactor:charge_req
-    * op lessThan *tmp148 *tmp147 .PWR_ABORT
-    * jump *label104 equal *tmp148 false
+  489 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   490 label *label107
-    * op lessThan *tmp149 :start_reactor:surplus .FLOW_ABORT
-    * jump *label104 equal *tmp149 false
+  491 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   492 jump *label106 always
   493 label *label106
   494 control enabled :start_reactor:reactor false
 
   508 label *label105
   509 jump *label102 always
   510 label *label101
-    * op lessThan *tmp154 :start_reactor:charge .PWR_ABANDON
-    * jump *label108 equal *tmp154 false
+  511 jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
   512 label *label111
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
-    * jump *label108 equal *tmp155 false
+  513 jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   514 jump *label110 always
   515 label *label110
   516 control enabled :start_reactor:reactor false
 
   542 op max :start_reactor:flow_units -0.1 *tmp165
   543 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
   544 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * op lessThan *tmp169 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label112 equal *tmp169 false
+  545 jump *label112 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   546 print "IDLE"
   547 print "\n"
   548 set :start_reactor:supply_fuel false
   549 jump *label113 always
   550 label *label112
   551 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp172 *tmp171 1
-    * jump *label114 equal *tmp172 false
+  552 jump *label114 greaterThanEq *tmp171 1
   553 op mul *tmp174 :start_reactor:flow_units 1000
   554 op floor *tmp175 *tmp174
   555 op div :start_reactor:flow *tmp175 10
 
   567 label *label114
   568 jump *label116 equal :start_reactor:fuel_on false
   569 label *label119
-    * op lessThan *tmp180 :start_reactor:fuel .FUEL_REQ
-    * jump *label116 equal *tmp180 false
+  570 jump *label116 greaterThanEq :start_reactor:fuel .FUEL_REQ
   571 jump *label118 always
   572 label *label118
   573 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp183 *tmp182 .FUEL_REQ
-    * jump *label120 equal *tmp183 false
+  574 jump *label120 lessThanEq *tmp182 .FUEL_REQ
   575 print "WAIT fuel"
   576 print "\n"
   577 jump *label121 always
 
   582 jump *label117 always
   583 label *label116
   584 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp186 :start_reactor:fuel_stored *tmp185
-    * jump *label122 equal *tmp186 false
+  585 jump *label122 greaterThanEq :start_reactor:fuel_stored *tmp185
   586 print "WAIT buffer fuel"
   587 print "\n"
   588 jump *label123 always
   589 label *label122
-    * op lessThan *tmp188 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label124 equal *tmp188 false
+  590 jump *label124 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   591 print "WAIT cryo"
   592 print "\n"
   593 jump *label125 always
 
   604 label *label90
   605 label *label88
   606 sensor *tmp192 :start_reactor:reactor @enabled
-    * op notEqual *tmp193 :start_reactor:enabled *tmp192
-    * jump *label126 equal *tmp193 false
+  607 jump *label126 equal :start_reactor:enabled *tmp192
   608 set .RET_T_STARTUP @tick
   609 jump *label127 always
   610 label *label126
 
   617 end
   618 label *label4
   619 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp197 :check_radar:enemy_found null
-    * jump *label129 equal *tmp197 false
+  620 jump *label129 equal :check_radar:enemy_found null
   621 control enabled projector1 true
   622 control enabled projector2 true
   623 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-17 instructions):
 
    61 label *label15
    62 sensor *tmp10 switch1 @enabled
    63 jump *label12 notEqual *tmp10 false
-    * jump *label14 always
    64 label *label14
    65 print "User has disabled emergency switch"
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   173 jump *label31 notEqual :fuel_3 false
   174 label *label33
   175 jump *label31 notEqual :fuel_4 false
-    * jump *label32 always
   176 label *label32
   177 jump *label29 equal :fuel_5 false
   178 label *label31
 
   191 jump *label37 notEqual :fuel_1 false
   192 label *label39
   193 jump *label37 notEqual :fuel_2 false
-    * jump *label38 always
   194 label *label38
   195 jump *label35 equal :fuel_many false
   196 label *label37
 
   273 jump *label53 lessThanEq :diff_generators:stored_pc 0.9
   274 label *label56
   275 jump *label53 greaterThanEq .START_POWER_REQ 10
-    * jump *label55 always
   276 label *label55
   277 print "Differential now idle."
   278 print "\n"
 
   323 label *label66
   324 op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
   325 jump *label63 lessThanEq .AVG_SURPLUS *tmp73
-    * jump *label65 always
   326 label *label65
   327 jump *label67 lessThanEq .REACTORS_DESIRED 2
   328 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   329 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label68 always
   330 label *label67
   331 label *label68
-    * jump *label64 always
   332 label *label63
   333 label *label64
   334 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
   335 label *label72
   336 op mul *tmp79 .GOAL_BUFFER 0.8
   337 jump *label69 greaterThanEq .AVG_SURPLUS *tmp79
-    * jump *label71 always
   338 label *label71
   339 op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
   340 op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
   341 op max :update_reactors_desired:needed 1 *tmp83
   342 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   343 op min .REACTORS_DESIRED 5 *tmp85
-    * jump *label70 always
   344 label *label69
   345 label *label70
   346 label *label62
 
   350 print .REACTORS_DESIRED
   351 print "/5 reactors."
   352 print "\n"
-    * jump *label74 always
   353 label *label73
   354 label *label74
   355 printflush message1
 
   395 label *label84
   396 set :calc_charge_req*retval 0
   397 jump *label81 always
-    * jump *label83 always
   398 label *label82
   399 label *label83
   400 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   447 label *label96
   448 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   449 jump *label93 greaterThanEq :start_reactor:fuel_stored *tmp132
-    * jump *label95 always
   450 label *label95
   451 control enabled :start_reactor:reactor false
   452 print "STOP system fuel low"
 
   476 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   477 label *label107
   478 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label106 always
   479 label *label106
   480 control enabled :start_reactor:reactor false
   481 print "START FAIL battery"
 
   497 jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
   498 label *label111
   499 jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * jump *label110 always
   500 label *label110
   501 control enabled :start_reactor:reactor false
   502 print "ABANDON - battery crit"
 
   553 jump *label116 equal :start_reactor:fuel_on false
   554 label *label119
   555 jump *label116 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * jump *label118 always
   556 label *label118
   557 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   558 jump *label120 lessThanEq *tmp182 .FUEL_REQ
 
   590 sensor *tmp192 :start_reactor:reactor @enabled
   591 jump *label126 equal :start_reactor:enabled *tmp192
   592 set .RET_T_STARTUP @tick
-    * jump *label127 always
   593 label *label126
   594 label *label127
   595 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   399 label *label83
   400 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   401 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp106 *tmp105 25
-    * op floor :calc_charge_req:charge_req *tmp106
+  402 op idiv :calc_charge_req:charge_req *tmp105 0.04
   403 set :calc_charge_req*retval :calc_charge_req:charge_req
   404 jump *label81 always
   405 set :calc_charge_req*retval null
 
   534 label *label112
   535 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
   536 jump *label114 greaterThanEq *tmp171 1
-    * op mul *tmp174 :start_reactor:flow_units 1000
-    * op floor *tmp175 *tmp174
+  537 op idiv *tmp175 :start_reactor:flow_units 0.001
   538 op div :start_reactor:flow *tmp175 10
-    * op mul *tmp177 :start_reactor:charge_units 1000
-    * op floor *tmp178 *tmp177
+  539 op idiv *tmp178 :start_reactor:charge_units 0.001
   540 op div :start_reactor:charge *tmp178 10
   541 print "WAIT power. (%"
   542 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :check_radar*retval *tmp8
    75 set :calc_charge_req:reactor reactor1
    76 set :calc_charge_req:time :t_startup1
    77 setaddr :calc_charge_req*retaddr *label16 (h:*label16)
 
   112 label *label21
   113 set :fuel_1 :start_reactor*retval
   114 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
+  115 set :update_fuel:fuel :start_reactor*retval
   116 set :update_fuel:uld_in .ULD_IN_1
   117 set :update_fuel:uld_out .ULD_OUT_1
   118 setaddr :update_fuel*retaddr *label22 (h:*label22)
 
   128 label *label23
   129 set :fuel_2 :start_reactor*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
+  131 set :update_fuel:fuel :start_reactor*retval
   132 set :update_fuel:uld_in .ULD_IN_2
   133 set :update_fuel:uld_out .ULD_OUT_2
   134 setaddr :update_fuel*retaddr *label24 (h:*label24)
 
   173 label *label33
   174 jump *label31 notEqual :fuel_4 false
   175 label *label32
-    * jump *label29 equal :fuel_5 false
+  176 jump *label29 equal :start_reactor*retval false
   177 label *label31
   178 set *tmp26 true
   179 jump *label30 always
 
   181 set *tmp26 false
   182 label *label30
   183 set :fuel_many *tmp26
-    * set :update_fuel:fuel :fuel_many
+  184 set :update_fuel:fuel *tmp26
   185 set :update_fuel:uld_in .ULD_IN_MANY
   186 set :update_fuel:uld_out .ULD_OUT_MANY
   187 setaddr :update_fuel*retaddr *label34 (h:*label34)
 
   191 label *label39
   192 jump *label37 notEqual :fuel_2 false
   193 label *label38
-    * jump *label35 equal :fuel_many false
+  194 jump *label35 equal *tmp26 false
   195 label *label37
   196 set *tmp28 true
   197 jump *label36 always
 
   207 op sub *tmp34 *tmp32 *tmp33
   208 op floor :throttle_blast:surplus *tmp34
   209 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * jump *label44 greaterThanEq :throttle_blast:charge .PWR_ABORT
+  210 jump *label44 greaterThanEq :throttle_blast:charge 5000
   211 label *label45
-    * jump *label43 lessThan :throttle_blast:surplus .FLOW_ABORT
+  212 jump *label43 lessThan :throttle_blast:surplus -500
   213 label *label44
-    * jump *label41 equal :throttle_blast:emerg_shutdown false
+  214 jump *label41 equal :emerg_shutdown false
   215 label *label43
   216 set :throttle_blast:limit 0
   217 print "Central Fuel at "
   218 print :throttle_blast:fuel_stored
   219 print " "
   220 print "/ "
-    * print :throttle_blast:limit
+  221 print 0
   222 print " "
   223 print "- "
-    * jump *label46 equal :throttle_blast:emerg_shutdown false
+  224 jump *label46 equal :emerg_shutdown false
   225 print " Enemies detected."
   226 print "\n"
   227 jump *label47 always
 
   231 label *label47
   232 jump *label42 always
   233 label *label41
-    * jump *label48 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  234 jump *label48 notEqual *tmp28 false
+  235 set :throttle_blast:limit 150
   236 print "Fuel "
   237 print :throttle_blast:fuel_stored
   238 print " "
   239 print "/ "
-    * print :throttle_blast:limit
+  240 print .FUEL_LIMIT_LOW
   241 print " "
   242 print "(due to emergency)"
   243 print "\n"
   244 jump *label49 always
   245 label *label48
-    * set :throttle_blast:limit .FUEL_LIMIT
+  246 set :throttle_blast:limit 800
   247 print "Fuel "
   248 print :throttle_blast:fuel_stored
   249 print " "
   250 print "/ "
-    * print :throttle_blast:limit
+  251 print .FUEL_LIMIT
   252 print "\"
   253 print "n"
   254 label *label49
   255 label *label42
   256 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   257 jump *label40 always
-    * set *tmp29 null
   258 label *label40
   259 set :feed_mixers *tmp29
   260 set *tmp44 .ULD_MIXER
-    * jump *label50 equal :feed_mixers false
-    * set *tmp46 .MIXER_IN
+  261 jump *label50 equal *tmp29 false
+  262 set *tmp46 @pyratite
   263 jump *label51 always
   264 label *label50
-    * set *tmp46 .FUEL_OFF
+  265 set *tmp46 @scrap
   266 label *label51
-    * control config *tmp44 *tmp46
+  267 control config .ULD_MIXER *tmp46
   268 sensor *tmp48 .NODE @powerNetStored
   269 sensor *tmp49 .NODE @powerNetCapacity
   270 op div :diff_generators:stored_pc *tmp48 *tmp49
 
   299 label *label61
   300 set :req :kilo*retval
   301 print "Req "
-    * print :req
+  302 print :kilo*retval
   303 print "kJ / "
   304 print :charge
   305 print "kJ. "
 
   311 print "Power "
   312 print :surplus
   313 print "kW, "
-    * print :charge
+  314 print :kilo*retval
   315 print "kJ"
   316 print "\n"
   317 sensor *tmp69 .NODE @powerNetStored
 
   319 op div :update_reactors_desired:stored *tmp69 *tmp70
   320 jump *label63 lessThanEq :update_reactors_desired:stored 0.98
   321 label *label66
-    * op add *tmp73 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * jump *label63 lessThanEq .AVG_SURPLUS *tmp73
+  322 op add *tmp73 6500 10000
+  323 jump *label63 lessThanEq .AVG_SURPLUS 16500
   324 label *label65
   325 jump *label67 lessThanEq .REACTORS_DESIRED 2
   326 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  327 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   328 label *label67
   329 label *label68
   330 label *label63
   331 label *label64
   332 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
   333 label *label72
-    * op mul *tmp79 .GOAL_BUFFER 0.8
-    * jump *label69 greaterThanEq .AVG_SURPLUS *tmp79
+  334 op mul *tmp79 10000 0.8
+  335 jump *label69 greaterThanEq .AVG_SURPLUS 8000
   336 label *label71
-    * op sub *tmp82 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp83 *tmp82 .GENERATOR_OUTPUT
+  337 op sub *tmp82 .AVG_SURPLUS 10000
+  338 op idiv *tmp83 *tmp82 6500
   339 op max :update_reactors_desired:needed 1 *tmp83
   340 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   341 op min .REACTORS_DESIRED 5 *tmp85
 
   359 op idiv *tmp89 :kilo:val 100
   360 op div :kilo*retval *tmp89 10
   361 jump *label75 always
-    * set :kilo*retval null
   362 label *label75
   363 return :kilo*retaddr
   364 end
 
   370 label *label77
   371 set *tmp93 .FUEL_OFF
   372 label *label78
-    * control config *tmp91 *tmp93
+  373 control config :update_fuel:uld_in *tmp93
   374 set *tmp94 :update_fuel:uld_out
   375 jump *label79 notEqual :update_fuel:fuel false
   376 set *tmp97 .FUEL
 
   378 label *label79
   379 set *tmp97 .FUEL_OFF
   380 label *label80
-    * control config *tmp94 *tmp97
+  381 control config :update_fuel:uld_out *tmp97
   382 label *label76
   383 return :update_fuel*retaddr
   384 end
 
   399 op idiv :calc_charge_req:charge_req *tmp105 0.04
   400 set :calc_charge_req*retval :calc_charge_req:charge_req
   401 jump *label81 always
-    * set :calc_charge_req*retval null
   402 label *label81
   403 return :calc_charge_req*retaddr
   404 end
 
   467 call *label2 *invalid :calc_charge_req*retval (m:*label103) (h:*label103)
   468 label *label103
   469 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp147 :start_reactor:charge :start_reactor:charge_req
+  470 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   471 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   472 label *label107
   473 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   483 print :start_reactor:time_left
   484 print " "
   485 print "secs, req "
-    * print :start_reactor:charge_req
+  486 print :calc_charge_req*retval
   487 print "J"
   488 print "\n"
   489 label *label105
 
   587 label *label127
   588 set :start_reactor*retval :start_reactor:supply_fuel
   589 jump *label86 always
-    * set :start_reactor*retval null
   590 label *label86
   591 return :start_reactor*retaddr
   592 end
 
   609 control enabled reactor5 false
   610 set :check_radar*retval true
   611 jump *label128 always
-    * set *tmp198 null
   612 jump *label130 always
   613 label *label129
   614 control enabled projector1 false
   615 control enabled projector2 false
   616 set :check_radar*retval false
   617 jump *label128 always
-    * set *tmp198 null
   618 label *label130
-    * set :check_radar*retval *tmp198
+  619 set :check_radar*retval null
   620 label *label128
   621 return :check_radar*retaddr
   622 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-16 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    53 setaddr :check_radar*retaddr *label10 (h:*label10)
    54 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    55 label *label10
-    * set :emerg_shutdown :check_radar*retval
    56 jump *label12 equal switch1 null
    57 label *label15
    58 sensor *tmp10 switch1 @enabled
 
   176 label *label29
   177 set *tmp26 false
   178 label *label30
-    * set :fuel_many *tmp26
   179 set :update_fuel:fuel *tmp26
   180 set :update_fuel:uld_in .ULD_IN_MANY
   181 set :update_fuel:uld_out .ULD_OUT_MANY
 
   193 label *label35
   194 set *tmp28 false
   195 label *label36
-    * set :throttle_blast:reactors_fueled *tmp28
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   196 sensor *tmp30 .NODE @powerNetStored
   197 op floor :throttle_blast:charge *tmp30
   198 sensor *tmp32 .NODE @powerNetIn
 
   230 print :throttle_blast:fuel_stored
   231 print " "
   232 print "/ "
-    * print .FUEL_LIMIT_LOW
+  233 print 150
   234 print " "
   235 print "(due to emergency)"
   236 print "\n"
 
   241 print :throttle_blast:fuel_stored
   242 print " "
   243 print "/ "
-    * print .FUEL_LIMIT
+  244 print 800
   245 print "\"
   246 print "n"
   247 label *label49
 
   249 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   250 jump *label40 always
   251 label *label40
-    * set :feed_mixers *tmp29
-    * set *tmp44 .ULD_MIXER
   252 jump *label50 equal *tmp29 false
   253 set *tmp46 @pyratite
   254 jump *label51 always
 
   288 setaddr :kilo*retaddr *label61 (h:*label61)
   289 call *label0 *invalid :kilo*retval (m:*label61) (h:*label61)
   290 label *label61
-    * set :req :kilo*retval
   291 print "Req "
   292 print :kilo*retval
   293 print "kJ / "
 
   309 op div :update_reactors_desired:stored *tmp69 *tmp70
   310 jump *label63 lessThanEq :update_reactors_desired:stored 0.98
   311 label *label66
-    * op add *tmp73 6500 10000
   312 jump *label63 lessThanEq .AVG_SURPLUS 16500
   313 label *label65
   314 jump *label67 lessThanEq .REACTORS_DESIRED 2
 
   320 label *label64
   321 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
   322 label *label72
-    * op mul *tmp79 10000 0.8
   323 jump *label69 greaterThanEq .AVG_SURPLUS 8000
   324 label *label71
   325 op sub *tmp82 .AVG_SURPLUS 10000
 
   351 return :kilo*retaddr
   352 end
   353 label *label1
-    * set *tmp91 :update_fuel:uld_in
   354 jump *label77 equal :update_fuel:fuel false
   355 set *tmp93 .FUEL
   356 jump *label78 always
 
   358 set *tmp93 .FUEL_OFF
   359 label *label78
   360 control config :update_fuel:uld_in *tmp93
-    * set *tmp94 :update_fuel:uld_out
   361 jump *label79 notEqual :update_fuel:fuel false
   362 set *tmp97 .FUEL
   363 jump *label80 always
 
   452 setaddr :calc_charge_req*retaddr *label103 (h:*label103)
   453 call *label2 *invalid :calc_charge_req*retval (m:*label103) (h:*label103)
   454 label *label103
-    * set :start_reactor:charge_req :calc_charge_req*retval
   455 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   456 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   457 label *label107
 
   601 set :check_radar*retval false
   602 jump *label128 always
   603 label *label130
-    * set :check_radar*retval null
   604 label *label128
   605 return :check_radar*retaddr
   606 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, Boolean Optimization, pass 1, iteration 1 (-20 instructions):
 
    21 sensor *tmp1 node1 @powerNetOut
    22 op sub *tmp2 *tmp0 *tmp1
    23 op floor :surplus *tmp2
-    * jump *label5 lessThanEq :surplus 10000
-    * op sub *tmp5 @tick 3600
-    * jump *label6 always
-    * label *label5
-    * set *tmp5 @tick
-    * label *label6
+   24 op sub *tmp231 @tick 3600
+   25 select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
    26 set :t_startup1 *tmp5
    27 set :t_startup2 *tmp5
    28 set :t_startup3 *tmp5
 
    47 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    48 label *label10
    49 jump *label12 equal switch1 null
-    * label *label15
    50 sensor *tmp10 switch1 @enabled
    51 jump *label12 notEqual *tmp10 false
-    * label *label14
    52 print "User has disabled emergency switch"
    53 print "\n"
    54 set *tmp8 true
 
   156 label *label28
   157 set :fuel_5 :start_reactor*retval
   158 set :t_startup5 .RET_T_STARTUP
-    * jump *label31 notEqual :fuel_3 false
-    * label *label33
-    * jump *label31 notEqual :fuel_4 false
-    * label *label32
-    * jump *label29 equal :start_reactor*retval false
-    * label *label31
-    * set *tmp26 true
-    * jump *label30 always
-    * label *label29
-    * set *tmp26 false
-    * label *label30
+  159 op or *tmp232 :fuel_3 :fuel_4
+  160 op or *tmp26 *tmp232 :start_reactor*retval
   161 set :update_fuel:fuel *tmp26
   162 set :update_fuel:uld_in .ULD_IN_MANY
   163 set :update_fuel:uld_out .ULD_OUT_MANY
   164 setaddr :update_fuel*retaddr *label34 (h:*label34)
   165 call *label1 *invalid :update_fuel*retval (m:*label34) (h:*label34)
   166 label *label34
-    * jump *label37 notEqual :fuel_1 false
-    * label *label39
-    * jump *label37 notEqual :fuel_2 false
-    * label *label38
-    * jump *label35 equal *tmp26 false
-    * label *label37
-    * set *tmp28 true
-    * jump *label36 always
-    * label *label35
-    * set *tmp28 false
-    * label *label36
+  167 op or *tmp233 :fuel_1 :fuel_2
+  168 op or *tmp28 *tmp233 *tmp26
   169 sensor *tmp30 .NODE @powerNetStored
   170 op floor :throttle_blast:charge *tmp30
   171 sensor *tmp32 .NODE @powerNetIn
 
   174 op floor :throttle_blast:surplus *tmp34
   175 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   176 jump *label44 greaterThanEq :throttle_blast:charge 5000
-    * label *label45
   177 jump *label43 lessThan :throttle_blast:surplus -500
   178 label *label44
   179 jump *label41 equal :emerg_shutdown false
 
   221 op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   222 jump *label40 always
   223 label *label40
-    * jump *label50 equal *tmp29 false
-    * set *tmp46 @pyratite
-    * jump *label51 always
-    * label *label50
-    * set *tmp46 @scrap
-    * label *label51
+  224 select *tmp46 notEqual *tmp29 false @pyratite @scrap
   225 control config .ULD_MIXER *tmp46
   226 sensor *tmp48 .NODE @powerNetStored
   227 sensor *tmp49 .NODE @powerNetCapacity
   228 op div :diff_generators:stored_pc *tmp48 *tmp49
   229 jump *label53 lessThanEq :diff_generators:stored_pc 0.9
-    * label *label56
   230 jump *label53 greaterThanEq .START_POWER_REQ 10
-    * label *label55
   231 print "Differential now idle."
   232 print "\n"
   233 control enabled generator1 false
 
   273 sensor *tmp70 .NODE @powerNetCapacity
   274 op div :update_reactors_desired:stored *tmp69 *tmp70
   275 jump *label63 lessThanEq :update_reactors_desired:stored 0.98
-    * label *label66
   276 jump *label63 lessThanEq .AVG_SURPLUS 16500
-    * label *label65
   277 jump *label67 lessThanEq .REACTORS_DESIRED 2
   278 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   279 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
 
   282 label *label63
   283 label *label64
   284 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
-    * label *label72
   285 jump *label69 greaterThanEq .AVG_SURPLUS 8000
-    * label *label71
   286 op sub *tmp82 .AVG_SURPLUS 10000
   287 op idiv *tmp83 *tmp82 6500
   288 op max :update_reactors_desired:needed 1 *tmp83
 
   312 return :kilo*retaddr
   313 end
   314 label *label1
-    * jump *label77 equal :update_fuel:fuel false
-    * set *tmp93 .FUEL
-    * jump *label78 always
-    * label *label77
-    * set *tmp93 .FUEL_OFF
-    * label *label78
+  315 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   316 control config :update_fuel:uld_in *tmp93
-    * jump *label79 notEqual :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label80 always
-    * label *label79
-    * set *tmp97 .FUEL_OFF
-    * label *label80
+  317 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   318 control config :update_fuel:uld_out *tmp97
   319 label *label76
   320 return :update_fuel*retaddr
 
   323 op sub *tmp98 @tick :calc_charge_req:time
   324 op idiv :calc_charge_req:secs *tmp98 60
   325 jump *label84 greaterThan :calc_charge_req:secs 30
-    * label *label85
   326 sensor *tmp101 :calc_charge_req:reactor @enabled
   327 jump *label82 notEqual *tmp101 false
   328 label *label84
 
   375 jump *label92 always
   376 label *label91
   377 jump *label93 lessThanEq :start_reactor:reactor_num 1
-    * label *label96
   378 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   379 jump *label93 greaterThanEq :start_reactor:fuel_stored *tmp132
-    * label *label95
   380 control enabled :start_reactor:reactor false
   381 print "STOP system fuel low"
   382 print "\n"
 
   402 label *label103
   403 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   404 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
-    * label *label107
   405 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label106
   406 control enabled :start_reactor:reactor false
   407 print "START FAIL battery"
   408 print "\n"
 
   421 jump *label102 always
   422 label *label101
   423 jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * label *label111
   424 jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
-    * label *label110
   425 control enabled :start_reactor:reactor false
   426 print "ABANDON - battery crit"
   427 print "\n"
 
   473 jump *label115 always
   474 label *label114
   475 jump *label116 equal :start_reactor:fuel_on false
-    * label *label119
   476 jump *label116 greaterThanEq :start_reactor:fuel .FUEL_REQ
-    * label *label118
   477 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   478 jump *label120 lessThanEq *tmp182 .FUEL_REQ
   479 print "WAIT fuel"
 
   507 label *label113
   508 label *label90
   509 label *label88
-    * sensor *tmp192 :start_reactor:reactor @enabled
-    * jump *label126 equal :start_reactor:enabled *tmp192
-    * set .RET_T_STARTUP @tick
-    * label *label126
-    * label *label127
+  510 sensor *tmp192 :start_reactor:reactor @enabled
+  511 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick .RET_T_STARTUP
   512 set :start_reactor*retval :start_reactor:supply_fuel
   513 jump *label86 always
   514 label *label86

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   239 label *label54
   240 label *label52
   241 set :kilo:val .AVG_SURPLUS
-    * setaddr :kilo*retaddr *label57 (h:*label57)
-    * call *label0 *invalid :kilo*retval (m:*label57) (h:*label57)
-    * label *label57
+  242 label *label133
+  243 op idiv *tmp89 :kilo:val 100
+  244 op div :kilo*retval *tmp89 10
+  245 jump *label134 always
+  246 label *label134
   247 set :surplus :kilo*retval
   248 sensor :kilo:val .NODE @powerNetStored
-    * setaddr :kilo*retaddr *label58 (h:*label58)
-    * call *label0 *invalid :kilo*retval (m:*label58) (h:*label58)
-    * label *label58
+  249 label *label135
+  250 op idiv *tmp89 :kilo:val 100
+  251 op div :kilo*retval *tmp89 10
+  252 jump *label136 always
+  253 label *label136
   254 set :charge :kilo*retval
   255 jump *label59 lessThanEq .START_POWER_REQ 0
   256 set :kilo:val .START_POWER_REQ
-    * setaddr :kilo*retaddr *label61 (h:*label61)
-    * call *label0 *invalid :kilo*retval (m:*label61) (h:*label61)
-    * label *label61
+  257 label *label137
+  258 op idiv *tmp89 :kilo:val 100
+  259 op div :kilo*retval *tmp89 10
+  260 jump *label138 always
+  261 label *label138
   262 print "Req "
   263 print :kilo*retval
   264 print "kJ / "
 
   310 jump *label7 always
   311 label *label9
   312 end
-    * label *label0
-    * op idiv *tmp89 :kilo:val 100
-    * op div :kilo*retval *tmp89 10
-    * jump *label75 always
-    * label *label75
-    * return :kilo*retaddr
-    * end
   313 label *label1
   314 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   315 control config :update_fuel:uld_in *tmp93

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   240 label *label52
   241 set :kilo:val .AVG_SURPLUS
   242 label *label133
-    * op idiv *tmp89 :kilo:val 100
+  243 op idiv *tmp89 .AVG_SURPLUS 100
   244 op div :kilo*retval *tmp89 10
   245 jump *label134 always
   246 label *label134
 
   255 jump *label59 lessThanEq .START_POWER_REQ 0
   256 set :kilo:val .START_POWER_REQ
   257 label *label137
-    * op idiv *tmp89 :kilo:val 100
+  258 op idiv *tmp89 .START_POWER_REQ 100
   259 op div :kilo*retval *tmp89 10
   260 jump *label138 always
   261 label *label138

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   238 control enabled generator2 true
   239 label *label54
   240 label *label52
-    * set :kilo:val .AVG_SURPLUS
   241 label *label133
   242 op idiv *tmp89 .AVG_SURPLUS 100
   243 op div :kilo*retval *tmp89 10
 
   252 label *label136
   253 set :charge :kilo*retval
   254 jump *label59 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   255 label *label137
   256 op idiv *tmp89 .START_POWER_REQ 100
   257 op div :kilo*retval *tmp89 10

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
   102 set :update_fuel:fuel :start_reactor*retval
   103 set :update_fuel:uld_in .ULD_IN_1
   104 set :update_fuel:uld_out .ULD_OUT_1
-    * setaddr :update_fuel*retaddr *label22 (h:*label22)
-    * call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
-    * label *label22
+  105 label *label139
+  106 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  107 control config :update_fuel:uld_in *tmp93
+  108 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  109 control config :update_fuel:uld_out *tmp97
+  110 label *label140
   111 set :start_reactor:reactor reactor2
   112 set :start_reactor:reactor_num 2
   113 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   121 set :update_fuel:fuel :start_reactor*retval
   122 set :update_fuel:uld_in .ULD_IN_2
   123 set :update_fuel:uld_out .ULD_OUT_2
-    * setaddr :update_fuel*retaddr *label24 (h:*label24)
-    * call *label1 *invalid :update_fuel*retval (m:*label24) (h:*label24)
-    * label *label24
+  124 label *label141
+  125 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  126 control config :update_fuel:uld_in *tmp93
+  127 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  128 control config :update_fuel:uld_out *tmp97
+  129 label *label142
   130 set :check_radar:unit .TOWER
   131 setaddr :check_radar*retaddr *label25 (h:*label25)
   132 call *label4 *invalid :check_radar*retval (m:*label25) (h:*label25)
 
   167 set :update_fuel:fuel *tmp26
   168 set :update_fuel:uld_in .ULD_IN_MANY
   169 set :update_fuel:uld_out .ULD_OUT_MANY
-    * setaddr :update_fuel*retaddr *label34 (h:*label34)
-    * call *label1 *invalid :update_fuel*retval (m:*label34) (h:*label34)
-    * label *label34
+  170 label *label143
+  171 select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  172 control config :update_fuel:uld_in *tmp93
+  173 select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  174 control config :update_fuel:uld_out *tmp97
+  175 label *label144
   176 op or *tmp233 :fuel_1 :fuel_2
   177 op or *tmp28 *tmp233 *tmp26
   178 sensor *tmp30 .NODE @powerNetStored
 
   317 jump *label7 always
   318 label *label9
   319 end
-    * label *label1
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
-    * label *label76
-    * return :update_fuel*retaddr
-    * end
   320 label *label2
   321 op sub *tmp98 @tick :calc_charge_req:time
   322 op idiv :calc_charge_req:secs *tmp98 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   103 set :update_fuel:uld_in .ULD_IN_1
   104 set :update_fuel:uld_out .ULD_OUT_1
   105 label *label139
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+  106 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  107 control config .ULD_IN_1 *tmp93
+  108 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  109 control config .ULD_OUT_1 *tmp97
   110 label *label140
   111 set :start_reactor:reactor reactor2
   112 set :start_reactor:reactor_num 2
 
   122 set :update_fuel:uld_in .ULD_IN_2
   123 set :update_fuel:uld_out .ULD_OUT_2
   124 label *label141
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+  125 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  126 control config .ULD_IN_2 *tmp93
+  127 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  128 control config .ULD_OUT_2 *tmp97
   129 label *label142
   130 set :check_radar:unit .TOWER
   131 setaddr :check_radar*retaddr *label25 (h:*label25)
 
   168 set :update_fuel:uld_in .ULD_IN_MANY
   169 set :update_fuel:uld_out .ULD_OUT_MANY
   170 label *label143
-    * select *tmp93 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp93
-    * select *tmp97 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp97
+  171 select *tmp93 notEqual *tmp26 false @blast-compound @scrap
+  172 control config .ULD_IN_MANY *tmp93
+  173 select *tmp97 equal *tmp26 false @blast-compound @scrap
+  174 control config .ULD_OUT_MANY *tmp97
   175 label *label144
   176 op or *tmp233 :fuel_1 :fuel_2
   177 op or *tmp28 *tmp233 *tmp26

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
    99 label *label21
   100 set :fuel_1 :start_reactor*retval
   101 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
   102 label *label139
   103 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
   104 control config .ULD_IN_1 *tmp93
 
   115 label *label23
   116 set :fuel_2 :start_reactor*retval
   117 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
   118 label *label141
   119 select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
   120 control config .ULD_IN_2 *tmp93
 
   158 set :t_startup5 .RET_T_STARTUP
   159 op or *tmp232 :fuel_3 :fuel_4
   160 op or *tmp26 *tmp232 :start_reactor*retval
-    * set :update_fuel:fuel *tmp26
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
   161 label *label143
   162 select *tmp93 notEqual *tmp26 false @blast-compound @scrap
   163 control config .ULD_IN_MANY *tmp93

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+46 instructions):
 
    61 op or :emerg_shutdown :check_radar*retval *tmp8
    62 set :calc_charge_req:reactor reactor1
    63 set :calc_charge_req:time :t_startup1
-    * setaddr :calc_charge_req*retaddr *label16 (h:*label16)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
-    * label *label16
+   64 label *label145
+   65 op sub *tmp98 @tick :calc_charge_req:time
+   66 op idiv :calc_charge_req:secs *tmp98 60
+   67 jump *label146 greaterThan :calc_charge_req:secs 30
+   68 sensor *tmp101 :calc_charge_req:reactor @enabled
+   69 jump *label147 notEqual *tmp101 false
+   70 label *label146
+   71 set :calc_charge_req*retval 0
+   72 jump *label149 always
+   73 label *label147
+   74 label *label148
+   75 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   76 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+   77 op idiv :calc_charge_req:charge_req *tmp105 0.04
+   78 set :calc_charge_req*retval :calc_charge_req:charge_req
+   79 jump *label149 always
+   80 label *label149
    81 set .START_POWER_REQ :calc_charge_req*retval
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
-    * setaddr :calc_charge_req*retaddr *label17 (h:*label17)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
-    * label *label17
+   84 label *label150
+   85 op sub *tmp98 @tick :calc_charge_req:time
+   86 op idiv :calc_charge_req:secs *tmp98 60
+   87 jump *label151 greaterThan :calc_charge_req:secs 30
+   88 sensor *tmp101 :calc_charge_req:reactor @enabled
+   89 jump *label152 notEqual *tmp101 false
+   90 label *label151
+   91 set :calc_charge_req*retval 0
+   92 jump *label154 always
+   93 label *label152
+   94 label *label153
+   95 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   96 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+   97 op idiv :calc_charge_req:charge_req *tmp105 0.04
+   98 set :calc_charge_req*retval :calc_charge_req:charge_req
+   99 jump *label154 always
+  100 label *label154
   101 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   102 set :calc_charge_req:reactor reactor3
   103 set :calc_charge_req:time :t_startup3
-    * setaddr :calc_charge_req*retaddr *label18 (h:*label18)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
-    * label *label18
+  104 label *label155
+  105 op sub *tmp98 @tick :calc_charge_req:time
+  106 op idiv :calc_charge_req:secs *tmp98 60
+  107 jump *label156 greaterThan :calc_charge_req:secs 30
+  108 sensor *tmp101 :calc_charge_req:reactor @enabled
+  109 jump *label157 notEqual *tmp101 false
+  110 label *label156
+  111 set :calc_charge_req*retval 0
+  112 jump *label159 always
+  113 label *label157
+  114 label *label158
+  115 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  116 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  117 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  118 set :calc_charge_req*retval :calc_charge_req:charge_req
+  119 jump *label159 always
+  120 label *label159
   121 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   122 set :calc_charge_req:reactor reactor4
   123 set :calc_charge_req:time :t_startup4
-    * setaddr :calc_charge_req*retaddr *label19 (h:*label19)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label19) (h:*label19)
-    * label *label19
+  124 label *label160
+  125 op sub *tmp98 @tick :calc_charge_req:time
+  126 op idiv :calc_charge_req:secs *tmp98 60
+  127 jump *label161 greaterThan :calc_charge_req:secs 30
+  128 sensor *tmp101 :calc_charge_req:reactor @enabled
+  129 jump *label162 notEqual *tmp101 false
+  130 label *label161
+  131 set :calc_charge_req*retval 0
+  132 jump *label164 always
+  133 label *label162
+  134 label *label163
+  135 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  136 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  137 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  138 set :calc_charge_req*retval :calc_charge_req:charge_req
+  139 jump *label164 always
+  140 label *label164
   141 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   142 set :calc_charge_req:reactor reactor5
   143 set :calc_charge_req:time :t_startup5
-    * setaddr :calc_charge_req*retaddr *label20 (h:*label20)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label20) (h:*label20)
-    * label *label20
+  144 label *label165
+  145 op sub *tmp98 @tick :calc_charge_req:time
+  146 op idiv :calc_charge_req:secs *tmp98 60
+  147 jump *label166 greaterThan :calc_charge_req:secs 30
+  148 sensor *tmp101 :calc_charge_req:reactor @enabled
+  149 jump *label167 notEqual *tmp101 false
+  150 label *label166
+  151 set :calc_charge_req*retval 0
+  152 jump *label169 always
+  153 label *label167
+  154 label *label168
+  155 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  156 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  157 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  158 set :calc_charge_req*retval :calc_charge_req:charge_req
+  159 jump *label169 always
+  160 label *label169
   161 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   162 set :start_reactor:reactor reactor1
   163 set :start_reactor:reactor_num 1
 
   378 jump *label7 always
   379 label *label9
   380 end
-    * label *label2
-    * op sub *tmp98 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp98 60
-    * jump *label84 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp101 :calc_charge_req:reactor @enabled
-    * jump *label82 notEqual *tmp101 false
-    * label *label84
-    * set :calc_charge_req*retval 0
-    * jump *label81 always
-    * label *label82
-    * label *label83
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp105 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label81 always
-    * label *label81
-    * return :calc_charge_req*retaddr
-    * end
   381 label *label3
   382 set .RET_T_STARTUP :start_reactor:t_startup
   383 op sub *tmp108 @tick :start_reactor:t_startup
 
   437 jump *label101 greaterThanEq :start_reactor:secs 30
   438 set :calc_charge_req:reactor :start_reactor:reactor
   439 set :calc_charge_req:time :start_reactor:t_startup
-    * setaddr :calc_charge_req*retaddr *label103 (h:*label103)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label103) (h:*label103)
-    * label *label103
+  440 label *label170
+  441 op sub *tmp98 @tick :calc_charge_req:time
+  442 op idiv :calc_charge_req:secs *tmp98 60
+  443 jump *label171 greaterThan :calc_charge_req:secs 30
+  444 sensor *tmp101 :calc_charge_req:reactor @enabled
+  445 jump *label172 notEqual *tmp101 false
+  446 label *label171
+  447 set :calc_charge_req*retval 0
+  448 jump *label174 always
+  449 label *label172
+  450 label *label173
+  451 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  452 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  453 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  454 set :calc_charge_req*retval :calc_charge_req:charge_req
+  455 jump *label174 always
+  456 label *label174
   457 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   458 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   459 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    62 set :calc_charge_req:reactor reactor1
    63 set :calc_charge_req:time :t_startup1
    64 label *label145
-    * op sub *tmp98 @tick :calc_charge_req:time
+   65 op sub *tmp98 @tick :t_startup1
    66 op idiv :calc_charge_req:secs *tmp98 60
    67 jump *label146 greaterThan :calc_charge_req:secs 30
    68 sensor *tmp101 :calc_charge_req:reactor @enabled
 
    82 set :calc_charge_req:reactor reactor2
    83 set :calc_charge_req:time :t_startup2
    84 label *label150
-    * op sub *tmp98 @tick :calc_charge_req:time
+   85 op sub *tmp98 @tick :t_startup2
    86 op idiv :calc_charge_req:secs *tmp98 60
    87 jump *label151 greaterThan :calc_charge_req:secs 30
    88 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   102 set :calc_charge_req:reactor reactor3
   103 set :calc_charge_req:time :t_startup3
   104 label *label155
-    * op sub *tmp98 @tick :calc_charge_req:time
+  105 op sub *tmp98 @tick :t_startup3
   106 op idiv :calc_charge_req:secs *tmp98 60
   107 jump *label156 greaterThan :calc_charge_req:secs 30
   108 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   122 set :calc_charge_req:reactor reactor4
   123 set :calc_charge_req:time :t_startup4
   124 label *label160
-    * op sub *tmp98 @tick :calc_charge_req:time
+  125 op sub *tmp98 @tick :t_startup4
   126 op idiv :calc_charge_req:secs *tmp98 60
   127 jump *label161 greaterThan :calc_charge_req:secs 30
   128 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   142 set :calc_charge_req:reactor reactor5
   143 set :calc_charge_req:time :t_startup5
   144 label *label165
-    * op sub *tmp98 @tick :calc_charge_req:time
+  145 op sub *tmp98 @tick :t_startup5
   146 op idiv :calc_charge_req:secs *tmp98 60
   147 jump *label166 greaterThan :calc_charge_req:secs 30
   148 sensor *tmp101 :calc_charge_req:reactor @enabled
 
   438 set :calc_charge_req:reactor :start_reactor:reactor
   439 set :calc_charge_req:time :start_reactor:t_startup
   440 label *label170
-    * op sub *tmp98 @tick :calc_charge_req:time
+  441 op sub *tmp98 @tick :start_reactor:t_startup
   442 op idiv :calc_charge_req:secs *tmp98 60
   443 jump *label171 greaterThan :calc_charge_req:secs 30
-    * sensor *tmp101 :calc_charge_req:reactor @enabled
+  444 sensor *tmp101 :start_reactor:reactor @enabled
   445 jump *label172 notEqual *tmp101 false
   446 label *label171
   447 set :calc_charge_req*retval 0
 
   562 label *label90
   563 label *label88
   564 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick .RET_T_STARTUP
+  565 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
   566 set :start_reactor*retval :start_reactor:supply_fuel
   567 jump *label86 always
   568 label *label86

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-8 instructions):
 
    60 label *label11
    61 op or :emerg_shutdown :check_radar*retval *tmp8
    62 set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    63 label *label145
    64 op sub *tmp98 @tick :t_startup1
    65 op idiv :calc_charge_req:secs *tmp98 60
 
    79 label *label149
    80 set .START_POWER_REQ :calc_charge_req*retval
    81 set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
    82 label *label150
    83 op sub *tmp98 @tick :t_startup2
    84 op idiv :calc_charge_req:secs *tmp98 60
 
    98 label *label154
    99 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   100 set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   101 label *label155
   102 op sub *tmp98 @tick :t_startup3
   103 op idiv :calc_charge_req:secs *tmp98 60
 
   117 label *label159
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   119 set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   120 label *label160
   121 op sub *tmp98 @tick :t_startup4
   122 op idiv :calc_charge_req:secs *tmp98 60
 
   136 label *label164
   137 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   138 set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   139 label *label165
   140 op sub *tmp98 @tick :t_startup5
   141 op idiv :calc_charge_req:secs *tmp98 60
 
   374 label *label9
   375 end
   376 label *label3
-    * set .RET_T_STARTUP :start_reactor:t_startup
   377 op sub *tmp108 @tick :start_reactor:t_startup
   378 op idiv :start_reactor:secs *tmp108 60
   379 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   429 jump *label100 always
   430 label *label99
   431 jump *label101 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   432 label *label170
   433 op sub *tmp98 @tick :start_reactor:t_startup
   434 op idiv :calc_charge_req:secs *tmp98 60

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    43 set .CONTAINER vault1
    44 set .NODE node1
    45 set :check_radar:unit .TOWER
-    * setaddr :check_radar*retaddr *label10 (h:*label10)
-    * call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
-    * label *label10
+   46 label *label175
+   47 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   48 jump *label176 equal :check_radar:enemy_found null
+   49 control enabled projector1 true
+   50 control enabled projector2 true
+   51 control config .ULD_IN_1 .FUEL_OFF
+   52 control config .ULD_OUT_1 .FUEL
+   53 control config .ULD_IN_2 .FUEL_OFF
+   54 control config .ULD_OUT_2 .FUEL
+   55 control config .ULD_IN_MANY .FUEL_OFF
+   56 control config .ULD_OUT_MANY .FUEL
+   57 control config .ULD_MIXER .FUEL_OFF
+   58 control enabled reactor1 false
+   59 control enabled reactor2 false
+   60 control enabled reactor3 false
+   61 control enabled reactor4 false
+   62 control enabled reactor5 false
+   63 set :check_radar*retval true
+   64 jump *label178 always
+   65 jump *label177 always
+   66 label *label176
+   67 control enabled projector1 false
+   68 control enabled projector2 false
+   69 set :check_radar*retval false
+   70 jump *label178 always
+   71 label *label177
+   72 label *label178
    73 jump *label12 equal switch1 null
    74 sensor *tmp10 switch1 @enabled
    75 jump *label12 notEqual *tmp10 false
 
   211 control config .ULD_OUT_2 *tmp97
   212 label *label142
   213 set :check_radar:unit .TOWER
-    * setaddr :check_radar*retaddr *label25 (h:*label25)
-    * call *label4 *invalid :check_radar*retval (m:*label25) (h:*label25)
-    * label *label25
+  214 label *label179
+  215 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  216 jump *label180 equal :check_radar:enemy_found null
+  217 control enabled projector1 true
+  218 control enabled projector2 true
+  219 control config .ULD_IN_1 .FUEL_OFF
+  220 control config .ULD_OUT_1 .FUEL
+  221 control config .ULD_IN_2 .FUEL_OFF
+  222 control config .ULD_OUT_2 .FUEL
+  223 control config .ULD_IN_MANY .FUEL_OFF
+  224 control config .ULD_OUT_MANY .FUEL
+  225 control config .ULD_MIXER .FUEL_OFF
+  226 control enabled reactor1 false
+  227 control enabled reactor2 false
+  228 control enabled reactor3 false
+  229 control enabled reactor4 false
+  230 control enabled reactor5 false
+  231 set :check_radar*retval true
+  232 jump *label182 always
+  233 jump *label181 always
+  234 label *label180
+  235 control enabled projector1 false
+  236 control enabled projector2 false
+  237 set :check_radar*retval false
+  238 jump *label182 always
+  239 label *label181
+  240 label *label182
   241 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   242 set :start_reactor:reactor reactor3
   243 set :start_reactor:reactor_num 3
 
   608 label *label86
   609 return :start_reactor*retaddr
   610 end
-    * label *label4
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label129 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label128 always
-    * jump *label130 always
-    * label *label129
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label128 always
-    * label *label130
-    * label *label128
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    44 set .NODE node1
    45 set :check_radar:unit .TOWER
    46 label *label175
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   47 radar enemy any any health .TOWER 1 :check_radar:enemy_found
    48 jump *label176 equal :check_radar:enemy_found null
    49 control enabled projector1 true
    50 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   51 control config .ULD_IN_1 @scrap
+   52 control config .ULD_OUT_1 @blast-compound
+   53 control config .ULD_IN_2 @scrap
+   54 control config .ULD_OUT_2 @blast-compound
+   55 control config .ULD_IN_MANY @scrap
+   56 control config .ULD_OUT_MANY @blast-compound
+   57 control config .ULD_MIXER @scrap
    58 control enabled reactor1 false
    59 control enabled reactor2 false
    60 control enabled reactor3 false
 
   212 label *label142
   213 set :check_radar:unit .TOWER
   214 label *label179
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  215 radar enemy any any health .TOWER 1 :check_radar:enemy_found
   216 jump *label180 equal :check_radar:enemy_found null
   217 control enabled projector1 true
   218 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  219 control config .ULD_IN_1 @scrap
+  220 control config .ULD_OUT_1 @blast-compound
+  221 control config .ULD_IN_2 @scrap
+  222 control config .ULD_OUT_2 @blast-compound
+  223 control config .ULD_IN_MANY @scrap
+  224 control config .ULD_OUT_MANY @blast-compound
+  225 control config .ULD_MIXER @scrap
   226 control enabled reactor1 false
   227 control enabled reactor2 false
   228 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-4 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    40 set .TOWER cyclone1
    41 set .CONTAINER vault1
    42 set .NODE node1
-    * set :check_radar:unit .TOWER
    43 label *label175
    44 radar enemy any any health .TOWER 1 :check_radar:enemy_found
    45 jump *label176 equal :check_radar:enemy_found null
 
   207 select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
   208 control config .ULD_OUT_2 *tmp97
   209 label *label142
-    * set :check_radar:unit .TOWER
   210 label *label179
   211 radar enemy any any health .TOWER 1 :check_radar:enemy_found
   212 jump *label180 equal :check_radar:enemy_found null

Modifications by Inline function call at line 80:14 (+146 instructions):
 
   180 set :start_reactor:emerg_shutdown :emerg_shutdown
   181 set :start_reactor:fuel_on :fuel_1
   182 set :start_reactor:t_startup :t_startup1
-    * setaddr :start_reactor*retaddr *label21 (h:*label21)
-    * call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
-    * label *label21
+  183 label *label183
+  184 op sub *tmp108 @tick :start_reactor:t_startup
+  185 op idiv :start_reactor:secs *tmp108 60
+  186 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  187 set :start_reactor:supply_fuel true
+  188 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  189 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  190 sensor *tmp113 .NODE @powerNetStored
+  191 op floor :start_reactor:charge *tmp113
+  192 sensor *tmp115 .NODE @powerNetIn
+  193 sensor *tmp116 .NODE @powerNetOut
+  194 op sub *tmp117 *tmp115 *tmp116
+  195 op floor :start_reactor:surplus *tmp117
+  196 op mul *tmp119 .AVG_SURPLUS 0.8
+  197 op mul *tmp120 :start_reactor:surplus 0.2
+  198 op add .AVG_SURPLUS *tmp119 *tmp120
+  199 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  200 print "#"
+  201 print :start_reactor:reactor_num
+  202 print " "
+  203 print "- "
+  204 jump *label184 equal :start_reactor:emerg_shutdown false
+  205 control enabled :start_reactor:reactor false
+  206 print "emergency mode"
+  207 print "\n"
+  208 set :start_reactor:supply_fuel false
+  209 jump *label218 always
+  210 label *label184
+  211 jump *label204 equal :start_reactor:enabled false
+  212 jump *label185 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  213 control enabled :start_reactor:reactor false
+  214 print "STOP unwanted"
+  215 print "\n"
+  216 jump *label203 always
+  217 label *label185
+  218 jump *label186 lessThanEq :start_reactor:reactor_num 1
+  219 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  220 jump *label186 greaterThanEq :start_reactor:fuel_stored *tmp132
+  221 control enabled :start_reactor:reactor false
+  222 print "STOP system fuel low"
+  223 print "\n"
+  224 jump *label202 always
+  225 label *label186
+  226 jump *label187 greaterThan :start_reactor:fuel 1
+  227 control enabled :start_reactor:reactor false
+  228 print "STOP fuel low"
+  229 print "\n"
+  230 jump *label201 always
+  231 label *label187
+  232 jump *label188 greaterThan :start_reactor:cryo .CRYO_ABORT
+  233 control enabled :start_reactor:reactor false
+  234 print "STOP out of cryo"
+  235 print "\n"
+  236 jump *label200 always
+  237 label *label188
+  238 jump *label196 greaterThanEq :start_reactor:secs 30
+  239 label *label189
+  240 op sub *tmp98 @tick :start_reactor:t_startup
+  241 op idiv :calc_charge_req:secs *tmp98 60
+  242 jump *label190 greaterThan :calc_charge_req:secs 30
+  243 sensor *tmp101 :start_reactor:reactor @enabled
+  244 jump *label191 notEqual *tmp101 false
+  245 label *label190
+  246 set :calc_charge_req*retval 0
+  247 jump *label193 always
+  248 label *label191
+  249 label *label192
+  250 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  251 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  252 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  253 set :calc_charge_req*retval :calc_charge_req:charge_req
+  254 jump *label193 always
+  255 label *label193
+  256 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  257 jump *label194 greaterThanEq *tmp147 .PWR_ABORT
+  258 jump *label194 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  259 control enabled :start_reactor:reactor false
+  260 print "START FAIL battery"
+  261 print "\n"
+  262 set :start_reactor:supply_fuel false
+  263 jump *label195 always
+  264 label *label194
+  265 op sub :start_reactor:time_left 30 :start_reactor:secs
+  266 print "Starting "
+  267 print :start_reactor:time_left
+  268 print " "
+  269 print "secs, req "
+  270 print :calc_charge_req*retval
+  271 print "J"
+  272 print "\n"
+  273 label *label195
+  274 jump *label199 always
+  275 label *label196
+  276 jump *label197 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  277 jump *label197 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  278 control enabled :start_reactor:reactor false
+  279 print "ABANDON - battery crit"
+  280 print "\n"
+  281 set :start_reactor:supply_fuel false
+  282 jump *label198 always
+  283 label *label197
+  284 op idiv :start_reactor:mins :start_reactor:secs 6
+  285 op div :start_reactor:mins :start_reactor:mins 10
+  286 print "RUN "
+  287 print :start_reactor:mins
+  288 print " "
+  289 print "mins"
+  290 print "\n"
+  291 label *label198
+  292 label *label199
+  293 label *label200
+  294 label *label201
+  295 label *label202
+  296 label *label203
+  297 jump *label217 always
+  298 label *label204
+  299 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  300 op sub *tmp162 *tmp161 .PWR_ABORT
+  301 op div *tmp163 *tmp162 .PWR_REQ
+  302 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  303 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  304 op max :start_reactor:flow_units -0.1 *tmp165
+  305 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  306 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  307 jump *label205 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  308 print "IDLE"
+  309 print "\n"
+  310 set :start_reactor:supply_fuel false
+  311 jump *label216 always
+  312 label *label205
+  313 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  314 jump *label206 greaterThanEq *tmp171 1
+  315 op idiv *tmp175 :start_reactor:flow_units 0.001
+  316 op div :start_reactor:flow *tmp175 10
+  317 op idiv *tmp178 :start_reactor:charge_units 0.001
+  318 op div :start_reactor:charge *tmp178 10
+  319 print "WAIT power. (%"
+  320 print :start_reactor:charge
+  321 print "J + %"
+  322 print :start_reactor:flow
+  323 print "W)"
+  324 print "\n"
+  325 set :start_reactor:supply_fuel false
+  326 jump *label215 always
+  327 label *label206
+  328 jump *label209 equal :start_reactor:fuel_on false
+  329 jump *label209 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  330 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  331 jump *label207 lessThanEq *tmp182 .FUEL_REQ
+  332 print "WAIT fuel"
+  333 print "\n"
+  334 jump *label208 always
+  335 label *label207
+  336 print "WAIT system fuel"
+  337 print "\n"
+  338 label *label208
+  339 jump *label214 always
+  340 label *label209
+  341 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  342 jump *label210 greaterThanEq :start_reactor:fuel_stored *tmp185
+  343 print "WAIT buffer fuel"
+  344 print "\n"
+  345 jump *label213 always
+  346 label *label210
+  347 jump *label211 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  348 print "WAIT cryo"
+  349 print "\n"
+  350 jump *label212 always
+  351 label *label211
+  352 print "STARTUP"
+  353 print "\n"
+  354 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  355 control enabled :start_reactor:reactor true
+  356 label *label212
+  357 label *label213
+  358 label *label214
+  359 label *label215
+  360 label *label216
+  361 label *label217
+  362 label *label218
+  363 sensor *tmp192 :start_reactor:reactor @enabled
+  364 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  365 set :start_reactor*retval :start_reactor:supply_fuel
+  366 jump *label219 always
+  367 label *label219
   368 set :fuel_1 :start_reactor*retval
   369 set :t_startup1 .RET_T_STARTUP
   370 label *label139

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    26 set :t_startup3 *tmp5
    27 set :t_startup4 *tmp5
    28 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    29 set .REACTORS_DESIRED 5
    30 set .AVG_SURPLUS 500
    31 label *label7
 
   180 set :start_reactor:fuel_on :fuel_1
   181 set :start_reactor:t_startup :t_startup1
   182 label *label183
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  183 op sub *tmp108 @tick :t_startup1
   184 op idiv :start_reactor:secs *tmp108 60
   185 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   186 set :start_reactor:supply_fuel true
 
   197 op add .AVG_SURPLUS *tmp119 *tmp120
   198 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   199 print "#"
-    * print :start_reactor:reactor_num
+  200 print 1
   201 print " "
   202 print "- "
-    * jump *label184 equal :start_reactor:emerg_shutdown false
+  203 jump *label184 equal :emerg_shutdown false
   204 control enabled :start_reactor:reactor false
   205 print "emergency mode"
   206 print "\n"
 
   208 jump *label218 always
   209 label *label184
   210 jump *label204 equal :start_reactor:enabled false
-    * jump *label185 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  211 jump *label185 greaterThanEq .REACTORS_DESIRED 1
   212 control enabled :start_reactor:reactor false
   213 print "STOP unwanted"
   214 print "\n"
   215 jump *label203 always
   216 label *label185
-    * jump *label186 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label186 greaterThanEq :start_reactor:fuel_stored *tmp132
+  217 jump *label186 lessThanEq 1 1
+  218 op mul *tmp132 15 1
+  219 jump *label186 greaterThanEq :start_reactor:fuel_stored 15
   220 control enabled :start_reactor:reactor false
   221 print "STOP system fuel low"
   222 print "\n"
 
   228 print "\n"
   229 jump *label201 always
   230 label *label187
-    * jump *label188 greaterThan :start_reactor:cryo .CRYO_ABORT
+  231 jump *label188 greaterThan :start_reactor:cryo 1
   232 control enabled :start_reactor:reactor false
   233 print "STOP out of cryo"
   234 print "\n"
 
   236 label *label188
   237 jump *label196 greaterThanEq :start_reactor:secs 30
   238 label *label189
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  239 op sub *tmp98 @tick :t_startup1
   240 op idiv :calc_charge_req:secs *tmp98 60
   241 jump *label190 greaterThan :calc_charge_req:secs 30
   242 sensor *tmp101 :start_reactor:reactor @enabled
 
   253 jump *label193 always
   254 label *label193
   255 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label194 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label194 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  256 jump *label194 greaterThanEq *tmp147 5000
+  257 jump *label194 greaterThanEq :start_reactor:surplus -500
   258 control enabled :start_reactor:reactor false
   259 print "START FAIL battery"
   260 print "\n"
 
   272 label *label195
   273 jump *label199 always
   274 label *label196
-    * jump *label197 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label197 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  275 jump *label197 greaterThanEq :start_reactor:charge 2000
+  276 jump *label197 greaterThanEq :start_reactor:surplus -500
   277 control enabled :start_reactor:reactor false
   278 print "ABANDON - battery crit"
   279 print "\n"
 
   296 jump *label217 always
   297 label *label204
   298 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  299 op sub *tmp162 *tmp161 5000
+  300 op div *tmp163 *tmp162 23000
+  301 op mul :start_reactor:charge_units *tmp163 0.6
+  302 op div *tmp165 :start_reactor:surplus 2000
   303 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label205 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  304 op mul *tmp167 2 1
+  305 op add :start_reactor:cryo_req 3 2
+  306 jump *label205 greaterThanEq .REACTORS_DESIRED 1
   307 print "IDLE"
   308 print "\n"
   309 set :start_reactor:supply_fuel false
 
   324 set :start_reactor:supply_fuel false
   325 jump *label215 always
   326 label *label206
-    * jump *label209 equal :start_reactor:fuel_on false
-    * jump *label209 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  327 jump *label209 equal :fuel_1 false
+  328 jump *label209 greaterThanEq :start_reactor:fuel 10
   329 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label207 lessThanEq *tmp182 .FUEL_REQ
+  330 jump *label207 lessThanEq *tmp182 10
   331 print "WAIT fuel"
   332 print "\n"
   333 jump *label208 always
 
   337 label *label208
   338 jump *label214 always
   339 label *label209
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label210 greaterThanEq :start_reactor:fuel_stored *tmp185
+  340 op mul *tmp185 45 1
+  341 jump *label210 greaterThanEq :start_reactor:fuel_stored 45
   342 print "WAIT buffer fuel"
   343 print "\n"
   344 jump *label213 always
   345 label *label210
-    * jump *label211 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  346 jump *label211 greaterThanEq :start_reactor:cryo 5
   347 print "WAIT cryo"
   348 print "\n"
   349 jump *label212 always
   350 label *label211
   351 print "STARTUP"
   352 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  353 op add .START_POWER_REQ .START_POWER_REQ 23000
   354 control enabled :start_reactor:reactor true
   355 label *label212
   356 label *label213
 
   360 label *label217
   361 label *label218
   362 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  363 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
   364 set :start_reactor*retval :start_reactor:supply_fuel
   365 jump *label219 always
   366 label *label219
-    * set :fuel_1 :start_reactor*retval
+  367 set :fuel_1 :start_reactor:supply_fuel
   368 set :t_startup1 .RET_T_STARTUP
   369 label *label139
-    * select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  370 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   371 control config .ULD_IN_1 *tmp93
-    * select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  372 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   373 control config .ULD_OUT_1 *tmp97
   374 label *label140
   375 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   175 label *label169
   176 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   177 set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   178 label *label183
   179 op sub *tmp108 @tick :t_startup1
   180 op idiv :start_reactor:secs *tmp108 60
 
   294 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   295 op sub *tmp162 *tmp161 5000
   296 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  297 op div :start_reactor:charge_units *tmp162 38333.333333333336
   298 op div *tmp165 :start_reactor:surplus 2000
   299 op max :start_reactor:flow_units -0.1 *tmp165
   300 op mul *tmp167 2 1
 
   357 label *label218
   358 sensor *tmp192 :start_reactor:reactor @enabled
   359 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   360 jump *label219 always
   361 label *label219
   362 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+146 instructions):
 
   372 set :start_reactor:emerg_shutdown :emerg_shutdown
   373 set :start_reactor:fuel_on :fuel_2
   374 set :start_reactor:t_startup :t_startup2
-    * setaddr :start_reactor*retaddr *label23 (h:*label23)
-    * call *label3 *invalid :start_reactor*retval (m:*label23) (h:*label23)
-    * label *label23
+  375 label *label220
+  376 op sub *tmp108 @tick :start_reactor:t_startup
+  377 op idiv :start_reactor:secs *tmp108 60
+  378 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  379 set :start_reactor:supply_fuel true
+  380 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  381 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  382 sensor *tmp113 .NODE @powerNetStored
+  383 op floor :start_reactor:charge *tmp113
+  384 sensor *tmp115 .NODE @powerNetIn
+  385 sensor *tmp116 .NODE @powerNetOut
+  386 op sub *tmp117 *tmp115 *tmp116
+  387 op floor :start_reactor:surplus *tmp117
+  388 op mul *tmp119 .AVG_SURPLUS 0.8
+  389 op mul *tmp120 :start_reactor:surplus 0.2
+  390 op add .AVG_SURPLUS *tmp119 *tmp120
+  391 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  392 print "#"
+  393 print :start_reactor:reactor_num
+  394 print " "
+  395 print "- "
+  396 jump *label221 equal :start_reactor:emerg_shutdown false
+  397 control enabled :start_reactor:reactor false
+  398 print "emergency mode"
+  399 print "\n"
+  400 set :start_reactor:supply_fuel false
+  401 jump *label255 always
+  402 label *label221
+  403 jump *label241 equal :start_reactor:enabled false
+  404 jump *label222 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  405 control enabled :start_reactor:reactor false
+  406 print "STOP unwanted"
+  407 print "\n"
+  408 jump *label240 always
+  409 label *label222
+  410 jump *label223 lessThanEq :start_reactor:reactor_num 1
+  411 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  412 jump *label223 greaterThanEq :start_reactor:fuel_stored *tmp132
+  413 control enabled :start_reactor:reactor false
+  414 print "STOP system fuel low"
+  415 print "\n"
+  416 jump *label239 always
+  417 label *label223
+  418 jump *label224 greaterThan :start_reactor:fuel 1
+  419 control enabled :start_reactor:reactor false
+  420 print "STOP fuel low"
+  421 print "\n"
+  422 jump *label238 always
+  423 label *label224
+  424 jump *label225 greaterThan :start_reactor:cryo .CRYO_ABORT
+  425 control enabled :start_reactor:reactor false
+  426 print "STOP out of cryo"
+  427 print "\n"
+  428 jump *label237 always
+  429 label *label225
+  430 jump *label233 greaterThanEq :start_reactor:secs 30
+  431 label *label226
+  432 op sub *tmp98 @tick :start_reactor:t_startup
+  433 op idiv :calc_charge_req:secs *tmp98 60
+  434 jump *label227 greaterThan :calc_charge_req:secs 30
+  435 sensor *tmp101 :start_reactor:reactor @enabled
+  436 jump *label228 notEqual *tmp101 false
+  437 label *label227
+  438 set :calc_charge_req*retval 0
+  439 jump *label230 always
+  440 label *label228
+  441 label *label229
+  442 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  443 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  444 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  445 set :calc_charge_req*retval :calc_charge_req:charge_req
+  446 jump *label230 always
+  447 label *label230
+  448 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  449 jump *label231 greaterThanEq *tmp147 .PWR_ABORT
+  450 jump *label231 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  451 control enabled :start_reactor:reactor false
+  452 print "START FAIL battery"
+  453 print "\n"
+  454 set :start_reactor:supply_fuel false
+  455 jump *label232 always
+  456 label *label231
+  457 op sub :start_reactor:time_left 30 :start_reactor:secs
+  458 print "Starting "
+  459 print :start_reactor:time_left
+  460 print " "
+  461 print "secs, req "
+  462 print :calc_charge_req*retval
+  463 print "J"
+  464 print "\n"
+  465 label *label232
+  466 jump *label236 always
+  467 label *label233
+  468 jump *label234 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  469 jump *label234 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  470 control enabled :start_reactor:reactor false
+  471 print "ABANDON - battery crit"
+  472 print "\n"
+  473 set :start_reactor:supply_fuel false
+  474 jump *label235 always
+  475 label *label234
+  476 op idiv :start_reactor:mins :start_reactor:secs 6
+  477 op div :start_reactor:mins :start_reactor:mins 10
+  478 print "RUN "
+  479 print :start_reactor:mins
+  480 print " "
+  481 print "mins"
+  482 print "\n"
+  483 label *label235
+  484 label *label236
+  485 label *label237
+  486 label *label238
+  487 label *label239
+  488 label *label240
+  489 jump *label254 always
+  490 label *label241
+  491 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  492 op sub *tmp162 *tmp161 .PWR_ABORT
+  493 op div *tmp163 *tmp162 .PWR_REQ
+  494 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  495 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  496 op max :start_reactor:flow_units -0.1 *tmp165
+  497 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  498 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  499 jump *label242 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  500 print "IDLE"
+  501 print "\n"
+  502 set :start_reactor:supply_fuel false
+  503 jump *label253 always
+  504 label *label242
+  505 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  506 jump *label243 greaterThanEq *tmp171 1
+  507 op idiv *tmp175 :start_reactor:flow_units 0.001
+  508 op div :start_reactor:flow *tmp175 10
+  509 op idiv *tmp178 :start_reactor:charge_units 0.001
+  510 op div :start_reactor:charge *tmp178 10
+  511 print "WAIT power. (%"
+  512 print :start_reactor:charge
+  513 print "J + %"
+  514 print :start_reactor:flow
+  515 print "W)"
+  516 print "\n"
+  517 set :start_reactor:supply_fuel false
+  518 jump *label252 always
+  519 label *label243
+  520 jump *label246 equal :start_reactor:fuel_on false
+  521 jump *label246 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  522 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  523 jump *label244 lessThanEq *tmp182 .FUEL_REQ
+  524 print "WAIT fuel"
+  525 print "\n"
+  526 jump *label245 always
+  527 label *label244
+  528 print "WAIT system fuel"
+  529 print "\n"
+  530 label *label245
+  531 jump *label251 always
+  532 label *label246
+  533 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  534 jump *label247 greaterThanEq :start_reactor:fuel_stored *tmp185
+  535 print "WAIT buffer fuel"
+  536 print "\n"
+  537 jump *label250 always
+  538 label *label247
+  539 jump *label248 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  540 print "WAIT cryo"
+  541 print "\n"
+  542 jump *label249 always
+  543 label *label248
+  544 print "STARTUP"
+  545 print "\n"
+  546 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  547 control enabled :start_reactor:reactor true
+  548 label *label249
+  549 label *label250
+  550 label *label251
+  551 label *label252
+  552 label *label253
+  553 label *label254
+  554 label *label255
+  555 sensor *tmp192 :start_reactor:reactor @enabled
+  556 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  557 set :start_reactor*retval :start_reactor:supply_fuel
+  558 jump *label256 always
+  559 label *label256
   560 set :fuel_2 :start_reactor*retval
   561 set :t_startup2 .RET_T_STARTUP
   562 label *label141

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   373 set :start_reactor:fuel_on :fuel_2
   374 set :start_reactor:t_startup :t_startup2
   375 label *label220
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  376 op sub *tmp108 @tick :t_startup2
   377 op idiv :start_reactor:secs *tmp108 60
   378 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   379 set :start_reactor:supply_fuel true
 
   390 op add .AVG_SURPLUS *tmp119 *tmp120
   391 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   392 print "#"
-    * print :start_reactor:reactor_num
+  393 print 2
   394 print " "
   395 print "- "
-    * jump *label221 equal :start_reactor:emerg_shutdown false
+  396 jump *label221 equal :emerg_shutdown false
   397 control enabled :start_reactor:reactor false
   398 print "emergency mode"
   399 print "\n"
 
   401 jump *label255 always
   402 label *label221
   403 jump *label241 equal :start_reactor:enabled false
-    * jump *label222 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  404 jump *label222 greaterThanEq .REACTORS_DESIRED 2
   405 control enabled :start_reactor:reactor false
   406 print "STOP unwanted"
   407 print "\n"
   408 jump *label240 always
   409 label *label222
-    * jump *label223 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label223 greaterThanEq :start_reactor:fuel_stored *tmp132
+  410 jump *label223 lessThanEq 2 1
+  411 op mul *tmp132 15 2
+  412 jump *label223 greaterThanEq :start_reactor:fuel_stored 30
   413 control enabled :start_reactor:reactor false
   414 print "STOP system fuel low"
   415 print "\n"
 
   421 print "\n"
   422 jump *label238 always
   423 label *label224
-    * jump *label225 greaterThan :start_reactor:cryo .CRYO_ABORT
+  424 jump *label225 greaterThan :start_reactor:cryo 1
   425 control enabled :start_reactor:reactor false
   426 print "STOP out of cryo"
   427 print "\n"
 
   429 label *label225
   430 jump *label233 greaterThanEq :start_reactor:secs 30
   431 label *label226
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  432 op sub *tmp98 @tick :t_startup2
   433 op idiv :calc_charge_req:secs *tmp98 60
   434 jump *label227 greaterThan :calc_charge_req:secs 30
   435 sensor *tmp101 :start_reactor:reactor @enabled
 
   446 jump *label230 always
   447 label *label230
   448 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label231 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label231 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  449 jump *label231 greaterThanEq *tmp147 5000
+  450 jump *label231 greaterThanEq :start_reactor:surplus -500
   451 control enabled :start_reactor:reactor false
   452 print "START FAIL battery"
   453 print "\n"
 
   465 label *label232
   466 jump *label236 always
   467 label *label233
-    * jump *label234 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label234 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  468 jump *label234 greaterThanEq :start_reactor:charge 2000
+  469 jump *label234 greaterThanEq :start_reactor:surplus -500
   470 control enabled :start_reactor:reactor false
   471 print "ABANDON - battery crit"
   472 print "\n"
 
   489 jump *label254 always
   490 label *label241
   491 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  492 op sub *tmp162 *tmp161 5000
+  493 op div *tmp163 *tmp162 23000
+  494 op mul :start_reactor:charge_units *tmp163 0.6
+  495 op div *tmp165 :start_reactor:surplus 2000
   496 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label242 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  497 op mul *tmp167 2 2
+  498 op add :start_reactor:cryo_req 3 4
+  499 jump *label242 greaterThanEq .REACTORS_DESIRED 2
   500 print "IDLE"
   501 print "\n"
   502 set :start_reactor:supply_fuel false
 
   517 set :start_reactor:supply_fuel false
   518 jump *label252 always
   519 label *label243
-    * jump *label246 equal :start_reactor:fuel_on false
-    * jump *label246 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  520 jump *label246 equal :fuel_2 false
+  521 jump *label246 greaterThanEq :start_reactor:fuel 10
   522 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label244 lessThanEq *tmp182 .FUEL_REQ
+  523 jump *label244 lessThanEq *tmp182 10
   524 print "WAIT fuel"
   525 print "\n"
   526 jump *label245 always
 
   530 label *label245
   531 jump *label251 always
   532 label *label246
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label247 greaterThanEq :start_reactor:fuel_stored *tmp185
+  533 op mul *tmp185 45 2
+  534 jump *label247 greaterThanEq :start_reactor:fuel_stored 90
   535 print "WAIT buffer fuel"
   536 print "\n"
   537 jump *label250 always
   538 label *label247
-    * jump *label248 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  539 jump *label248 greaterThanEq :start_reactor:cryo 7
   540 print "WAIT cryo"
   541 print "\n"
   542 jump *label249 always
   543 label *label248
   544 print "STARTUP"
   545 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  546 op add .START_POWER_REQ .START_POWER_REQ 23000
   547 control enabled :start_reactor:reactor true
   548 label *label249
   549 label *label250
 
   553 label *label254
   554 label *label255
   555 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  556 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
   557 set :start_reactor*retval :start_reactor:supply_fuel
   558 jump *label256 always
   559 label *label256
-    * set :fuel_2 :start_reactor*retval
+  560 set :fuel_2 :start_reactor:supply_fuel
   561 set :t_startup2 .RET_T_STARTUP
   562 label *label141
-    * select *tmp93 notEqual :start_reactor*retval false @blast-compound @scrap
+  563 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   564 control config .ULD_IN_2 *tmp93
-    * select *tmp97 equal :start_reactor*retval false @blast-compound @scrap
+  565 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   566 control config .ULD_OUT_2 *tmp97
   567 label *label142
   568 label *label179

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   368 control config .ULD_OUT_1 *tmp97
   369 label *label140
   370 set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   371 label *label220
   372 op sub *tmp108 @tick :t_startup2
   373 op idiv :start_reactor:secs *tmp108 60
 
   487 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   488 op sub *tmp162 *tmp161 5000
   489 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  490 op div :start_reactor:charge_units *tmp162 38333.333333333336
   491 op div *tmp165 :start_reactor:surplus 2000
   492 op max :start_reactor:flow_units -0.1 *tmp165
   493 op mul *tmp167 2 2
 
   550 label *label255
   551 sensor *tmp192 :start_reactor:reactor @enabled
   552 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   553 jump *label256 always
   554 label *label256
   555 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+146 instructions):
 
   593 set :start_reactor:emerg_shutdown :emerg_shutdown
   594 set :start_reactor:fuel_on :fuel_3
   595 set :start_reactor:t_startup :t_startup3
-    * setaddr :start_reactor*retaddr *label26 (h:*label26)
-    * call *label3 *invalid :start_reactor*retval (m:*label26) (h:*label26)
-    * label *label26
+  596 label *label257
+  597 op sub *tmp108 @tick :start_reactor:t_startup
+  598 op idiv :start_reactor:secs *tmp108 60
+  599 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  600 set :start_reactor:supply_fuel true
+  601 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  602 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  603 sensor *tmp113 .NODE @powerNetStored
+  604 op floor :start_reactor:charge *tmp113
+  605 sensor *tmp115 .NODE @powerNetIn
+  606 sensor *tmp116 .NODE @powerNetOut
+  607 op sub *tmp117 *tmp115 *tmp116
+  608 op floor :start_reactor:surplus *tmp117
+  609 op mul *tmp119 .AVG_SURPLUS 0.8
+  610 op mul *tmp120 :start_reactor:surplus 0.2
+  611 op add .AVG_SURPLUS *tmp119 *tmp120
+  612 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  613 print "#"
+  614 print :start_reactor:reactor_num
+  615 print " "
+  616 print "- "
+  617 jump *label258 equal :start_reactor:emerg_shutdown false
+  618 control enabled :start_reactor:reactor false
+  619 print "emergency mode"
+  620 print "\n"
+  621 set :start_reactor:supply_fuel false
+  622 jump *label292 always
+  623 label *label258
+  624 jump *label278 equal :start_reactor:enabled false
+  625 jump *label259 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  626 control enabled :start_reactor:reactor false
+  627 print "STOP unwanted"
+  628 print "\n"
+  629 jump *label277 always
+  630 label *label259
+  631 jump *label260 lessThanEq :start_reactor:reactor_num 1
+  632 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  633 jump *label260 greaterThanEq :start_reactor:fuel_stored *tmp132
+  634 control enabled :start_reactor:reactor false
+  635 print "STOP system fuel low"
+  636 print "\n"
+  637 jump *label276 always
+  638 label *label260
+  639 jump *label261 greaterThan :start_reactor:fuel 1
+  640 control enabled :start_reactor:reactor false
+  641 print "STOP fuel low"
+  642 print "\n"
+  643 jump *label275 always
+  644 label *label261
+  645 jump *label262 greaterThan :start_reactor:cryo .CRYO_ABORT
+  646 control enabled :start_reactor:reactor false
+  647 print "STOP out of cryo"
+  648 print "\n"
+  649 jump *label274 always
+  650 label *label262
+  651 jump *label270 greaterThanEq :start_reactor:secs 30
+  652 label *label263
+  653 op sub *tmp98 @tick :start_reactor:t_startup
+  654 op idiv :calc_charge_req:secs *tmp98 60
+  655 jump *label264 greaterThan :calc_charge_req:secs 30
+  656 sensor *tmp101 :start_reactor:reactor @enabled
+  657 jump *label265 notEqual *tmp101 false
+  658 label *label264
+  659 set :calc_charge_req*retval 0
+  660 jump *label267 always
+  661 label *label265
+  662 label *label266
+  663 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  664 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
+  665 op idiv :calc_charge_req:charge_req *tmp105 0.04
+  666 set :calc_charge_req*retval :calc_charge_req:charge_req
+  667 jump *label267 always
+  668 label *label267
+  669 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
+  670 jump *label268 greaterThanEq *tmp147 .PWR_ABORT
+  671 jump *label268 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  672 control enabled :start_reactor:reactor false
+  673 print "START FAIL battery"
+  674 print "\n"
+  675 set :start_reactor:supply_fuel false
+  676 jump *label269 always
+  677 label *label268
+  678 op sub :start_reactor:time_left 30 :start_reactor:secs
+  679 print "Starting "
+  680 print :start_reactor:time_left
+  681 print " "
+  682 print "secs, req "
+  683 print :calc_charge_req*retval
+  684 print "J"
+  685 print "\n"
+  686 label *label269
+  687 jump *label273 always
+  688 label *label270
+  689 jump *label271 greaterThanEq :start_reactor:charge .PWR_ABANDON
+  690 jump *label271 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  691 control enabled :start_reactor:reactor false
+  692 print "ABANDON - battery crit"
+  693 print "\n"
+  694 set :start_reactor:supply_fuel false
+  695 jump *label272 always
+  696 label *label271
+  697 op idiv :start_reactor:mins :start_reactor:secs 6
+  698 op div :start_reactor:mins :start_reactor:mins 10
+  699 print "RUN "
+  700 print :start_reactor:mins
+  701 print " "
+  702 print "mins"
+  703 print "\n"
+  704 label *label272
+  705 label *label273
+  706 label *label274
+  707 label *label275
+  708 label *label276
+  709 label *label277
+  710 jump *label291 always
+  711 label *label278
+  712 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
+  713 op sub *tmp162 *tmp161 .PWR_ABORT
+  714 op div *tmp163 *tmp162 .PWR_REQ
+  715 op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
+  716 op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  717 op max :start_reactor:flow_units -0.1 *tmp165
+  718 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
+  719 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
+  720 jump *label279 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  721 print "IDLE"
+  722 print "\n"
+  723 set :start_reactor:supply_fuel false
+  724 jump *label290 always
+  725 label *label279
+  726 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
+  727 jump *label280 greaterThanEq *tmp171 1
+  728 op idiv *tmp175 :start_reactor:flow_units 0.001
+  729 op div :start_reactor:flow *tmp175 10
+  730 op idiv *tmp178 :start_reactor:charge_units 0.001
+  731 op div :start_reactor:charge *tmp178 10
+  732 print "WAIT power. (%"
+  733 print :start_reactor:charge
+  734 print "J + %"
+  735 print :start_reactor:flow
+  736 print "W)"
+  737 print "\n"
+  738 set :start_reactor:supply_fuel false
+  739 jump *label289 always
+  740 label *label280
+  741 jump *label283 equal :start_reactor:fuel_on false
+  742 jump *label283 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  743 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
+  744 jump *label281 lessThanEq *tmp182 .FUEL_REQ
+  745 print "WAIT fuel"
+  746 print "\n"
+  747 jump *label282 always
+  748 label *label281
+  749 print "WAIT system fuel"
+  750 print "\n"
+  751 label *label282
+  752 jump *label288 always
+  753 label *label283
+  754 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
+  755 jump *label284 greaterThanEq :start_reactor:fuel_stored *tmp185
+  756 print "WAIT buffer fuel"
+  757 print "\n"
+  758 jump *label287 always
+  759 label *label284
+  760 jump *label285 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  761 print "WAIT cryo"
+  762 print "\n"
+  763 jump *label286 always
+  764 label *label285
+  765 print "STARTUP"
+  766 print "\n"
+  767 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  768 control enabled :start_reactor:reactor true
+  769 label *label286
+  770 label *label287
+  771 label *label288
+  772 label *label289
+  773 label *label290
+  774 label *label291
+  775 label *label292
+  776 sensor *tmp192 :start_reactor:reactor @enabled
+  777 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  778 set :start_reactor*retval :start_reactor:supply_fuel
+  779 jump *label293 always
+  780 label *label293
   781 set :fuel_3 :start_reactor*retval
   782 set :t_startup3 .RET_T_STARTUP
   783 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   594 set :start_reactor:fuel_on :fuel_3
   595 set :start_reactor:t_startup :t_startup3
   596 label *label257
-    * op sub *tmp108 @tick :start_reactor:t_startup
+  597 op sub *tmp108 @tick :t_startup3
   598 op idiv :start_reactor:secs *tmp108 60
   599 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   600 set :start_reactor:supply_fuel true
 
   611 op add .AVG_SURPLUS *tmp119 *tmp120
   612 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   613 print "#"
-    * print :start_reactor:reactor_num
+  614 print 3
   615 print " "
   616 print "- "
-    * jump *label258 equal :start_reactor:emerg_shutdown false
+  617 jump *label258 equal :emerg_shutdown false
   618 control enabled :start_reactor:reactor false
   619 print "emergency mode"
   620 print "\n"
 
   622 jump *label292 always
   623 label *label258
   624 jump *label278 equal :start_reactor:enabled false
-    * jump *label259 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  625 jump *label259 greaterThanEq .REACTORS_DESIRED 3
   626 control enabled :start_reactor:reactor false
   627 print "STOP unwanted"
   628 print "\n"
   629 jump *label277 always
   630 label *label259
-    * jump *label260 lessThanEq :start_reactor:reactor_num 1
-    * op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * jump *label260 greaterThanEq :start_reactor:fuel_stored *tmp132
+  631 jump *label260 lessThanEq 3 1
+  632 op mul *tmp132 15 3
+  633 jump *label260 greaterThanEq :start_reactor:fuel_stored 45
   634 control enabled :start_reactor:reactor false
   635 print "STOP system fuel low"
   636 print "\n"
 
   642 print "\n"
   643 jump *label275 always
   644 label *label261
-    * jump *label262 greaterThan :start_reactor:cryo .CRYO_ABORT
+  645 jump *label262 greaterThan :start_reactor:cryo 1
   646 control enabled :start_reactor:reactor false
   647 print "STOP out of cryo"
   648 print "\n"
 
   650 label *label262
   651 jump *label270 greaterThanEq :start_reactor:secs 30
   652 label *label263
-    * op sub *tmp98 @tick :start_reactor:t_startup
+  653 op sub *tmp98 @tick :t_startup3
   654 op idiv :calc_charge_req:secs *tmp98 60
   655 jump *label264 greaterThan :calc_charge_req:secs 30
   656 sensor *tmp101 :start_reactor:reactor @enabled
 
   667 jump *label267 always
   668 label *label267
   669 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
-    * jump *label268 greaterThanEq *tmp147 .PWR_ABORT
-    * jump *label268 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  670 jump *label268 greaterThanEq *tmp147 5000
+  671 jump *label268 greaterThanEq :start_reactor:surplus -500
   672 control enabled :start_reactor:reactor false
   673 print "START FAIL battery"
   674 print "\n"
 
   686 label *label269
   687 jump *label273 always
   688 label *label270
-    * jump *label271 greaterThanEq :start_reactor:charge .PWR_ABANDON
-    * jump *label271 greaterThanEq :start_reactor:surplus .FLOW_ABORT
+  689 jump *label271 greaterThanEq :start_reactor:charge 2000
+  690 jump *label271 greaterThanEq :start_reactor:surplus -500
   691 control enabled :start_reactor:reactor false
   692 print "ABANDON - battery crit"
   693 print "\n"
 
   710 jump *label291 always
   711 label *label278
   712 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp162 *tmp161 .PWR_ABORT
-    * op div *tmp163 *tmp162 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
-    * op div *tmp165 :start_reactor:surplus .FLOW_REQ
+  713 op sub *tmp162 *tmp161 5000
+  714 op div *tmp163 *tmp162 23000
+  715 op mul :start_reactor:charge_units *tmp163 0.6
+  716 op div *tmp165 :start_reactor:surplus 2000
   717 op max :start_reactor:flow_units -0.1 *tmp165
-    * op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp167
-    * jump *label279 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  718 op mul *tmp167 2 3
+  719 op add :start_reactor:cryo_req 3 6
+  720 jump *label279 greaterThanEq .REACTORS_DESIRED 3
   721 print "IDLE"
   722 print "\n"
   723 set :start_reactor:supply_fuel false
 
   738 set :start_reactor:supply_fuel false
   739 jump *label289 always
   740 label *label280
-    * jump *label283 equal :start_reactor:fuel_on false
-    * jump *label283 greaterThanEq :start_reactor:fuel .FUEL_REQ
+  741 jump *label283 equal :fuel_3 false
+  742 jump *label283 greaterThanEq :start_reactor:fuel 10
   743 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label281 lessThanEq *tmp182 .FUEL_REQ
+  744 jump *label281 lessThanEq *tmp182 10
   745 print "WAIT fuel"
   746 print "\n"
   747 jump *label282 always
 
   751 label *label282
   752 jump *label288 always
   753 label *label283
-    * op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label284 greaterThanEq :start_reactor:fuel_stored *tmp185
+  754 op mul *tmp185 45 3
+  755 jump *label284 greaterThanEq :start_reactor:fuel_stored 135
   756 print "WAIT buffer fuel"
   757 print "\n"
   758 jump *label287 always
   759 label *label284
-    * jump *label285 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  760 jump *label285 greaterThanEq :start_reactor:cryo 9
   761 print "WAIT cryo"
   762 print "\n"
   763 jump *label286 always
   764 label *label285
   765 print "STARTUP"
   766 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  767 op add .START_POWER_REQ .START_POWER_REQ 23000
   768 control enabled :start_reactor:reactor true
   769 label *label286
   770 label *label287
 
   774 label *label291
   775 label *label292
   776 sensor *tmp192 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
+  777 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
   778 set :start_reactor*retval :start_reactor:supply_fuel
   779 jump *label293 always
   780 label *label293
-    * set :fuel_3 :start_reactor*retval
+  781 set :fuel_3 :start_reactor:supply_fuel
   782 set :t_startup3 .RET_T_STARTUP
   783 set :start_reactor:reactor reactor4
   784 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-5 instructions):
 
   589 label *label182
   590 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   591 set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   592 label *label257
   593 op sub *tmp108 @tick :t_startup3
   594 op idiv :start_reactor:secs *tmp108 60
 
   708 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
   709 op sub *tmp162 *tmp161 5000
   710 op div *tmp163 *tmp162 23000
-    * op mul :start_reactor:charge_units *tmp163 0.6
+  711 op div :start_reactor:charge_units *tmp162 38333.333333333336
   712 op div *tmp165 :start_reactor:surplus 2000
   713 op max :start_reactor:flow_units -0.1 *tmp165
   714 op mul *tmp167 2 3
 
   771 label *label292
   772 sensor *tmp192 :start_reactor:reactor @enabled
   773 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   774 jump *label293 always
   775 label *label293
   776 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Jump Normalization, pass 2, iteration 1 (-2 instructions):
 
   210 print "\n"
   211 jump *label203 always
   212 label *label185
-    * jump *label186 lessThanEq 1 1
+  213 jump *label186 always
   214 op mul *tmp132 15 1
   215 jump *label186 greaterThanEq :start_reactor:fuel_stored 15
   216 control enabled :start_reactor:reactor false
 
   403 print "\n"
   404 jump *label240 always
   405 label *label222
-    * jump *label223 lessThanEq 2 1
   406 op mul *tmp132 15 2
   407 jump *label223 greaterThanEq :start_reactor:fuel_stored 30
   408 control enabled :start_reactor:reactor false
 
   623 print "\n"
   624 jump *label277 always
   625 label *label259
-    * jump *label260 lessThanEq 3 1
   626 op mul *tmp132 15 3
   627 jump *label260 greaterThanEq :start_reactor:fuel_stored 45
   628 control enabled :start_reactor:reactor false

Modifications by Iterated phase, Condition Optimization, pass 2, iteration 1 (-1 instructions):
 
   855 print "n"
   856 label *label49
   857 label *label42
-    * op lessThan *tmp29 :throttle_blast:fuel_stored :throttle_blast:limit
   858 jump *label40 always
   859 label *label40
-    * select *tmp46 notEqual *tmp29 false @pyratite @scrap
+  860 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   861 control config .ULD_MIXER *tmp46
   862 sensor *tmp48 .NODE @powerNetStored
   863 sensor *tmp49 .NODE @powerNetCapacity

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-22 instructions):
 
    57 control enabled reactor4 false
    58 control enabled reactor5 false
    59 set :check_radar*retval true
-    * jump *label178 always
    60 jump *label177 always
    61 label *label176
    62 control enabled projector1 false
    63 control enabled projector2 false
    64 set :check_radar*retval false
-    * jump *label178 always
    65 label *label177
    66 label *label178
    67 jump *label12 equal switch1 null
 
    74 label *label12
    75 label *label13
    76 set *tmp8 false
-    * jump *label11 always
    77 label *label11
    78 op or :emerg_shutdown :check_radar*retval *tmp8
    79 set :calc_charge_req:reactor reactor1
 
    92 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
    93 op idiv :calc_charge_req:charge_req *tmp105 0.04
    94 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label149 always
    95 label *label149
    96 set .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor2
 
   110 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   111 op idiv :calc_charge_req:charge_req *tmp105 0.04
   112 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label154 always
   113 label *label154
   114 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   115 set :calc_charge_req:reactor reactor3
 
   128 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   129 op idiv :calc_charge_req:charge_req *tmp105 0.04
   130 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label159 always
   131 label *label159
   132 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   133 set :calc_charge_req:reactor reactor4
 
   146 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   147 op idiv :calc_charge_req:charge_req *tmp105 0.04
   148 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label164 always
   149 label *label164
   150 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   151 set :calc_charge_req:reactor reactor5
 
   164 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   165 op idiv :calc_charge_req:charge_req *tmp105 0.04
   166 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label169 always
   167 label *label169
   168 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   169 set :start_reactor:reactor reactor1
 
   238 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   239 op idiv :calc_charge_req:charge_req *tmp105 0.04
   240 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label193 always
   241 label *label193
   242 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   243 jump *label194 greaterThanEq *tmp147 5000
 
   348 label *label218
   349 sensor *tmp192 :start_reactor:reactor @enabled
   350 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * jump *label219 always
   351 label *label219
   352 set :fuel_1 :start_reactor:supply_fuel
   353 set :t_startup1 .RET_T_STARTUP
 
   428 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   429 op idiv :calc_charge_req:charge_req *tmp105 0.04
   430 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label230 always
   431 label *label230
   432 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   433 jump *label231 greaterThanEq *tmp147 5000
 
   538 label *label255
   539 sensor *tmp192 :start_reactor:reactor @enabled
   540 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * jump *label256 always
   541 label *label256
   542 set :fuel_2 :start_reactor:supply_fuel
   543 set :t_startup2 .RET_T_STARTUP
 
   565 control enabled reactor4 false
   566 control enabled reactor5 false
   567 set :check_radar*retval true
-    * jump *label182 always
   568 jump *label181 always
   569 label *label180
   570 control enabled projector1 false
   571 control enabled projector2 false
   572 set :check_radar*retval false
-    * jump *label182 always
   573 label *label181
   574 label *label182
   575 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   644 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   645 op idiv :calc_charge_req:charge_req *tmp105 0.04
   646 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label267 always
   647 label *label267
   648 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
   649 jump *label268 greaterThanEq *tmp147 5000
 
   754 label *label292
   755 sensor *tmp192 :start_reactor:reactor @enabled
   756 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * jump *label293 always
   757 label *label293
   758 set :fuel_3 :start_reactor:supply_fuel
   759 set :t_startup3 .RET_T_STARTUP
 
   839 print "n"
   840 label *label49
   841 label *label42
-    * jump *label40 always
   842 label *label40
   843 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   844 control config .ULD_MIXER *tmp46
 
   860 label *label133
   861 op idiv *tmp89 .AVG_SURPLUS 100
   862 op div :kilo*retval *tmp89 10
-    * jump *label134 always
   863 label *label134
   864 set :surplus :kilo*retval
   865 sensor :kilo:val .NODE @powerNetStored
   866 label *label135
   867 op idiv *tmp89 :kilo:val 100
   868 op div :kilo*retval *tmp89 10
-    * jump *label136 always
   869 label *label136
   870 set :charge :kilo*retval
   871 jump *label59 lessThanEq .START_POWER_REQ 0
   872 label *label137
   873 op idiv *tmp89 .START_POWER_REQ 100
   874 op div :kilo*retval *tmp89 10
-    * jump *label138 always
   875 label *label138
   876 print "Req "
   877 print :kilo*retval
 
   995 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   996 op idiv :calc_charge_req:charge_req *tmp105 0.04
   997 set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label174 always
   998 label *label174
   999 op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
  1000 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
 
  1106 sensor *tmp192 :start_reactor:reactor @enabled
  1107 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
  1108 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label86 always
  1109 label *label86
  1110 return :start_reactor*retaddr
  1111 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-2 instructions):
 
   859 label *label52
   860 label *label133
   861 op idiv *tmp89 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp89 10
+  862 op div :surplus *tmp89 10
   863 label *label134
-    * set :surplus :kilo*retval
   864 sensor :kilo:val .NODE @powerNetStored
   865 label *label135
   866 op idiv *tmp89 :kilo:val 100
 
   927 op sub *tmp108 @tick :start_reactor:t_startup
   928 op idiv :start_reactor:secs *tmp108 60
   929 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  930 set :start_reactor*retval true
   931 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   932 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   933 sensor *tmp113 .NODE @powerNetStored
 
   948 control enabled :start_reactor:reactor false
   949 print "emergency mode"
   950 print "\n"
-    * set :start_reactor:supply_fuel false
+  951 set :start_reactor*retval false
   952 jump *label88 always
   953 label *label87
   954 jump *label89 equal :start_reactor:enabled false
 
  1001 control enabled :start_reactor:reactor false
  1002 print "START FAIL battery"
  1003 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1004 set :start_reactor*retval false
  1005 jump *label105 always
  1006 label *label104
  1007 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1020 control enabled :start_reactor:reactor false
  1021 print "ABANDON - battery crit"
  1022 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1023 set :start_reactor*retval false
  1024 jump *label109 always
  1025 label *label108
  1026 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1049 jump *label112 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1050 print "IDLE"
  1051 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1052 set :start_reactor*retval false
  1053 jump *label113 always
  1054 label *label112
  1055 op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
 
  1064 print :start_reactor:flow
  1065 print "W)"
  1066 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1067 set :start_reactor*retval false
  1068 jump *label115 always
  1069 label *label114
  1070 jump *label116 equal :start_reactor:fuel_on false
 
  1104 label *label88
  1105 sensor *tmp192 :start_reactor:reactor @enabled
  1106 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1107 label *label86
  1108 return :start_reactor*retaddr
  1109 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   777 label *label28
   778 set :fuel_5 :start_reactor*retval
   779 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp232 :fuel_3 :fuel_4
+  780 op or *tmp232 :start_reactor:supply_fuel :fuel_4
   781 op or *tmp26 *tmp232 :start_reactor*retval
   782 label *label143
   783 select *tmp93 notEqual *tmp26 false @blast-compound @scrap

Modifications by Iterated phase, Boolean Optimization, pass 2, iteration 1 (-1 instructions):
 
   204 label *label185
   205 jump *label186 always
   206 op mul *tmp132 15 1
-    * jump *label186 greaterThanEq :start_reactor:fuel_stored 15
   207 control enabled :start_reactor:reactor false
   208 print "STOP system fuel low"
   209 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-7 instructions):
 
    39 set .TOWER cyclone1
    40 set .CONTAINER vault1
    41 set .NODE node1
-    * label *label175
    42 radar enemy any any health .TOWER 1 :check_radar:enemy_found
    43 jump *label176 equal :check_radar:enemy_found null
    44 control enabled projector1 true
 
    62 control enabled projector2 false
    63 set :check_radar*retval false
    64 label *label177
-    * label *label178
    65 jump *label12 equal switch1 null
    66 sensor *tmp10 switch1 @enabled
    67 jump *label12 notEqual *tmp10 false
 
    70 set *tmp8 true
    71 jump *label11 always
    72 label *label12
-    * label *label13
    73 set *tmp8 false
    74 label *label11
    75 op or :emerg_shutdown :check_radar*retval *tmp8
    76 set :calc_charge_req:reactor reactor1
-    * label *label145
    77 op sub *tmp98 @tick :t_startup1
    78 op idiv :calc_charge_req:secs *tmp98 60
    79 jump *label146 greaterThan :calc_charge_req:secs 30
 
    83 set :calc_charge_req*retval 0
    84 jump *label149 always
    85 label *label147
-    * label *label148
    86 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    87 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
    88 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
    90 label *label149
    91 set .START_POWER_REQ :calc_charge_req*retval
    92 set :calc_charge_req:reactor reactor2
-    * label *label150
    93 op sub *tmp98 @tick :t_startup2
    94 op idiv :calc_charge_req:secs *tmp98 60
    95 jump *label151 greaterThan :calc_charge_req:secs 30
 
    99 set :calc_charge_req*retval 0
   100 jump *label154 always
   101 label *label152
-    * label *label153
   102 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   103 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   104 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   106 label *label154
   107 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   108 set :calc_charge_req:reactor reactor3
-    * label *label155
   109 op sub *tmp98 @tick :t_startup3
   110 op idiv :calc_charge_req:secs *tmp98 60
   111 jump *label156 greaterThan :calc_charge_req:secs 30
 
   115 set :calc_charge_req*retval 0
   116 jump *label159 always
   117 label *label157
-    * label *label158
   118 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   119 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   120 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   122 label *label159
   123 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   124 set :calc_charge_req:reactor reactor4
-    * label *label160
   125 op sub *tmp98 @tick :t_startup4
   126 op idiv :calc_charge_req:secs *tmp98 60
   127 jump *label161 greaterThan :calc_charge_req:secs 30
 
   131 set :calc_charge_req*retval 0
   132 jump *label164 always
   133 label *label162
-    * label *label163
   134 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   135 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   136 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   138 label *label164
   139 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   140 set :calc_charge_req:reactor reactor5
-    * label *label165
   141 op sub *tmp98 @tick :t_startup5
   142 op idiv :calc_charge_req:secs *tmp98 60
   143 jump *label166 greaterThan :calc_charge_req:secs 30
 
   147 set :calc_charge_req*retval 0
   148 jump *label169 always
   149 label *label167
-    * label *label168
   150 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   151 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   152 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   154 label *label169
   155 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   156 set :start_reactor:reactor reactor1
-    * label *label183
   157 op sub *tmp108 @tick :t_startup1
   158 op idiv :start_reactor:secs *tmp108 60
   159 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   189 jump *label203 always
   190 label *label185
   191 jump *label186 always
-    * op mul *tmp132 15 1
-    * control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label202 always
   192 label *label186
   193 jump *label187 greaterThan :start_reactor:fuel 1
   194 control enabled :start_reactor:reactor false
 
   203 jump *label200 always
   204 label *label188
   205 jump *label196 greaterThanEq :start_reactor:secs 30
-    * label *label189
   206 op sub *tmp98 @tick :t_startup1
   207 op idiv :calc_charge_req:secs *tmp98 60
   208 jump *label190 greaterThan :calc_charge_req:secs 30
 
   212 set :calc_charge_req*retval 0
   213 jump *label193 always
   214 label *label191
-    * label *label192
   215 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   216 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   217 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   326 label *label218
   327 sensor *tmp192 :start_reactor:reactor @enabled
   328 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
-    * label *label219
   329 set :fuel_1 :start_reactor:supply_fuel
   330 set :t_startup1 .RET_T_STARTUP
-    * label *label139
   331 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   332 control config .ULD_IN_1 *tmp93
   333 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   334 control config .ULD_OUT_1 *tmp97
-    * label *label140
   335 set :start_reactor:reactor reactor2
-    * label *label220
   336 op sub *tmp108 @tick :t_startup2
   337 op idiv :start_reactor:secs *tmp108 60
   338 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   387 jump *label237 always
   388 label *label225
   389 jump *label233 greaterThanEq :start_reactor:secs 30
-    * label *label226
   390 op sub *tmp98 @tick :t_startup2
   391 op idiv :calc_charge_req:secs *tmp98 60
   392 jump *label227 greaterThan :calc_charge_req:secs 30
 
   396 set :calc_charge_req*retval 0
   397 jump *label230 always
   398 label *label228
-    * label *label229
   399 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   400 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   401 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   510 label *label255
   511 sensor *tmp192 :start_reactor:reactor @enabled
   512 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
-    * label *label256
   513 set :fuel_2 :start_reactor:supply_fuel
   514 set :t_startup2 .RET_T_STARTUP
-    * label *label141
   515 select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   516 control config .ULD_IN_2 *tmp93
   517 select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
   518 control config .ULD_OUT_2 *tmp97
-    * label *label142
-    * label *label179
   519 radar enemy any any health .TOWER 1 :check_radar:enemy_found
   520 jump *label180 equal :check_radar:enemy_found null
   521 control enabled projector1 true
 
   539 control enabled projector2 false
   540 set :check_radar*retval false
   541 label *label181
-    * label *label182
   542 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   543 set :start_reactor:reactor reactor3
-    * label *label257
   544 op sub *tmp108 @tick :t_startup3
   545 op idiv :start_reactor:secs *tmp108 60
   546 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   595 jump *label274 always
   596 label *label262
   597 jump *label270 greaterThanEq :start_reactor:secs 30
-    * label *label263
   598 op sub *tmp98 @tick :t_startup3
   599 op idiv :calc_charge_req:secs *tmp98 60
   600 jump *label264 greaterThan :calc_charge_req:secs 30
 
   604 set :calc_charge_req*retval 0
   605 jump *label267 always
   606 label *label265
-    * label *label266
   607 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   608 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   609 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
   718 label *label292
   719 sensor *tmp192 :start_reactor:reactor @enabled
   720 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
-    * label *label293
   721 set :fuel_3 :start_reactor:supply_fuel
   722 set :t_startup3 .RET_T_STARTUP
   723 set :start_reactor:reactor reactor4
 
   742 set :t_startup5 .RET_T_STARTUP
   743 op or *tmp232 :start_reactor:supply_fuel :fuel_4
   744 op or *tmp26 *tmp232 :start_reactor*retval
-    * label *label143
   745 select *tmp93 notEqual *tmp26 false @blast-compound @scrap
   746 control config .ULD_IN_MANY *tmp93
   747 select *tmp97 equal *tmp26 false @blast-compound @scrap
   748 control config .ULD_OUT_MANY *tmp97
-    * label *label144
   749 op or *tmp233 :fuel_1 :fuel_2
   750 op or *tmp28 *tmp233 *tmp26
   751 sensor *tmp30 .NODE @powerNetStored
 
   800 print "n"
   801 label *label49
   802 label *label42
-    * label *label40
   803 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
   804 control config .ULD_MIXER *tmp46
   805 sensor *tmp48 .NODE @powerNetStored
 
   816 control enabled generator1 true
   817 control enabled generator2 true
   818 label *label54
-    * label *label52
-    * label *label133
   819 op idiv *tmp89 .AVG_SURPLUS 100
   820 op div :surplus *tmp89 10
-    * label *label134
   821 sensor :kilo:val .NODE @powerNetStored
-    * label *label135
   822 op idiv *tmp89 :kilo:val 100
   823 op div :kilo*retval *tmp89 10
-    * label *label136
   824 set :charge :kilo*retval
   825 jump *label59 lessThanEq .START_POWER_REQ 0
-    * label *label137
   826 op idiv *tmp89 .START_POWER_REQ 100
   827 op div :kilo*retval *tmp89 10
-    * label *label138
   828 print "Req "
   829 print :kilo*retval
   830 print "kJ / "
 
   850 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   851 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   852 label *label67
-    * label *label68
   853 label *label63
-    * label *label64
   854 jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
   855 jump *label69 greaterThanEq .AVG_SURPLUS 8000
   856 op sub *tmp82 .AVG_SURPLUS 10000
 
   859 op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
   860 op min .REACTORS_DESIRED 5 *tmp85
   861 label *label69
-    * label *label70
-    * label *label62
   862 label *label60
   863 jump *label73 equal .REACTORS_DESIRED 5
   864 print "Require only "
 
   866 print "/5 reactors."
   867 print "\n"
   868 label *label73
-    * label *label74
   869 printflush message1
-    * label *label8
   870 jump *label7 always
-    * label *label9
-    * end
   871 label *label3
   872 op sub *tmp108 @tick :start_reactor:t_startup
   873 op idiv :start_reactor:secs *tmp108 60
 
   924 jump *label100 always
   925 label *label99
   926 jump *label101 greaterThanEq :start_reactor:secs 30
-    * label *label170
   927 op sub *tmp98 @tick :start_reactor:t_startup
   928 op idiv :calc_charge_req:secs *tmp98 60
   929 jump *label171 greaterThan :calc_charge_req:secs 30
 
   933 set :calc_charge_req*retval 0
   934 jump *label174 always
   935 label *label172
-    * label *label173
   936 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   937 op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
   938 op idiv :calc_charge_req:charge_req *tmp105 0.04
 
  1047 label *label88
  1048 sensor *tmp192 :start_reactor:reactor @enabled
  1049 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
-    * label *label86
  1050 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Jump Threading, pass 4, iteration 1:
 
   182 jump *label218 always
   183 label *label184
   184 jump *label204 equal :start_reactor:enabled false
-    * jump *label185 greaterThanEq .REACTORS_DESIRED 1
+  185 jump *label186 greaterThanEq .REACTORS_DESIRED 1
   186 control enabled :start_reactor:reactor false
   187 print "STOP unwanted"
   188 print "\n"
-    * jump *label203 always
+  189 jump *label217 always
   190 label *label185
   191 jump *label186 always
   192 label *label186
 
   194 control enabled :start_reactor:reactor false
   195 print "STOP fuel low"
   196 print "\n"
-    * jump *label201 always
+  197 jump *label217 always
   198 label *label187
   199 jump *label188 greaterThan :start_reactor:cryo 1
   200 control enabled :start_reactor:reactor false
   201 print "STOP out of cryo"
   202 print "\n"
-    * jump *label200 always
+  203 jump *label217 always
   204 label *label188
   205 jump *label196 greaterThanEq :start_reactor:secs 30
   206 op sub *tmp98 @tick :t_startup1
 
   224 print "START FAIL battery"
   225 print "\n"
   226 set :start_reactor:supply_fuel false
-    * jump *label195 always
+  227 jump *label217 always
   228 label *label194
   229 op sub :start_reactor:time_left 30 :start_reactor:secs
   230 print "Starting "
 
   235 print "J"
   236 print "\n"
   237 label *label195
-    * jump *label199 always
+  238 jump *label217 always
   239 label *label196
   240 jump *label197 greaterThanEq :start_reactor:charge 2000
   241 jump *label197 greaterThanEq :start_reactor:surplus -500
 
   243 print "ABANDON - battery crit"
   244 print "\n"
   245 set :start_reactor:supply_fuel false
-    * jump *label198 always
+  246 jump *label217 always
   247 label *label197
   248 op idiv :start_reactor:mins :start_reactor:secs 6
   249 op div :start_reactor:mins :start_reactor:mins 10
 
   294 jump *label207 lessThanEq *tmp182 10
   295 print "WAIT fuel"
   296 print "\n"
-    * jump *label208 always
+  297 jump *label214 always
   298 label *label207
   299 print "WAIT system fuel"
   300 print "\n"
 
   364 control enabled :start_reactor:reactor false
   365 print "STOP unwanted"
   366 print "\n"
-    * jump *label240 always
+  367 jump *label254 always
   368 label *label222
   369 op mul *tmp132 15 2
   370 jump *label223 greaterThanEq :start_reactor:fuel_stored 30
   371 control enabled :start_reactor:reactor false
   372 print "STOP system fuel low"
   373 print "\n"
-    * jump *label239 always
+  374 jump *label254 always
   375 label *label223
   376 jump *label224 greaterThan :start_reactor:fuel 1
   377 control enabled :start_reactor:reactor false
   378 print "STOP fuel low"
   379 print "\n"
-    * jump *label238 always
+  380 jump *label254 always
   381 label *label224
   382 jump *label225 greaterThan :start_reactor:cryo 1
   383 control enabled :start_reactor:reactor false
   384 print "STOP out of cryo"
   385 print "\n"
-    * jump *label237 always
+  386 jump *label254 always
   387 label *label225
   388 jump *label233 greaterThanEq :start_reactor:secs 30
   389 op sub *tmp98 @tick :t_startup2
 
   407 print "START FAIL battery"
   408 print "\n"
   409 set :start_reactor:supply_fuel false
-    * jump *label232 always
+  410 jump *label254 always
   411 label *label231
   412 op sub :start_reactor:time_left 30 :start_reactor:secs
   413 print "Starting "
 
   418 print "J"
   419 print "\n"
   420 label *label232
-    * jump *label236 always
+  421 jump *label254 always
   422 label *label233
   423 jump *label234 greaterThanEq :start_reactor:charge 2000
   424 jump *label234 greaterThanEq :start_reactor:surplus -500
 
   426 print "ABANDON - battery crit"
   427 print "\n"
   428 set :start_reactor:supply_fuel false
-    * jump *label235 always
+  429 jump *label254 always
   430 label *label234
   431 op idiv :start_reactor:mins :start_reactor:secs 6
   432 op div :start_reactor:mins :start_reactor:mins 10
 
   478 jump *label244 lessThanEq *tmp182 10
   479 print "WAIT fuel"
   480 print "\n"
-    * jump *label245 always
+  481 jump *label251 always
   482 label *label244
   483 print "WAIT system fuel"
   484 print "\n"
 
   572 control enabled :start_reactor:reactor false
   573 print "STOP unwanted"
   574 print "\n"
-    * jump *label277 always
+  575 jump *label291 always
   576 label *label259
   577 op mul *tmp132 15 3
   578 jump *label260 greaterThanEq :start_reactor:fuel_stored 45
   579 control enabled :start_reactor:reactor false
   580 print "STOP system fuel low"
   581 print "\n"
-    * jump *label276 always
+  582 jump *label291 always
   583 label *label260
   584 jump *label261 greaterThan :start_reactor:fuel 1
   585 control enabled :start_reactor:reactor false
   586 print "STOP fuel low"
   587 print "\n"
-    * jump *label275 always
+  588 jump *label291 always
   589 label *label261
   590 jump *label262 greaterThan :start_reactor:cryo 1
   591 control enabled :start_reactor:reactor false
   592 print "STOP out of cryo"
   593 print "\n"
-    * jump *label274 always
+  594 jump *label291 always
   595 label *label262
   596 jump *label270 greaterThanEq :start_reactor:secs 30
   597 op sub *tmp98 @tick :t_startup3
 
   615 print "START FAIL battery"
   616 print "\n"
   617 set :start_reactor:supply_fuel false
-    * jump *label269 always
+  618 jump *label291 always
   619 label *label268
   620 op sub :start_reactor:time_left 30 :start_reactor:secs
   621 print "Starting "
 
   626 print "J"
   627 print "\n"
   628 label *label269
-    * jump *label273 always
+  629 jump *label291 always
   630 label *label270
   631 jump *label271 greaterThanEq :start_reactor:charge 2000
   632 jump *label271 greaterThanEq :start_reactor:surplus -500
 
   634 print "ABANDON - battery crit"
   635 print "\n"
   636 set :start_reactor:supply_fuel false
-    * jump *label272 always
+  637 jump *label291 always
   638 label *label271
   639 op idiv :start_reactor:mins :start_reactor:secs 6
   640 op div :start_reactor:mins :start_reactor:mins 10
 
   686 jump *label281 lessThanEq *tmp182 10
   687 print "WAIT fuel"
   688 print "\n"
-    * jump *label282 always
+  689 jump *label288 always
   690 label *label281
   691 print "WAIT system fuel"
   692 print "\n"
 
   770 jump *label46 equal :emerg_shutdown false
   771 print " Enemies detected."
   772 print "\n"
-    * jump *label47 always
+  773 jump *label42 always
   774 label *label46
   775 print " Critical power."
   776 print "\n"
 
   900 control enabled :start_reactor:reactor false
   901 print "STOP unwanted"
   902 print "\n"
-    * jump *label92 always
+  903 jump *label90 always
   904 label *label91
   905 jump *label93 lessThanEq :start_reactor:reactor_num 1
   906 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   908 control enabled :start_reactor:reactor false
   909 print "STOP system fuel low"
   910 print "\n"
-    * jump *label94 always
+  911 jump *label90 always
   912 label *label93
   913 jump *label97 greaterThan :start_reactor:fuel 1
   914 control enabled :start_reactor:reactor false
   915 print "STOP fuel low"
   916 print "\n"
-    * jump *label98 always
+  917 jump *label90 always
   918 label *label97
   919 jump *label99 greaterThan :start_reactor:cryo .CRYO_ABORT
   920 control enabled :start_reactor:reactor false
   921 print "STOP out of cryo"
   922 print "\n"
-    * jump *label100 always
+  923 jump *label90 always
   924 label *label99
   925 jump *label101 greaterThanEq :start_reactor:secs 30
   926 op sub *tmp98 @tick :start_reactor:t_startup
 
   944 print "START FAIL battery"
   945 print "\n"
   946 set :start_reactor*retval false
-    * jump *label105 always
+  947 jump *label90 always
   948 label *label104
   949 op sub :start_reactor:time_left 30 :start_reactor:secs
   950 print "Starting "
 
   955 print "J"
   956 print "\n"
   957 label *label105
-    * jump *label102 always
+  958 jump *label90 always
   959 label *label101
   960 jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
   961 jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
 
   963 print "ABANDON - battery crit"
   964 print "\n"
   965 set :start_reactor*retval false
-    * jump *label109 always
+  966 jump *label90 always
   967 label *label108
   968 op idiv :start_reactor:mins :start_reactor:secs 6
   969 op div :start_reactor:mins :start_reactor:mins 10
 
  1015 jump *label120 lessThanEq *tmp182 .FUEL_REQ
  1016 print "WAIT fuel"
  1017 print "\n"
-    * jump *label121 always
+ 1018 jump *label117 always
  1019 label *label120
  1020 print "WAIT system fuel"
  1021 print "\n"

Modifications by Jumps phase, Single Step Elimination, pass 4, iteration 1 (-1 instructions):
 
   187 print "STOP unwanted"
   188 print "\n"
   189 jump *label217 always
-    * jump *label186 always
   190 label *label186
   191 jump *label187 greaterThan :start_reactor:fuel 1
   192 control enabled :start_reactor:reactor false

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    65 jump *label12 equal switch1 null
    66 sensor *tmp10 switch1 @enabled
    67 jump *label12 notEqual *tmp10 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   68 print "User has disabled emergency switch\n"
    69 set *tmp8 true
    70 jump *label11 always
    71 label *label12
 
   169 op mul *tmp120 :start_reactor:surplus 0.2
   170 op add .AVG_SURPLUS *tmp119 *tmp120
   171 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  172 print "#1 - "
   173 jump *label184 equal :emerg_shutdown false
   174 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  175 print "emergency mode\n"
   176 set :start_reactor:supply_fuel false
   177 jump *label218 always
   178 label *label184
   179 jump *label204 equal :start_reactor:enabled false
   180 jump *label186 greaterThanEq .REACTORS_DESIRED 1
   181 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  182 print "STOP unwanted\n"
   183 jump *label217 always
   184 label *label186
   185 jump *label187 greaterThan :start_reactor:fuel 1
   186 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  187 print "STOP fuel low\n"
   188 jump *label217 always
   189 label *label187
   190 jump *label188 greaterThan :start_reactor:cryo 1
   191 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  192 print "STOP out of cryo\n"
   193 jump *label217 always
   194 label *label188
   195 jump *label196 greaterThanEq :start_reactor:secs 30
 
   211 jump *label194 greaterThanEq *tmp147 5000
   212 jump *label194 greaterThanEq :start_reactor:surplus -500
   213 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  214 print "START FAIL battery\n"
   215 set :start_reactor:supply_fuel false
   216 jump *label217 always
   217 label *label194
   218 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  219 print "Starting {0} secs, req {0}J\n"
+  220 format :start_reactor:time_left
+  221 format :calc_charge_req*retval
   222 jump *label217 always
   223 label *label196
   224 jump *label197 greaterThanEq :start_reactor:charge 2000
   225 jump *label197 greaterThanEq :start_reactor:surplus -500
   226 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  227 print "ABANDON - battery crit\n"
   228 set :start_reactor:supply_fuel false
   229 jump *label217 always
   230 label *label197
   231 op idiv :start_reactor:mins :start_reactor:secs 6
   232 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  233 print "RUN {0} mins\n"
+  234 format :start_reactor:mins
   235 jump *label217 always
   236 label *label204
   237 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   243 op mul *tmp167 2 1
   244 op add :start_reactor:cryo_req 3 2
   245 jump *label205 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  246 print "IDLE\n"
   247 set :start_reactor:supply_fuel false
   248 jump *label216 always
   249 label *label205
 
   253 op div :start_reactor:flow *tmp175 10
   254 op idiv *tmp178 :start_reactor:charge_units 0.001
   255 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  256 print "WAIT power. (%{0}J + %{0}W)\n"
+  257 format :start_reactor:charge
+  258 format :start_reactor:flow
   259 set :start_reactor:supply_fuel false
   260 jump *label215 always
   261 label *label206
 
   263 jump *label209 greaterThanEq :start_reactor:fuel 10
   264 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   265 jump *label207 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  266 print "WAIT fuel\n"
   267 jump *label214 always
   268 label *label207
-    * print "WAIT system fuel"
-    * print "\n"
+  269 print "WAIT system fuel\n"
   270 jump *label214 always
   271 label *label209
   272 op mul *tmp185 45 1
   273 jump *label210 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  274 print "WAIT buffer fuel\n"
   275 jump *label213 always
   276 label *label210
   277 jump *label211 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  278 print "WAIT cryo\n"
   279 jump *label212 always
   280 label *label211
-    * print "STARTUP"
-    * print "\n"
+  281 print "STARTUP\n"
   282 op add .START_POWER_REQ .START_POWER_REQ 23000
   283 control enabled :start_reactor:reactor true
   284 label *label212
 
   313 op mul *tmp120 :start_reactor:surplus 0.2
   314 op add .AVG_SURPLUS *tmp119 *tmp120
   315 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  316 print "#2 - "
   317 jump *label221 equal :emerg_shutdown false
   318 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  319 print "emergency mode\n"
   320 set :start_reactor:supply_fuel false
   321 jump *label255 always
   322 label *label221
   323 jump *label241 equal :start_reactor:enabled false
   324 jump *label222 greaterThanEq .REACTORS_DESIRED 2
   325 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  326 print "STOP unwanted\n"
   327 jump *label254 always
   328 label *label222
   329 op mul *tmp132 15 2
   330 jump *label223 greaterThanEq :start_reactor:fuel_stored 30
   331 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  332 print "STOP system fuel low\n"
   333 jump *label254 always
   334 label *label223
   335 jump *label224 greaterThan :start_reactor:fuel 1
   336 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  337 print "STOP fuel low\n"
   338 jump *label254 always
   339 label *label224
   340 jump *label225 greaterThan :start_reactor:cryo 1
   341 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  342 print "STOP out of cryo\n"
   343 jump *label254 always
   344 label *label225
   345 jump *label233 greaterThanEq :start_reactor:secs 30
 
   361 jump *label231 greaterThanEq *tmp147 5000
   362 jump *label231 greaterThanEq :start_reactor:surplus -500
   363 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  364 print "START FAIL battery\n"
   365 set :start_reactor:supply_fuel false
   366 jump *label254 always
   367 label *label231
   368 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  369 print "Starting {0} secs, req {0}J\n"
+  370 format :start_reactor:time_left
+  371 format :calc_charge_req*retval
   372 jump *label254 always
   373 label *label233
   374 jump *label234 greaterThanEq :start_reactor:charge 2000
   375 jump *label234 greaterThanEq :start_reactor:surplus -500
   376 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  377 print "ABANDON - battery crit\n"
   378 set :start_reactor:supply_fuel false
   379 jump *label254 always
   380 label *label234
   381 op idiv :start_reactor:mins :start_reactor:secs 6
   382 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  383 print "RUN {0} mins\n"
+  384 format :start_reactor:mins
   385 jump *label254 always
   386 label *label241
   387 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   393 op mul *tmp167 2 2
   394 op add :start_reactor:cryo_req 3 4
   395 jump *label242 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  396 print "IDLE\n"
   397 set :start_reactor:supply_fuel false
   398 jump *label253 always
   399 label *label242
 
   403 op div :start_reactor:flow *tmp175 10
   404 op idiv *tmp178 :start_reactor:charge_units 0.001
   405 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  406 print "WAIT power. (%{0}J + %{0}W)\n"
+  407 format :start_reactor:charge
+  408 format :start_reactor:flow
   409 set :start_reactor:supply_fuel false
   410 jump *label252 always
   411 label *label243
 
   413 jump *label246 greaterThanEq :start_reactor:fuel 10
   414 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   415 jump *label244 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  416 print "WAIT fuel\n"
   417 jump *label251 always
   418 label *label244
-    * print "WAIT system fuel"
-    * print "\n"
+  419 print "WAIT system fuel\n"
   420 jump *label251 always
   421 label *label246
   422 op mul *tmp185 45 2
   423 jump *label247 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  424 print "WAIT buffer fuel\n"
   425 jump *label250 always
   426 label *label247
   427 jump *label248 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  428 print "WAIT cryo\n"
   429 jump *label249 always
   430 label *label248
-    * print "STARTUP"
-    * print "\n"
+  431 print "STARTUP\n"
   432 op add .START_POWER_REQ .START_POWER_REQ 23000
   433 control enabled :start_reactor:reactor true
   434 label *label249
 
   487 op mul *tmp120 :start_reactor:surplus 0.2
   488 op add .AVG_SURPLUS *tmp119 *tmp120
   489 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  490 print "#3 - "
   491 jump *label258 equal :emerg_shutdown false
   492 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  493 print "emergency mode\n"
   494 set :start_reactor:supply_fuel false
   495 jump *label292 always
   496 label *label258
   497 jump *label278 equal :start_reactor:enabled false
   498 jump *label259 greaterThanEq .REACTORS_DESIRED 3
   499 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  500 print "STOP unwanted\n"
   501 jump *label291 always
   502 label *label259
   503 op mul *tmp132 15 3
   504 jump *label260 greaterThanEq :start_reactor:fuel_stored 45
   505 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  506 print "STOP system fuel low\n"
   507 jump *label291 always
   508 label *label260
   509 jump *label261 greaterThan :start_reactor:fuel 1
   510 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  511 print "STOP fuel low\n"
   512 jump *label291 always
   513 label *label261
   514 jump *label262 greaterThan :start_reactor:cryo 1
   515 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  516 print "STOP out of cryo\n"
   517 jump *label291 always
   518 label *label262
   519 jump *label270 greaterThanEq :start_reactor:secs 30
 
   535 jump *label268 greaterThanEq *tmp147 5000
   536 jump *label268 greaterThanEq :start_reactor:surplus -500
   537 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  538 print "START FAIL battery\n"
   539 set :start_reactor:supply_fuel false
   540 jump *label291 always
   541 label *label268
   542 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  543 print "Starting {0} secs, req {0}J\n"
+  544 format :start_reactor:time_left
+  545 format :calc_charge_req*retval
   546 jump *label291 always
   547 label *label270
   548 jump *label271 greaterThanEq :start_reactor:charge 2000
   549 jump *label271 greaterThanEq :start_reactor:surplus -500
   550 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  551 print "ABANDON - battery crit\n"
   552 set :start_reactor:supply_fuel false
   553 jump *label291 always
   554 label *label271
   555 op idiv :start_reactor:mins :start_reactor:secs 6
   556 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  557 print "RUN {0} mins\n"
+  558 format :start_reactor:mins
   559 jump *label291 always
   560 label *label278
   561 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   567 op mul *tmp167 2 3
   568 op add :start_reactor:cryo_req 3 6
   569 jump *label279 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  570 print "IDLE\n"
   571 set :start_reactor:supply_fuel false
   572 jump *label290 always
   573 label *label279
 
   577 op div :start_reactor:flow *tmp175 10
   578 op idiv *tmp178 :start_reactor:charge_units 0.001
   579 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  580 print "WAIT power. (%{0}J + %{0}W)\n"
+  581 format :start_reactor:charge
+  582 format :start_reactor:flow
   583 set :start_reactor:supply_fuel false
   584 jump *label289 always
   585 label *label280
 
   587 jump *label283 greaterThanEq :start_reactor:fuel 10
   588 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   589 jump *label281 lessThanEq *tmp182 10
-    * print "WAIT fuel"
-    * print "\n"
+  590 print "WAIT fuel\n"
   591 jump *label288 always
   592 label *label281
-    * print "WAIT system fuel"
-    * print "\n"
+  593 print "WAIT system fuel\n"
   594 jump *label288 always
   595 label *label283
   596 op mul *tmp185 45 3
   597 jump *label284 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  598 print "WAIT buffer fuel\n"
   599 jump *label287 always
   600 label *label284
   601 jump *label285 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  602 print "WAIT cryo\n"
   603 jump *label286 always
   604 label *label285
-    * print "STARTUP"
-    * print "\n"
+  605 print "STARTUP\n"
   606 op add .START_POWER_REQ .START_POWER_REQ 23000
   607 control enabled :start_reactor:reactor true
   608 label *label286
 
   657 jump *label41 equal :emerg_shutdown false
   658 label *label43
   659 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  660 print "Central Fuel at {0} / 0 - "
+  661 format :throttle_blast:fuel_stored
   662 jump *label46 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  663 print " Enemies detected.\n"
   664 jump *label42 always
   665 label *label46
-    * print " Critical power."
-    * print "\n"
+  666 print " Critical power.\n"
   667 jump *label42 always
   668 label *label41
   669 jump *label48 notEqual *tmp28 false
   670 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  671 print "Fuel {0} / 150 (due to emergency)\n"
+  672 format :throttle_blast:fuel_stored
   673 jump *label49 always
   674 label *label48
   675 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  676 print "Fuel {0} / 800\n"
+  677 format :throttle_blast:fuel_stored
   678 label *label49
   679 label *label42
   680 select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
 
   684 op div :diff_generators:stored_pc *tmp48 *tmp49
   685 jump *label53 lessThanEq :diff_generators:stored_pc 0.9
   686 jump *label53 greaterThanEq .START_POWER_REQ 10
-    * print "Differential now idle."
-    * print "\n"
+  687 print "Differential now idle.\n"
   688 control enabled generator1 false
   689 control enabled generator2 false
   690 jump *label54 always
 
   701 jump *label59 lessThanEq .START_POWER_REQ 0
   702 op idiv *tmp89 .START_POWER_REQ 100
   703 op div :kilo*retval *tmp89 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  704 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  705 format :kilo*retval
+  706 format :charge
+  707 format :surplus
   708 jump *label60 always
   709 label *label59
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  710 print "Power {0}kW, {0}kJ\n"
+  711 format :surplus
+  712 format :kilo*retval
   713 sensor *tmp69 .NODE @powerNetStored
   714 sensor *tmp70 .NODE @powerNetCapacity
   715 op div :update_reactors_desired:stored *tmp69 *tmp70
 
   730 label *label69
   731 label *label60
   732 jump *label73 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  733 print "Require only {0}/5 reactors.\n"
+  734 format .REACTORS_DESIRED
   735 label *label73
   736 printflush message1
   737 jump *label7 always
 
   752 op mul *tmp120 :start_reactor:surplus 0.2
   753 op add .AVG_SURPLUS *tmp119 *tmp120
   754 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  755 print "#{0} - "
+  756 format :start_reactor:reactor_num
   757 jump *label87 equal :start_reactor:emerg_shutdown false
   758 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  759 print "emergency mode\n"
   760 set :start_reactor*retval false
   761 jump *label88 always
   762 label *label87
   763 jump *label89 equal :start_reactor:enabled false
   764 jump *label91 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   765 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  766 print "STOP unwanted\n"
   767 jump *label90 always
   768 label *label91
   769 jump *label93 lessThanEq :start_reactor:reactor_num 1
   770 op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
   771 jump *label93 greaterThanEq :start_reactor:fuel_stored *tmp132
   772 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  773 print "STOP system fuel low\n"
   774 jump *label90 always
   775 label *label93
   776 jump *label97 greaterThan :start_reactor:fuel 1
   777 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  778 print "STOP fuel low\n"
   779 jump *label90 always
   780 label *label97
   781 jump *label99 greaterThan :start_reactor:cryo .CRYO_ABORT
   782 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  783 print "STOP out of cryo\n"
   784 jump *label90 always
   785 label *label99
   786 jump *label101 greaterThanEq :start_reactor:secs 30
 
   802 jump *label104 greaterThanEq *tmp147 .PWR_ABORT
   803 jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   804 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  805 print "START FAIL battery\n"
   806 set :start_reactor*retval false
   807 jump *label90 always
   808 label *label104
   809 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  810 print "Starting {0} secs, req {0}J\n"
+  811 format :start_reactor:time_left
+  812 format :calc_charge_req*retval
   813 jump *label90 always
   814 label *label101
   815 jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
   816 jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
   817 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  818 print "ABANDON - battery crit\n"
   819 set :start_reactor*retval false
   820 jump *label90 always
   821 label *label108
   822 op idiv :start_reactor:mins :start_reactor:secs 6
   823 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  824 print "RUN {0} mins\n"
+  825 format :start_reactor:mins
   826 jump *label90 always
   827 label *label89
   828 op sub *tmp161 :start_reactor:charge .START_POWER_REQ
 
   834 op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
   835 op add :start_reactor:cryo_req .CRYO_REQ *tmp167
   836 jump *label112 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  837 print "IDLE\n"
   838 set :start_reactor*retval false
   839 jump *label113 always
   840 label *label112
 
   844 op div :start_reactor:flow *tmp175 10
   845 op idiv *tmp178 :start_reactor:charge_units 0.001
   846 op div :start_reactor:charge *tmp178 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  847 print "WAIT power. (%{0}J + %{0}W)\n"
+  848 format :start_reactor:charge
+  849 format :start_reactor:flow
   850 set :start_reactor*retval false
   851 jump *label115 always
   852 label *label114
 
   854 jump *label116 greaterThanEq :start_reactor:fuel .FUEL_REQ
   855 op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
   856 jump *label120 lessThanEq *tmp182 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  857 print "WAIT fuel\n"
   858 jump *label117 always
   859 label *label120
-    * print "WAIT system fuel"
-    * print "\n"
+  860 print "WAIT system fuel\n"
   861 jump *label117 always
   862 label *label116
   863 op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
   864 jump *label122 greaterThanEq :start_reactor:fuel_stored *tmp185
-    * print "WAIT buffer fuel"
-    * print "\n"
+  865 print "WAIT buffer fuel\n"
   866 jump *label123 always
   867 label *label122
   868 jump *label124 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  869 print "WAIT cryo\n"
   870 jump *label125 always
   871 label *label124
-    * print "STARTUP"
-    * print "\n"
+  872 print "STARTUP\n"
   873 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   874 control enabled :start_reactor:reactor true
   875 label *label125

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
op sub *tmp231 @tick 3600
select *tmp5 greaterThan :surplus 10000 *tmp231 @tick
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .ULD_IN_1 unloader1
set .ULD_OUT_1 unloader2
set .ULD_IN_2 unloader3
set .ULD_OUT_2 unloader4
set .ULD_IN_MANY unloader5
set .ULD_OUT_MANY unloader6
set .ULD_MIXER unloader7
set .TOWER cyclone1
set .CONTAINER vault1
set .NODE node1
radar enemy any any health .TOWER 1 :check_radar:enemy_found
jump *label176 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config .ULD_IN_1 @scrap
control config .ULD_OUT_1 @blast-compound
control config .ULD_IN_2 @scrap
control config .ULD_OUT_2 @blast-compound
control config .ULD_IN_MANY @scrap
control config .ULD_OUT_MANY @blast-compound
control config .ULD_MIXER @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label177 always
label *label176
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label177
jump *label12 equal switch1 null
sensor *tmp10 switch1 @enabled
jump *label12 notEqual *tmp10 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always
label *label12
set *tmp8 false
label *label11
op or :emerg_shutdown :check_radar*retval *tmp8
set :calc_charge_req:reactor reactor1
op sub *tmp98 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp98 60
jump *label146 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label147 notEqual *tmp101 false
label *label146
set :calc_charge_req*retval 0
jump *label149 always
label *label147
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label149
set .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor2
op sub *tmp98 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp98 60
jump *label151 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label152 notEqual *tmp101 false
label *label151
set :calc_charge_req*retval 0
jump *label154 always
label *label152
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label154
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor3
op sub *tmp98 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp98 60
jump *label156 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label157 notEqual *tmp101 false
label *label156
set :calc_charge_req*retval 0
jump *label159 always
label *label157
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label159
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor4
op sub *tmp98 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp98 60
jump *label161 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label162 notEqual *tmp101 false
label *label161
set :calc_charge_req*retval 0
jump *label164 always
label *label162
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label164
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :calc_charge_req:reactor reactor5
op sub *tmp98 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp98 60
jump *label166 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :calc_charge_req:reactor @enabled
jump *label167 notEqual *tmp101 false
label *label166
set :calc_charge_req*retval 0
jump *label169 always
label *label167
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label169
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set :start_reactor:reactor reactor1
op sub *tmp108 @tick :t_startup1
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#1 - "
jump *label184 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label218 always
label *label184
jump *label204 equal :start_reactor:enabled false
jump *label186 greaterThanEq .REACTORS_DESIRED 1
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label217 always
label *label186
jump *label187 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label217 always
label *label187
jump *label188 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label217 always
label *label188
jump *label196 greaterThanEq :start_reactor:secs 30
op sub *tmp98 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp98 60
jump *label190 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label191 notEqual *tmp101 false
label *label190
set :calc_charge_req*retval 0
jump *label193 always
label *label191
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label193
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label194 greaterThanEq *tmp147 5000
jump *label194 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label217 always
label *label194
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label217 always
label *label196
jump *label197 greaterThanEq :start_reactor:charge 2000
jump *label197 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label217 always
label *label197
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label217 always
label *label204
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 1
op add :start_reactor:cryo_req 3 2
jump *label205 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label216 always
label *label205
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label206 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label215 always
label *label206
jump *label209 equal :fuel_1 false
jump *label209 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label207 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label214 always
label *label207
print "WAIT system fuel\n"
jump *label214 always
label *label209
op mul *tmp185 45 1
jump *label210 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label213 always
label *label210
jump *label211 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label212 always
label *label211
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label212
label *label213
label *label214
label *label215
label *label216
label *label217
label *label218
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_IN_1 *tmp93
select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_OUT_1 *tmp97
set :start_reactor:reactor reactor2
op sub *tmp108 @tick :t_startup2
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#2 - "
jump *label221 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label255 always
label *label221
jump *label241 equal :start_reactor:enabled false
jump *label222 greaterThanEq .REACTORS_DESIRED 2
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label254 always
label *label222
op mul *tmp132 15 2
jump *label223 greaterThanEq :start_reactor:fuel_stored 30
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label254 always
label *label223
jump *label224 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label254 always
label *label224
jump *label225 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label254 always
label *label225
jump *label233 greaterThanEq :start_reactor:secs 30
op sub *tmp98 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp98 60
jump *label227 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label228 notEqual *tmp101 false
label *label227
set :calc_charge_req*retval 0
jump *label230 always
label *label228
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label230
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label231 greaterThanEq *tmp147 5000
jump *label231 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label254 always
label *label231
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label254 always
label *label233
jump *label234 greaterThanEq :start_reactor:charge 2000
jump *label234 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label254 always
label *label234
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label254 always
label *label241
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 2
op add :start_reactor:cryo_req 3 4
jump *label242 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label253 always
label *label242
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label243 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label252 always
label *label243
jump *label246 equal :fuel_2 false
jump *label246 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label244 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label251 always
label *label244
print "WAIT system fuel\n"
jump *label251 always
label *label246
op mul *tmp185 45 2
jump *label247 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label250 always
label *label247
jump *label248 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label249 always
label *label248
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label249
label *label250
label *label251
label *label252
label *label253
label *label254
label *label255
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
select *tmp93 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_IN_2 *tmp93
select *tmp97 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config .ULD_OUT_2 *tmp97
radar enemy any any health .TOWER 1 :check_radar:enemy_found
jump *label180 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config .ULD_IN_1 @scrap
control config .ULD_OUT_1 @blast-compound
control config .ULD_IN_2 @scrap
control config .ULD_OUT_2 @blast-compound
control config .ULD_IN_MANY @scrap
control config .ULD_OUT_MANY @blast-compound
control config .ULD_MIXER @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label181 always
label *label180
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label181
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
set :start_reactor:reactor reactor3
op sub *tmp108 @tick :t_startup3
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#3 - "
jump *label258 equal :emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label292 always
label *label258
jump *label278 equal :start_reactor:enabled false
jump *label259 greaterThanEq .REACTORS_DESIRED 3
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label291 always
label *label259
op mul *tmp132 15 3
jump *label260 greaterThanEq :start_reactor:fuel_stored 45
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label291 always
label *label260
jump *label261 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label291 always
label *label261
jump *label262 greaterThan :start_reactor:cryo 1
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label291 always
label *label262
jump *label270 greaterThanEq :start_reactor:secs 30
op sub *tmp98 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp98 60
jump *label264 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label265 notEqual *tmp101 false
label *label264
set :calc_charge_req*retval 0
jump *label267 always
label *label265
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label267
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label268 greaterThanEq *tmp147 5000
jump *label268 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label291 always
label *label268
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label291 always
label *label270
jump *label271 greaterThanEq :start_reactor:charge 2000
jump *label271 greaterThanEq :start_reactor:surplus -500
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label291 always
label *label271
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label291 always
label *label278
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 5000
op div *tmp163 *tmp162 23000
op div :start_reactor:charge_units *tmp162 38333.333333333336
op div *tmp165 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 2 3
op add :start_reactor:cryo_req 3 6
jump *label279 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label290 always
label *label279
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label280 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label289 always
label *label280
jump *label283 equal :fuel_3 false
jump *label283 greaterThanEq :start_reactor:fuel 10
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label281 lessThanEq *tmp182 10
print "WAIT fuel\n"
jump *label288 always
label *label281
print "WAIT system fuel\n"
jump *label288 always
label *label283
op mul *tmp185 45 3
jump *label284 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label287 always
label *label284
jump *label285 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label286 always
label *label285
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled :start_reactor:reactor true
label *label286
label *label287
label *label288
label *label289
label *label290
label *label291
label *label292
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
setaddr :start_reactor*retaddr *label27
call *label3 *invalid :start_reactor*retval
label *label27
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
setaddr :start_reactor*retaddr *label28
call *label3 *invalid :start_reactor*retval
label *label28
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp232 :start_reactor:supply_fuel :fuel_4
op or *tmp26 *tmp232 :start_reactor*retval
select *tmp93 notEqual *tmp26 false @blast-compound @scrap
control config .ULD_IN_MANY *tmp93
select *tmp97 equal *tmp26 false @blast-compound @scrap
control config .ULD_OUT_MANY *tmp97
op or *tmp233 :fuel_1 :fuel_2
op or *tmp28 *tmp233 *tmp26
sensor *tmp30 .NODE @powerNetStored
op floor :throttle_blast:charge *tmp30
sensor *tmp32 .NODE @powerNetIn
sensor *tmp33 .NODE @powerNetOut
op sub *tmp34 *tmp32 *tmp33
op floor :throttle_blast:surplus *tmp34
sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
jump *label44 greaterThanEq :throttle_blast:charge 5000
jump *label43 lessThan :throttle_blast:surplus -500
label *label44
jump *label41 equal :emerg_shutdown false
label *label43
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label46 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label42 always
label *label46
print " Critical power.\n"
jump *label42 always
label *label41
jump *label48 notEqual *tmp28 false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label49 always
label *label48
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label49
label *label42
select *tmp46 lessThan :throttle_blast:fuel_stored :throttle_blast:limit @pyratite @scrap
control config .ULD_MIXER *tmp46
sensor *tmp48 .NODE @powerNetStored
sensor *tmp49 .NODE @powerNetCapacity
op div :diff_generators:stored_pc *tmp48 *tmp49
jump *label53 lessThanEq :diff_generators:stored_pc 0.9
jump *label53 greaterThanEq .START_POWER_REQ 10
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label54 always
label *label53
control enabled generator1 true
control enabled generator2 true
label *label54
op idiv *tmp89 .AVG_SURPLUS 100
op div :surplus *tmp89 10
sensor :kilo:val .NODE @powerNetStored
op idiv *tmp89 :kilo:val 100
op div :kilo*retval *tmp89 10
set :charge :kilo*retval
jump *label59 lessThanEq .START_POWER_REQ 0
op idiv *tmp89 .START_POWER_REQ 100
op div :kilo*retval *tmp89 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label60 always
label *label59
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
sensor *tmp69 .NODE @powerNetStored
sensor *tmp70 .NODE @powerNetCapacity
op div :update_reactors_desired:stored *tmp69 *tmp70
jump *label63 lessThanEq :update_reactors_desired:stored 0.98
jump *label63 lessThanEq .AVG_SURPLUS 16500
jump *label67 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label67
label *label63
jump *label69 greaterThanEq :update_reactors_desired:stored 0.8
jump *label69 greaterThanEq .AVG_SURPLUS 8000
op sub *tmp82 .AVG_SURPLUS 10000
op idiv *tmp83 *tmp82 6500
op max :update_reactors_desired:needed 1 *tmp83
op add *tmp85 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp85
label *label69
label *label60
jump *label73 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label73
printflush message1
jump *label7 always
label *label3
op sub *tmp108 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp108 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp113 .NODE @powerNetStored
op floor :start_reactor:charge *tmp113
sensor *tmp115 .NODE @powerNetIn
sensor *tmp116 .NODE @powerNetOut
op sub *tmp117 *tmp115 *tmp116
op floor :start_reactor:surplus *tmp117
op mul *tmp119 .AVG_SURPLUS 0.8
op mul *tmp120 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp119 *tmp120
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label87 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label88 always
label *label87
jump *label89 equal :start_reactor:enabled false
jump *label91 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label90 always
label *label91
jump *label93 lessThanEq :start_reactor:reactor_num 1
op mul *tmp132 .FUEL_TOT_ABORT :start_reactor:reactor_num
jump *label93 greaterThanEq :start_reactor:fuel_stored *tmp132
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label90 always
label *label93
jump *label97 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label90 always
label *label97
jump *label99 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label90 always
label *label99
jump *label101 greaterThanEq :start_reactor:secs 30
op sub *tmp98 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp98 60
jump *label171 greaterThan :calc_charge_req:secs 30
sensor *tmp101 :start_reactor:reactor @enabled
jump *label172 notEqual *tmp101 false
label *label171
set :calc_charge_req*retval 0
jump *label174 always
label *label172
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp105 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp105 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
label *label174
op sub *tmp147 :start_reactor:charge :calc_charge_req*retval
jump *label104 greaterThanEq *tmp147 .PWR_ABORT
jump *label104 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label90 always
label *label104
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label90 always
label *label101
jump *label108 greaterThanEq :start_reactor:charge .PWR_ABANDON
jump *label108 greaterThanEq :start_reactor:surplus .FLOW_ABORT
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label90 always
label *label108
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label90 always
label *label89
op sub *tmp161 :start_reactor:charge .START_POWER_REQ
op sub *tmp162 *tmp161 .PWR_ABORT
op div *tmp163 *tmp162 .PWR_REQ
op mul :start_reactor:charge_units *tmp163 .PWR_RESERVE
op div *tmp165 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp165
op mul *tmp167 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp167
jump *label112 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label113 always
label *label112
op add *tmp171 :start_reactor:flow_units :start_reactor:charge_units
jump *label114 greaterThanEq *tmp171 1
op idiv *tmp175 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp175 10
op idiv *tmp178 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp178 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label115 always
label *label114
jump *label116 equal :start_reactor:fuel_on false
jump *label116 greaterThanEq :start_reactor:fuel .FUEL_REQ
op add *tmp182 :start_reactor:fuel :start_reactor:fuel_stored
jump *label120 lessThanEq *tmp182 .FUEL_REQ
print "WAIT fuel\n"
jump *label117 always
label *label120
print "WAIT system fuel\n"
jump *label117 always
label *label116
op mul *tmp185 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label122 greaterThanEq :start_reactor:fuel_stored *tmp185
print "WAIT buffer fuel\n"
jump *label123 always
label *label122
jump *label124 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label125 always
label *label124
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label125
label *label123
label *label117
label *label115
label *label113
label *label90
label *label88
sensor *tmp192 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp192 @tick :start_reactor:t_startup
return :start_reactor*retaddr
