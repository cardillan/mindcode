   661 instructions before optimizations.
    45 instructions eliminated by Temp Variables Elimination.
    60 instructions eliminated by Dead Code Elimination (10 iterations).
     1 instructions eliminated by Jump Normalization (5 iterations).
    18 instructions eliminated by Jump Optimization (2 passes, 5 iterations).
    17 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (4 iterations).
     3 instructions eliminated by If Expression Optimization (4 iterations).
    99 instructions eliminated by Data Flow Optimization (8 passes, 30 iterations).
   542 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by JumpThreading.
     4 instructions eliminated by Unreachable Code Elimination.
   132 instructions eliminated by Print Merging.
   821 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 521):
  * Inline function 'kilo' defined at line 117:1                 cost     3, benefit      218.8, efficiency       72.9 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0
    Inline function 'calc_charge_req' defined at line 126:1      cost    59, benefit      503.9, efficiency        8.5
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 74:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 75:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 76:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 77:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 102:15                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 103:14                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 105:15                          cost     2, benefit       43.8, efficiency       21.9
    Inline function call at line 173:26                          cost    12, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 525):
  * Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0 (-1 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      cost    59, benefit      503.9, efficiency        8.5
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 74:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 75:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 76:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 77:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 173:26                          cost    12, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 526):
  * Inline function 'calc_charge_req' defined at line 126:1      cost    59, benefit      503.9, efficiency        8.5 (+39 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 74:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 75:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 76:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 77:24                           cost    12, benefit      100.0, efficiency        8.3
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 173:26                          cost    12, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 487):
  ! Inline function 'start_reactor' defined at line 140:1        cost   627, benefit      687.5, efficiency        1.1
  * Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3 (+6 instructions)
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 80:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 481):
  ! Inline function 'start_reactor' defined at line 140:1        cost   627, benefit      687.5, efficiency        1.1
  * Inline function call at line 80:14                           cost   157, benefit      137.5, efficiency        0.9 (+149 instructions)
    Inline function call at line 84:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 89:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 332):
  ! Inline function 'start_reactor' defined at line 140:1        cost   470, benefit      550.0, efficiency        1.2
  * Inline function call at line 84:14                           cost   157, benefit      137.5, efficiency        0.9 (+150 instructions)
    Inline function call at line 89:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 182):
  ! Inline function 'start_reactor' defined at line 140:1        cost   313, benefit      412.5, efficiency        1.3
  * Inline function call at line 89:14                           cost   157, benefit      137.5, efficiency        0.9 (+150 instructions)
    Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 32):
  ! Inline function 'start_reactor' defined at line 140:1        cost   156, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 2: speed optimization selection (cost limit 42):
  ! Inline function 'start_reactor' defined at line 140:1        cost   155, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   156, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   156, benefit      137.5, efficiency        0.9

Pass 3: speed optimization selection (cost limit 43):
  ! Inline function 'start_reactor' defined at line 140:1        cost   155, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   156, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   156, benefit      137.5, efficiency        0.9

Pass 4: speed optimization selection (cost limit 43):
  ! Inline function 'start_reactor' defined at line 140:1        cost   155, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   156, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   156, benefit      137.5, efficiency        0.9

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    71 print "\n"
    72 set *tmp8 true
    73 jump *label11 always
-    * set *tmp13 null
    74 jump *label13 always
    75 label *label12
-    * set *tmp13 null
    76 label *label13
    77 set *tmp8 false
    78 jump *label11 always
 
   131 setaddr :fn1*retaddr *label20
   132 call *label1 :fn1*retval
   133 label *label20
-    * set *tmp20 :fn1*retval
   134 set :fn3:reactor reactor2
   135 set :fn3:reactor_num 2
   136 set :fn3:emerg_shutdown :emerg_shutdown
 
   148 setaddr :fn1*retaddr *label22
   149 call *label1 :fn1*retval
   150 label *label22
-    * set *tmp22 :fn1*retval
   151 set :fn4:unit .TOWER
   152 setaddr :fn4*retaddr *label23
   153 call *label4 :fn4*retval
 
   196 setaddr :fn1*retaddr *label27
   197 call *label1 :fn1*retval
   198 label *label27
-    * set *tmp29 :fn1*retval
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or *tmp31 *tmp30 :fuel_many
   201 set :fn6:reactors_fueled *tmp31
 
   233 print "\n"
   234 set *tmp45 null
   235 label *label32
-    * set *tmp44 *tmp45
   236 jump *label30 always
   237 label *label29
   238 op equal *tmp46 :fn6:reactors_fueled false
 
   259 print "n"
   260 set *tmp47 null
   261 label *label34
-    * set *tmp44 *tmp47
   262 label *label30
   263 op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
   264 set *tmp32 *tmp48
 
   293 control enabled generator2 true
   294 set *tmp59 true
   295 label *label39
-    * set *tmp52 *tmp59
   296 label *label37
   297 set :fn0:val .AVG_SURPLUS
   298 setaddr :fn0*retaddr *label40
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp68 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   349 label *label48
   350 set *tmp80 null
   351 label *label49
-    * set *tmp78 *tmp80
   352 jump *label47 always
   353 label *label46
-    * set *tmp78 null
   354 label *label47
   355 op lessThan *tmp81 :fn8:stored 0.8
   356 op mul *tmp82 .GOAL_BUFFER 0.8
 
   371 label *label51
   372 set *tmp70 *tmp85
   373 label *label45
-    * set *tmp68 *tmp70
   374 label *label43
   375 op notEqual *tmp91 .REACTORS_DESIRED 5
   376 jump *label52 equal *tmp91 false
 
   378 print .REACTORS_DESIRED
   379 print "/5 reactors."
   380 print "\n"
-    * set *tmp92 null
   381 jump *label53 always
   382 label *label52
-    * set *tmp92 null
   383 label *label53
   384 printflush message1
   385 label *label8
 
   428 jump *label61 equal *tmp107 false
   429 set :fn2*retval 0
   430 jump *label60 always
-    * set *tmp108 null
   431 jump *label62 always
   432 label *label61
-    * set *tmp108 null
   433 label *label62
   434 op sub *tmp109 30 :fn2:secs
   435 set :fn2:time_left *tmp109
 
   479 print "emergency mode"
   480 print "\n"
   481 set :fn3:supply_fuel false
-    * set *tmp128 :fn3:supply_fuel
   482 jump *label65 always
   483 label *label64
   484 jump *label66 equal :fn3:enabled false
 
   682 label *label84
   683 set *tmp131 *tmp178
   684 label *label67
-    * set *tmp128 *tmp131
   685 label *label65
   686 sensor *tmp201 :fn3:reactor @enabled
   687 op notEqual *tmp202 :fn3:enabled *tmp201
   688 jump *label95 equal *tmp202 false
   689 set *tmp204 @tick
   690 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   691 jump *label96 always
   692 label *label95
-    * set *tmp203 null
   693 label *label96
   694 set :fn3*retval :fn3:supply_fuel
   695 jump *label63 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   226 jump *label31 equal :fn6:emerg_shutdown false
   227 print " Enemies detected."
   228 print "\n"
-    * set *tmp45 null
   229 jump *label32 always
   230 label *label31
   231 print " Critical power."
   232 print "\n"
-    * set *tmp45 null
   233 label *label32
   234 jump *label30 always
   235 label *label29
 
   244 print " "
   245 print "(due to emergency)"
   246 print "\n"
-    * set *tmp47 null
   247 jump *label34 always
   248 label *label33
   249 set :fn6:limit .FUEL_LIMIT
 
   254 print :fn6:limit
   255 print "\"
   256 print "n"
-    * set *tmp47 null
   257 label *label34
   258 label *label30
   259 op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
 
   282 print "\n"
   283 control enabled generator1 false
   284 control enabled generator2 false
-    * set *tmp59 false
   285 jump *label39 always
   286 label *label38
   287 control enabled generator1 true
   288 control enabled generator2 true
-    * set *tmp59 true
   289 label *label39
   290 label *label37
   291 set :fn0:val .AVG_SURPLUS
 
   338 jump *label48 equal *tmp79 false
   339 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   340 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   341 jump *label49 always
   342 label *label48
-    * set *tmp80 null
   343 label *label49
   344 jump *label47 always
   345 label *label46
 
   361 label *label50
   362 set *tmp85 null
   363 label *label51
-    * set *tmp70 *tmp85
   364 label *label45
   365 label *label43
   366 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   404 set *tmp101 .FUEL_OFF
   405 label *label59
   406 control config *tmp98 *tmp101
-    * set :fn1*retval *tmp101
   407 label *label55
   408 return :fn1*retaddr
   409 end
 
   579 label *label71
   580 set *tmp133 *tmp140
   581 label *label69
-    * set *tmp131 *tmp133
   582 jump *label67 always
   583 label *label66
   584 op sub *tmp169 :fn3:charge .START_POWER_REQ
 
   669 label *label86
   670 set *tmp178 *tmp181
   671 label *label84
-    * set *tmp131 *tmp178
   672 label *label67
   673 label *label65
   674 sensor *tmp201 :fn3:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   356 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   357 op min *tmp90 5 *tmp89
   358 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   359 jump *label51 always
   360 label *label50
-    * set *tmp85 null
   361 label *label51
   362 label *label45
   363 label *label43
 
   476 control enabled *tmp134 false
   477 print "STOP unwanted"
   478 print "\n"
-    * set *tmp133 null
   479 jump *label69 always
   480 label *label68
   481 op greaterThan *tmp136 :fn3:reactor_num 1
 
   574 label *label73
   575 set *tmp140 *tmp144
   576 label *label71
-    * set *tmp133 *tmp140
   577 label *label69
   578 jump *label67 always
   579 label *label66
 
   593 print "IDLE"
   594 print "\n"
   595 set :fn3:supply_fuel false
-    * set *tmp178 :fn3:supply_fuel
   596 jump *label84 always
   597 label *label83
   598 op add *tmp179 :fn3:flow_units :fn3:charge_units
 
   662 label *label88
   663 set *tmp181 *tmp190
   664 label *label86
-    * set *tmp178 *tmp181
   665 label *label84
   666 label *label67
   667 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   487 control enabled *tmp141 false
   488 print "STOP system fuel low"
   489 print "\n"
-    * set *tmp140 null
   490 jump *label71 always
   491 label *label70
   492 op lessThanEq *tmp143 :fn3:fuel 1
 
   571 label *label75
   572 set *tmp144 *tmp148
   573 label *label73
-    * set *tmp140 *tmp144
   574 label *label71
   575 label *label69
   576 jump *label67 always
 
   611 print "W)"
   612 print "\n"
   613 set :fn3:supply_fuel false
-    * set *tmp181 :fn3:supply_fuel
   614 jump *label86 always
   615 label *label85
   616 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
 
   657 label *label92
   658 set *tmp190 *tmp196
   659 label *label88
-    * set *tmp181 *tmp190
   660 label *label86
   661 label *label84
   662 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   495 control enabled *tmp145 false
   496 print "STOP fuel low"
   497 print "\n"
-    * set *tmp144 null
   498 jump *label73 always
   499 label *label72
   500 op lessThanEq *tmp147 :fn3:cryo .CRYO_ABORT
 
   568 label *label77
   569 set *tmp148 *tmp152
   570 label *label75
-    * set *tmp144 *tmp148
   571 label *label73
   572 label *label71
   573 label *label69
 
   626 print "\n"
   627 set *tmp193 null
   628 label *label90
-    * set *tmp190 *tmp193
   629 jump *label88 always
   630 label *label87
   631 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
 
   652 label *label94
   653 set *tmp196 *tmp198
   654 label *label92
-    * set *tmp190 *tmp196
   655 label *label88
   656 label *label86
   657 label *label84

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   503 control enabled *tmp149 false
   504 print "STOP out of cryo"
   505 print "\n"
-    * set *tmp148 null
   506 jump *label75 always
   507 label *label74
   508 op lessThan *tmp151 :fn3:secs 30
 
   565 label *label82
   566 set *tmp152 *tmp164
   567 label *label77
-    * set *tmp148 *tmp152
   568 label *label75
   569 label *label73
   570 label *label71
 
   617 jump *label89 equal *tmp192 false
   618 print "WAIT fuel"
   619 print "\n"
-    * set *tmp193 null
   620 jump *label90 always
   621 label *label89
   622 print "WAIT system fuel"
   623 print "\n"
-    * set *tmp193 null
   624 label *label90
   625 jump *label88 always
   626 label *label87
 
   629 jump *label91 equal *tmp195 false
   630 print "WAIT buffer fuel"
   631 print "\n"
-    * set *tmp196 null
   632 jump *label92 always
   633 label *label91
   634 op lessThan *tmp197 :fn3:cryo :fn3:cryo_req
 
   645 control enabled *tmp199 true
   646 set *tmp198 true
   647 label *label94
-    * set *tmp196 *tmp198
   648 label *label92
   649 label *label88
   650 label *label86

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   537 print "\n"
   538 set *tmp157 null
   539 label *label80
-    * set *tmp152 *tmp157
   540 jump *label77 always
   541 label *label76
   542 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
 
   562 print "\n"
   563 set *tmp164 null
   564 label *label82
-    * set *tmp152 *tmp164
   565 label *label77
   566 label *label75
   567 label *label73
 
   633 jump *label93 equal *tmp197 false
   634 print "WAIT cryo"
   635 print "\n"
-    * set *tmp198 null
   636 jump *label94 always
   637 label *label93
   638 print "STARTUP"
 
   640 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   641 set *tmp199 :fn3:reactor
   642 control enabled *tmp199 true
-    * set *tmp198 true
   643 label *label94
   644 label *label92
   645 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   523 print "START FAIL battery"
   524 print "\n"
   525 set :fn3:supply_fuel false
-    * set *tmp157 :fn3:supply_fuel
   526 jump *label80 always
   527 label *label79
   528 op sub *tmp160 30 :fn3:secs
 
   534 print :fn3:charge_req
   535 print "J"
   536 print "\n"
-    * set *tmp157 null
   537 label *label80
   538 jump *label77 always
   539 label *label76
 
   546 print "ABANDON - battery crit"
   547 print "\n"
   548 set :fn3:supply_fuel false
-    * set *tmp164 :fn3:supply_fuel
   549 jump *label82 always
   550 label *label81
   551 op idiv *tmp167 :fn3:secs 6
 
   557 print " "
   558 print "mins"
   559 print "\n"
-    * set *tmp164 null
   560 label *label82
   561 label *label77
   562 label *label75

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-45 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :fn4*retaddr *label10
    59 call *label4 :fn4*retval
    60 label *label10
-    * set *tmp7 :fn4*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :fn4*retval
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
    64 op equal *tmp11 *tmp10 false
 
    81 setaddr :fn2*retaddr *label14
    82 call *label2 :fn2*retval
    83 label *label14
-    * set *tmp14 :fn2*retval
-    * set .START_POWER_REQ *tmp14
+   84 set .START_POWER_REQ :fn2*retval
    85 set :fn2:reactor reactor2
    86 set :fn2:time :t_startup2
    87 setaddr :fn2*retaddr *label15
 
   118 setaddr :fn3*retaddr *label19
   119 call *label3 :fn3*retval
   120 label *label19
-    * set *tmp19 :fn3*retval
-    * set :fuel_1 *tmp19
+  121 set :fuel_1 :fn3*retval
   122 set :t_startup1 .RET_T_STARTUP
   123 set :fn1:fuel :fuel_1
   124 set :fn1:uld_in .ULD_IN_1
 
   134 setaddr :fn3*retaddr *label21
   135 call *label3 :fn3*retval
   136 label *label21
-    * set *tmp21 :fn3*retval
-    * set :fuel_2 *tmp21
+  137 set :fuel_2 :fn3*retval
   138 set :t_startup2 .RET_T_STARTUP
   139 set :fn1:fuel :fuel_2
   140 set :fn1:uld_in .ULD_IN_2
 
   156 setaddr :fn3*retaddr *label24
   157 call *label3 :fn3*retval
   158 label *label24
-    * set *tmp24 :fn3*retval
-    * set :fuel_3 *tmp24
+  159 set :fuel_3 :fn3*retval
   160 set :t_startup3 .RET_T_STARTUP
   161 set :fn3:reactor reactor4
   162 set :fn3:reactor_num 4
 
   166 setaddr :fn3*retaddr *label25
   167 call *label3 :fn3*retval
   168 label *label25
-    * set *tmp25 :fn3*retval
-    * set :fuel_4 *tmp25
+  169 set :fuel_4 :fn3*retval
   170 set :t_startup4 .RET_T_STARTUP
   171 set :fn3:reactor reactor5
   172 set :fn3:reactor_num 5
 
   176 setaddr :fn3*retaddr *label26
   177 call *label3 :fn3*retval
   178 label *label26
-    * set *tmp26 :fn3*retval
-    * set :fuel_5 *tmp26
+  179 set :fuel_5 :fn3*retval
   180 set :t_startup5 .RET_T_STARTUP
   181 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  182 op or :fuel_many *tmp27 :fuel_5
   183 set :fn1:fuel :fuel_many
   184 set :fn1:uld_in .ULD_IN_MANY
   185 set :fn1:uld_out .ULD_OUT_MANY
 
   187 call *label1 :fn1*retval
   188 label *label27
   189 op or *tmp30 :fuel_1 :fuel_2
-    * op or *tmp31 *tmp30 :fuel_many
-    * set :fn6:reactors_fueled *tmp31
+  190 op or :fn6:reactors_fueled *tmp30 :fuel_many
   191 set :fn6:emerg_shutdown :emerg_shutdown
   192 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :fn6:charge *tmp34
+  193 op floor :fn6:charge *tmp33
   194 sensor *tmp35 .NODE @powerNetIn
   195 sensor *tmp36 .NODE @powerNetOut
   196 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :fn6:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :fn6:fuel_stored *tmp39
+  197 op floor :fn6:surplus *tmp37
+  198 sensor :fn6:fuel_stored .CONTAINER @blast-compound
   199 op lessThan *tmp40 :fn6:charge .PWR_ABORT
   200 op lessThan *tmp41 :fn6:surplus .FLOW_ABORT
   201 op land *tmp42 *tmp40 *tmp41
 
   242 print "n"
   243 label *label34
   244 label *label30
-    * op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
-    * set *tmp32 *tmp48
+  245 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   246 jump *label28 always
   247 set *tmp32 null
   248 label *label28
 
   257 control config *tmp49 *tmp51
   258 sensor *tmp53 .NODE @powerNetStored
   259 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :fn7:stored_pc *tmp55
+  260 op div :fn7:stored_pc *tmp53 *tmp54
   261 op greaterThan *tmp56 :fn7:stored_pc 0.9
   262 op lessThan *tmp57 .START_POWER_REQ 10
   263 op land *tmp58 *tmp56 *tmp57
 
   276 setaddr :fn0*retaddr *label40
   277 call *label0 :fn0*retval
   278 label *label40
-    * set *tmp64 :fn0*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :fn0:val *tmp65
+  279 set :surplus :fn0*retval
+  280 sensor :fn0:val .NODE @powerNetStored
   281 setaddr :fn0*retaddr *label41
   282 call *label0 :fn0*retval
   283 label *label41
-    * set *tmp66 :fn0*retval
-    * set :charge *tmp66
+  284 set :charge :fn0*retval
   285 op greaterThan *tmp67 .START_POWER_REQ 0
   286 jump *label42 equal *tmp67 false
   287 set :fn0:val .START_POWER_REQ
   288 setaddr :fn0*retaddr *label44
   289 call *label0 :fn0*retval
   290 label *label44
-    * set *tmp69 :fn0*retval
-    * set :req *tmp69
+  291 set :req :fn0*retval
   292 print "Req "
   293 print :req
   294 print "kJ / "
 
   307 print "\n"
   308 sensor *tmp71 .NODE @powerNetStored
   309 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :fn8:stored *tmp73
+  310 op div :fn8:stored *tmp71 *tmp72
   311 op greaterThan *tmp74 :fn8:stored 0.98
   312 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   313 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   330 jump *label50 equal *tmp84 false
   331 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   332 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :fn8:needed *tmp88
+  333 op max :fn8:needed 1 *tmp87
   334 op add *tmp89 :fn8:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  335 op min .REACTORS_DESIRED 5 *tmp89
   336 jump *label51 always
   337 label *label50
   338 label *label51
 
   354 end
   355 label *label0
   356 op idiv *tmp93 :fn0:val 100
-    * op div *tmp94 *tmp93 10
-    * set :fn0*retval *tmp94
+  357 op div :fn0*retval *tmp93 10
   358 jump *label54 always
   359 set :fn0*retval null
   360 label *label54
 
   383 end
   384 label *label2
   385 op sub *tmp102 @tick :fn2:time
-    * op idiv *tmp103 *tmp102 60
-    * set :fn2:secs *tmp103
+  386 op idiv :fn2:secs *tmp102 60
   387 op greaterThan *tmp104 :fn2:secs 30
   388 sensor *tmp105 :fn2:reactor @enabled
   389 op equal *tmp106 *tmp105 false
 
   394 jump *label62 always
   395 label *label61
   396 label *label62
-    * op sub *tmp109 30 :fn2:secs
-    * set :fn2:time_left *tmp109
+  397 op sub :fn2:time_left 30 :fn2:secs
   398 op mul *tmp110 :fn2:time_left :fn2:time_left
   399 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :fn2:charge_req *tmp112
+  400 op floor :fn2:charge_req *tmp111
   401 set :fn2*retval :fn2:charge_req
   402 jump *label60 always
   403 set :fn2*retval null
 
   407 label *label3
   408 set .RET_T_STARTUP :fn3:t_startup
   409 op sub *tmp113 @tick :fn3:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :fn3:secs *tmp114
-    * sensor *tmp115 :fn3:reactor @blast-compound
-    * set :fn3:fuel *tmp115
+  410 op idiv :fn3:secs *tmp113 60
+  411 sensor :fn3:fuel :fn3:reactor @blast-compound
   412 set :fn3:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :fn3:fuel_stored *tmp116
-    * sensor *tmp117 :fn3:reactor @cryofluid
-    * set :fn3:cryo *tmp117
+  413 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  414 sensor :fn3:cryo :fn3:reactor @cryofluid
   415 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :fn3:charge *tmp119
+  416 op floor :fn3:charge *tmp118
   417 sensor *tmp120 .NODE @powerNetIn
   418 sensor *tmp121 .NODE @powerNetOut
   419 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :fn3:surplus *tmp123
+  420 op floor :fn3:surplus *tmp122
   421 op mul *tmp124 .AVG_SURPLUS 0.8
   422 op mul *tmp125 :fn3:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :fn3:reactor @enabled
-    * set :fn3:enabled *tmp127
+  423 op add .AVG_SURPLUS *tmp124 *tmp125
+  424 sensor :fn3:enabled :fn3:reactor @enabled
   425 print "#"
   426 print :fn3:reactor_num
   427 print " "
 
   490 set :fn3:supply_fuel false
   491 jump *label80 always
   492 label *label79
-    * op sub *tmp160 30 :fn3:secs
-    * set :fn3:time_left *tmp160
+  493 op sub :fn3:time_left 30 :fn3:secs
   494 print "Starting "
   495 print :fn3:time_left
   496 print " "
 
   512 set :fn3:supply_fuel false
   513 jump *label82 always
   514 label *label81
-    * op idiv *tmp167 :fn3:secs 6
-    * set :fn3:mins *tmp167
-    * op div *tmp168 :fn3:mins 10
-    * set :fn3:mins *tmp168
+  515 op idiv :fn3:mins :fn3:secs 6
+  516 op div :fn3:mins :fn3:mins 10
   517 print "RUN "
   518 print :fn3:mins
   519 print " "
 
   530 op sub *tmp169 :fn3:charge .START_POWER_REQ
   531 op sub *tmp170 *tmp169 .PWR_ABORT
   532 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :fn3:charge_units *tmp172
+  533 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
   534 op div *tmp173 :fn3:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :fn3:flow_units *tmp174
+  535 op max :fn3:flow_units -0.1 *tmp173
   536 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :fn3:cryo_req *tmp176
+  537 op add :fn3:cryo_req .CRYO_REQ *tmp175
   538 op lessThan *tmp177 .REACTORS_DESIRED :fn3:reactor_num
   539 jump *label83 equal *tmp177 false
   540 print "IDLE"
 
   547 jump *label85 equal *tmp180 false
   548 op mul *tmp182 :fn3:flow_units 1000
   549 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :fn3:flow *tmp184
+  550 op div :fn3:flow *tmp183 10
   551 op mul *tmp185 :fn3:charge_units 1000
   552 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :fn3:charge *tmp187
+  553 op div :fn3:charge *tmp186 10
   554 print "WAIT power. (%"
   555 print :fn3:charge
   556 print "J + %"
 
   603 sensor *tmp201 :fn3:reactor @enabled
   604 op notEqual *tmp202 :fn3:enabled *tmp201
   605 jump *label95 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  606 set .RET_T_STARTUP @tick
   607 jump *label96 always
   608 label *label95
   609 label *label96
 
   614 return :fn3*retaddr
   615 end
   616 label *label4
-    * radar enemy any any health :fn4:unit 1 *tmp205
-    * set :fn4:enemy_found *tmp205
+  617 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
   618 op notEqual *tmp206 :fn4:enemy_found null
   619 jump *label98 equal *tmp206 false
   620 control enabled projector1 true

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   217 label *label32
   218 jump *label30 always
   219 label *label29
-    * op equal *tmp46 :fn6:reactors_fueled false
-    * jump *label33 equal *tmp46 false
+  220 jump *label33 notEqual :fn6:reactors_fueled false
   221 set :fn6:limit .FUEL_LIMIT_LOW
   222 print "Fuel "
   223 print :fn6:fuel_stored
 
   279 call *label0 :fn0*retval
   280 label *label41
   281 set :charge :fn0*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label42 equal *tmp67 false
+  282 jump *label42 lessThanEq .START_POWER_REQ 0
   283 set :fn0:val .START_POWER_REQ
   284 setaddr :fn0*retaddr *label44
   285 call *label0 :fn0*retval
 
   309 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   310 op land *tmp77 *tmp74 *tmp76
   311 jump *label46 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label48 equal *tmp79 false
+  312 jump *label48 lessThanEq .REACTORS_DESIRED 2
   313 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   314 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   315 jump *label49 always
 
   333 label *label51
   334 label *label45
   335 label *label43
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label52 equal *tmp91 false
+  336 jump *label52 equal .REACTORS_DESIRED 5
   337 print "Require only "
   338 print .REACTORS_DESIRED
   339 print "/5 reactors."
 
   364 label *label57
   365 control config *tmp95 *tmp97
   366 set *tmp98 :fn1:uld_out
-    * op equal *tmp100 :fn1:fuel false
-    * jump *label58 equal *tmp100 false
+  367 jump *label58 notEqual :fn1:fuel false
   368 set *tmp101 .FUEL
   369 jump *label59 always
   370 label *label58
 
   428 jump *label65 always
   429 label *label64
   430 jump *label66 equal :fn3:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :fn3:reactor_num
-    * jump *label68 equal *tmp132 false
+  431 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   432 set *tmp134 :fn3:reactor
   433 control enabled *tmp134 false
   434 print "STOP unwanted"
 
   446 print "\n"
   447 jump *label71 always
   448 label *label70
-    * op lessThanEq *tmp143 :fn3:fuel 1
-    * jump *label72 equal *tmp143 false
+  449 jump *label72 greaterThan :fn3:fuel 1
   450 set *tmp145 :fn3:reactor
   451 control enabled *tmp145 false
   452 print "STOP fuel low"
   453 print "\n"
   454 jump *label73 always
   455 label *label72
-    * op lessThanEq *tmp147 :fn3:cryo .CRYO_ABORT
-    * jump *label74 equal *tmp147 false
+  456 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   457 set *tmp149 :fn3:reactor
   458 control enabled *tmp149 false
   459 print "STOP out of cryo"
   460 print "\n"
   461 jump *label75 always
   462 label *label74
-    * op lessThan *tmp151 :fn3:secs 30
-    * jump *label76 equal *tmp151 false
+  463 jump *label76 greaterThanEq :fn3:secs 30
   464 set :fn2:reactor :fn3:reactor
   465 set :fn2:time :fn3:t_startup
   466 setaddr :fn2*retaddr *label78
 
   524 op max :fn3:flow_units -0.1 *tmp173
   525 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
   526 op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :fn3:reactor_num
-    * jump *label83 equal *tmp177 false
+  527 jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   528 print "IDLE"
   529 print "\n"
   530 set :fn3:supply_fuel false
   531 jump *label84 always
   532 label *label83
   533 op add *tmp179 :fn3:flow_units :fn3:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label85 equal *tmp180 false
+  534 jump *label85 greaterThanEq *tmp179 1
   535 op mul *tmp182 :fn3:flow_units 1000
   536 op floor *tmp183 *tmp182
   537 op div :fn3:flow *tmp183 10
 
   551 op land *tmp189 :fn3:fuel_on *tmp188
   552 jump *label87 equal *tmp189 false
   553 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label89 equal *tmp192 false
+  554 jump *label89 lessThanEq *tmp191 .FUEL_REQ
   555 print "WAIT fuel"
   556 print "\n"
   557 jump *label90 always
 
   562 jump *label88 always
   563 label *label87
   564 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * op lessThan *tmp195 :fn3:fuel_stored *tmp194
-    * jump *label91 equal *tmp195 false
+  565 jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
   566 print "WAIT buffer fuel"
   567 print "\n"
   568 jump *label92 always
   569 label *label91
-    * op lessThan *tmp197 :fn3:cryo :fn3:cryo_req
-    * jump *label93 equal *tmp197 false
+  570 jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
   571 print "WAIT cryo"
   572 print "\n"
   573 jump *label94 always
 
   585 label *label67
   586 label *label65
   587 sensor *tmp201 :fn3:reactor @enabled
-    * op notEqual *tmp202 :fn3:enabled *tmp201
-    * jump *label95 equal *tmp202 false
+  588 jump *label95 equal :fn3:enabled *tmp201
   589 set .RET_T_STARTUP @tick
   590 jump *label96 always
   591 label *label95
 
   598 end
   599 label *label4
   600 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
-    * op notEqual *tmp206 :fn4:enemy_found null
-    * jump *label98 equal *tmp206 false
+  601 jump *label98 equal :fn4:enemy_found null
   602 control enabled projector1 true
   603 control enabled projector2 true
   604 set *tmp210 .ULD_IN_1

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   311 jump *label48 lessThanEq .REACTORS_DESIRED 2
   312 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   313 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label49 always
   314 label *label48
   315 label *label49
-    * jump *label47 always
   316 label *label46
   317 label *label47
   318 op lessThan *tmp81 :fn8:stored 0.8
 
   325 op max :fn8:needed 1 *tmp87
   326 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   327 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label51 always
   328 label *label50
   329 label *label51
   330 label *label45
 
   334 print .REACTORS_DESIRED
   335 print "/5 reactors."
   336 print "\n"
-    * jump *label53 always
   337 label *label52
   338 label *label53
   339 printflush message1
 
   379 jump *label61 equal *tmp107 false
   380 set :fn2*retval 0
   381 jump *label60 always
-    * jump *label62 always
   382 label *label61
   383 label *label62
   384 op sub :fn2:time_left 30 :fn2:secs
 
   581 sensor *tmp201 :fn3:reactor @enabled
   582 jump *label95 equal :fn3:enabled *tmp201
   583 set .RET_T_STARTUP @tick
-    * jump *label96 always
   584 label *label95
   585 label *label96
   586 set :fn3*retval :fn3:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   383 label *label62
   384 op sub :fn2:time_left 30 :fn2:secs
   385 op mul *tmp110 :fn2:time_left :fn2:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :fn2:charge_req *tmp111
+  386 op idiv :fn2:charge_req *tmp110 0.04
   387 set :fn2*retval :fn2:charge_req
   388 jump *label60 always
   389 set :fn2*retval null
 
   525 label *label83
   526 op add *tmp179 :fn3:flow_units :fn3:charge_units
   527 jump *label85 greaterThanEq *tmp179 1
-    * op mul *tmp182 :fn3:flow_units 1000
-    * op floor *tmp183 *tmp182
+  528 op idiv *tmp183 :fn3:flow_units 0.001
   529 op div :fn3:flow *tmp183 10
-    * op mul *tmp185 :fn3:charge_units 1000
-    * op floor *tmp186 *tmp185
+  530 op idiv *tmp186 :fn3:charge_units 0.001
   531 op div :fn3:charge *tmp186 10
   532 print "WAIT power. (%"
   533 print :fn3:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-2 instructions):
 
   383 label *label62
   384 op sub :fn2:time_left 30 :fn2:secs
   385 op mul *tmp110 :fn2:time_left :fn2:time_left
-    * op idiv :fn2:charge_req *tmp110 0.04
-    * set :fn2*retval :fn2:charge_req
+  386 op idiv :fn2*retval *tmp110 0.04
   387 jump *label60 always
   388 set :fn2*retval null
   389 label *label60
 
   611 control enabled reactor5 false
   612 set :fn4*retval true
   613 jump *label97 always
-    * set *tmp207 null
+  614 set :fn4*retval null
   615 jump *label99 always
   616 label *label98
   617 control enabled projector1 false
 
   620 jump *label97 always
   621 set *tmp207 null
   622 label *label99
-    * set :fn4*retval *tmp207
   623 label *label97
   624 return :fn4*retaddr
   625 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :fn4:unit .TOWER
+   55 set :fn4:unit cyclone1
    56 setaddr :fn4*retaddr *label10
    57 call *label4 :fn4*retval
    58 label *label10
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :fn4*retval *tmp8
    75 set :fn2:reactor reactor1
    76 set :fn2:time :t_startup1
    77 setaddr :fn2*retaddr *label14
 
    84 call *label2 :fn2*retval
    85 label *label15
    86 set *tmp15 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   87 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    88 set :fn2:reactor reactor3
    89 set :fn2:time :t_startup3
    90 setaddr :fn2*retaddr *label16
    91 call *label2 :fn2*retval
    92 label *label16
    93 set *tmp16 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   94 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    95 set :fn2:reactor reactor4
    96 set :fn2:time :t_startup4
    97 setaddr :fn2*retaddr *label17
    98 call *label2 :fn2*retval
    99 label *label17
   100 set *tmp17 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  101 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   102 set :fn2:reactor reactor5
   103 set :fn2:time :t_startup5
   104 setaddr :fn2*retaddr *label18
   105 call *label2 :fn2*retval
   106 label *label18
   107 set *tmp18 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+  108 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   109 set :fn3:reactor reactor1
   110 set :fn3:reactor_num 1
   111 set :fn3:emerg_shutdown :emerg_shutdown
 
   116 label *label19
   117 set :fuel_1 :fn3*retval
   118 set :t_startup1 .RET_T_STARTUP
-    * set :fn1:fuel :fuel_1
-    * set :fn1:uld_in .ULD_IN_1
-    * set :fn1:uld_out .ULD_OUT_1
+  119 set :fn1:fuel :fn3*retval
+  120 set :fn1:uld_in unloader1
+  121 set :fn1:uld_out unloader2
   122 setaddr :fn1*retaddr *label20
   123 call *label1 :fn1*retval
   124 label *label20
 
   132 label *label21
   133 set :fuel_2 :fn3*retval
   134 set :t_startup2 .RET_T_STARTUP
-    * set :fn1:fuel :fuel_2
-    * set :fn1:uld_in .ULD_IN_2
-    * set :fn1:uld_out .ULD_OUT_2
+  135 set :fn1:fuel :fn3*retval
+  136 set :fn1:uld_in unloader3
+  137 set :fn1:uld_out unloader4
   138 setaddr :fn1*retaddr *label22
   139 call *label1 :fn1*retval
   140 label *label22
-    * set :fn4:unit .TOWER
+  141 set :fn4:unit cyclone1
   142 setaddr :fn4*retaddr *label23
   143 call *label4 :fn4*retval
   144 label *label23
   145 set *tmp23 :fn4*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  146 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   147 set :fn3:reactor reactor3
   148 set :fn3:reactor_num 3
   149 set :fn3:emerg_shutdown :emerg_shutdown
 
   175 set :fuel_5 :fn3*retval
   176 set :t_startup5 .RET_T_STARTUP
   177 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  178 op or :fuel_many *tmp27 :fn3*retval
   179 set :fn1:fuel :fuel_many
-    * set :fn1:uld_in .ULD_IN_MANY
-    * set :fn1:uld_out .ULD_OUT_MANY
+  180 set :fn1:uld_in unloader5
+  181 set :fn1:uld_out unloader6
   182 setaddr :fn1*retaddr *label27
   183 call *label1 :fn1*retval
   184 label *label27
   185 op or *tmp30 :fuel_1 :fuel_2
   186 op or :fn6:reactors_fueled *tmp30 :fuel_many
   187 set :fn6:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  188 sensor *tmp33 node1 @powerNetStored
   189 op floor :fn6:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  190 sensor *tmp35 node1 @powerNetIn
+  191 sensor *tmp36 node1 @powerNetOut
   192 op sub *tmp37 *tmp35 *tmp36
   193 op floor :fn6:surplus *tmp37
-    * sensor :fn6:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :fn6:charge .PWR_ABORT
-    * op lessThan *tmp41 :fn6:surplus .FLOW_ABORT
+  194 sensor :fn6:fuel_stored vault1 @blast-compound
+  195 op lessThan *tmp40 :fn6:charge 5000
+  196 op lessThan *tmp41 :fn6:surplus -500
   197 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :fn6:emerg_shutdown
+  198 op or *tmp43 *tmp42 :emerg_shutdown
   199 jump *label29 equal *tmp43 false
   200 set :fn6:limit 0
   201 print "Central Fuel at "
   202 print :fn6:fuel_stored
   203 print " "
   204 print "/ "
-    * print :fn6:limit
+  205 print 0
   206 print " "
   207 print "- "
-    * jump *label31 equal :fn6:emerg_shutdown false
+  208 jump *label31 equal :emerg_shutdown false
   209 print " Enemies detected."
   210 print "\n"
   211 jump *label32 always
 
   216 jump *label30 always
   217 label *label29
   218 jump *label33 notEqual :fn6:reactors_fueled false
-    * set :fn6:limit .FUEL_LIMIT_LOW
+  219 set :fn6:limit 150
   220 print "Fuel "
   221 print :fn6:fuel_stored
   222 print " "
   223 print "/ "
-    * print :fn6:limit
+  224 print .FUEL_LIMIT_LOW
   225 print " "
   226 print "(due to emergency)"
   227 print "\n"
   228 jump *label34 always
   229 label *label33
-    * set :fn6:limit .FUEL_LIMIT
+  230 set :fn6:limit 800
   231 print "Fuel "
   232 print :fn6:fuel_stored
   233 print " "
   234 print "/ "
-    * print :fn6:limit
+  235 print .FUEL_LIMIT
   236 print "\"
   237 print "n"
   238 label *label34
   239 label *label30
   240 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   241 jump *label28 always
-    * set *tmp32 null
   242 label *label28
   243 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  244 set *tmp49 unloader7
+  245 jump *label35 equal *tmp32 false
+  246 set *tmp51 @pyratite
   247 jump *label36 always
   248 label *label35
-    * set *tmp51 .FUEL_OFF
+  249 set *tmp51 @scrap
   250 label *label36
-    * control config *tmp49 *tmp51
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  251 control config .ULD_MIXER *tmp51
+  252 sensor *tmp53 node1 @powerNetStored
+  253 sensor *tmp54 node1 @powerNetCapacity
   254 op div :fn7:stored_pc *tmp53 *tmp54
   255 op greaterThan *tmp56 :fn7:stored_pc 0.9
   256 op lessThan *tmp57 .START_POWER_REQ 10
 
   271 call *label0 :fn0*retval
   272 label *label40
   273 set :surplus :fn0*retval
-    * sensor :fn0:val .NODE @powerNetStored
+  274 sensor :fn0:val node1 @powerNetStored
   275 setaddr :fn0*retaddr *label41
   276 call *label0 :fn0*retval
   277 label *label41
 
   283 label *label44
   284 set :req :fn0*retval
   285 print "Req "
-    * print :req
+  286 print :fn0*retval
   287 print "kJ / "
   288 print :charge
   289 print "kJ. "
 
   295 print "Power "
   296 print :surplus
   297 print "kW, "
-    * print :charge
+  298 print :fn0*retval
   299 print "kJ"
   300 print "\n"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  301 sensor *tmp71 node1 @powerNetStored
+  302 sensor *tmp72 node1 @powerNetCapacity
   303 op div :fn8:stored *tmp71 *tmp72
   304 op greaterThan *tmp74 :fn8:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  305 op add *tmp75 6500 10000
+  306 op greaterThan *tmp76 .AVG_SURPLUS 16500
   307 op land *tmp77 *tmp74 *tmp76
   308 jump *label46 equal *tmp77 false
   309 jump *label48 lessThanEq .REACTORS_DESIRED 2
   310 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  311 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   312 label *label48
   313 label *label49
   314 label *label46
   315 label *label47
   316 op lessThan *tmp81 :fn8:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  317 op mul *tmp82 10000 0.8
+  318 op lessThan *tmp83 .AVG_SURPLUS 8000
   319 op land *tmp84 *tmp81 *tmp83
   320 jump *label50 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  321 op sub *tmp86 .AVG_SURPLUS 10000
+  322 op idiv *tmp87 *tmp86 6500
   323 op max :fn8:needed 1 *tmp87
   324 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   325 op min .REACTORS_DESIRED 5 *tmp89
 
   343 op idiv *tmp93 :fn0:val 100
   344 op div :fn0*retval *tmp93 10
   345 jump *label54 always
-    * set :fn0*retval null
   346 label *label54
   347 return :fn0*retaddr
   348 end
 
   354 label *label56
   355 set *tmp97 .FUEL_OFF
   356 label *label57
-    * control config *tmp95 *tmp97
+  357 control config :fn1:uld_in *tmp97
   358 set *tmp98 :fn1:uld_out
   359 jump *label58 notEqual :fn1:fuel false
   360 set *tmp101 .FUEL
 
   362 label *label58
   363 set *tmp101 .FUEL_OFF
   364 label *label59
-    * control config *tmp98 *tmp101
+  365 control config :fn1:uld_out *tmp101
   366 label *label55
   367 return :fn1*retaddr
   368 end
 
   382 op mul *tmp110 :fn2:time_left :fn2:time_left
   383 op idiv :fn2*retval *tmp110 0.04
   384 jump *label60 always
-    * set :fn2*retval null
   385 label *label60
   386 return :fn2*retaddr
   387 end
 
   409 print "- "
   410 jump *label64 equal :fn3:emerg_shutdown false
   411 set *tmp129 :fn3:reactor
-    * control enabled *tmp129 false
+  412 control enabled :fn3:reactor false
   413 print "emergency mode"
   414 print "\n"
   415 set :fn3:supply_fuel false
 
   418 jump *label66 equal :fn3:enabled false
   419 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   420 set *tmp134 :fn3:reactor
-    * control enabled *tmp134 false
+  421 control enabled :fn3:reactor false
   422 print "STOP unwanted"
   423 print "\n"
   424 jump *label69 always
 
   429 op land *tmp139 *tmp136 *tmp138
   430 jump *label70 equal *tmp139 false
   431 set *tmp141 :fn3:reactor
-    * control enabled *tmp141 false
+  432 control enabled :fn3:reactor false
   433 print "STOP system fuel low"
   434 print "\n"
   435 jump *label71 always
   436 label *label70
   437 jump *label72 greaterThan :fn3:fuel 1
   438 set *tmp145 :fn3:reactor
-    * control enabled *tmp145 false
+  439 control enabled :fn3:reactor false
   440 print "STOP fuel low"
   441 print "\n"
   442 jump *label73 always
   443 label *label72
   444 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   445 set *tmp149 :fn3:reactor
-    * control enabled *tmp149 false
+  446 control enabled :fn3:reactor false
   447 print "STOP out of cryo"
   448 print "\n"
   449 jump *label75 always
 
   455 call *label2 :fn2*retval
   456 label *label78
   457 set :fn3:charge_req :fn2*retval
-    * op sub *tmp153 :fn3:charge :fn3:charge_req
+  458 op sub *tmp153 :fn3:charge :fn2*retval
   459 op lessThan *tmp154 *tmp153 .PWR_ABORT
   460 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
   461 op land *tmp156 *tmp154 *tmp155
   462 jump *label79 equal *tmp156 false
   463 set *tmp158 :fn3:reactor
-    * control enabled *tmp158 false
+  464 control enabled :fn3:reactor false
   465 print "START FAIL battery"
   466 print "\n"
   467 set :fn3:supply_fuel false
 
   472 print :fn3:time_left
   473 print " "
   474 print "secs, req "
-    * print :fn3:charge_req
+  475 print :fn2*retval
   476 print "J"
   477 print "\n"
   478 label *label80
 
   483 op land *tmp163 *tmp161 *tmp162
   484 jump *label81 equal *tmp163 false
   485 set *tmp165 :fn3:reactor
-    * control enabled *tmp165 false
+  486 control enabled :fn3:reactor false
   487 print "ABANDON - battery crit"
   488 print "\n"
   489 set :fn3:supply_fuel false
 
   562 print "\n"
   563 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   564 set *tmp199 :fn3:reactor
-    * control enabled *tmp199 true
+  565 control enabled :fn3:reactor true
   566 label *label94
   567 label *label92
   568 label *label88
 
   577 label *label96
   578 set :fn3*retval :fn3:supply_fuel
   579 jump *label63 always
-    * set :fn3*retval null
   580 label *label63
   581 return :fn3*retaddr
   582 end
 
   586 control enabled projector1 true
   587 control enabled projector2 true
   588 set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
+  589 control config .ULD_IN_1 .FUEL_OFF
   590 set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
+  591 control config .ULD_OUT_1 .FUEL
   592 set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
+  593 control config .ULD_IN_2 .FUEL_OFF
   594 set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
+  595 control config .ULD_OUT_2 .FUEL
   596 set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
+  597 control config .ULD_IN_MANY .FUEL_OFF
   598 set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
+  599 control config .ULD_OUT_MANY .FUEL
   600 set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  601 control config .ULD_MIXER .FUEL_OFF
   602 control enabled reactor1 false
   603 control enabled reactor2 false
   604 control enabled reactor3 false
 
   606 control enabled reactor5 false
   607 set :fn4*retval true
   608 jump *label97 always
-    * set :fn4*retval null
   609 jump *label99 always
   610 label *label98
   611 control enabled projector1 false
   612 control enabled projector2 false
   613 set :fn4*retval false
   614 jump *label97 always
-    * set *tmp207 null
   615 label *label99
   616 label *label97
   617 return :fn4*retaddr

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-1 instructions):
 
    32 label *label5
    33 set *tmp5 @tick
    34 label *label6
-    * set :start_time *tmp5
+   35 set .RET_T_STARTUP *tmp5
    36 set :t_startup1 *tmp5
    37 set :t_startup2 *tmp5
    38 set :t_startup3 *tmp5
    39 set :t_startup4 *tmp5
    40 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
    41 set .REACTORS_DESIRED 5
    42 set .AVG_SURPLUS 500
    43 label *label7

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 4 (-34 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    45 set .ULD_IN_MANY unloader5
    46 set .ULD_OUT_MANY unloader6
    47 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    48 set .CONTAINER vault1
    49 set .NODE node1
    50 set :fn4:unit cyclone1
    51 setaddr :fn4*retaddr *label10
    52 call *label4 :fn4*retval
    53 label *label10
-    * set :emerg_shutdown :fn4*retval
    54 op notEqual *tmp9 switch1 null
    55 sensor *tmp10 switch1 @enabled
    56 op equal *tmp11 *tmp10 false
 
    77 setaddr :fn2*retaddr *label15
    78 call *label2 :fn2*retval
    79 label *label15
-    * set *tmp15 :fn2*retval
    80 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    81 set :fn2:reactor reactor3
    82 set :fn2:time :t_startup3
    83 setaddr :fn2*retaddr *label16
    84 call *label2 :fn2*retval
    85 label *label16
-    * set *tmp16 :fn2*retval
    86 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    87 set :fn2:reactor reactor4
    88 set :fn2:time :t_startup4
    89 setaddr :fn2*retaddr *label17
    90 call *label2 :fn2*retval
    91 label *label17
-    * set *tmp17 :fn2*retval
    92 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    93 set :fn2:reactor reactor5
    94 set :fn2:time :t_startup5
    95 setaddr :fn2*retaddr *label18
    96 call *label2 :fn2*retval
    97 label *label18
-    * set *tmp18 :fn2*retval
    98 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    99 set :fn3:reactor reactor1
   100 set :fn3:reactor_num 1
 
   132 setaddr :fn4*retaddr *label23
   133 call *label4 :fn4*retval
   134 label *label23
-    * set *tmp23 :fn4*retval
   135 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   136 set :fn3:reactor reactor3
   137 set :fn3:reactor_num 3
 
   173 label *label27
   174 op or *tmp30 :fuel_1 :fuel_2
   175 op or :fn6:reactors_fueled *tmp30 :fuel_many
-    * set :fn6:emerg_shutdown :emerg_shutdown
   176 sensor *tmp33 node1 @powerNetStored
   177 op floor :fn6:charge *tmp33
   178 sensor *tmp35 node1 @powerNetIn
 
   209 print :fn6:fuel_stored
   210 print " "
   211 print "/ "
-    * print .FUEL_LIMIT_LOW
+  212 print 150
   213 print " "
   214 print "(due to emergency)"
   215 print "\n"
 
   220 print :fn6:fuel_stored
   221 print " "
   222 print "/ "
-    * print .FUEL_LIMIT
+  223 print 800
   224 print "\"
   225 print "n"
   226 label *label34
 
   228 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   229 jump *label28 always
   230 label *label28
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   231 jump *label35 equal *tmp32 false
   232 set *tmp51 @pyratite
   233 jump *label36 always
   234 label *label35
   235 set *tmp51 @scrap
   236 label *label36
-    * control config .ULD_MIXER *tmp51
+  237 control config unloader7 *tmp51
   238 sensor *tmp53 node1 @powerNetStored
   239 sensor *tmp54 node1 @powerNetCapacity
   240 op div :fn7:stored_pc *tmp53 *tmp54
 
   267 setaddr :fn0*retaddr *label44
   268 call *label0 :fn0*retval
   269 label *label44
-    * set :req :fn0*retval
   270 print "Req "
   271 print :fn0*retval
   272 print "kJ / "
 
   287 sensor *tmp72 node1 @powerNetCapacity
   288 op div :fn8:stored *tmp71 *tmp72
   289 op greaterThan *tmp74 :fn8:stored 0.98
-    * op add *tmp75 6500 10000
   290 op greaterThan *tmp76 .AVG_SURPLUS 16500
   291 op land *tmp77 *tmp74 *tmp76
   292 jump *label46 equal *tmp77 false
 
   298 label *label46
   299 label *label47
   300 op lessThan *tmp81 :fn8:stored 0.8
-    * op mul *tmp82 10000 0.8
   301 op lessThan *tmp83 .AVG_SURPLUS 8000
   302 op land *tmp84 *tmp81 *tmp83
   303 jump *label50 equal *tmp84 false
 
   330 return :fn0*retaddr
   331 end
   332 label *label1
-    * set *tmp95 :fn1:uld_in
   333 jump *label56 equal :fn1:fuel false
   334 set *tmp97 .FUEL
   335 jump *label57 always
 
   337 set *tmp97 .FUEL_OFF
   338 label *label57
   339 control config :fn1:uld_in *tmp97
-    * set *tmp98 :fn1:uld_out
   340 jump *label58 notEqual :fn1:fuel false
   341 set *tmp101 .FUEL
   342 jump *label59 always
 
   389 print " "
   390 print "- "
   391 jump *label64 equal :fn3:emerg_shutdown false
-    * set *tmp129 :fn3:reactor
   392 control enabled :fn3:reactor false
   393 print "emergency mode"
   394 print "\n"
 
   397 label *label64
   398 jump *label66 equal :fn3:enabled false
   399 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * set *tmp134 :fn3:reactor
   400 control enabled :fn3:reactor false
   401 print "STOP unwanted"
   402 print "\n"
 
   407 op lessThan *tmp138 :fn3:fuel_stored *tmp137
   408 op land *tmp139 *tmp136 *tmp138
   409 jump *label70 equal *tmp139 false
-    * set *tmp141 :fn3:reactor
   410 control enabled :fn3:reactor false
   411 print "STOP system fuel low"
   412 print "\n"
   413 jump *label71 always
   414 label *label70
   415 jump *label72 greaterThan :fn3:fuel 1
-    * set *tmp145 :fn3:reactor
   416 control enabled :fn3:reactor false
   417 print "STOP fuel low"
   418 print "\n"
   419 jump *label73 always
   420 label *label72
   421 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
-    * set *tmp149 :fn3:reactor
   422 control enabled :fn3:reactor false
   423 print "STOP out of cryo"
   424 print "\n"
 
   430 setaddr :fn2*retaddr *label78
   431 call *label2 :fn2*retval
   432 label *label78
-    * set :fn3:charge_req :fn2*retval
   433 op sub *tmp153 :fn3:charge :fn2*retval
   434 op lessThan *tmp154 *tmp153 .PWR_ABORT
   435 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
   436 op land *tmp156 *tmp154 *tmp155
   437 jump *label79 equal *tmp156 false
-    * set *tmp158 :fn3:reactor
   438 control enabled :fn3:reactor false
   439 print "START FAIL battery"
   440 print "\n"
 
   456 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
   457 op land *tmp163 *tmp161 *tmp162
   458 jump *label81 equal *tmp163 false
-    * set *tmp165 :fn3:reactor
   459 control enabled :fn3:reactor false
   460 print "ABANDON - battery crit"
   461 print "\n"
 
   534 print "STARTUP"
   535 print "\n"
   536 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :fn3:reactor
   537 control enabled :fn3:reactor true
   538 label *label94
   539 label *label92
 
   557 jump *label98 equal :fn4:enemy_found null
   558 control enabled projector1 true
   559 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
   560 control config .ULD_IN_1 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
   561 control config .ULD_OUT_1 .FUEL
-    * set *tmp214 .ULD_IN_2
   562 control config .ULD_IN_2 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
   563 control config .ULD_OUT_2 .FUEL
-    * set *tmp218 .ULD_IN_MANY
   564 control config .ULD_IN_MANY .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
   565 control config .ULD_OUT_MANY .FUEL
-    * set *tmp222 .ULD_MIXER
   566 control config .ULD_MIXER .FUEL_OFF
   567 control enabled reactor1 false
   568 control enabled reactor2 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 5 (-2 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   227 jump *label28 always
   228 label *label28
   229 jump *label35 equal *tmp32 false
-    * set *tmp51 @pyratite
+  230 control config unloader7 @pyratite
   231 jump *label36 always
   232 label *label35
-    * set *tmp51 @scrap
+  233 control config unloader7 @scrap
   234 label *label36
-    * control config unloader7 *tmp51
   235 sensor *tmp53 node1 @powerNetStored
   236 sensor *tmp54 node1 @powerNetCapacity
   237 op div :fn7:stored_pc *tmp53 *tmp54
 
   328 end
   329 label *label1
   330 jump *label56 equal :fn1:fuel false
-    * set *tmp97 .FUEL
+  331 control config :fn1:uld_in .FUEL
   332 jump *label57 always
   333 label *label56
-    * set *tmp97 .FUEL_OFF
+  334 control config :fn1:uld_in .FUEL_OFF
   335 label *label57
-    * control config :fn1:uld_in *tmp97
   336 jump *label58 notEqual :fn1:fuel false
-    * set *tmp101 .FUEL
+  337 control config :fn1:uld_out .FUEL
   338 jump *label59 always
   339 label *label58
-    * set *tmp101 .FUEL_OFF
+  340 control config :fn1:uld_out .FUEL_OFF
   341 label *label59
-    * control config :fn1:uld_out *tmp101
   342 label *label55
   343 return :fn1*retaddr
   344 end

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   250 label *label39
   251 label *label37
   252 set :fn0:val .AVG_SURPLUS
-    * setaddr :fn0*retaddr *label40
-    * call *label0 :fn0*retval
-    * label *label40
+  253 label *label100
+  254 op idiv *tmp93 :fn0:val 100
+  255 op div :fn0*retval *tmp93 10
+  256 jump *label101 always
+  257 label *label101
   258 set :surplus :fn0*retval
   259 sensor :fn0:val node1 @powerNetStored
-    * setaddr :fn0*retaddr *label41
-    * call *label0 :fn0*retval
-    * label *label41
+  260 label *label102
+  261 op idiv *tmp93 :fn0:val 100
+  262 op div :fn0*retval *tmp93 10
+  263 jump *label103 always
+  264 label *label103
   265 set :charge :fn0*retval
   266 jump *label42 lessThanEq .START_POWER_REQ 0
   267 set :fn0:val .START_POWER_REQ
-    * setaddr :fn0*retaddr *label44
-    * call *label0 :fn0*retval
-    * label *label44
+  268 label *label104
+  269 op idiv *tmp93 :fn0:val 100
+  270 op div :fn0*retval *tmp93 10
+  271 jump *label105 always
+  272 label *label105
   273 print "Req "
   274 print :fn0*retval
   275 print "kJ / "
 
   325 jump *label7 always
   326 label *label9
   327 end
-    * label *label0
-    * op idiv *tmp93 :fn0:val 100
-    * op div :fn0*retval *tmp93 10
-    * jump *label54 always
-    * label *label54
-    * return :fn0*retaddr
-    * end
   328 label *label1
   329 jump *label56 equal :fn1:fuel false
   330 control config :fn1:uld_in .FUEL

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   251 label *label37
   252 set :fn0:val .AVG_SURPLUS
   253 label *label100
-    * op idiv *tmp93 :fn0:val 100
+  254 op idiv *tmp93 .AVG_SURPLUS 100
   255 op div :fn0*retval *tmp93 10
   256 jump *label101 always
   257 label *label101
 
   266 jump *label42 lessThanEq .START_POWER_REQ 0
   267 set :fn0:val .START_POWER_REQ
   268 label *label104
-    * op idiv *tmp93 :fn0:val 100
+  269 op idiv *tmp93 .START_POWER_REQ 100
   270 op div :fn0*retval *tmp93 10
   271 jump *label105 always
   272 label *label105

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   249 control enabled generator2 true
   250 label *label39
   251 label *label37
-    * set :fn0:val .AVG_SURPLUS
   252 label *label100
   253 op idiv *tmp93 .AVG_SURPLUS 100
   254 op div :fn0*retval *tmp93 10
 
   263 label *label103
   264 set :charge :fn0*retval
   265 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :fn0:val .START_POWER_REQ
   266 label *label104
   267 op idiv *tmp93 .START_POWER_REQ 100
   268 op div :fn0*retval *tmp93 10

Modifications by Inline function 'update_fuel' defined at line 121:1 (+8 instructions):
 
   107 set :fn1:fuel :fn3*retval
   108 set :fn1:uld_in unloader1
   109 set :fn1:uld_out unloader2
-    * setaddr :fn1*retaddr *label20
-    * call *label1 :fn1*retval
-    * label *label20
+  110 label *label106
+  111 jump *label107 equal :fn1:fuel false
+  112 control config :fn1:uld_in .FUEL
+  113 jump *label108 always
+  114 label *label107
+  115 control config :fn1:uld_in .FUEL_OFF
+  116 label *label108
+  117 jump *label109 notEqual :fn1:fuel false
+  118 control config :fn1:uld_out .FUEL
+  119 jump *label110 always
+  120 label *label109
+  121 control config :fn1:uld_out .FUEL_OFF
+  122 label *label110
+  123 label *label111
   124 set :fn3:reactor reactor2
   125 set :fn3:reactor_num 2
   126 set :fn3:emerg_shutdown :emerg_shutdown
 
   134 set :fn1:fuel :fn3*retval
   135 set :fn1:uld_in unloader3
   136 set :fn1:uld_out unloader4
-    * setaddr :fn1*retaddr *label22
-    * call *label1 :fn1*retval
-    * label *label22
+  137 label *label112
+  138 jump *label113 equal :fn1:fuel false
+  139 control config :fn1:uld_in .FUEL
+  140 jump *label114 always
+  141 label *label113
+  142 control config :fn1:uld_in .FUEL_OFF
+  143 label *label114
+  144 jump *label115 notEqual :fn1:fuel false
+  145 control config :fn1:uld_out .FUEL
+  146 jump *label116 always
+  147 label *label115
+  148 control config :fn1:uld_out .FUEL_OFF
+  149 label *label116
+  150 label *label117
   151 set :fn4:unit cyclone1
   152 setaddr :fn4*retaddr *label23
   153 call *label4 :fn4*retval
 
   188 set :fn1:fuel :fuel_many
   189 set :fn1:uld_in unloader5
   190 set :fn1:uld_out unloader6
-    * setaddr :fn1*retaddr *label27
-    * call *label1 :fn1*retval
-    * label *label27
+  191 label *label118
+  192 jump *label119 equal :fn1:fuel false
+  193 control config :fn1:uld_in .FUEL
+  194 jump *label120 always
+  195 label *label119
+  196 control config :fn1:uld_in .FUEL_OFF
+  197 label *label120
+  198 jump *label121 notEqual :fn1:fuel false
+  199 control config :fn1:uld_out .FUEL
+  200 jump *label122 always
+  201 label *label121
+  202 control config :fn1:uld_out .FUEL_OFF
+  203 label *label122
+  204 label *label123
   205 op or *tmp30 :fuel_1 :fuel_2
   206 op or :fn6:reactors_fueled *tmp30 :fuel_many
   207 sensor *tmp33 node1 @powerNetStored
 
   356 jump *label7 always
   357 label *label9
   358 end
-    * label *label1
-    * jump *label56 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
-    * jump *label57 always
-    * label *label56
-    * control config :fn1:uld_in .FUEL_OFF
-    * label *label57
-    * jump *label58 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
-    * jump *label59 always
-    * label *label58
-    * control config :fn1:uld_out .FUEL_OFF
-    * label *label59
-    * label *label55
-    * return :fn1*retaddr
-    * end
   359 label *label2
   360 op sub *tmp102 @tick :fn2:time
   361 op idiv :fn2:secs *tmp102 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   108 set :fn1:uld_in unloader1
   109 set :fn1:uld_out unloader2
   110 label *label106
-    * jump *label107 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  111 jump *label107 equal :fn3*retval false
+  112 control config unloader1 @blast-compound
   113 jump *label108 always
   114 label *label107
-    * control config :fn1:uld_in .FUEL_OFF
+  115 control config unloader1 @scrap
   116 label *label108
-    * jump *label109 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  117 jump *label109 notEqual :fn3*retval false
+  118 control config unloader2 @blast-compound
   119 jump *label110 always
   120 label *label109
-    * control config :fn1:uld_out .FUEL_OFF
+  121 control config unloader2 @scrap
   122 label *label110
   123 label *label111
   124 set :fn3:reactor reactor2
 
   135 set :fn1:uld_in unloader3
   136 set :fn1:uld_out unloader4
   137 label *label112
-    * jump *label113 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  138 jump *label113 equal :fn3*retval false
+  139 control config unloader3 @blast-compound
   140 jump *label114 always
   141 label *label113
-    * control config :fn1:uld_in .FUEL_OFF
+  142 control config unloader3 @scrap
   143 label *label114
-    * jump *label115 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  144 jump *label115 notEqual :fn3*retval false
+  145 control config unloader4 @blast-compound
   146 jump *label116 always
   147 label *label115
-    * control config :fn1:uld_out .FUEL_OFF
+  148 control config unloader4 @scrap
   149 label *label116
   150 label *label117
   151 set :fn4:unit cyclone1
 
   189 set :fn1:uld_in unloader5
   190 set :fn1:uld_out unloader6
   191 label *label118
-    * jump *label119 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  192 jump *label119 equal :fuel_many false
+  193 control config unloader5 @blast-compound
   194 jump *label120 always
   195 label *label119
-    * control config :fn1:uld_in .FUEL_OFF
+  196 control config unloader5 @scrap
   197 label *label120
-    * jump *label121 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  198 jump *label121 notEqual :fuel_many false
+  199 control config unloader6 @blast-compound
   200 jump *label122 always
   201 label *label121
-    * control config :fn1:uld_out .FUEL_OFF
+  202 control config unloader6 @scrap
   203 label *label122
   204 label *label123
   205 op or *tmp30 :fuel_1 :fuel_2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   104 label *label19
   105 set :fuel_1 :fn3*retval
   106 set :t_startup1 .RET_T_STARTUP
-    * set :fn1:fuel :fn3*retval
-    * set :fn1:uld_in unloader1
-    * set :fn1:uld_out unloader2
   107 label *label106
   108 jump *label107 equal :fn3*retval false
   109 control config unloader1 @blast-compound
 
   128 label *label21
   129 set :fuel_2 :fn3*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :fn1:fuel :fn3*retval
-    * set :fn1:uld_in unloader3
-    * set :fn1:uld_out unloader4
   131 label *label112
   132 jump *label113 equal :fn3*retval false
   133 control config unloader3 @blast-compound
 
   179 set :t_startup5 .RET_T_STARTUP
   180 op or *tmp27 :fuel_3 :fuel_4
   181 op or :fuel_many *tmp27 :fn3*retval
-    * set :fn1:fuel :fuel_many
-    * set :fn1:uld_in unloader5
-    * set :fn1:uld_out unloader6
   182 label *label118
   183 jump *label119 equal :fuel_many false
   184 control config unloader5 @blast-compound

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+51 instructions):
 
    66 op or :emerg_shutdown :fn4*retval *tmp8
    67 set :fn2:reactor reactor1
    68 set :fn2:time :t_startup1
-    * setaddr :fn2*retaddr *label14
-    * call *label2 :fn2*retval
-    * label *label14
+   69 label *label124
+   70 op sub *tmp102 @tick :fn2:time
+   71 op idiv :fn2:secs *tmp102 60
+   72 op greaterThan *tmp104 :fn2:secs 30
+   73 sensor *tmp105 :fn2:reactor @enabled
+   74 op equal *tmp106 *tmp105 false
+   75 op or *tmp107 *tmp104 *tmp106
+   76 jump *label125 equal *tmp107 false
+   77 set :fn2*retval 0
+   78 jump *label127 always
+   79 label *label125
+   80 label *label126
+   81 op sub :fn2:time_left 30 :fn2:secs
+   82 op mul *tmp110 :fn2:time_left :fn2:time_left
+   83 op idiv :fn2*retval *tmp110 0.04
+   84 jump *label127 always
+   85 label *label127
    86 set .START_POWER_REQ :fn2*retval
    87 set :fn2:reactor reactor2
    88 set :fn2:time :t_startup2
-    * setaddr :fn2*retaddr *label15
-    * call *label2 :fn2*retval
-    * label *label15
+   89 label *label128
+   90 op sub *tmp102 @tick :fn2:time
+   91 op idiv :fn2:secs *tmp102 60
+   92 op greaterThan *tmp104 :fn2:secs 30
+   93 sensor *tmp105 :fn2:reactor @enabled
+   94 op equal *tmp106 *tmp105 false
+   95 op or *tmp107 *tmp104 *tmp106
+   96 jump *label129 equal *tmp107 false
+   97 set :fn2*retval 0
+   98 jump *label131 always
+   99 label *label129
+  100 label *label130
+  101 op sub :fn2:time_left 30 :fn2:secs
+  102 op mul *tmp110 :fn2:time_left :fn2:time_left
+  103 op idiv :fn2*retval *tmp110 0.04
+  104 jump *label131 always
+  105 label *label131
   106 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   107 set :fn2:reactor reactor3
   108 set :fn2:time :t_startup3
-    * setaddr :fn2*retaddr *label16
-    * call *label2 :fn2*retval
-    * label *label16
+  109 label *label132
+  110 op sub *tmp102 @tick :fn2:time
+  111 op idiv :fn2:secs *tmp102 60
+  112 op greaterThan *tmp104 :fn2:secs 30
+  113 sensor *tmp105 :fn2:reactor @enabled
+  114 op equal *tmp106 *tmp105 false
+  115 op or *tmp107 *tmp104 *tmp106
+  116 jump *label133 equal *tmp107 false
+  117 set :fn2*retval 0
+  118 jump *label135 always
+  119 label *label133
+  120 label *label134
+  121 op sub :fn2:time_left 30 :fn2:secs
+  122 op mul *tmp110 :fn2:time_left :fn2:time_left
+  123 op idiv :fn2*retval *tmp110 0.04
+  124 jump *label135 always
+  125 label *label135
   126 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   127 set :fn2:reactor reactor4
   128 set :fn2:time :t_startup4
-    * setaddr :fn2*retaddr *label17
-    * call *label2 :fn2*retval
-    * label *label17
+  129 label *label136
+  130 op sub *tmp102 @tick :fn2:time
+  131 op idiv :fn2:secs *tmp102 60
+  132 op greaterThan *tmp104 :fn2:secs 30
+  133 sensor *tmp105 :fn2:reactor @enabled
+  134 op equal *tmp106 *tmp105 false
+  135 op or *tmp107 *tmp104 *tmp106
+  136 jump *label137 equal *tmp107 false
+  137 set :fn2*retval 0
+  138 jump *label139 always
+  139 label *label137
+  140 label *label138
+  141 op sub :fn2:time_left 30 :fn2:secs
+  142 op mul *tmp110 :fn2:time_left :fn2:time_left
+  143 op idiv :fn2*retval *tmp110 0.04
+  144 jump *label139 always
+  145 label *label139
   146 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   147 set :fn2:reactor reactor5
   148 set :fn2:time :t_startup5
-    * setaddr :fn2*retaddr *label18
-    * call *label2 :fn2*retval
-    * label *label18
+  149 label *label140
+  150 op sub *tmp102 @tick :fn2:time
+  151 op idiv :fn2:secs *tmp102 60
+  152 op greaterThan *tmp104 :fn2:secs 30
+  153 sensor *tmp105 :fn2:reactor @enabled
+  154 op equal *tmp106 *tmp105 false
+  155 op or *tmp107 *tmp104 *tmp106
+  156 jump *label141 equal *tmp107 false
+  157 set :fn2*retval 0
+  158 jump *label143 always
+  159 label *label141
+  160 label *label142
+  161 op sub :fn2:time_left 30 :fn2:secs
+  162 op mul *tmp110 :fn2:time_left :fn2:time_left
+  163 op idiv :fn2*retval *tmp110 0.04
+  164 jump *label143 always
+  165 label *label143
   166 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   167 set :fn3:reactor reactor1
   168 set :fn3:reactor_num 1
 
   417 jump *label7 always
   418 label *label9
   419 end
-    * label *label2
-    * op sub *tmp102 @tick :fn2:time
-    * op idiv :fn2:secs *tmp102 60
-    * op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label61 equal *tmp107 false
-    * set :fn2*retval 0
-    * jump *label60 always
-    * label *label61
-    * label *label62
-    * op sub :fn2:time_left 30 :fn2:secs
-    * op mul *tmp110 :fn2:time_left :fn2:time_left
-    * op idiv :fn2*retval *tmp110 0.04
-    * jump *label60 always
-    * label *label60
-    * return :fn2*retaddr
-    * end
   420 label *label3
   421 set .RET_T_STARTUP :fn3:t_startup
   422 op sub *tmp113 @tick :fn3:t_startup
 
   478 jump *label76 greaterThanEq :fn3:secs 30
   479 set :fn2:reactor :fn3:reactor
   480 set :fn2:time :fn3:t_startup
-    * setaddr :fn2*retaddr *label78
-    * call *label2 :fn2*retval
-    * label *label78
+  481 label *label144
+  482 op sub *tmp102 @tick :fn2:time
+  483 op idiv :fn2:secs *tmp102 60
+  484 op greaterThan *tmp104 :fn2:secs 30
+  485 sensor *tmp105 :fn2:reactor @enabled
+  486 op equal *tmp106 *tmp105 false
+  487 op or *tmp107 *tmp104 *tmp106
+  488 jump *label145 equal *tmp107 false
+  489 set :fn2*retval 0
+  490 jump *label147 always
+  491 label *label145
+  492 label *label146
+  493 op sub :fn2:time_left 30 :fn2:secs
+  494 op mul *tmp110 :fn2:time_left :fn2:time_left
+  495 op idiv :fn2*retval *tmp110 0.04
+  496 jump *label147 always
+  497 label *label147
   498 op sub *tmp153 :fn3:charge :fn2*retval
   499 op lessThan *tmp154 *tmp153 .PWR_ABORT
   500 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    67 set :fn2:reactor reactor1
    68 set :fn2:time :t_startup1
    69 label *label124
-    * op sub *tmp102 @tick :fn2:time
+   70 op sub *tmp102 @tick :t_startup1
    71 op idiv :fn2:secs *tmp102 60
    72 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+   73 sensor *tmp105 reactor1 @enabled
    74 op equal *tmp106 *tmp105 false
    75 op or *tmp107 *tmp104 *tmp106
    76 jump *label125 equal *tmp107 false
 
    87 set :fn2:reactor reactor2
    88 set :fn2:time :t_startup2
    89 label *label128
-    * op sub *tmp102 @tick :fn2:time
+   90 op sub *tmp102 @tick :t_startup2
    91 op idiv :fn2:secs *tmp102 60
    92 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+   93 sensor *tmp105 reactor2 @enabled
    94 op equal *tmp106 *tmp105 false
    95 op or *tmp107 *tmp104 *tmp106
    96 jump *label129 equal *tmp107 false
 
   107 set :fn2:reactor reactor3
   108 set :fn2:time :t_startup3
   109 label *label132
-    * op sub *tmp102 @tick :fn2:time
+  110 op sub *tmp102 @tick :t_startup3
   111 op idiv :fn2:secs *tmp102 60
   112 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  113 sensor *tmp105 reactor3 @enabled
   114 op equal *tmp106 *tmp105 false
   115 op or *tmp107 *tmp104 *tmp106
   116 jump *label133 equal *tmp107 false
 
   127 set :fn2:reactor reactor4
   128 set :fn2:time :t_startup4
   129 label *label136
-    * op sub *tmp102 @tick :fn2:time
+  130 op sub *tmp102 @tick :t_startup4
   131 op idiv :fn2:secs *tmp102 60
   132 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  133 sensor *tmp105 reactor4 @enabled
   134 op equal *tmp106 *tmp105 false
   135 op or *tmp107 *tmp104 *tmp106
   136 jump *label137 equal *tmp107 false
 
   147 set :fn2:reactor reactor5
   148 set :fn2:time :t_startup5
   149 label *label140
-    * op sub *tmp102 @tick :fn2:time
+  150 op sub *tmp102 @tick :t_startup5
   151 op idiv :fn2:secs *tmp102 60
   152 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  153 sensor *tmp105 reactor5 @enabled
   154 op equal *tmp106 *tmp105 false
   155 op or *tmp107 *tmp104 *tmp106
   156 jump *label141 equal *tmp107 false
 
   479 set :fn2:reactor :fn3:reactor
   480 set :fn2:time :fn3:t_startup
   481 label *label144
-    * op sub *tmp102 @tick :fn2:time
+  482 op sub *tmp102 @tick :fn3:t_startup
   483 op idiv :fn2:secs *tmp102 60
   484 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  485 sensor *tmp105 :fn3:reactor @enabled
   486 op equal *tmp106 *tmp105 false
   487 op or *tmp107 *tmp104 *tmp106
   488 jump *label145 equal *tmp107 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    64 jump *label11 always
    65 label *label11
    66 op or :emerg_shutdown :fn4*retval *tmp8
-    * set :fn2:reactor reactor1
-    * set :fn2:time :t_startup1
    67 label *label124
    68 op sub *tmp102 @tick :t_startup1
    69 op idiv :fn2:secs *tmp102 60
 
    82 jump *label127 always
    83 label *label127
    84 set .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor2
-    * set :fn2:time :t_startup2
    85 label *label128
    86 op sub *tmp102 @tick :t_startup2
    87 op idiv :fn2:secs *tmp102 60
 
   100 jump *label131 always
   101 label *label131
   102 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor3
-    * set :fn2:time :t_startup3
   103 label *label132
   104 op sub *tmp102 @tick :t_startup3
   105 op idiv :fn2:secs *tmp102 60
 
   118 jump *label135 always
   119 label *label135
   120 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor4
-    * set :fn2:time :t_startup4
   121 label *label136
   122 op sub *tmp102 @tick :t_startup4
   123 op idiv :fn2:secs *tmp102 60
 
   136 jump *label139 always
   137 label *label139
   138 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor5
-    * set :fn2:time :t_startup5
   139 label *label140
   140 op sub *tmp102 @tick :t_startup5
   141 op idiv :fn2:secs *tmp102 60
 
   466 jump *label75 always
   467 label *label74
   468 jump *label76 greaterThanEq :fn3:secs 30
-    * set :fn2:reactor :fn3:reactor
-    * set :fn2:time :fn3:t_startup
   469 label *label144
   470 op sub *tmp102 @tick :fn3:t_startup
   471 op idiv :fn2:secs *tmp102 60

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    46 set .CONTAINER vault1
    47 set .NODE node1
    48 set :fn4:unit cyclone1
-    * setaddr :fn4*retaddr *label10
-    * call *label4 :fn4*retval
-    * label *label10
+   49 label *label148
+   50 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+   51 jump *label149 equal :fn4:enemy_found null
+   52 control enabled projector1 true
+   53 control enabled projector2 true
+   54 control config .ULD_IN_1 .FUEL_OFF
+   55 control config .ULD_OUT_1 .FUEL
+   56 control config .ULD_IN_2 .FUEL_OFF
+   57 control config .ULD_OUT_2 .FUEL
+   58 control config .ULD_IN_MANY .FUEL_OFF
+   59 control config .ULD_OUT_MANY .FUEL
+   60 control config .ULD_MIXER .FUEL_OFF
+   61 control enabled reactor1 false
+   62 control enabled reactor2 false
+   63 control enabled reactor3 false
+   64 control enabled reactor4 false
+   65 control enabled reactor5 false
+   66 set :fn4*retval true
+   67 jump *label151 always
+   68 jump *label150 always
+   69 label *label149
+   70 control enabled projector1 false
+   71 control enabled projector2 false
+   72 set :fn4*retval false
+   73 jump *label151 always
+   74 label *label150
+   75 label *label151
    76 op notEqual *tmp9 switch1 null
    77 sensor *tmp10 switch1 @enabled
    78 op equal *tmp11 *tmp10 false
 
   227 label *label116
   228 label *label117
   229 set :fn4:unit cyclone1
-    * setaddr :fn4*retaddr *label23
-    * call *label4 :fn4*retval
-    * label *label23
+  230 label *label152
+  231 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+  232 jump *label153 equal :fn4:enemy_found null
+  233 control enabled projector1 true
+  234 control enabled projector2 true
+  235 control config .ULD_IN_1 .FUEL_OFF
+  236 control config .ULD_OUT_1 .FUEL
+  237 control config .ULD_IN_2 .FUEL_OFF
+  238 control config .ULD_OUT_2 .FUEL
+  239 control config .ULD_IN_MANY .FUEL_OFF
+  240 control config .ULD_OUT_MANY .FUEL
+  241 control config .ULD_MIXER .FUEL_OFF
+  242 control enabled reactor1 false
+  243 control enabled reactor2 false
+  244 control enabled reactor3 false
+  245 control enabled reactor4 false
+  246 control enabled reactor5 false
+  247 set :fn4*retval true
+  248 jump *label155 always
+  249 jump *label154 always
+  250 label *label153
+  251 control enabled projector1 false
+  252 control enabled projector2 false
+  253 set :fn4*retval false
+  254 jump *label155 always
+  255 label *label154
+  256 label *label155
   257 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   258 set :fn3:reactor reactor3
   259 set :fn3:reactor_num 3
 
   653 label *label63
   654 return :fn3*retaddr
   655 end
-    * label *label4
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
-    * jump *label98 equal :fn4:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :fn4*retval true
-    * jump *label97 always
-    * jump *label99 always
-    * label *label98
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :fn4*retval false
-    * jump *label97 always
-    * label *label99
-    * label *label97
-    * return :fn4*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    47 set .NODE node1
    48 set :fn4:unit cyclone1
    49 label *label148
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+   50 radar enemy any any health cyclone1 1 :fn4:enemy_found
    51 jump *label149 equal :fn4:enemy_found null
    52 control enabled projector1 true
    53 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   54 control config unloader1 @scrap
+   55 control config unloader2 @blast-compound
+   56 control config unloader3 @scrap
+   57 control config unloader4 @blast-compound
+   58 control config unloader5 @scrap
+   59 control config unloader6 @blast-compound
+   60 control config unloader7 @scrap
    61 control enabled reactor1 false
    62 control enabled reactor2 false
    63 control enabled reactor3 false
 
   228 label *label117
   229 set :fn4:unit cyclone1
   230 label *label152
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+  231 radar enemy any any health cyclone1 1 :fn4:enemy_found
   232 jump *label153 equal :fn4:enemy_found null
   233 control enabled projector1 true
   234 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  235 control config unloader1 @scrap
+  236 control config unloader2 @blast-compound
+  237 control config unloader3 @scrap
+  238 control config unloader4 @blast-compound
+  239 control config unloader5 @scrap
+  240 control config unloader6 @blast-compound
+  241 control config unloader7 @scrap
   242 control enabled reactor1 false
   243 control enabled reactor2 false
   244 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    37 set .CONTAINER vault1
    38 set .NODE node1
-    * set :fn4:unit cyclone1
    39 label *label148
    40 radar enemy any any health cyclone1 1 :fn4:enemy_found
    41 jump *label149 equal :fn4:enemy_found null
 
   216 control config unloader4 @scrap
   217 label *label116
   218 label *label117
-    * set :fn4:unit cyclone1
   219 label *label152
   220 radar enemy any any health cyclone1 1 :fn4:enemy_found
   221 jump *label153 equal :fn4:enemy_found null

Modifications by Inline function call at line 80:14 (+156 instructions):
 
   173 set :fn3:emerg_shutdown :emerg_shutdown
   174 set :fn3:fuel_on :fuel_1
   175 set :fn3:t_startup :t_startup1
-    * setaddr :fn3*retaddr *label19
-    * call *label3 :fn3*retval
-    * label *label19
+  176 label *label156
+  177 set .RET_T_STARTUP :fn3:t_startup
+  178 op sub *tmp113 @tick :fn3:t_startup
+  179 op idiv :fn3:secs *tmp113 60
+  180 sensor :fn3:fuel :fn3:reactor @blast-compound
+  181 set :fn3:supply_fuel true
+  182 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  183 sensor :fn3:cryo :fn3:reactor @cryofluid
+  184 sensor *tmp118 .NODE @powerNetStored
+  185 op floor :fn3:charge *tmp118
+  186 sensor *tmp120 .NODE @powerNetIn
+  187 sensor *tmp121 .NODE @powerNetOut
+  188 op sub *tmp122 *tmp120 *tmp121
+  189 op floor :fn3:surplus *tmp122
+  190 op mul *tmp124 .AVG_SURPLUS 0.8
+  191 op mul *tmp125 :fn3:surplus 0.2
+  192 op add .AVG_SURPLUS *tmp124 *tmp125
+  193 sensor :fn3:enabled :fn3:reactor @enabled
+  194 print "#"
+  195 print :fn3:reactor_num
+  196 print " "
+  197 print "- "
+  198 jump *label157 equal :fn3:emerg_shutdown false
+  199 control enabled :fn3:reactor false
+  200 print "emergency mode"
+  201 print "\n"
+  202 set :fn3:supply_fuel false
+  203 jump *label190 always
+  204 label *label157
+  205 jump *label176 equal :fn3:enabled false
+  206 jump *label158 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  207 control enabled :fn3:reactor false
+  208 print "STOP unwanted"
+  209 print "\n"
+  210 jump *label175 always
+  211 label *label158
+  212 op greaterThan *tmp136 :fn3:reactor_num 1
+  213 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  214 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  215 op land *tmp139 *tmp136 *tmp138
+  216 jump *label159 equal *tmp139 false
+  217 control enabled :fn3:reactor false
+  218 print "STOP system fuel low"
+  219 print "\n"
+  220 jump *label174 always
+  221 label *label159
+  222 jump *label160 greaterThan :fn3:fuel 1
+  223 control enabled :fn3:reactor false
+  224 print "STOP fuel low"
+  225 print "\n"
+  226 jump *label173 always
+  227 label *label160
+  228 jump *label161 greaterThan :fn3:cryo .CRYO_ABORT
+  229 control enabled :fn3:reactor false
+  230 print "STOP out of cryo"
+  231 print "\n"
+  232 jump *label172 always
+  233 label *label161
+  234 jump *label168 greaterThanEq :fn3:secs 30
+  235 label *label162
+  236 op sub *tmp102 @tick :fn3:t_startup
+  237 op idiv :fn2:secs *tmp102 60
+  238 op greaterThan *tmp104 :fn2:secs 30
+  239 sensor *tmp105 :fn3:reactor @enabled
+  240 op equal *tmp106 *tmp105 false
+  241 op or *tmp107 *tmp104 *tmp106
+  242 jump *label163 equal *tmp107 false
+  243 set :fn2*retval 0
+  244 jump *label165 always
+  245 label *label163
+  246 label *label164
+  247 op sub :fn2:time_left 30 :fn2:secs
+  248 op mul *tmp110 :fn2:time_left :fn2:time_left
+  249 op idiv :fn2*retval *tmp110 0.04
+  250 jump *label165 always
+  251 label *label165
+  252 op sub *tmp153 :fn3:charge :fn2*retval
+  253 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  254 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  255 op land *tmp156 *tmp154 *tmp155
+  256 jump *label166 equal *tmp156 false
+  257 control enabled :fn3:reactor false
+  258 print "START FAIL battery"
+  259 print "\n"
+  260 set :fn3:supply_fuel false
+  261 jump *label167 always
+  262 label *label166
+  263 op sub :fn3:time_left 30 :fn3:secs
+  264 print "Starting "
+  265 print :fn3:time_left
+  266 print " "
+  267 print "secs, req "
+  268 print :fn2*retval
+  269 print "J"
+  270 print "\n"
+  271 label *label167
+  272 jump *label171 always
+  273 label *label168
+  274 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  275 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  276 op land *tmp163 *tmp161 *tmp162
+  277 jump *label169 equal *tmp163 false
+  278 control enabled :fn3:reactor false
+  279 print "ABANDON - battery crit"
+  280 print "\n"
+  281 set :fn3:supply_fuel false
+  282 jump *label170 always
+  283 label *label169
+  284 op idiv :fn3:mins :fn3:secs 6
+  285 op div :fn3:mins :fn3:mins 10
+  286 print "RUN "
+  287 print :fn3:mins
+  288 print " "
+  289 print "mins"
+  290 print "\n"
+  291 label *label170
+  292 label *label171
+  293 label *label172
+  294 label *label173
+  295 label *label174
+  296 label *label175
+  297 jump *label189 always
+  298 label *label176
+  299 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  300 op sub *tmp170 *tmp169 .PWR_ABORT
+  301 op div *tmp171 *tmp170 .PWR_REQ
+  302 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  303 op div *tmp173 :fn3:surplus .FLOW_REQ
+  304 op max :fn3:flow_units -0.1 *tmp173
+  305 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  306 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  307 jump *label177 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  308 print "IDLE"
+  309 print "\n"
+  310 set :fn3:supply_fuel false
+  311 jump *label188 always
+  312 label *label177
+  313 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  314 jump *label178 greaterThanEq *tmp179 1
+  315 op idiv *tmp183 :fn3:flow_units 0.001
+  316 op div :fn3:flow *tmp183 10
+  317 op idiv *tmp186 :fn3:charge_units 0.001
+  318 op div :fn3:charge *tmp186 10
+  319 print "WAIT power. (%"
+  320 print :fn3:charge
+  321 print "J + %"
+  322 print :fn3:flow
+  323 print "W)"
+  324 print "\n"
+  325 set :fn3:supply_fuel false
+  326 jump *label187 always
+  327 label *label178
+  328 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  329 op land *tmp189 :fn3:fuel_on *tmp188
+  330 jump *label181 equal *tmp189 false
+  331 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  332 jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  333 print "WAIT fuel"
+  334 print "\n"
+  335 jump *label180 always
+  336 label *label179
+  337 print "WAIT system fuel"
+  338 print "\n"
+  339 label *label180
+  340 jump *label186 always
+  341 label *label181
+  342 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  343 jump *label182 greaterThanEq :fn3:fuel_stored *tmp194
+  344 print "WAIT buffer fuel"
+  345 print "\n"
+  346 jump *label185 always
+  347 label *label182
+  348 jump *label183 greaterThanEq :fn3:cryo :fn3:cryo_req
+  349 print "WAIT cryo"
+  350 print "\n"
+  351 jump *label184 always
+  352 label *label183
+  353 print "STARTUP"
+  354 print "\n"
+  355 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  356 control enabled :fn3:reactor true
+  357 label *label184
+  358 label *label185
+  359 label *label186
+  360 label *label187
+  361 label *label188
+  362 label *label189
+  363 label *label190
+  364 sensor *tmp201 :fn3:reactor @enabled
+  365 jump *label191 equal :fn3:enabled *tmp201
+  366 set .RET_T_STARTUP @tick
+  367 label *label191
+  368 label *label192
+  369 set :fn3*retval :fn3:supply_fuel
+  370 jump *label193 always
+  371 label *label193
   372 set :fuel_1 :fn3*retval
   373 set :t_startup1 .RET_T_STARTUP
   374 label *label106

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    25 label *label5
    26 set *tmp5 @tick
    27 label *label6
-    * set .RET_T_STARTUP *tmp5
    28 set :t_startup1 *tmp5
    29 set :t_startup2 *tmp5
    30 set :t_startup3 *tmp5
 
   173 set :fn3:fuel_on :fuel_1
   174 set :fn3:t_startup :t_startup1
   175 label *label156
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  176 set .RET_T_STARTUP :t_startup1
+  177 op sub *tmp113 @tick :t_startup1
   178 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  179 sensor :fn3:fuel reactor1 @blast-compound
   180 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  181 sensor :fn3:fuel_stored vault1 @blast-compound
+  182 sensor :fn3:cryo reactor1 @cryofluid
+  183 sensor *tmp118 node1 @powerNetStored
   184 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  185 sensor *tmp120 node1 @powerNetIn
+  186 sensor *tmp121 node1 @powerNetOut
   187 op sub *tmp122 *tmp120 *tmp121
   188 op floor :fn3:surplus *tmp122
   189 op mul *tmp124 .AVG_SURPLUS 0.8
   190 op mul *tmp125 :fn3:surplus 0.2
   191 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  192 sensor :fn3:enabled reactor1 @enabled
   193 print "#"
-    * print :fn3:reactor_num
+  194 print 1
   195 print " "
   196 print "- "
-    * jump *label157 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  197 jump *label157 equal :emerg_shutdown false
+  198 control enabled reactor1 false
   199 print "emergency mode"
   200 print "\n"
   201 set :fn3:supply_fuel false
   202 jump *label190 always
   203 label *label157
   204 jump *label176 equal :fn3:enabled false
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  205 jump *label158 greaterThanEq .REACTORS_DESIRED 1
+  206 control enabled reactor1 false
   207 print "STOP unwanted"
   208 print "\n"
   209 jump *label175 always
   210 label *label158
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  211 op greaterThan *tmp136 1 1
+  212 op mul *tmp137 15 1
+  213 op lessThan *tmp138 :fn3:fuel_stored 15
+  214 op land *tmp139 false *tmp138
   215 jump *label159 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  216 control enabled reactor1 false
   217 print "STOP system fuel low"
   218 print "\n"
   219 jump *label174 always
   220 label *label159
   221 jump *label160 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  222 control enabled reactor1 false
   223 print "STOP fuel low"
   224 print "\n"
   225 jump *label173 always
   226 label *label160
-    * jump *label161 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  227 jump *label161 greaterThan :fn3:cryo 1
+  228 control enabled reactor1 false
   229 print "STOP out of cryo"
   230 print "\n"
   231 jump *label172 always
   232 label *label161
   233 jump *label168 greaterThanEq :fn3:secs 30
   234 label *label162
-    * op sub *tmp102 @tick :fn3:t_startup
+  235 op sub *tmp102 @tick :t_startup1
   236 op idiv :fn2:secs *tmp102 60
   237 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  238 sensor *tmp105 reactor1 @enabled
   239 op equal *tmp106 *tmp105 false
   240 op or *tmp107 *tmp104 *tmp106
   241 jump *label163 equal *tmp107 false
 
   249 jump *label165 always
   250 label *label165
   251 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  252 op lessThan *tmp154 *tmp153 5000
+  253 op lessThan *tmp155 :fn3:surplus -500
   254 op land *tmp156 *tmp154 *tmp155
   255 jump *label166 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  256 control enabled reactor1 false
   257 print "START FAIL battery"
   258 print "\n"
   259 set :fn3:supply_fuel false
 
   270 label *label167
   271 jump *label171 always
   272 label *label168
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  273 op lessThan *tmp161 :fn3:charge 2000
+  274 op lessThan *tmp162 :fn3:surplus -500
   275 op land *tmp163 *tmp161 *tmp162
   276 jump *label169 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  277 control enabled reactor1 false
   278 print "ABANDON - battery crit"
   279 print "\n"
   280 set :fn3:supply_fuel false
 
   296 jump *label189 always
   297 label *label176
   298 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  299 op sub *tmp170 *tmp169 5000
+  300 op div *tmp171 *tmp170 23000
+  301 op mul :fn3:charge_units *tmp171 0.6
+  302 op div *tmp173 :fn3:surplus 2000
   303 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  304 op mul *tmp175 2 1
+  305 op add :fn3:cryo_req 3 2
+  306 jump *label177 greaterThanEq .REACTORS_DESIRED 1
   307 print "IDLE"
   308 print "\n"
   309 set :fn3:supply_fuel false
 
   324 set :fn3:supply_fuel false
   325 jump *label187 always
   326 label *label178
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  327 op lessThan *tmp188 :fn3:fuel 10
+  328 op land *tmp189 :fuel_1 *tmp188
   329 jump *label181 equal *tmp189 false
   330 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  331 jump *label179 lessThanEq *tmp191 10
   332 print "WAIT fuel"
   333 print "\n"
   334 jump *label180 always
 
   338 label *label180
   339 jump *label186 always
   340 label *label181
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label182 greaterThanEq :fn3:fuel_stored *tmp194
+  341 op mul *tmp194 45 1
+  342 jump *label182 greaterThanEq :fn3:fuel_stored 45
   343 print "WAIT buffer fuel"
   344 print "\n"
   345 jump *label185 always
   346 label *label182
-    * jump *label183 greaterThanEq :fn3:cryo :fn3:cryo_req
+  347 jump *label183 greaterThanEq :fn3:cryo 5
   348 print "WAIT cryo"
   349 print "\n"
   350 jump *label184 always
   351 label *label183
   352 print "STARTUP"
   353 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  354 op add .START_POWER_REQ .START_POWER_REQ 23000
+  355 control enabled reactor1 true
   356 label *label184
   357 label *label185
   358 label *label186
 
   360 label *label188
   361 label *label189
   362 label *label190
-    * sensor *tmp201 :fn3:reactor @enabled
+  363 sensor *tmp201 reactor1 @enabled
   364 jump *label191 equal :fn3:enabled *tmp201
   365 set .RET_T_STARTUP @tick
   366 label *label191
 
   368 set :fn3*retval :fn3:supply_fuel
   369 jump *label193 always
   370 label *label193
-    * set :fuel_1 :fn3*retval
+  371 set :fuel_1 :fn3:supply_fuel
   372 set :t_startup1 .RET_T_STARTUP
   373 label *label106
-    * jump *label107 equal :fn3*retval false
+  374 jump *label107 equal :fn3:supply_fuel false
   375 control config unloader1 @blast-compound
   376 jump *label108 always
   377 label *label107
   378 control config unloader1 @scrap
   379 label *label108
-    * jump *label109 notEqual :fn3*retval false
+  380 jump *label109 notEqual :fn3:supply_fuel false
   381 control config unloader2 @blast-compound
   382 jump *label110 always
   383 label *label109

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   167 jump *label143 always
   168 label *label143
   169 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn3:reactor reactor1
-    * set :fn3:reactor_num 1
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_1
-    * set :fn3:t_startup :t_startup1
   170 label *label156
   171 set .RET_T_STARTUP :t_startup1
   172 op sub *tmp113 @tick :t_startup1
 
   293 op sub *tmp169 :fn3:charge .START_POWER_REQ
   294 op sub *tmp170 *tmp169 5000
   295 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  296 op div :fn3:charge_units *tmp170 38333.333333333336
   297 op div *tmp173 :fn3:surplus 2000
   298 op max :fn3:flow_units -0.1 *tmp173
   299 op mul *tmp175 2 1
 
   360 set .RET_T_STARTUP @tick
   361 label *label191
   362 label *label192
-    * set :fn3*retval :fn3:supply_fuel
   363 jump *label193 always
   364 label *label193
   365 set :fuel_1 :fn3:supply_fuel

Modifications by Inline function call at line 84:14 (+156 instructions):
 
   383 set :fn3:emerg_shutdown :emerg_shutdown
   384 set :fn3:fuel_on :fuel_2
   385 set :fn3:t_startup :t_startup2
-    * setaddr :fn3*retaddr *label21
-    * call *label3 :fn3*retval
-    * label *label21
+  386 label *label194
+  387 set .RET_T_STARTUP :fn3:t_startup
+  388 op sub *tmp113 @tick :fn3:t_startup
+  389 op idiv :fn3:secs *tmp113 60
+  390 sensor :fn3:fuel :fn3:reactor @blast-compound
+  391 set :fn3:supply_fuel true
+  392 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  393 sensor :fn3:cryo :fn3:reactor @cryofluid
+  394 sensor *tmp118 .NODE @powerNetStored
+  395 op floor :fn3:charge *tmp118
+  396 sensor *tmp120 .NODE @powerNetIn
+  397 sensor *tmp121 .NODE @powerNetOut
+  398 op sub *tmp122 *tmp120 *tmp121
+  399 op floor :fn3:surplus *tmp122
+  400 op mul *tmp124 .AVG_SURPLUS 0.8
+  401 op mul *tmp125 :fn3:surplus 0.2
+  402 op add .AVG_SURPLUS *tmp124 *tmp125
+  403 sensor :fn3:enabled :fn3:reactor @enabled
+  404 print "#"
+  405 print :fn3:reactor_num
+  406 print " "
+  407 print "- "
+  408 jump *label195 equal :fn3:emerg_shutdown false
+  409 control enabled :fn3:reactor false
+  410 print "emergency mode"
+  411 print "\n"
+  412 set :fn3:supply_fuel false
+  413 jump *label228 always
+  414 label *label195
+  415 jump *label214 equal :fn3:enabled false
+  416 jump *label196 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  417 control enabled :fn3:reactor false
+  418 print "STOP unwanted"
+  419 print "\n"
+  420 jump *label213 always
+  421 label *label196
+  422 op greaterThan *tmp136 :fn3:reactor_num 1
+  423 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  424 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  425 op land *tmp139 *tmp136 *tmp138
+  426 jump *label197 equal *tmp139 false
+  427 control enabled :fn3:reactor false
+  428 print "STOP system fuel low"
+  429 print "\n"
+  430 jump *label212 always
+  431 label *label197
+  432 jump *label198 greaterThan :fn3:fuel 1
+  433 control enabled :fn3:reactor false
+  434 print "STOP fuel low"
+  435 print "\n"
+  436 jump *label211 always
+  437 label *label198
+  438 jump *label199 greaterThan :fn3:cryo .CRYO_ABORT
+  439 control enabled :fn3:reactor false
+  440 print "STOP out of cryo"
+  441 print "\n"
+  442 jump *label210 always
+  443 label *label199
+  444 jump *label206 greaterThanEq :fn3:secs 30
+  445 label *label200
+  446 op sub *tmp102 @tick :fn3:t_startup
+  447 op idiv :fn2:secs *tmp102 60
+  448 op greaterThan *tmp104 :fn2:secs 30
+  449 sensor *tmp105 :fn3:reactor @enabled
+  450 op equal *tmp106 *tmp105 false
+  451 op or *tmp107 *tmp104 *tmp106
+  452 jump *label201 equal *tmp107 false
+  453 set :fn2*retval 0
+  454 jump *label203 always
+  455 label *label201
+  456 label *label202
+  457 op sub :fn2:time_left 30 :fn2:secs
+  458 op mul *tmp110 :fn2:time_left :fn2:time_left
+  459 op idiv :fn2*retval *tmp110 0.04
+  460 jump *label203 always
+  461 label *label203
+  462 op sub *tmp153 :fn3:charge :fn2*retval
+  463 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  464 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  465 op land *tmp156 *tmp154 *tmp155
+  466 jump *label204 equal *tmp156 false
+  467 control enabled :fn3:reactor false
+  468 print "START FAIL battery"
+  469 print "\n"
+  470 set :fn3:supply_fuel false
+  471 jump *label205 always
+  472 label *label204
+  473 op sub :fn3:time_left 30 :fn3:secs
+  474 print "Starting "
+  475 print :fn3:time_left
+  476 print " "
+  477 print "secs, req "
+  478 print :fn2*retval
+  479 print "J"
+  480 print "\n"
+  481 label *label205
+  482 jump *label209 always
+  483 label *label206
+  484 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  485 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  486 op land *tmp163 *tmp161 *tmp162
+  487 jump *label207 equal *tmp163 false
+  488 control enabled :fn3:reactor false
+  489 print "ABANDON - battery crit"
+  490 print "\n"
+  491 set :fn3:supply_fuel false
+  492 jump *label208 always
+  493 label *label207
+  494 op idiv :fn3:mins :fn3:secs 6
+  495 op div :fn3:mins :fn3:mins 10
+  496 print "RUN "
+  497 print :fn3:mins
+  498 print " "
+  499 print "mins"
+  500 print "\n"
+  501 label *label208
+  502 label *label209
+  503 label *label210
+  504 label *label211
+  505 label *label212
+  506 label *label213
+  507 jump *label227 always
+  508 label *label214
+  509 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  510 op sub *tmp170 *tmp169 .PWR_ABORT
+  511 op div *tmp171 *tmp170 .PWR_REQ
+  512 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  513 op div *tmp173 :fn3:surplus .FLOW_REQ
+  514 op max :fn3:flow_units -0.1 *tmp173
+  515 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  516 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  517 jump *label215 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  518 print "IDLE"
+  519 print "\n"
+  520 set :fn3:supply_fuel false
+  521 jump *label226 always
+  522 label *label215
+  523 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  524 jump *label216 greaterThanEq *tmp179 1
+  525 op idiv *tmp183 :fn3:flow_units 0.001
+  526 op div :fn3:flow *tmp183 10
+  527 op idiv *tmp186 :fn3:charge_units 0.001
+  528 op div :fn3:charge *tmp186 10
+  529 print "WAIT power. (%"
+  530 print :fn3:charge
+  531 print "J + %"
+  532 print :fn3:flow
+  533 print "W)"
+  534 print "\n"
+  535 set :fn3:supply_fuel false
+  536 jump *label225 always
+  537 label *label216
+  538 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  539 op land *tmp189 :fn3:fuel_on *tmp188
+  540 jump *label219 equal *tmp189 false
+  541 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  542 jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  543 print "WAIT fuel"
+  544 print "\n"
+  545 jump *label218 always
+  546 label *label217
+  547 print "WAIT system fuel"
+  548 print "\n"
+  549 label *label218
+  550 jump *label224 always
+  551 label *label219
+  552 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  553 jump *label220 greaterThanEq :fn3:fuel_stored *tmp194
+  554 print "WAIT buffer fuel"
+  555 print "\n"
+  556 jump *label223 always
+  557 label *label220
+  558 jump *label221 greaterThanEq :fn3:cryo :fn3:cryo_req
+  559 print "WAIT cryo"
+  560 print "\n"
+  561 jump *label222 always
+  562 label *label221
+  563 print "STARTUP"
+  564 print "\n"
+  565 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  566 control enabled :fn3:reactor true
+  567 label *label222
+  568 label *label223
+  569 label *label224
+  570 label *label225
+  571 label *label226
+  572 label *label227
+  573 label *label228
+  574 sensor *tmp201 :fn3:reactor @enabled
+  575 jump *label229 equal :fn3:enabled *tmp201
+  576 set .RET_T_STARTUP @tick
+  577 label *label229
+  578 label *label230
+  579 set :fn3*retval :fn3:supply_fuel
+  580 jump *label231 always
+  581 label *label231
   582 set :fuel_2 :fn3*retval
   583 set :t_startup2 .RET_T_STARTUP
   584 label *label112

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   384 set :fn3:fuel_on :fuel_2
   385 set :fn3:t_startup :t_startup2
   386 label *label194
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  387 set .RET_T_STARTUP :t_startup2
+  388 op sub *tmp113 @tick :t_startup2
   389 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  390 sensor :fn3:fuel reactor2 @blast-compound
   391 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  392 sensor :fn3:fuel_stored vault1 @blast-compound
+  393 sensor :fn3:cryo reactor2 @cryofluid
+  394 sensor *tmp118 node1 @powerNetStored
   395 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  396 sensor *tmp120 node1 @powerNetIn
+  397 sensor *tmp121 node1 @powerNetOut
   398 op sub *tmp122 *tmp120 *tmp121
   399 op floor :fn3:surplus *tmp122
   400 op mul *tmp124 .AVG_SURPLUS 0.8
   401 op mul *tmp125 :fn3:surplus 0.2
   402 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  403 sensor :fn3:enabled reactor2 @enabled
   404 print "#"
-    * print :fn3:reactor_num
+  405 print 2
   406 print " "
   407 print "- "
-    * jump *label195 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  408 jump *label195 equal :emerg_shutdown false
+  409 control enabled reactor2 false
   410 print "emergency mode"
   411 print "\n"
   412 set :fn3:supply_fuel false
   413 jump *label228 always
   414 label *label195
   415 jump *label214 equal :fn3:enabled false
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  416 jump *label196 greaterThanEq .REACTORS_DESIRED 2
+  417 control enabled reactor2 false
   418 print "STOP unwanted"
   419 print "\n"
   420 jump *label213 always
   421 label *label196
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  422 op greaterThan *tmp136 2 1
+  423 op mul *tmp137 15 2
+  424 op lessThan *tmp138 :fn3:fuel_stored 30
+  425 op land *tmp139 true *tmp138
   426 jump *label197 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  427 control enabled reactor2 false
   428 print "STOP system fuel low"
   429 print "\n"
   430 jump *label212 always
   431 label *label197
   432 jump *label198 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  433 control enabled reactor2 false
   434 print "STOP fuel low"
   435 print "\n"
   436 jump *label211 always
   437 label *label198
-    * jump *label199 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  438 jump *label199 greaterThan :fn3:cryo 1
+  439 control enabled reactor2 false
   440 print "STOP out of cryo"
   441 print "\n"
   442 jump *label210 always
   443 label *label199
   444 jump *label206 greaterThanEq :fn3:secs 30
   445 label *label200
-    * op sub *tmp102 @tick :fn3:t_startup
+  446 op sub *tmp102 @tick :t_startup2
   447 op idiv :fn2:secs *tmp102 60
   448 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  449 sensor *tmp105 reactor2 @enabled
   450 op equal *tmp106 *tmp105 false
   451 op or *tmp107 *tmp104 *tmp106
   452 jump *label201 equal *tmp107 false
 
   460 jump *label203 always
   461 label *label203
   462 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  463 op lessThan *tmp154 *tmp153 5000
+  464 op lessThan *tmp155 :fn3:surplus -500
   465 op land *tmp156 *tmp154 *tmp155
   466 jump *label204 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  467 control enabled reactor2 false
   468 print "START FAIL battery"
   469 print "\n"
   470 set :fn3:supply_fuel false
 
   481 label *label205
   482 jump *label209 always
   483 label *label206
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  484 op lessThan *tmp161 :fn3:charge 2000
+  485 op lessThan *tmp162 :fn3:surplus -500
   486 op land *tmp163 *tmp161 *tmp162
   487 jump *label207 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  488 control enabled reactor2 false
   489 print "ABANDON - battery crit"
   490 print "\n"
   491 set :fn3:supply_fuel false
 
   507 jump *label227 always
   508 label *label214
   509 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  510 op sub *tmp170 *tmp169 5000
+  511 op div *tmp171 *tmp170 23000
+  512 op mul :fn3:charge_units *tmp171 0.6
+  513 op div *tmp173 :fn3:surplus 2000
   514 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  515 op mul *tmp175 2 2
+  516 op add :fn3:cryo_req 3 4
+  517 jump *label215 greaterThanEq .REACTORS_DESIRED 2
   518 print "IDLE"
   519 print "\n"
   520 set :fn3:supply_fuel false
 
   535 set :fn3:supply_fuel false
   536 jump *label225 always
   537 label *label216
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  538 op lessThan *tmp188 :fn3:fuel 10
+  539 op land *tmp189 :fuel_2 *tmp188
   540 jump *label219 equal *tmp189 false
   541 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  542 jump *label217 lessThanEq *tmp191 10
   543 print "WAIT fuel"
   544 print "\n"
   545 jump *label218 always
 
   549 label *label218
   550 jump *label224 always
   551 label *label219
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label220 greaterThanEq :fn3:fuel_stored *tmp194
+  552 op mul *tmp194 45 2
+  553 jump *label220 greaterThanEq :fn3:fuel_stored 90
   554 print "WAIT buffer fuel"
   555 print "\n"
   556 jump *label223 always
   557 label *label220
-    * jump *label221 greaterThanEq :fn3:cryo :fn3:cryo_req
+  558 jump *label221 greaterThanEq :fn3:cryo 7
   559 print "WAIT cryo"
   560 print "\n"
   561 jump *label222 always
   562 label *label221
   563 print "STARTUP"
   564 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  565 op add .START_POWER_REQ .START_POWER_REQ 23000
+  566 control enabled reactor2 true
   567 label *label222
   568 label *label223
   569 label *label224
 
   571 label *label226
   572 label *label227
   573 label *label228
-    * sensor *tmp201 :fn3:reactor @enabled
+  574 sensor *tmp201 reactor2 @enabled
   575 jump *label229 equal :fn3:enabled *tmp201
   576 set .RET_T_STARTUP @tick
   577 label *label229
 
   579 set :fn3*retval :fn3:supply_fuel
   580 jump *label231 always
   581 label *label231
-    * set :fuel_2 :fn3*retval
+  582 set :fuel_2 :fn3:supply_fuel
   583 set :t_startup2 .RET_T_STARTUP
   584 label *label112
-    * jump *label113 equal :fn3*retval false
+  585 jump *label113 equal :fn3:supply_fuel false
   586 control config unloader3 @blast-compound
   587 jump *label114 always
   588 label *label113
   589 control config unloader3 @scrap
   590 label *label114
-    * jump *label115 notEqual :fn3*retval false
+  591 jump *label115 notEqual :fn3:supply_fuel false
   592 control config unloader4 @blast-compound
   593 jump *label116 always
   594 label *label115

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   378 control config unloader2 @scrap
   379 label *label110
   380 label *label111
-    * set :fn3:reactor reactor2
-    * set :fn3:reactor_num 2
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_2
-    * set :fn3:t_startup :t_startup2
   381 label *label194
   382 set .RET_T_STARTUP :t_startup2
   383 op sub *tmp113 @tick :t_startup2
 
   504 op sub *tmp169 :fn3:charge .START_POWER_REQ
   505 op sub *tmp170 *tmp169 5000
   506 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  507 op div :fn3:charge_units *tmp170 38333.333333333336
   508 op div *tmp173 :fn3:surplus 2000
   509 op max :fn3:flow_units -0.1 *tmp173
   510 op mul *tmp175 2 2
 
   571 set .RET_T_STARTUP @tick
   572 label *label229
   573 label *label230
-    * set :fn3*retval :fn3:supply_fuel
   574 jump *label231 always
   575 label *label231
   576 set :fuel_2 :fn3:supply_fuel

Modifications by Inline function call at line 89:14 (+156 instructions):
 
   622 set :fn3:emerg_shutdown :emerg_shutdown
   623 set :fn3:fuel_on :fuel_3
   624 set :fn3:t_startup :t_startup3
-    * setaddr :fn3*retaddr *label24
-    * call *label3 :fn3*retval
-    * label *label24
+  625 label *label232
+  626 set .RET_T_STARTUP :fn3:t_startup
+  627 op sub *tmp113 @tick :fn3:t_startup
+  628 op idiv :fn3:secs *tmp113 60
+  629 sensor :fn3:fuel :fn3:reactor @blast-compound
+  630 set :fn3:supply_fuel true
+  631 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  632 sensor :fn3:cryo :fn3:reactor @cryofluid
+  633 sensor *tmp118 .NODE @powerNetStored
+  634 op floor :fn3:charge *tmp118
+  635 sensor *tmp120 .NODE @powerNetIn
+  636 sensor *tmp121 .NODE @powerNetOut
+  637 op sub *tmp122 *tmp120 *tmp121
+  638 op floor :fn3:surplus *tmp122
+  639 op mul *tmp124 .AVG_SURPLUS 0.8
+  640 op mul *tmp125 :fn3:surplus 0.2
+  641 op add .AVG_SURPLUS *tmp124 *tmp125
+  642 sensor :fn3:enabled :fn3:reactor @enabled
+  643 print "#"
+  644 print :fn3:reactor_num
+  645 print " "
+  646 print "- "
+  647 jump *label233 equal :fn3:emerg_shutdown false
+  648 control enabled :fn3:reactor false
+  649 print "emergency mode"
+  650 print "\n"
+  651 set :fn3:supply_fuel false
+  652 jump *label266 always
+  653 label *label233
+  654 jump *label252 equal :fn3:enabled false
+  655 jump *label234 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  656 control enabled :fn3:reactor false
+  657 print "STOP unwanted"
+  658 print "\n"
+  659 jump *label251 always
+  660 label *label234
+  661 op greaterThan *tmp136 :fn3:reactor_num 1
+  662 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  663 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  664 op land *tmp139 *tmp136 *tmp138
+  665 jump *label235 equal *tmp139 false
+  666 control enabled :fn3:reactor false
+  667 print "STOP system fuel low"
+  668 print "\n"
+  669 jump *label250 always
+  670 label *label235
+  671 jump *label236 greaterThan :fn3:fuel 1
+  672 control enabled :fn3:reactor false
+  673 print "STOP fuel low"
+  674 print "\n"
+  675 jump *label249 always
+  676 label *label236
+  677 jump *label237 greaterThan :fn3:cryo .CRYO_ABORT
+  678 control enabled :fn3:reactor false
+  679 print "STOP out of cryo"
+  680 print "\n"
+  681 jump *label248 always
+  682 label *label237
+  683 jump *label244 greaterThanEq :fn3:secs 30
+  684 label *label238
+  685 op sub *tmp102 @tick :fn3:t_startup
+  686 op idiv :fn2:secs *tmp102 60
+  687 op greaterThan *tmp104 :fn2:secs 30
+  688 sensor *tmp105 :fn3:reactor @enabled
+  689 op equal *tmp106 *tmp105 false
+  690 op or *tmp107 *tmp104 *tmp106
+  691 jump *label239 equal *tmp107 false
+  692 set :fn2*retval 0
+  693 jump *label241 always
+  694 label *label239
+  695 label *label240
+  696 op sub :fn2:time_left 30 :fn2:secs
+  697 op mul *tmp110 :fn2:time_left :fn2:time_left
+  698 op idiv :fn2*retval *tmp110 0.04
+  699 jump *label241 always
+  700 label *label241
+  701 op sub *tmp153 :fn3:charge :fn2*retval
+  702 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  703 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  704 op land *tmp156 *tmp154 *tmp155
+  705 jump *label242 equal *tmp156 false
+  706 control enabled :fn3:reactor false
+  707 print "START FAIL battery"
+  708 print "\n"
+  709 set :fn3:supply_fuel false
+  710 jump *label243 always
+  711 label *label242
+  712 op sub :fn3:time_left 30 :fn3:secs
+  713 print "Starting "
+  714 print :fn3:time_left
+  715 print " "
+  716 print "secs, req "
+  717 print :fn2*retval
+  718 print "J"
+  719 print "\n"
+  720 label *label243
+  721 jump *label247 always
+  722 label *label244
+  723 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  724 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  725 op land *tmp163 *tmp161 *tmp162
+  726 jump *label245 equal *tmp163 false
+  727 control enabled :fn3:reactor false
+  728 print "ABANDON - battery crit"
+  729 print "\n"
+  730 set :fn3:supply_fuel false
+  731 jump *label246 always
+  732 label *label245
+  733 op idiv :fn3:mins :fn3:secs 6
+  734 op div :fn3:mins :fn3:mins 10
+  735 print "RUN "
+  736 print :fn3:mins
+  737 print " "
+  738 print "mins"
+  739 print "\n"
+  740 label *label246
+  741 label *label247
+  742 label *label248
+  743 label *label249
+  744 label *label250
+  745 label *label251
+  746 jump *label265 always
+  747 label *label252
+  748 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  749 op sub *tmp170 *tmp169 .PWR_ABORT
+  750 op div *tmp171 *tmp170 .PWR_REQ
+  751 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  752 op div *tmp173 :fn3:surplus .FLOW_REQ
+  753 op max :fn3:flow_units -0.1 *tmp173
+  754 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  755 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  756 jump *label253 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  757 print "IDLE"
+  758 print "\n"
+  759 set :fn3:supply_fuel false
+  760 jump *label264 always
+  761 label *label253
+  762 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  763 jump *label254 greaterThanEq *tmp179 1
+  764 op idiv *tmp183 :fn3:flow_units 0.001
+  765 op div :fn3:flow *tmp183 10
+  766 op idiv *tmp186 :fn3:charge_units 0.001
+  767 op div :fn3:charge *tmp186 10
+  768 print "WAIT power. (%"
+  769 print :fn3:charge
+  770 print "J + %"
+  771 print :fn3:flow
+  772 print "W)"
+  773 print "\n"
+  774 set :fn3:supply_fuel false
+  775 jump *label263 always
+  776 label *label254
+  777 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  778 op land *tmp189 :fn3:fuel_on *tmp188
+  779 jump *label257 equal *tmp189 false
+  780 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  781 jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  782 print "WAIT fuel"
+  783 print "\n"
+  784 jump *label256 always
+  785 label *label255
+  786 print "WAIT system fuel"
+  787 print "\n"
+  788 label *label256
+  789 jump *label262 always
+  790 label *label257
+  791 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  792 jump *label258 greaterThanEq :fn3:fuel_stored *tmp194
+  793 print "WAIT buffer fuel"
+  794 print "\n"
+  795 jump *label261 always
+  796 label *label258
+  797 jump *label259 greaterThanEq :fn3:cryo :fn3:cryo_req
+  798 print "WAIT cryo"
+  799 print "\n"
+  800 jump *label260 always
+  801 label *label259
+  802 print "STARTUP"
+  803 print "\n"
+  804 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  805 control enabled :fn3:reactor true
+  806 label *label260
+  807 label *label261
+  808 label *label262
+  809 label *label263
+  810 label *label264
+  811 label *label265
+  812 label *label266
+  813 sensor *tmp201 :fn3:reactor @enabled
+  814 jump *label267 equal :fn3:enabled *tmp201
+  815 set .RET_T_STARTUP @tick
+  816 label *label267
+  817 label *label268
+  818 set :fn3*retval :fn3:supply_fuel
+  819 jump *label269 always
+  820 label *label269
   821 set :fuel_3 :fn3*retval
   822 set :t_startup3 .RET_T_STARTUP
   823 set :fn3:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   623 set :fn3:fuel_on :fuel_3
   624 set :fn3:t_startup :t_startup3
   625 label *label232
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  626 set .RET_T_STARTUP :t_startup3
+  627 op sub *tmp113 @tick :t_startup3
   628 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  629 sensor :fn3:fuel reactor3 @blast-compound
   630 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  631 sensor :fn3:fuel_stored vault1 @blast-compound
+  632 sensor :fn3:cryo reactor3 @cryofluid
+  633 sensor *tmp118 node1 @powerNetStored
   634 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  635 sensor *tmp120 node1 @powerNetIn
+  636 sensor *tmp121 node1 @powerNetOut
   637 op sub *tmp122 *tmp120 *tmp121
   638 op floor :fn3:surplus *tmp122
   639 op mul *tmp124 .AVG_SURPLUS 0.8
   640 op mul *tmp125 :fn3:surplus 0.2
   641 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  642 sensor :fn3:enabled reactor3 @enabled
   643 print "#"
-    * print :fn3:reactor_num
+  644 print 3
   645 print " "
   646 print "- "
-    * jump *label233 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  647 jump *label233 equal :emerg_shutdown false
+  648 control enabled reactor3 false
   649 print "emergency mode"
   650 print "\n"
   651 set :fn3:supply_fuel false
   652 jump *label266 always
   653 label *label233
   654 jump *label252 equal :fn3:enabled false
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  655 jump *label234 greaterThanEq .REACTORS_DESIRED 3
+  656 control enabled reactor3 false
   657 print "STOP unwanted"
   658 print "\n"
   659 jump *label251 always
   660 label *label234
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  661 op greaterThan *tmp136 3 1
+  662 op mul *tmp137 15 3
+  663 op lessThan *tmp138 :fn3:fuel_stored 45
+  664 op land *tmp139 true *tmp138
   665 jump *label235 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  666 control enabled reactor3 false
   667 print "STOP system fuel low"
   668 print "\n"
   669 jump *label250 always
   670 label *label235
   671 jump *label236 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  672 control enabled reactor3 false
   673 print "STOP fuel low"
   674 print "\n"
   675 jump *label249 always
   676 label *label236
-    * jump *label237 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  677 jump *label237 greaterThan :fn3:cryo 1
+  678 control enabled reactor3 false
   679 print "STOP out of cryo"
   680 print "\n"
   681 jump *label248 always
   682 label *label237
   683 jump *label244 greaterThanEq :fn3:secs 30
   684 label *label238
-    * op sub *tmp102 @tick :fn3:t_startup
+  685 op sub *tmp102 @tick :t_startup3
   686 op idiv :fn2:secs *tmp102 60
   687 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  688 sensor *tmp105 reactor3 @enabled
   689 op equal *tmp106 *tmp105 false
   690 op or *tmp107 *tmp104 *tmp106
   691 jump *label239 equal *tmp107 false
 
   699 jump *label241 always
   700 label *label241
   701 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  702 op lessThan *tmp154 *tmp153 5000
+  703 op lessThan *tmp155 :fn3:surplus -500
   704 op land *tmp156 *tmp154 *tmp155
   705 jump *label242 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  706 control enabled reactor3 false
   707 print "START FAIL battery"
   708 print "\n"
   709 set :fn3:supply_fuel false
 
   720 label *label243
   721 jump *label247 always
   722 label *label244
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  723 op lessThan *tmp161 :fn3:charge 2000
+  724 op lessThan *tmp162 :fn3:surplus -500
   725 op land *tmp163 *tmp161 *tmp162
   726 jump *label245 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  727 control enabled reactor3 false
   728 print "ABANDON - battery crit"
   729 print "\n"
   730 set :fn3:supply_fuel false
 
   746 jump *label265 always
   747 label *label252
   748 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  749 op sub *tmp170 *tmp169 5000
+  750 op div *tmp171 *tmp170 23000
+  751 op mul :fn3:charge_units *tmp171 0.6
+  752 op div *tmp173 :fn3:surplus 2000
   753 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label253 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  754 op mul *tmp175 2 3
+  755 op add :fn3:cryo_req 3 6
+  756 jump *label253 greaterThanEq .REACTORS_DESIRED 3
   757 print "IDLE"
   758 print "\n"
   759 set :fn3:supply_fuel false
 
   774 set :fn3:supply_fuel false
   775 jump *label263 always
   776 label *label254
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  777 op lessThan *tmp188 :fn3:fuel 10
+  778 op land *tmp189 :fuel_3 *tmp188
   779 jump *label257 equal *tmp189 false
   780 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  781 jump *label255 lessThanEq *tmp191 10
   782 print "WAIT fuel"
   783 print "\n"
   784 jump *label256 always
 
   788 label *label256
   789 jump *label262 always
   790 label *label257
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label258 greaterThanEq :fn3:fuel_stored *tmp194
+  791 op mul *tmp194 45 3
+  792 jump *label258 greaterThanEq :fn3:fuel_stored 135
   793 print "WAIT buffer fuel"
   794 print "\n"
   795 jump *label261 always
   796 label *label258
-    * jump *label259 greaterThanEq :fn3:cryo :fn3:cryo_req
+  797 jump *label259 greaterThanEq :fn3:cryo 9
   798 print "WAIT cryo"
   799 print "\n"
   800 jump *label260 always
   801 label *label259
   802 print "STARTUP"
   803 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  804 op add .START_POWER_REQ .START_POWER_REQ 23000
+  805 control enabled reactor3 true
   806 label *label260
   807 label *label261
   808 label *label262
 
   810 label *label264
   811 label *label265
   812 label *label266
-    * sensor *tmp201 :fn3:reactor @enabled
+  813 sensor *tmp201 reactor3 @enabled
   814 jump *label267 equal :fn3:enabled *tmp201
   815 set .RET_T_STARTUP @tick
   816 label *label267
 
   818 set :fn3*retval :fn3:supply_fuel
   819 jump *label269 always
   820 label *label269
-    * set :fuel_3 :fn3*retval
+  821 set :fuel_3 :fn3:supply_fuel
   822 set :t_startup3 .RET_T_STARTUP
   823 set :fn3:reactor reactor4
   824 set :fn3:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   617 label *label154
   618 label *label155
   619 op or :emerg_shutdown :emerg_shutdown :fn4*retval
-    * set :fn3:reactor reactor3
-    * set :fn3:reactor_num 3
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_3
-    * set :fn3:t_startup :t_startup3
   620 label *label232
   621 set .RET_T_STARTUP :t_startup3
   622 op sub *tmp113 @tick :t_startup3
 
   743 op sub *tmp169 :fn3:charge .START_POWER_REQ
   744 op sub *tmp170 *tmp169 5000
   745 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  746 op div :fn3:charge_units *tmp170 38333.333333333336
   747 op div *tmp173 :fn3:surplus 2000
   748 op max :fn3:flow_units -0.1 *tmp173
   749 op mul *tmp175 2 3
 
   810 set .RET_T_STARTUP @tick
   811 label *label267
   812 label *label268
-    * set :fn3*retval :fn3:supply_fuel
   813 jump *label269 always
   814 label *label269
   815 set :fuel_3 :fn3:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    59 control enabled projector1 false
    60 control enabled projector2 false
    61 set :fn4*retval false
-    * jump *label151 always
    62 label *label150
    63 label *label151
    64 op notEqual *tmp9 switch1 null
 
   359 set .RET_T_STARTUP @tick
   360 label *label191
   361 label *label192
-    * jump *label193 always
   362 label *label193
   363 set :fuel_1 :fn3:supply_fuel
   364 set :t_startup1 .RET_T_STARTUP
 
   569 set .RET_T_STARTUP @tick
   570 label *label229
   571 label *label230
-    * jump *label231 always
   572 label *label231
   573 set :fuel_2 :fn3:supply_fuel
   574 set :t_startup2 .RET_T_STARTUP
 
   610 control enabled projector1 false
   611 control enabled projector2 false
   612 set :fn4*retval false
-    * jump *label155 always
   613 label *label154
   614 label *label155
   615 op or :emerg_shutdown :emerg_shutdown :fn4*retval
 
   806 set .RET_T_STARTUP @tick
   807 label *label267
   808 label *label268
-    * jump *label269 always
   809 label *label269
   810 set :fuel_3 :fn3:supply_fuel
   811 set :t_startup3 .RET_T_STARTUP
 
   900 label *label34
   901 label *label30
   902 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
-    * jump *label28 always
   903 label *label28
   904 jump *label35 equal *tmp32 false
   905 control config unloader7 @pyratite
 
   927 label *label100
   928 op idiv *tmp93 .AVG_SURPLUS 100
   929 op div :fn0*retval *tmp93 10
-    * jump *label101 always
   930 label *label101
   931 set :surplus :fn0*retval
   932 sensor :fn0:val node1 @powerNetStored
   933 label *label102
   934 op idiv *tmp93 :fn0:val 100
   935 op div :fn0*retval *tmp93 10
-    * jump *label103 always
   936 label *label103
   937 set :charge :fn0*retval
   938 jump *label42 lessThanEq .START_POWER_REQ 0
   939 label *label104
   940 op idiv *tmp93 .START_POWER_REQ 100
   941 op div :fn0*retval *tmp93 10
-    * jump *label105 always
   942 label *label105
   943 print "Req "
   944 print :fn0*retval
 
  1189 label *label95
  1190 label *label96
  1191 set :fn3*retval :fn3:supply_fuel
-    * jump *label63 always
  1192 label *label63
  1193 return :fn3*retaddr
  1194 end

Modifications by Iterated phase, Jump Optimization, pass 3, iteration 1 (-1 instructions):
 
   899 print "n"
   900 label *label34
   901 label *label30
-    * op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   902 label *label28
-    * jump *label35 equal *tmp32 false
+  903 jump *label35 greaterThanEq :fn6:fuel_stored :fn6:limit
   904 control config unloader7 @pyratite
   905 jump *label36 always
   906 label *label35

Modifications by Final phase, Jump Threading, iteration 1:
 
   200 control enabled reactor1 false
   201 print "STOP unwanted"
   202 print "\n"
-    * jump *label175 always
+  203 jump *label189 always
   204 label *label158
   205 op greaterThan *tmp136 1 1
   206 op mul *tmp137 15 1
 
   210 control enabled reactor1 false
   211 print "STOP system fuel low"
   212 print "\n"
-    * jump *label174 always
+  213 jump *label189 always
   214 label *label159
   215 jump *label160 greaterThan :fn3:fuel 1
   216 control enabled reactor1 false
   217 print "STOP fuel low"
   218 print "\n"
-    * jump *label173 always
+  219 jump *label189 always
   220 label *label160
   221 jump *label161 greaterThan :fn3:cryo 1
   222 control enabled reactor1 false
   223 print "STOP out of cryo"
   224 print "\n"
-    * jump *label172 always
+  225 jump *label189 always
   226 label *label161
   227 jump *label168 greaterThanEq :fn3:secs 30
   228 label *label162
 
   251 print "START FAIL battery"
   252 print "\n"
   253 set :fn3:supply_fuel false
-    * jump *label167 always
+  254 jump *label189 always
   255 label *label166
   256 op sub :fn3:time_left 30 :fn3:secs
   257 print "Starting "
 
   262 print "J"
   263 print "\n"
   264 label *label167
-    * jump *label171 always
+  265 jump *label189 always
   266 label *label168
   267 op lessThan *tmp161 :fn3:charge 2000
   268 op lessThan *tmp162 :fn3:surplus -500
 
   272 print "ABANDON - battery crit"
   273 print "\n"
   274 set :fn3:supply_fuel false
-    * jump *label170 always
+  275 jump *label189 always
   276 label *label169
   277 op idiv :fn3:mins :fn3:secs 6
   278 op div :fn3:mins :fn3:mins 10
 
   325 jump *label179 lessThanEq *tmp191 10
   326 print "WAIT fuel"
   327 print "\n"
-    * jump *label180 always
+  328 jump *label186 always
   329 label *label179
   330 print "WAIT system fuel"
   331 print "\n"
 
   410 control enabled reactor2 false
   411 print "STOP unwanted"
   412 print "\n"
-    * jump *label213 always
+  413 jump *label227 always
   414 label *label196
   415 op greaterThan *tmp136 2 1
   416 op mul *tmp137 15 2
 
   420 control enabled reactor2 false
   421 print "STOP system fuel low"
   422 print "\n"
-    * jump *label212 always
+  423 jump *label227 always
   424 label *label197
   425 jump *label198 greaterThan :fn3:fuel 1
   426 control enabled reactor2 false
   427 print "STOP fuel low"
   428 print "\n"
-    * jump *label211 always
+  429 jump *label227 always
   430 label *label198
   431 jump *label199 greaterThan :fn3:cryo 1
   432 control enabled reactor2 false
   433 print "STOP out of cryo"
   434 print "\n"
-    * jump *label210 always
+  435 jump *label227 always
   436 label *label199
   437 jump *label206 greaterThanEq :fn3:secs 30
   438 label *label200
 
   461 print "START FAIL battery"
   462 print "\n"
   463 set :fn3:supply_fuel false
-    * jump *label205 always
+  464 jump *label227 always
   465 label *label204
   466 op sub :fn3:time_left 30 :fn3:secs
   467 print "Starting "
 
   472 print "J"
   473 print "\n"
   474 label *label205
-    * jump *label209 always
+  475 jump *label227 always
   476 label *label206
   477 op lessThan *tmp161 :fn3:charge 2000
   478 op lessThan *tmp162 :fn3:surplus -500
 
   482 print "ABANDON - battery crit"
   483 print "\n"
   484 set :fn3:supply_fuel false
-    * jump *label208 always
+  485 jump *label227 always
   486 label *label207
   487 op idiv :fn3:mins :fn3:secs 6
   488 op div :fn3:mins :fn3:mins 10
 
   535 jump *label217 lessThanEq *tmp191 10
   536 print "WAIT fuel"
   537 print "\n"
-    * jump *label218 always
+  538 jump *label224 always
   539 label *label217
   540 print "WAIT system fuel"
   541 print "\n"
 
   647 control enabled reactor3 false
   648 print "STOP unwanted"
   649 print "\n"
-    * jump *label251 always
+  650 jump *label265 always
   651 label *label234
   652 op greaterThan *tmp136 3 1
   653 op mul *tmp137 15 3
 
   657 control enabled reactor3 false
   658 print "STOP system fuel low"
   659 print "\n"
-    * jump *label250 always
+  660 jump *label265 always
   661 label *label235
   662 jump *label236 greaterThan :fn3:fuel 1
   663 control enabled reactor3 false
   664 print "STOP fuel low"
   665 print "\n"
-    * jump *label249 always
+  666 jump *label265 always
   667 label *label236
   668 jump *label237 greaterThan :fn3:cryo 1
   669 control enabled reactor3 false
   670 print "STOP out of cryo"
   671 print "\n"
-    * jump *label248 always
+  672 jump *label265 always
   673 label *label237
   674 jump *label244 greaterThanEq :fn3:secs 30
   675 label *label238
 
   698 print "START FAIL battery"
   699 print "\n"
   700 set :fn3:supply_fuel false
-    * jump *label243 always
+  701 jump *label265 always
   702 label *label242
   703 op sub :fn3:time_left 30 :fn3:secs
   704 print "Starting "
 
   709 print "J"
   710 print "\n"
   711 label *label243
-    * jump *label247 always
+  712 jump *label265 always
   713 label *label244
   714 op lessThan *tmp161 :fn3:charge 2000
   715 op lessThan *tmp162 :fn3:surplus -500
 
   719 print "ABANDON - battery crit"
   720 print "\n"
   721 set :fn3:supply_fuel false
-    * jump *label246 always
+  722 jump *label265 always
   723 label *label245
   724 op idiv :fn3:mins :fn3:secs 6
   725 op div :fn3:mins :fn3:mins 10
 
   772 jump *label255 lessThanEq *tmp191 10
   773 print "WAIT fuel"
   774 print "\n"
-    * jump *label256 always
+  775 jump *label262 always
   776 label *label255
   777 print "WAIT system fuel"
   778 print "\n"
 
   870 jump *label31 equal :emerg_shutdown false
   871 print " Enemies detected."
   872 print "\n"
-    * jump *label32 always
+  873 jump *label30 always
   874 label *label31
   875 print " Critical power."
   876 print "\n"
 
  1028 control enabled :fn3:reactor false
  1029 print "STOP unwanted"
  1030 print "\n"
-    * jump *label69 always
+ 1031 jump *label67 always
  1032 label *label68
  1033 op greaterThan *tmp136 :fn3:reactor_num 1
  1034 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
 
  1038 control enabled :fn3:reactor false
  1039 print "STOP system fuel low"
  1040 print "\n"
-    * jump *label71 always
+ 1041 jump *label67 always
  1042 label *label70
  1043 jump *label72 greaterThan :fn3:fuel 1
  1044 control enabled :fn3:reactor false
  1045 print "STOP fuel low"
  1046 print "\n"
-    * jump *label73 always
+ 1047 jump *label67 always
  1048 label *label72
  1049 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
  1050 control enabled :fn3:reactor false
  1051 print "STOP out of cryo"
  1052 print "\n"
-    * jump *label75 always
+ 1053 jump *label67 always
  1054 label *label74
  1055 jump *label76 greaterThanEq :fn3:secs 30
  1056 label *label144
 
  1079 print "START FAIL battery"
  1080 print "\n"
  1081 set :fn3:supply_fuel false
-    * jump *label80 always
+ 1082 jump *label67 always
  1083 label *label79
  1084 op sub :fn3:time_left 30 :fn3:secs
  1085 print "Starting "
 
  1090 print "J"
  1091 print "\n"
  1092 label *label80
-    * jump *label77 always
+ 1093 jump *label67 always
  1094 label *label76
  1095 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
  1096 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
 
  1100 print "ABANDON - battery crit"
  1101 print "\n"
  1102 set :fn3:supply_fuel false
-    * jump *label82 always
+ 1103 jump *label67 always
  1104 label *label81
  1105 op idiv :fn3:mins :fn3:secs 6
  1106 op div :fn3:mins :fn3:mins 10
 
  1153 jump *label89 lessThanEq *tmp191 .FUEL_REQ
  1154 print "WAIT fuel"
  1155 print "\n"
-    * jump *label90 always
+ 1156 jump *label88 always
  1157 label *label89
  1158 print "WAIT system fuel"
  1159 print "\n"

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-4 instructions):
 
    54 control enabled reactor5 false
    55 set :fn4*retval true
    56 jump *label151 always
-    * jump *label150 always
    57 label *label149
    58 control enabled projector1 false
    59 control enabled projector2 false
 
   604 control enabled reactor5 false
   605 set :fn4*retval true
   606 jump *label155 always
-    * jump *label154 always
   607 label *label153
   608 control enabled projector1 false
   609 control enabled projector2 false
 
   990 printflush message1
   991 label *label8
   992 jump *label7 always
-    * label *label9
-    * end
   993 label *label3
   994 set .RET_T_STARTUP :fn3:t_startup
   995 op sub *tmp113 @tick :fn3:t_startup
 
  1186 set :fn3*retval :fn3:supply_fuel
  1187 label *label63
  1188 return :fn3*retaddr
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-132 instructions):
 
    65 op equal *tmp11 *tmp10 false
    66 op land *tmp12 *tmp9 *tmp11
    67 jump *label12 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   68 print "User has disabled emergency switch\n"
    69 set *tmp8 true
    70 jump *label11 always
    71 label *label12
 
   182 op mul *tmp125 :fn3:surplus 0.2
   183 op add .AVG_SURPLUS *tmp124 *tmp125
   184 sensor :fn3:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  185 print "#1 - "
   186 jump *label157 equal :emerg_shutdown false
   187 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  188 print "emergency mode\n"
   189 set :fn3:supply_fuel false
   190 jump *label190 always
   191 label *label157
   192 jump *label176 equal :fn3:enabled false
   193 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   194 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  195 print "STOP unwanted\n"
   196 jump *label189 always
   197 label *label158
   198 op greaterThan *tmp136 1 1
 
   201 op land *tmp139 false *tmp138
   202 jump *label159 equal *tmp139 false
   203 control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
+  204 print "STOP system fuel low\n"
   205 jump *label189 always
   206 label *label159
   207 jump *label160 greaterThan :fn3:fuel 1
   208 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  209 print "STOP fuel low\n"
   210 jump *label189 always
   211 label *label160
   212 jump *label161 greaterThan :fn3:cryo 1
   213 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  214 print "STOP out of cryo\n"
   215 jump *label189 always
   216 label *label161
   217 jump *label168 greaterThanEq :fn3:secs 30
 
   238 op land *tmp156 *tmp154 *tmp155
   239 jump *label166 equal *tmp156 false
   240 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  241 print "START FAIL battery\n"
   242 set :fn3:supply_fuel false
   243 jump *label189 always
   244 label *label166
   245 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  246 print "Starting {0} secs, req {0}J\n"
+  247 format :fn3:time_left
+  248 format :fn2*retval
   249 label *label167
   250 jump *label189 always
   251 label *label168
 
   254 op land *tmp163 *tmp161 *tmp162
   255 jump *label169 equal *tmp163 false
   256 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  257 print "ABANDON - battery crit\n"
   258 set :fn3:supply_fuel false
   259 jump *label189 always
   260 label *label169
   261 op idiv :fn3:mins :fn3:secs 6
   262 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  263 print "RUN {0} mins\n"
+  264 format :fn3:mins
   265 label *label170
   266 label *label171
   267 label *label172
 
   279 op mul *tmp175 2 1
   280 op add :fn3:cryo_req 3 2
   281 jump *label177 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  282 print "IDLE\n"
   283 set :fn3:supply_fuel false
   284 jump *label188 always
   285 label *label177
 
   289 op div :fn3:flow *tmp183 10
   290 op idiv *tmp186 :fn3:charge_units 0.001
   291 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  292 print "WAIT power. (%{0}J + %{0}W)\n"
+  293 format :fn3:charge
+  294 format :fn3:flow
   295 set :fn3:supply_fuel false
   296 jump *label187 always
   297 label *label178
 
   300 jump *label181 equal *tmp189 false
   301 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   302 jump *label179 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  303 print "WAIT fuel\n"
   304 jump *label186 always
   305 label *label179
-    * print "WAIT system fuel"
-    * print "\n"
+  306 print "WAIT system fuel\n"
   307 label *label180
   308 jump *label186 always
   309 label *label181
   310 op mul *tmp194 45 1
   311 jump *label182 greaterThanEq :fn3:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  312 print "WAIT buffer fuel\n"
   313 jump *label185 always
   314 label *label182
   315 jump *label183 greaterThanEq :fn3:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  316 print "WAIT cryo\n"
   317 jump *label184 always
   318 label *label183
-    * print "STARTUP"
-    * print "\n"
+  319 print "STARTUP\n"
   320 op add .START_POWER_REQ .START_POWER_REQ 23000
   321 control enabled reactor1 true
   322 label *label184
 
   366 op mul *tmp125 :fn3:surplus 0.2
   367 op add .AVG_SURPLUS *tmp124 *tmp125
   368 sensor :fn3:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  369 print "#2 - "
   370 jump *label195 equal :emerg_shutdown false
   371 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  372 print "emergency mode\n"
   373 set :fn3:supply_fuel false
   374 jump *label228 always
   375 label *label195
   376 jump *label214 equal :fn3:enabled false
   377 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   378 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  379 print "STOP unwanted\n"
   380 jump *label227 always
   381 label *label196
   382 op greaterThan *tmp136 2 1
 
   385 op land *tmp139 true *tmp138
   386 jump *label197 equal *tmp139 false
   387 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  388 print "STOP system fuel low\n"
   389 jump *label227 always
   390 label *label197
   391 jump *label198 greaterThan :fn3:fuel 1
   392 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  393 print "STOP fuel low\n"
   394 jump *label227 always
   395 label *label198
   396 jump *label199 greaterThan :fn3:cryo 1
   397 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  398 print "STOP out of cryo\n"
   399 jump *label227 always
   400 label *label199
   401 jump *label206 greaterThanEq :fn3:secs 30
 
   422 op land *tmp156 *tmp154 *tmp155
   423 jump *label204 equal *tmp156 false
   424 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  425 print "START FAIL battery\n"
   426 set :fn3:supply_fuel false
   427 jump *label227 always
   428 label *label204
   429 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  430 print "Starting {0} secs, req {0}J\n"
+  431 format :fn3:time_left
+  432 format :fn2*retval
   433 label *label205
   434 jump *label227 always
   435 label *label206
 
   438 op land *tmp163 *tmp161 *tmp162
   439 jump *label207 equal *tmp163 false
   440 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  441 print "ABANDON - battery crit\n"
   442 set :fn3:supply_fuel false
   443 jump *label227 always
   444 label *label207
   445 op idiv :fn3:mins :fn3:secs 6
   446 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  447 print "RUN {0} mins\n"
+  448 format :fn3:mins
   449 label *label208
   450 label *label209
   451 label *label210
 
   463 op mul *tmp175 2 2
   464 op add :fn3:cryo_req 3 4
   465 jump *label215 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  466 print "IDLE\n"
   467 set :fn3:supply_fuel false
   468 jump *label226 always
   469 label *label215
 
   473 op div :fn3:flow *tmp183 10
   474 op idiv *tmp186 :fn3:charge_units 0.001
   475 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  476 print "WAIT power. (%{0}J + %{0}W)\n"
+  477 format :fn3:charge
+  478 format :fn3:flow
   479 set :fn3:supply_fuel false
   480 jump *label225 always
   481 label *label216
 
   484 jump *label219 equal *tmp189 false
   485 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   486 jump *label217 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  487 print "WAIT fuel\n"
   488 jump *label224 always
   489 label *label217
-    * print "WAIT system fuel"
-    * print "\n"
+  490 print "WAIT system fuel\n"
   491 label *label218
   492 jump *label224 always
   493 label *label219
   494 op mul *tmp194 45 2
   495 jump *label220 greaterThanEq :fn3:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  496 print "WAIT buffer fuel\n"
   497 jump *label223 always
   498 label *label220
   499 jump *label221 greaterThanEq :fn3:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  500 print "WAIT cryo\n"
   501 jump *label222 always
   502 label *label221
-    * print "STARTUP"
-    * print "\n"
+  503 print "STARTUP\n"
   504 op add .START_POWER_REQ .START_POWER_REQ 23000
   505 control enabled reactor2 true
   506 label *label222
 
   576 op mul *tmp125 :fn3:surplus 0.2
   577 op add .AVG_SURPLUS *tmp124 *tmp125
   578 sensor :fn3:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  579 print "#3 - "
   580 jump *label233 equal :emerg_shutdown false
   581 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  582 print "emergency mode\n"
   583 set :fn3:supply_fuel false
   584 jump *label266 always
   585 label *label233
   586 jump *label252 equal :fn3:enabled false
   587 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   588 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  589 print "STOP unwanted\n"
   590 jump *label265 always
   591 label *label234
   592 op greaterThan *tmp136 3 1
 
   595 op land *tmp139 true *tmp138
   596 jump *label235 equal *tmp139 false
   597 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  598 print "STOP system fuel low\n"
   599 jump *label265 always
   600 label *label235
   601 jump *label236 greaterThan :fn3:fuel 1
   602 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  603 print "STOP fuel low\n"
   604 jump *label265 always
   605 label *label236
   606 jump *label237 greaterThan :fn3:cryo 1
   607 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  608 print "STOP out of cryo\n"
   609 jump *label265 always
   610 label *label237
   611 jump *label244 greaterThanEq :fn3:secs 30
 
   632 op land *tmp156 *tmp154 *tmp155
   633 jump *label242 equal *tmp156 false
   634 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  635 print "START FAIL battery\n"
   636 set :fn3:supply_fuel false
   637 jump *label265 always
   638 label *label242
   639 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  640 print "Starting {0} secs, req {0}J\n"
+  641 format :fn3:time_left
+  642 format :fn2*retval
   643 label *label243
   644 jump *label265 always
   645 label *label244
 
   648 op land *tmp163 *tmp161 *tmp162
   649 jump *label245 equal *tmp163 false
   650 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  651 print "ABANDON - battery crit\n"
   652 set :fn3:supply_fuel false
   653 jump *label265 always
   654 label *label245
   655 op idiv :fn3:mins :fn3:secs 6
   656 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  657 print "RUN {0} mins\n"
+  658 format :fn3:mins
   659 label *label246
   660 label *label247
   661 label *label248
 
   673 op mul *tmp175 2 3
   674 op add :fn3:cryo_req 3 6
   675 jump *label253 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  676 print "IDLE\n"
   677 set :fn3:supply_fuel false
   678 jump *label264 always
   679 label *label253
 
   683 op div :fn3:flow *tmp183 10
   684 op idiv *tmp186 :fn3:charge_units 0.001
   685 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  686 print "WAIT power. (%{0}J + %{0}W)\n"
+  687 format :fn3:charge
+  688 format :fn3:flow
   689 set :fn3:supply_fuel false
   690 jump *label263 always
   691 label *label254
 
   694 jump *label257 equal *tmp189 false
   695 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   696 jump *label255 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  697 print "WAIT fuel\n"
   698 jump *label262 always
   699 label *label255
-    * print "WAIT system fuel"
-    * print "\n"
+  700 print "WAIT system fuel\n"
   701 label *label256
   702 jump *label262 always
   703 label *label257
   704 op mul *tmp194 45 3
   705 jump *label258 greaterThanEq :fn3:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  706 print "WAIT buffer fuel\n"
   707 jump *label261 always
   708 label *label258
   709 jump *label259 greaterThanEq :fn3:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  710 print "WAIT cryo\n"
   711 jump *label260 always
   712 label *label259
-    * print "STARTUP"
-    * print "\n"
+  713 print "STARTUP\n"
   714 op add .START_POWER_REQ .START_POWER_REQ 23000
   715 control enabled reactor3 true
   716 label *label260
 
   779 op or *tmp43 *tmp42 :emerg_shutdown
   780 jump *label29 equal *tmp43 false
   781 set :fn6:limit 0
-    * print "Central Fuel at "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  782 print "Central Fuel at {0} / 0 - "
+  783 format :fn6:fuel_stored
   784 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  785 print " Enemies detected.\n"
   786 jump *label30 always
   787 label *label31
-    * print " Critical power."
-    * print "\n"
+  788 print " Critical power.\n"
   789 label *label32
   790 jump *label30 always
   791 label *label29
   792 jump *label33 notEqual :fn6:reactors_fueled false
   793 set :fn6:limit 150
-    * print "Fuel "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  794 print "Fuel {0} / 150 (due to emergency)\n"
+  795 format :fn6:fuel_stored
   796 jump *label34 always
   797 label *label33
   798 set :fn6:limit 800
-    * print "Fuel "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  799 print "Fuel {0} / 800\n"
+  800 format :fn6:fuel_stored
   801 label *label34
   802 label *label30
   803 label *label28
 
   814 op lessThan *tmp57 .START_POWER_REQ 10
   815 op land *tmp58 *tmp56 *tmp57
   816 jump *label38 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  817 print "Differential now idle.\n"
   818 control enabled generator1 false
   819 control enabled generator2 false
   820 jump *label39 always
 
   839 op idiv *tmp93 .START_POWER_REQ 100
   840 op div :fn0*retval *tmp93 10
   841 label *label105
-    * print "Req "
-    * print :fn0*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  842 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  843 format :fn0*retval
+  844 format :charge
+  845 format :surplus
   846 jump *label43 always
   847 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :fn0*retval
-    * print "kJ"
-    * print "\n"
+  848 print "Power {0}kW, {0}kJ\n"
+  849 format :surplus
+  850 format :fn0*retval
   851 sensor *tmp71 node1 @powerNetStored
   852 sensor *tmp72 node1 @powerNetCapacity
   853 op div :fn8:stored *tmp71 *tmp72
 
   876 label *label45
   877 label *label43
   878 jump *label52 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  879 print "Require only {0}/5 reactors.\n"
+  880 format .REACTORS_DESIRED
   881 label *label52
   882 label *label53
   883 printflush message1
 
   901 op mul *tmp125 :fn3:surplus 0.2
   902 op add .AVG_SURPLUS *tmp124 *tmp125
   903 sensor :fn3:enabled :fn3:reactor @enabled
-    * print "#"
-    * print :fn3:reactor_num
-    * print " "
-    * print "- "
+  904 print "#{0} - "
+  905 format :fn3:reactor_num
   906 jump *label64 equal :fn3:emerg_shutdown false
   907 control enabled :fn3:reactor false
-    * print "emergency mode"
-    * print "\n"
+  908 print "emergency mode\n"
   909 set :fn3:supply_fuel false
   910 jump *label65 always
   911 label *label64
   912 jump *label66 equal :fn3:enabled false
   913 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   914 control enabled :fn3:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  915 print "STOP unwanted\n"
   916 jump *label67 always
   917 label *label68
   918 op greaterThan *tmp136 :fn3:reactor_num 1
 
   921 op land *tmp139 *tmp136 *tmp138
   922 jump *label70 equal *tmp139 false
   923 control enabled :fn3:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  924 print "STOP system fuel low\n"
   925 jump *label67 always
   926 label *label70
   927 jump *label72 greaterThan :fn3:fuel 1
   928 control enabled :fn3:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  929 print "STOP fuel low\n"
   930 jump *label67 always
   931 label *label72
   932 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   933 control enabled :fn3:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  934 print "STOP out of cryo\n"
   935 jump *label67 always
   936 label *label74
   937 jump *label76 greaterThanEq :fn3:secs 30
 
   958 op land *tmp156 *tmp154 *tmp155
   959 jump *label79 equal *tmp156 false
   960 control enabled :fn3:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  961 print "START FAIL battery\n"
   962 set :fn3:supply_fuel false
   963 jump *label67 always
   964 label *label79
   965 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  966 print "Starting {0} secs, req {0}J\n"
+  967 format :fn3:time_left
+  968 format :fn2*retval
   969 label *label80
   970 jump *label67 always
   971 label *label76
 
   974 op land *tmp163 *tmp161 *tmp162
   975 jump *label81 equal *tmp163 false
   976 control enabled :fn3:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  977 print "ABANDON - battery crit\n"
   978 set :fn3:supply_fuel false
   979 jump *label67 always
   980 label *label81
   981 op idiv :fn3:mins :fn3:secs 6
   982 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  983 print "RUN {0} mins\n"
+  984 format :fn3:mins
   985 label *label82
   986 label *label77
   987 label *label75
 
   999 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
  1000 op add :fn3:cryo_req .CRYO_REQ *tmp175
  1001 jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * print "IDLE"
-    * print "\n"
+ 1002 print "IDLE\n"
  1003 set :fn3:supply_fuel false
  1004 jump *label84 always
  1005 label *label83
 
  1009 op div :fn3:flow *tmp183 10
  1010 op idiv *tmp186 :fn3:charge_units 0.001
  1011 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+ 1012 print "WAIT power. (%{0}J + %{0}W)\n"
+ 1013 format :fn3:charge
+ 1014 format :fn3:flow
  1015 set :fn3:supply_fuel false
  1016 jump *label86 always
  1017 label *label85
 
  1020 jump *label87 equal *tmp189 false
  1021 op add *tmp191 :fn3:fuel :fn3:fuel_stored
  1022 jump *label89 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+ 1023 print "WAIT fuel\n"
  1024 jump *label88 always
  1025 label *label89
-    * print "WAIT system fuel"
-    * print "\n"
+ 1026 print "WAIT system fuel\n"
  1027 label *label90
  1028 jump *label88 always
  1029 label *label87
  1030 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
  1031 jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+ 1032 print "WAIT buffer fuel\n"
  1033 jump *label92 always
  1034 label *label91
  1035 jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+ 1036 print "WAIT cryo\n"
  1037 jump *label94 always
  1038 label *label93
-    * print "STARTUP"
-    * print "\n"
+ 1039 print "STARTUP\n"
  1040 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
  1041 control enabled :fn3:reactor true
  1042 label *label94

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2 0
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always 0 0
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
radar enemy any any health cyclone1 1 :fn4:enemy_found
jump *label149 equal :fn4:enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set :fn4*retval true
jump *label151 always 0 0
label *label149
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set :fn4*retval false
label *label151
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label12 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always 0 0
label *label12
set *tmp8 false
jump *label11 always 0 0
label *label11
op or :emerg_shutdown :fn4*retval *tmp8
op sub *tmp102 @tick :t_startup1
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label125 equal *tmp107 false
set :fn2*retval 0
jump *label127 always 0 0
label *label125
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label127 always 0 0
label *label127
set .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup2
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label129 equal *tmp107 false
set :fn2*retval 0
jump *label131 always 0 0
label *label129
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label131 always 0 0
label *label131
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup3
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label133 equal *tmp107 false
set :fn2*retval 0
jump *label135 always 0 0
label *label133
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label135 always 0 0
label *label135
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup4
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label137 equal *tmp107 false
set :fn2*retval 0
jump *label139 always 0 0
label *label137
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label139 always 0 0
label *label139
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup5
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label141 equal *tmp107 false
set :fn2*retval 0
jump *label143 always 0 0
label *label141
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label143 always 0 0
label *label143
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor1 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor1 @enabled
print "#1 - "
jump *label157 equal :emerg_shutdown false
control enabled reactor1 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label190 always 0 0
label *label157
jump *label176 equal :fn3:enabled false
jump *label158 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false 0 0 0
print "STOP unwanted\n"
jump *label189 always 0 0
label *label158
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :fn3:fuel_stored 15
op land *tmp139 false *tmp138
jump *label159 equal *tmp139 false
control enabled reactor1 false 0 0 0
print "STOP system fuel low\n"
jump *label189 always 0 0
label *label159
jump *label160 greaterThan :fn3:fuel 1
control enabled reactor1 false 0 0 0
print "STOP fuel low\n"
jump *label189 always 0 0
label *label160
jump *label161 greaterThan :fn3:cryo 1
control enabled reactor1 false 0 0 0
print "STOP out of cryo\n"
jump *label189 always 0 0
label *label161
jump *label168 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup1
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label163 equal *tmp107 false
set :fn2*retval 0
jump *label165 always 0 0
label *label163
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label165 always 0 0
label *label165
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label166 equal *tmp156 false
control enabled reactor1 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label189 always 0 0
label *label166
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label189 always 0 0
label *label168
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label169 equal *tmp163 false
control enabled reactor1 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label189 always 0 0
label *label169
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label189 always 0 0
label *label176
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :fn3:cryo_req 3 2
jump *label177 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :fn3:supply_fuel false
jump *label188 always 0 0
label *label177
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label178 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label187 always 0 0
label *label178
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label181 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label179 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label186 always 0 0
label *label179
print "WAIT system fuel\n"
jump *label186 always 0 0
label *label181
op mul *tmp194 45 1
jump *label182 greaterThanEq :fn3:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label185 always 0 0
label *label182
jump *label183 greaterThanEq :fn3:cryo 5
print "WAIT cryo\n"
jump *label184 always 0 0
label *label183
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true 0 0 0
label *label184
label *label185
label *label186
label *label187
label *label188
label *label189
label *label190
sensor *tmp201 reactor1 @enabled
jump *label191 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label191
set :fuel_1 :fn3:supply_fuel
set :t_startup1 .RET_T_STARTUP
jump *label107 equal :fn3:supply_fuel false
control config unloader1 @blast-compound 0 0 0
jump *label108 always 0 0
label *label107
control config unloader1 @scrap 0 0 0
label *label108
jump *label109 notEqual :fn3:supply_fuel false
control config unloader2 @blast-compound 0 0 0
jump *label110 always 0 0
label *label109
control config unloader2 @scrap 0 0 0
label *label110
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor2 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor2 @enabled
print "#2 - "
jump *label195 equal :emerg_shutdown false
control enabled reactor2 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label228 always 0 0
label *label195
jump *label214 equal :fn3:enabled false
jump *label196 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false 0 0 0
print "STOP unwanted\n"
jump *label227 always 0 0
label *label196
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :fn3:fuel_stored 30
op land *tmp139 true *tmp138
jump *label197 equal *tmp139 false
control enabled reactor2 false 0 0 0
print "STOP system fuel low\n"
jump *label227 always 0 0
label *label197
jump *label198 greaterThan :fn3:fuel 1
control enabled reactor2 false 0 0 0
print "STOP fuel low\n"
jump *label227 always 0 0
label *label198
jump *label199 greaterThan :fn3:cryo 1
control enabled reactor2 false 0 0 0
print "STOP out of cryo\n"
jump *label227 always 0 0
label *label199
jump *label206 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup2
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label201 equal *tmp107 false
set :fn2*retval 0
jump *label203 always 0 0
label *label201
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label203 always 0 0
label *label203
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label204 equal *tmp156 false
control enabled reactor2 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label227 always 0 0
label *label204
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label227 always 0 0
label *label206
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label207 equal *tmp163 false
control enabled reactor2 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label227 always 0 0
label *label207
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label227 always 0 0
label *label214
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :fn3:cryo_req 3 4
jump *label215 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :fn3:supply_fuel false
jump *label226 always 0 0
label *label215
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label216 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label225 always 0 0
label *label216
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label219 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label217 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label224 always 0 0
label *label217
print "WAIT system fuel\n"
jump *label224 always 0 0
label *label219
op mul *tmp194 45 2
jump *label220 greaterThanEq :fn3:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label223 always 0 0
label *label220
jump *label221 greaterThanEq :fn3:cryo 7
print "WAIT cryo\n"
jump *label222 always 0 0
label *label221
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true 0 0 0
label *label222
label *label223
label *label224
label *label225
label *label226
label *label227
label *label228
sensor *tmp201 reactor2 @enabled
jump *label229 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label229
set :fuel_2 :fn3:supply_fuel
set :t_startup2 .RET_T_STARTUP
jump *label113 equal :fn3:supply_fuel false
control config unloader3 @blast-compound 0 0 0
jump *label114 always 0 0
label *label113
control config unloader3 @scrap 0 0 0
label *label114
jump *label115 notEqual :fn3:supply_fuel false
control config unloader4 @blast-compound 0 0 0
jump *label116 always 0 0
label *label115
control config unloader4 @scrap 0 0 0
label *label116
radar enemy any any health cyclone1 1 :fn4:enemy_found
jump *label153 equal :fn4:enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set :fn4*retval true
jump *label155 always 0 0
label *label153
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set :fn4*retval false
label *label155
op or :emerg_shutdown :emerg_shutdown :fn4*retval
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor3 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor3 @enabled
print "#3 - "
jump *label233 equal :emerg_shutdown false
control enabled reactor3 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label266 always 0 0
label *label233
jump *label252 equal :fn3:enabled false
jump *label234 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false 0 0 0
print "STOP unwanted\n"
jump *label265 always 0 0
label *label234
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :fn3:fuel_stored 45
op land *tmp139 true *tmp138
jump *label235 equal *tmp139 false
control enabled reactor3 false 0 0 0
print "STOP system fuel low\n"
jump *label265 always 0 0
label *label235
jump *label236 greaterThan :fn3:fuel 1
control enabled reactor3 false 0 0 0
print "STOP fuel low\n"
jump *label265 always 0 0
label *label236
jump *label237 greaterThan :fn3:cryo 1
control enabled reactor3 false 0 0 0
print "STOP out of cryo\n"
jump *label265 always 0 0
label *label237
jump *label244 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup3
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label239 equal *tmp107 false
set :fn2*retval 0
jump *label241 always 0 0
label *label239
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label241 always 0 0
label *label241
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label242 equal *tmp156 false
control enabled reactor3 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label265 always 0 0
label *label242
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label265 always 0 0
label *label244
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label245 equal *tmp163 false
control enabled reactor3 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label265 always 0 0
label *label245
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label265 always 0 0
label *label252
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :fn3:cryo_req 3 6
jump *label253 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :fn3:supply_fuel false
jump *label264 always 0 0
label *label253
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label254 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label263 always 0 0
label *label254
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label257 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label255 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label262 always 0 0
label *label255
print "WAIT system fuel\n"
jump *label262 always 0 0
label *label257
op mul *tmp194 45 3
jump *label258 greaterThanEq :fn3:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label261 always 0 0
label *label258
jump *label259 greaterThanEq :fn3:cryo 9
print "WAIT cryo\n"
jump *label260 always 0 0
label *label259
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true 0 0 0
label *label260
label *label261
label *label262
label *label263
label *label264
label *label265
label *label266
sensor *tmp201 reactor3 @enabled
jump *label267 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label267
set :fuel_3 :fn3:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :fn3:reactor reactor4
set :fn3:reactor_num 4
set :fn3:emerg_shutdown :emerg_shutdown
set :fn3:fuel_on :fuel_4
set :fn3:t_startup :t_startup4
setaddr :fn3*retaddr *label25
call *label3 :fn3*retval
label *label25
set :fuel_4 :fn3*retval
set :t_startup4 .RET_T_STARTUP
set :fn3:reactor reactor5
set :fn3:reactor_num 5
set :fn3:emerg_shutdown :emerg_shutdown
set :fn3:fuel_on :fuel_5
set :fn3:t_startup :t_startup5
setaddr :fn3*retaddr *label26
call *label3 :fn3*retval
label *label26
set :fuel_5 :fn3*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :fuel_3 :fuel_4
op or :fuel_many *tmp27 :fn3*retval
jump *label119 equal :fuel_many false
control config unloader5 @blast-compound 0 0 0
jump *label120 always 0 0
label *label119
control config unloader5 @scrap 0 0 0
label *label120
jump *label121 notEqual :fuel_many false
control config unloader6 @blast-compound 0 0 0
jump *label122 always 0 0
label *label121
control config unloader6 @scrap 0 0 0
label *label122
op or *tmp30 :fuel_1 :fuel_2
op or :fn6:reactors_fueled *tmp30 :fuel_many
sensor *tmp33 node1 @powerNetStored
op floor :fn6:charge *tmp33 0
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :fn6:surplus *tmp37 0
sensor :fn6:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :fn6:charge 5000
op lessThan *tmp41 :fn6:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label29 equal *tmp43 false
set :fn6:limit 0
print "Central Fuel at {0} / 0 - "
format :fn6:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label30 always 0 0
label *label31
print " Critical power.\n"
jump *label30 always 0 0
label *label29
jump *label33 notEqual :fn6:reactors_fueled false
set :fn6:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :fn6:fuel_stored
jump *label34 always 0 0
label *label33
set :fn6:limit 800
print "Fuel {0} / 800\n"
format :fn6:fuel_stored
label *label34
label *label30
jump *label35 greaterThanEq :fn6:fuel_stored :fn6:limit
control config unloader7 @pyratite 0 0 0
jump *label36 always 0 0
label *label35
control config unloader7 @scrap 0 0 0
label *label36
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :fn7:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :fn7:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label38 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false 0 0 0
control enabled generator2 false 0 0 0
jump *label39 always 0 0
label *label38
control enabled generator1 true 0 0 0
control enabled generator2 true 0 0 0
label *label39
op idiv *tmp93 .AVG_SURPLUS 100
op div :fn0*retval *tmp93 10
set :surplus :fn0*retval
sensor :fn0:val node1 @powerNetStored
op idiv *tmp93 :fn0:val 100
op div :fn0*retval *tmp93 10
set :charge :fn0*retval
jump *label42 lessThanEq .START_POWER_REQ 0
op idiv *tmp93 .START_POWER_REQ 100
op div :fn0*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :fn0*retval
format :charge
format :surplus
jump *label43 always 0 0
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :fn0*retval
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :fn8:stored *tmp71 *tmp72
op greaterThan *tmp74 :fn8:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label46 equal *tmp77 false
jump *label48 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label48
label *label46
op lessThan *tmp81 :fn8:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label50 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :fn8:needed 1 *tmp87
op add *tmp89 :fn8:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label50
label *label43
jump *label52 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label52
printflush message1
jump *label7 always 0 0
label *label3
set .RET_T_STARTUP :fn3:t_startup
op sub *tmp113 @tick :fn3:t_startup
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel :fn3:reactor @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored .CONTAINER @blast-compound
sensor :fn3:cryo :fn3:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled :fn3:reactor @enabled
print "#{0} - "
format :fn3:reactor_num
jump *label64 equal :fn3:emerg_shutdown false
control enabled :fn3:reactor false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label65 always 0 0
label *label64
jump *label66 equal :fn3:enabled false
jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
control enabled :fn3:reactor false 0 0 0
print "STOP unwanted\n"
jump *label67 always 0 0
label *label68
op greaterThan *tmp136 :fn3:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
op lessThan *tmp138 :fn3:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label70 equal *tmp139 false
control enabled :fn3:reactor false 0 0 0
print "STOP system fuel low\n"
jump *label67 always 0 0
label *label70
jump *label72 greaterThan :fn3:fuel 1
control enabled :fn3:reactor false 0 0 0
print "STOP fuel low\n"
jump *label67 always 0 0
label *label72
jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
control enabled :fn3:reactor false 0 0 0
print "STOP out of cryo\n"
jump *label67 always 0 0
label *label74
jump *label76 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :fn3:t_startup
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 :fn3:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label145 equal *tmp107 false
set :fn2*retval 0
jump *label147 always 0 0
label *label145
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2*retval *tmp110 0.04
jump *label147 always 0 0
label *label147
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label79 equal *tmp156 false
control enabled :fn3:reactor false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label67 always 0 0
label *label79
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label67 always 0 0
label *label76
op lessThan *tmp161 :fn3:charge .PWR_ABANDON
op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label81 equal *tmp163 false
control enabled :fn3:reactor false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label67 always 0 0
label *label81
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label67 always 0 0
label *label66
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :fn3:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :fn3:surplus .FLOW_REQ
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
op add :fn3:cryo_req .CRYO_REQ *tmp175
jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
print "IDLE\n"
set :fn3:supply_fuel false
jump *label84 always 0 0
label *label83
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label85 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label86 always 0 0
label *label85
op lessThan *tmp188 :fn3:fuel .FUEL_REQ
op land *tmp189 :fn3:fuel_on *tmp188
jump *label87 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label89 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label88 always 0 0
label *label89
print "WAIT system fuel\n"
jump *label88 always 0 0
label *label87
op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label92 always 0 0
label *label91
jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
print "WAIT cryo\n"
jump *label94 always 0 0
label *label93
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :fn3:reactor true 0 0 0
label *label94
label *label92
label *label88
label *label86
label *label84
label *label67
label *label65
sensor *tmp201 :fn3:reactor @enabled
jump *label95 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label95
set :fn3*retval :fn3:supply_fuel
return :fn3*retaddr
