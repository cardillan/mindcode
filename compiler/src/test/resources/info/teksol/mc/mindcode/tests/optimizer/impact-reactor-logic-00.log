   661 instructions before optimizations.
    65 instructions eliminated by Temp Variables Elimination (2 iterations).
    60 instructions eliminated by Dead Code Elimination (11 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    10 instructions eliminated by If Expression Optimization (5 iterations).
    82 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   536 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   802 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 527):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 531):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 540):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+6 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 534):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+43 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 491):
  ! Inline function 'start_reactor' defined at line 140:1        size  +623, benefit      687.5, efficiency      1.104
  * Inline function call at line 80:14                           size  +156, benefit      137.5, efficiency      0.881 (+148 instructions)
    Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 343):
  ! Inline function 'start_reactor' defined at line 140:1        size  +467, benefit      550.0, efficiency      1.178
  * Inline function call at line 84:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 194):
  ! Inline function 'start_reactor' defined at line 140:1        size  +311, benefit      412.5, efficiency      1.326
  * Inline function call at line 89:14                           size  +156, benefit      137.5, efficiency      0.881 (+149 instructions)
    Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
    Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 1: speed optimization selection (cost limit 45):
  ! Inline function 'start_reactor' defined at line 140:1        size  +155, benefit      275.0, efficiency      1.774
  ! Inline function call at line 91:14                           size  +156, benefit      137.5, efficiency      0.881
  ! Inline function call at line 93:14                           size  +156, benefit      137.5, efficiency      0.881

Pass 2: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 3: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Pass 4: speed optimization selection (cost limit 58):
  ! Inline function 'start_reactor' defined at line 140:1        size  +153, benefit      275.0, efficiency      1.797
  ! Inline function call at line 91:14                           size  +154, benefit      137.5, efficiency      0.893
  ! Inline function call at line 93:14                           size  +154, benefit      137.5, efficiency      0.893

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    71 print "\n"
    72 set *tmp8 true
    73 jump *label11 always
-    * set *tmp13 null
    74 jump *label13 always
    75 label *label12
-    * set *tmp13 null
    76 label *label13
    77 set *tmp8 false
    78 jump *label11 always
 
   131 setaddr :update_fuel*retaddr *label20 (h:*label20)
   132 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   133 label *label20
-    * set *tmp20 :update_fuel*retval
   134 set :start_reactor:reactor reactor2
   135 set :start_reactor:reactor_num 2
   136 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   148 setaddr :update_fuel*retaddr *label22 (h:*label22)
   149 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   150 label *label22
-    * set *tmp22 :update_fuel*retval
   151 set :check_radar:unit .TOWER
   152 setaddr :check_radar*retaddr *label23 (h:*label23)
   153 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   196 setaddr :update_fuel*retaddr *label27 (h:*label27)
   197 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   198 label *label27
-    * set *tmp29 :update_fuel*retval
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or *tmp31 *tmp30 :fuel_many
   201 set :throttle_blast:reactors_fueled *tmp31
 
   233 print "\n"
   234 set *tmp45 null
   235 label *label32
-    * set *tmp44 *tmp45
   236 jump *label30 always
   237 label *label29
   238 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   259 print "n"
   260 set *tmp47 null
   261 label *label34
-    * set *tmp44 *tmp47
   262 label *label30
   263 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   264 set *tmp32 *tmp48
 
   293 control enabled generator2 true
   294 set *tmp59 true
   295 label *label39
-    * set *tmp52 *tmp59
   296 label *label37
   297 set :kilo:val .AVG_SURPLUS
   298 setaddr :kilo*retaddr *label40 (h:*label40)
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp68 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   349 label *label48
   350 set *tmp80 null
   351 label *label49
-    * set *tmp78 *tmp80
   352 jump *label47 always
   353 label *label46
-    * set *tmp78 null
   354 label *label47
   355 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   356 op mul *tmp82 .GOAL_BUFFER 0.8
 
   371 label *label51
   372 set *tmp70 *tmp85
   373 label *label45
-    * set *tmp68 *tmp70
   374 label *label43
   375 op notEqual *tmp91 .REACTORS_DESIRED 5
   376 jump *label52 equal *tmp91 false
 
   378 print .REACTORS_DESIRED
   379 print "/5 reactors."
   380 print "\n"
-    * set *tmp92 null
   381 jump *label53 always
   382 label *label52
-    * set *tmp92 null
   383 label *label53
   384 printflush message1
   385 label *label8
 
   428 jump *label61 equal *tmp107 false
   429 set :calc_charge_req*retval 0
   430 jump *label60 always
-    * set *tmp108 null
   431 jump *label62 always
   432 label *label61
-    * set *tmp108 null
   433 label *label62
   434 op sub *tmp109 30 :calc_charge_req:secs
   435 set :calc_charge_req:time_left *tmp109
 
   479 print "emergency mode"
   480 print "\n"
   481 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   482 jump *label65 always
   483 label *label64
   484 jump *label66 equal :start_reactor:enabled false
 
   682 label *label84
   683 set *tmp131 *tmp178
   684 label *label67
-    * set *tmp128 *tmp131
   685 label *label65
   686 sensor *tmp201 :start_reactor:reactor @enabled
   687 op notEqual *tmp202 :start_reactor:enabled *tmp201
   688 jump *label95 equal *tmp202 false
   689 set *tmp204 @tick
   690 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   691 jump *label96 always
   692 label *label95
-    * set *tmp203 null
   693 label *label96
   694 set :start_reactor*retval :start_reactor:supply_fuel
   695 jump *label63 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   226 jump *label31 equal :throttle_blast:emerg_shutdown false
   227 print " Enemies detected."
   228 print "\n"
-    * set *tmp45 null
   229 jump *label32 always
   230 label *label31
   231 print " Critical power."
   232 print "\n"
-    * set *tmp45 null
   233 label *label32
   234 jump *label30 always
   235 label *label29
 
   244 print " "
   245 print "(due to emergency)"
   246 print "\n"
-    * set *tmp47 null
   247 jump *label34 always
   248 label *label33
   249 set :throttle_blast:limit .FUEL_LIMIT
 
   254 print :throttle_blast:limit
   255 print "\"
   256 print "n"
-    * set *tmp47 null
   257 label *label34
   258 label *label30
   259 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   282 print "\n"
   283 control enabled generator1 false
   284 control enabled generator2 false
-    * set *tmp59 false
   285 jump *label39 always
   286 label *label38
   287 control enabled generator1 true
   288 control enabled generator2 true
-    * set *tmp59 true
   289 label *label39
   290 label *label37
   291 set :kilo:val .AVG_SURPLUS
 
   338 jump *label48 equal *tmp79 false
   339 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   340 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   341 jump *label49 always
   342 label *label48
-    * set *tmp80 null
   343 label *label49
   344 jump *label47 always
   345 label *label46
 
   361 label *label50
   362 set *tmp85 null
   363 label *label51
-    * set *tmp70 *tmp85
   364 label *label45
   365 label *label43
   366 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   404 set *tmp101 .FUEL_OFF
   405 label *label59
   406 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   407 label *label55
   408 return :update_fuel*retaddr
   409 end
 
   579 label *label71
   580 set *tmp133 *tmp140
   581 label *label69
-    * set *tmp131 *tmp133
   582 jump *label67 always
   583 label *label66
   584 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   669 label *label86
   670 set *tmp178 *tmp181
   671 label *label84
-    * set *tmp131 *tmp178
   672 label *label67
   673 label *label65
   674 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   356 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   357 op min *tmp90 5 *tmp89
   358 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   359 jump *label51 always
   360 label *label50
-    * set *tmp85 null
   361 label *label51
   362 label *label45
   363 label *label43
 
   476 control enabled *tmp134 false
   477 print "STOP unwanted"
   478 print "\n"
-    * set *tmp133 null
   479 jump *label69 always
   480 label *label68
   481 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   574 label *label73
   575 set *tmp140 *tmp144
   576 label *label71
-    * set *tmp133 *tmp140
   577 label *label69
   578 jump *label67 always
   579 label *label66
 
   593 print "IDLE"
   594 print "\n"
   595 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   596 jump *label84 always
   597 label *label83
   598 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   662 label *label88
   663 set *tmp181 *tmp190
   664 label *label86
-    * set *tmp178 *tmp181
   665 label *label84
   666 label *label67
   667 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   487 control enabled *tmp141 false
   488 print "STOP system fuel low"
   489 print "\n"
-    * set *tmp140 null
   490 jump *label71 always
   491 label *label70
   492 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   571 label *label75
   572 set *tmp144 *tmp148
   573 label *label73
-    * set *tmp140 *tmp144
   574 label *label71
   575 label *label69
   576 jump *label67 always
 
   611 print "W)"
   612 print "\n"
   613 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   614 jump *label86 always
   615 label *label85
   616 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   657 label *label92
   658 set *tmp190 *tmp196
   659 label *label88
-    * set *tmp181 *tmp190
   660 label *label86
   661 label *label84
   662 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   495 control enabled *tmp145 false
   496 print "STOP fuel low"
   497 print "\n"
-    * set *tmp144 null
   498 jump *label73 always
   499 label *label72
   500 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   568 label *label77
   569 set *tmp148 *tmp152
   570 label *label75
-    * set *tmp144 *tmp148
   571 label *label73
   572 label *label71
   573 label *label69
 
   626 print "\n"
   627 set *tmp193 null
   628 label *label90
-    * set *tmp190 *tmp193
   629 jump *label88 always
   630 label *label87
   631 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   652 label *label94
   653 set *tmp196 *tmp198
   654 label *label92
-    * set *tmp190 *tmp196
   655 label *label88
   656 label *label86
   657 label *label84

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   503 control enabled *tmp149 false
   504 print "STOP out of cryo"
   505 print "\n"
-    * set *tmp148 null
   506 jump *label75 always
   507 label *label74
   508 op lessThan *tmp151 :start_reactor:secs 30
 
   565 label *label82
   566 set *tmp152 *tmp164
   567 label *label77
-    * set *tmp148 *tmp152
   568 label *label75
   569 label *label73
   570 label *label71
 
   617 jump *label89 equal *tmp192 false
   618 print "WAIT fuel"
   619 print "\n"
-    * set *tmp193 null
   620 jump *label90 always
   621 label *label89
   622 print "WAIT system fuel"
   623 print "\n"
-    * set *tmp193 null
   624 label *label90
   625 jump *label88 always
   626 label *label87
 
   629 jump *label91 equal *tmp195 false
   630 print "WAIT buffer fuel"
   631 print "\n"
-    * set *tmp196 null
   632 jump *label92 always
   633 label *label91
   634 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   645 control enabled *tmp199 true
   646 set *tmp198 true
   647 label *label94
-    * set *tmp196 *tmp198
   648 label *label92
   649 label *label88
   650 label *label86

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   537 print "\n"
   538 set *tmp157 null
   539 label *label80
-    * set *tmp152 *tmp157
   540 jump *label77 always
   541 label *label76
   542 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   562 print "\n"
   563 set *tmp164 null
   564 label *label82
-    * set *tmp152 *tmp164
   565 label *label77
   566 label *label75
   567 label *label73
 
   633 jump *label93 equal *tmp197 false
   634 print "WAIT cryo"
   635 print "\n"
-    * set *tmp198 null
   636 jump *label94 always
   637 label *label93
   638 print "STARTUP"
 
   640 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   641 set *tmp199 :start_reactor:reactor
   642 control enabled *tmp199 true
-    * set *tmp198 true
   643 label *label94
   644 label *label92
   645 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   523 print "START FAIL battery"
   524 print "\n"
   525 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   526 jump *label80 always
   527 label *label79
   528 op sub *tmp160 30 :start_reactor:secs
 
   534 print :start_reactor:charge_req
   535 print "J"
   536 print "\n"
-    * set *tmp157 null
   537 label *label80
   538 jump *label77 always
   539 label *label76
 
   546 print "ABANDON - battery crit"
   547 print "\n"
   548 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   549 jump *label82 always
   550 label *label81
   551 op idiv *tmp167 :start_reactor:secs 6
 
   557 print " "
   558 print "mins"
   559 print "\n"
-    * set *tmp164 null
   560 label *label82
   561 label *label77
   562 label *label75

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-65 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :check_radar*retaddr *label10 (h:*label10)
    59 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    60 label *label10
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :check_radar*retval
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
    64 op equal *tmp11 *tmp10 false
 
    81 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
    82 call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
    83 label *label14
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 setaddr :calc_charge_req*retaddr *label15 (h:*label15)
    88 call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
    89 label *label15
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   90 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    91 set :calc_charge_req:reactor reactor3
    92 set :calc_charge_req:time :t_startup3
    93 setaddr :calc_charge_req*retaddr *label16 (h:*label16)
    94 call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
    95 label *label16
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor4
    98 set :calc_charge_req:time :t_startup4
    99 setaddr :calc_charge_req*retaddr *label17 (h:*label17)
   100 call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
   101 label *label17
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  102 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   103 set :calc_charge_req:reactor reactor5
   104 set :calc_charge_req:time :t_startup5
   105 setaddr :calc_charge_req*retaddr *label18 (h:*label18)
   106 call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
   107 label *label18
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+  108 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   109 set :start_reactor:reactor reactor1
   110 set :start_reactor:reactor_num 1
   111 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   114 setaddr :start_reactor*retaddr *label19 (h:*label19)
   115 call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
   116 label *label19
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  117 set :fuel_1 :start_reactor*retval
   118 set :t_startup1 .RET_T_STARTUP
   119 set :update_fuel:fuel :fuel_1
   120 set :update_fuel:uld_in .ULD_IN_1
 
   130 setaddr :start_reactor*retaddr *label21 (h:*label21)
   131 call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
   132 label *label21
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  133 set :fuel_2 :start_reactor*retval
   134 set :t_startup2 .RET_T_STARTUP
   135 set :update_fuel:fuel :fuel_2
   136 set :update_fuel:uld_in .ULD_IN_2
 
   142 setaddr :check_radar*retaddr *label23 (h:*label23)
   143 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   144 label *label23
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  145 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   146 set :start_reactor:reactor reactor3
   147 set :start_reactor:reactor_num 3
   148 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   151 setaddr :start_reactor*retaddr *label24 (h:*label24)
   152 call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
   153 label *label24
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  154 set :fuel_3 :start_reactor*retval
   155 set :t_startup3 .RET_T_STARTUP
   156 set :start_reactor:reactor reactor4
   157 set :start_reactor:reactor_num 4
 
   161 setaddr :start_reactor*retaddr *label25 (h:*label25)
   162 call *label3 *invalid :start_reactor*retval (m:*label25) (h:*label25)
   163 label *label25
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  164 set :fuel_4 :start_reactor*retval
   165 set :t_startup4 .RET_T_STARTUP
   166 set :start_reactor:reactor reactor5
   167 set :start_reactor:reactor_num 5
 
   171 setaddr :start_reactor*retaddr *label26 (h:*label26)
   172 call *label3 *invalid :start_reactor*retval (m:*label26) (h:*label26)
   173 label *label26
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  174 set :fuel_5 :start_reactor*retval
   175 set :t_startup5 .RET_T_STARTUP
   176 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  177 op or :fuel_many *tmp27 :fuel_5
   178 set :update_fuel:fuel :fuel_many
   179 set :update_fuel:uld_in .ULD_IN_MANY
   180 set :update_fuel:uld_out .ULD_OUT_MANY
 
   182 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   183 label *label27
   184 op or *tmp30 :fuel_1 :fuel_2
-    * op or *tmp31 *tmp30 :fuel_many
-    * set :throttle_blast:reactors_fueled *tmp31
+  185 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   186 set :throttle_blast:emerg_shutdown :emerg_shutdown
   187 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  188 op floor :throttle_blast:charge *tmp33
   189 sensor *tmp35 .NODE @powerNetIn
   190 sensor *tmp36 .NODE @powerNetOut
   191 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  192 op floor :throttle_blast:surplus *tmp37
+  193 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   194 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   195 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   196 op land *tmp42 *tmp40 *tmp41
 
   237 print "n"
   238 label *label34
   239 label *label30
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  240 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   241 jump *label28 always
   242 set *tmp32 null
   243 label *label28
 
   252 control config *tmp49 *tmp51
   253 sensor *tmp53 .NODE @powerNetStored
   254 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  255 op div :diff_generators:stored_pc *tmp53 *tmp54
   256 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   257 op lessThan *tmp57 .START_POWER_REQ 10
   258 op land *tmp58 *tmp56 *tmp57
 
   271 setaddr :kilo*retaddr *label40 (h:*label40)
   272 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   273 label *label40
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  274 set :surplus :kilo*retval
+  275 sensor :kilo:val .NODE @powerNetStored
   276 setaddr :kilo*retaddr *label41 (h:*label41)
   277 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   278 label *label41
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  279 set :charge :kilo*retval
   280 op greaterThan *tmp67 .START_POWER_REQ 0
   281 jump *label42 equal *tmp67 false
   282 set :kilo:val .START_POWER_REQ
   283 setaddr :kilo*retaddr *label44 (h:*label44)
   284 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   285 label *label44
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  286 set :req :kilo*retval
   287 print "Req "
   288 print :req
   289 print "kJ / "
 
   302 print "\n"
   303 sensor *tmp71 .NODE @powerNetStored
   304 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  305 op div :update_reactors_desired:stored *tmp71 *tmp72
   306 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   307 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   308 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   325 jump *label50 equal *tmp84 false
   326 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   327 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  328 op max :update_reactors_desired:needed 1 *tmp87
   329 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  330 op min .REACTORS_DESIRED 5 *tmp89
   331 jump *label51 always
   332 label *label50
   333 label *label51
 
   349 end
   350 label *label0
   351 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  352 op div :kilo*retval *tmp93 10
   353 jump *label54 always
   354 set :kilo*retval null
   355 label *label54
 
   378 end
   379 label *label2
   380 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  381 op idiv :calc_charge_req:secs *tmp102 60
   382 op greaterThan *tmp104 :calc_charge_req:secs 30
   383 sensor *tmp105 :calc_charge_req:reactor @enabled
   384 op equal *tmp106 *tmp105 false
 
   389 jump *label62 always
   390 label *label61
   391 label *label62
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  392 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   393 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   394 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  395 op floor :calc_charge_req:charge_req *tmp111
   396 set :calc_charge_req*retval :calc_charge_req:charge_req
   397 jump *label60 always
   398 set :calc_charge_req*retval null
 
   402 label *label3
   403 set .RET_T_STARTUP :start_reactor:t_startup
   404 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  405 op idiv :start_reactor:secs *tmp113 60
+  406 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   407 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  408 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  409 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   410 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  411 op floor :start_reactor:charge *tmp118
   412 sensor *tmp120 .NODE @powerNetIn
   413 sensor *tmp121 .NODE @powerNetOut
   414 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  415 op floor :start_reactor:surplus *tmp122
   416 op mul *tmp124 .AVG_SURPLUS 0.8
   417 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  418 op add .AVG_SURPLUS *tmp124 *tmp125
+  419 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   420 print "#"
   421 print :start_reactor:reactor_num
   422 print " "
   423 print "- "
   424 jump *label64 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  425 control enabled :start_reactor:reactor false
   426 print "emergency mode"
   427 print "\n"
   428 set :start_reactor:supply_fuel false
 
   431 jump *label66 equal :start_reactor:enabled false
   432 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   433 jump *label68 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  434 control enabled :start_reactor:reactor false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label69 always
 
   441 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   442 op land *tmp139 *tmp136 *tmp138
   443 jump *label70 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  444 control enabled :start_reactor:reactor false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label71 always
   448 label *label70
   449 op lessThanEq *tmp143 :start_reactor:fuel 1
   450 jump *label72 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  451 control enabled :start_reactor:reactor false
   452 print "STOP fuel low"
   453 print "\n"
   454 jump *label73 always
   455 label *label72
   456 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   457 jump *label74 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  458 control enabled :start_reactor:reactor false
   459 print "STOP out of cryo"
   460 print "\n"
   461 jump *label75 always
 
   473 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   474 op land *tmp156 *tmp154 *tmp155
   475 jump *label79 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  476 control enabled :start_reactor:reactor false
   477 print "START FAIL battery"
   478 print "\n"
   479 set :start_reactor:supply_fuel false
   480 jump *label80 always
   481 label *label79
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  482 op sub :start_reactor:time_left 30 :start_reactor:secs
   483 print "Starting "
   484 print :start_reactor:time_left
   485 print " "
 
   494 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   495 op land *tmp163 *tmp161 *tmp162
   496 jump *label81 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  497 control enabled :start_reactor:reactor false
   498 print "ABANDON - battery crit"
   499 print "\n"
   500 set :start_reactor:supply_fuel false
   501 jump *label82 always
   502 label *label81
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  503 op idiv :start_reactor:mins :start_reactor:secs 6
+  504 op div :start_reactor:mins :start_reactor:mins 10
   505 print "RUN "
   506 print :start_reactor:mins
   507 print " "
 
   518 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   519 op sub *tmp170 *tmp169 .PWR_ABORT
   520 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  521 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   522 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  523 op max :start_reactor:flow_units -0.1 *tmp173
   524 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  525 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   526 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   527 jump *label83 equal *tmp177 false
   528 print "IDLE"
 
   535 jump *label85 equal *tmp180 false
   536 op mul *tmp182 :start_reactor:flow_units 1000
   537 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  538 op div :start_reactor:flow *tmp183 10
   539 op mul *tmp185 :start_reactor:charge_units 1000
   540 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  541 op div :start_reactor:charge *tmp186 10
   542 print "WAIT power. (%"
   543 print :start_reactor:charge
   544 print "J + %"
 
   579 print "STARTUP"
   580 print "\n"
   581 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  582 control enabled :start_reactor:reactor true
   583 label *label94
   584 label *label92
   585 label *label88
 
   590 sensor *tmp201 :start_reactor:reactor @enabled
   591 op notEqual *tmp202 :start_reactor:enabled *tmp201
   592 jump *label95 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  593 set .RET_T_STARTUP @tick
   594 jump *label96 always
   595 label *label95
   596 label *label96
 
   601 return :start_reactor*retaddr
   602 end
   603 label *label4
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  604 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   605 op notEqual *tmp206 :check_radar:enemy_found null
   606 jump *label98 equal *tmp206 false
   607 control enabled projector1 true
   608 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  609 control config .ULD_IN_1 .FUEL_OFF
+  610 control config .ULD_OUT_1 .FUEL
+  611 control config .ULD_IN_2 .FUEL_OFF
+  612 control config .ULD_OUT_2 .FUEL
+  613 control config .ULD_IN_MANY .FUEL_OFF
+  614 control config .ULD_OUT_MANY .FUEL
+  615 control config .ULD_MIXER .FUEL_OFF
   616 control enabled reactor1 false
   617 control enabled reactor2 false
   618 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   212 label *label32
   213 jump *label30 always
   214 label *label29
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp46 false
+  215 jump *label33 notEqual :throttle_blast:reactors_fueled false
   216 set :throttle_blast:limit .FUEL_LIMIT_LOW
   217 print "Fuel "
   218 print :throttle_blast:fuel_stored
 
   274 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   275 label *label41
   276 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label42 equal *tmp67 false
+  277 jump *label42 lessThanEq .START_POWER_REQ 0
   278 set :kilo:val .START_POWER_REQ
   279 setaddr :kilo*retaddr *label44 (h:*label44)
   280 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
 
   304 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   305 op land *tmp77 *tmp74 *tmp76
   306 jump *label46 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label48 equal *tmp79 false
+  307 jump *label48 lessThanEq .REACTORS_DESIRED 2
   308 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   309 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   310 jump *label49 always
 
   328 label *label51
   329 label *label45
   330 label *label43
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label52 equal *tmp91 false
+  331 jump *label52 equal .REACTORS_DESIRED 5
   332 print "Require only "
   333 print .REACTORS_DESIRED
   334 print "/5 reactors."
 
   359 label *label57
   360 control config *tmp95 *tmp97
   361 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label58 equal *tmp100 false
+  362 jump *label58 notEqual :update_fuel:fuel false
   363 set *tmp101 .FUEL
   364 jump *label59 always
   365 label *label58
 
   422 jump *label65 always
   423 label *label64
   424 jump *label66 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label68 equal *tmp132 false
+  425 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   426 control enabled :start_reactor:reactor false
   427 print "STOP unwanted"
   428 print "\n"
 
   438 print "\n"
   439 jump *label71 always
   440 label *label70
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label72 equal *tmp143 false
+  441 jump *label72 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label73 always
   446 label *label72
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label74 equal *tmp147 false
+  447 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label75 always
   452 label *label74
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label76 equal *tmp151 false
+  453 jump *label76 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
 
   512 op max :start_reactor:flow_units -0.1 *tmp173
   513 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label83 equal *tmp177 false
+  515 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label84 always
   520 label *label83
   521 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label85 equal *tmp180 false
+  522 jump *label85 greaterThanEq *tmp179 1
   523 op mul *tmp182 :start_reactor:flow_units 1000
   524 op floor *tmp183 *tmp182
   525 op div :start_reactor:flow *tmp183 10
 
   539 op land *tmp189 :start_reactor:fuel_on *tmp188
   540 jump *label87 equal *tmp189 false
   541 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label89 equal *tmp192 false
+  542 jump *label89 lessThanEq *tmp191 .FUEL_REQ
   543 print "WAIT fuel"
   544 print "\n"
   545 jump *label90 always
 
   550 jump *label88 always
   551 label *label87
   552 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label91 equal *tmp195 false
+  553 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
   554 print "WAIT buffer fuel"
   555 print "\n"
   556 jump *label92 always
   557 label *label91
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label93 equal *tmp197 false
+  558 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   559 print "WAIT cryo"
   560 print "\n"
   561 jump *label94 always
 
   572 label *label67
   573 label *label65
   574 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label95 equal *tmp202 false
+  575 jump *label95 equal :start_reactor:enabled *tmp201
   576 set .RET_T_STARTUP @tick
   577 jump *label96 always
   578 label *label95
 
   585 end
   586 label *label4
   587 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label98 equal *tmp206 false
+  588 jump *label98 equal :check_radar:enemy_found null
   589 control enabled projector1 true
   590 control enabled projector2 true
   591 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   306 jump *label48 lessThanEq .REACTORS_DESIRED 2
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label49 always
   309 label *label48
   310 label *label49
-    * jump *label47 always
   311 label *label46
   312 label *label47
   313 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   320 op max :update_reactors_desired:needed 1 *tmp87
   321 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   322 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label51 always
   323 label *label50
   324 label *label51
   325 label *label45
 
   329 print .REACTORS_DESIRED
   330 print "/5 reactors."
   331 print "\n"
-    * jump *label53 always
   332 label *label52
   333 label *label53
   334 printflush message1
 
   374 jump *label61 equal *tmp107 false
   375 set :calc_charge_req*retval 0
   376 jump *label60 always
-    * jump *label62 always
   377 label *label61
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   568 sensor *tmp201 :start_reactor:reactor @enabled
   569 jump *label95 equal :start_reactor:enabled *tmp201
   570 set .RET_T_STARTUP @tick
-    * jump *label96 always
   571 label *label95
   572 label *label96
   573 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   380 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  381 op idiv :calc_charge_req:charge_req *tmp110 0.04
   382 set :calc_charge_req*retval :calc_charge_req:charge_req
   383 jump *label60 always
   384 set :calc_charge_req*retval null
 
   513 label *label83
   514 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   515 jump *label85 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  516 op idiv *tmp183 :start_reactor:flow_units 0.001
   517 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  518 op idiv *tmp186 :start_reactor:charge_units 0.001
   519 op div :start_reactor:charge *tmp186 10
   520 print "WAIT power. (%"
   521 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 setaddr :check_radar*retaddr *label10 (h:*label10)
    57 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    58 label *label10
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :check_radar*retval *tmp8
    75 set :calc_charge_req:reactor reactor1
    76 set :calc_charge_req:time :t_startup1
    77 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
 
   112 label *label19
   113 set :fuel_1 :start_reactor*retval
   114 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  115 set :update_fuel:fuel :start_reactor*retval
+  116 set :update_fuel:uld_in unloader1
+  117 set :update_fuel:uld_out unloader2
   118 setaddr :update_fuel*retaddr *label20 (h:*label20)
   119 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   120 label *label20
 
   128 label *label21
   129 set :fuel_2 :start_reactor*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  131 set :update_fuel:fuel :start_reactor*retval
+  132 set :update_fuel:uld_in unloader3
+  133 set :update_fuel:uld_out unloader4
   134 setaddr :update_fuel*retaddr *label22 (h:*label22)
   135 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   136 label *label22
-    * set :check_radar:unit .TOWER
+  137 set :check_radar:unit cyclone1
   138 setaddr :check_radar*retaddr *label23 (h:*label23)
   139 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   140 label *label23
 
   170 set :fuel_5 :start_reactor*retval
   171 set :t_startup5 .RET_T_STARTUP
   172 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  173 op or :fuel_many *tmp27 :start_reactor*retval
   174 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  175 set :update_fuel:uld_in unloader5
+  176 set :update_fuel:uld_out unloader6
   177 setaddr :update_fuel*retaddr *label27 (h:*label27)
   178 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   179 label *label27
   180 op or *tmp30 :fuel_1 :fuel_2
   181 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   182 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  183 sensor *tmp33 node1 @powerNetStored
   184 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  185 sensor *tmp35 node1 @powerNetIn
+  186 sensor *tmp36 node1 @powerNetOut
   187 op sub *tmp37 *tmp35 *tmp36
   188 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  189 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  190 op lessThan *tmp40 :throttle_blast:charge 5000
+  191 op lessThan *tmp41 :throttle_blast:surplus -500
   192 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  193 op or *tmp43 *tmp42 :emerg_shutdown
   194 jump *label29 equal *tmp43 false
   195 set :throttle_blast:limit 0
   196 print "Central Fuel at "
   197 print :throttle_blast:fuel_stored
   198 print " "
   199 print "/ "
-    * print :throttle_blast:limit
+  200 print 0
   201 print " "
   202 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  203 jump *label31 equal :emerg_shutdown false
   204 print " Enemies detected."
   205 print "\n"
   206 jump *label32 always
 
   211 jump *label30 always
   212 label *label29
   213 jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  214 set :throttle_blast:limit 150
   215 print "Fuel "
   216 print :throttle_blast:fuel_stored
   217 print " "
   218 print "/ "
-    * print :throttle_blast:limit
+  219 print .FUEL_LIMIT_LOW
   220 print " "
   221 print "(due to emergency)"
   222 print "\n"
   223 jump *label34 always
   224 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  225 set :throttle_blast:limit 800
   226 print "Fuel "
   227 print :throttle_blast:fuel_stored
   228 print " "
   229 print "/ "
-    * print :throttle_blast:limit
+  230 print .FUEL_LIMIT
   231 print "\"
   232 print "n"
   233 label *label34
   234 label *label30
   235 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   236 jump *label28 always
-    * set *tmp32 null
   237 label *label28
   238 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  239 set *tmp49 unloader7
+  240 jump *label35 equal *tmp32 false
+  241 set *tmp51 @pyratite
   242 jump *label36 always
   243 label *label35
-    * set *tmp51 .FUEL_OFF
+  244 set *tmp51 @scrap
   245 label *label36
-    * control config *tmp49 *tmp51
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  246 control config .ULD_MIXER *tmp51
+  247 sensor *tmp53 node1 @powerNetStored
+  248 sensor *tmp54 node1 @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp53 *tmp54
   250 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   251 op lessThan *tmp57 .START_POWER_REQ 10
 
   266 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   267 label *label40
   268 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  269 sensor :kilo:val node1 @powerNetStored
   270 setaddr :kilo*retaddr *label41 (h:*label41)
   271 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   272 label *label41
 
   278 label *label44
   279 set :req :kilo*retval
   280 print "Req "
-    * print :req
+  281 print :kilo*retval
   282 print "kJ / "
   283 print :charge
   284 print "kJ. "
 
   290 print "Power "
   291 print :surplus
   292 print "kW, "
-    * print :charge
+  293 print :kilo*retval
   294 print "kJ"
   295 print "\n"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  296 sensor *tmp71 node1 @powerNetStored
+  297 sensor *tmp72 node1 @powerNetCapacity
   298 op div :update_reactors_desired:stored *tmp71 *tmp72
   299 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  300 op add *tmp75 6500 10000
+  301 op greaterThan *tmp76 .AVG_SURPLUS 16500
   302 op land *tmp77 *tmp74 *tmp76
   303 jump *label46 equal *tmp77 false
   304 jump *label48 lessThanEq .REACTORS_DESIRED 2
   305 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  306 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   307 label *label48
   308 label *label49
   309 label *label46
   310 label *label47
   311 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  312 op mul *tmp82 10000 0.8
+  313 op lessThan *tmp83 .AVG_SURPLUS 8000
   314 op land *tmp84 *tmp81 *tmp83
   315 jump *label50 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  316 op sub *tmp86 .AVG_SURPLUS 10000
+  317 op idiv *tmp87 *tmp86 6500
   318 op max :update_reactors_desired:needed 1 *tmp87
   319 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   320 op min .REACTORS_DESIRED 5 *tmp89
 
   338 op idiv *tmp93 :kilo:val 100
   339 op div :kilo*retval *tmp93 10
   340 jump *label54 always
-    * set :kilo*retval null
   341 label *label54
   342 return :kilo*retaddr
   343 end
 
   349 label *label56
   350 set *tmp97 .FUEL_OFF
   351 label *label57
-    * control config *tmp95 *tmp97
+  352 control config :update_fuel:uld_in *tmp97
   353 set *tmp98 :update_fuel:uld_out
   354 jump *label58 notEqual :update_fuel:fuel false
   355 set *tmp101 .FUEL
 
   357 label *label58
   358 set *tmp101 .FUEL_OFF
   359 label *label59
-    * control config *tmp98 *tmp101
+  360 control config :update_fuel:uld_out *tmp101
   361 label *label55
   362 return :update_fuel*retaddr
   363 end
 
   378 op idiv :calc_charge_req:charge_req *tmp110 0.04
   379 set :calc_charge_req*retval :calc_charge_req:charge_req
   380 jump *label60 always
-    * set :calc_charge_req*retval null
   381 label *label60
   382 return :calc_charge_req*retaddr
   383 end
 
   446 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   447 label *label78
   448 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  449 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   450 op lessThan *tmp154 *tmp153 .PWR_ABORT
   451 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   452 op land *tmp156 *tmp154 *tmp155
 
   462 print :start_reactor:time_left
   463 print " "
   464 print "secs, req "
-    * print :start_reactor:charge_req
+  465 print :calc_charge_req*retval
   466 print "J"
   467 print "\n"
   468 label *label80
 
   565 label *label96
   566 set :start_reactor*retval :start_reactor:supply_fuel
   567 jump *label63 always
-    * set :start_reactor*retval null
   568 label *label63
   569 return :start_reactor*retaddr
   570 end
 
   587 control enabled reactor5 false
   588 set :check_radar*retval true
   589 jump *label97 always
-    * set *tmp207 null
   590 jump *label99 always
   591 label *label98
   592 control enabled projector1 false
   593 control enabled projector2 false
   594 set :check_radar*retval false
   595 jump *label97 always
-    * set *tmp207 null
   596 label *label99
-    * set :check_radar*retval *tmp207
+  597 set :check_radar*retval null
   598 label *label97
   599 return :check_radar*retaddr
   600 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-15 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :check_radar:unit cyclone1
    52 setaddr :check_radar*retaddr *label10 (h:*label10)
    53 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    54 label *label10
-    * set :emerg_shutdown :check_radar*retval
    55 op notEqual *tmp9 switch1 null
    56 sensor *tmp10 switch1 @enabled
    57 op equal *tmp11 *tmp10 false
 
   174 label *label27
   175 op or *tmp30 :fuel_1 :fuel_2
   176 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   177 sensor *tmp33 node1 @powerNetStored
   178 op floor :throttle_blast:charge *tmp33
   179 sensor *tmp35 node1 @powerNetIn
 
   210 print :throttle_blast:fuel_stored
   211 print " "
   212 print "/ "
-    * print .FUEL_LIMIT_LOW
+  213 print 150
   214 print " "
   215 print "(due to emergency)"
   216 print "\n"
 
   221 print :throttle_blast:fuel_stored
   222 print " "
   223 print "/ "
-    * print .FUEL_LIMIT
+  224 print 800
   225 print "\"
   226 print "n"
   227 label *label34
 
   229 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   230 jump *label28 always
   231 label *label28
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   232 jump *label35 equal *tmp32 false
   233 set *tmp51 @pyratite
   234 jump *label36 always
   235 label *label35
   236 set *tmp51 @scrap
   237 label *label36
-    * control config .ULD_MIXER *tmp51
+  238 control config unloader7 *tmp51
   239 sensor *tmp53 node1 @powerNetStored
   240 sensor *tmp54 node1 @powerNetCapacity
   241 op div :diff_generators:stored_pc *tmp53 *tmp54
 
   268 setaddr :kilo*retaddr *label44 (h:*label44)
   269 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   270 label *label44
-    * set :req :kilo*retval
   271 print "Req "
   272 print :kilo*retval
   273 print "kJ / "
 
   288 sensor *tmp72 node1 @powerNetCapacity
   289 op div :update_reactors_desired:stored *tmp71 *tmp72
   290 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   291 op greaterThan *tmp76 .AVG_SURPLUS 16500
   292 op land *tmp77 *tmp74 *tmp76
   293 jump *label46 equal *tmp77 false
 
   299 label *label46
   300 label *label47
   301 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   302 op lessThan *tmp83 .AVG_SURPLUS 8000
   303 op land *tmp84 *tmp81 *tmp83
   304 jump *label50 equal *tmp84 false
 
   331 return :kilo*retaddr
   332 end
   333 label *label1
-    * set *tmp95 :update_fuel:uld_in
   334 jump *label56 equal :update_fuel:fuel false
   335 set *tmp97 .FUEL
   336 jump *label57 always
 
   338 set *tmp97 .FUEL_OFF
   339 label *label57
   340 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   341 jump *label58 notEqual :update_fuel:fuel false
   342 set *tmp101 .FUEL
   343 jump *label59 always
 
   432 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
   433 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   434 label *label78
-    * set :start_reactor:charge_req :calc_charge_req*retval
   435 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   436 op lessThan *tmp154 *tmp153 .PWR_ABORT
   437 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   580 set :check_radar*retval false
   581 jump *label97 always
   582 label *label99
-    * set :check_radar*retval null
   583 label *label97
   584 return :check_radar*retaddr
   585 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-10 instructions):
 
   226 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   227 jump *label28 always
   228 label *label28
-    * jump *label35 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label36 always
-    * label *label35
-    * set *tmp51 @scrap
-    * label *label36
+  229 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   230 control config unloader7 *tmp51
   231 sensor *tmp53 node1 @powerNetStored
   232 sensor *tmp54 node1 @powerNetCapacity
 
   323 return :kilo*retaddr
   324 end
   325 label *label1
-    * jump *label56 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label57 always
-    * label *label56
-    * set *tmp97 .FUEL_OFF
-    * label *label57
+  326 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   327 control config :update_fuel:uld_in *tmp97
-    * jump *label58 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label59 always
-    * label *label58
-    * set *tmp101 .FUEL_OFF
-    * label *label59
+  328 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   329 control config :update_fuel:uld_out *tmp101
   330 label *label55
   331 return :update_fuel*retaddr
 
   526 label *label84
   527 label *label67
   528 label *label65
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label95 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
-    * label *label95
-    * label *label96
+  529 sensor *tmp201 :start_reactor:reactor @enabled
+  530 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   531 set :start_reactor*retval :start_reactor:supply_fuel
   532 jump *label63 always
   533 label *label63

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   246 label *label39
   247 label *label37
   248 set :kilo:val .AVG_SURPLUS
-    * setaddr :kilo*retaddr *label40 (h:*label40)
-    * call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
-    * label *label40
+  249 label *label100
+  250 op idiv *tmp93 :kilo:val 100
+  251 op div :kilo*retval *tmp93 10
+  252 jump *label101 always
+  253 label *label101
   254 set :surplus :kilo*retval
   255 sensor :kilo:val node1 @powerNetStored
-    * setaddr :kilo*retaddr *label41 (h:*label41)
-    * call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
-    * label *label41
+  256 label *label102
+  257 op idiv *tmp93 :kilo:val 100
+  258 op div :kilo*retval *tmp93 10
+  259 jump *label103 always
+  260 label *label103
   261 set :charge :kilo*retval
   262 jump *label42 lessThanEq .START_POWER_REQ 0
   263 set :kilo:val .START_POWER_REQ
-    * setaddr :kilo*retaddr *label44 (h:*label44)
-    * call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
-    * label *label44
+  264 label *label104
+  265 op idiv *tmp93 :kilo:val 100
+  266 op div :kilo*retval *tmp93 10
+  267 jump *label105 always
+  268 label *label105
   269 print "Req "
   270 print :kilo*retval
   271 print "kJ / "
 
   321 jump *label7 always
   322 label *label9
   323 end
-    * label *label0
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label54 always
-    * label *label54
-    * return :kilo*retaddr
-    * end
   324 label *label1
   325 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   326 control config :update_fuel:uld_in *tmp97

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   247 label *label37
   248 set :kilo:val .AVG_SURPLUS
   249 label *label100
-    * op idiv *tmp93 :kilo:val 100
+  250 op idiv *tmp93 .AVG_SURPLUS 100
   251 op div :kilo*retval *tmp93 10
   252 jump *label101 always
   253 label *label101
 
   262 jump *label42 lessThanEq .START_POWER_REQ 0
   263 set :kilo:val .START_POWER_REQ
   264 label *label104
-    * op idiv *tmp93 :kilo:val 100
+  265 op idiv *tmp93 .START_POWER_REQ 100
   266 op div :kilo*retval *tmp93 10
   267 jump *label105 always
   268 label *label105

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   245 control enabled generator2 true
   246 label *label39
   247 label *label37
-    * set :kilo:val .AVG_SURPLUS
   248 label *label100
   249 op idiv *tmp93 .AVG_SURPLUS 100
   250 op div :kilo*retval *tmp93 10
 
   259 label *label103
   260 set :charge :kilo*retval
   261 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   262 label *label104
   263 op idiv *tmp93 .START_POWER_REQ 100
   264 op div :kilo*retval *tmp93 10

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
   107 set :update_fuel:fuel :start_reactor*retval
   108 set :update_fuel:uld_in unloader1
   109 set :update_fuel:uld_out unloader2
-    * setaddr :update_fuel*retaddr *label20 (h:*label20)
-    * call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
-    * label *label20
+  110 label *label106
+  111 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  112 control config :update_fuel:uld_in *tmp97
+  113 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  114 control config :update_fuel:uld_out *tmp101
+  115 label *label107
   116 set :start_reactor:reactor reactor2
   117 set :start_reactor:reactor_num 2
   118 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   126 set :update_fuel:fuel :start_reactor*retval
   127 set :update_fuel:uld_in unloader3
   128 set :update_fuel:uld_out unloader4
-    * setaddr :update_fuel*retaddr *label22 (h:*label22)
-    * call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
-    * label *label22
+  129 label *label108
+  130 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  131 control config :update_fuel:uld_in *tmp97
+  132 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  133 control config :update_fuel:uld_out *tmp101
+  134 label *label109
   135 set :check_radar:unit cyclone1
   136 setaddr :check_radar*retaddr *label23 (h:*label23)
   137 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   172 set :update_fuel:fuel :fuel_many
   173 set :update_fuel:uld_in unloader5
   174 set :update_fuel:uld_out unloader6
-    * setaddr :update_fuel*retaddr *label27 (h:*label27)
-    * call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
-    * label *label27
+  175 label *label110
+  176 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  177 control config :update_fuel:uld_in *tmp97
+  178 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  179 control config :update_fuel:uld_out *tmp101
+  180 label *label111
   181 op or *tmp30 :fuel_1 :fuel_2
   182 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   183 sensor *tmp33 node1 @powerNetStored
 
   328 jump *label7 always
   329 label *label9
   330 end
-    * label *label1
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
-    * label *label55
-    * return :update_fuel*retaddr
-    * end
   331 label *label2
   332 op sub *tmp102 @tick :calc_charge_req:time
   333 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   108 set :update_fuel:uld_in unloader1
   109 set :update_fuel:uld_out unloader2
   110 label *label106
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  111 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  112 control config unloader1 *tmp97
+  113 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  114 control config unloader2 *tmp101
   115 label *label107
   116 set :start_reactor:reactor reactor2
   117 set :start_reactor:reactor_num 2
 
   127 set :update_fuel:uld_in unloader3
   128 set :update_fuel:uld_out unloader4
   129 label *label108
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  130 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  131 control config unloader3 *tmp97
+  132 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  133 control config unloader4 *tmp101
   134 label *label109
   135 set :check_radar:unit cyclone1
   136 setaddr :check_radar*retaddr *label23 (h:*label23)
 
   173 set :update_fuel:uld_in unloader5
   174 set :update_fuel:uld_out unloader6
   175 label *label110
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * control config :update_fuel:uld_out *tmp101
+  176 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
+  177 control config unloader5 *tmp97
+  178 select *tmp101 equal :fuel_many false @blast-compound @scrap
+  179 control config unloader6 *tmp101
   180 label *label111
   181 op or *tmp30 :fuel_1 :fuel_2
   182 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   104 label *label19
   105 set :fuel_1 :start_reactor*retval
   106 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
   107 label *label106
   108 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   109 control config unloader1 *tmp97
 
   120 label *label21
   121 set :fuel_2 :start_reactor*retval
   122 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   123 label *label108
   124 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   125 control config unloader3 *tmp97
 
   163 set :t_startup5 .RET_T_STARTUP
   164 op or *tmp27 :fuel_3 :fuel_4
   165 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   166 label *label110
   167 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   168 control config unloader5 *tmp97

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    46 set .CONTAINER vault1
    47 set .NODE node1
    48 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label10 (h:*label10)
-    * call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
-    * label *label10
+   49 label *label112
+   50 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   51 jump *label113 equal :check_radar:enemy_found null
+   52 control enabled projector1 true
+   53 control enabled projector2 true
+   54 control config .ULD_IN_1 .FUEL_OFF
+   55 control config .ULD_OUT_1 .FUEL
+   56 control config .ULD_IN_2 .FUEL_OFF
+   57 control config .ULD_OUT_2 .FUEL
+   58 control config .ULD_IN_MANY .FUEL_OFF
+   59 control config .ULD_OUT_MANY .FUEL
+   60 control config .ULD_MIXER .FUEL_OFF
+   61 control enabled reactor1 false
+   62 control enabled reactor2 false
+   63 control enabled reactor3 false
+   64 control enabled reactor4 false
+   65 control enabled reactor5 false
+   66 set :check_radar*retval true
+   67 jump *label115 always
+   68 jump *label114 always
+   69 label *label113
+   70 control enabled projector1 false
+   71 control enabled projector2 false
+   72 set :check_radar*retval false
+   73 jump *label115 always
+   74 label *label114
+   75 label *label115
    76 op notEqual *tmp9 switch1 null
    77 sensor *tmp10 switch1 @enabled
    78 op equal *tmp11 *tmp10 false
 
   151 control config unloader4 *tmp101
   152 label *label109
   153 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label23 (h:*label23)
-    * call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
-    * label *label23
+  154 label *label116
+  155 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  156 jump *label117 equal :check_radar:enemy_found null
+  157 control enabled projector1 true
+  158 control enabled projector2 true
+  159 control config .ULD_IN_1 .FUEL_OFF
+  160 control config .ULD_OUT_1 .FUEL
+  161 control config .ULD_IN_2 .FUEL_OFF
+  162 control config .ULD_OUT_2 .FUEL
+  163 control config .ULD_IN_MANY .FUEL_OFF
+  164 control config .ULD_OUT_MANY .FUEL
+  165 control config .ULD_MIXER .FUEL_OFF
+  166 control enabled reactor1 false
+  167 control enabled reactor2 false
+  168 control enabled reactor3 false
+  169 control enabled reactor4 false
+  170 control enabled reactor5 false
+  171 set :check_radar*retval true
+  172 jump *label119 always
+  173 jump *label118 always
+  174 label *label117
+  175 control enabled projector1 false
+  176 control enabled projector2 false
+  177 set :check_radar*retval false
+  178 jump *label119 always
+  179 label *label118
+  180 label *label119
   181 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   182 set :start_reactor:reactor reactor3
   183 set :start_reactor:reactor_num 3
 
   570 label *label63
   571 return :start_reactor*retaddr
   572 end
-    * label *label4
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label98 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label97 always
-    * jump *label99 always
-    * label *label98
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label97 always
-    * label *label99
-    * label *label97
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    47 set .NODE node1
    48 set :check_radar:unit cyclone1
    49 label *label112
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   50 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    51 jump *label113 equal :check_radar:enemy_found null
    52 control enabled projector1 true
    53 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   54 control config unloader1 @scrap
+   55 control config unloader2 @blast-compound
+   56 control config unloader3 @scrap
+   57 control config unloader4 @blast-compound
+   58 control config unloader5 @scrap
+   59 control config unloader6 @blast-compound
+   60 control config unloader7 @scrap
    61 control enabled reactor1 false
    62 control enabled reactor2 false
    63 control enabled reactor3 false
 
   152 label *label109
   153 set :check_radar:unit cyclone1
   154 label *label116
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  155 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   156 jump *label117 equal :check_radar:enemy_found null
   157 control enabled projector1 true
   158 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  159 control config unloader1 @scrap
+  160 control config unloader2 @blast-compound
+  161 control config unloader3 @scrap
+  162 control config unloader4 @blast-compound
+  163 control config unloader5 @scrap
+  164 control config unloader6 @blast-compound
+  165 control config unloader7 @scrap
   166 control enabled reactor1 false
   167 control enabled reactor2 false
   168 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    37 set .CONTAINER vault1
    38 set .NODE node1
-    * set :check_radar:unit cyclone1
    39 label *label112
    40 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    41 jump *label113 equal :check_radar:enemy_found null
 
   140 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   141 control config unloader4 *tmp101
   142 label *label109
-    * set :check_radar:unit cyclone1
   143 label *label116
   144 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   145 jump *label117 equal :check_radar:enemy_found null

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    80 op or :emerg_shutdown :check_radar*retval *tmp8
    81 set :calc_charge_req:reactor reactor1
    82 set :calc_charge_req:time :t_startup1
-    * setaddr :calc_charge_req*retaddr *label14 (h:*label14)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
-    * label *label14
+   83 label *label120
+   84 op sub *tmp102 @tick :calc_charge_req:time
+   85 op idiv :calc_charge_req:secs *tmp102 60
+   86 op greaterThan *tmp104 :calc_charge_req:secs 30
+   87 sensor *tmp105 :calc_charge_req:reactor @enabled
+   88 op equal *tmp106 *tmp105 false
+   89 op or *tmp107 *tmp104 *tmp106
+   90 jump *label121 equal *tmp107 false
+   91 set :calc_charge_req*retval 0
+   92 jump *label123 always
+   93 label *label121
+   94 label *label122
+   95 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+   96 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+   97 op idiv :calc_charge_req:charge_req *tmp110 0.04
+   98 set :calc_charge_req*retval :calc_charge_req:charge_req
+   99 jump *label123 always
+  100 label *label123
   101 set .START_POWER_REQ :calc_charge_req*retval
   102 set :calc_charge_req:reactor reactor2
   103 set :calc_charge_req:time :t_startup2
-    * setaddr :calc_charge_req*retaddr *label15 (h:*label15)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
-    * label *label15
+  104 label *label124
+  105 op sub *tmp102 @tick :calc_charge_req:time
+  106 op idiv :calc_charge_req:secs *tmp102 60
+  107 op greaterThan *tmp104 :calc_charge_req:secs 30
+  108 sensor *tmp105 :calc_charge_req:reactor @enabled
+  109 op equal *tmp106 *tmp105 false
+  110 op or *tmp107 *tmp104 *tmp106
+  111 jump *label125 equal *tmp107 false
+  112 set :calc_charge_req*retval 0
+  113 jump *label127 always
+  114 label *label125
+  115 label *label126
+  116 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  117 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  118 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  119 set :calc_charge_req*retval :calc_charge_req:charge_req
+  120 jump *label127 always
+  121 label *label127
   122 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   123 set :calc_charge_req:reactor reactor3
   124 set :calc_charge_req:time :t_startup3
-    * setaddr :calc_charge_req*retaddr *label16 (h:*label16)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
-    * label *label16
+  125 label *label128
+  126 op sub *tmp102 @tick :calc_charge_req:time
+  127 op idiv :calc_charge_req:secs *tmp102 60
+  128 op greaterThan *tmp104 :calc_charge_req:secs 30
+  129 sensor *tmp105 :calc_charge_req:reactor @enabled
+  130 op equal *tmp106 *tmp105 false
+  131 op or *tmp107 *tmp104 *tmp106
+  132 jump *label129 equal *tmp107 false
+  133 set :calc_charge_req*retval 0
+  134 jump *label131 always
+  135 label *label129
+  136 label *label130
+  137 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  138 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  139 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  140 set :calc_charge_req*retval :calc_charge_req:charge_req
+  141 jump *label131 always
+  142 label *label131
   143 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   144 set :calc_charge_req:reactor reactor4
   145 set :calc_charge_req:time :t_startup4
-    * setaddr :calc_charge_req*retaddr *label17 (h:*label17)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
-    * label *label17
+  146 label *label132
+  147 op sub *tmp102 @tick :calc_charge_req:time
+  148 op idiv :calc_charge_req:secs *tmp102 60
+  149 op greaterThan *tmp104 :calc_charge_req:secs 30
+  150 sensor *tmp105 :calc_charge_req:reactor @enabled
+  151 op equal *tmp106 *tmp105 false
+  152 op or *tmp107 *tmp104 *tmp106
+  153 jump *label133 equal *tmp107 false
+  154 set :calc_charge_req*retval 0
+  155 jump *label135 always
+  156 label *label133
+  157 label *label134
+  158 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  159 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  160 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  161 set :calc_charge_req*retval :calc_charge_req:charge_req
+  162 jump *label135 always
+  163 label *label135
   164 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   165 set :calc_charge_req:reactor reactor5
   166 set :calc_charge_req:time :t_startup5
-    * setaddr :calc_charge_req*retaddr *label18 (h:*label18)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
-    * label *label18
+  167 label *label136
+  168 op sub *tmp102 @tick :calc_charge_req:time
+  169 op idiv :calc_charge_req:secs *tmp102 60
+  170 op greaterThan *tmp104 :calc_charge_req:secs 30
+  171 sensor *tmp105 :calc_charge_req:reactor @enabled
+  172 op equal *tmp106 *tmp105 false
+  173 op or *tmp107 *tmp104 *tmp106
+  174 jump *label137 equal *tmp107 false
+  175 set :calc_charge_req*retval 0
+  176 jump *label139 always
+  177 label *label137
+  178 label *label138
+  179 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  180 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  181 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  182 set :calc_charge_req*retval :calc_charge_req:charge_req
+  183 jump *label139 always
+  184 label *label139
   185 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   186 set :start_reactor:reactor reactor1
   187 set :start_reactor:reactor_num 1
 
   431 jump *label7 always
   432 label *label9
   433 end
-    * label *label2
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label61 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label60 always
-    * label *label61
-    * label *label62
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label60 always
-    * label *label60
-    * return :calc_charge_req*retaddr
-    * end
   434 label *label3
   435 set .RET_T_STARTUP :start_reactor:t_startup
   436 op sub *tmp113 @tick :start_reactor:t_startup
 
   492 jump *label76 greaterThanEq :start_reactor:secs 30
   493 set :calc_charge_req:reactor :start_reactor:reactor
   494 set :calc_charge_req:time :start_reactor:t_startup
-    * setaddr :calc_charge_req*retaddr *label78 (h:*label78)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
-    * label *label78
+  495 label *label140
+  496 op sub *tmp102 @tick :calc_charge_req:time
+  497 op idiv :calc_charge_req:secs *tmp102 60
+  498 op greaterThan *tmp104 :calc_charge_req:secs 30
+  499 sensor *tmp105 :calc_charge_req:reactor @enabled
+  500 op equal *tmp106 *tmp105 false
+  501 op or *tmp107 *tmp104 *tmp106
+  502 jump *label141 equal *tmp107 false
+  503 set :calc_charge_req*retval 0
+  504 jump *label143 always
+  505 label *label141
+  506 label *label142
+  507 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  508 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  509 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  510 set :calc_charge_req*retval :calc_charge_req:charge_req
+  511 jump *label143 always
+  512 label *label143
   513 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   514 op lessThan *tmp154 *tmp153 .PWR_ABORT
   515 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    81 set :calc_charge_req:reactor reactor1
    82 set :calc_charge_req:time :t_startup1
    83 label *label120
-    * op sub *tmp102 @tick :calc_charge_req:time
+   84 op sub *tmp102 @tick :t_startup1
    85 op idiv :calc_charge_req:secs *tmp102 60
    86 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+   87 sensor *tmp105 reactor1 @enabled
    88 op equal *tmp106 *tmp105 false
    89 op or *tmp107 *tmp104 *tmp106
    90 jump *label121 equal *tmp107 false
 
   102 set :calc_charge_req:reactor reactor2
   103 set :calc_charge_req:time :t_startup2
   104 label *label124
-    * op sub *tmp102 @tick :calc_charge_req:time
+  105 op sub *tmp102 @tick :t_startup2
   106 op idiv :calc_charge_req:secs *tmp102 60
   107 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  108 sensor *tmp105 reactor2 @enabled
   109 op equal *tmp106 *tmp105 false
   110 op or *tmp107 *tmp104 *tmp106
   111 jump *label125 equal *tmp107 false
 
   123 set :calc_charge_req:reactor reactor3
   124 set :calc_charge_req:time :t_startup3
   125 label *label128
-    * op sub *tmp102 @tick :calc_charge_req:time
+  126 op sub *tmp102 @tick :t_startup3
   127 op idiv :calc_charge_req:secs *tmp102 60
   128 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  129 sensor *tmp105 reactor3 @enabled
   130 op equal *tmp106 *tmp105 false
   131 op or *tmp107 *tmp104 *tmp106
   132 jump *label129 equal *tmp107 false
 
   144 set :calc_charge_req:reactor reactor4
   145 set :calc_charge_req:time :t_startup4
   146 label *label132
-    * op sub *tmp102 @tick :calc_charge_req:time
+  147 op sub *tmp102 @tick :t_startup4
   148 op idiv :calc_charge_req:secs *tmp102 60
   149 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  150 sensor *tmp105 reactor4 @enabled
   151 op equal *tmp106 *tmp105 false
   152 op or *tmp107 *tmp104 *tmp106
   153 jump *label133 equal *tmp107 false
 
   165 set :calc_charge_req:reactor reactor5
   166 set :calc_charge_req:time :t_startup5
   167 label *label136
-    * op sub *tmp102 @tick :calc_charge_req:time
+  168 op sub *tmp102 @tick :t_startup5
   169 op idiv :calc_charge_req:secs *tmp102 60
   170 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  171 sensor *tmp105 reactor5 @enabled
   172 op equal *tmp106 *tmp105 false
   173 op or *tmp107 *tmp104 *tmp106
   174 jump *label137 equal *tmp107 false
 
   493 set :calc_charge_req:reactor :start_reactor:reactor
   494 set :calc_charge_req:time :start_reactor:t_startup
   495 label *label140
-    * op sub *tmp102 @tick :calc_charge_req:time
+  496 op sub *tmp102 @tick :start_reactor:t_startup
   497 op idiv :calc_charge_req:secs *tmp102 60
   498 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  499 sensor *tmp105 :start_reactor:reactor @enabled
   500 op equal *tmp106 *tmp105 false
   501 op or *tmp107 *tmp104 *tmp106
   502 jump *label141 equal *tmp107 false
 
   623 label *label67
   624 label *label65
   625 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  626 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   627 set :start_reactor*retval :start_reactor:supply_fuel
   628 jump *label63 always
   629 label *label63

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-13 instructions):
 
    78 jump *label11 always
    79 label *label11
    80 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    81 label *label120
    82 op sub *tmp102 @tick :t_startup1
    83 op idiv :calc_charge_req:secs *tmp102 60
 
    97 jump *label123 always
    98 label *label123
    99 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
   100 label *label124
   101 op sub *tmp102 @tick :t_startup2
   102 op idiv :calc_charge_req:secs *tmp102 60
 
   116 jump *label127 always
   117 label *label127
   118 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   119 label *label128
   120 op sub *tmp102 @tick :t_startup3
   121 op idiv :calc_charge_req:secs *tmp102 60
 
   135 jump *label131 always
   136 label *label131
   137 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   138 label *label132
   139 op sub *tmp102 @tick :t_startup4
   140 op idiv :calc_charge_req:secs *tmp102 60
 
   154 jump *label135 always
   155 label *label135
   156 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   157 label *label136
   158 op sub *tmp102 @tick :t_startup5
   159 op idiv :calc_charge_req:secs *tmp102 60
 
   422 label *label9
   423 end
   424 label *label3
-    * set .RET_T_STARTUP :start_reactor:t_startup
   425 op sub *tmp113 @tick :start_reactor:t_startup
   426 op idiv :start_reactor:secs *tmp113 60
   427 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
 
   479 jump *label75 always
   480 label *label74
   481 jump *label76 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   482 label *label140
   483 op sub *tmp102 @tick :start_reactor:t_startup
   484 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Inline function call at line 80:14 (+155 instructions):
 
   178 set :start_reactor:emerg_shutdown :emerg_shutdown
   179 set :start_reactor:fuel_on :fuel_1
   180 set :start_reactor:t_startup :t_startup1
-    * setaddr :start_reactor*retaddr *label19 (h:*label19)
-    * call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
-    * label *label19
+  181 label *label144
+  182 op sub *tmp113 @tick :start_reactor:t_startup
+  183 op idiv :start_reactor:secs *tmp113 60
+  184 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  185 set :start_reactor:supply_fuel true
+  186 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  187 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  188 sensor *tmp118 .NODE @powerNetStored
+  189 op floor :start_reactor:charge *tmp118
+  190 sensor *tmp120 .NODE @powerNetIn
+  191 sensor *tmp121 .NODE @powerNetOut
+  192 op sub *tmp122 *tmp120 *tmp121
+  193 op floor :start_reactor:surplus *tmp122
+  194 op mul *tmp124 .AVG_SURPLUS 0.8
+  195 op mul *tmp125 :start_reactor:surplus 0.2
+  196 op add .AVG_SURPLUS *tmp124 *tmp125
+  197 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  198 print "#"
+  199 print :start_reactor:reactor_num
+  200 print " "
+  201 print "- "
+  202 jump *label145 equal :start_reactor:emerg_shutdown false
+  203 control enabled :start_reactor:reactor false
+  204 print "emergency mode"
+  205 print "\n"
+  206 set :start_reactor:supply_fuel false
+  207 jump *label178 always
+  208 label *label145
+  209 jump *label164 equal :start_reactor:enabled false
+  210 jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  211 control enabled :start_reactor:reactor false
+  212 print "STOP unwanted"
+  213 print "\n"
+  214 jump *label163 always
+  215 label *label146
+  216 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  217 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  218 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  219 op land *tmp139 *tmp136 *tmp138
+  220 jump *label147 equal *tmp139 false
+  221 control enabled :start_reactor:reactor false
+  222 print "STOP system fuel low"
+  223 print "\n"
+  224 jump *label162 always
+  225 label *label147
+  226 jump *label148 greaterThan :start_reactor:fuel 1
+  227 control enabled :start_reactor:reactor false
+  228 print "STOP fuel low"
+  229 print "\n"
+  230 jump *label161 always
+  231 label *label148
+  232 jump *label149 greaterThan :start_reactor:cryo .CRYO_ABORT
+  233 control enabled :start_reactor:reactor false
+  234 print "STOP out of cryo"
+  235 print "\n"
+  236 jump *label160 always
+  237 label *label149
+  238 jump *label156 greaterThanEq :start_reactor:secs 30
+  239 label *label150
+  240 op sub *tmp102 @tick :start_reactor:t_startup
+  241 op idiv :calc_charge_req:secs *tmp102 60
+  242 op greaterThan *tmp104 :calc_charge_req:secs 30
+  243 sensor *tmp105 :start_reactor:reactor @enabled
+  244 op equal *tmp106 *tmp105 false
+  245 op or *tmp107 *tmp104 *tmp106
+  246 jump *label151 equal *tmp107 false
+  247 set :calc_charge_req*retval 0
+  248 jump *label153 always
+  249 label *label151
+  250 label *label152
+  251 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  252 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  253 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  254 set :calc_charge_req*retval :calc_charge_req:charge_req
+  255 jump *label153 always
+  256 label *label153
+  257 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  258 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  259 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  260 op land *tmp156 *tmp154 *tmp155
+  261 jump *label154 equal *tmp156 false
+  262 control enabled :start_reactor:reactor false
+  263 print "START FAIL battery"
+  264 print "\n"
+  265 set :start_reactor:supply_fuel false
+  266 jump *label155 always
+  267 label *label154
+  268 op sub :start_reactor:time_left 30 :start_reactor:secs
+  269 print "Starting "
+  270 print :start_reactor:time_left
+  271 print " "
+  272 print "secs, req "
+  273 print :calc_charge_req*retval
+  274 print "J"
+  275 print "\n"
+  276 label *label155
+  277 jump *label159 always
+  278 label *label156
+  279 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  280 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  281 op land *tmp163 *tmp161 *tmp162
+  282 jump *label157 equal *tmp163 false
+  283 control enabled :start_reactor:reactor false
+  284 print "ABANDON - battery crit"
+  285 print "\n"
+  286 set :start_reactor:supply_fuel false
+  287 jump *label158 always
+  288 label *label157
+  289 op idiv :start_reactor:mins :start_reactor:secs 6
+  290 op div :start_reactor:mins :start_reactor:mins 10
+  291 print "RUN "
+  292 print :start_reactor:mins
+  293 print " "
+  294 print "mins"
+  295 print "\n"
+  296 label *label158
+  297 label *label159
+  298 label *label160
+  299 label *label161
+  300 label *label162
+  301 label *label163
+  302 jump *label177 always
+  303 label *label164
+  304 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  305 op sub *tmp170 *tmp169 .PWR_ABORT
+  306 op div *tmp171 *tmp170 .PWR_REQ
+  307 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  308 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  309 op max :start_reactor:flow_units -0.1 *tmp173
+  310 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  311 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  312 jump *label165 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  313 print "IDLE"
+  314 print "\n"
+  315 set :start_reactor:supply_fuel false
+  316 jump *label176 always
+  317 label *label165
+  318 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  319 jump *label166 greaterThanEq *tmp179 1
+  320 op idiv *tmp183 :start_reactor:flow_units 0.001
+  321 op div :start_reactor:flow *tmp183 10
+  322 op idiv *tmp186 :start_reactor:charge_units 0.001
+  323 op div :start_reactor:charge *tmp186 10
+  324 print "WAIT power. (%"
+  325 print :start_reactor:charge
+  326 print "J + %"
+  327 print :start_reactor:flow
+  328 print "W)"
+  329 print "\n"
+  330 set :start_reactor:supply_fuel false
+  331 jump *label175 always
+  332 label *label166
+  333 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  334 op land *tmp189 :start_reactor:fuel_on *tmp188
+  335 jump *label169 equal *tmp189 false
+  336 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  337 jump *label167 lessThanEq *tmp191 .FUEL_REQ
+  338 print "WAIT fuel"
+  339 print "\n"
+  340 jump *label168 always
+  341 label *label167
+  342 print "WAIT system fuel"
+  343 print "\n"
+  344 label *label168
+  345 jump *label174 always
+  346 label *label169
+  347 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  348 jump *label170 greaterThanEq :start_reactor:fuel_stored *tmp194
+  349 print "WAIT buffer fuel"
+  350 print "\n"
+  351 jump *label173 always
+  352 label *label170
+  353 jump *label171 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  354 print "WAIT cryo"
+  355 print "\n"
+  356 jump *label172 always
+  357 label *label171
+  358 print "STARTUP"
+  359 print "\n"
+  360 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  361 control enabled :start_reactor:reactor true
+  362 label *label172
+  363 label *label173
+  364 label *label174
+  365 label *label175
+  366 label *label176
+  367 label *label177
+  368 label *label178
+  369 sensor *tmp201 :start_reactor:reactor @enabled
+  370 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  371 set :start_reactor*retval :start_reactor:supply_fuel
+  372 jump *label179 always
+  373 label *label179
   374 set :fuel_1 :start_reactor*retval
   375 set :t_startup1 .RET_T_STARTUP
   376 label *label106

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    30 set :t_startup3 *tmp5
    31 set :t_startup4 *tmp5
    32 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    33 set .REACTORS_DESIRED 5
    34 set .AVG_SURPLUS 500
    35 label *label7
 
   178 set :start_reactor:fuel_on :fuel_1
   179 set :start_reactor:t_startup :t_startup1
   180 label *label144
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  181 op sub *tmp113 @tick :t_startup1
   182 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  183 sensor :start_reactor:fuel reactor1 @blast-compound
   184 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  185 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  186 sensor :start_reactor:cryo reactor1 @cryofluid
+  187 sensor *tmp118 node1 @powerNetStored
   188 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  189 sensor *tmp120 node1 @powerNetIn
+  190 sensor *tmp121 node1 @powerNetOut
   191 op sub *tmp122 *tmp120 *tmp121
   192 op floor :start_reactor:surplus *tmp122
   193 op mul *tmp124 .AVG_SURPLUS 0.8
   194 op mul *tmp125 :start_reactor:surplus 0.2
   195 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  196 sensor :start_reactor:enabled reactor1 @enabled
   197 print "#"
-    * print :start_reactor:reactor_num
+  198 print 1
   199 print " "
   200 print "- "
-    * jump *label145 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  201 jump *label145 equal :emerg_shutdown false
+  202 control enabled reactor1 false
   203 print "emergency mode"
   204 print "\n"
   205 set :start_reactor:supply_fuel false
   206 jump *label178 always
   207 label *label145
   208 jump *label164 equal :start_reactor:enabled false
-    * jump *label146 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  209 jump *label146 greaterThanEq .REACTORS_DESIRED 1
+  210 control enabled reactor1 false
   211 print "STOP unwanted"
   212 print "\n"
   213 jump *label163 always
   214 label *label146
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  215 op greaterThan *tmp136 1 1
+  216 op mul *tmp137 15 1
+  217 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  218 op land *tmp139 false *tmp138
   219 jump *label147 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  220 control enabled reactor1 false
   221 print "STOP system fuel low"
   222 print "\n"
   223 jump *label162 always
   224 label *label147
   225 jump *label148 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  226 control enabled reactor1 false
   227 print "STOP fuel low"
   228 print "\n"
   229 jump *label161 always
   230 label *label148
-    * jump *label149 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  231 jump *label149 greaterThan :start_reactor:cryo 1
+  232 control enabled reactor1 false
   233 print "STOP out of cryo"
   234 print "\n"
   235 jump *label160 always
   236 label *label149
   237 jump *label156 greaterThanEq :start_reactor:secs 30
   238 label *label150
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  239 op sub *tmp102 @tick :t_startup1
   240 op idiv :calc_charge_req:secs *tmp102 60
   241 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  242 sensor *tmp105 reactor1 @enabled
   243 op equal *tmp106 *tmp105 false
   244 op or *tmp107 *tmp104 *tmp106
   245 jump *label151 equal *tmp107 false
 
   254 jump *label153 always
   255 label *label153
   256 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  257 op lessThan *tmp154 *tmp153 5000
+  258 op lessThan *tmp155 :start_reactor:surplus -500
   259 op land *tmp156 *tmp154 *tmp155
   260 jump *label154 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  261 control enabled reactor1 false
   262 print "START FAIL battery"
   263 print "\n"
   264 set :start_reactor:supply_fuel false
 
   275 label *label155
   276 jump *label159 always
   277 label *label156
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  278 op lessThan *tmp161 :start_reactor:charge 2000
+  279 op lessThan *tmp162 :start_reactor:surplus -500
   280 op land *tmp163 *tmp161 *tmp162
   281 jump *label157 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  282 control enabled reactor1 false
   283 print "ABANDON - battery crit"
   284 print "\n"
   285 set :start_reactor:supply_fuel false
 
   301 jump *label177 always
   302 label *label164
   303 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  304 op sub *tmp170 *tmp169 5000
+  305 op div *tmp171 *tmp170 23000
+  306 op mul :start_reactor:charge_units *tmp171 0.6
+  307 op div *tmp173 :start_reactor:surplus 2000
   308 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label165 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  309 op mul *tmp175 2 1
+  310 op add :start_reactor:cryo_req 3 2
+  311 jump *label165 greaterThanEq .REACTORS_DESIRED 1
   312 print "IDLE"
   313 print "\n"
   314 set :start_reactor:supply_fuel false
 
   329 set :start_reactor:supply_fuel false
   330 jump *label175 always
   331 label *label166
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  332 op lessThan *tmp188 :start_reactor:fuel 10
+  333 op land *tmp189 :fuel_1 *tmp188
   334 jump *label169 equal *tmp189 false
   335 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label167 lessThanEq *tmp191 .FUEL_REQ
+  336 jump *label167 lessThanEq *tmp191 10
   337 print "WAIT fuel"
   338 print "\n"
   339 jump *label168 always
 
   343 label *label168
   344 jump *label174 always
   345 label *label169
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label170 greaterThanEq :start_reactor:fuel_stored *tmp194
+  346 op mul *tmp194 45 1
+  347 jump *label170 greaterThanEq :start_reactor:fuel_stored 45
   348 print "WAIT buffer fuel"
   349 print "\n"
   350 jump *label173 always
   351 label *label170
-    * jump *label171 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  352 jump *label171 greaterThanEq :start_reactor:cryo 5
   353 print "WAIT cryo"
   354 print "\n"
   355 jump *label172 always
   356 label *label171
   357 print "STARTUP"
   358 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  359 op add .START_POWER_REQ .START_POWER_REQ 23000
+  360 control enabled reactor1 true
   361 label *label172
   362 label *label173
   363 label *label174
 
   365 label *label176
   366 label *label177
   367 label *label178
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  368 sensor *tmp201 reactor1 @enabled
+  369 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   370 set :start_reactor*retval :start_reactor:supply_fuel
   371 jump *label179 always
   372 label *label179
-    * set :fuel_1 :start_reactor*retval
+  373 set :fuel_1 :start_reactor:supply_fuel
   374 set :t_startup1 .RET_T_STARTUP
   375 label *label106
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  376 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   377 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  378 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   379 control config unloader2 *tmp101
   380 label *label107
   381 set :start_reactor:reactor reactor2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   172 jump *label139 always
   173 label *label139
   174 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   175 label *label144
   176 op sub *tmp113 @tick :t_startup1
   177 op idiv :start_reactor:secs *tmp113 60
 
   298 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   299 op sub *tmp170 *tmp169 5000
   300 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  301 op div :start_reactor:charge_units *tmp170 38333.333333333336
   302 op div *tmp173 :start_reactor:surplus 2000
   303 op max :start_reactor:flow_units -0.1 *tmp173
   304 op mul *tmp175 2 1
 
   362 label *label178
   363 sensor *tmp201 reactor1 @enabled
   364 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * set :start_reactor*retval :start_reactor:supply_fuel
   365 jump *label179 always
   366 label *label179
   367 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+155 instructions):
 
   377 set :start_reactor:emerg_shutdown :emerg_shutdown
   378 set :start_reactor:fuel_on :fuel_2
   379 set :start_reactor:t_startup :t_startup2
-    * setaddr :start_reactor*retaddr *label21 (h:*label21)
-    * call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
-    * label *label21
+  380 label *label180
+  381 op sub *tmp113 @tick :start_reactor:t_startup
+  382 op idiv :start_reactor:secs *tmp113 60
+  383 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  384 set :start_reactor:supply_fuel true
+  385 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  386 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  387 sensor *tmp118 .NODE @powerNetStored
+  388 op floor :start_reactor:charge *tmp118
+  389 sensor *tmp120 .NODE @powerNetIn
+  390 sensor *tmp121 .NODE @powerNetOut
+  391 op sub *tmp122 *tmp120 *tmp121
+  392 op floor :start_reactor:surplus *tmp122
+  393 op mul *tmp124 .AVG_SURPLUS 0.8
+  394 op mul *tmp125 :start_reactor:surplus 0.2
+  395 op add .AVG_SURPLUS *tmp124 *tmp125
+  396 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  397 print "#"
+  398 print :start_reactor:reactor_num
+  399 print " "
+  400 print "- "
+  401 jump *label181 equal :start_reactor:emerg_shutdown false
+  402 control enabled :start_reactor:reactor false
+  403 print "emergency mode"
+  404 print "\n"
+  405 set :start_reactor:supply_fuel false
+  406 jump *label214 always
+  407 label *label181
+  408 jump *label200 equal :start_reactor:enabled false
+  409 jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  410 control enabled :start_reactor:reactor false
+  411 print "STOP unwanted"
+  412 print "\n"
+  413 jump *label199 always
+  414 label *label182
+  415 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  416 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  417 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  418 op land *tmp139 *tmp136 *tmp138
+  419 jump *label183 equal *tmp139 false
+  420 control enabled :start_reactor:reactor false
+  421 print "STOP system fuel low"
+  422 print "\n"
+  423 jump *label198 always
+  424 label *label183
+  425 jump *label184 greaterThan :start_reactor:fuel 1
+  426 control enabled :start_reactor:reactor false
+  427 print "STOP fuel low"
+  428 print "\n"
+  429 jump *label197 always
+  430 label *label184
+  431 jump *label185 greaterThan :start_reactor:cryo .CRYO_ABORT
+  432 control enabled :start_reactor:reactor false
+  433 print "STOP out of cryo"
+  434 print "\n"
+  435 jump *label196 always
+  436 label *label185
+  437 jump *label192 greaterThanEq :start_reactor:secs 30
+  438 label *label186
+  439 op sub *tmp102 @tick :start_reactor:t_startup
+  440 op idiv :calc_charge_req:secs *tmp102 60
+  441 op greaterThan *tmp104 :calc_charge_req:secs 30
+  442 sensor *tmp105 :start_reactor:reactor @enabled
+  443 op equal *tmp106 *tmp105 false
+  444 op or *tmp107 *tmp104 *tmp106
+  445 jump *label187 equal *tmp107 false
+  446 set :calc_charge_req*retval 0
+  447 jump *label189 always
+  448 label *label187
+  449 label *label188
+  450 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  451 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  452 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  453 set :calc_charge_req*retval :calc_charge_req:charge_req
+  454 jump *label189 always
+  455 label *label189
+  456 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  457 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  458 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  459 op land *tmp156 *tmp154 *tmp155
+  460 jump *label190 equal *tmp156 false
+  461 control enabled :start_reactor:reactor false
+  462 print "START FAIL battery"
+  463 print "\n"
+  464 set :start_reactor:supply_fuel false
+  465 jump *label191 always
+  466 label *label190
+  467 op sub :start_reactor:time_left 30 :start_reactor:secs
+  468 print "Starting "
+  469 print :start_reactor:time_left
+  470 print " "
+  471 print "secs, req "
+  472 print :calc_charge_req*retval
+  473 print "J"
+  474 print "\n"
+  475 label *label191
+  476 jump *label195 always
+  477 label *label192
+  478 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  479 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  480 op land *tmp163 *tmp161 *tmp162
+  481 jump *label193 equal *tmp163 false
+  482 control enabled :start_reactor:reactor false
+  483 print "ABANDON - battery crit"
+  484 print "\n"
+  485 set :start_reactor:supply_fuel false
+  486 jump *label194 always
+  487 label *label193
+  488 op idiv :start_reactor:mins :start_reactor:secs 6
+  489 op div :start_reactor:mins :start_reactor:mins 10
+  490 print "RUN "
+  491 print :start_reactor:mins
+  492 print " "
+  493 print "mins"
+  494 print "\n"
+  495 label *label194
+  496 label *label195
+  497 label *label196
+  498 label *label197
+  499 label *label198
+  500 label *label199
+  501 jump *label213 always
+  502 label *label200
+  503 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  504 op sub *tmp170 *tmp169 .PWR_ABORT
+  505 op div *tmp171 *tmp170 .PWR_REQ
+  506 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  507 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  508 op max :start_reactor:flow_units -0.1 *tmp173
+  509 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  510 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  511 jump *label201 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  512 print "IDLE"
+  513 print "\n"
+  514 set :start_reactor:supply_fuel false
+  515 jump *label212 always
+  516 label *label201
+  517 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  518 jump *label202 greaterThanEq *tmp179 1
+  519 op idiv *tmp183 :start_reactor:flow_units 0.001
+  520 op div :start_reactor:flow *tmp183 10
+  521 op idiv *tmp186 :start_reactor:charge_units 0.001
+  522 op div :start_reactor:charge *tmp186 10
+  523 print "WAIT power. (%"
+  524 print :start_reactor:charge
+  525 print "J + %"
+  526 print :start_reactor:flow
+  527 print "W)"
+  528 print "\n"
+  529 set :start_reactor:supply_fuel false
+  530 jump *label211 always
+  531 label *label202
+  532 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  533 op land *tmp189 :start_reactor:fuel_on *tmp188
+  534 jump *label205 equal *tmp189 false
+  535 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  536 jump *label203 lessThanEq *tmp191 .FUEL_REQ
+  537 print "WAIT fuel"
+  538 print "\n"
+  539 jump *label204 always
+  540 label *label203
+  541 print "WAIT system fuel"
+  542 print "\n"
+  543 label *label204
+  544 jump *label210 always
+  545 label *label205
+  546 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  547 jump *label206 greaterThanEq :start_reactor:fuel_stored *tmp194
+  548 print "WAIT buffer fuel"
+  549 print "\n"
+  550 jump *label209 always
+  551 label *label206
+  552 jump *label207 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  553 print "WAIT cryo"
+  554 print "\n"
+  555 jump *label208 always
+  556 label *label207
+  557 print "STARTUP"
+  558 print "\n"
+  559 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  560 control enabled :start_reactor:reactor true
+  561 label *label208
+  562 label *label209
+  563 label *label210
+  564 label *label211
+  565 label *label212
+  566 label *label213
+  567 label *label214
+  568 sensor *tmp201 :start_reactor:reactor @enabled
+  569 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  570 set :start_reactor*retval :start_reactor:supply_fuel
+  571 jump *label215 always
+  572 label *label215
   573 set :fuel_2 :start_reactor*retval
   574 set :t_startup2 .RET_T_STARTUP
   575 label *label108

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   378 set :start_reactor:fuel_on :fuel_2
   379 set :start_reactor:t_startup :t_startup2
   380 label *label180
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  381 op sub *tmp113 @tick :t_startup2
   382 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  383 sensor :start_reactor:fuel reactor2 @blast-compound
   384 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  385 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  386 sensor :start_reactor:cryo reactor2 @cryofluid
+  387 sensor *tmp118 node1 @powerNetStored
   388 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  389 sensor *tmp120 node1 @powerNetIn
+  390 sensor *tmp121 node1 @powerNetOut
   391 op sub *tmp122 *tmp120 *tmp121
   392 op floor :start_reactor:surplus *tmp122
   393 op mul *tmp124 .AVG_SURPLUS 0.8
   394 op mul *tmp125 :start_reactor:surplus 0.2
   395 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  396 sensor :start_reactor:enabled reactor2 @enabled
   397 print "#"
-    * print :start_reactor:reactor_num
+  398 print 2
   399 print " "
   400 print "- "
-    * jump *label181 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  401 jump *label181 equal :emerg_shutdown false
+  402 control enabled reactor2 false
   403 print "emergency mode"
   404 print "\n"
   405 set :start_reactor:supply_fuel false
   406 jump *label214 always
   407 label *label181
   408 jump *label200 equal :start_reactor:enabled false
-    * jump *label182 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  409 jump *label182 greaterThanEq .REACTORS_DESIRED 2
+  410 control enabled reactor2 false
   411 print "STOP unwanted"
   412 print "\n"
   413 jump *label199 always
   414 label *label182
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  415 op greaterThan *tmp136 2 1
+  416 op mul *tmp137 15 2
+  417 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  418 op land *tmp139 true *tmp138
   419 jump *label183 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  420 control enabled reactor2 false
   421 print "STOP system fuel low"
   422 print "\n"
   423 jump *label198 always
   424 label *label183
   425 jump *label184 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  426 control enabled reactor2 false
   427 print "STOP fuel low"
   428 print "\n"
   429 jump *label197 always
   430 label *label184
-    * jump *label185 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  431 jump *label185 greaterThan :start_reactor:cryo 1
+  432 control enabled reactor2 false
   433 print "STOP out of cryo"
   434 print "\n"
   435 jump *label196 always
   436 label *label185
   437 jump *label192 greaterThanEq :start_reactor:secs 30
   438 label *label186
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  439 op sub *tmp102 @tick :t_startup2
   440 op idiv :calc_charge_req:secs *tmp102 60
   441 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  442 sensor *tmp105 reactor2 @enabled
   443 op equal *tmp106 *tmp105 false
   444 op or *tmp107 *tmp104 *tmp106
   445 jump *label187 equal *tmp107 false
 
   454 jump *label189 always
   455 label *label189
   456 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  457 op lessThan *tmp154 *tmp153 5000
+  458 op lessThan *tmp155 :start_reactor:surplus -500
   459 op land *tmp156 *tmp154 *tmp155
   460 jump *label190 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  461 control enabled reactor2 false
   462 print "START FAIL battery"
   463 print "\n"
   464 set :start_reactor:supply_fuel false
 
   475 label *label191
   476 jump *label195 always
   477 label *label192
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  478 op lessThan *tmp161 :start_reactor:charge 2000
+  479 op lessThan *tmp162 :start_reactor:surplus -500
   480 op land *tmp163 *tmp161 *tmp162
   481 jump *label193 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  482 control enabled reactor2 false
   483 print "ABANDON - battery crit"
   484 print "\n"
   485 set :start_reactor:supply_fuel false
 
   501 jump *label213 always
   502 label *label200
   503 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  504 op sub *tmp170 *tmp169 5000
+  505 op div *tmp171 *tmp170 23000
+  506 op mul :start_reactor:charge_units *tmp171 0.6
+  507 op div *tmp173 :start_reactor:surplus 2000
   508 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label201 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  509 op mul *tmp175 2 2
+  510 op add :start_reactor:cryo_req 3 4
+  511 jump *label201 greaterThanEq .REACTORS_DESIRED 2
   512 print "IDLE"
   513 print "\n"
   514 set :start_reactor:supply_fuel false
 
   529 set :start_reactor:supply_fuel false
   530 jump *label211 always
   531 label *label202
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  532 op lessThan *tmp188 :start_reactor:fuel 10
+  533 op land *tmp189 :fuel_2 *tmp188
   534 jump *label205 equal *tmp189 false
   535 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label203 lessThanEq *tmp191 .FUEL_REQ
+  536 jump *label203 lessThanEq *tmp191 10
   537 print "WAIT fuel"
   538 print "\n"
   539 jump *label204 always
 
   543 label *label204
   544 jump *label210 always
   545 label *label205
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label206 greaterThanEq :start_reactor:fuel_stored *tmp194
+  546 op mul *tmp194 45 2
+  547 jump *label206 greaterThanEq :start_reactor:fuel_stored 90
   548 print "WAIT buffer fuel"
   549 print "\n"
   550 jump *label209 always
   551 label *label206
-    * jump *label207 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  552 jump *label207 greaterThanEq :start_reactor:cryo 7
   553 print "WAIT cryo"
   554 print "\n"
   555 jump *label208 always
   556 label *label207
   557 print "STARTUP"
   558 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  559 op add .START_POWER_REQ .START_POWER_REQ 23000
+  560 control enabled reactor2 true
   561 label *label208
   562 label *label209
   563 label *label210
 
   565 label *label212
   566 label *label213
   567 label *label214
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  568 sensor *tmp201 reactor2 @enabled
+  569 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   570 set :start_reactor*retval :start_reactor:supply_fuel
   571 jump *label215 always
   572 label *label215
-    * set :fuel_2 :start_reactor*retval
+  573 set :fuel_2 :start_reactor:supply_fuel
   574 set :t_startup2 .RET_T_STARTUP
   575 label *label108
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  576 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   577 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  578 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   579 control config unloader4 *tmp101
   580 label *label109
   581 label *label116

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   372 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   373 control config unloader2 *tmp101
   374 label *label107
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   375 label *label180
   376 op sub *tmp113 @tick :t_startup2
   377 op idiv :start_reactor:secs *tmp113 60
 
   498 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   499 op sub *tmp170 *tmp169 5000
   500 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  501 op div :start_reactor:charge_units *tmp170 38333.333333333336
   502 op div *tmp173 :start_reactor:surplus 2000
   503 op max :start_reactor:flow_units -0.1 *tmp173
   504 op mul *tmp175 2 2
 
   562 label *label214
   563 sensor *tmp201 reactor2 @enabled
   564 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * set :start_reactor*retval :start_reactor:supply_fuel
   565 jump *label215 always
   566 label *label215
   567 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+155 instructions):
 
   605 set :start_reactor:emerg_shutdown :emerg_shutdown
   606 set :start_reactor:fuel_on :fuel_3
   607 set :start_reactor:t_startup :t_startup3
-    * setaddr :start_reactor*retaddr *label24 (h:*label24)
-    * call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
-    * label *label24
+  608 label *label216
+  609 op sub *tmp113 @tick :start_reactor:t_startup
+  610 op idiv :start_reactor:secs *tmp113 60
+  611 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  612 set :start_reactor:supply_fuel true
+  613 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  614 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  615 sensor *tmp118 .NODE @powerNetStored
+  616 op floor :start_reactor:charge *tmp118
+  617 sensor *tmp120 .NODE @powerNetIn
+  618 sensor *tmp121 .NODE @powerNetOut
+  619 op sub *tmp122 *tmp120 *tmp121
+  620 op floor :start_reactor:surplus *tmp122
+  621 op mul *tmp124 .AVG_SURPLUS 0.8
+  622 op mul *tmp125 :start_reactor:surplus 0.2
+  623 op add .AVG_SURPLUS *tmp124 *tmp125
+  624 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  625 print "#"
+  626 print :start_reactor:reactor_num
+  627 print " "
+  628 print "- "
+  629 jump *label217 equal :start_reactor:emerg_shutdown false
+  630 control enabled :start_reactor:reactor false
+  631 print "emergency mode"
+  632 print "\n"
+  633 set :start_reactor:supply_fuel false
+  634 jump *label250 always
+  635 label *label217
+  636 jump *label236 equal :start_reactor:enabled false
+  637 jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  638 control enabled :start_reactor:reactor false
+  639 print "STOP unwanted"
+  640 print "\n"
+  641 jump *label235 always
+  642 label *label218
+  643 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  644 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  645 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  646 op land *tmp139 *tmp136 *tmp138
+  647 jump *label219 equal *tmp139 false
+  648 control enabled :start_reactor:reactor false
+  649 print "STOP system fuel low"
+  650 print "\n"
+  651 jump *label234 always
+  652 label *label219
+  653 jump *label220 greaterThan :start_reactor:fuel 1
+  654 control enabled :start_reactor:reactor false
+  655 print "STOP fuel low"
+  656 print "\n"
+  657 jump *label233 always
+  658 label *label220
+  659 jump *label221 greaterThan :start_reactor:cryo .CRYO_ABORT
+  660 control enabled :start_reactor:reactor false
+  661 print "STOP out of cryo"
+  662 print "\n"
+  663 jump *label232 always
+  664 label *label221
+  665 jump *label228 greaterThanEq :start_reactor:secs 30
+  666 label *label222
+  667 op sub *tmp102 @tick :start_reactor:t_startup
+  668 op idiv :calc_charge_req:secs *tmp102 60
+  669 op greaterThan *tmp104 :calc_charge_req:secs 30
+  670 sensor *tmp105 :start_reactor:reactor @enabled
+  671 op equal *tmp106 *tmp105 false
+  672 op or *tmp107 *tmp104 *tmp106
+  673 jump *label223 equal *tmp107 false
+  674 set :calc_charge_req*retval 0
+  675 jump *label225 always
+  676 label *label223
+  677 label *label224
+  678 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  679 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  680 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  681 set :calc_charge_req*retval :calc_charge_req:charge_req
+  682 jump *label225 always
+  683 label *label225
+  684 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  685 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  686 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  687 op land *tmp156 *tmp154 *tmp155
+  688 jump *label226 equal *tmp156 false
+  689 control enabled :start_reactor:reactor false
+  690 print "START FAIL battery"
+  691 print "\n"
+  692 set :start_reactor:supply_fuel false
+  693 jump *label227 always
+  694 label *label226
+  695 op sub :start_reactor:time_left 30 :start_reactor:secs
+  696 print "Starting "
+  697 print :start_reactor:time_left
+  698 print " "
+  699 print "secs, req "
+  700 print :calc_charge_req*retval
+  701 print "J"
+  702 print "\n"
+  703 label *label227
+  704 jump *label231 always
+  705 label *label228
+  706 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  707 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  708 op land *tmp163 *tmp161 *tmp162
+  709 jump *label229 equal *tmp163 false
+  710 control enabled :start_reactor:reactor false
+  711 print "ABANDON - battery crit"
+  712 print "\n"
+  713 set :start_reactor:supply_fuel false
+  714 jump *label230 always
+  715 label *label229
+  716 op idiv :start_reactor:mins :start_reactor:secs 6
+  717 op div :start_reactor:mins :start_reactor:mins 10
+  718 print "RUN "
+  719 print :start_reactor:mins
+  720 print " "
+  721 print "mins"
+  722 print "\n"
+  723 label *label230
+  724 label *label231
+  725 label *label232
+  726 label *label233
+  727 label *label234
+  728 label *label235
+  729 jump *label249 always
+  730 label *label236
+  731 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  732 op sub *tmp170 *tmp169 .PWR_ABORT
+  733 op div *tmp171 *tmp170 .PWR_REQ
+  734 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  735 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  736 op max :start_reactor:flow_units -0.1 *tmp173
+  737 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  738 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  739 jump *label237 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  740 print "IDLE"
+  741 print "\n"
+  742 set :start_reactor:supply_fuel false
+  743 jump *label248 always
+  744 label *label237
+  745 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  746 jump *label238 greaterThanEq *tmp179 1
+  747 op idiv *tmp183 :start_reactor:flow_units 0.001
+  748 op div :start_reactor:flow *tmp183 10
+  749 op idiv *tmp186 :start_reactor:charge_units 0.001
+  750 op div :start_reactor:charge *tmp186 10
+  751 print "WAIT power. (%"
+  752 print :start_reactor:charge
+  753 print "J + %"
+  754 print :start_reactor:flow
+  755 print "W)"
+  756 print "\n"
+  757 set :start_reactor:supply_fuel false
+  758 jump *label247 always
+  759 label *label238
+  760 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  761 op land *tmp189 :start_reactor:fuel_on *tmp188
+  762 jump *label241 equal *tmp189 false
+  763 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  764 jump *label239 lessThanEq *tmp191 .FUEL_REQ
+  765 print "WAIT fuel"
+  766 print "\n"
+  767 jump *label240 always
+  768 label *label239
+  769 print "WAIT system fuel"
+  770 print "\n"
+  771 label *label240
+  772 jump *label246 always
+  773 label *label241
+  774 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  775 jump *label242 greaterThanEq :start_reactor:fuel_stored *tmp194
+  776 print "WAIT buffer fuel"
+  777 print "\n"
+  778 jump *label245 always
+  779 label *label242
+  780 jump *label243 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  781 print "WAIT cryo"
+  782 print "\n"
+  783 jump *label244 always
+  784 label *label243
+  785 print "STARTUP"
+  786 print "\n"
+  787 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  788 control enabled :start_reactor:reactor true
+  789 label *label244
+  790 label *label245
+  791 label *label246
+  792 label *label247
+  793 label *label248
+  794 label *label249
+  795 label *label250
+  796 sensor *tmp201 :start_reactor:reactor @enabled
+  797 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  798 set :start_reactor*retval :start_reactor:supply_fuel
+  799 jump *label251 always
+  800 label *label251
   801 set :fuel_3 :start_reactor*retval
   802 set :t_startup3 .RET_T_STARTUP
   803 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   606 set :start_reactor:fuel_on :fuel_3
   607 set :start_reactor:t_startup :t_startup3
   608 label *label216
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  609 op sub *tmp113 @tick :t_startup3
   610 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  611 sensor :start_reactor:fuel reactor3 @blast-compound
   612 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  613 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  614 sensor :start_reactor:cryo reactor3 @cryofluid
+  615 sensor *tmp118 node1 @powerNetStored
   616 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  617 sensor *tmp120 node1 @powerNetIn
+  618 sensor *tmp121 node1 @powerNetOut
   619 op sub *tmp122 *tmp120 *tmp121
   620 op floor :start_reactor:surplus *tmp122
   621 op mul *tmp124 .AVG_SURPLUS 0.8
   622 op mul *tmp125 :start_reactor:surplus 0.2
   623 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  624 sensor :start_reactor:enabled reactor3 @enabled
   625 print "#"
-    * print :start_reactor:reactor_num
+  626 print 3
   627 print " "
   628 print "- "
-    * jump *label217 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  629 jump *label217 equal :emerg_shutdown false
+  630 control enabled reactor3 false
   631 print "emergency mode"
   632 print "\n"
   633 set :start_reactor:supply_fuel false
   634 jump *label250 always
   635 label *label217
   636 jump *label236 equal :start_reactor:enabled false
-    * jump *label218 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  637 jump *label218 greaterThanEq .REACTORS_DESIRED 3
+  638 control enabled reactor3 false
   639 print "STOP unwanted"
   640 print "\n"
   641 jump *label235 always
   642 label *label218
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  643 op greaterThan *tmp136 3 1
+  644 op mul *tmp137 15 3
+  645 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  646 op land *tmp139 true *tmp138
   647 jump *label219 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  648 control enabled reactor3 false
   649 print "STOP system fuel low"
   650 print "\n"
   651 jump *label234 always
   652 label *label219
   653 jump *label220 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  654 control enabled reactor3 false
   655 print "STOP fuel low"
   656 print "\n"
   657 jump *label233 always
   658 label *label220
-    * jump *label221 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  659 jump *label221 greaterThan :start_reactor:cryo 1
+  660 control enabled reactor3 false
   661 print "STOP out of cryo"
   662 print "\n"
   663 jump *label232 always
   664 label *label221
   665 jump *label228 greaterThanEq :start_reactor:secs 30
   666 label *label222
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  667 op sub *tmp102 @tick :t_startup3
   668 op idiv :calc_charge_req:secs *tmp102 60
   669 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  670 sensor *tmp105 reactor3 @enabled
   671 op equal *tmp106 *tmp105 false
   672 op or *tmp107 *tmp104 *tmp106
   673 jump *label223 equal *tmp107 false
 
   682 jump *label225 always
   683 label *label225
   684 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  685 op lessThan *tmp154 *tmp153 5000
+  686 op lessThan *tmp155 :start_reactor:surplus -500
   687 op land *tmp156 *tmp154 *tmp155
   688 jump *label226 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  689 control enabled reactor3 false
   690 print "START FAIL battery"
   691 print "\n"
   692 set :start_reactor:supply_fuel false
 
   703 label *label227
   704 jump *label231 always
   705 label *label228
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  706 op lessThan *tmp161 :start_reactor:charge 2000
+  707 op lessThan *tmp162 :start_reactor:surplus -500
   708 op land *tmp163 *tmp161 *tmp162
   709 jump *label229 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  710 control enabled reactor3 false
   711 print "ABANDON - battery crit"
   712 print "\n"
   713 set :start_reactor:supply_fuel false
 
   729 jump *label249 always
   730 label *label236
   731 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  732 op sub *tmp170 *tmp169 5000
+  733 op div *tmp171 *tmp170 23000
+  734 op mul :start_reactor:charge_units *tmp171 0.6
+  735 op div *tmp173 :start_reactor:surplus 2000
   736 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label237 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  737 op mul *tmp175 2 3
+  738 op add :start_reactor:cryo_req 3 6
+  739 jump *label237 greaterThanEq .REACTORS_DESIRED 3
   740 print "IDLE"
   741 print "\n"
   742 set :start_reactor:supply_fuel false
 
   757 set :start_reactor:supply_fuel false
   758 jump *label247 always
   759 label *label238
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  760 op lessThan *tmp188 :start_reactor:fuel 10
+  761 op land *tmp189 :fuel_3 *tmp188
   762 jump *label241 equal *tmp189 false
   763 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label239 lessThanEq *tmp191 .FUEL_REQ
+  764 jump *label239 lessThanEq *tmp191 10
   765 print "WAIT fuel"
   766 print "\n"
   767 jump *label240 always
 
   771 label *label240
   772 jump *label246 always
   773 label *label241
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label242 greaterThanEq :start_reactor:fuel_stored *tmp194
+  774 op mul *tmp194 45 3
+  775 jump *label242 greaterThanEq :start_reactor:fuel_stored 135
   776 print "WAIT buffer fuel"
   777 print "\n"
   778 jump *label245 always
   779 label *label242
-    * jump *label243 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  780 jump *label243 greaterThanEq :start_reactor:cryo 9
   781 print "WAIT cryo"
   782 print "\n"
   783 jump *label244 always
   784 label *label243
   785 print "STARTUP"
   786 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  787 op add .START_POWER_REQ .START_POWER_REQ 23000
+  788 control enabled reactor3 true
   789 label *label244
   790 label *label245
   791 label *label246
 
   793 label *label248
   794 label *label249
   795 label *label250
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  796 sensor *tmp201 reactor3 @enabled
+  797 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   798 set :start_reactor*retval :start_reactor:supply_fuel
   799 jump *label251 always
   800 label *label251
-    * set :fuel_3 :start_reactor*retval
+  801 set :fuel_3 :start_reactor:supply_fuel
   802 set :t_startup3 .RET_T_STARTUP
   803 set :start_reactor:reactor reactor4
   804 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   600 label *label118
   601 label *label119
   602 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   603 label *label216
   604 op sub *tmp113 @tick :t_startup3
   605 op idiv :start_reactor:secs *tmp113 60
 
   726 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   727 op sub *tmp170 *tmp169 5000
   728 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  729 op div :start_reactor:charge_units *tmp170 38333.333333333336
   730 op div *tmp173 :start_reactor:surplus 2000
   731 op max :start_reactor:flow_units -0.1 *tmp173
   732 op mul *tmp175 2 3
 
   790 label *label250
   791 sensor *tmp201 reactor3 @enabled
   792 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * set :start_reactor*retval :start_reactor:supply_fuel
   793 jump *label251 always
   794 label *label251
   795 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    59 control enabled projector1 false
    60 control enabled projector2 false
    61 set :check_radar*retval false
-    * jump *label115 always
    62 label *label114
    63 label *label115
    64 op notEqual *tmp9 switch1 null
 
   361 label *label178
   362 sensor *tmp201 reactor1 @enabled
   363 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * jump *label179 always
   364 label *label179
   365 set :fuel_1 :start_reactor:supply_fuel
   366 set :t_startup1 .RET_T_STARTUP
 
   560 label *label214
   561 sensor *tmp201 reactor2 @enabled
   562 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * jump *label215 always
   563 label *label215
   564 set :fuel_2 :start_reactor:supply_fuel
   565 set :t_startup2 .RET_T_STARTUP
 
   593 control enabled projector1 false
   594 control enabled projector2 false
   595 set :check_radar*retval false
-    * jump *label119 always
   596 label *label118
   597 label *label119
   598 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   786 label *label250
   787 sensor *tmp201 reactor3 @enabled
   788 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * jump *label251 always
   789 label *label251
   790 set :fuel_3 :start_reactor:supply_fuel
   791 set :t_startup3 .RET_T_STARTUP
 
   872 label *label34
   873 label *label30
   874 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label28 always
   875 label *label28
   876 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   877 control config unloader7 *tmp51
 
   895 label *label100
   896 op idiv *tmp93 .AVG_SURPLUS 100
   897 op div :kilo*retval *tmp93 10
-    * jump *label101 always
   898 label *label101
   899 set :surplus :kilo*retval
   900 sensor :kilo:val node1 @powerNetStored
   901 label *label102
   902 op idiv *tmp93 :kilo:val 100
   903 op div :kilo*retval *tmp93 10
-    * jump *label103 always
   904 label *label103
   905 set :charge :kilo*retval
   906 jump *label42 lessThanEq .START_POWER_REQ 0
   907 label *label104
   908 op idiv *tmp93 .START_POWER_REQ 100
   909 op div :kilo*retval *tmp93 10
-    * jump *label105 always
   910 label *label105
   911 print "Req "
   912 print :kilo*retval
 
  1154 sensor *tmp201 :start_reactor:reactor @enabled
  1155 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1156 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label63 always
  1157 label *label63
  1158 return :start_reactor*retaddr
  1159 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   209 op greaterThan *tmp136 1 1
   210 op mul *tmp137 15 1
   211 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  212 set *tmp139 false
   213 jump *label147 equal *tmp139 false
   214 control enabled reactor1 false
   215 print "STOP system fuel low"
 
   408 op greaterThan *tmp136 2 1
   409 op mul *tmp137 15 2
   410 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  411 set *tmp139 *tmp138
   412 jump *label183 equal *tmp139 false
   413 control enabled reactor2 false
   414 print "STOP system fuel low"
 
   634 op greaterThan *tmp136 3 1
   635 op mul *tmp137 15 3
   636 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  637 set *tmp139 *tmp138
   638 jump *label219 equal *tmp139 false
   639 control enabled reactor3 false
   640 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
    84 op equal *tmp106 *tmp105 false
    85 op or *tmp107 *tmp104 *tmp106
    86 jump *label121 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+   87 set .START_POWER_REQ 0
    88 jump *label123 always
    89 label *label121
    90 label *label122
    91 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    92 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    93 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+   94 set .START_POWER_REQ :calc_charge_req:charge_req
    95 jump *label123 always
    96 label *label123
-    * set .START_POWER_REQ :calc_charge_req*retval
    97 label *label124
    98 op sub *tmp102 @tick :t_startup2
    99 op idiv :calc_charge_req:secs *tmp102 60
 
   893 label *label37
   894 label *label100
   895 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  896 op div :surplus *tmp93 10
   897 label *label101
-    * set :surplus :kilo*retval
   898 sensor :kilo:val node1 @powerNetStored
   899 label *label102
   900 op idiv *tmp93 :kilo:val 100
 
   965 op sub *tmp113 @tick :start_reactor:t_startup
   966 op idiv :start_reactor:secs *tmp113 60
   967 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+  968 set :start_reactor*retval true
   969 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
   970 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   971 sensor *tmp118 .NODE @powerNetStored
 
   986 control enabled :start_reactor:reactor false
   987 print "emergency mode"
   988 print "\n"
-    * set :start_reactor:supply_fuel false
+  989 set :start_reactor*retval false
   990 jump *label65 always
   991 label *label64
   992 jump *label66 equal :start_reactor:enabled false
 
  1045 control enabled :start_reactor:reactor false
  1046 print "START FAIL battery"
  1047 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1048 set :start_reactor*retval false
  1049 jump *label80 always
  1050 label *label79
  1051 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1066 control enabled :start_reactor:reactor false
  1067 print "ABANDON - battery crit"
  1068 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1069 set :start_reactor*retval false
  1070 jump *label82 always
  1071 label *label81
  1072 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1095 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1096 print "IDLE"
  1097 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1098 set :start_reactor*retval false
  1099 jump *label84 always
  1100 label *label83
  1101 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1110 print :start_reactor:flow
  1111 print "W)"
  1112 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1113 set :start_reactor*retval false
  1114 jump *label86 always
  1115 label *label85
  1116 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1151 label *label65
  1152 sensor *tmp201 :start_reactor:reactor @enabled
  1153 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1154 label *label63
  1155 return :start_reactor*retaddr
  1156 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   209 op mul *tmp137 15 1
   210 op lessThan *tmp138 :start_reactor:fuel_stored 15
   211 set *tmp139 false
-    * jump *label147 equal *tmp139 false
+  212 jump *label147 equal false false
   213 control enabled reactor1 false
   214 print "STOP system fuel low"
   215 print "\n"
 
   408 op mul *tmp137 15 2
   409 op lessThan *tmp138 :start_reactor:fuel_stored 30
   410 set *tmp139 *tmp138
-    * jump *label183 equal *tmp139 false
+  411 jump *label183 equal *tmp138 false
   412 control enabled reactor2 false
   413 print "STOP system fuel low"
   414 print "\n"
 
   634 op mul *tmp137 15 3
   635 op lessThan *tmp138 :start_reactor:fuel_stored 45
   636 set *tmp139 *tmp138
-    * jump *label219 equal *tmp139 false
+  637 jump *label219 equal *tmp138 false
   638 control enabled reactor3 false
   639 print "STOP system fuel low"
   640 print "\n"
 
   808 label *label26
   809 set :fuel_5 :start_reactor*retval
   810 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  811 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   812 op or :fuel_many *tmp27 :start_reactor*retval
   813 label *label110
   814 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   209 op mul *tmp137 15 1
   210 op lessThan *tmp138 :start_reactor:fuel_stored 15
   211 set *tmp139 false
-    * jump *label147 equal false false
+  212 jump *label147 always
   213 control enabled reactor1 false
   214 print "STOP system fuel low"
   215 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    35 label *label7
    36 set .CONTAINER vault1
    37 set .NODE node1
-    * label *label112
    38 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    39 jump *label113 equal :check_radar:enemy_found null
    40 control enabled projector1 true
 
    70 set *tmp8 true
    71 jump *label11 always
    72 label *label12
-    * label *label13
    73 set *tmp8 false
    74 jump *label11 always
    75 label *label11
    76 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label120
    77 op sub *tmp102 @tick :t_startup1
    78 op idiv :calc_charge_req:secs *tmp102 60
    79 op greaterThan *tmp104 :calc_charge_req:secs 30
 
    84 set .START_POWER_REQ 0
    85 jump *label123 always
    86 label *label121
-    * label *label122
    87 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
    88 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
    89 op idiv :calc_charge_req:charge_req *tmp110 0.04
    90 set .START_POWER_REQ :calc_charge_req:charge_req
    91 jump *label123 always
    92 label *label123
-    * label *label124
    93 op sub *tmp102 @tick :t_startup2
    94 op idiv :calc_charge_req:secs *tmp102 60
    95 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   100 set :calc_charge_req*retval 0
   101 jump *label127 always
   102 label *label125
-    * label *label126
   103 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   104 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   105 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   107 jump *label127 always
   108 label *label127
   109 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label128
   110 op sub *tmp102 @tick :t_startup3
   111 op idiv :calc_charge_req:secs *tmp102 60
   112 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   117 set :calc_charge_req*retval 0
   118 jump *label131 always
   119 label *label129
-    * label *label130
   120 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   121 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   122 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   124 jump *label131 always
   125 label *label131
   126 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label132
   127 op sub *tmp102 @tick :t_startup4
   128 op idiv :calc_charge_req:secs *tmp102 60
   129 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   134 set :calc_charge_req*retval 0
   135 jump *label135 always
   136 label *label133
-    * label *label134
   137 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   138 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   139 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   141 jump *label135 always
   142 label *label135
   143 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label136
   144 op sub *tmp102 @tick :t_startup5
   145 op idiv :calc_charge_req:secs *tmp102 60
   146 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   151 set :calc_charge_req*retval 0
   152 jump *label139 always
   153 label *label137
-    * label *label138
   154 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   155 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   156 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   158 jump *label139 always
   159 label *label139
   160 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label144
   161 op sub *tmp113 @tick :t_startup1
   162 op idiv :start_reactor:secs *tmp113 60
   163 sensor :start_reactor:fuel reactor1 @blast-compound
 
   215 jump *label160 always
   216 label *label149
   217 jump *label156 greaterThanEq :start_reactor:secs 30
-    * label *label150
   218 op sub *tmp102 @tick :t_startup1
   219 op idiv :calc_charge_req:secs *tmp102 60
   220 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   225 set :calc_charge_req*retval 0
   226 jump *label153 always
   227 label *label151
-    * label *label152
   228 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   229 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   230 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   345 label *label178
   346 sensor *tmp201 reactor1 @enabled
   347 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label179
   348 set :fuel_1 :start_reactor:supply_fuel
   349 set :t_startup1 .RET_T_STARTUP
-    * label *label106
   350 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   351 control config unloader1 *tmp97
   352 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   353 control config unloader2 *tmp101
-    * label *label107
-    * label *label180
   354 op sub *tmp113 @tick :t_startup2
   355 op idiv :start_reactor:secs *tmp113 60
   356 sensor :start_reactor:fuel reactor2 @blast-compound
 
   408 jump *label196 always
   409 label *label185
   410 jump *label192 greaterThanEq :start_reactor:secs 30
-    * label *label186
   411 op sub *tmp102 @tick :t_startup2
   412 op idiv :calc_charge_req:secs *tmp102 60
   413 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   418 set :calc_charge_req*retval 0
   419 jump *label189 always
   420 label *label187
-    * label *label188
   421 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   422 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   423 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   538 label *label214
   539 sensor *tmp201 reactor2 @enabled
   540 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label215
   541 set :fuel_2 :start_reactor:supply_fuel
   542 set :t_startup2 .RET_T_STARTUP
-    * label *label108
   543 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   544 control config unloader3 *tmp97
   545 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   546 control config unloader4 *tmp101
-    * label *label109
-    * label *label116
   547 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   548 jump *label117 equal :check_radar:enemy_found null
   549 control enabled projector1 true
 
   570 label *label118
   571 label *label119
   572 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label216
   573 op sub *tmp113 @tick :t_startup3
   574 op idiv :start_reactor:secs *tmp113 60
   575 sensor :start_reactor:fuel reactor3 @blast-compound
 
   627 jump *label232 always
   628 label *label221
   629 jump *label228 greaterThanEq :start_reactor:secs 30
-    * label *label222
   630 op sub *tmp102 @tick :t_startup3
   631 op idiv :calc_charge_req:secs *tmp102 60
   632 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   637 set :calc_charge_req*retval 0
   638 jump *label225 always
   639 label *label223
-    * label *label224
   640 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   641 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   642 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   757 label *label250
   758 sensor *tmp201 reactor3 @enabled
   759 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label251
   760 set :fuel_3 :start_reactor:supply_fuel
   761 set :t_startup3 .RET_T_STARTUP
   762 set :start_reactor:reactor reactor4
 
   781 set :t_startup5 .RET_T_STARTUP
   782 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   783 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label110
   784 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   785 control config unloader5 *tmp97
   786 select *tmp101 equal :fuel_many false @blast-compound @scrap
   787 control config unloader6 *tmp101
-    * label *label111
   788 op or *tmp30 :fuel_1 :fuel_2
   789 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   790 sensor *tmp33 node1 @powerNetStored
 
   840 label *label34
   841 label *label30
   842 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label28
   843 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   844 control config unloader7 *tmp51
   845 sensor *tmp53 node1 @powerNetStored
 
   858 control enabled generator1 true
   859 control enabled generator2 true
   860 label *label39
-    * label *label37
-    * label *label100
   861 op idiv *tmp93 .AVG_SURPLUS 100
   862 op div :surplus *tmp93 10
-    * label *label101
   863 sensor :kilo:val node1 @powerNetStored
-    * label *label102
   864 op idiv *tmp93 :kilo:val 100
   865 op div :kilo*retval *tmp93 10
-    * label *label103
   866 set :charge :kilo*retval
   867 jump *label42 lessThanEq .START_POWER_REQ 0
-    * label *label104
   868 op idiv *tmp93 .START_POWER_REQ 100
   869 op div :kilo*retval *tmp93 10
-    * label *label105
   870 print "Req "
   871 print :kilo*retval
   872 print "kJ / "
 
   894 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   895 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   896 label *label48
-    * label *label49
   897 label *label46
-    * label *label47
   898 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   899 op lessThan *tmp83 .AVG_SURPLUS 8000
   900 op land *tmp84 *tmp81 *tmp83
 
   905 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   906 op min .REACTORS_DESIRED 5 *tmp89
   907 label *label50
-    * label *label51
-    * label *label45
   908 label *label43
   909 jump *label52 equal .REACTORS_DESIRED 5
   910 print "Require only "
 
   912 print "/5 reactors."
   913 print "\n"
   914 label *label52
-    * label *label53
   915 printflush message1
-    * label *label8
   916 jump *label7 always
-    * label *label9
   917 end
   918 label *label3
   919 op sub *tmp113 @tick :start_reactor:t_startup
 
   973 jump *label75 always
   974 label *label74
   975 jump *label76 greaterThanEq :start_reactor:secs 30
-    * label *label140
   976 op sub *tmp102 @tick :start_reactor:t_startup
   977 op idiv :calc_charge_req:secs *tmp102 60
   978 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   983 set :calc_charge_req*retval 0
   984 jump *label143 always
   985 label *label141
-    * label *label142
   986 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   987 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   988 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1103 label *label65
  1104 sensor *tmp201 :start_reactor:reactor @enabled
  1105 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label63
  1106 return :start_reactor*retaddr
  1107 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   190 control enabled reactor1 false
   191 print "STOP unwanted"
   192 print "\n"
-    * jump *label163 always
+  193 jump *label177 always
   194 label *label146
   195 op greaterThan *tmp136 1 1
   196 op mul *tmp137 15 1
 
   200 control enabled reactor1 false
   201 print "STOP system fuel low"
   202 print "\n"
-    * jump *label162 always
+  203 jump *label177 always
   204 label *label147
   205 jump *label148 greaterThan :start_reactor:fuel 1
   206 control enabled reactor1 false
   207 print "STOP fuel low"
   208 print "\n"
-    * jump *label161 always
+  209 jump *label177 always
   210 label *label148
   211 jump *label149 greaterThan :start_reactor:cryo 1
   212 control enabled reactor1 false
   213 print "STOP out of cryo"
   214 print "\n"
-    * jump *label160 always
+  215 jump *label177 always
   216 label *label149
   217 jump *label156 greaterThanEq :start_reactor:secs 30
   218 op sub *tmp102 @tick :t_startup1
 
   240 print "START FAIL battery"
   241 print "\n"
   242 set :start_reactor:supply_fuel false
-    * jump *label155 always
+  243 jump *label177 always
   244 label *label154
   245 op sub :start_reactor:time_left 30 :start_reactor:secs
   246 print "Starting "
 
   251 print "J"
   252 print "\n"
   253 label *label155
-    * jump *label159 always
+  254 jump *label177 always
   255 label *label156
   256 op lessThan *tmp161 :start_reactor:charge 2000
   257 op lessThan *tmp162 :start_reactor:surplus -500
 
   261 print "ABANDON - battery crit"
   262 print "\n"
   263 set :start_reactor:supply_fuel false
-    * jump *label158 always
+  264 jump *label177 always
   265 label *label157
   266 op idiv :start_reactor:mins :start_reactor:secs 6
   267 op div :start_reactor:mins :start_reactor:mins 10
 
   314 jump *label167 lessThanEq *tmp191 10
   315 print "WAIT fuel"
   316 print "\n"
-    * jump *label168 always
+  317 jump *label174 always
   318 label *label167
   319 print "WAIT system fuel"
   320 print "\n"
 
   383 control enabled reactor2 false
   384 print "STOP unwanted"
   385 print "\n"
-    * jump *label199 always
+  386 jump *label213 always
   387 label *label182
   388 op greaterThan *tmp136 2 1
   389 op mul *tmp137 15 2
 
   393 control enabled reactor2 false
   394 print "STOP system fuel low"
   395 print "\n"
-    * jump *label198 always
+  396 jump *label213 always
   397 label *label183
   398 jump *label184 greaterThan :start_reactor:fuel 1
   399 control enabled reactor2 false
   400 print "STOP fuel low"
   401 print "\n"
-    * jump *label197 always
+  402 jump *label213 always
   403 label *label184
   404 jump *label185 greaterThan :start_reactor:cryo 1
   405 control enabled reactor2 false
   406 print "STOP out of cryo"
   407 print "\n"
-    * jump *label196 always
+  408 jump *label213 always
   409 label *label185
   410 jump *label192 greaterThanEq :start_reactor:secs 30
   411 op sub *tmp102 @tick :t_startup2
 
   433 print "START FAIL battery"
   434 print "\n"
   435 set :start_reactor:supply_fuel false
-    * jump *label191 always
+  436 jump *label213 always
   437 label *label190
   438 op sub :start_reactor:time_left 30 :start_reactor:secs
   439 print "Starting "
 
   444 print "J"
   445 print "\n"
   446 label *label191
-    * jump *label195 always
+  447 jump *label213 always
   448 label *label192
   449 op lessThan *tmp161 :start_reactor:charge 2000
   450 op lessThan *tmp162 :start_reactor:surplus -500
 
   454 print "ABANDON - battery crit"
   455 print "\n"
   456 set :start_reactor:supply_fuel false
-    * jump *label194 always
+  457 jump *label213 always
   458 label *label193
   459 op idiv :start_reactor:mins :start_reactor:secs 6
   460 op div :start_reactor:mins :start_reactor:mins 10
 
   507 jump *label203 lessThanEq *tmp191 10
   508 print "WAIT fuel"
   509 print "\n"
-    * jump *label204 always
+  510 jump *label210 always
   511 label *label203
   512 print "WAIT system fuel"
   513 print "\n"
 
   602 control enabled reactor3 false
   603 print "STOP unwanted"
   604 print "\n"
-    * jump *label235 always
+  605 jump *label249 always
   606 label *label218
   607 op greaterThan *tmp136 3 1
   608 op mul *tmp137 15 3
 
   612 control enabled reactor3 false
   613 print "STOP system fuel low"
   614 print "\n"
-    * jump *label234 always
+  615 jump *label249 always
   616 label *label219
   617 jump *label220 greaterThan :start_reactor:fuel 1
   618 control enabled reactor3 false
   619 print "STOP fuel low"
   620 print "\n"
-    * jump *label233 always
+  621 jump *label249 always
   622 label *label220
   623 jump *label221 greaterThan :start_reactor:cryo 1
   624 control enabled reactor3 false
   625 print "STOP out of cryo"
   626 print "\n"
-    * jump *label232 always
+  627 jump *label249 always
   628 label *label221
   629 jump *label228 greaterThanEq :start_reactor:secs 30
   630 op sub *tmp102 @tick :t_startup3
 
   652 print "START FAIL battery"
   653 print "\n"
   654 set :start_reactor:supply_fuel false
-    * jump *label227 always
+  655 jump *label249 always
   656 label *label226
   657 op sub :start_reactor:time_left 30 :start_reactor:secs
   658 print "Starting "
 
   663 print "J"
   664 print "\n"
   665 label *label227
-    * jump *label231 always
+  666 jump *label249 always
   667 label *label228
   668 op lessThan *tmp161 :start_reactor:charge 2000
   669 op lessThan *tmp162 :start_reactor:surplus -500
 
   673 print "ABANDON - battery crit"
   674 print "\n"
   675 set :start_reactor:supply_fuel false
-    * jump *label230 always
+  676 jump *label249 always
   677 label *label229
   678 op idiv :start_reactor:mins :start_reactor:secs 6
   679 op div :start_reactor:mins :start_reactor:mins 10
 
   726 jump *label239 lessThanEq *tmp191 10
   727 print "WAIT fuel"
   728 print "\n"
-    * jump *label240 always
+  729 jump *label246 always
   730 label *label239
   731 print "WAIT system fuel"
   732 print "\n"
 
   810 jump *label31 equal :emerg_shutdown false
   811 print " Enemies detected."
   812 print "\n"
-    * jump *label32 always
+  813 jump *label30 always
   814 label *label31
   815 print " Critical power."
   816 print "\n"
 
   948 control enabled :start_reactor:reactor false
   949 print "STOP unwanted"
   950 print "\n"
-    * jump *label69 always
+  951 jump *label67 always
   952 label *label68
   953 op greaterThan *tmp136 :start_reactor:reactor_num 1
   954 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   958 control enabled :start_reactor:reactor false
   959 print "STOP system fuel low"
   960 print "\n"
-    * jump *label71 always
+  961 jump *label67 always
   962 label *label70
   963 jump *label72 greaterThan :start_reactor:fuel 1
   964 control enabled :start_reactor:reactor false
   965 print "STOP fuel low"
   966 print "\n"
-    * jump *label73 always
+  967 jump *label67 always
   968 label *label72
   969 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   970 control enabled :start_reactor:reactor false
   971 print "STOP out of cryo"
   972 print "\n"
-    * jump *label75 always
+  973 jump *label67 always
   974 label *label74
   975 jump *label76 greaterThanEq :start_reactor:secs 30
   976 op sub *tmp102 @tick :start_reactor:t_startup
 
   998 print "START FAIL battery"
   999 print "\n"
  1000 set :start_reactor*retval false
-    * jump *label80 always
+ 1001 jump *label67 always
  1002 label *label79
  1003 op sub :start_reactor:time_left 30 :start_reactor:secs
  1004 print "Starting "
 
  1009 print "J"
  1010 print "\n"
  1011 label *label80
-    * jump *label77 always
+ 1012 jump *label67 always
  1013 label *label76
  1014 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1015 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1019 print "ABANDON - battery crit"
  1020 print "\n"
  1021 set :start_reactor*retval false
-    * jump *label82 always
+ 1022 jump *label67 always
  1023 label *label81
  1024 op idiv :start_reactor:mins :start_reactor:secs 6
  1025 op div :start_reactor:mins :start_reactor:mins 10
 
  1072 jump *label89 lessThanEq *tmp191 .FUEL_REQ
  1073 print "WAIT fuel"
  1074 print "\n"
-    * jump *label90 always
+ 1075 jump *label88 always
  1076 label *label89
  1077 print "WAIT system fuel"
  1078 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    53 control enabled reactor5 false
    54 set :check_radar*retval true
    55 jump *label115 always
-    * jump *label114 always
    56 label *label113
    57 control enabled projector1 false
    58 control enabled projector2 false
 
   196 op lessThan *tmp138 :start_reactor:fuel_stored 15
   197 set *tmp139 false
   198 jump *label147 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label177 always
   199 label *label147
   200 jump *label148 greaterThan :start_reactor:fuel 1
   201 control enabled reactor1 false
 
   245 print :calc_charge_req*retval
   246 print "J"
   247 print "\n"
-    * label *label155
   248 jump *label177 always
   249 label *label156
   250 op lessThan *tmp161 :start_reactor:charge 2000
 
   264 print " "
   265 print "mins"
   266 print "\n"
-    * label *label158
-    * label *label159
-    * label *label160
-    * label *label161
-    * label *label162
-    * label *label163
   267 jump *label177 always
   268 label *label164
   269 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   306 label *label167
   307 print "WAIT system fuel"
   308 print "\n"
-    * label *label168
   309 jump *label174 always
   310 label *label169
   311 op mul *tmp194 45 1
 
   430 print :calc_charge_req*retval
   431 print "J"
   432 print "\n"
-    * label *label191
   433 jump *label213 always
   434 label *label192
   435 op lessThan *tmp161 :start_reactor:charge 2000
 
   449 print " "
   450 print "mins"
   451 print "\n"
-    * label *label194
-    * label *label195
-    * label *label196
-    * label *label197
-    * label *label198
-    * label *label199
   452 jump *label213 always
   453 label *label200
   454 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   491 label *label203
   492 print "WAIT system fuel"
   493 print "\n"
-    * label *label204
   494 jump *label210 always
   495 label *label205
   496 op mul *tmp194 45 2
 
   541 control enabled reactor5 false
   542 set :check_radar*retval true
   543 jump *label119 always
-    * jump *label118 always
   544 label *label117
   545 control enabled projector1 false
   546 control enabled projector2 false
 
   640 print :calc_charge_req*retval
   641 print "J"
   642 print "\n"
-    * label *label227
   643 jump *label249 always
   644 label *label228
   645 op lessThan *tmp161 :start_reactor:charge 2000
 
   659 print " "
   660 print "mins"
   661 print "\n"
-    * label *label230
-    * label *label231
-    * label *label232
-    * label *label233
-    * label *label234
-    * label *label235
   662 jump *label249 always
   663 label *label236
   664 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   701 label *label239
   702 print "WAIT system fuel"
   703 print "\n"
-    * label *label240
   704 jump *label246 always
   705 label *label241
   706 op mul *tmp194 45 3
 
   784 label *label31
   785 print " Critical power."
   786 print "\n"
-    * label *label32
   787 jump *label30 always
   788 label *label29
   789 jump *label33 notEqual :throttle_blast:reactors_fueled false
 
   883 label *label52
   884 printflush message1
   885 jump *label7 always
-    * end
   886 label *label3
   887 op sub *tmp113 @tick :start_reactor:t_startup
   888 op idiv :start_reactor:secs *tmp113 60
 
   976 print :calc_charge_req*retval
   977 print "J"
   978 print "\n"
-    * label *label80
   979 jump *label67 always
   980 label *label76
   981 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   995 print " "
   996 print "mins"
   997 print "\n"
-    * label *label82
-    * label *label77
-    * label *label75
-    * label *label73
-    * label *label71
-    * label *label69
   998 jump *label67 always
   999 label *label66
  1000 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1037 label *label89
  1038 print "WAIT system fuel"
  1039 print "\n"
-    * label *label90
  1040 jump *label88 always
  1041 label *label87
  1042 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1064 sensor *tmp201 :start_reactor:reactor @enabled
  1065 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1066 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1:
 
    57 control enabled projector1 false
    58 control enabled projector2 false
    59 set :check_radar*retval false
-    * label *label114
    60 label *label115
    61 op notEqual *tmp9 switch1 null
    62 sensor *tmp10 switch1 @enabled
 
   544 control enabled projector1 false
   545 control enabled projector2 false
   546 set :check_radar*retval false
-    * label *label118
   547 label *label119
   548 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   549 op sub *tmp113 @tick :t_startup3

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   194 op mul *tmp137 15 1
   195 op lessThan *tmp138 :start_reactor:fuel_stored 15
   196 set *tmp139 false
-    * jump *label147 always
   197 label *label147
   198 jump *label148 greaterThan :start_reactor:fuel 1
   199 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   194 op mul *tmp137 15 1
   195 op lessThan *tmp138 :start_reactor:fuel_stored 15
   196 set *tmp139 false
-    * label *label147
   197 jump *label148 greaterThan :start_reactor:fuel 1
   198 control enabled reactor1 false
   199 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    63 op equal *tmp11 *tmp10 false
    64 op land *tmp12 *tmp9 *tmp11
    65 jump *label12 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   66 print "User has disabled emergency switch\n"
    67 set *tmp8 true
    68 jump *label11 always
    69 label *label12
 
   171 op mul *tmp125 :start_reactor:surplus 0.2
   172 op add .AVG_SURPLUS *tmp124 *tmp125
   173 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  174 print "#1 - "
   175 jump *label145 equal :emerg_shutdown false
   176 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  177 print "emergency mode\n"
   178 set :start_reactor:supply_fuel false
   179 jump *label178 always
   180 label *label145
   181 jump *label164 equal :start_reactor:enabled false
   182 jump *label146 greaterThanEq .REACTORS_DESIRED 1
   183 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  184 print "STOP unwanted\n"
   185 jump *label177 always
   186 label *label146
   187 op greaterThan *tmp136 1 1
 
   190 set *tmp139 false
   191 jump *label148 greaterThan :start_reactor:fuel 1
   192 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  193 print "STOP fuel low\n"
   194 jump *label177 always
   195 label *label148
   196 jump *label149 greaterThan :start_reactor:cryo 1
   197 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  198 print "STOP out of cryo\n"
   199 jump *label177 always
   200 label *label149
   201 jump *label156 greaterThanEq :start_reactor:secs 30
 
   221 op land *tmp156 *tmp154 *tmp155
   222 jump *label154 equal *tmp156 false
   223 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  224 print "START FAIL battery\n"
   225 set :start_reactor:supply_fuel false
   226 jump *label177 always
   227 label *label154
   228 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  229 print "Starting {0} secs, req {0}J\n"
+  230 format :start_reactor:time_left
+  231 format :calc_charge_req*retval
   232 jump *label177 always
   233 label *label156
   234 op lessThan *tmp161 :start_reactor:charge 2000
 
   236 op land *tmp163 *tmp161 *tmp162
   237 jump *label157 equal *tmp163 false
   238 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  239 print "ABANDON - battery crit\n"
   240 set :start_reactor:supply_fuel false
   241 jump *label177 always
   242 label *label157
   243 op idiv :start_reactor:mins :start_reactor:secs 6
   244 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  245 print "RUN {0} mins\n"
+  246 format :start_reactor:mins
   247 jump *label177 always
   248 label *label164
   249 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   255 op mul *tmp175 2 1
   256 op add :start_reactor:cryo_req 3 2
   257 jump *label165 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  258 print "IDLE\n"
   259 set :start_reactor:supply_fuel false
   260 jump *label176 always
   261 label *label165
 
   265 op div :start_reactor:flow *tmp183 10
   266 op idiv *tmp186 :start_reactor:charge_units 0.001
   267 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  268 print "WAIT power. (%{0}J + %{0}W)\n"
+  269 format :start_reactor:charge
+  270 format :start_reactor:flow
   271 set :start_reactor:supply_fuel false
   272 jump *label175 always
   273 label *label166
 
   276 jump *label169 equal *tmp189 false
   277 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   278 jump *label167 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  279 print "WAIT fuel\n"
   280 jump *label174 always
   281 label *label167
-    * print "WAIT system fuel"
-    * print "\n"
+  282 print "WAIT system fuel\n"
   283 jump *label174 always
   284 label *label169
   285 op mul *tmp194 45 1
   286 jump *label170 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  287 print "WAIT buffer fuel\n"
   288 jump *label173 always
   289 label *label170
   290 jump *label171 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  291 print "WAIT cryo\n"
   292 jump *label172 always
   293 label *label171
-    * print "STARTUP"
-    * print "\n"
+  294 print "STARTUP\n"
   295 op add .START_POWER_REQ .START_POWER_REQ 23000
   296 control enabled reactor1 true
   297 label *label172
 
   325 op mul *tmp125 :start_reactor:surplus 0.2
   326 op add .AVG_SURPLUS *tmp124 *tmp125
   327 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  328 print "#2 - "
   329 jump *label181 equal :emerg_shutdown false
   330 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  331 print "emergency mode\n"
   332 set :start_reactor:supply_fuel false
   333 jump *label214 always
   334 label *label181
   335 jump *label200 equal :start_reactor:enabled false
   336 jump *label182 greaterThanEq .REACTORS_DESIRED 2
   337 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  338 print "STOP unwanted\n"
   339 jump *label213 always
   340 label *label182
   341 op greaterThan *tmp136 2 1
 
   344 set *tmp139 *tmp138
   345 jump *label183 equal *tmp138 false
   346 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  347 print "STOP system fuel low\n"
   348 jump *label213 always
   349 label *label183
   350 jump *label184 greaterThan :start_reactor:fuel 1
   351 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  352 print "STOP fuel low\n"
   353 jump *label213 always
   354 label *label184
   355 jump *label185 greaterThan :start_reactor:cryo 1
   356 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  357 print "STOP out of cryo\n"
   358 jump *label213 always
   359 label *label185
   360 jump *label192 greaterThanEq :start_reactor:secs 30
 
   380 op land *tmp156 *tmp154 *tmp155
   381 jump *label190 equal *tmp156 false
   382 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  383 print "START FAIL battery\n"
   384 set :start_reactor:supply_fuel false
   385 jump *label213 always
   386 label *label190
   387 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  388 print "Starting {0} secs, req {0}J\n"
+  389 format :start_reactor:time_left
+  390 format :calc_charge_req*retval
   391 jump *label213 always
   392 label *label192
   393 op lessThan *tmp161 :start_reactor:charge 2000
 
   395 op land *tmp163 *tmp161 *tmp162
   396 jump *label193 equal *tmp163 false
   397 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  398 print "ABANDON - battery crit\n"
   399 set :start_reactor:supply_fuel false
   400 jump *label213 always
   401 label *label193
   402 op idiv :start_reactor:mins :start_reactor:secs 6
   403 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  404 print "RUN {0} mins\n"
+  405 format :start_reactor:mins
   406 jump *label213 always
   407 label *label200
   408 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   414 op mul *tmp175 2 2
   415 op add :start_reactor:cryo_req 3 4
   416 jump *label201 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  417 print "IDLE\n"
   418 set :start_reactor:supply_fuel false
   419 jump *label212 always
   420 label *label201
 
   424 op div :start_reactor:flow *tmp183 10
   425 op idiv *tmp186 :start_reactor:charge_units 0.001
   426 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  427 print "WAIT power. (%{0}J + %{0}W)\n"
+  428 format :start_reactor:charge
+  429 format :start_reactor:flow
   430 set :start_reactor:supply_fuel false
   431 jump *label211 always
   432 label *label202
 
   435 jump *label205 equal *tmp189 false
   436 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   437 jump *label203 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  438 print "WAIT fuel\n"
   439 jump *label210 always
   440 label *label203
-    * print "WAIT system fuel"
-    * print "\n"
+  441 print "WAIT system fuel\n"
   442 jump *label210 always
   443 label *label205
   444 op mul *tmp194 45 2
   445 jump *label206 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  446 print "WAIT buffer fuel\n"
   447 jump *label209 always
   448 label *label206
   449 jump *label207 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  450 print "WAIT cryo\n"
   451 jump *label208 always
   452 label *label207
-    * print "STARTUP"
-    * print "\n"
+  453 print "STARTUP\n"
   454 op add .START_POWER_REQ .START_POWER_REQ 23000
   455 control enabled reactor2 true
   456 label *label208
 
   508 op mul *tmp125 :start_reactor:surplus 0.2
   509 op add .AVG_SURPLUS *tmp124 *tmp125
   510 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  511 print "#3 - "
   512 jump *label217 equal :emerg_shutdown false
   513 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  514 print "emergency mode\n"
   515 set :start_reactor:supply_fuel false
   516 jump *label250 always
   517 label *label217
   518 jump *label236 equal :start_reactor:enabled false
   519 jump *label218 greaterThanEq .REACTORS_DESIRED 3
   520 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  521 print "STOP unwanted\n"
   522 jump *label249 always
   523 label *label218
   524 op greaterThan *tmp136 3 1
 
   527 set *tmp139 *tmp138
   528 jump *label219 equal *tmp138 false
   529 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  530 print "STOP system fuel low\n"
   531 jump *label249 always
   532 label *label219
   533 jump *label220 greaterThan :start_reactor:fuel 1
   534 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  535 print "STOP fuel low\n"
   536 jump *label249 always
   537 label *label220
   538 jump *label221 greaterThan :start_reactor:cryo 1
   539 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  540 print "STOP out of cryo\n"
   541 jump *label249 always
   542 label *label221
   543 jump *label228 greaterThanEq :start_reactor:secs 30
 
   563 op land *tmp156 *tmp154 *tmp155
   564 jump *label226 equal *tmp156 false
   565 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  566 print "START FAIL battery\n"
   567 set :start_reactor:supply_fuel false
   568 jump *label249 always
   569 label *label226
   570 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  571 print "Starting {0} secs, req {0}J\n"
+  572 format :start_reactor:time_left
+  573 format :calc_charge_req*retval
   574 jump *label249 always
   575 label *label228
   576 op lessThan *tmp161 :start_reactor:charge 2000
 
   578 op land *tmp163 *tmp161 *tmp162
   579 jump *label229 equal *tmp163 false
   580 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  581 print "ABANDON - battery crit\n"
   582 set :start_reactor:supply_fuel false
   583 jump *label249 always
   584 label *label229
   585 op idiv :start_reactor:mins :start_reactor:secs 6
   586 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  587 print "RUN {0} mins\n"
+  588 format :start_reactor:mins
   589 jump *label249 always
   590 label *label236
   591 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   597 op mul *tmp175 2 3
   598 op add :start_reactor:cryo_req 3 6
   599 jump *label237 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  600 print "IDLE\n"
   601 set :start_reactor:supply_fuel false
   602 jump *label248 always
   603 label *label237
 
   607 op div :start_reactor:flow *tmp183 10
   608 op idiv *tmp186 :start_reactor:charge_units 0.001
   609 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  610 print "WAIT power. (%{0}J + %{0}W)\n"
+  611 format :start_reactor:charge
+  612 format :start_reactor:flow
   613 set :start_reactor:supply_fuel false
   614 jump *label247 always
   615 label *label238
 
   618 jump *label241 equal *tmp189 false
   619 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   620 jump *label239 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  621 print "WAIT fuel\n"
   622 jump *label246 always
   623 label *label239
-    * print "WAIT system fuel"
-    * print "\n"
+  624 print "WAIT system fuel\n"
   625 jump *label246 always
   626 label *label241
   627 op mul *tmp194 45 3
   628 jump *label242 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  629 print "WAIT buffer fuel\n"
   630 jump *label245 always
   631 label *label242
   632 jump *label243 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  633 print "WAIT cryo\n"
   634 jump *label244 always
   635 label *label243
-    * print "STARTUP"
-    * print "\n"
+  636 print "STARTUP\n"
   637 op add .START_POWER_REQ .START_POWER_REQ 23000
   638 control enabled reactor3 true
   639 label *label244
 
   688 op or *tmp43 *tmp42 :emerg_shutdown
   689 jump *label29 equal *tmp43 false
   690 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  691 print "Central Fuel at {0} / 0 - "
+  692 format :throttle_blast:fuel_stored
   693 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  694 print " Enemies detected.\n"
   695 jump *label30 always
   696 label *label31
-    * print " Critical power."
-    * print "\n"
+  697 print " Critical power.\n"
   698 jump *label30 always
   699 label *label29
   700 jump *label33 notEqual :throttle_blast:reactors_fueled false
   701 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  702 print "Fuel {0} / 150 (due to emergency)\n"
+  703 format :throttle_blast:fuel_stored
   704 jump *label34 always
   705 label *label33
   706 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  707 print "Fuel {0} / 800\n"
+  708 format :throttle_blast:fuel_stored
   709 label *label34
   710 label *label30
   711 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   718 op lessThan *tmp57 .START_POWER_REQ 10
   719 op land *tmp58 *tmp56 *tmp57
   720 jump *label38 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  721 print "Differential now idle.\n"
   722 control enabled generator1 false
   723 control enabled generator2 false
   724 jump *label39 always
 
   735 jump *label42 lessThanEq .START_POWER_REQ 0
   736 op idiv *tmp93 .START_POWER_REQ 100
   737 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  738 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  739 format :kilo*retval
+  740 format :charge
+  741 format :surplus
   742 jump *label43 always
   743 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  744 print "Power {0}kW, {0}kJ\n"
+  745 format :surplus
+  746 format :kilo*retval
   747 sensor *tmp71 node1 @powerNetStored
   748 sensor *tmp72 node1 @powerNetCapacity
   749 op div :update_reactors_desired:stored *tmp71 *tmp72
 
   768 label *label50
   769 label *label43
   770 jump *label52 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  771 print "Require only {0}/5 reactors.\n"
+  772 format .REACTORS_DESIRED
   773 label *label52
   774 printflush message1
   775 jump *label7 always
 
   790 op mul *tmp125 :start_reactor:surplus 0.2
   791 op add .AVG_SURPLUS *tmp124 *tmp125
   792 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  793 print "#{0} - "
+  794 format :start_reactor:reactor_num
   795 jump *label64 equal :start_reactor:emerg_shutdown false
   796 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  797 print "emergency mode\n"
   798 set :start_reactor*retval false
   799 jump *label65 always
   800 label *label64
   801 jump *label66 equal :start_reactor:enabled false
   802 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   803 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  804 print "STOP unwanted\n"
   805 jump *label67 always
   806 label *label68
   807 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   810 op land *tmp139 *tmp136 *tmp138
   811 jump *label70 equal *tmp139 false
   812 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  813 print "STOP system fuel low\n"
   814 jump *label67 always
   815 label *label70
   816 jump *label72 greaterThan :start_reactor:fuel 1
   817 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  818 print "STOP fuel low\n"
   819 jump *label67 always
   820 label *label72
   821 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   822 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  823 print "STOP out of cryo\n"
   824 jump *label67 always
   825 label *label74
   826 jump *label76 greaterThanEq :start_reactor:secs 30
 
   846 op land *tmp156 *tmp154 *tmp155
   847 jump *label79 equal *tmp156 false
   848 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  849 print "START FAIL battery\n"
   850 set :start_reactor*retval false
   851 jump *label67 always
   852 label *label79
   853 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  854 print "Starting {0} secs, req {0}J\n"
+  855 format :start_reactor:time_left
+  856 format :calc_charge_req*retval
   857 jump *label67 always
   858 label *label76
   859 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   861 op land *tmp163 *tmp161 *tmp162
   862 jump *label81 equal *tmp163 false
   863 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  864 print "ABANDON - battery crit\n"
   865 set :start_reactor*retval false
   866 jump *label67 always
   867 label *label81
   868 op idiv :start_reactor:mins :start_reactor:secs 6
   869 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  870 print "RUN {0} mins\n"
+  871 format :start_reactor:mins
   872 jump *label67 always
   873 label *label66
   874 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   880 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   881 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   882 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  883 print "IDLE\n"
   884 set :start_reactor*retval false
   885 jump *label84 always
   886 label *label83
 
   890 op div :start_reactor:flow *tmp183 10
   891 op idiv *tmp186 :start_reactor:charge_units 0.001
   892 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  893 print "WAIT power. (%{0}J + %{0}W)\n"
+  894 format :start_reactor:charge
+  895 format :start_reactor:flow
   896 set :start_reactor*retval false
   897 jump *label86 always
   898 label *label85
 
   901 jump *label87 equal *tmp189 false
   902 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   903 jump *label89 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  904 print "WAIT fuel\n"
   905 jump *label88 always
   906 label *label89
-    * print "WAIT system fuel"
-    * print "\n"
+  907 print "WAIT system fuel\n"
   908 jump *label88 always
   909 label *label87
   910 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   911 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  912 print "WAIT buffer fuel\n"
   913 jump *label92 always
   914 label *label91
   915 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  916 print "WAIT cryo\n"
   917 jump *label94 always
   918 label *label93
-    * print "STARTUP"
-    * print "\n"
+  919 print "STARTUP\n"
   920 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   921 control enabled :start_reactor:reactor true
   922 label *label94

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label113 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label115 always
label *label113
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label115
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label12 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always
label *label12
set *tmp8 false
jump *label11 always
label *label11
op or :emerg_shutdown :check_radar*retval *tmp8
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label121 equal *tmp107 false
set .START_POWER_REQ 0
jump *label123 always
label *label121
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label123 always
label *label123
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label125 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label127 always
label *label125
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label127 always
label *label127
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label129 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label131 always
label *label129
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label131 always
label *label131
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label133 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label135 always
label *label135
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label137 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label139 always
label *label137
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label139 always
label *label139
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label145 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label178 always
label *label145
jump *label164 equal :start_reactor:enabled false
jump *label146 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label177 always
label *label146
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label148 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label177 always
label *label148
jump *label149 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label177 always
label *label149
jump *label156 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label151 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label153 always
label *label151
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label153 always
label *label153
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label154 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label177 always
label *label154
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label177 always
label *label156
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label157 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label177 always
label *label157
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label177 always
label *label164
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label165 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label176 always
label *label165
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label166 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label175 always
label *label166
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label169 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label167 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label174 always
label *label167
print "WAIT system fuel\n"
jump *label174 always
label *label169
op mul *tmp194 45 1
jump *label170 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label173 always
label *label170
jump *label171 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label172 always
label *label171
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label172
label *label173
label *label174
label *label175
label *label176
label *label177
label *label178
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label181 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label214 always
label *label181
jump *label200 equal :start_reactor:enabled false
jump *label182 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label213 always
label *label182
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label183 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label213 always
label *label183
jump *label184 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label213 always
label *label184
jump *label185 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label213 always
label *label185
jump *label192 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label187 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label189 always
label *label187
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label189 always
label *label189
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label190 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label213 always
label *label190
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label213 always
label *label192
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label193 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label213 always
label *label193
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label213 always
label *label200
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label201 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label212 always
label *label201
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label202 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label211 always
label *label202
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label205 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label203 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label210 always
label *label203
print "WAIT system fuel\n"
jump *label210 always
label *label205
op mul *tmp194 45 2
jump *label206 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label209 always
label *label206
jump *label207 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label208 always
label *label207
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label208
label *label209
label *label210
label *label211
label *label212
label *label213
label *label214
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label117 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label119 always
label *label117
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label119
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label217 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label250 always
label *label217
jump *label236 equal :start_reactor:enabled false
jump *label218 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label249 always
label *label218
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label219 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label249 always
label *label219
jump *label220 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label249 always
label *label220
jump *label221 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label249 always
label *label221
jump *label228 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label223 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label225 always
label *label223
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label225 always
label *label225
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label226 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label249 always
label *label226
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label249 always
label *label228
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label229 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label249 always
label *label229
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label249 always
label *label236
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label237 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label248 always
label *label237
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label238 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label247 always
label *label238
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label241 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label239 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label246 always
label *label239
print "WAIT system fuel\n"
jump *label246 always
label *label241
op mul *tmp194 45 3
jump *label242 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label245 always
label *label242
jump *label243 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label244 always
label *label243
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label244
label *label245
label *label246
label *label247
label *label248
label *label249
label *label250
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
setaddr :start_reactor*retaddr *label25
call *label3 *invalid :start_reactor*retval
label *label25
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
setaddr :start_reactor*retaddr *label26
call *label3 *invalid :start_reactor*retval
label *label26
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label29 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label30 always
label *label31
print " Critical power.\n"
jump *label30 always
label *label29
jump *label33 notEqual :throttle_blast:reactors_fueled false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label30
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label38 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label46 equal *tmp77 false
jump *label48 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label48
label *label46
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label50 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label50
label *label43
jump *label52 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label52
printflush message1
jump *label7 always
label *label3
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label64 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label65 always
label *label64
jump *label66 equal :start_reactor:enabled false
jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label67 always
label *label68
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label70 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label67 always
label *label70
jump *label72 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label67 always
label *label72
jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label67 always
label *label74
jump *label76 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label141 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label143 always
label *label141
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label143 always
label *label143
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label79 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label67 always
label *label79
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label67 always
label *label76
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label81 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label67 always
label *label81
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label67 always
label *label66
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label84 always
label *label83
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label85 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label86 always
label *label85
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label87 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label89 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label88 always
label *label89
print "WAIT system fuel\n"
jump *label88 always
label *label87
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label92 always
label *label91
jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label94 always
label *label93
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label94
label *label92
label *label88
label *label86
label *label84
label *label67
label *label65
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
