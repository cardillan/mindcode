   661 instructions before optimizations.
    65 instructions eliminated by Temp Variables Elimination (2 iterations).
    75 instructions eliminated by Dead Code Elimination (2 passes, 12 iterations).
     1 instructions eliminated by Jump Normalization (2 passes, 6 iterations).
    17 instructions eliminated by Jump Optimization (6 iterations).
    18 instructions eliminated by Single Step Elimination (3 passes, 9 iterations).
     3 instructions eliminated by Expression Optimization (2 passes, 4 iterations).
    10 instructions eliminated by If Expression Optimization (4 iterations).
    65 instructions eliminated by Data Flow Optimization (9 passes, 30 iterations).
   539 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by Jump Threading.
     8 instructions eliminated by Unreachable Code Elimination (2 iterations).
   131 instructions eliminated by Print Merging.
   807 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 521):
  * Inline function 'kilo' defined at line 117:1                 size    +3, benefit      218.8, efficiency     72.917 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 102:15                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 103:14                          size    +2, benefit       87.5, efficiency     43.750
    Inline function call at line 105:15                          size    +2, benefit       43.8, efficiency     21.875
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 525):
  * Inline function 'update_fuel' defined at line 121:1          size    +5, benefit      337.5, efficiency     67.500 (-9 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 82:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 86:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 96:5                            size    +3, benefit      112.5, efficiency     37.500
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 534):
    Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
  * Inline function 'check_radar' defined at line 259:1          size   +21, benefit      175.0, efficiency      8.333 (+15 instructions)
    Inline function call at line 69:22                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 88:23                           size   +22, benefit       87.5, efficiency      3.977
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 519):
  * Inline function 'calc_charge_req' defined at line 126:1      size   +64, benefit      503.9, efficiency      7.874 (+44 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        size  +587, benefit      687.5, efficiency      1.171
    Inline function call at line 73:23                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 74:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 75:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 76:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 77:24                           size   +13, benefit      100.0, efficiency      7.692
    Inline function call at line 80:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 84:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 89:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 91:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 93:14                           size  +147, benefit      137.5, efficiency      0.935
    Inline function call at line 173:26                          size   +13, benefit        3.9, efficiency      0.300

Pass 1: speed optimization selection (cost limit 475):
  ! Inline function 'start_reactor' defined at line 140:1        size  +627, benefit      687.5, efficiency      1.096
  * Inline function call at line 80:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 84:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 325):
  ! Inline function 'start_reactor' defined at line 140:1        size  +470, benefit      550.0, efficiency      1.170
  * Inline function call at line 84:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 175):
  ! Inline function 'start_reactor' defined at line 140:1        size  +313, benefit      412.5, efficiency      1.318
  * Inline function call at line 89:14                           size  +157, benefit      137.5, efficiency      0.876 (+150 instructions)
    Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
    Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 1: speed optimization selection (cost limit 25):
  ! Inline function 'start_reactor' defined at line 140:1        size  +156, benefit      275.0, efficiency      1.763
  ! Inline function call at line 91:14                           size  +157, benefit      137.5, efficiency      0.876
  ! Inline function call at line 93:14                           size  +157, benefit      137.5, efficiency      0.876

Pass 2: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Pass 3: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Pass 4: speed optimization selection (cost limit 38):
  ! Inline function 'start_reactor' defined at line 140:1        size  +154, benefit      275.0, efficiency      1.786
  ! Inline function call at line 91:14                           size  +155, benefit      137.5, efficiency      0.887
  ! Inline function call at line 93:14                           size  +155, benefit      137.5, efficiency      0.887

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    71 print "\n"
    72 set *tmp8 true
    73 jump *label11 always
-    * set *tmp13 null
    74 jump *label13 always
    75 label *label12
-    * set *tmp13 null
    76 label *label13
    77 set *tmp8 false
    78 jump *label11 always
 
   131 setaddr :update_fuel*retaddr *label20 (h:*label20)
   132 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   133 label *label20
-    * set *tmp20 :update_fuel*retval
   134 set :start_reactor:reactor reactor2
   135 set :start_reactor:reactor_num 2
   136 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   148 setaddr :update_fuel*retaddr *label22 (h:*label22)
   149 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   150 label *label22
-    * set *tmp22 :update_fuel*retval
   151 set :check_radar:unit .TOWER
   152 setaddr :check_radar*retaddr *label23 (h:*label23)
   153 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   196 setaddr :update_fuel*retaddr *label27 (h:*label27)
   197 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   198 label *label27
-    * set *tmp29 :update_fuel*retval
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or *tmp31 *tmp30 :fuel_many
   201 set :throttle_blast:reactors_fueled *tmp31
 
   233 print "\n"
   234 set *tmp45 null
   235 label *label32
-    * set *tmp44 *tmp45
   236 jump *label30 always
   237 label *label29
   238 op equal *tmp46 :throttle_blast:reactors_fueled false
 
   259 print "n"
   260 set *tmp47 null
   261 label *label34
-    * set *tmp44 *tmp47
   262 label *label30
   263 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
   264 set *tmp32 *tmp48
 
   293 control enabled generator2 true
   294 set *tmp59 true
   295 label *label39
-    * set *tmp52 *tmp59
   296 label *label37
   297 set :kilo:val .AVG_SURPLUS
   298 setaddr :kilo*retaddr *label40 (h:*label40)
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp68 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   349 label *label48
   350 set *tmp80 null
   351 label *label49
-    * set *tmp78 *tmp80
   352 jump *label47 always
   353 label *label46
-    * set *tmp78 null
   354 label *label47
   355 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   356 op mul *tmp82 .GOAL_BUFFER 0.8
 
   371 label *label51
   372 set *tmp70 *tmp85
   373 label *label45
-    * set *tmp68 *tmp70
   374 label *label43
   375 op notEqual *tmp91 .REACTORS_DESIRED 5
   376 jump *label52 equal *tmp91 false
 
   378 print .REACTORS_DESIRED
   379 print "/5 reactors."
   380 print "\n"
-    * set *tmp92 null
   381 jump *label53 always
   382 label *label52
-    * set *tmp92 null
   383 label *label53
   384 printflush message1
   385 label *label8
 
   428 jump *label61 equal *tmp107 false
   429 set :calc_charge_req*retval 0
   430 jump *label60 always
-    * set *tmp108 null
   431 jump *label62 always
   432 label *label61
-    * set *tmp108 null
   433 label *label62
   434 op sub *tmp109 30 :calc_charge_req:secs
   435 set :calc_charge_req:time_left *tmp109
 
   479 print "emergency mode"
   480 print "\n"
   481 set :start_reactor:supply_fuel false
-    * set *tmp128 :start_reactor:supply_fuel
   482 jump *label65 always
   483 label *label64
   484 jump *label66 equal :start_reactor:enabled false
 
   682 label *label84
   683 set *tmp131 *tmp178
   684 label *label67
-    * set *tmp128 *tmp131
   685 label *label65
   686 sensor *tmp201 :start_reactor:reactor @enabled
   687 op notEqual *tmp202 :start_reactor:enabled *tmp201
   688 jump *label95 equal *tmp202 false
   689 set *tmp204 @tick
   690 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   691 jump *label96 always
   692 label *label95
-    * set *tmp203 null
   693 label *label96
   694 set :start_reactor*retval :start_reactor:supply_fuel
   695 jump *label63 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   226 jump *label31 equal :throttle_blast:emerg_shutdown false
   227 print " Enemies detected."
   228 print "\n"
-    * set *tmp45 null
   229 jump *label32 always
   230 label *label31
   231 print " Critical power."
   232 print "\n"
-    * set *tmp45 null
   233 label *label32
   234 jump *label30 always
   235 label *label29
 
   244 print " "
   245 print "(due to emergency)"
   246 print "\n"
-    * set *tmp47 null
   247 jump *label34 always
   248 label *label33
   249 set :throttle_blast:limit .FUEL_LIMIT
 
   254 print :throttle_blast:limit
   255 print "\"
   256 print "n"
-    * set *tmp47 null
   257 label *label34
   258 label *label30
   259 op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
 
   282 print "\n"
   283 control enabled generator1 false
   284 control enabled generator2 false
-    * set *tmp59 false
   285 jump *label39 always
   286 label *label38
   287 control enabled generator1 true
   288 control enabled generator2 true
-    * set *tmp59 true
   289 label *label39
   290 label *label37
   291 set :kilo:val .AVG_SURPLUS
 
   338 jump *label48 equal *tmp79 false
   339 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   340 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   341 jump *label49 always
   342 label *label48
-    * set *tmp80 null
   343 label *label49
   344 jump *label47 always
   345 label *label46
 
   361 label *label50
   362 set *tmp85 null
   363 label *label51
-    * set *tmp70 *tmp85
   364 label *label45
   365 label *label43
   366 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   404 set *tmp101 .FUEL_OFF
   405 label *label59
   406 control config *tmp98 *tmp101
-    * set :update_fuel*retval *tmp101
   407 label *label55
   408 return :update_fuel*retaddr
   409 end
 
   579 label *label71
   580 set *tmp133 *tmp140
   581 label *label69
-    * set *tmp131 *tmp133
   582 jump *label67 always
   583 label *label66
   584 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   669 label *label86
   670 set *tmp178 *tmp181
   671 label *label84
-    * set *tmp131 *tmp178
   672 label *label67
   673 label *label65
   674 sensor *tmp201 :start_reactor:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   356 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   357 op min *tmp90 5 *tmp89
   358 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   359 jump *label51 always
   360 label *label50
-    * set *tmp85 null
   361 label *label51
   362 label *label45
   363 label *label43
 
   476 control enabled *tmp134 false
   477 print "STOP unwanted"
   478 print "\n"
-    * set *tmp133 null
   479 jump *label69 always
   480 label *label68
   481 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   574 label *label73
   575 set *tmp140 *tmp144
   576 label *label71
-    * set *tmp133 *tmp140
   577 label *label69
   578 jump *label67 always
   579 label *label66
 
   593 print "IDLE"
   594 print "\n"
   595 set :start_reactor:supply_fuel false
-    * set *tmp178 :start_reactor:supply_fuel
   596 jump *label84 always
   597 label *label83
   598 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
   662 label *label88
   663 set *tmp181 *tmp190
   664 label *label86
-    * set *tmp178 *tmp181
   665 label *label84
   666 label *label67
   667 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   487 control enabled *tmp141 false
   488 print "STOP system fuel low"
   489 print "\n"
-    * set *tmp140 null
   490 jump *label71 always
   491 label *label70
   492 op lessThanEq *tmp143 :start_reactor:fuel 1
 
   571 label *label75
   572 set *tmp144 *tmp148
   573 label *label73
-    * set *tmp140 *tmp144
   574 label *label71
   575 label *label69
   576 jump *label67 always
 
   611 print "W)"
   612 print "\n"
   613 set :start_reactor:supply_fuel false
-    * set *tmp181 :start_reactor:supply_fuel
   614 jump *label86 always
   615 label *label85
   616 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
   657 label *label92
   658 set *tmp190 *tmp196
   659 label *label88
-    * set *tmp181 *tmp190
   660 label *label86
   661 label *label84
   662 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   495 control enabled *tmp145 false
   496 print "STOP fuel low"
   497 print "\n"
-    * set *tmp144 null
   498 jump *label73 always
   499 label *label72
   500 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
 
   568 label *label77
   569 set *tmp148 *tmp152
   570 label *label75
-    * set *tmp144 *tmp148
   571 label *label73
   572 label *label71
   573 label *label69
 
   626 print "\n"
   627 set *tmp193 null
   628 label *label90
-    * set *tmp190 *tmp193
   629 jump *label88 always
   630 label *label87
   631 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
   652 label *label94
   653 set *tmp196 *tmp198
   654 label *label92
-    * set *tmp190 *tmp196
   655 label *label88
   656 label *label86
   657 label *label84

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   503 control enabled *tmp149 false
   504 print "STOP out of cryo"
   505 print "\n"
-    * set *tmp148 null
   506 jump *label75 always
   507 label *label74
   508 op lessThan *tmp151 :start_reactor:secs 30
 
   565 label *label82
   566 set *tmp152 *tmp164
   567 label *label77
-    * set *tmp148 *tmp152
   568 label *label75
   569 label *label73
   570 label *label71
 
   617 jump *label89 equal *tmp192 false
   618 print "WAIT fuel"
   619 print "\n"
-    * set *tmp193 null
   620 jump *label90 always
   621 label *label89
   622 print "WAIT system fuel"
   623 print "\n"
-    * set *tmp193 null
   624 label *label90
   625 jump *label88 always
   626 label *label87
 
   629 jump *label91 equal *tmp195 false
   630 print "WAIT buffer fuel"
   631 print "\n"
-    * set *tmp196 null
   632 jump *label92 always
   633 label *label91
   634 op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
 
   645 control enabled *tmp199 true
   646 set *tmp198 true
   647 label *label94
-    * set *tmp196 *tmp198
   648 label *label92
   649 label *label88
   650 label *label86

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   537 print "\n"
   538 set *tmp157 null
   539 label *label80
-    * set *tmp152 *tmp157
   540 jump *label77 always
   541 label *label76
   542 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   562 print "\n"
   563 set *tmp164 null
   564 label *label82
-    * set *tmp152 *tmp164
   565 label *label77
   566 label *label75
   567 label *label73
 
   633 jump *label93 equal *tmp197 false
   634 print "WAIT cryo"
   635 print "\n"
-    * set *tmp198 null
   636 jump *label94 always
   637 label *label93
   638 print "STARTUP"
 
   640 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   641 set *tmp199 :start_reactor:reactor
   642 control enabled *tmp199 true
-    * set *tmp198 true
   643 label *label94
   644 label *label92
   645 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   523 print "START FAIL battery"
   524 print "\n"
   525 set :start_reactor:supply_fuel false
-    * set *tmp157 :start_reactor:supply_fuel
   526 jump *label80 always
   527 label *label79
   528 op sub *tmp160 30 :start_reactor:secs
 
   534 print :start_reactor:charge_req
   535 print "J"
   536 print "\n"
-    * set *tmp157 null
   537 label *label80
   538 jump *label77 always
   539 label *label76
 
   546 print "ABANDON - battery crit"
   547 print "\n"
   548 set :start_reactor:supply_fuel false
-    * set *tmp164 :start_reactor:supply_fuel
   549 jump *label82 always
   550 label *label81
   551 op idiv *tmp167 :start_reactor:secs 6
 
   557 print " "
   558 print "mins"
   559 print "\n"
-    * set *tmp164 null
   560 label *label82
   561 label *label77
   562 label *label75

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-65 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :check_radar*retaddr *label10 (h:*label10)
    59 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    60 label *label10
-    * set *tmp7 :check_radar*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :check_radar*retval
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
    64 op equal *tmp11 *tmp10 false
 
    81 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
    82 call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
    83 label *label14
-    * set *tmp14 :calc_charge_req*retval
-    * set .START_POWER_REQ *tmp14
+   84 set .START_POWER_REQ :calc_charge_req*retval
    85 set :calc_charge_req:reactor reactor2
    86 set :calc_charge_req:time :t_startup2
    87 setaddr :calc_charge_req*retaddr *label15 (h:*label15)
    88 call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
    89 label *label15
-    * set *tmp15 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   90 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    91 set :calc_charge_req:reactor reactor3
    92 set :calc_charge_req:time :t_startup3
    93 setaddr :calc_charge_req*retaddr *label16 (h:*label16)
    94 call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
    95 label *label16
-    * set *tmp16 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   96 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
    97 set :calc_charge_req:reactor reactor4
    98 set :calc_charge_req:time :t_startup4
    99 setaddr :calc_charge_req*retaddr *label17 (h:*label17)
   100 call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
   101 label *label17
-    * set *tmp17 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  102 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   103 set :calc_charge_req:reactor reactor5
   104 set :calc_charge_req:time :t_startup5
   105 setaddr :calc_charge_req*retaddr *label18 (h:*label18)
   106 call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
   107 label *label18
-    * set *tmp18 :calc_charge_req*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+  108 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   109 set :start_reactor:reactor reactor1
   110 set :start_reactor:reactor_num 1
   111 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   114 setaddr :start_reactor*retaddr *label19 (h:*label19)
   115 call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
   116 label *label19
-    * set *tmp19 :start_reactor*retval
-    * set :fuel_1 *tmp19
+  117 set :fuel_1 :start_reactor*retval
   118 set :t_startup1 .RET_T_STARTUP
   119 set :update_fuel:fuel :fuel_1
   120 set :update_fuel:uld_in .ULD_IN_1
 
   130 setaddr :start_reactor*retaddr *label21 (h:*label21)
   131 call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
   132 label *label21
-    * set *tmp21 :start_reactor*retval
-    * set :fuel_2 *tmp21
+  133 set :fuel_2 :start_reactor*retval
   134 set :t_startup2 .RET_T_STARTUP
   135 set :update_fuel:fuel :fuel_2
   136 set :update_fuel:uld_in .ULD_IN_2
 
   142 setaddr :check_radar*retaddr *label23 (h:*label23)
   143 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   144 label *label23
-    * set *tmp23 :check_radar*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  145 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   146 set :start_reactor:reactor reactor3
   147 set :start_reactor:reactor_num 3
   148 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   151 setaddr :start_reactor*retaddr *label24 (h:*label24)
   152 call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
   153 label *label24
-    * set *tmp24 :start_reactor*retval
-    * set :fuel_3 *tmp24
+  154 set :fuel_3 :start_reactor*retval
   155 set :t_startup3 .RET_T_STARTUP
   156 set :start_reactor:reactor reactor4
   157 set :start_reactor:reactor_num 4
 
   161 setaddr :start_reactor*retaddr *label25 (h:*label25)
   162 call *label3 *invalid :start_reactor*retval (m:*label25) (h:*label25)
   163 label *label25
-    * set *tmp25 :start_reactor*retval
-    * set :fuel_4 *tmp25
+  164 set :fuel_4 :start_reactor*retval
   165 set :t_startup4 .RET_T_STARTUP
   166 set :start_reactor:reactor reactor5
   167 set :start_reactor:reactor_num 5
 
   171 setaddr :start_reactor*retaddr *label26 (h:*label26)
   172 call *label3 *invalid :start_reactor*retval (m:*label26) (h:*label26)
   173 label *label26
-    * set *tmp26 :start_reactor*retval
-    * set :fuel_5 *tmp26
+  174 set :fuel_5 :start_reactor*retval
   175 set :t_startup5 .RET_T_STARTUP
   176 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  177 op or :fuel_many *tmp27 :fuel_5
   178 set :update_fuel:fuel :fuel_many
   179 set :update_fuel:uld_in .ULD_IN_MANY
   180 set :update_fuel:uld_out .ULD_OUT_MANY
 
   182 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   183 label *label27
   184 op or *tmp30 :fuel_1 :fuel_2
-    * op or *tmp31 *tmp30 :fuel_many
-    * set :throttle_blast:reactors_fueled *tmp31
+  185 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   186 set :throttle_blast:emerg_shutdown :emerg_shutdown
   187 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :throttle_blast:charge *tmp34
+  188 op floor :throttle_blast:charge *tmp33
   189 sensor *tmp35 .NODE @powerNetIn
   190 sensor *tmp36 .NODE @powerNetOut
   191 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :throttle_blast:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :throttle_blast:fuel_stored *tmp39
+  192 op floor :throttle_blast:surplus *tmp37
+  193 sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
   194 op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
   195 op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
   196 op land *tmp42 *tmp40 *tmp41
 
   237 print "n"
   238 label *label34
   239 label *label30
-    * op lessThan *tmp48 :throttle_blast:fuel_stored :throttle_blast:limit
-    * set *tmp32 *tmp48
+  240 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   241 jump *label28 always
   242 set *tmp32 null
   243 label *label28
 
   252 control config *tmp49 *tmp51
   253 sensor *tmp53 .NODE @powerNetStored
   254 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :diff_generators:stored_pc *tmp55
+  255 op div :diff_generators:stored_pc *tmp53 *tmp54
   256 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   257 op lessThan *tmp57 .START_POWER_REQ 10
   258 op land *tmp58 *tmp56 *tmp57
 
   271 setaddr :kilo*retaddr *label40 (h:*label40)
   272 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   273 label *label40
-    * set *tmp64 :kilo*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :kilo:val *tmp65
+  274 set :surplus :kilo*retval
+  275 sensor :kilo:val .NODE @powerNetStored
   276 setaddr :kilo*retaddr *label41 (h:*label41)
   277 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   278 label *label41
-    * set *tmp66 :kilo*retval
-    * set :charge *tmp66
+  279 set :charge :kilo*retval
   280 op greaterThan *tmp67 .START_POWER_REQ 0
   281 jump *label42 equal *tmp67 false
   282 set :kilo:val .START_POWER_REQ
   283 setaddr :kilo*retaddr *label44 (h:*label44)
   284 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   285 label *label44
-    * set *tmp69 :kilo*retval
-    * set :req *tmp69
+  286 set :req :kilo*retval
   287 print "Req "
   288 print :req
   289 print "kJ / "
 
   302 print "\n"
   303 sensor *tmp71 .NODE @powerNetStored
   304 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :update_reactors_desired:stored *tmp73
+  305 op div :update_reactors_desired:stored *tmp71 *tmp72
   306 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
   307 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   308 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   325 jump *label50 equal *tmp84 false
   326 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   327 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :update_reactors_desired:needed *tmp88
+  328 op max :update_reactors_desired:needed 1 *tmp87
   329 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  330 op min .REACTORS_DESIRED 5 *tmp89
   331 jump *label51 always
   332 label *label50
   333 label *label51
 
   349 end
   350 label *label0
   351 op idiv *tmp93 :kilo:val 100
-    * op div *tmp94 *tmp93 10
-    * set :kilo*retval *tmp94
+  352 op div :kilo*retval *tmp93 10
   353 jump *label54 always
   354 set :kilo*retval null
   355 label *label54
 
   378 end
   379 label *label2
   380 op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv *tmp103 *tmp102 60
-    * set :calc_charge_req:secs *tmp103
+  381 op idiv :calc_charge_req:secs *tmp102 60
   382 op greaterThan *tmp104 :calc_charge_req:secs 30
   383 sensor *tmp105 :calc_charge_req:reactor @enabled
   384 op equal *tmp106 *tmp105 false
 
   389 jump *label62 always
   390 label *label61
   391 label *label62
-    * op sub *tmp109 30 :calc_charge_req:secs
-    * set :calc_charge_req:time_left *tmp109
+  392 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   393 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   394 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :calc_charge_req:charge_req *tmp112
+  395 op floor :calc_charge_req:charge_req *tmp111
   396 set :calc_charge_req*retval :calc_charge_req:charge_req
   397 jump *label60 always
   398 set :calc_charge_req*retval null
 
   402 label *label3
   403 set .RET_T_STARTUP :start_reactor:t_startup
   404 op sub *tmp113 @tick :start_reactor:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :start_reactor:secs *tmp114
-    * sensor *tmp115 :start_reactor:reactor @blast-compound
-    * set :start_reactor:fuel *tmp115
+  405 op idiv :start_reactor:secs *tmp113 60
+  406 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
   407 set :start_reactor:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :start_reactor:fuel_stored *tmp116
-    * sensor *tmp117 :start_reactor:reactor @cryofluid
-    * set :start_reactor:cryo *tmp117
+  408 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  409 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
   410 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :start_reactor:charge *tmp119
+  411 op floor :start_reactor:charge *tmp118
   412 sensor *tmp120 .NODE @powerNetIn
   413 sensor *tmp121 .NODE @powerNetOut
   414 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :start_reactor:surplus *tmp123
+  415 op floor :start_reactor:surplus *tmp122
   416 op mul *tmp124 .AVG_SURPLUS 0.8
   417 op mul *tmp125 :start_reactor:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :start_reactor:reactor @enabled
-    * set :start_reactor:enabled *tmp127
+  418 op add .AVG_SURPLUS *tmp124 *tmp125
+  419 sensor :start_reactor:enabled :start_reactor:reactor @enabled
   420 print "#"
   421 print :start_reactor:reactor_num
   422 print " "
   423 print "- "
   424 jump *label64 equal :start_reactor:emerg_shutdown false
-    * set *tmp129 :start_reactor:reactor
-    * control enabled *tmp129 false
+  425 control enabled :start_reactor:reactor false
   426 print "emergency mode"
   427 print "\n"
   428 set :start_reactor:supply_fuel false
 
   431 jump *label66 equal :start_reactor:enabled false
   432 op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
   433 jump *label68 equal *tmp132 false
-    * set *tmp134 :start_reactor:reactor
-    * control enabled *tmp134 false
+  434 control enabled :start_reactor:reactor false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label69 always
 
   441 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
   442 op land *tmp139 *tmp136 *tmp138
   443 jump *label70 equal *tmp139 false
-    * set *tmp141 :start_reactor:reactor
-    * control enabled *tmp141 false
+  444 control enabled :start_reactor:reactor false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label71 always
   448 label *label70
   449 op lessThanEq *tmp143 :start_reactor:fuel 1
   450 jump *label72 equal *tmp143 false
-    * set *tmp145 :start_reactor:reactor
-    * control enabled *tmp145 false
+  451 control enabled :start_reactor:reactor false
   452 print "STOP fuel low"
   453 print "\n"
   454 jump *label73 always
   455 label *label72
   456 op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
   457 jump *label74 equal *tmp147 false
-    * set *tmp149 :start_reactor:reactor
-    * control enabled *tmp149 false
+  458 control enabled :start_reactor:reactor false
   459 print "STOP out of cryo"
   460 print "\n"
   461 jump *label75 always
 
   473 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   474 op land *tmp156 *tmp154 *tmp155
   475 jump *label79 equal *tmp156 false
-    * set *tmp158 :start_reactor:reactor
-    * control enabled *tmp158 false
+  476 control enabled :start_reactor:reactor false
   477 print "START FAIL battery"
   478 print "\n"
   479 set :start_reactor:supply_fuel false
   480 jump *label80 always
   481 label *label79
-    * op sub *tmp160 30 :start_reactor:secs
-    * set :start_reactor:time_left *tmp160
+  482 op sub :start_reactor:time_left 30 :start_reactor:secs
   483 print "Starting "
   484 print :start_reactor:time_left
   485 print " "
 
   494 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
   495 op land *tmp163 *tmp161 *tmp162
   496 jump *label81 equal *tmp163 false
-    * set *tmp165 :start_reactor:reactor
-    * control enabled *tmp165 false
+  497 control enabled :start_reactor:reactor false
   498 print "ABANDON - battery crit"
   499 print "\n"
   500 set :start_reactor:supply_fuel false
   501 jump *label82 always
   502 label *label81
-    * op idiv *tmp167 :start_reactor:secs 6
-    * set :start_reactor:mins *tmp167
-    * op div *tmp168 :start_reactor:mins 10
-    * set :start_reactor:mins *tmp168
+  503 op idiv :start_reactor:mins :start_reactor:secs 6
+  504 op div :start_reactor:mins :start_reactor:mins 10
   505 print "RUN "
   506 print :start_reactor:mins
   507 print " "
 
   518 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   519 op sub *tmp170 *tmp169 .PWR_ABORT
   520 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :start_reactor:charge_units *tmp172
+  521 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
   522 op div *tmp173 :start_reactor:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :start_reactor:flow_units *tmp174
+  523 op max :start_reactor:flow_units -0.1 *tmp173
   524 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :start_reactor:cryo_req *tmp176
+  525 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   526 op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
   527 jump *label83 equal *tmp177 false
   528 print "IDLE"
 
   535 jump *label85 equal *tmp180 false
   536 op mul *tmp182 :start_reactor:flow_units 1000
   537 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :start_reactor:flow *tmp184
+  538 op div :start_reactor:flow *tmp183 10
   539 op mul *tmp185 :start_reactor:charge_units 1000
   540 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :start_reactor:charge *tmp187
+  541 op div :start_reactor:charge *tmp186 10
   542 print "WAIT power. (%"
   543 print :start_reactor:charge
   544 print "J + %"
 
   579 print "STARTUP"
   580 print "\n"
   581 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :start_reactor:reactor
-    * control enabled *tmp199 true
+  582 control enabled :start_reactor:reactor true
   583 label *label94
   584 label *label92
   585 label *label88
 
   590 sensor *tmp201 :start_reactor:reactor @enabled
   591 op notEqual *tmp202 :start_reactor:enabled *tmp201
   592 jump *label95 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  593 set .RET_T_STARTUP @tick
   594 jump *label96 always
   595 label *label95
   596 label *label96
 
   601 return :start_reactor*retaddr
   602 end
   603 label *label4
-    * radar enemy any any health :check_radar:unit 1 *tmp205
-    * set :check_radar:enemy_found *tmp205
+  604 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
   605 op notEqual *tmp206 :check_radar:enemy_found null
   606 jump *label98 equal *tmp206 false
   607 control enabled projector1 true
   608 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
-    * set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
-    * set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
-    * set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  609 control config .ULD_IN_1 .FUEL_OFF
+  610 control config .ULD_OUT_1 .FUEL
+  611 control config .ULD_IN_2 .FUEL_OFF
+  612 control config .ULD_OUT_2 .FUEL
+  613 control config .ULD_IN_MANY .FUEL_OFF
+  614 control config .ULD_OUT_MANY .FUEL
+  615 control config .ULD_MIXER .FUEL_OFF
   616 control enabled reactor1 false
   617 control enabled reactor2 false
   618 control enabled reactor3 false

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   212 label *label32
   213 jump *label30 always
   214 label *label29
-    * op equal *tmp46 :throttle_blast:reactors_fueled false
-    * jump *label33 equal *tmp46 false
+  215 jump *label33 notEqual :throttle_blast:reactors_fueled false
   216 set :throttle_blast:limit .FUEL_LIMIT_LOW
   217 print "Fuel "
   218 print :throttle_blast:fuel_stored
 
   274 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   275 label *label41
   276 set :charge :kilo*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label42 equal *tmp67 false
+  277 jump *label42 lessThanEq .START_POWER_REQ 0
   278 set :kilo:val .START_POWER_REQ
   279 setaddr :kilo*retaddr *label44 (h:*label44)
   280 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
 
   304 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   305 op land *tmp77 *tmp74 *tmp76
   306 jump *label46 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label48 equal *tmp79 false
+  307 jump *label48 lessThanEq .REACTORS_DESIRED 2
   308 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   309 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   310 jump *label49 always
 
   328 label *label51
   329 label *label45
   330 label *label43
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label52 equal *tmp91 false
+  331 jump *label52 equal .REACTORS_DESIRED 5
   332 print "Require only "
   333 print .REACTORS_DESIRED
   334 print "/5 reactors."
 
   359 label *label57
   360 control config *tmp95 *tmp97
   361 set *tmp98 :update_fuel:uld_out
-    * op equal *tmp100 :update_fuel:fuel false
-    * jump *label58 equal *tmp100 false
+  362 jump *label58 notEqual :update_fuel:fuel false
   363 set *tmp101 .FUEL
   364 jump *label59 always
   365 label *label58
 
   422 jump *label65 always
   423 label *label64
   424 jump *label66 equal :start_reactor:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label68 equal *tmp132 false
+  425 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   426 control enabled :start_reactor:reactor false
   427 print "STOP unwanted"
   428 print "\n"
 
   438 print "\n"
   439 jump *label71 always
   440 label *label70
-    * op lessThanEq *tmp143 :start_reactor:fuel 1
-    * jump *label72 equal *tmp143 false
+  441 jump *label72 greaterThan :start_reactor:fuel 1
   442 control enabled :start_reactor:reactor false
   443 print "STOP fuel low"
   444 print "\n"
   445 jump *label73 always
   446 label *label72
-    * op lessThanEq *tmp147 :start_reactor:cryo .CRYO_ABORT
-    * jump *label74 equal *tmp147 false
+  447 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   448 control enabled :start_reactor:reactor false
   449 print "STOP out of cryo"
   450 print "\n"
   451 jump *label75 always
   452 label *label74
-    * op lessThan *tmp151 :start_reactor:secs 30
-    * jump *label76 equal *tmp151 false
+  453 jump *label76 greaterThanEq :start_reactor:secs 30
   454 set :calc_charge_req:reactor :start_reactor:reactor
   455 set :calc_charge_req:time :start_reactor:t_startup
   456 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
 
   512 op max :start_reactor:flow_units -0.1 *tmp173
   513 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   514 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :start_reactor:reactor_num
-    * jump *label83 equal *tmp177 false
+  515 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   516 print "IDLE"
   517 print "\n"
   518 set :start_reactor:supply_fuel false
   519 jump *label84 always
   520 label *label83
   521 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label85 equal *tmp180 false
+  522 jump *label85 greaterThanEq *tmp179 1
   523 op mul *tmp182 :start_reactor:flow_units 1000
   524 op floor *tmp183 *tmp182
   525 op div :start_reactor:flow *tmp183 10
 
   539 op land *tmp189 :start_reactor:fuel_on *tmp188
   540 jump *label87 equal *tmp189 false
   541 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label89 equal *tmp192 false
+  542 jump *label89 lessThanEq *tmp191 .FUEL_REQ
   543 print "WAIT fuel"
   544 print "\n"
   545 jump *label90 always
 
   550 jump *label88 always
   551 label *label87
   552 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * op lessThan *tmp195 :start_reactor:fuel_stored *tmp194
-    * jump *label91 equal *tmp195 false
+  553 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
   554 print "WAIT buffer fuel"
   555 print "\n"
   556 jump *label92 always
   557 label *label91
-    * op lessThan *tmp197 :start_reactor:cryo :start_reactor:cryo_req
-    * jump *label93 equal *tmp197 false
+  558 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
   559 print "WAIT cryo"
   560 print "\n"
   561 jump *label94 always
 
   572 label *label67
   573 label *label65
   574 sensor *tmp201 :start_reactor:reactor @enabled
-    * op notEqual *tmp202 :start_reactor:enabled *tmp201
-    * jump *label95 equal *tmp202 false
+  575 jump *label95 equal :start_reactor:enabled *tmp201
   576 set .RET_T_STARTUP @tick
   577 jump *label96 always
   578 label *label95
 
   585 end
   586 label *label4
   587 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * op notEqual *tmp206 :check_radar:enemy_found null
-    * jump *label98 equal *tmp206 false
+  588 jump *label98 equal :check_radar:enemy_found null
   589 control enabled projector1 true
   590 control enabled projector2 true
   591 control config .ULD_IN_1 .FUEL_OFF

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   306 jump *label48 lessThanEq .REACTORS_DESIRED 2
   307 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   308 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label49 always
   309 label *label48
   310 label *label49
-    * jump *label47 always
   311 label *label46
   312 label *label47
   313 op lessThan *tmp81 :update_reactors_desired:stored 0.8
 
   320 op max :update_reactors_desired:needed 1 *tmp87
   321 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   322 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label51 always
   323 label *label50
   324 label *label51
   325 label *label45
 
   329 print .REACTORS_DESIRED
   330 print "/5 reactors."
   331 print "\n"
-    * jump *label53 always
   332 label *label52
   333 label *label53
   334 printflush message1
 
   374 jump *label61 equal *tmp107 false
   375 set :calc_charge_req*retval 0
   376 jump *label60 always
-    * jump *label62 always
   377 label *label61
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
 
   568 sensor *tmp201 :start_reactor:reactor @enabled
   569 jump *label95 equal :start_reactor:enabled *tmp201
   570 set .RET_T_STARTUP @tick
-    * jump *label96 always
   571 label *label95
   572 label *label96
   573 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   378 label *label62
   379 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   380 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :calc_charge_req:charge_req *tmp111
+  381 op idiv :calc_charge_req:charge_req *tmp110 0.04
   382 set :calc_charge_req*retval :calc_charge_req:charge_req
   383 jump *label60 always
   384 set :calc_charge_req*retval null
 
   513 label *label83
   514 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
   515 jump *label85 greaterThanEq *tmp179 1
-    * op mul *tmp182 :start_reactor:flow_units 1000
-    * op floor *tmp183 *tmp182
+  516 op idiv *tmp183 :start_reactor:flow_units 0.001
   517 op div :start_reactor:flow *tmp183 10
-    * op mul *tmp185 :start_reactor:charge_units 1000
-    * op floor *tmp186 *tmp185
+  518 op idiv *tmp186 :start_reactor:charge_units 0.001
   519 op div :start_reactor:charge *tmp186 10
   520 print "WAIT power. (%"
   521 print :start_reactor:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :check_radar:unit .TOWER
+   55 set :check_radar:unit cyclone1
    56 setaddr :check_radar*retaddr *label10 (h:*label10)
    57 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    58 label *label10
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :check_radar*retval *tmp8
    75 set :calc_charge_req:reactor reactor1
    76 set :calc_charge_req:time :t_startup1
    77 setaddr :calc_charge_req*retaddr *label14 (h:*label14)
 
   112 label *label19
   113 set :fuel_1 :start_reactor*retval
   114 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_1
-    * set :update_fuel:uld_in .ULD_IN_1
-    * set :update_fuel:uld_out .ULD_OUT_1
+  115 set :update_fuel:fuel :start_reactor*retval
+  116 set :update_fuel:uld_in unloader1
+  117 set :update_fuel:uld_out unloader2
   118 setaddr :update_fuel*retaddr *label20 (h:*label20)
   119 call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
   120 label *label20
 
   128 label *label21
   129 set :fuel_2 :start_reactor*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :fuel_2
-    * set :update_fuel:uld_in .ULD_IN_2
-    * set :update_fuel:uld_out .ULD_OUT_2
+  131 set :update_fuel:fuel :start_reactor*retval
+  132 set :update_fuel:uld_in unloader3
+  133 set :update_fuel:uld_out unloader4
   134 setaddr :update_fuel*retaddr *label22 (h:*label22)
   135 call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
   136 label *label22
-    * set :check_radar:unit .TOWER
+  137 set :check_radar:unit cyclone1
   138 setaddr :check_radar*retaddr *label23 (h:*label23)
   139 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
   140 label *label23
 
   170 set :fuel_5 :start_reactor*retval
   171 set :t_startup5 .RET_T_STARTUP
   172 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  173 op or :fuel_many *tmp27 :start_reactor*retval
   174 set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in .ULD_IN_MANY
-    * set :update_fuel:uld_out .ULD_OUT_MANY
+  175 set :update_fuel:uld_in unloader5
+  176 set :update_fuel:uld_out unloader6
   177 setaddr :update_fuel*retaddr *label27 (h:*label27)
   178 call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
   179 label *label27
   180 op or *tmp30 :fuel_1 :fuel_2
   181 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   182 set :throttle_blast:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  183 sensor *tmp33 node1 @powerNetStored
   184 op floor :throttle_blast:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  185 sensor *tmp35 node1 @powerNetIn
+  186 sensor *tmp36 node1 @powerNetOut
   187 op sub *tmp37 *tmp35 *tmp36
   188 op floor :throttle_blast:surplus *tmp37
-    * sensor :throttle_blast:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :throttle_blast:charge .PWR_ABORT
-    * op lessThan *tmp41 :throttle_blast:surplus .FLOW_ABORT
+  189 sensor :throttle_blast:fuel_stored vault1 @blast-compound
+  190 op lessThan *tmp40 :throttle_blast:charge 5000
+  191 op lessThan *tmp41 :throttle_blast:surplus -500
   192 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :throttle_blast:emerg_shutdown
+  193 op or *tmp43 *tmp42 :emerg_shutdown
   194 jump *label29 equal *tmp43 false
   195 set :throttle_blast:limit 0
   196 print "Central Fuel at "
   197 print :throttle_blast:fuel_stored
   198 print " "
   199 print "/ "
-    * print :throttle_blast:limit
+  200 print 0
   201 print " "
   202 print "- "
-    * jump *label31 equal :throttle_blast:emerg_shutdown false
+  203 jump *label31 equal :emerg_shutdown false
   204 print " Enemies detected."
   205 print "\n"
   206 jump *label32 always
 
   211 jump *label30 always
   212 label *label29
   213 jump *label33 notEqual :throttle_blast:reactors_fueled false
-    * set :throttle_blast:limit .FUEL_LIMIT_LOW
+  214 set :throttle_blast:limit 150
   215 print "Fuel "
   216 print :throttle_blast:fuel_stored
   217 print " "
   218 print "/ "
-    * print :throttle_blast:limit
+  219 print .FUEL_LIMIT_LOW
   220 print " "
   221 print "(due to emergency)"
   222 print "\n"
   223 jump *label34 always
   224 label *label33
-    * set :throttle_blast:limit .FUEL_LIMIT
+  225 set :throttle_blast:limit 800
   226 print "Fuel "
   227 print :throttle_blast:fuel_stored
   228 print " "
   229 print "/ "
-    * print :throttle_blast:limit
+  230 print .FUEL_LIMIT
   231 print "\"
   232 print "n"
   233 label *label34
   234 label *label30
   235 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   236 jump *label28 always
-    * set *tmp32 null
   237 label *label28
   238 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  239 set *tmp49 unloader7
+  240 jump *label35 equal *tmp32 false
+  241 set *tmp51 @pyratite
   242 jump *label36 always
   243 label *label35
-    * set *tmp51 .FUEL_OFF
+  244 set *tmp51 @scrap
   245 label *label36
-    * control config *tmp49 *tmp51
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  246 control config .ULD_MIXER *tmp51
+  247 sensor *tmp53 node1 @powerNetStored
+  248 sensor *tmp54 node1 @powerNetCapacity
   249 op div :diff_generators:stored_pc *tmp53 *tmp54
   250 op greaterThan *tmp56 :diff_generators:stored_pc 0.9
   251 op lessThan *tmp57 .START_POWER_REQ 10
 
   266 call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
   267 label *label40
   268 set :surplus :kilo*retval
-    * sensor :kilo:val .NODE @powerNetStored
+  269 sensor :kilo:val node1 @powerNetStored
   270 setaddr :kilo*retaddr *label41 (h:*label41)
   271 call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
   272 label *label41
 
   278 label *label44
   279 set :req :kilo*retval
   280 print "Req "
-    * print :req
+  281 print :kilo*retval
   282 print "kJ / "
   283 print :charge
   284 print "kJ. "
 
   290 print "Power "
   291 print :surplus
   292 print "kW, "
-    * print :charge
+  293 print :kilo*retval
   294 print "kJ"
   295 print "\n"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  296 sensor *tmp71 node1 @powerNetStored
+  297 sensor *tmp72 node1 @powerNetCapacity
   298 op div :update_reactors_desired:stored *tmp71 *tmp72
   299 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  300 op add *tmp75 6500 10000
+  301 op greaterThan *tmp76 .AVG_SURPLUS 16500
   302 op land *tmp77 *tmp74 *tmp76
   303 jump *label46 equal *tmp77 false
   304 jump *label48 lessThanEq .REACTORS_DESIRED 2
   305 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  306 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   307 label *label48
   308 label *label49
   309 label *label46
   310 label *label47
   311 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  312 op mul *tmp82 10000 0.8
+  313 op lessThan *tmp83 .AVG_SURPLUS 8000
   314 op land *tmp84 *tmp81 *tmp83
   315 jump *label50 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  316 op sub *tmp86 .AVG_SURPLUS 10000
+  317 op idiv *tmp87 *tmp86 6500
   318 op max :update_reactors_desired:needed 1 *tmp87
   319 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   320 op min .REACTORS_DESIRED 5 *tmp89
 
   338 op idiv *tmp93 :kilo:val 100
   339 op div :kilo*retval *tmp93 10
   340 jump *label54 always
-    * set :kilo*retval null
   341 label *label54
   342 return :kilo*retaddr
   343 end
 
   349 label *label56
   350 set *tmp97 .FUEL_OFF
   351 label *label57
-    * control config *tmp95 *tmp97
+  352 control config :update_fuel:uld_in *tmp97
   353 set *tmp98 :update_fuel:uld_out
   354 jump *label58 notEqual :update_fuel:fuel false
   355 set *tmp101 .FUEL
 
   357 label *label58
   358 set *tmp101 .FUEL_OFF
   359 label *label59
-    * control config *tmp98 *tmp101
+  360 control config :update_fuel:uld_out *tmp101
   361 label *label55
   362 return :update_fuel*retaddr
   363 end
 
   378 op idiv :calc_charge_req:charge_req *tmp110 0.04
   379 set :calc_charge_req*retval :calc_charge_req:charge_req
   380 jump *label60 always
-    * set :calc_charge_req*retval null
   381 label *label60
   382 return :calc_charge_req*retaddr
   383 end
 
   446 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   447 label *label78
   448 set :start_reactor:charge_req :calc_charge_req*retval
-    * op sub *tmp153 :start_reactor:charge :start_reactor:charge_req
+  449 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   450 op lessThan *tmp154 *tmp153 .PWR_ABORT
   451 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
   452 op land *tmp156 *tmp154 *tmp155
 
   462 print :start_reactor:time_left
   463 print " "
   464 print "secs, req "
-    * print :start_reactor:charge_req
+  465 print :calc_charge_req*retval
   466 print "J"
   467 print "\n"
   468 label *label80
 
   565 label *label96
   566 set :start_reactor*retval :start_reactor:supply_fuel
   567 jump *label63 always
-    * set :start_reactor*retval null
   568 label *label63
   569 return :start_reactor*retaddr
   570 end
 
   587 control enabled reactor5 false
   588 set :check_radar*retval true
   589 jump *label97 always
-    * set *tmp207 null
   590 jump *label99 always
   591 label *label98
   592 control enabled projector1 false
   593 control enabled projector2 false
   594 set :check_radar*retval false
   595 jump *label97 always
-    * set *tmp207 null
   596 label *label99
-    * set :check_radar*retval *tmp207
+  597 set :check_radar*retval null
   598 label *label97
   599 return :check_radar*retaddr
   600 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
 
    38 set :t_startup3 *tmp5
    39 set :t_startup4 *tmp5
    40 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   41 set .RET_T_STARTUP *tmp5
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    56 setaddr :check_radar*retaddr *label10 (h:*label10)
    57 call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
    58 label *label10
-    * set :emerg_shutdown :check_radar*retval
    59 op notEqual *tmp9 switch1 null
    60 sensor *tmp10 switch1 @enabled
    61 op equal *tmp11 *tmp10 false
 
   178 label *label27
   179 op or *tmp30 :fuel_1 :fuel_2
   180 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
-    * set :throttle_blast:emerg_shutdown :emerg_shutdown
   181 sensor *tmp33 node1 @powerNetStored
   182 op floor :throttle_blast:charge *tmp33
   183 sensor *tmp35 node1 @powerNetIn
 
   214 print :throttle_blast:fuel_stored
   215 print " "
   216 print "/ "
-    * print .FUEL_LIMIT_LOW
+  217 print 150
   218 print " "
   219 print "(due to emergency)"
   220 print "\n"
 
   225 print :throttle_blast:fuel_stored
   226 print " "
   227 print "/ "
-    * print .FUEL_LIMIT
+  228 print 800
   229 print "\"
   230 print "n"
   231 label *label34
 
   233 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   234 jump *label28 always
   235 label *label28
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   236 jump *label35 equal *tmp32 false
   237 set *tmp51 @pyratite
   238 jump *label36 always
   239 label *label35
   240 set *tmp51 @scrap
   241 label *label36
-    * control config .ULD_MIXER *tmp51
+  242 control config unloader7 *tmp51
   243 sensor *tmp53 node1 @powerNetStored
   244 sensor *tmp54 node1 @powerNetCapacity
   245 op div :diff_generators:stored_pc *tmp53 *tmp54
 
   272 setaddr :kilo*retaddr *label44 (h:*label44)
   273 call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
   274 label *label44
-    * set :req :kilo*retval
   275 print "Req "
   276 print :kilo*retval
   277 print "kJ / "
 
   292 sensor *tmp72 node1 @powerNetCapacity
   293 op div :update_reactors_desired:stored *tmp71 *tmp72
   294 op greaterThan *tmp74 :update_reactors_desired:stored 0.98
-    * op add *tmp75 6500 10000
   295 op greaterThan *tmp76 .AVG_SURPLUS 16500
   296 op land *tmp77 *tmp74 *tmp76
   297 jump *label46 equal *tmp77 false
 
   303 label *label46
   304 label *label47
   305 op lessThan *tmp81 :update_reactors_desired:stored 0.8
-    * op mul *tmp82 10000 0.8
   306 op lessThan *tmp83 .AVG_SURPLUS 8000
   307 op land *tmp84 *tmp81 *tmp83
   308 jump *label50 equal *tmp84 false
 
   335 return :kilo*retaddr
   336 end
   337 label *label1
-    * set *tmp95 :update_fuel:uld_in
   338 jump *label56 equal :update_fuel:fuel false
   339 set *tmp97 .FUEL
   340 jump *label57 always
 
   342 set *tmp97 .FUEL_OFF
   343 label *label57
   344 control config :update_fuel:uld_in *tmp97
-    * set *tmp98 :update_fuel:uld_out
   345 jump *label58 notEqual :update_fuel:fuel false
   346 set *tmp101 .FUEL
   347 jump *label59 always
 
   436 setaddr :calc_charge_req*retaddr *label78 (h:*label78)
   437 call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
   438 label *label78
-    * set :start_reactor:charge_req :calc_charge_req*retval
   439 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   440 op lessThan *tmp154 *tmp153 .PWR_ABORT
   441 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
 
   584 set :check_radar*retval false
   585 jump *label97 always
   586 label *label99
-    * set :check_radar*retval null
   587 label *label97
   588 return :check_radar*retaddr
   589 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-1 instructions):
 
    32 label *label5
    33 set *tmp5 @tick
    34 label *label6
-    * set :start_time *tmp5
    35 set :t_startup1 *tmp5
    36 set :t_startup2 *tmp5
    37 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-10 instructions):
 
   232 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
   233 jump *label28 always
   234 label *label28
-    * jump *label35 equal *tmp32 false
-    * set *tmp51 @pyratite
-    * jump *label36 always
+  235 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   236 label *label35
-    * set *tmp51 @scrap
   237 label *label36
   238 control config unloader7 *tmp51
   239 sensor *tmp53 node1 @powerNetStored
 
   331 return :kilo*retaddr
   332 end
   333 label *label1
-    * jump *label56 equal :update_fuel:fuel false
-    * set *tmp97 .FUEL
-    * jump *label57 always
+  334 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   335 label *label56
-    * set *tmp97 .FUEL_OFF
   336 label *label57
   337 control config :update_fuel:uld_in *tmp97
-    * jump *label58 notEqual :update_fuel:fuel false
-    * set *tmp101 .FUEL
-    * jump *label59 always
+  338 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
   339 label *label58
-    * set *tmp101 .FUEL_OFF
   340 label *label59
   341 control config :update_fuel:uld_out *tmp101
   342 label *label55
 
   539 label *label67
   540 label *label65
   541 sensor *tmp201 :start_reactor:reactor @enabled
-    * jump *label95 equal :start_reactor:enabled *tmp201
-    * set .RET_T_STARTUP @tick
+  542 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
   543 label *label95
   544 label *label96
   545 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   254 label *label39
   255 label *label37
   256 set :kilo:val .AVG_SURPLUS
-    * setaddr :kilo*retaddr *label40 (h:*label40)
-    * call *label0 *invalid :kilo*retval (m:*label40) (h:*label40)
-    * label *label40
+  257 label *label100
+  258 op idiv *tmp93 :kilo:val 100
+  259 op div :kilo*retval *tmp93 10
+  260 jump *label101 always
+  261 label *label101
   262 set :surplus :kilo*retval
   263 sensor :kilo:val node1 @powerNetStored
-    * setaddr :kilo*retaddr *label41 (h:*label41)
-    * call *label0 *invalid :kilo*retval (m:*label41) (h:*label41)
-    * label *label41
+  264 label *label102
+  265 op idiv *tmp93 :kilo:val 100
+  266 op div :kilo*retval *tmp93 10
+  267 jump *label103 always
+  268 label *label103
   269 set :charge :kilo*retval
   270 jump *label42 lessThanEq .START_POWER_REQ 0
   271 set :kilo:val .START_POWER_REQ
-    * setaddr :kilo*retaddr *label44 (h:*label44)
-    * call *label0 *invalid :kilo*retval (m:*label44) (h:*label44)
-    * label *label44
+  272 label *label104
+  273 op idiv *tmp93 :kilo:val 100
+  274 op div :kilo*retval *tmp93 10
+  275 jump *label105 always
+  276 label *label105
   277 print "Req "
   278 print :kilo*retval
   279 print "kJ / "
 
   329 jump *label7 always
   330 label *label9
   331 end
-    * label *label0
-    * op idiv *tmp93 :kilo:val 100
-    * op div :kilo*retval *tmp93 10
-    * jump *label54 always
-    * label *label54
-    * return :kilo*retaddr
-    * end
   332 label *label1
   333 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
   334 label *label56

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   255 label *label37
   256 set :kilo:val .AVG_SURPLUS
   257 label *label100
-    * op idiv *tmp93 :kilo:val 100
+  258 op idiv *tmp93 .AVG_SURPLUS 100
   259 op div :kilo*retval *tmp93 10
   260 jump *label101 always
   261 label *label101
 
   270 jump *label42 lessThanEq .START_POWER_REQ 0
   271 set :kilo:val .START_POWER_REQ
   272 label *label104
-    * op idiv *tmp93 :kilo:val 100
+  273 op idiv *tmp93 .START_POWER_REQ 100
   274 op div :kilo*retval *tmp93 10
   275 jump *label105 always
   276 label *label105

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   253 control enabled generator2 true
   254 label *label39
   255 label *label37
-    * set :kilo:val .AVG_SURPLUS
   256 label *label100
   257 op idiv *tmp93 .AVG_SURPLUS 100
   258 op div :kilo*retval *tmp93 10
 
   267 label *label103
   268 set :charge :kilo*retval
   269 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :kilo:val .START_POWER_REQ
   270 label *label104
   271 op idiv *tmp93 .START_POWER_REQ 100
   272 op div :kilo*retval *tmp93 10

Modifications by Inline function 'update_fuel' defined at line 121:1:
 
   113 set :update_fuel:fuel :start_reactor*retval
   114 set :update_fuel:uld_in unloader1
   115 set :update_fuel:uld_out unloader2
-    * setaddr :update_fuel*retaddr *label20 (h:*label20)
-    * call *label1 *invalid :update_fuel*retval (m:*label20) (h:*label20)
-    * label *label20
+  116 label *label106
+  117 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  118 label *label107
+  119 label *label108
+  120 control config :update_fuel:uld_in *tmp97
+  121 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  122 label *label109
+  123 label *label110
+  124 control config :update_fuel:uld_out *tmp101
+  125 label *label111
   126 set :start_reactor:reactor reactor2
   127 set :start_reactor:reactor_num 2
   128 set :start_reactor:emerg_shutdown :emerg_shutdown
 
   136 set :update_fuel:fuel :start_reactor*retval
   137 set :update_fuel:uld_in unloader3
   138 set :update_fuel:uld_out unloader4
-    * setaddr :update_fuel*retaddr *label22 (h:*label22)
-    * call *label1 *invalid :update_fuel*retval (m:*label22) (h:*label22)
-    * label *label22
+  139 label *label112
+  140 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  141 label *label113
+  142 label *label114
+  143 control config :update_fuel:uld_in *tmp97
+  144 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  145 label *label115
+  146 label *label116
+  147 control config :update_fuel:uld_out *tmp101
+  148 label *label117
   149 set :check_radar:unit cyclone1
   150 setaddr :check_radar*retaddr *label23 (h:*label23)
   151 call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
 
   186 set :update_fuel:fuel :fuel_many
   187 set :update_fuel:uld_in unloader5
   188 set :update_fuel:uld_out unloader6
-    * setaddr :update_fuel*retaddr *label27 (h:*label27)
-    * call *label1 *invalid :update_fuel*retval (m:*label27) (h:*label27)
-    * label *label27
+  189 label *label118
+  190 select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  191 label *label119
+  192 label *label120
+  193 control config :update_fuel:uld_in *tmp97
+  194 select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  195 label *label121
+  196 label *label122
+  197 control config :update_fuel:uld_out *tmp101
+  198 label *label123
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   201 sensor *tmp33 node1 @powerNetStored
 
   348 jump *label7 always
   349 label *label9
   350 end
-    * label *label1
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label56
-    * label *label57
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
-    * label *label58
-    * label *label59
-    * control config :update_fuel:uld_out *tmp101
-    * label *label55
-    * return :update_fuel*retaddr
-    * end
   351 label *label2
   352 op sub *tmp102 @tick :calc_charge_req:time
   353 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   114 set :update_fuel:uld_in unloader1
   115 set :update_fuel:uld_out unloader2
   116 label *label106
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  117 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   118 label *label107
   119 label *label108
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  120 control config unloader1 *tmp97
+  121 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   122 label *label109
   123 label *label110
-    * control config :update_fuel:uld_out *tmp101
+  124 control config unloader2 *tmp101
   125 label *label111
   126 set :start_reactor:reactor reactor2
   127 set :start_reactor:reactor_num 2
 
   137 set :update_fuel:uld_in unloader3
   138 set :update_fuel:uld_out unloader4
   139 label *label112
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  140 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   141 label *label113
   142 label *label114
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  143 control config unloader3 *tmp97
+  144 select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
   145 label *label115
   146 label *label116
-    * control config :update_fuel:uld_out *tmp101
+  147 control config unloader4 *tmp101
   148 label *label117
   149 set :check_radar:unit cyclone1
   150 setaddr :check_radar*retaddr *label23 (h:*label23)
 
   187 set :update_fuel:uld_in unloader5
   188 set :update_fuel:uld_out unloader6
   189 label *label118
-    * select *tmp97 notEqual :update_fuel:fuel false .FUEL .FUEL_OFF
+  190 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   191 label *label119
   192 label *label120
-    * control config :update_fuel:uld_in *tmp97
-    * select *tmp101 equal :update_fuel:fuel false .FUEL .FUEL_OFF
+  193 control config unloader5 *tmp97
+  194 select *tmp101 equal :fuel_many false @blast-compound @scrap
   195 label *label121
   196 label *label122
-    * control config :update_fuel:uld_out *tmp101
+  197 control config unloader6 *tmp101
   198 label *label123
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   110 label *label19
   111 set :fuel_1 :start_reactor*retval
   112 set :t_startup1 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader1
-    * set :update_fuel:uld_out unloader2
   113 label *label106
   114 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   115 label *label107
 
   130 label *label21
   131 set :fuel_2 :start_reactor*retval
   132 set :t_startup2 .RET_T_STARTUP
-    * set :update_fuel:fuel :start_reactor*retval
-    * set :update_fuel:uld_in unloader3
-    * set :update_fuel:uld_out unloader4
   133 label *label112
   134 select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
   135 label *label113
 
   177 set :t_startup5 .RET_T_STARTUP
   178 op or *tmp27 :fuel_3 :fuel_4
   179 op or :fuel_many *tmp27 :start_reactor*retval
-    * set :update_fuel:fuel :fuel_many
-    * set :update_fuel:uld_in unloader5
-    * set :update_fuel:uld_out unloader6
   180 label *label118
   181 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
   182 label *label119

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    52 set .CONTAINER vault1
    53 set .NODE node1
    54 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label10 (h:*label10)
-    * call *label4 *invalid :check_radar*retval (m:*label10) (h:*label10)
-    * label *label10
+   55 label *label124
+   56 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   57 jump *label125 equal :check_radar:enemy_found null
+   58 control enabled projector1 true
+   59 control enabled projector2 true
+   60 control config .ULD_IN_1 .FUEL_OFF
+   61 control config .ULD_OUT_1 .FUEL
+   62 control config .ULD_IN_2 .FUEL_OFF
+   63 control config .ULD_OUT_2 .FUEL
+   64 control config .ULD_IN_MANY .FUEL_OFF
+   65 control config .ULD_OUT_MANY .FUEL
+   66 control config .ULD_MIXER .FUEL_OFF
+   67 control enabled reactor1 false
+   68 control enabled reactor2 false
+   69 control enabled reactor3 false
+   70 control enabled reactor4 false
+   71 control enabled reactor5 false
+   72 set :check_radar*retval true
+   73 jump *label127 always
+   74 jump *label126 always
+   75 label *label125
+   76 control enabled projector1 false
+   77 control enabled projector2 false
+   78 set :check_radar*retval false
+   79 jump *label127 always
+   80 label *label126
+   81 label *label127
    82 op notEqual *tmp9 switch1 null
    83 sensor *tmp10 switch1 @enabled
    84 op equal *tmp11 *tmp10 false
 
   165 control config unloader4 *tmp101
   166 label *label117
   167 set :check_radar:unit cyclone1
-    * setaddr :check_radar*retaddr *label23 (h:*label23)
-    * call *label4 *invalid :check_radar*retval (m:*label23) (h:*label23)
-    * label *label23
+  168 label *label128
+  169 radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  170 jump *label129 equal :check_radar:enemy_found null
+  171 control enabled projector1 true
+  172 control enabled projector2 true
+  173 control config .ULD_IN_1 .FUEL_OFF
+  174 control config .ULD_OUT_1 .FUEL
+  175 control config .ULD_IN_2 .FUEL_OFF
+  176 control config .ULD_OUT_2 .FUEL
+  177 control config .ULD_IN_MANY .FUEL_OFF
+  178 control config .ULD_OUT_MANY .FUEL
+  179 control config .ULD_MIXER .FUEL_OFF
+  180 control enabled reactor1 false
+  181 control enabled reactor2 false
+  182 control enabled reactor3 false
+  183 control enabled reactor4 false
+  184 control enabled reactor5 false
+  185 set :check_radar*retval true
+  186 jump *label131 always
+  187 jump *label130 always
+  188 label *label129
+  189 control enabled projector1 false
+  190 control enabled projector2 false
+  191 set :check_radar*retval false
+  192 jump *label131 always
+  193 label *label130
+  194 label *label131
   195 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   196 set :start_reactor:reactor reactor3
   197 set :start_reactor:reactor_num 3
 
   592 label *label63
   593 return :start_reactor*retaddr
   594 end
-    * label *label4
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
-    * jump *label98 equal :check_radar:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :check_radar*retval true
-    * jump *label97 always
-    * jump *label99 always
-    * label *label98
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :check_radar*retval false
-    * jump *label97 always
-    * label *label99
-    * label *label97
-    * return :check_radar*retaddr
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    53 set .NODE node1
    54 set :check_radar:unit cyclone1
    55 label *label124
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+   56 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    57 jump *label125 equal :check_radar:enemy_found null
    58 control enabled projector1 true
    59 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   60 control config unloader1 @scrap
+   61 control config unloader2 @blast-compound
+   62 control config unloader3 @scrap
+   63 control config unloader4 @blast-compound
+   64 control config unloader5 @scrap
+   65 control config unloader6 @blast-compound
+   66 control config unloader7 @scrap
    67 control enabled reactor1 false
    68 control enabled reactor2 false
    69 control enabled reactor3 false
 
   166 label *label117
   167 set :check_radar:unit cyclone1
   168 label *label128
-    * radar enemy any any health :check_radar:unit 1 :check_radar:enemy_found
+  169 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   170 jump *label129 equal :check_radar:enemy_found null
   171 control enabled projector1 true
   172 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  173 control config unloader1 @scrap
+  174 control config unloader2 @blast-compound
+  175 control config unloader3 @scrap
+  176 control config unloader4 @blast-compound
+  177 control config unloader5 @scrap
+  178 control config unloader6 @blast-compound
+  179 control config unloader7 @scrap
   180 control enabled reactor1 false
   181 control enabled reactor2 false
   182 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
    51 set .TOWER cyclone1
    52 set .CONTAINER vault1
    53 set .NODE node1
-    * set :check_radar:unit cyclone1
    54 label *label124
    55 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    56 jump *label125 equal :check_radar:enemy_found null
 
   163 label *label116
   164 control config unloader4 *tmp101
   165 label *label117
-    * set :check_radar:unit cyclone1
   166 label *label128
   167 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   168 jump *label129 equal :check_radar:enemy_found null

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    95 op or :emerg_shutdown :check_radar*retval *tmp8
    96 set :calc_charge_req:reactor reactor1
    97 set :calc_charge_req:time :t_startup1
-    * setaddr :calc_charge_req*retaddr *label14 (h:*label14)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label14) (h:*label14)
-    * label *label14
+   98 label *label132
+   99 op sub *tmp102 @tick :calc_charge_req:time
+  100 op idiv :calc_charge_req:secs *tmp102 60
+  101 op greaterThan *tmp104 :calc_charge_req:secs 30
+  102 sensor *tmp105 :calc_charge_req:reactor @enabled
+  103 op equal *tmp106 *tmp105 false
+  104 op or *tmp107 *tmp104 *tmp106
+  105 jump *label133 equal *tmp107 false
+  106 set :calc_charge_req*retval 0
+  107 jump *label135 always
+  108 label *label133
+  109 label *label134
+  110 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  111 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  112 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  113 set :calc_charge_req*retval :calc_charge_req:charge_req
+  114 jump *label135 always
+  115 label *label135
   116 set .START_POWER_REQ :calc_charge_req*retval
   117 set :calc_charge_req:reactor reactor2
   118 set :calc_charge_req:time :t_startup2
-    * setaddr :calc_charge_req*retaddr *label15 (h:*label15)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label15) (h:*label15)
-    * label *label15
+  119 label *label136
+  120 op sub *tmp102 @tick :calc_charge_req:time
+  121 op idiv :calc_charge_req:secs *tmp102 60
+  122 op greaterThan *tmp104 :calc_charge_req:secs 30
+  123 sensor *tmp105 :calc_charge_req:reactor @enabled
+  124 op equal *tmp106 *tmp105 false
+  125 op or *tmp107 *tmp104 *tmp106
+  126 jump *label137 equal *tmp107 false
+  127 set :calc_charge_req*retval 0
+  128 jump *label139 always
+  129 label *label137
+  130 label *label138
+  131 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  132 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  133 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  134 set :calc_charge_req*retval :calc_charge_req:charge_req
+  135 jump *label139 always
+  136 label *label139
   137 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   138 set :calc_charge_req:reactor reactor3
   139 set :calc_charge_req:time :t_startup3
-    * setaddr :calc_charge_req*retaddr *label16 (h:*label16)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label16) (h:*label16)
-    * label *label16
+  140 label *label140
+  141 op sub *tmp102 @tick :calc_charge_req:time
+  142 op idiv :calc_charge_req:secs *tmp102 60
+  143 op greaterThan *tmp104 :calc_charge_req:secs 30
+  144 sensor *tmp105 :calc_charge_req:reactor @enabled
+  145 op equal *tmp106 *tmp105 false
+  146 op or *tmp107 *tmp104 *tmp106
+  147 jump *label141 equal *tmp107 false
+  148 set :calc_charge_req*retval 0
+  149 jump *label143 always
+  150 label *label141
+  151 label *label142
+  152 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  153 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  154 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  155 set :calc_charge_req*retval :calc_charge_req:charge_req
+  156 jump *label143 always
+  157 label *label143
   158 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   159 set :calc_charge_req:reactor reactor4
   160 set :calc_charge_req:time :t_startup4
-    * setaddr :calc_charge_req*retaddr *label17 (h:*label17)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label17) (h:*label17)
-    * label *label17
+  161 label *label144
+  162 op sub *tmp102 @tick :calc_charge_req:time
+  163 op idiv :calc_charge_req:secs *tmp102 60
+  164 op greaterThan *tmp104 :calc_charge_req:secs 30
+  165 sensor *tmp105 :calc_charge_req:reactor @enabled
+  166 op equal *tmp106 *tmp105 false
+  167 op or *tmp107 *tmp104 *tmp106
+  168 jump *label145 equal *tmp107 false
+  169 set :calc_charge_req*retval 0
+  170 jump *label147 always
+  171 label *label145
+  172 label *label146
+  173 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  174 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  175 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  176 set :calc_charge_req*retval :calc_charge_req:charge_req
+  177 jump *label147 always
+  178 label *label147
   179 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   180 set :calc_charge_req:reactor reactor5
   181 set :calc_charge_req:time :t_startup5
-    * setaddr :calc_charge_req*retaddr *label18 (h:*label18)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label18) (h:*label18)
-    * label *label18
+  182 label *label148
+  183 op sub *tmp102 @tick :calc_charge_req:time
+  184 op idiv :calc_charge_req:secs *tmp102 60
+  185 op greaterThan *tmp104 :calc_charge_req:secs 30
+  186 sensor *tmp105 :calc_charge_req:reactor @enabled
+  187 op equal *tmp106 *tmp105 false
+  188 op or *tmp107 *tmp104 *tmp106
+  189 jump *label149 equal *tmp107 false
+  190 set :calc_charge_req*retval 0
+  191 jump *label151 always
+  192 label *label149
+  193 label *label150
+  194 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  195 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  196 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  197 set :calc_charge_req*retval :calc_charge_req:charge_req
+  198 jump *label151 always
+  199 label *label151
   200 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
   201 set :start_reactor:reactor reactor1
   202 set :start_reactor:reactor_num 1
 
   460 jump *label7 always
   461 label *label9
   462 end
-    * label *label2
-    * op sub *tmp102 @tick :calc_charge_req:time
-    * op idiv :calc_charge_req:secs *tmp102 60
-    * op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label61 equal *tmp107 false
-    * set :calc_charge_req*retval 0
-    * jump *label60 always
-    * label *label61
-    * label *label62
-    * op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
-    * op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
-    * op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
-    * jump *label60 always
-    * label *label60
-    * return :calc_charge_req*retaddr
-    * end
   463 label *label3
   464 set .RET_T_STARTUP :start_reactor:t_startup
   465 op sub *tmp113 @tick :start_reactor:t_startup
 
   521 jump *label76 greaterThanEq :start_reactor:secs 30
   522 set :calc_charge_req:reactor :start_reactor:reactor
   523 set :calc_charge_req:time :start_reactor:t_startup
-    * setaddr :calc_charge_req*retaddr *label78 (h:*label78)
-    * call *label2 *invalid :calc_charge_req*retval (m:*label78) (h:*label78)
-    * label *label78
+  524 label *label152
+  525 op sub *tmp102 @tick :calc_charge_req:time
+  526 op idiv :calc_charge_req:secs *tmp102 60
+  527 op greaterThan *tmp104 :calc_charge_req:secs 30
+  528 sensor *tmp105 :calc_charge_req:reactor @enabled
+  529 op equal *tmp106 *tmp105 false
+  530 op or *tmp107 *tmp104 *tmp106
+  531 jump *label153 equal *tmp107 false
+  532 set :calc_charge_req*retval 0
+  533 jump *label155 always
+  534 label *label153
+  535 label *label154
+  536 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  537 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  538 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  539 set :calc_charge_req*retval :calc_charge_req:charge_req
+  540 jump *label155 always
+  541 label *label155
   542 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
   543 op lessThan *tmp154 *tmp153 .PWR_ABORT
   544 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    96 set :calc_charge_req:reactor reactor1
    97 set :calc_charge_req:time :t_startup1
    98 label *label132
-    * op sub *tmp102 @tick :calc_charge_req:time
+   99 op sub *tmp102 @tick :t_startup1
   100 op idiv :calc_charge_req:secs *tmp102 60
   101 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  102 sensor *tmp105 reactor1 @enabled
   103 op equal *tmp106 *tmp105 false
   104 op or *tmp107 *tmp104 *tmp106
   105 jump *label133 equal *tmp107 false
 
   117 set :calc_charge_req:reactor reactor2
   118 set :calc_charge_req:time :t_startup2
   119 label *label136
-    * op sub *tmp102 @tick :calc_charge_req:time
+  120 op sub *tmp102 @tick :t_startup2
   121 op idiv :calc_charge_req:secs *tmp102 60
   122 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  123 sensor *tmp105 reactor2 @enabled
   124 op equal *tmp106 *tmp105 false
   125 op or *tmp107 *tmp104 *tmp106
   126 jump *label137 equal *tmp107 false
 
   138 set :calc_charge_req:reactor reactor3
   139 set :calc_charge_req:time :t_startup3
   140 label *label140
-    * op sub *tmp102 @tick :calc_charge_req:time
+  141 op sub *tmp102 @tick :t_startup3
   142 op idiv :calc_charge_req:secs *tmp102 60
   143 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  144 sensor *tmp105 reactor3 @enabled
   145 op equal *tmp106 *tmp105 false
   146 op or *tmp107 *tmp104 *tmp106
   147 jump *label141 equal *tmp107 false
 
   159 set :calc_charge_req:reactor reactor4
   160 set :calc_charge_req:time :t_startup4
   161 label *label144
-    * op sub *tmp102 @tick :calc_charge_req:time
+  162 op sub *tmp102 @tick :t_startup4
   163 op idiv :calc_charge_req:secs *tmp102 60
   164 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  165 sensor *tmp105 reactor4 @enabled
   166 op equal *tmp106 *tmp105 false
   167 op or *tmp107 *tmp104 *tmp106
   168 jump *label145 equal *tmp107 false
 
   180 set :calc_charge_req:reactor reactor5
   181 set :calc_charge_req:time :t_startup5
   182 label *label148
-    * op sub *tmp102 @tick :calc_charge_req:time
+  183 op sub *tmp102 @tick :t_startup5
   184 op idiv :calc_charge_req:secs *tmp102 60
   185 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  186 sensor *tmp105 reactor5 @enabled
   187 op equal *tmp106 *tmp105 false
   188 op or *tmp107 *tmp104 *tmp106
   189 jump *label149 equal *tmp107 false
 
   522 set :calc_charge_req:reactor :start_reactor:reactor
   523 set :calc_charge_req:time :start_reactor:t_startup
   524 label *label152
-    * op sub *tmp102 @tick :calc_charge_req:time
+  525 op sub *tmp102 @tick :start_reactor:t_startup
   526 op idiv :calc_charge_req:secs *tmp102 60
   527 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :calc_charge_req:reactor @enabled
+  528 sensor *tmp105 :start_reactor:reactor @enabled
   529 op equal *tmp106 *tmp105 false
   530 op or *tmp107 *tmp104 *tmp106
   531 jump *label153 equal *tmp107 false
 
   652 label *label67
   653 label *label65
   654 sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick .RET_T_STARTUP
+  655 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
   656 label *label95
   657 label *label96
   658 set :start_reactor*retval :start_reactor:supply_fuel

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    93 jump *label11 always
    94 label *label11
    95 op or :emerg_shutdown :check_radar*retval *tmp8
-    * set :calc_charge_req:reactor reactor1
-    * set :calc_charge_req:time :t_startup1
    96 label *label132
    97 op sub *tmp102 @tick :t_startup1
    98 op idiv :calc_charge_req:secs *tmp102 60
 
   112 jump *label135 always
   113 label *label135
   114 set .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor2
-    * set :calc_charge_req:time :t_startup2
   115 label *label136
   116 op sub *tmp102 @tick :t_startup2
   117 op idiv :calc_charge_req:secs *tmp102 60
 
   131 jump *label139 always
   132 label *label139
   133 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor3
-    * set :calc_charge_req:time :t_startup3
   134 label *label140
   135 op sub *tmp102 @tick :t_startup3
   136 op idiv :calc_charge_req:secs *tmp102 60
 
   150 jump *label143 always
   151 label *label143
   152 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor4
-    * set :calc_charge_req:time :t_startup4
   153 label *label144
   154 op sub *tmp102 @tick :t_startup4
   155 op idiv :calc_charge_req:secs *tmp102 60
 
   169 jump *label147 always
   170 label *label147
   171 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :calc_charge_req:reactor reactor5
-    * set :calc_charge_req:time :t_startup5
   172 label *label148
   173 op sub *tmp102 @tick :t_startup5
   174 op idiv :calc_charge_req:secs *tmp102 60
 
   509 jump *label75 always
   510 label *label74
   511 jump *label76 greaterThanEq :start_reactor:secs 30
-    * set :calc_charge_req:reactor :start_reactor:reactor
-    * set :calc_charge_req:time :start_reactor:t_startup
   512 label *label152
   513 op sub *tmp102 @tick :start_reactor:t_startup
   514 op idiv :calc_charge_req:secs *tmp102 60

Modifications by Inline function call at line 80:14 (+156 instructions):
 
   193 set :start_reactor:emerg_shutdown :emerg_shutdown
   194 set :start_reactor:fuel_on :fuel_1
   195 set :start_reactor:t_startup :t_startup1
-    * setaddr :start_reactor*retaddr *label19 (h:*label19)
-    * call *label3 *invalid :start_reactor*retval (m:*label19) (h:*label19)
-    * label *label19
+  196 label *label156
+  197 set .RET_T_STARTUP :start_reactor:t_startup
+  198 op sub *tmp113 @tick :start_reactor:t_startup
+  199 op idiv :start_reactor:secs *tmp113 60
+  200 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  201 set :start_reactor:supply_fuel true
+  202 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  203 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  204 sensor *tmp118 .NODE @powerNetStored
+  205 op floor :start_reactor:charge *tmp118
+  206 sensor *tmp120 .NODE @powerNetIn
+  207 sensor *tmp121 .NODE @powerNetOut
+  208 op sub *tmp122 *tmp120 *tmp121
+  209 op floor :start_reactor:surplus *tmp122
+  210 op mul *tmp124 .AVG_SURPLUS 0.8
+  211 op mul *tmp125 :start_reactor:surplus 0.2
+  212 op add .AVG_SURPLUS *tmp124 *tmp125
+  213 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  214 print "#"
+  215 print :start_reactor:reactor_num
+  216 print " "
+  217 print "- "
+  218 jump *label157 equal :start_reactor:emerg_shutdown false
+  219 control enabled :start_reactor:reactor false
+  220 print "emergency mode"
+  221 print "\n"
+  222 set :start_reactor:supply_fuel false
+  223 jump *label190 always
+  224 label *label157
+  225 jump *label176 equal :start_reactor:enabled false
+  226 jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  227 control enabled :start_reactor:reactor false
+  228 print "STOP unwanted"
+  229 print "\n"
+  230 jump *label175 always
+  231 label *label158
+  232 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  233 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  234 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  235 op land *tmp139 *tmp136 *tmp138
+  236 jump *label159 equal *tmp139 false
+  237 control enabled :start_reactor:reactor false
+  238 print "STOP system fuel low"
+  239 print "\n"
+  240 jump *label174 always
+  241 label *label159
+  242 jump *label160 greaterThan :start_reactor:fuel 1
+  243 control enabled :start_reactor:reactor false
+  244 print "STOP fuel low"
+  245 print "\n"
+  246 jump *label173 always
+  247 label *label160
+  248 jump *label161 greaterThan :start_reactor:cryo .CRYO_ABORT
+  249 control enabled :start_reactor:reactor false
+  250 print "STOP out of cryo"
+  251 print "\n"
+  252 jump *label172 always
+  253 label *label161
+  254 jump *label168 greaterThanEq :start_reactor:secs 30
+  255 label *label162
+  256 op sub *tmp102 @tick :start_reactor:t_startup
+  257 op idiv :calc_charge_req:secs *tmp102 60
+  258 op greaterThan *tmp104 :calc_charge_req:secs 30
+  259 sensor *tmp105 :start_reactor:reactor @enabled
+  260 op equal *tmp106 *tmp105 false
+  261 op or *tmp107 *tmp104 *tmp106
+  262 jump *label163 equal *tmp107 false
+  263 set :calc_charge_req*retval 0
+  264 jump *label165 always
+  265 label *label163
+  266 label *label164
+  267 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  268 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  269 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  270 set :calc_charge_req*retval :calc_charge_req:charge_req
+  271 jump *label165 always
+  272 label *label165
+  273 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  274 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  275 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  276 op land *tmp156 *tmp154 *tmp155
+  277 jump *label166 equal *tmp156 false
+  278 control enabled :start_reactor:reactor false
+  279 print "START FAIL battery"
+  280 print "\n"
+  281 set :start_reactor:supply_fuel false
+  282 jump *label167 always
+  283 label *label166
+  284 op sub :start_reactor:time_left 30 :start_reactor:secs
+  285 print "Starting "
+  286 print :start_reactor:time_left
+  287 print " "
+  288 print "secs, req "
+  289 print :calc_charge_req*retval
+  290 print "J"
+  291 print "\n"
+  292 label *label167
+  293 jump *label171 always
+  294 label *label168
+  295 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  296 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  297 op land *tmp163 *tmp161 *tmp162
+  298 jump *label169 equal *tmp163 false
+  299 control enabled :start_reactor:reactor false
+  300 print "ABANDON - battery crit"
+  301 print "\n"
+  302 set :start_reactor:supply_fuel false
+  303 jump *label170 always
+  304 label *label169
+  305 op idiv :start_reactor:mins :start_reactor:secs 6
+  306 op div :start_reactor:mins :start_reactor:mins 10
+  307 print "RUN "
+  308 print :start_reactor:mins
+  309 print " "
+  310 print "mins"
+  311 print "\n"
+  312 label *label170
+  313 label *label171
+  314 label *label172
+  315 label *label173
+  316 label *label174
+  317 label *label175
+  318 jump *label189 always
+  319 label *label176
+  320 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  321 op sub *tmp170 *tmp169 .PWR_ABORT
+  322 op div *tmp171 *tmp170 .PWR_REQ
+  323 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  324 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  325 op max :start_reactor:flow_units -0.1 *tmp173
+  326 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  327 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  328 jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  329 print "IDLE"
+  330 print "\n"
+  331 set :start_reactor:supply_fuel false
+  332 jump *label188 always
+  333 label *label177
+  334 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  335 jump *label178 greaterThanEq *tmp179 1
+  336 op idiv *tmp183 :start_reactor:flow_units 0.001
+  337 op div :start_reactor:flow *tmp183 10
+  338 op idiv *tmp186 :start_reactor:charge_units 0.001
+  339 op div :start_reactor:charge *tmp186 10
+  340 print "WAIT power. (%"
+  341 print :start_reactor:charge
+  342 print "J + %"
+  343 print :start_reactor:flow
+  344 print "W)"
+  345 print "\n"
+  346 set :start_reactor:supply_fuel false
+  347 jump *label187 always
+  348 label *label178
+  349 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  350 op land *tmp189 :start_reactor:fuel_on *tmp188
+  351 jump *label181 equal *tmp189 false
+  352 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  353 jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  354 print "WAIT fuel"
+  355 print "\n"
+  356 jump *label180 always
+  357 label *label179
+  358 print "WAIT system fuel"
+  359 print "\n"
+  360 label *label180
+  361 jump *label186 always
+  362 label *label181
+  363 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  364 jump *label182 greaterThanEq :start_reactor:fuel_stored *tmp194
+  365 print "WAIT buffer fuel"
+  366 print "\n"
+  367 jump *label185 always
+  368 label *label182
+  369 jump *label183 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  370 print "WAIT cryo"
+  371 print "\n"
+  372 jump *label184 always
+  373 label *label183
+  374 print "STARTUP"
+  375 print "\n"
+  376 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  377 control enabled :start_reactor:reactor true
+  378 label *label184
+  379 label *label185
+  380 label *label186
+  381 label *label187
+  382 label *label188
+  383 label *label189
+  384 label *label190
+  385 sensor *tmp201 :start_reactor:reactor @enabled
+  386 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  387 label *label191
+  388 label *label192
+  389 set :start_reactor*retval :start_reactor:supply_fuel
+  390 jump *label193 always
+  391 label *label193
   392 set :fuel_1 :start_reactor*retval
   393 set :t_startup1 .RET_T_STARTUP
   394 label *label106

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   194 set :start_reactor:fuel_on :fuel_1
   195 set :start_reactor:t_startup :t_startup1
   196 label *label156
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  197 set .RET_T_STARTUP :t_startup1
+  198 op sub *tmp113 @tick :t_startup1
   199 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  200 sensor :start_reactor:fuel reactor1 @blast-compound
   201 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  202 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  203 sensor :start_reactor:cryo reactor1 @cryofluid
+  204 sensor *tmp118 node1 @powerNetStored
   205 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  206 sensor *tmp120 node1 @powerNetIn
+  207 sensor *tmp121 node1 @powerNetOut
   208 op sub *tmp122 *tmp120 *tmp121
   209 op floor :start_reactor:surplus *tmp122
   210 op mul *tmp124 .AVG_SURPLUS 0.8
   211 op mul *tmp125 :start_reactor:surplus 0.2
   212 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  213 sensor :start_reactor:enabled reactor1 @enabled
   214 print "#"
-    * print :start_reactor:reactor_num
+  215 print 1
   216 print " "
   217 print "- "
-    * jump *label157 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  218 jump *label157 equal :emerg_shutdown false
+  219 control enabled reactor1 false
   220 print "emergency mode"
   221 print "\n"
   222 set :start_reactor:supply_fuel false
   223 jump *label190 always
   224 label *label157
   225 jump *label176 equal :start_reactor:enabled false
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  226 jump *label158 greaterThanEq .REACTORS_DESIRED 1
+  227 control enabled reactor1 false
   228 print "STOP unwanted"
   229 print "\n"
   230 jump *label175 always
   231 label *label158
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  232 op greaterThan *tmp136 1 1
+  233 op mul *tmp137 15 1
+  234 op lessThan *tmp138 :start_reactor:fuel_stored 15
+  235 op land *tmp139 false *tmp138
   236 jump *label159 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  237 control enabled reactor1 false
   238 print "STOP system fuel low"
   239 print "\n"
   240 jump *label174 always
   241 label *label159
   242 jump *label160 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  243 control enabled reactor1 false
   244 print "STOP fuel low"
   245 print "\n"
   246 jump *label173 always
   247 label *label160
-    * jump *label161 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  248 jump *label161 greaterThan :start_reactor:cryo 1
+  249 control enabled reactor1 false
   250 print "STOP out of cryo"
   251 print "\n"
   252 jump *label172 always
   253 label *label161
   254 jump *label168 greaterThanEq :start_reactor:secs 30
   255 label *label162
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  256 op sub *tmp102 @tick :t_startup1
   257 op idiv :calc_charge_req:secs *tmp102 60
   258 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  259 sensor *tmp105 reactor1 @enabled
   260 op equal *tmp106 *tmp105 false
   261 op or *tmp107 *tmp104 *tmp106
   262 jump *label163 equal *tmp107 false
 
   271 jump *label165 always
   272 label *label165
   273 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  274 op lessThan *tmp154 *tmp153 5000
+  275 op lessThan *tmp155 :start_reactor:surplus -500
   276 op land *tmp156 *tmp154 *tmp155
   277 jump *label166 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  278 control enabled reactor1 false
   279 print "START FAIL battery"
   280 print "\n"
   281 set :start_reactor:supply_fuel false
 
   292 label *label167
   293 jump *label171 always
   294 label *label168
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  295 op lessThan *tmp161 :start_reactor:charge 2000
+  296 op lessThan *tmp162 :start_reactor:surplus -500
   297 op land *tmp163 *tmp161 *tmp162
   298 jump *label169 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  299 control enabled reactor1 false
   300 print "ABANDON - battery crit"
   301 print "\n"
   302 set :start_reactor:supply_fuel false
 
   318 jump *label189 always
   319 label *label176
   320 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  321 op sub *tmp170 *tmp169 5000
+  322 op div *tmp171 *tmp170 23000
+  323 op mul :start_reactor:charge_units *tmp171 0.6
+  324 op div *tmp173 :start_reactor:surplus 2000
   325 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  326 op mul *tmp175 2 1
+  327 op add :start_reactor:cryo_req 3 2
+  328 jump *label177 greaterThanEq .REACTORS_DESIRED 1
   329 print "IDLE"
   330 print "\n"
   331 set :start_reactor:supply_fuel false
 
   346 set :start_reactor:supply_fuel false
   347 jump *label187 always
   348 label *label178
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  349 op lessThan *tmp188 :start_reactor:fuel 10
+  350 op land *tmp189 :fuel_1 *tmp188
   351 jump *label181 equal *tmp189 false
   352 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  353 jump *label179 lessThanEq *tmp191 10
   354 print "WAIT fuel"
   355 print "\n"
   356 jump *label180 always
 
   360 label *label180
   361 jump *label186 always
   362 label *label181
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label182 greaterThanEq :start_reactor:fuel_stored *tmp194
+  363 op mul *tmp194 45 1
+  364 jump *label182 greaterThanEq :start_reactor:fuel_stored 45
   365 print "WAIT buffer fuel"
   366 print "\n"
   367 jump *label185 always
   368 label *label182
-    * jump *label183 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  369 jump *label183 greaterThanEq :start_reactor:cryo 5
   370 print "WAIT cryo"
   371 print "\n"
   372 jump *label184 always
   373 label *label183
   374 print "STARTUP"
   375 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  376 op add .START_POWER_REQ .START_POWER_REQ 23000
+  377 control enabled reactor1 true
   378 label *label184
   379 label *label185
   380 label *label186
 
   382 label *label188
   383 label *label189
   384 label *label190
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  385 sensor *tmp201 reactor1 @enabled
+  386 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   387 label *label191
   388 label *label192
   389 set :start_reactor*retval :start_reactor:supply_fuel
   390 jump *label193 always
   391 label *label193
-    * set :fuel_1 :start_reactor*retval
+  392 set :fuel_1 :start_reactor:supply_fuel
   393 set :t_startup1 .RET_T_STARTUP
   394 label *label106
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  395 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   396 label *label107
   397 label *label108
   398 control config unloader1 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  399 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   400 label *label109
   401 label *label110
   402 control config unloader2 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   188 jump *label151 always
   189 label *label151
   190 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * set :start_reactor:reactor reactor1
-    * set :start_reactor:reactor_num 1
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_1
-    * set :start_reactor:t_startup :t_startup1
   191 label *label156
   192 set .RET_T_STARTUP :t_startup1
   193 op sub *tmp113 @tick :t_startup1
 
   315 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   316 op sub *tmp170 *tmp169 5000
   317 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  318 op div :start_reactor:charge_units *tmp170 38333.333333333336
   319 op div *tmp173 :start_reactor:surplus 2000
   320 op max :start_reactor:flow_units -0.1 *tmp173
   321 op mul *tmp175 2 1
 
   381 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   382 label *label191
   383 label *label192
-    * set :start_reactor*retval :start_reactor:supply_fuel
   384 jump *label193 always
   385 label *label193
   386 set :fuel_1 :start_reactor:supply_fuel

Modifications by Inline function call at line 84:14 (+156 instructions):
 
   400 set :start_reactor:emerg_shutdown :emerg_shutdown
   401 set :start_reactor:fuel_on :fuel_2
   402 set :start_reactor:t_startup :t_startup2
-    * setaddr :start_reactor*retaddr *label21 (h:*label21)
-    * call *label3 *invalid :start_reactor*retval (m:*label21) (h:*label21)
-    * label *label21
+  403 label *label194
+  404 set .RET_T_STARTUP :start_reactor:t_startup
+  405 op sub *tmp113 @tick :start_reactor:t_startup
+  406 op idiv :start_reactor:secs *tmp113 60
+  407 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  408 set :start_reactor:supply_fuel true
+  409 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  410 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  411 sensor *tmp118 .NODE @powerNetStored
+  412 op floor :start_reactor:charge *tmp118
+  413 sensor *tmp120 .NODE @powerNetIn
+  414 sensor *tmp121 .NODE @powerNetOut
+  415 op sub *tmp122 *tmp120 *tmp121
+  416 op floor :start_reactor:surplus *tmp122
+  417 op mul *tmp124 .AVG_SURPLUS 0.8
+  418 op mul *tmp125 :start_reactor:surplus 0.2
+  419 op add .AVG_SURPLUS *tmp124 *tmp125
+  420 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  421 print "#"
+  422 print :start_reactor:reactor_num
+  423 print " "
+  424 print "- "
+  425 jump *label195 equal :start_reactor:emerg_shutdown false
+  426 control enabled :start_reactor:reactor false
+  427 print "emergency mode"
+  428 print "\n"
+  429 set :start_reactor:supply_fuel false
+  430 jump *label228 always
+  431 label *label195
+  432 jump *label214 equal :start_reactor:enabled false
+  433 jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  434 control enabled :start_reactor:reactor false
+  435 print "STOP unwanted"
+  436 print "\n"
+  437 jump *label213 always
+  438 label *label196
+  439 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  440 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  441 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  442 op land *tmp139 *tmp136 *tmp138
+  443 jump *label197 equal *tmp139 false
+  444 control enabled :start_reactor:reactor false
+  445 print "STOP system fuel low"
+  446 print "\n"
+  447 jump *label212 always
+  448 label *label197
+  449 jump *label198 greaterThan :start_reactor:fuel 1
+  450 control enabled :start_reactor:reactor false
+  451 print "STOP fuel low"
+  452 print "\n"
+  453 jump *label211 always
+  454 label *label198
+  455 jump *label199 greaterThan :start_reactor:cryo .CRYO_ABORT
+  456 control enabled :start_reactor:reactor false
+  457 print "STOP out of cryo"
+  458 print "\n"
+  459 jump *label210 always
+  460 label *label199
+  461 jump *label206 greaterThanEq :start_reactor:secs 30
+  462 label *label200
+  463 op sub *tmp102 @tick :start_reactor:t_startup
+  464 op idiv :calc_charge_req:secs *tmp102 60
+  465 op greaterThan *tmp104 :calc_charge_req:secs 30
+  466 sensor *tmp105 :start_reactor:reactor @enabled
+  467 op equal *tmp106 *tmp105 false
+  468 op or *tmp107 *tmp104 *tmp106
+  469 jump *label201 equal *tmp107 false
+  470 set :calc_charge_req*retval 0
+  471 jump *label203 always
+  472 label *label201
+  473 label *label202
+  474 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  475 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  476 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  477 set :calc_charge_req*retval :calc_charge_req:charge_req
+  478 jump *label203 always
+  479 label *label203
+  480 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  481 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  482 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  483 op land *tmp156 *tmp154 *tmp155
+  484 jump *label204 equal *tmp156 false
+  485 control enabled :start_reactor:reactor false
+  486 print "START FAIL battery"
+  487 print "\n"
+  488 set :start_reactor:supply_fuel false
+  489 jump *label205 always
+  490 label *label204
+  491 op sub :start_reactor:time_left 30 :start_reactor:secs
+  492 print "Starting "
+  493 print :start_reactor:time_left
+  494 print " "
+  495 print "secs, req "
+  496 print :calc_charge_req*retval
+  497 print "J"
+  498 print "\n"
+  499 label *label205
+  500 jump *label209 always
+  501 label *label206
+  502 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  503 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  504 op land *tmp163 *tmp161 *tmp162
+  505 jump *label207 equal *tmp163 false
+  506 control enabled :start_reactor:reactor false
+  507 print "ABANDON - battery crit"
+  508 print "\n"
+  509 set :start_reactor:supply_fuel false
+  510 jump *label208 always
+  511 label *label207
+  512 op idiv :start_reactor:mins :start_reactor:secs 6
+  513 op div :start_reactor:mins :start_reactor:mins 10
+  514 print "RUN "
+  515 print :start_reactor:mins
+  516 print " "
+  517 print "mins"
+  518 print "\n"
+  519 label *label208
+  520 label *label209
+  521 label *label210
+  522 label *label211
+  523 label *label212
+  524 label *label213
+  525 jump *label227 always
+  526 label *label214
+  527 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  528 op sub *tmp170 *tmp169 .PWR_ABORT
+  529 op div *tmp171 *tmp170 .PWR_REQ
+  530 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  531 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  532 op max :start_reactor:flow_units -0.1 *tmp173
+  533 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  534 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  535 jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  536 print "IDLE"
+  537 print "\n"
+  538 set :start_reactor:supply_fuel false
+  539 jump *label226 always
+  540 label *label215
+  541 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  542 jump *label216 greaterThanEq *tmp179 1
+  543 op idiv *tmp183 :start_reactor:flow_units 0.001
+  544 op div :start_reactor:flow *tmp183 10
+  545 op idiv *tmp186 :start_reactor:charge_units 0.001
+  546 op div :start_reactor:charge *tmp186 10
+  547 print "WAIT power. (%"
+  548 print :start_reactor:charge
+  549 print "J + %"
+  550 print :start_reactor:flow
+  551 print "W)"
+  552 print "\n"
+  553 set :start_reactor:supply_fuel false
+  554 jump *label225 always
+  555 label *label216
+  556 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  557 op land *tmp189 :start_reactor:fuel_on *tmp188
+  558 jump *label219 equal *tmp189 false
+  559 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  560 jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  561 print "WAIT fuel"
+  562 print "\n"
+  563 jump *label218 always
+  564 label *label217
+  565 print "WAIT system fuel"
+  566 print "\n"
+  567 label *label218
+  568 jump *label224 always
+  569 label *label219
+  570 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  571 jump *label220 greaterThanEq :start_reactor:fuel_stored *tmp194
+  572 print "WAIT buffer fuel"
+  573 print "\n"
+  574 jump *label223 always
+  575 label *label220
+  576 jump *label221 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  577 print "WAIT cryo"
+  578 print "\n"
+  579 jump *label222 always
+  580 label *label221
+  581 print "STARTUP"
+  582 print "\n"
+  583 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  584 control enabled :start_reactor:reactor true
+  585 label *label222
+  586 label *label223
+  587 label *label224
+  588 label *label225
+  589 label *label226
+  590 label *label227
+  591 label *label228
+  592 sensor *tmp201 :start_reactor:reactor @enabled
+  593 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  594 label *label229
+  595 label *label230
+  596 set :start_reactor*retval :start_reactor:supply_fuel
+  597 jump *label231 always
+  598 label *label231
   599 set :fuel_2 :start_reactor*retval
   600 set :t_startup2 .RET_T_STARTUP
   601 label *label112

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   401 set :start_reactor:fuel_on :fuel_2
   402 set :start_reactor:t_startup :t_startup2
   403 label *label194
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  404 set .RET_T_STARTUP :t_startup2
+  405 op sub *tmp113 @tick :t_startup2
   406 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  407 sensor :start_reactor:fuel reactor2 @blast-compound
   408 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  409 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  410 sensor :start_reactor:cryo reactor2 @cryofluid
+  411 sensor *tmp118 node1 @powerNetStored
   412 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  413 sensor *tmp120 node1 @powerNetIn
+  414 sensor *tmp121 node1 @powerNetOut
   415 op sub *tmp122 *tmp120 *tmp121
   416 op floor :start_reactor:surplus *tmp122
   417 op mul *tmp124 .AVG_SURPLUS 0.8
   418 op mul *tmp125 :start_reactor:surplus 0.2
   419 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  420 sensor :start_reactor:enabled reactor2 @enabled
   421 print "#"
-    * print :start_reactor:reactor_num
+  422 print 2
   423 print " "
   424 print "- "
-    * jump *label195 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  425 jump *label195 equal :emerg_shutdown false
+  426 control enabled reactor2 false
   427 print "emergency mode"
   428 print "\n"
   429 set :start_reactor:supply_fuel false
   430 jump *label228 always
   431 label *label195
   432 jump *label214 equal :start_reactor:enabled false
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  433 jump *label196 greaterThanEq .REACTORS_DESIRED 2
+  434 control enabled reactor2 false
   435 print "STOP unwanted"
   436 print "\n"
   437 jump *label213 always
   438 label *label196
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  439 op greaterThan *tmp136 2 1
+  440 op mul *tmp137 15 2
+  441 op lessThan *tmp138 :start_reactor:fuel_stored 30
+  442 op land *tmp139 true *tmp138
   443 jump *label197 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  444 control enabled reactor2 false
   445 print "STOP system fuel low"
   446 print "\n"
   447 jump *label212 always
   448 label *label197
   449 jump *label198 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  450 control enabled reactor2 false
   451 print "STOP fuel low"
   452 print "\n"
   453 jump *label211 always
   454 label *label198
-    * jump *label199 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  455 jump *label199 greaterThan :start_reactor:cryo 1
+  456 control enabled reactor2 false
   457 print "STOP out of cryo"
   458 print "\n"
   459 jump *label210 always
   460 label *label199
   461 jump *label206 greaterThanEq :start_reactor:secs 30
   462 label *label200
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  463 op sub *tmp102 @tick :t_startup2
   464 op idiv :calc_charge_req:secs *tmp102 60
   465 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  466 sensor *tmp105 reactor2 @enabled
   467 op equal *tmp106 *tmp105 false
   468 op or *tmp107 *tmp104 *tmp106
   469 jump *label201 equal *tmp107 false
 
   478 jump *label203 always
   479 label *label203
   480 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  481 op lessThan *tmp154 *tmp153 5000
+  482 op lessThan *tmp155 :start_reactor:surplus -500
   483 op land *tmp156 *tmp154 *tmp155
   484 jump *label204 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  485 control enabled reactor2 false
   486 print "START FAIL battery"
   487 print "\n"
   488 set :start_reactor:supply_fuel false
 
   499 label *label205
   500 jump *label209 always
   501 label *label206
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  502 op lessThan *tmp161 :start_reactor:charge 2000
+  503 op lessThan *tmp162 :start_reactor:surplus -500
   504 op land *tmp163 *tmp161 *tmp162
   505 jump *label207 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  506 control enabled reactor2 false
   507 print "ABANDON - battery crit"
   508 print "\n"
   509 set :start_reactor:supply_fuel false
 
   525 jump *label227 always
   526 label *label214
   527 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  528 op sub *tmp170 *tmp169 5000
+  529 op div *tmp171 *tmp170 23000
+  530 op mul :start_reactor:charge_units *tmp171 0.6
+  531 op div *tmp173 :start_reactor:surplus 2000
   532 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  533 op mul *tmp175 2 2
+  534 op add :start_reactor:cryo_req 3 4
+  535 jump *label215 greaterThanEq .REACTORS_DESIRED 2
   536 print "IDLE"
   537 print "\n"
   538 set :start_reactor:supply_fuel false
 
   553 set :start_reactor:supply_fuel false
   554 jump *label225 always
   555 label *label216
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  556 op lessThan *tmp188 :start_reactor:fuel 10
+  557 op land *tmp189 :fuel_2 *tmp188
   558 jump *label219 equal *tmp189 false
   559 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  560 jump *label217 lessThanEq *tmp191 10
   561 print "WAIT fuel"
   562 print "\n"
   563 jump *label218 always
 
   567 label *label218
   568 jump *label224 always
   569 label *label219
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label220 greaterThanEq :start_reactor:fuel_stored *tmp194
+  570 op mul *tmp194 45 2
+  571 jump *label220 greaterThanEq :start_reactor:fuel_stored 90
   572 print "WAIT buffer fuel"
   573 print "\n"
   574 jump *label223 always
   575 label *label220
-    * jump *label221 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  576 jump *label221 greaterThanEq :start_reactor:cryo 7
   577 print "WAIT cryo"
   578 print "\n"
   579 jump *label222 always
   580 label *label221
   581 print "STARTUP"
   582 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  583 op add .START_POWER_REQ .START_POWER_REQ 23000
+  584 control enabled reactor2 true
   585 label *label222
   586 label *label223
   587 label *label224
 
   589 label *label226
   590 label *label227
   591 label *label228
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  592 sensor *tmp201 reactor2 @enabled
+  593 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   594 label *label229
   595 label *label230
   596 set :start_reactor*retval :start_reactor:supply_fuel
   597 jump *label231 always
   598 label *label231
-    * set :fuel_2 :start_reactor*retval
+  599 set :fuel_2 :start_reactor:supply_fuel
   600 set :t_startup2 .RET_T_STARTUP
   601 label *label112
-    * select *tmp97 notEqual :start_reactor*retval false @blast-compound @scrap
+  602 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
   603 label *label113
   604 label *label114
   605 control config unloader3 *tmp97
-    * select *tmp101 equal :start_reactor*retval false @blast-compound @scrap
+  606 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
   607 label *label115
   608 label *label116
   609 control config unloader4 *tmp101

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   395 label *label110
   396 control config unloader2 *tmp101
   397 label *label111
-    * set :start_reactor:reactor reactor2
-    * set :start_reactor:reactor_num 2
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_2
-    * set :start_reactor:t_startup :t_startup2
   398 label *label194
   399 set .RET_T_STARTUP :t_startup2
   400 op sub *tmp113 @tick :t_startup2
 
   522 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   523 op sub *tmp170 *tmp169 5000
   524 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  525 op div :start_reactor:charge_units *tmp170 38333.333333333336
   526 op div *tmp173 :start_reactor:surplus 2000
   527 op max :start_reactor:flow_units -0.1 *tmp173
   528 op mul *tmp175 2 2
 
   588 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   589 label *label229
   590 label *label230
-    * set :start_reactor*retval :start_reactor:supply_fuel
   591 jump *label231 always
   592 label *label231
   593 set :fuel_2 :start_reactor:supply_fuel

Modifications by Inline function call at line 89:14 (+156 instructions):
 
   635 set :start_reactor:emerg_shutdown :emerg_shutdown
   636 set :start_reactor:fuel_on :fuel_3
   637 set :start_reactor:t_startup :t_startup3
-    * setaddr :start_reactor*retaddr *label24 (h:*label24)
-    * call *label3 *invalid :start_reactor*retval (m:*label24) (h:*label24)
-    * label *label24
+  638 label *label232
+  639 set .RET_T_STARTUP :start_reactor:t_startup
+  640 op sub *tmp113 @tick :start_reactor:t_startup
+  641 op idiv :start_reactor:secs *tmp113 60
+  642 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  643 set :start_reactor:supply_fuel true
+  644 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
+  645 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
+  646 sensor *tmp118 .NODE @powerNetStored
+  647 op floor :start_reactor:charge *tmp118
+  648 sensor *tmp120 .NODE @powerNetIn
+  649 sensor *tmp121 .NODE @powerNetOut
+  650 op sub *tmp122 *tmp120 *tmp121
+  651 op floor :start_reactor:surplus *tmp122
+  652 op mul *tmp124 .AVG_SURPLUS 0.8
+  653 op mul *tmp125 :start_reactor:surplus 0.2
+  654 op add .AVG_SURPLUS *tmp124 *tmp125
+  655 sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  656 print "#"
+  657 print :start_reactor:reactor_num
+  658 print " "
+  659 print "- "
+  660 jump *label233 equal :start_reactor:emerg_shutdown false
+  661 control enabled :start_reactor:reactor false
+  662 print "emergency mode"
+  663 print "\n"
+  664 set :start_reactor:supply_fuel false
+  665 jump *label266 always
+  666 label *label233
+  667 jump *label252 equal :start_reactor:enabled false
+  668 jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  669 control enabled :start_reactor:reactor false
+  670 print "STOP unwanted"
+  671 print "\n"
+  672 jump *label251 always
+  673 label *label234
+  674 op greaterThan *tmp136 :start_reactor:reactor_num 1
+  675 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
+  676 op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
+  677 op land *tmp139 *tmp136 *tmp138
+  678 jump *label235 equal *tmp139 false
+  679 control enabled :start_reactor:reactor false
+  680 print "STOP system fuel low"
+  681 print "\n"
+  682 jump *label250 always
+  683 label *label235
+  684 jump *label236 greaterThan :start_reactor:fuel 1
+  685 control enabled :start_reactor:reactor false
+  686 print "STOP fuel low"
+  687 print "\n"
+  688 jump *label249 always
+  689 label *label236
+  690 jump *label237 greaterThan :start_reactor:cryo .CRYO_ABORT
+  691 control enabled :start_reactor:reactor false
+  692 print "STOP out of cryo"
+  693 print "\n"
+  694 jump *label248 always
+  695 label *label237
+  696 jump *label244 greaterThanEq :start_reactor:secs 30
+  697 label *label238
+  698 op sub *tmp102 @tick :start_reactor:t_startup
+  699 op idiv :calc_charge_req:secs *tmp102 60
+  700 op greaterThan *tmp104 :calc_charge_req:secs 30
+  701 sensor *tmp105 :start_reactor:reactor @enabled
+  702 op equal *tmp106 *tmp105 false
+  703 op or *tmp107 *tmp104 *tmp106
+  704 jump *label239 equal *tmp107 false
+  705 set :calc_charge_req*retval 0
+  706 jump *label241 always
+  707 label *label239
+  708 label *label240
+  709 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
+  710 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
+  711 op idiv :calc_charge_req:charge_req *tmp110 0.04
+  712 set :calc_charge_req*retval :calc_charge_req:charge_req
+  713 jump *label241 always
+  714 label *label241
+  715 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
+  716 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  717 op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  718 op land *tmp156 *tmp154 *tmp155
+  719 jump *label242 equal *tmp156 false
+  720 control enabled :start_reactor:reactor false
+  721 print "START FAIL battery"
+  722 print "\n"
+  723 set :start_reactor:supply_fuel false
+  724 jump *label243 always
+  725 label *label242
+  726 op sub :start_reactor:time_left 30 :start_reactor:secs
+  727 print "Starting "
+  728 print :start_reactor:time_left
+  729 print " "
+  730 print "secs, req "
+  731 print :calc_charge_req*retval
+  732 print "J"
+  733 print "\n"
+  734 label *label243
+  735 jump *label247 always
+  736 label *label244
+  737 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
+  738 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  739 op land *tmp163 *tmp161 *tmp162
+  740 jump *label245 equal *tmp163 false
+  741 control enabled :start_reactor:reactor false
+  742 print "ABANDON - battery crit"
+  743 print "\n"
+  744 set :start_reactor:supply_fuel false
+  745 jump *label246 always
+  746 label *label245
+  747 op idiv :start_reactor:mins :start_reactor:secs 6
+  748 op div :start_reactor:mins :start_reactor:mins 10
+  749 print "RUN "
+  750 print :start_reactor:mins
+  751 print " "
+  752 print "mins"
+  753 print "\n"
+  754 label *label246
+  755 label *label247
+  756 label *label248
+  757 label *label249
+  758 label *label250
+  759 label *label251
+  760 jump *label265 always
+  761 label *label252
+  762 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
+  763 op sub *tmp170 *tmp169 .PWR_ABORT
+  764 op div *tmp171 *tmp170 .PWR_REQ
+  765 op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
+  766 op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  767 op max :start_reactor:flow_units -0.1 *tmp173
+  768 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
+  769 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
+  770 jump *label253 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  771 print "IDLE"
+  772 print "\n"
+  773 set :start_reactor:supply_fuel false
+  774 jump *label264 always
+  775 label *label253
+  776 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
+  777 jump *label254 greaterThanEq *tmp179 1
+  778 op idiv *tmp183 :start_reactor:flow_units 0.001
+  779 op div :start_reactor:flow *tmp183 10
+  780 op idiv *tmp186 :start_reactor:charge_units 0.001
+  781 op div :start_reactor:charge *tmp186 10
+  782 print "WAIT power. (%"
+  783 print :start_reactor:charge
+  784 print "J + %"
+  785 print :start_reactor:flow
+  786 print "W)"
+  787 print "\n"
+  788 set :start_reactor:supply_fuel false
+  789 jump *label263 always
+  790 label *label254
+  791 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
+  792 op land *tmp189 :start_reactor:fuel_on *tmp188
+  793 jump *label257 equal *tmp189 false
+  794 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
+  795 jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  796 print "WAIT fuel"
+  797 print "\n"
+  798 jump *label256 always
+  799 label *label255
+  800 print "WAIT system fuel"
+  801 print "\n"
+  802 label *label256
+  803 jump *label262 always
+  804 label *label257
+  805 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
+  806 jump *label258 greaterThanEq :start_reactor:fuel_stored *tmp194
+  807 print "WAIT buffer fuel"
+  808 print "\n"
+  809 jump *label261 always
+  810 label *label258
+  811 jump *label259 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  812 print "WAIT cryo"
+  813 print "\n"
+  814 jump *label260 always
+  815 label *label259
+  816 print "STARTUP"
+  817 print "\n"
+  818 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  819 control enabled :start_reactor:reactor true
+  820 label *label260
+  821 label *label261
+  822 label *label262
+  823 label *label263
+  824 label *label264
+  825 label *label265
+  826 label *label266
+  827 sensor *tmp201 :start_reactor:reactor @enabled
+  828 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  829 label *label267
+  830 label *label268
+  831 set :start_reactor*retval :start_reactor:supply_fuel
+  832 jump *label269 always
+  833 label *label269
   834 set :fuel_3 :start_reactor*retval
   835 set :t_startup3 .RET_T_STARTUP
   836 set :start_reactor:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   636 set :start_reactor:fuel_on :fuel_3
   637 set :start_reactor:t_startup :t_startup3
   638 label *label232
-    * set .RET_T_STARTUP :start_reactor:t_startup
-    * op sub *tmp113 @tick :start_reactor:t_startup
+  639 set .RET_T_STARTUP :t_startup3
+  640 op sub *tmp113 @tick :t_startup3
   641 op idiv :start_reactor:secs *tmp113 60
-    * sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
+  642 sensor :start_reactor:fuel reactor3 @blast-compound
   643 set :start_reactor:supply_fuel true
-    * sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
-    * sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  644 sensor :start_reactor:fuel_stored vault1 @blast-compound
+  645 sensor :start_reactor:cryo reactor3 @cryofluid
+  646 sensor *tmp118 node1 @powerNetStored
   647 op floor :start_reactor:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  648 sensor *tmp120 node1 @powerNetIn
+  649 sensor *tmp121 node1 @powerNetOut
   650 op sub *tmp122 *tmp120 *tmp121
   651 op floor :start_reactor:surplus *tmp122
   652 op mul *tmp124 .AVG_SURPLUS 0.8
   653 op mul *tmp125 :start_reactor:surplus 0.2
   654 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :start_reactor:enabled :start_reactor:reactor @enabled
+  655 sensor :start_reactor:enabled reactor3 @enabled
   656 print "#"
-    * print :start_reactor:reactor_num
+  657 print 3
   658 print " "
   659 print "- "
-    * jump *label233 equal :start_reactor:emerg_shutdown false
-    * control enabled :start_reactor:reactor false
+  660 jump *label233 equal :emerg_shutdown false
+  661 control enabled reactor3 false
   662 print "emergency mode"
   663 print "\n"
   664 set :start_reactor:supply_fuel false
   665 jump *label266 always
   666 label *label233
   667 jump *label252 equal :start_reactor:enabled false
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * control enabled :start_reactor:reactor false
+  668 jump *label234 greaterThanEq .REACTORS_DESIRED 3
+  669 control enabled reactor3 false
   670 print "STOP unwanted"
   671 print "\n"
   672 jump *label251 always
   673 label *label234
-    * op greaterThan *tmp136 :start_reactor:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
-    * op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  674 op greaterThan *tmp136 3 1
+  675 op mul *tmp137 15 3
+  676 op lessThan *tmp138 :start_reactor:fuel_stored 45
+  677 op land *tmp139 true *tmp138
   678 jump *label235 equal *tmp139 false
-    * control enabled :start_reactor:reactor false
+  679 control enabled reactor3 false
   680 print "STOP system fuel low"
   681 print "\n"
   682 jump *label250 always
   683 label *label235
   684 jump *label236 greaterThan :start_reactor:fuel 1
-    * control enabled :start_reactor:reactor false
+  685 control enabled reactor3 false
   686 print "STOP fuel low"
   687 print "\n"
   688 jump *label249 always
   689 label *label236
-    * jump *label237 greaterThan :start_reactor:cryo .CRYO_ABORT
-    * control enabled :start_reactor:reactor false
+  690 jump *label237 greaterThan :start_reactor:cryo 1
+  691 control enabled reactor3 false
   692 print "STOP out of cryo"
   693 print "\n"
   694 jump *label248 always
   695 label *label237
   696 jump *label244 greaterThanEq :start_reactor:secs 30
   697 label *label238
-    * op sub *tmp102 @tick :start_reactor:t_startup
+  698 op sub *tmp102 @tick :t_startup3
   699 op idiv :calc_charge_req:secs *tmp102 60
   700 op greaterThan *tmp104 :calc_charge_req:secs 30
-    * sensor *tmp105 :start_reactor:reactor @enabled
+  701 sensor *tmp105 reactor3 @enabled
   702 op equal *tmp106 *tmp105 false
   703 op or *tmp107 *tmp104 *tmp106
   704 jump *label239 equal *tmp107 false
 
   713 jump *label241 always
   714 label *label241
   715 op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
+  716 op lessThan *tmp154 *tmp153 5000
+  717 op lessThan *tmp155 :start_reactor:surplus -500
   718 op land *tmp156 *tmp154 *tmp155
   719 jump *label242 equal *tmp156 false
-    * control enabled :start_reactor:reactor false
+  720 control enabled reactor3 false
   721 print "START FAIL battery"
   722 print "\n"
   723 set :start_reactor:supply_fuel false
 
   734 label *label243
   735 jump *label247 always
   736 label *label244
-    * op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
-    * op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
+  737 op lessThan *tmp161 :start_reactor:charge 2000
+  738 op lessThan *tmp162 :start_reactor:surplus -500
   739 op land *tmp163 *tmp161 *tmp162
   740 jump *label245 equal *tmp163 false
-    * control enabled :start_reactor:reactor false
+  741 control enabled reactor3 false
   742 print "ABANDON - battery crit"
   743 print "\n"
   744 set :start_reactor:supply_fuel false
 
   760 jump *label265 always
   761 label *label252
   762 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :start_reactor:surplus .FLOW_REQ
+  763 op sub *tmp170 *tmp169 5000
+  764 op div *tmp171 *tmp170 23000
+  765 op mul :start_reactor:charge_units *tmp171 0.6
+  766 op div *tmp173 :start_reactor:surplus 2000
   767 op max :start_reactor:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
-    * op add :start_reactor:cryo_req .CRYO_REQ *tmp175
-    * jump *label253 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
+  768 op mul *tmp175 2 3
+  769 op add :start_reactor:cryo_req 3 6
+  770 jump *label253 greaterThanEq .REACTORS_DESIRED 3
   771 print "IDLE"
   772 print "\n"
   773 set :start_reactor:supply_fuel false
 
   788 set :start_reactor:supply_fuel false
   789 jump *label263 always
   790 label *label254
-    * op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
-    * op land *tmp189 :start_reactor:fuel_on *tmp188
+  791 op lessThan *tmp188 :start_reactor:fuel 10
+  792 op land *tmp189 :fuel_3 *tmp188
   793 jump *label257 equal *tmp189 false
   794 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
-    * jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  795 jump *label255 lessThanEq *tmp191 10
   796 print "WAIT fuel"
   797 print "\n"
   798 jump *label256 always
 
   802 label *label256
   803 jump *label262 always
   804 label *label257
-    * op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
-    * jump *label258 greaterThanEq :start_reactor:fuel_stored *tmp194
+  805 op mul *tmp194 45 3
+  806 jump *label258 greaterThanEq :start_reactor:fuel_stored 135
   807 print "WAIT buffer fuel"
   808 print "\n"
   809 jump *label261 always
   810 label *label258
-    * jump *label259 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
+  811 jump *label259 greaterThanEq :start_reactor:cryo 9
   812 print "WAIT cryo"
   813 print "\n"
   814 jump *label260 always
   815 label *label259
   816 print "STARTUP"
   817 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :start_reactor:reactor true
+  818 op add .START_POWER_REQ .START_POWER_REQ 23000
+  819 control enabled reactor3 true
   820 label *label260
   821 label *label261
   822 label *label262
 
   824 label *label264
   825 label *label265
   826 label *label266
-    * sensor *tmp201 :start_reactor:reactor @enabled
-    * select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
+  827 sensor *tmp201 reactor3 @enabled
+  828 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   829 label *label267
   830 label *label268
   831 set :start_reactor*retval :start_reactor:supply_fuel
   832 jump *label269 always
   833 label *label269
-    * set :fuel_3 :start_reactor*retval
+  834 set :fuel_3 :start_reactor:supply_fuel
   835 set :t_startup3 .RET_T_STARTUP
   836 set :start_reactor:reactor reactor4
   837 set :start_reactor:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   630 label *label130
   631 label *label131
   632 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * set :start_reactor:reactor reactor3
-    * set :start_reactor:reactor_num 3
-    * set :start_reactor:emerg_shutdown :emerg_shutdown
-    * set :start_reactor:fuel_on :fuel_3
-    * set :start_reactor:t_startup :t_startup3
   633 label *label232
   634 set .RET_T_STARTUP :t_startup3
   635 op sub *tmp113 @tick :t_startup3
 
   757 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
   758 op sub *tmp170 *tmp169 5000
   759 op div *tmp171 *tmp170 23000
-    * op mul :start_reactor:charge_units *tmp171 0.6
+  760 op div :start_reactor:charge_units *tmp170 38333.333333333336
   761 op div *tmp173 :start_reactor:surplus 2000
   762 op max :start_reactor:flow_units -0.1 *tmp173
   763 op mul *tmp175 2 3
 
   823 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   824 label *label267
   825 label *label268
-    * set :start_reactor*retval :start_reactor:supply_fuel
   826 jump *label269 always
   827 label *label269
   828 set :fuel_3 :start_reactor:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    75 control enabled projector1 false
    76 control enabled projector2 false
    77 set :check_radar*retval false
-    * jump *label127 always
    78 label *label126
    79 label *label127
    80 op notEqual *tmp9 switch1 null
 
   380 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
   381 label *label191
   382 label *label192
-    * jump *label193 always
   383 label *label193
   384 set :fuel_1 :start_reactor:supply_fuel
   385 set :t_startup1 .RET_T_STARTUP
 
   586 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
   587 label *label229
   588 label *label230
-    * jump *label231 always
   589 label *label231
   590 set :fuel_2 :start_reactor:supply_fuel
   591 set :t_startup2 .RET_T_STARTUP
 
   623 control enabled projector1 false
   624 control enabled projector2 false
   625 set :check_radar*retval false
-    * jump *label131 always
   626 label *label130
   627 label *label131
   628 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
 
   819 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
   820 label *label267
   821 label *label268
-    * jump *label269 always
   822 label *label269
   823 set :fuel_3 :start_reactor:supply_fuel
   824 set :t_startup3 .RET_T_STARTUP
 
   909 label *label34
   910 label *label30
   911 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * jump *label28 always
   912 label *label28
   913 select *tmp51 notEqual *tmp32 false @pyratite @scrap
   914 label *label35
 
   934 label *label100
   935 op idiv *tmp93 .AVG_SURPLUS 100
   936 op div :kilo*retval *tmp93 10
-    * jump *label101 always
   937 label *label101
   938 set :surplus :kilo*retval
   939 sensor :kilo:val node1 @powerNetStored
   940 label *label102
   941 op idiv *tmp93 :kilo:val 100
   942 op div :kilo*retval *tmp93 10
-    * jump *label103 always
   943 label *label103
   944 set :charge :kilo*retval
   945 jump *label42 lessThanEq .START_POWER_REQ 0
   946 label *label104
   947 op idiv *tmp93 .START_POWER_REQ 100
   948 op div :kilo*retval *tmp93 10
-    * jump *label105 always
   949 label *label105
   950 print "Req "
   951 print :kilo*retval
 
  1196 label *label95
  1197 label *label96
  1198 set :start_reactor*retval :start_reactor:supply_fuel
-    * jump *label63 always
  1199 label *label63
  1200 return :start_reactor*retaddr
  1201 end

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
   226 op greaterThan *tmp136 1 1
   227 op mul *tmp137 15 1
   228 op lessThan *tmp138 :start_reactor:fuel_stored 15
-    * op land *tmp139 false *tmp138
+  229 set *tmp139 false
   230 jump *label159 equal *tmp139 false
   231 control enabled reactor1 false
   232 print "STOP system fuel low"
 
   432 op greaterThan *tmp136 2 1
   433 op mul *tmp137 15 2
   434 op lessThan *tmp138 :start_reactor:fuel_stored 30
-    * op land *tmp139 true *tmp138
+  435 set *tmp139 *tmp138
   436 jump *label197 equal *tmp139 false
   437 control enabled reactor2 false
   438 print "STOP system fuel low"
 
   665 op greaterThan *tmp136 3 1
   666 op mul *tmp137 15 3
   667 op lessThan *tmp138 :start_reactor:fuel_stored 45
-    * op land *tmp139 true *tmp138
+  668 set *tmp139 *tmp138
   669 jump *label235 equal *tmp139 false
   670 control enabled reactor3 false
   671 print "STOP system fuel low"

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1 (-3 instructions):
 
   100 op equal *tmp106 *tmp105 false
   101 op or *tmp107 *tmp104 *tmp106
   102 jump *label133 equal *tmp107 false
-    * set :calc_charge_req*retval 0
+  103 set .START_POWER_REQ 0
   104 jump *label135 always
   105 label *label133
   106 label *label134
   107 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   108 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   109 op idiv :calc_charge_req:charge_req *tmp110 0.04
-    * set :calc_charge_req*retval :calc_charge_req:charge_req
+  110 set .START_POWER_REQ :calc_charge_req:charge_req
   111 jump *label135 always
   112 label *label135
-    * set .START_POWER_REQ :calc_charge_req*retval
   113 label *label136
   114 op sub *tmp102 @tick :t_startup2
   115 op idiv :calc_charge_req:secs *tmp102 60
 
   932 label *label37
   933 label *label100
   934 op idiv *tmp93 .AVG_SURPLUS 100
-    * op div :kilo*retval *tmp93 10
+  935 op div :surplus *tmp93 10
   936 label *label101
-    * set :surplus :kilo*retval
   937 sensor :kilo:val node1 @powerNetStored
   938 label *label102
   939 op idiv *tmp93 :kilo:val 100
 
  1005 op sub *tmp113 @tick :start_reactor:t_startup
  1006 op idiv :start_reactor:secs *tmp113 60
  1007 sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
-    * set :start_reactor:supply_fuel true
+ 1008 set :start_reactor*retval true
  1009 sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
  1010 sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
  1011 sensor *tmp118 .NODE @powerNetStored
 
  1026 control enabled :start_reactor:reactor false
  1027 print "emergency mode"
  1028 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1029 set :start_reactor*retval false
  1030 jump *label65 always
  1031 label *label64
  1032 jump *label66 equal :start_reactor:enabled false
 
  1085 control enabled :start_reactor:reactor false
  1086 print "START FAIL battery"
  1087 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1088 set :start_reactor*retval false
  1089 jump *label80 always
  1090 label *label79
  1091 op sub :start_reactor:time_left 30 :start_reactor:secs
 
  1106 control enabled :start_reactor:reactor false
  1107 print "ABANDON - battery crit"
  1108 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1109 set :start_reactor*retval false
  1110 jump *label82 always
  1111 label *label81
  1112 op idiv :start_reactor:mins :start_reactor:secs 6
 
  1135 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
  1136 print "IDLE"
  1137 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1138 set :start_reactor*retval false
  1139 jump *label84 always
  1140 label *label83
  1141 op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
 
  1150 print :start_reactor:flow
  1151 print "W)"
  1152 print "\n"
-    * set :start_reactor:supply_fuel false
+ 1153 set :start_reactor*retval false
  1154 jump *label86 always
  1155 label *label85
  1156 op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
 
  1193 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1194 label *label95
  1195 label *label96
-    * set :start_reactor*retval :start_reactor:supply_fuel
  1196 label *label63
  1197 return :start_reactor*retaddr
  1198 end

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2:
 
   226 op mul *tmp137 15 1
   227 op lessThan *tmp138 :start_reactor:fuel_stored 15
   228 set *tmp139 false
-    * jump *label159 equal *tmp139 false
+  229 jump *label159 equal false false
   230 control enabled reactor1 false
   231 print "STOP system fuel low"
   232 print "\n"
 
   432 op mul *tmp137 15 2
   433 op lessThan *tmp138 :start_reactor:fuel_stored 30
   434 set *tmp139 *tmp138
-    * jump *label197 equal *tmp139 false
+  435 jump *label197 equal *tmp138 false
   436 control enabled reactor2 false
   437 print "STOP system fuel low"
   438 print "\n"
 
   665 op mul *tmp137 15 3
   666 op lessThan *tmp138 :start_reactor:fuel_stored 45
   667 set *tmp139 *tmp138
-    * jump *label235 equal *tmp139 false
+  668 jump *label235 equal *tmp138 false
   669 control enabled reactor3 false
   670 print "STOP system fuel low"
   671 print "\n"
 
   841 label *label26
   842 set :fuel_5 :start_reactor*retval
   843 set :t_startup5 .RET_T_STARTUP
-    * op or *tmp27 :fuel_3 :fuel_4
+  844 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   845 op or :fuel_many *tmp27 :start_reactor*retval
   846 label *label118
   847 select *tmp97 notEqual :fuel_many false @blast-compound @scrap

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1:
 
   226 op mul *tmp137 15 1
   227 op lessThan *tmp138 :start_reactor:fuel_stored 15
   228 set *tmp139 false
-    * jump *label159 equal false false
+  229 jump *label159 always
   230 control enabled reactor1 false
   231 print "STOP system fuel low"
   232 print "\n"

Modifications by Jumps phase, Jump Normalization, pass 5, iteration 1:
 
    51 set .TOWER cyclone1
    52 set .CONTAINER vault1
    53 set .NODE node1
-    * label *label124
    54 radar enemy any any health cyclone1 1 :check_radar:enemy_found
    55 jump *label125 equal :check_radar:enemy_found null
    56 control enabled projector1 true
 
    86 set *tmp8 true
    87 jump *label11 always
    88 label *label12
-    * label *label13
    89 set *tmp8 false
    90 jump *label11 always
    91 label *label11
    92 op or :emerg_shutdown :check_radar*retval *tmp8
-    * label *label132
    93 op sub *tmp102 @tick :t_startup1
    94 op idiv :calc_charge_req:secs *tmp102 60
    95 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   100 set .START_POWER_REQ 0
   101 jump *label135 always
   102 label *label133
-    * label *label134
   103 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   104 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   105 op idiv :calc_charge_req:charge_req *tmp110 0.04
   106 set .START_POWER_REQ :calc_charge_req:charge_req
   107 jump *label135 always
   108 label *label135
-    * label *label136
   109 op sub *tmp102 @tick :t_startup2
   110 op idiv :calc_charge_req:secs *tmp102 60
   111 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   116 set :calc_charge_req*retval 0
   117 jump *label139 always
   118 label *label137
-    * label *label138
   119 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   120 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   121 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   123 jump *label139 always
   124 label *label139
   125 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label140
   126 op sub *tmp102 @tick :t_startup3
   127 op idiv :calc_charge_req:secs *tmp102 60
   128 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   133 set :calc_charge_req*retval 0
   134 jump *label143 always
   135 label *label141
-    * label *label142
   136 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   137 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   138 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   140 jump *label143 always
   141 label *label143
   142 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label144
   143 op sub *tmp102 @tick :t_startup4
   144 op idiv :calc_charge_req:secs *tmp102 60
   145 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   150 set :calc_charge_req*retval 0
   151 jump *label147 always
   152 label *label145
-    * label *label146
   153 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   154 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   155 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   157 jump *label147 always
   158 label *label147
   159 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label148
   160 op sub *tmp102 @tick :t_startup5
   161 op idiv :calc_charge_req:secs *tmp102 60
   162 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   167 set :calc_charge_req*retval 0
   168 jump *label151 always
   169 label *label149
-    * label *label150
   170 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   171 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   172 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   174 jump *label151 always
   175 label *label151
   176 op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
-    * label *label156
   177 set .RET_T_STARTUP :t_startup1
   178 op sub *tmp113 @tick :t_startup1
   179 op idiv :start_reactor:secs *tmp113 60
 
   232 jump *label172 always
   233 label *label161
   234 jump *label168 greaterThanEq :start_reactor:secs 30
-    * label *label162
   235 op sub *tmp102 @tick :t_startup1
   236 op idiv :calc_charge_req:secs *tmp102 60
   237 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   242 set :calc_charge_req*retval 0
   243 jump *label165 always
   244 label *label163
-    * label *label164
   245 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   246 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   247 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   362 label *label190
   363 sensor *tmp201 reactor1 @enabled
   364 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
-    * label *label191
-    * label *label192
-    * label *label193
   365 set :fuel_1 :start_reactor:supply_fuel
   366 set :t_startup1 .RET_T_STARTUP
-    * label *label106
   367 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label107
-    * label *label108
   368 control config unloader1 *tmp97
   369 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label109
-    * label *label110
   370 control config unloader2 *tmp101
-    * label *label111
-    * label *label194
   371 set .RET_T_STARTUP :t_startup2
   372 op sub *tmp113 @tick :t_startup2
   373 op idiv :start_reactor:secs *tmp113 60
 
   426 jump *label210 always
   427 label *label199
   428 jump *label206 greaterThanEq :start_reactor:secs 30
-    * label *label200
   429 op sub *tmp102 @tick :t_startup2
   430 op idiv :calc_charge_req:secs *tmp102 60
   431 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   436 set :calc_charge_req*retval 0
   437 jump *label203 always
   438 label *label201
-    * label *label202
   439 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   440 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   441 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   556 label *label228
   557 sensor *tmp201 reactor2 @enabled
   558 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
-    * label *label229
-    * label *label230
-    * label *label231
   559 set :fuel_2 :start_reactor:supply_fuel
   560 set :t_startup2 .RET_T_STARTUP
-    * label *label112
   561 select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label113
-    * label *label114
   562 control config unloader3 *tmp97
   563 select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
-    * label *label115
-    * label *label116
   564 control config unloader4 *tmp101
-    * label *label117
-    * label *label128
   565 radar enemy any any health cyclone1 1 :check_radar:enemy_found
   566 jump *label129 equal :check_radar:enemy_found null
   567 control enabled projector1 true
 
   588 label *label130
   589 label *label131
   590 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
-    * label *label232
   591 set .RET_T_STARTUP :t_startup3
   592 op sub *tmp113 @tick :t_startup3
   593 op idiv :start_reactor:secs *tmp113 60
 
   646 jump *label248 always
   647 label *label237
   648 jump *label244 greaterThanEq :start_reactor:secs 30
-    * label *label238
   649 op sub *tmp102 @tick :t_startup3
   650 op idiv :calc_charge_req:secs *tmp102 60
   651 op greaterThan *tmp104 :calc_charge_req:secs 30
 
   656 set :calc_charge_req*retval 0
   657 jump *label241 always
   658 label *label239
-    * label *label240
   659 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
   660 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
   661 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
   776 label *label266
   777 sensor *tmp201 reactor3 @enabled
   778 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
-    * label *label267
-    * label *label268
-    * label *label269
   779 set :fuel_3 :start_reactor:supply_fuel
   780 set :t_startup3 .RET_T_STARTUP
   781 set :start_reactor:reactor reactor4
 
   800 set :t_startup5 .RET_T_STARTUP
   801 op or *tmp27 :start_reactor:supply_fuel :fuel_4
   802 op or :fuel_many *tmp27 :start_reactor*retval
-    * label *label118
   803 select *tmp97 notEqual :fuel_many false @blast-compound @scrap
-    * label *label119
-    * label *label120
   804 control config unloader5 *tmp97
   805 select *tmp101 equal :fuel_many false @blast-compound @scrap
-    * label *label121
-    * label *label122
   806 control config unloader6 *tmp101
-    * label *label123
   807 op or *tmp30 :fuel_1 :fuel_2
   808 op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
   809 sensor *tmp33 node1 @powerNetStored
 
   859 label *label34
   860 label *label30
   861 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
-    * label *label28
   862 select *tmp51 notEqual *tmp32 false @pyratite @scrap
-    * label *label35
-    * label *label36
   863 control config unloader7 *tmp51
   864 sensor *tmp53 node1 @powerNetStored
   865 sensor *tmp54 node1 @powerNetCapacity
 
   877 control enabled generator1 true
   878 control enabled generator2 true
   879 label *label39
-    * label *label37
-    * label *label100
   880 op idiv *tmp93 .AVG_SURPLUS 100
   881 op div :surplus *tmp93 10
-    * label *label101
   882 sensor :kilo:val node1 @powerNetStored
-    * label *label102
   883 op idiv *tmp93 :kilo:val 100
   884 op div :kilo*retval *tmp93 10
-    * label *label103
   885 set :charge :kilo*retval
   886 jump *label42 lessThanEq .START_POWER_REQ 0
-    * label *label104
   887 op idiv *tmp93 .START_POWER_REQ 100
   888 op div :kilo*retval *tmp93 10
-    * label *label105
   889 print "Req "
   890 print :kilo*retval
   891 print "kJ / "
 
   913 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   914 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   915 label *label48
-    * label *label49
   916 label *label46
-    * label *label47
   917 op lessThan *tmp81 :update_reactors_desired:stored 0.8
   918 op lessThan *tmp83 .AVG_SURPLUS 8000
   919 op land *tmp84 *tmp81 *tmp83
 
   924 op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
   925 op min .REACTORS_DESIRED 5 *tmp89
   926 label *label50
-    * label *label51
-    * label *label45
   927 label *label43
   928 jump *label52 equal .REACTORS_DESIRED 5
   929 print "Require only "
 
   931 print "/5 reactors."
   932 print "\n"
   933 label *label52
-    * label *label53
   934 printflush message1
-    * label *label8
   935 jump *label7 always
-    * label *label9
   936 end
   937 label *label3
   938 set .RET_T_STARTUP :start_reactor:t_startup
 
   993 jump *label75 always
   994 label *label74
   995 jump *label76 greaterThanEq :start_reactor:secs 30
-    * label *label152
   996 op sub *tmp102 @tick :start_reactor:t_startup
   997 op idiv :calc_charge_req:secs *tmp102 60
   998 op greaterThan *tmp104 :calc_charge_req:secs 30
 
  1003 set :calc_charge_req*retval 0
  1004 jump *label155 always
  1005 label *label153
-    * label *label154
  1006 op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
  1007 op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
  1008 op idiv :calc_charge_req:charge_req *tmp110 0.04
 
  1123 label *label65
  1124 sensor *tmp201 :start_reactor:reactor @enabled
  1125 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
-    * label *label95
-    * label *label96
-    * label *label63
  1126 return :start_reactor*retaddr
  1127 end

Modifications by Jumps phase, Jump Threading, pass 5, iteration 1:
 
   207 control enabled reactor1 false
   208 print "STOP unwanted"
   209 print "\n"
-    * jump *label175 always
+  210 jump *label189 always
   211 label *label158
   212 op greaterThan *tmp136 1 1
   213 op mul *tmp137 15 1
 
   217 control enabled reactor1 false
   218 print "STOP system fuel low"
   219 print "\n"
-    * jump *label174 always
+  220 jump *label189 always
   221 label *label159
   222 jump *label160 greaterThan :start_reactor:fuel 1
   223 control enabled reactor1 false
   224 print "STOP fuel low"
   225 print "\n"
-    * jump *label173 always
+  226 jump *label189 always
   227 label *label160
   228 jump *label161 greaterThan :start_reactor:cryo 1
   229 control enabled reactor1 false
   230 print "STOP out of cryo"
   231 print "\n"
-    * jump *label172 always
+  232 jump *label189 always
   233 label *label161
   234 jump *label168 greaterThanEq :start_reactor:secs 30
   235 op sub *tmp102 @tick :t_startup1
 
   257 print "START FAIL battery"
   258 print "\n"
   259 set :start_reactor:supply_fuel false
-    * jump *label167 always
+  260 jump *label189 always
   261 label *label166
   262 op sub :start_reactor:time_left 30 :start_reactor:secs
   263 print "Starting "
 
   268 print "J"
   269 print "\n"
   270 label *label167
-    * jump *label171 always
+  271 jump *label189 always
   272 label *label168
   273 op lessThan *tmp161 :start_reactor:charge 2000
   274 op lessThan *tmp162 :start_reactor:surplus -500
 
   278 print "ABANDON - battery crit"
   279 print "\n"
   280 set :start_reactor:supply_fuel false
-    * jump *label170 always
+  281 jump *label189 always
   282 label *label169
   283 op idiv :start_reactor:mins :start_reactor:secs 6
   284 op div :start_reactor:mins :start_reactor:mins 10
 
   331 jump *label179 lessThanEq *tmp191 10
   332 print "WAIT fuel"
   333 print "\n"
-    * jump *label180 always
+  334 jump *label186 always
   335 label *label179
   336 print "WAIT system fuel"
   337 print "\n"
 
   401 control enabled reactor2 false
   402 print "STOP unwanted"
   403 print "\n"
-    * jump *label213 always
+  404 jump *label227 always
   405 label *label196
   406 op greaterThan *tmp136 2 1
   407 op mul *tmp137 15 2
 
   411 control enabled reactor2 false
   412 print "STOP system fuel low"
   413 print "\n"
-    * jump *label212 always
+  414 jump *label227 always
   415 label *label197
   416 jump *label198 greaterThan :start_reactor:fuel 1
   417 control enabled reactor2 false
   418 print "STOP fuel low"
   419 print "\n"
-    * jump *label211 always
+  420 jump *label227 always
   421 label *label198
   422 jump *label199 greaterThan :start_reactor:cryo 1
   423 control enabled reactor2 false
   424 print "STOP out of cryo"
   425 print "\n"
-    * jump *label210 always
+  426 jump *label227 always
   427 label *label199
   428 jump *label206 greaterThanEq :start_reactor:secs 30
   429 op sub *tmp102 @tick :t_startup2
 
   451 print "START FAIL battery"
   452 print "\n"
   453 set :start_reactor:supply_fuel false
-    * jump *label205 always
+  454 jump *label227 always
   455 label *label204
   456 op sub :start_reactor:time_left 30 :start_reactor:secs
   457 print "Starting "
 
   462 print "J"
   463 print "\n"
   464 label *label205
-    * jump *label209 always
+  465 jump *label227 always
   466 label *label206
   467 op lessThan *tmp161 :start_reactor:charge 2000
   468 op lessThan *tmp162 :start_reactor:surplus -500
 
   472 print "ABANDON - battery crit"
   473 print "\n"
   474 set :start_reactor:supply_fuel false
-    * jump *label208 always
+  475 jump *label227 always
   476 label *label207
   477 op idiv :start_reactor:mins :start_reactor:secs 6
   478 op div :start_reactor:mins :start_reactor:mins 10
 
   525 jump *label217 lessThanEq *tmp191 10
   526 print "WAIT fuel"
   527 print "\n"
-    * jump *label218 always
+  528 jump *label224 always
   529 label *label217
   530 print "WAIT system fuel"
   531 print "\n"
 
   621 control enabled reactor3 false
   622 print "STOP unwanted"
   623 print "\n"
-    * jump *label251 always
+  624 jump *label265 always
   625 label *label234
   626 op greaterThan *tmp136 3 1
   627 op mul *tmp137 15 3
 
   631 control enabled reactor3 false
   632 print "STOP system fuel low"
   633 print "\n"
-    * jump *label250 always
+  634 jump *label265 always
   635 label *label235
   636 jump *label236 greaterThan :start_reactor:fuel 1
   637 control enabled reactor3 false
   638 print "STOP fuel low"
   639 print "\n"
-    * jump *label249 always
+  640 jump *label265 always
   641 label *label236
   642 jump *label237 greaterThan :start_reactor:cryo 1
   643 control enabled reactor3 false
   644 print "STOP out of cryo"
   645 print "\n"
-    * jump *label248 always
+  646 jump *label265 always
   647 label *label237
   648 jump *label244 greaterThanEq :start_reactor:secs 30
   649 op sub *tmp102 @tick :t_startup3
 
   671 print "START FAIL battery"
   672 print "\n"
   673 set :start_reactor:supply_fuel false
-    * jump *label243 always
+  674 jump *label265 always
   675 label *label242
   676 op sub :start_reactor:time_left 30 :start_reactor:secs
   677 print "Starting "
 
   682 print "J"
   683 print "\n"
   684 label *label243
-    * jump *label247 always
+  685 jump *label265 always
   686 label *label244
   687 op lessThan *tmp161 :start_reactor:charge 2000
   688 op lessThan *tmp162 :start_reactor:surplus -500
 
   692 print "ABANDON - battery crit"
   693 print "\n"
   694 set :start_reactor:supply_fuel false
-    * jump *label246 always
+  695 jump *label265 always
   696 label *label245
   697 op idiv :start_reactor:mins :start_reactor:secs 6
   698 op div :start_reactor:mins :start_reactor:mins 10
 
   745 jump *label255 lessThanEq *tmp191 10
   746 print "WAIT fuel"
   747 print "\n"
-    * jump *label256 always
+  748 jump *label262 always
   749 label *label255
   750 print "WAIT system fuel"
   751 print "\n"
 
   829 jump *label31 equal :emerg_shutdown false
   830 print " Enemies detected."
   831 print "\n"
-    * jump *label32 always
+  832 jump *label30 always
   833 label *label31
   834 print " Critical power."
   835 print "\n"
 
   968 control enabled :start_reactor:reactor false
   969 print "STOP unwanted"
   970 print "\n"
-    * jump *label69 always
+  971 jump *label67 always
   972 label *label68
   973 op greaterThan *tmp136 :start_reactor:reactor_num 1
   974 op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
 
   978 control enabled :start_reactor:reactor false
   979 print "STOP system fuel low"
   980 print "\n"
-    * jump *label71 always
+  981 jump *label67 always
   982 label *label70
   983 jump *label72 greaterThan :start_reactor:fuel 1
   984 control enabled :start_reactor:reactor false
   985 print "STOP fuel low"
   986 print "\n"
-    * jump *label73 always
+  987 jump *label67 always
   988 label *label72
   989 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   990 control enabled :start_reactor:reactor false
   991 print "STOP out of cryo"
   992 print "\n"
-    * jump *label75 always
+  993 jump *label67 always
   994 label *label74
   995 jump *label76 greaterThanEq :start_reactor:secs 30
   996 op sub *tmp102 @tick :start_reactor:t_startup
 
  1018 print "START FAIL battery"
  1019 print "\n"
  1020 set :start_reactor*retval false
-    * jump *label80 always
+ 1021 jump *label67 always
  1022 label *label79
  1023 op sub :start_reactor:time_left 30 :start_reactor:secs
  1024 print "Starting "
 
  1029 print "J"
  1030 print "\n"
  1031 label *label80
-    * jump *label77 always
+ 1032 jump *label67 always
  1033 label *label76
  1034 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
  1035 op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
 
  1039 print "ABANDON - battery crit"
  1040 print "\n"
  1041 set :start_reactor*retval false
-    * jump *label82 always
+ 1042 jump *label67 always
  1043 label *label81
  1044 op idiv :start_reactor:mins :start_reactor:secs 6
  1045 op div :start_reactor:mins :start_reactor:mins 10
 
  1092 jump *label89 lessThanEq *tmp191 .FUEL_REQ
  1093 print "WAIT fuel"
  1094 print "\n"
-    * jump *label90 always
+ 1095 jump *label88 always
  1096 label *label89
  1097 print "WAIT system fuel"
  1098 print "\n"

Modifications by Jumps phase, Unreachable Code Elimination, pass 5, iteration 1 (-8 instructions):
 
    69 control enabled reactor5 false
    70 set :check_radar*retval true
    71 jump *label127 always
-    * jump *label126 always
    72 label *label125
    73 control enabled projector1 false
    74 control enabled projector2 false
 
   213 op lessThan *tmp138 :start_reactor:fuel_stored 15
   214 set *tmp139 false
   215 jump *label159 always
-    * control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
-    * jump *label189 always
   216 label *label159
   217 jump *label160 greaterThan :start_reactor:fuel 1
   218 control enabled reactor1 false
 
   262 print :calc_charge_req*retval
   263 print "J"
   264 print "\n"
-    * label *label167
   265 jump *label189 always
   266 label *label168
   267 op lessThan *tmp161 :start_reactor:charge 2000
 
   281 print " "
   282 print "mins"
   283 print "\n"
-    * label *label170
-    * label *label171
-    * label *label172
-    * label *label173
-    * label *label174
-    * label *label175
   284 jump *label189 always
   285 label *label176
   286 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   323 label *label179
   324 print "WAIT system fuel"
   325 print "\n"
-    * label *label180
   326 jump *label186 always
   327 label *label181
   328 op mul *tmp194 45 1
 
   448 print :calc_charge_req*retval
   449 print "J"
   450 print "\n"
-    * label *label205
   451 jump *label227 always
   452 label *label206
   453 op lessThan *tmp161 :start_reactor:charge 2000
 
   467 print " "
   468 print "mins"
   469 print "\n"
-    * label *label208
-    * label *label209
-    * label *label210
-    * label *label211
-    * label *label212
-    * label *label213
   470 jump *label227 always
   471 label *label214
   472 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   509 label *label217
   510 print "WAIT system fuel"
   511 print "\n"
-    * label *label218
   512 jump *label224 always
   513 label *label219
   514 op mul *tmp194 45 2
 
   559 control enabled reactor5 false
   560 set :check_radar*retval true
   561 jump *label131 always
-    * jump *label130 always
   562 label *label129
   563 control enabled projector1 false
   564 control enabled projector2 false
 
   659 print :calc_charge_req*retval
   660 print "J"
   661 print "\n"
-    * label *label243
   662 jump *label265 always
   663 label *label244
   664 op lessThan *tmp161 :start_reactor:charge 2000
 
   678 print " "
   679 print "mins"
   680 print "\n"
-    * label *label246
-    * label *label247
-    * label *label248
-    * label *label249
-    * label *label250
-    * label *label251
   681 jump *label265 always
   682 label *label252
   683 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   720 label *label255
   721 print "WAIT system fuel"
   722 print "\n"
-    * label *label256
   723 jump *label262 always
   724 label *label257
   725 op mul *tmp194 45 3
 
   803 label *label31
   804 print " Critical power."
   805 print "\n"
-    * label *label32
   806 jump *label30 always
   807 label *label29
   808 jump *label33 notEqual :throttle_blast:reactors_fueled false
 
   902 label *label52
   903 printflush message1
   904 jump *label7 always
-    * end
   905 label *label3
   906 set .RET_T_STARTUP :start_reactor:t_startup
   907 op sub *tmp113 @tick :start_reactor:t_startup
 
   996 print :calc_charge_req*retval
   997 print "J"
   998 print "\n"
-    * label *label80
   999 jump *label67 always
  1000 label *label76
  1001 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
  1015 print " "
  1016 print "mins"
  1017 print "\n"
-    * label *label82
-    * label *label77
-    * label *label75
-    * label *label73
-    * label *label71
-    * label *label69
  1018 jump *label67 always
  1019 label *label66
  1020 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
  1057 label *label89
  1058 print "WAIT system fuel"
  1059 print "\n"
-    * label *label90
  1060 jump *label88 always
  1061 label *label87
  1062 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
 
  1084 sensor *tmp201 :start_reactor:reactor @enabled
  1085 select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
  1086 return :start_reactor*retaddr
-    * end

Modifications by Jumps phase, Dead Code Elimination, pass 5, iteration 1 (-15 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
     6 set .FLOW_ABORT -500
     7 set .FUEL_REQ 10
     8 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
     9 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    10 set .CRYO_REQ 3
    11 set .CRYO_REQ_EA 2
    12 set .CRYO_ABORT 1
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    37 set .CONTAINER vault1
    38 set .NODE node1
    39 radar enemy any any health cyclone1 1 :check_radar:enemy_found
 
    58 control enabled projector1 false
    59 control enabled projector2 false
    60 set :check_radar*retval false
-    * label *label126
    61 label *label127
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
 
   547 control enabled projector1 false
   548 control enabled projector2 false
   549 set :check_radar*retval false
-    * label *label130
   550 label *label131
   551 op or :emerg_shutdown :emerg_shutdown :check_radar*retval
   552 set .RET_T_STARTUP :t_startup3

Modifications by Jumps phase, Single Step Elimination, pass 5, iteration 1 (-1 instructions):
 
   196 op mul *tmp137 15 1
   197 op lessThan *tmp138 :start_reactor:fuel_stored 15
   198 set *tmp139 false
-    * jump *label159 always
   199 label *label159
   200 jump *label160 greaterThan :start_reactor:fuel 1
   201 control enabled reactor1 false

Modifications by Jumps phase, Jump Normalization, pass 6, iteration 1:
 
   196 op mul *tmp137 15 1
   197 op lessThan *tmp138 :start_reactor:fuel_stored 15
   198 set *tmp139 false
-    * label *label159
   199 jump *label160 greaterThan :start_reactor:fuel 1
   200 control enabled reactor1 false
   201 print "STOP fuel low"

Modifications by Final phase, Print Merging, iteration 1 (-131 instructions):
 
    64 op equal *tmp11 *tmp10 false
    65 op land *tmp12 *tmp9 *tmp11
    66 jump *label12 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   67 print "User has disabled emergency switch\n"
    68 set *tmp8 true
    69 jump *label11 always
    70 label *label12
 
   173 op mul *tmp125 :start_reactor:surplus 0.2
   174 op add .AVG_SURPLUS *tmp124 *tmp125
   175 sensor :start_reactor:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  176 print "#1 - "
   177 jump *label157 equal :emerg_shutdown false
   178 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  179 print "emergency mode\n"
   180 set :start_reactor:supply_fuel false
   181 jump *label190 always
   182 label *label157
   183 jump *label176 equal :start_reactor:enabled false
   184 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   185 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  186 print "STOP unwanted\n"
   187 jump *label189 always
   188 label *label158
   189 op greaterThan *tmp136 1 1
 
   192 set *tmp139 false
   193 jump *label160 greaterThan :start_reactor:fuel 1
   194 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  195 print "STOP fuel low\n"
   196 jump *label189 always
   197 label *label160
   198 jump *label161 greaterThan :start_reactor:cryo 1
   199 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  200 print "STOP out of cryo\n"
   201 jump *label189 always
   202 label *label161
   203 jump *label168 greaterThanEq :start_reactor:secs 30
 
   223 op land *tmp156 *tmp154 *tmp155
   224 jump *label166 equal *tmp156 false
   225 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  226 print "START FAIL battery\n"
   227 set :start_reactor:supply_fuel false
   228 jump *label189 always
   229 label *label166
   230 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  231 print "Starting {0} secs, req {0}J\n"
+  232 format :start_reactor:time_left
+  233 format :calc_charge_req*retval
   234 jump *label189 always
   235 label *label168
   236 op lessThan *tmp161 :start_reactor:charge 2000
 
   238 op land *tmp163 *tmp161 *tmp162
   239 jump *label169 equal *tmp163 false
   240 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  241 print "ABANDON - battery crit\n"
   242 set :start_reactor:supply_fuel false
   243 jump *label189 always
   244 label *label169
   245 op idiv :start_reactor:mins :start_reactor:secs 6
   246 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  247 print "RUN {0} mins\n"
+  248 format :start_reactor:mins
   249 jump *label189 always
   250 label *label176
   251 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   257 op mul *tmp175 2 1
   258 op add :start_reactor:cryo_req 3 2
   259 jump *label177 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  260 print "IDLE\n"
   261 set :start_reactor:supply_fuel false
   262 jump *label188 always
   263 label *label177
 
   267 op div :start_reactor:flow *tmp183 10
   268 op idiv *tmp186 :start_reactor:charge_units 0.001
   269 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  270 print "WAIT power. (%{0}J + %{0}W)\n"
+  271 format :start_reactor:charge
+  272 format :start_reactor:flow
   273 set :start_reactor:supply_fuel false
   274 jump *label187 always
   275 label *label178
 
   278 jump *label181 equal *tmp189 false
   279 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   280 jump *label179 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  281 print "WAIT fuel\n"
   282 jump *label186 always
   283 label *label179
-    * print "WAIT system fuel"
-    * print "\n"
+  284 print "WAIT system fuel\n"
   285 jump *label186 always
   286 label *label181
   287 op mul *tmp194 45 1
   288 jump *label182 greaterThanEq :start_reactor:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  289 print "WAIT buffer fuel\n"
   290 jump *label185 always
   291 label *label182
   292 jump *label183 greaterThanEq :start_reactor:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  293 print "WAIT cryo\n"
   294 jump *label184 always
   295 label *label183
-    * print "STARTUP"
-    * print "\n"
+  296 print "STARTUP\n"
   297 op add .START_POWER_REQ .START_POWER_REQ 23000
   298 control enabled reactor1 true
   299 label *label184
 
   328 op mul *tmp125 :start_reactor:surplus 0.2
   329 op add .AVG_SURPLUS *tmp124 *tmp125
   330 sensor :start_reactor:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  331 print "#2 - "
   332 jump *label195 equal :emerg_shutdown false
   333 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  334 print "emergency mode\n"
   335 set :start_reactor:supply_fuel false
   336 jump *label228 always
   337 label *label195
   338 jump *label214 equal :start_reactor:enabled false
   339 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   340 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  341 print "STOP unwanted\n"
   342 jump *label227 always
   343 label *label196
   344 op greaterThan *tmp136 2 1
 
   347 set *tmp139 *tmp138
   348 jump *label197 equal *tmp138 false
   349 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  350 print "STOP system fuel low\n"
   351 jump *label227 always
   352 label *label197
   353 jump *label198 greaterThan :start_reactor:fuel 1
   354 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  355 print "STOP fuel low\n"
   356 jump *label227 always
   357 label *label198
   358 jump *label199 greaterThan :start_reactor:cryo 1
   359 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  360 print "STOP out of cryo\n"
   361 jump *label227 always
   362 label *label199
   363 jump *label206 greaterThanEq :start_reactor:secs 30
 
   383 op land *tmp156 *tmp154 *tmp155
   384 jump *label204 equal *tmp156 false
   385 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  386 print "START FAIL battery\n"
   387 set :start_reactor:supply_fuel false
   388 jump *label227 always
   389 label *label204
   390 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  391 print "Starting {0} secs, req {0}J\n"
+  392 format :start_reactor:time_left
+  393 format :calc_charge_req*retval
   394 jump *label227 always
   395 label *label206
   396 op lessThan *tmp161 :start_reactor:charge 2000
 
   398 op land *tmp163 *tmp161 *tmp162
   399 jump *label207 equal *tmp163 false
   400 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  401 print "ABANDON - battery crit\n"
   402 set :start_reactor:supply_fuel false
   403 jump *label227 always
   404 label *label207
   405 op idiv :start_reactor:mins :start_reactor:secs 6
   406 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  407 print "RUN {0} mins\n"
+  408 format :start_reactor:mins
   409 jump *label227 always
   410 label *label214
   411 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   417 op mul *tmp175 2 2
   418 op add :start_reactor:cryo_req 3 4
   419 jump *label215 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  420 print "IDLE\n"
   421 set :start_reactor:supply_fuel false
   422 jump *label226 always
   423 label *label215
 
   427 op div :start_reactor:flow *tmp183 10
   428 op idiv *tmp186 :start_reactor:charge_units 0.001
   429 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  430 print "WAIT power. (%{0}J + %{0}W)\n"
+  431 format :start_reactor:charge
+  432 format :start_reactor:flow
   433 set :start_reactor:supply_fuel false
   434 jump *label225 always
   435 label *label216
 
   438 jump *label219 equal *tmp189 false
   439 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   440 jump *label217 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  441 print "WAIT fuel\n"
   442 jump *label224 always
   443 label *label217
-    * print "WAIT system fuel"
-    * print "\n"
+  444 print "WAIT system fuel\n"
   445 jump *label224 always
   446 label *label219
   447 op mul *tmp194 45 2
   448 jump *label220 greaterThanEq :start_reactor:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  449 print "WAIT buffer fuel\n"
   450 jump *label223 always
   451 label *label220
   452 jump *label221 greaterThanEq :start_reactor:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  453 print "WAIT cryo\n"
   454 jump *label222 always
   455 label *label221
-    * print "STARTUP"
-    * print "\n"
+  456 print "STARTUP\n"
   457 op add .START_POWER_REQ .START_POWER_REQ 23000
   458 control enabled reactor2 true
   459 label *label222
 
   512 op mul *tmp125 :start_reactor:surplus 0.2
   513 op add .AVG_SURPLUS *tmp124 *tmp125
   514 sensor :start_reactor:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  515 print "#3 - "
   516 jump *label233 equal :emerg_shutdown false
   517 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  518 print "emergency mode\n"
   519 set :start_reactor:supply_fuel false
   520 jump *label266 always
   521 label *label233
   522 jump *label252 equal :start_reactor:enabled false
   523 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   524 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  525 print "STOP unwanted\n"
   526 jump *label265 always
   527 label *label234
   528 op greaterThan *tmp136 3 1
 
   531 set *tmp139 *tmp138
   532 jump *label235 equal *tmp138 false
   533 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  534 print "STOP system fuel low\n"
   535 jump *label265 always
   536 label *label235
   537 jump *label236 greaterThan :start_reactor:fuel 1
   538 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  539 print "STOP fuel low\n"
   540 jump *label265 always
   541 label *label236
   542 jump *label237 greaterThan :start_reactor:cryo 1
   543 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  544 print "STOP out of cryo\n"
   545 jump *label265 always
   546 label *label237
   547 jump *label244 greaterThanEq :start_reactor:secs 30
 
   567 op land *tmp156 *tmp154 *tmp155
   568 jump *label242 equal *tmp156 false
   569 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  570 print "START FAIL battery\n"
   571 set :start_reactor:supply_fuel false
   572 jump *label265 always
   573 label *label242
   574 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  575 print "Starting {0} secs, req {0}J\n"
+  576 format :start_reactor:time_left
+  577 format :calc_charge_req*retval
   578 jump *label265 always
   579 label *label244
   580 op lessThan *tmp161 :start_reactor:charge 2000
 
   582 op land *tmp163 *tmp161 *tmp162
   583 jump *label245 equal *tmp163 false
   584 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  585 print "ABANDON - battery crit\n"
   586 set :start_reactor:supply_fuel false
   587 jump *label265 always
   588 label *label245
   589 op idiv :start_reactor:mins :start_reactor:secs 6
   590 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  591 print "RUN {0} mins\n"
+  592 format :start_reactor:mins
   593 jump *label265 always
   594 label *label252
   595 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   601 op mul *tmp175 2 3
   602 op add :start_reactor:cryo_req 3 6
   603 jump *label253 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  604 print "IDLE\n"
   605 set :start_reactor:supply_fuel false
   606 jump *label264 always
   607 label *label253
 
   611 op div :start_reactor:flow *tmp183 10
   612 op idiv *tmp186 :start_reactor:charge_units 0.001
   613 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  614 print "WAIT power. (%{0}J + %{0}W)\n"
+  615 format :start_reactor:charge
+  616 format :start_reactor:flow
   617 set :start_reactor:supply_fuel false
   618 jump *label263 always
   619 label *label254
 
   622 jump *label257 equal *tmp189 false
   623 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   624 jump *label255 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  625 print "WAIT fuel\n"
   626 jump *label262 always
   627 label *label255
-    * print "WAIT system fuel"
-    * print "\n"
+  628 print "WAIT system fuel\n"
   629 jump *label262 always
   630 label *label257
   631 op mul *tmp194 45 3
   632 jump *label258 greaterThanEq :start_reactor:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  633 print "WAIT buffer fuel\n"
   634 jump *label261 always
   635 label *label258
   636 jump *label259 greaterThanEq :start_reactor:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  637 print "WAIT cryo\n"
   638 jump *label260 always
   639 label *label259
-    * print "STARTUP"
-    * print "\n"
+  640 print "STARTUP\n"
   641 op add .START_POWER_REQ .START_POWER_REQ 23000
   642 control enabled reactor3 true
   643 label *label260
 
   692 op or *tmp43 *tmp42 :emerg_shutdown
   693 jump *label29 equal *tmp43 false
   694 set :throttle_blast:limit 0
-    * print "Central Fuel at "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  695 print "Central Fuel at {0} / 0 - "
+  696 format :throttle_blast:fuel_stored
   697 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  698 print " Enemies detected.\n"
   699 jump *label30 always
   700 label *label31
-    * print " Critical power."
-    * print "\n"
+  701 print " Critical power.\n"
   702 jump *label30 always
   703 label *label29
   704 jump *label33 notEqual :throttle_blast:reactors_fueled false
   705 set :throttle_blast:limit 150
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  706 print "Fuel {0} / 150 (due to emergency)\n"
+  707 format :throttle_blast:fuel_stored
   708 jump *label34 always
   709 label *label33
   710 set :throttle_blast:limit 800
-    * print "Fuel "
-    * print :throttle_blast:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  711 print "Fuel {0} / 800\n"
+  712 format :throttle_blast:fuel_stored
   713 label *label34
   714 label *label30
   715 op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
 
   722 op lessThan *tmp57 .START_POWER_REQ 10
   723 op land *tmp58 *tmp56 *tmp57
   724 jump *label38 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  725 print "Differential now idle.\n"
   726 control enabled generator1 false
   727 control enabled generator2 false
   728 jump *label39 always
 
   739 jump *label42 lessThanEq .START_POWER_REQ 0
   740 op idiv *tmp93 .START_POWER_REQ 100
   741 op div :kilo*retval *tmp93 10
-    * print "Req "
-    * print :kilo*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  742 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  743 format :kilo*retval
+  744 format :charge
+  745 format :surplus
   746 jump *label43 always
   747 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :kilo*retval
-    * print "kJ"
-    * print "\n"
+  748 print "Power {0}kW, {0}kJ\n"
+  749 format :surplus
+  750 format :kilo*retval
   751 sensor *tmp71 node1 @powerNetStored
   752 sensor *tmp72 node1 @powerNetCapacity
   753 op div :update_reactors_desired:stored *tmp71 *tmp72
 
   772 label *label50
   773 label *label43
   774 jump *label52 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  775 print "Require only {0}/5 reactors.\n"
+  776 format .REACTORS_DESIRED
   777 label *label52
   778 printflush message1
   779 jump *label7 always
 
   795 op mul *tmp125 :start_reactor:surplus 0.2
   796 op add .AVG_SURPLUS *tmp124 *tmp125
   797 sensor :start_reactor:enabled :start_reactor:reactor @enabled
-    * print "#"
-    * print :start_reactor:reactor_num
-    * print " "
-    * print "- "
+  798 print "#{0} - "
+  799 format :start_reactor:reactor_num
   800 jump *label64 equal :start_reactor:emerg_shutdown false
   801 control enabled :start_reactor:reactor false
-    * print "emergency mode"
-    * print "\n"
+  802 print "emergency mode\n"
   803 set :start_reactor*retval false
   804 jump *label65 always
   805 label *label64
   806 jump *label66 equal :start_reactor:enabled false
   807 jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
   808 control enabled :start_reactor:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  809 print "STOP unwanted\n"
   810 jump *label67 always
   811 label *label68
   812 op greaterThan *tmp136 :start_reactor:reactor_num 1
 
   815 op land *tmp139 *tmp136 *tmp138
   816 jump *label70 equal *tmp139 false
   817 control enabled :start_reactor:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  818 print "STOP system fuel low\n"
   819 jump *label67 always
   820 label *label70
   821 jump *label72 greaterThan :start_reactor:fuel 1
   822 control enabled :start_reactor:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  823 print "STOP fuel low\n"
   824 jump *label67 always
   825 label *label72
   826 jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
   827 control enabled :start_reactor:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  828 print "STOP out of cryo\n"
   829 jump *label67 always
   830 label *label74
   831 jump *label76 greaterThanEq :start_reactor:secs 30
 
   851 op land *tmp156 *tmp154 *tmp155
   852 jump *label79 equal *tmp156 false
   853 control enabled :start_reactor:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  854 print "START FAIL battery\n"
   855 set :start_reactor*retval false
   856 jump *label67 always
   857 label *label79
   858 op sub :start_reactor:time_left 30 :start_reactor:secs
-    * print "Starting "
-    * print :start_reactor:time_left
-    * print " "
-    * print "secs, req "
-    * print :calc_charge_req*retval
-    * print "J"
-    * print "\n"
+  859 print "Starting {0} secs, req {0}J\n"
+  860 format :start_reactor:time_left
+  861 format :calc_charge_req*retval
   862 jump *label67 always
   863 label *label76
   864 op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
 
   866 op land *tmp163 *tmp161 *tmp162
   867 jump *label81 equal *tmp163 false
   868 control enabled :start_reactor:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  869 print "ABANDON - battery crit\n"
   870 set :start_reactor*retval false
   871 jump *label67 always
   872 label *label81
   873 op idiv :start_reactor:mins :start_reactor:secs 6
   874 op div :start_reactor:mins :start_reactor:mins 10
-    * print "RUN "
-    * print :start_reactor:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  875 print "RUN {0} mins\n"
+  876 format :start_reactor:mins
   877 jump *label67 always
   878 label *label66
   879 op sub *tmp169 :start_reactor:charge .START_POWER_REQ
 
   885 op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
   886 op add :start_reactor:cryo_req .CRYO_REQ *tmp175
   887 jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
-    * print "IDLE"
-    * print "\n"
+  888 print "IDLE\n"
   889 set :start_reactor*retval false
   890 jump *label84 always
   891 label *label83
 
   895 op div :start_reactor:flow *tmp183 10
   896 op idiv *tmp186 :start_reactor:charge_units 0.001
   897 op div :start_reactor:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :start_reactor:charge
-    * print "J + %"
-    * print :start_reactor:flow
-    * print "W)"
-    * print "\n"
+  898 print "WAIT power. (%{0}J + %{0}W)\n"
+  899 format :start_reactor:charge
+  900 format :start_reactor:flow
   901 set :start_reactor*retval false
   902 jump *label86 always
   903 label *label85
 
   906 jump *label87 equal *tmp189 false
   907 op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
   908 jump *label89 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+  909 print "WAIT fuel\n"
   910 jump *label88 always
   911 label *label89
-    * print "WAIT system fuel"
-    * print "\n"
+  912 print "WAIT system fuel\n"
   913 jump *label88 always
   914 label *label87
   915 op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
   916 jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+  917 print "WAIT buffer fuel\n"
   918 jump *label92 always
   919 label *label91
   920 jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+  921 print "WAIT cryo\n"
   922 jump *label94 always
   923 label *label93
-    * print "STARTUP"
-    * print "\n"
+  924 print "STARTUP\n"
   925 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   926 control enabled :start_reactor:reactor true
   927 label *label94

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .RET_T_STARTUP *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label125 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label127 always
label *label125
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label127
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label12 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always
label *label12
set *tmp8 false
jump *label11 always
label *label11
op or :emerg_shutdown :check_radar*retval *tmp8
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label133 equal *tmp107 false
set .START_POWER_REQ 0
jump *label135 always
label *label133
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set .START_POWER_REQ :calc_charge_req:charge_req
jump *label135 always
label *label135
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label137 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label139 always
label *label137
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label139 always
label *label139
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label141 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label143 always
label *label141
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label143 always
label *label143
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup4
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label145 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label147 always
label *label145
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label147 always
label *label147
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
op sub *tmp102 @tick :t_startup5
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label149 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label151 always
label *label149
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label151 always
label *label151
op add .START_POWER_REQ .START_POWER_REQ :calc_charge_req*retval
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor1 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor1 @enabled
print "#1 - "
jump *label157 equal :emerg_shutdown false
control enabled reactor1 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label190 always
label *label157
jump *label176 equal :start_reactor:enabled false
jump *label158 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false
print "STOP unwanted\n"
jump *label189 always
label *label158
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :start_reactor:fuel_stored 15
set *tmp139 false
jump *label160 greaterThan :start_reactor:fuel 1
control enabled reactor1 false
print "STOP fuel low\n"
jump *label189 always
label *label160
jump *label161 greaterThan :start_reactor:cryo 1
control enabled reactor1 false
print "STOP out of cryo\n"
jump *label189 always
label *label161
jump *label168 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup1
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label163 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label165 always
label *label163
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label165 always
label *label165
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label166 equal *tmp156 false
control enabled reactor1 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label189 always
label *label166
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label189 always
label *label168
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label169 equal *tmp163 false
control enabled reactor1 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label189 always
label *label169
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label189 always
label *label176
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :start_reactor:cryo_req 3 2
jump *label177 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label188 always
label *label177
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label178 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label187 always
label *label178
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label181 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label179 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label186 always
label *label179
print "WAIT system fuel\n"
jump *label186 always
label *label181
op mul *tmp194 45 1
jump *label182 greaterThanEq :start_reactor:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label185 always
label *label182
jump *label183 greaterThanEq :start_reactor:cryo 5
print "WAIT cryo\n"
jump *label184 always
label *label183
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true
label *label184
label *label185
label *label186
label *label187
label *label188
label *label189
label *label190
sensor *tmp201 reactor1 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup1
set :fuel_1 :start_reactor:supply_fuel
set :t_startup1 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader1 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader2 *tmp101
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor2 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor2 @enabled
print "#2 - "
jump *label195 equal :emerg_shutdown false
control enabled reactor2 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label228 always
label *label195
jump *label214 equal :start_reactor:enabled false
jump *label196 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false
print "STOP unwanted\n"
jump *label227 always
label *label196
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :start_reactor:fuel_stored 30
set *tmp139 *tmp138
jump *label197 equal *tmp138 false
control enabled reactor2 false
print "STOP system fuel low\n"
jump *label227 always
label *label197
jump *label198 greaterThan :start_reactor:fuel 1
control enabled reactor2 false
print "STOP fuel low\n"
jump *label227 always
label *label198
jump *label199 greaterThan :start_reactor:cryo 1
control enabled reactor2 false
print "STOP out of cryo\n"
jump *label227 always
label *label199
jump *label206 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup2
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label201 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label203 always
label *label201
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label203 always
label *label203
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label204 equal *tmp156 false
control enabled reactor2 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label227 always
label *label204
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label227 always
label *label206
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label207 equal *tmp163 false
control enabled reactor2 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label227 always
label *label207
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label227 always
label *label214
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :start_reactor:cryo_req 3 4
jump *label215 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label226 always
label *label215
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label216 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label225 always
label *label216
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label219 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label217 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label224 always
label *label217
print "WAIT system fuel\n"
jump *label224 always
label *label219
op mul *tmp194 45 2
jump *label220 greaterThanEq :start_reactor:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label223 always
label *label220
jump *label221 greaterThanEq :start_reactor:cryo 7
print "WAIT cryo\n"
jump *label222 always
label *label221
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true
label *label222
label *label223
label *label224
label *label225
label *label226
label *label227
label *label228
sensor *tmp201 reactor2 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup2
set :fuel_2 :start_reactor:supply_fuel
set :t_startup2 .RET_T_STARTUP
select *tmp97 notEqual :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader3 *tmp97
select *tmp101 equal :start_reactor:supply_fuel false @blast-compound @scrap
control config unloader4 *tmp101
radar enemy any any health cyclone1 1 :check_radar:enemy_found
jump *label129 equal :check_radar:enemy_found null
control enabled projector1 true
control enabled projector2 true
control config unloader1 @scrap
control config unloader2 @blast-compound
control config unloader3 @scrap
control config unloader4 @blast-compound
control config unloader5 @scrap
control config unloader6 @blast-compound
control config unloader7 @scrap
control enabled reactor1 false
control enabled reactor2 false
control enabled reactor3 false
control enabled reactor4 false
control enabled reactor5 false
set :check_radar*retval true
jump *label131 always
label *label129
control enabled projector1 false
control enabled projector2 false
set :check_radar*retval false
label *label131
op or :emerg_shutdown :emerg_shutdown :check_radar*retval
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel reactor3 @blast-compound
set :start_reactor:supply_fuel true
sensor :start_reactor:fuel_stored vault1 @blast-compound
sensor :start_reactor:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled reactor3 @enabled
print "#3 - "
jump *label233 equal :emerg_shutdown false
control enabled reactor3 false
print "emergency mode\n"
set :start_reactor:supply_fuel false
jump *label266 always
label *label233
jump *label252 equal :start_reactor:enabled false
jump *label234 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false
print "STOP unwanted\n"
jump *label265 always
label *label234
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :start_reactor:fuel_stored 45
set *tmp139 *tmp138
jump *label235 equal *tmp138 false
control enabled reactor3 false
print "STOP system fuel low\n"
jump *label265 always
label *label235
jump *label236 greaterThan :start_reactor:fuel 1
control enabled reactor3 false
print "STOP fuel low\n"
jump *label265 always
label *label236
jump *label237 greaterThan :start_reactor:cryo 1
control enabled reactor3 false
print "STOP out of cryo\n"
jump *label265 always
label *label237
jump *label244 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :t_startup3
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label239 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label241 always
label *label239
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label241 always
label *label241
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :start_reactor:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label242 equal *tmp156 false
control enabled reactor3 false
print "START FAIL battery\n"
set :start_reactor:supply_fuel false
jump *label265 always
label *label242
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label265 always
label *label244
op lessThan *tmp161 :start_reactor:charge 2000
op lessThan *tmp162 :start_reactor:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label245 equal *tmp163 false
control enabled reactor3 false
print "ABANDON - battery crit\n"
set :start_reactor:supply_fuel false
jump *label265 always
label *label245
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label265 always
label *label252
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :start_reactor:charge_units *tmp170 38333.333333333336
op div *tmp173 :start_reactor:surplus 2000
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :start_reactor:cryo_req 3 6
jump *label253 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :start_reactor:supply_fuel false
jump *label264 always
label *label253
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label254 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor:supply_fuel false
jump *label263 always
label *label254
op lessThan *tmp188 :start_reactor:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label257 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label255 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label262 always
label *label255
print "WAIT system fuel\n"
jump *label262 always
label *label257
op mul *tmp194 45 3
jump *label258 greaterThanEq :start_reactor:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label261 always
label *label258
jump *label259 greaterThanEq :start_reactor:cryo 9
print "WAIT cryo\n"
jump *label260 always
label *label259
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true
label *label260
label *label261
label *label262
label *label263
label *label264
label *label265
label *label266
sensor *tmp201 reactor3 @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :t_startup3
set :fuel_3 :start_reactor:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :start_reactor:reactor reactor4
set :start_reactor:reactor_num 4
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_4
set :start_reactor:t_startup :t_startup4
setaddr :start_reactor*retaddr *label25
call *label3 *invalid :start_reactor*retval
label *label25
set :fuel_4 :start_reactor*retval
set :t_startup4 .RET_T_STARTUP
set :start_reactor:reactor reactor5
set :start_reactor:reactor_num 5
set :start_reactor:emerg_shutdown :emerg_shutdown
set :start_reactor:fuel_on :fuel_5
set :start_reactor:t_startup :t_startup5
setaddr :start_reactor*retaddr *label26
call *label3 *invalid :start_reactor*retval
label *label26
set :fuel_5 :start_reactor*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :start_reactor:supply_fuel :fuel_4
op or :fuel_many *tmp27 :start_reactor*retval
select *tmp97 notEqual :fuel_many false @blast-compound @scrap
control config unloader5 *tmp97
select *tmp101 equal :fuel_many false @blast-compound @scrap
control config unloader6 *tmp101
op or *tmp30 :fuel_1 :fuel_2
op or :throttle_blast:reactors_fueled *tmp30 :fuel_many
sensor *tmp33 node1 @powerNetStored
op floor :throttle_blast:charge *tmp33
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :throttle_blast:surplus *tmp37
sensor :throttle_blast:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :throttle_blast:charge 5000
op lessThan *tmp41 :throttle_blast:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label29 equal *tmp43 false
set :throttle_blast:limit 0
print "Central Fuel at {0} / 0 - "
format :throttle_blast:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label30 always
label *label31
print " Critical power.\n"
jump *label30 always
label *label29
jump *label33 notEqual :throttle_blast:reactors_fueled false
set :throttle_blast:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :throttle_blast:fuel_stored
jump *label34 always
label *label33
set :throttle_blast:limit 800
print "Fuel {0} / 800\n"
format :throttle_blast:fuel_stored
label *label34
label *label30
op lessThan *tmp32 :throttle_blast:fuel_stored :throttle_blast:limit
select *tmp51 notEqual *tmp32 false @pyratite @scrap
control config unloader7 *tmp51
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :diff_generators:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :diff_generators:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label38 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false
control enabled generator2 false
jump *label39 always
label *label38
control enabled generator1 true
control enabled generator2 true
label *label39
op idiv *tmp93 .AVG_SURPLUS 100
op div :surplus *tmp93 10
sensor :kilo:val node1 @powerNetStored
op idiv *tmp93 :kilo:val 100
op div :kilo*retval *tmp93 10
set :charge :kilo*retval
jump *label42 lessThanEq .START_POWER_REQ 0
op idiv *tmp93 .START_POWER_REQ 100
op div :kilo*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :kilo*retval
format :charge
format :surplus
jump *label43 always
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :kilo*retval
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :update_reactors_desired:stored *tmp71 *tmp72
op greaterThan *tmp74 :update_reactors_desired:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label46 equal *tmp77 false
jump *label48 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label48
label *label46
op lessThan *tmp81 :update_reactors_desired:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label50 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :update_reactors_desired:needed 1 *tmp87
op add *tmp89 :update_reactors_desired:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label50
label *label43
jump *label52 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label52
printflush message1
jump *label7 always
label *label3
set .RET_T_STARTUP :start_reactor:t_startup
op sub *tmp113 @tick :start_reactor:t_startup
op idiv :start_reactor:secs *tmp113 60
sensor :start_reactor:fuel :start_reactor:reactor @blast-compound
set :start_reactor*retval true
sensor :start_reactor:fuel_stored .CONTAINER @blast-compound
sensor :start_reactor:cryo :start_reactor:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :start_reactor:charge *tmp118
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :start_reactor:surplus *tmp122
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :start_reactor:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :start_reactor:enabled :start_reactor:reactor @enabled
print "#{0} - "
format :start_reactor:reactor_num
jump *label64 equal :start_reactor:emerg_shutdown false
control enabled :start_reactor:reactor false
print "emergency mode\n"
set :start_reactor*retval false
jump *label65 always
label *label64
jump *label66 equal :start_reactor:enabled false
jump *label68 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
control enabled :start_reactor:reactor false
print "STOP unwanted\n"
jump *label67 always
label *label68
op greaterThan *tmp136 :start_reactor:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :start_reactor:reactor_num
op lessThan *tmp138 :start_reactor:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label70 equal *tmp139 false
control enabled :start_reactor:reactor false
print "STOP system fuel low\n"
jump *label67 always
label *label70
jump *label72 greaterThan :start_reactor:fuel 1
control enabled :start_reactor:reactor false
print "STOP fuel low\n"
jump *label67 always
label *label72
jump *label74 greaterThan :start_reactor:cryo .CRYO_ABORT
control enabled :start_reactor:reactor false
print "STOP out of cryo\n"
jump *label67 always
label *label74
jump *label76 greaterThanEq :start_reactor:secs 30
op sub *tmp102 @tick :start_reactor:t_startup
op idiv :calc_charge_req:secs *tmp102 60
op greaterThan *tmp104 :calc_charge_req:secs 30
sensor *tmp105 :start_reactor:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label153 equal *tmp107 false
set :calc_charge_req*retval 0
jump *label155 always
label *label153
op sub :calc_charge_req:time_left 30 :calc_charge_req:secs
op mul *tmp110 :calc_charge_req:time_left :calc_charge_req:time_left
op idiv :calc_charge_req:charge_req *tmp110 0.04
set :calc_charge_req*retval :calc_charge_req:charge_req
jump *label155 always
label *label155
op sub *tmp153 :start_reactor:charge :calc_charge_req*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :start_reactor:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label79 equal *tmp156 false
control enabled :start_reactor:reactor false
print "START FAIL battery\n"
set :start_reactor*retval false
jump *label67 always
label *label79
op sub :start_reactor:time_left 30 :start_reactor:secs
print "Starting {0} secs, req {0}J\n"
format :start_reactor:time_left
format :calc_charge_req*retval
jump *label67 always
label *label76
op lessThan *tmp161 :start_reactor:charge .PWR_ABANDON
op lessThan *tmp162 :start_reactor:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label81 equal *tmp163 false
control enabled :start_reactor:reactor false
print "ABANDON - battery crit\n"
set :start_reactor*retval false
jump *label67 always
label *label81
op idiv :start_reactor:mins :start_reactor:secs 6
op div :start_reactor:mins :start_reactor:mins 10
print "RUN {0} mins\n"
format :start_reactor:mins
jump *label67 always
label *label66
op sub *tmp169 :start_reactor:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :start_reactor:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :start_reactor:surplus .FLOW_REQ
op max :start_reactor:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :start_reactor:reactor_num
op add :start_reactor:cryo_req .CRYO_REQ *tmp175
jump *label83 greaterThanEq .REACTORS_DESIRED :start_reactor:reactor_num
print "IDLE\n"
set :start_reactor*retval false
jump *label84 always
label *label83
op add *tmp179 :start_reactor:flow_units :start_reactor:charge_units
jump *label85 greaterThanEq *tmp179 1
op idiv *tmp183 :start_reactor:flow_units 0.001
op div :start_reactor:flow *tmp183 10
op idiv *tmp186 :start_reactor:charge_units 0.001
op div :start_reactor:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :start_reactor:charge
format :start_reactor:flow
set :start_reactor*retval false
jump *label86 always
label *label85
op lessThan *tmp188 :start_reactor:fuel .FUEL_REQ
op land *tmp189 :start_reactor:fuel_on *tmp188
jump *label87 equal *tmp189 false
op add *tmp191 :start_reactor:fuel :start_reactor:fuel_stored
jump *label89 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label88 always
label *label89
print "WAIT system fuel\n"
jump *label88 always
label *label87
op mul *tmp194 .FUEL_TOT_REQ :start_reactor:reactor_num
jump *label91 greaterThanEq :start_reactor:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label92 always
label *label91
jump *label93 greaterThanEq :start_reactor:cryo :start_reactor:cryo_req
print "WAIT cryo\n"
jump *label94 always
label *label93
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :start_reactor:reactor true
label *label94
label *label92
label *label88
label *label86
label *label84
label *label67
label *label65
sensor *tmp201 :start_reactor:reactor @enabled
select .RET_T_STARTUP notEqual :start_reactor:enabled *tmp201 @tick :start_reactor:t_startup
return :start_reactor*retaddr
