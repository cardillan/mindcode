   661 instructions before optimizations.
    45 instructions eliminated by Temp Variables Elimination.
    60 instructions eliminated by Dead Code Elimination (10 iterations).
     1 instructions eliminated by Jump Normalization (5 iterations).
    18 instructions eliminated by Jump Optimization (2 passes, 5 iterations).
    17 instructions eliminated by Single Step Elimination (2 passes, 7 iterations).
     3 instructions eliminated by Expression Optimization (4 iterations).
     3 instructions eliminated by If Expression Optimization (4 iterations).
    98 instructions eliminated by Data Flow Optimization (8 passes, 28 iterations).
   550 instructions added by Function Inlining (11 iterations).
    17 function calls inlined by Function Inlining.
    33 instructions updated by JumpThreading.
     4 instructions eliminated by Unreachable Code Elimination.
   132 instructions eliminated by Print Merging.
   830 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 520):
  * Inline function 'kilo' defined at line 117:1                 cost     3, benefit      218.8, efficiency       72.9 (-4 instructions)
    Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 102:15                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 103:14                          cost     2, benefit       87.5, efficiency       43.8
    Inline function call at line 105:15                          cost     2, benefit       43.8, efficiency       21.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 524):
  * Inline function 'update_fuel' defined at line 121:1          cost    13, benefit      337.5, efficiency       26.0 (-1 instructions)
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 82:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 86:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 96:5                            cost     7, benefit      112.5, efficiency       16.1
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 525):
    Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
  * Inline function 'check_radar' defined at line 259:1          cost    21, benefit      175.0, efficiency        8.3 (+6 instructions)
    Inline function call at line 69:22                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 88:23                           cost    22, benefit       87.5, efficiency        4.0
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 519):
  * Inline function 'calc_charge_req' defined at line 126:1      cost    64, benefit      503.9, efficiency        7.9 (+44 instructions)
  ! Inline function 'start_reactor' defined at line 140:1        cost   591, benefit      687.5, efficiency        1.2
    Inline function call at line 73:23                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 74:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 75:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 76:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 77:24                           cost    13, benefit      100.0, efficiency        7.7
    Inline function call at line 80:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 84:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 89:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   148, benefit      137.5, efficiency        0.9
    Inline function call at line 173:26                          cost    13, benefit        3.9, efficiency        0.3

Pass 1: speed optimization selection (cost limit 475):
  ! Inline function 'start_reactor' defined at line 140:1        cost   631, benefit      687.5, efficiency        1.1
  * Inline function call at line 80:14                           cost   158, benefit      137.5, efficiency        0.9 (+150 instructions)
    Inline function call at line 84:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 325):
  ! Inline function 'start_reactor' defined at line 140:1        cost   473, benefit      550.0, efficiency        1.2
  * Inline function call at line 84:14                           cost   158, benefit      137.5, efficiency        0.9 (+151 instructions)
    Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 174):
  ! Inline function 'start_reactor' defined at line 140:1        cost   315, benefit      412.5, efficiency        1.3
  * Inline function call at line 89:14                           cost   158, benefit      137.5, efficiency        0.9 (+151 instructions)
    Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
    Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 1: speed optimization selection (cost limit 23):
  ! Inline function 'start_reactor' defined at line 140:1        cost   157, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   158, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   158, benefit      137.5, efficiency        0.9

Pass 2: speed optimization selection (cost limit 33):
  ! Inline function 'start_reactor' defined at line 140:1        cost   156, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 3: speed optimization selection (cost limit 34):
  ! Inline function 'start_reactor' defined at line 140:1        cost   156, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Pass 4: speed optimization selection (cost limit 34):
  ! Inline function 'start_reactor' defined at line 140:1        cost   156, benefit      275.0, efficiency        1.8
  ! Inline function call at line 91:14                           cost   157, benefit      137.5, efficiency        0.9
  ! Inline function call at line 93:14                           cost   157, benefit      137.5, efficiency        0.9

Modifications by Initial phase, Dead Code Elimination, iteration 1 (-20 instructions):
 
    71 print "\n"
    72 set *tmp8 true
    73 jump *label11 always
-    * set *tmp13 null
    74 jump *label13 always
    75 label *label12
-    * set *tmp13 null
    76 label *label13
    77 set *tmp8 false
    78 jump *label11 always
 
   131 setaddr :fn1*retaddr *label20
   132 call *label1 :fn1*retval
   133 gotolabel *label20 :fn1
-    * set *tmp20 :fn1*retval
   134 set :fn3:reactor reactor2
   135 set :fn3:reactor_num 2
   136 set :fn3:emerg_shutdown :emerg_shutdown
 
   148 setaddr :fn1*retaddr *label22
   149 call *label1 :fn1*retval
   150 gotolabel *label22 :fn1
-    * set *tmp22 :fn1*retval
   151 set :fn4:unit .TOWER
   152 setaddr :fn4*retaddr *label23
   153 call *label4 :fn4*retval
 
   196 setaddr :fn1*retaddr *label27
   197 call *label1 :fn1*retval
   198 gotolabel *label27 :fn1
-    * set *tmp29 :fn1*retval
   199 op or *tmp30 :fuel_1 :fuel_2
   200 op or *tmp31 *tmp30 :fuel_many
   201 set :fn6:reactors_fueled *tmp31
 
   233 print "\n"
   234 set *tmp45 null
   235 label *label32
-    * set *tmp44 *tmp45
   236 jump *label30 always
   237 label *label29
   238 op equal *tmp46 :fn6:reactors_fueled false
 
   259 print "n"
   260 set *tmp47 null
   261 label *label34
-    * set *tmp44 *tmp47
   262 label *label30
   263 op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
   264 set *tmp32 *tmp48
 
   293 control enabled generator2 true
   294 set *tmp59 true
   295 label *label39
-    * set *tmp52 *tmp59
   296 label *label37
   297 set :fn0:val .AVG_SURPLUS
   298 setaddr :fn0*retaddr *label40
 
   323 print :surplus
   324 print "kW flow."
   325 print "\n"
-    * set *tmp68 null
   326 jump *label43 always
   327 label *label42
   328 print "Power "
 
   349 label *label48
   350 set *tmp80 null
   351 label *label49
-    * set *tmp78 *tmp80
   352 jump *label47 always
   353 label *label46
-    * set *tmp78 null
   354 label *label47
   355 op lessThan *tmp81 :fn8:stored 0.8
   356 op mul *tmp82 .GOAL_BUFFER 0.8
 
   371 label *label51
   372 set *tmp70 *tmp85
   373 label *label45
-    * set *tmp68 *tmp70
   374 label *label43
   375 op notEqual *tmp91 .REACTORS_DESIRED 5
   376 jump *label52 equal *tmp91 false
 
   378 print .REACTORS_DESIRED
   379 print "/5 reactors."
   380 print "\n"
-    * set *tmp92 null
   381 jump *label53 always
   382 label *label52
-    * set *tmp92 null
   383 label *label53
   384 printflush message1
   385 label *label8
 
   428 jump *label61 equal *tmp107 false
   429 set :fn2*retval 0
   430 jump *label60 always
-    * set *tmp108 null
   431 jump *label62 always
   432 label *label61
-    * set *tmp108 null
   433 label *label62
   434 op sub *tmp109 30 :fn2:secs
   435 set :fn2:time_left *tmp109
 
   479 print "emergency mode"
   480 print "\n"
   481 set :fn3:supply_fuel false
-    * set *tmp128 :fn3:supply_fuel
   482 jump *label65 always
   483 label *label64
   484 jump *label66 equal :fn3:enabled false
 
   682 label *label84
   683 set *tmp131 *tmp178
   684 label *label67
-    * set *tmp128 *tmp131
   685 label *label65
   686 sensor *tmp201 :fn3:reactor @enabled
   687 op notEqual *tmp202 :fn3:enabled *tmp201
   688 jump *label95 equal *tmp202 false
   689 set *tmp204 @tick
   690 set .RET_T_STARTUP *tmp204
-    * set *tmp203 .RET_T_STARTUP
   691 jump *label96 always
   692 label *label95
-    * set *tmp203 null
   693 label *label96
   694 set :fn3*retval :fn3:supply_fuel
   695 jump *label63 always

Modifications by Initial phase, Dead Code Elimination, iteration 2 (-12 instructions):
 
   226 jump *label31 equal :fn6:emerg_shutdown false
   227 print " Enemies detected."
   228 print "\n"
-    * set *tmp45 null
   229 jump *label32 always
   230 label *label31
   231 print " Critical power."
   232 print "\n"
-    * set *tmp45 null
   233 label *label32
   234 jump *label30 always
   235 label *label29
 
   244 print " "
   245 print "(due to emergency)"
   246 print "\n"
-    * set *tmp47 null
   247 jump *label34 always
   248 label *label33
   249 set :fn6:limit .FUEL_LIMIT
 
   254 print :fn6:limit
   255 print "\"
   256 print "n"
-    * set *tmp47 null
   257 label *label34
   258 label *label30
   259 op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
 
   282 print "\n"
   283 control enabled generator1 false
   284 control enabled generator2 false
-    * set *tmp59 false
   285 jump *label39 always
   286 label *label38
   287 control enabled generator1 true
   288 control enabled generator2 true
-    * set *tmp59 true
   289 label *label39
   290 label *label37
   291 set :fn0:val .AVG_SURPLUS
 
   338 jump *label48 equal *tmp79 false
   339 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   340 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * set *tmp80 .AVG_SURPLUS
   341 jump *label49 always
   342 label *label48
-    * set *tmp80 null
   343 label *label49
   344 jump *label47 always
   345 label *label46
 
   361 label *label50
   362 set *tmp85 null
   363 label *label51
-    * set *tmp70 *tmp85
   364 label *label45
   365 label *label43
   366 op notEqual *tmp91 .REACTORS_DESIRED 5
 
   404 set *tmp101 .FUEL_OFF
   405 label *label59
   406 control config *tmp98 *tmp101
-    * set :fn1*retval *tmp101
   407 label *label55
   408 goto :fn1*retaddr :fn1
   409 end
 
   579 label *label71
   580 set *tmp133 *tmp140
   581 label *label69
-    * set *tmp131 *tmp133
   582 jump *label67 always
   583 label *label66
   584 op sub *tmp169 :fn3:charge .START_POWER_REQ
 
   669 label *label86
   670 set *tmp178 *tmp181
   671 label *label84
-    * set *tmp131 *tmp178
   672 label *label67
   673 label *label65
   674 sensor *tmp201 :fn3:reactor @enabled

Modifications by Initial phase, Dead Code Elimination, iteration 3 (-6 instructions):
 
   356 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   357 op min *tmp90 5 *tmp89
   358 set .REACTORS_DESIRED *tmp90
-    * set *tmp85 .REACTORS_DESIRED
   359 jump *label51 always
   360 label *label50
-    * set *tmp85 null
   361 label *label51
   362 label *label45
   363 label *label43
 
   476 control enabled *tmp134 false
   477 print "STOP unwanted"
   478 print "\n"
-    * set *tmp133 null
   479 jump *label69 always
   480 label *label68
   481 op greaterThan *tmp136 :fn3:reactor_num 1
 
   574 label *label73
   575 set *tmp140 *tmp144
   576 label *label71
-    * set *tmp133 *tmp140
   577 label *label69
   578 jump *label67 always
   579 label *label66
 
   593 print "IDLE"
   594 print "\n"
   595 set :fn3:supply_fuel false
-    * set *tmp178 :fn3:supply_fuel
   596 jump *label84 always
   597 label *label83
   598 op add *tmp179 :fn3:flow_units :fn3:charge_units
 
   662 label *label88
   663 set *tmp181 *tmp190
   664 label *label86
-    * set *tmp178 *tmp181
   665 label *label84
   666 label *label67
   667 label *label65

Modifications by Initial phase, Dead Code Elimination, iteration 4 (-4 instructions):
 
   487 control enabled *tmp141 false
   488 print "STOP system fuel low"
   489 print "\n"
-    * set *tmp140 null
   490 jump *label71 always
   491 label *label70
   492 op lessThanEq *tmp143 :fn3:fuel 1
 
   571 label *label75
   572 set *tmp144 *tmp148
   573 label *label73
-    * set *tmp140 *tmp144
   574 label *label71
   575 label *label69
   576 jump *label67 always
 
   611 print "W)"
   612 print "\n"
   613 set :fn3:supply_fuel false
-    * set *tmp181 :fn3:supply_fuel
   614 jump *label86 always
   615 label *label85
   616 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
 
   657 label *label92
   658 set *tmp190 *tmp196
   659 label *label88
-    * set *tmp181 *tmp190
   660 label *label86
   661 label *label84
   662 label *label67

Modifications by Initial phase, Dead Code Elimination, iteration 5 (-4 instructions):
 
   495 control enabled *tmp145 false
   496 print "STOP fuel low"
   497 print "\n"
-    * set *tmp144 null
   498 jump *label73 always
   499 label *label72
   500 op lessThanEq *tmp147 :fn3:cryo .CRYO_ABORT
 
   568 label *label77
   569 set *tmp148 *tmp152
   570 label *label75
-    * set *tmp144 *tmp148
   571 label *label73
   572 label *label71
   573 label *label69
 
   626 print "\n"
   627 set *tmp193 null
   628 label *label90
-    * set *tmp190 *tmp193
   629 jump *label88 always
   630 label *label87
   631 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
 
   652 label *label94
   653 set *tmp196 *tmp198
   654 label *label92
-    * set *tmp190 *tmp196
   655 label *label88
   656 label *label86
   657 label *label84

Modifications by Initial phase, Dead Code Elimination, iteration 6 (-6 instructions):
 
   503 control enabled *tmp149 false
   504 print "STOP out of cryo"
   505 print "\n"
-    * set *tmp148 null
   506 jump *label75 always
   507 label *label74
   508 op lessThan *tmp151 :fn3:secs 30
 
   565 label *label82
   566 set *tmp152 *tmp164
   567 label *label77
-    * set *tmp148 *tmp152
   568 label *label75
   569 label *label73
   570 label *label71
 
   617 jump *label89 equal *tmp192 false
   618 print "WAIT fuel"
   619 print "\n"
-    * set *tmp193 null
   620 jump *label90 always
   621 label *label89
   622 print "WAIT system fuel"
   623 print "\n"
-    * set *tmp193 null
   624 label *label90
   625 jump *label88 always
   626 label *label87
 
   629 jump *label91 equal *tmp195 false
   630 print "WAIT buffer fuel"
   631 print "\n"
-    * set *tmp196 null
   632 jump *label92 always
   633 label *label91
   634 op lessThan *tmp197 :fn3:cryo :fn3:cryo_req
 
   645 control enabled *tmp199 true
   646 set *tmp198 true
   647 label *label94
-    * set *tmp196 *tmp198
   648 label *label92
   649 label *label88
   650 label *label86

Modifications by Initial phase, Dead Code Elimination, iteration 7 (-4 instructions):
 
   537 print "\n"
   538 set *tmp157 null
   539 label *label80
-    * set *tmp152 *tmp157
   540 jump *label77 always
   541 label *label76
   542 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
 
   562 print "\n"
   563 set *tmp164 null
   564 label *label82
-    * set *tmp152 *tmp164
   565 label *label77
   566 label *label75
   567 label *label73
 
   633 jump *label93 equal *tmp197 false
   634 print "WAIT cryo"
   635 print "\n"
-    * set *tmp198 null
   636 jump *label94 always
   637 label *label93
   638 print "STARTUP"
 
   640 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   641 set *tmp199 :fn3:reactor
   642 control enabled *tmp199 true
-    * set *tmp198 true
   643 label *label94
   644 label *label92
   645 label *label88

Modifications by Initial phase, Dead Code Elimination, iteration 8 (-4 instructions):
 
   523 print "START FAIL battery"
   524 print "\n"
   525 set :fn3:supply_fuel false
-    * set *tmp157 :fn3:supply_fuel
   526 jump *label80 always
   527 label *label79
   528 op sub *tmp160 30 :fn3:secs
 
   534 print :fn3:charge_req
   535 print "J"
   536 print "\n"
-    * set *tmp157 null
   537 label *label80
   538 jump *label77 always
   539 label *label76
 
   546 print "ABANDON - battery crit"
   547 print "\n"
   548 set :fn3:supply_fuel false
-    * set *tmp164 :fn3:supply_fuel
   549 jump *label82 always
   550 label *label81
   551 op idiv *tmp167 :fn3:secs 6
 
   557 print " "
   558 print "mins"
   559 print "\n"
-    * set *tmp164 null
   560 label *label82
   561 label *label77
   562 label *label75

Modifications by Initial phase, Temp Variables Elimination, iteration 1 (-45 instructions):
 
    25 sensor *tmp0 node1 @powerNetIn
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
-    * op floor *tmp3 *tmp2
-    * set :surplus *tmp3
+   28 op floor :surplus *tmp2
    29 op greaterThan *tmp4 :surplus 10000
    30 jump *label5 equal *tmp4 false
-    * op sub *tmp6 @tick 3600
-    * set *tmp5 *tmp6
+   31 op sub *tmp5 @tick 3600
    32 jump *label6 always
    33 label *label5
    34 set *tmp5 @tick
 
    58 setaddr :fn4*retaddr *label10
    59 call *label4 :fn4*retval
    60 gotolabel *label10 :fn4
-    * set *tmp7 :fn4*retval
-    * set :emerg_shutdown *tmp7
+   61 set :emerg_shutdown :fn4*retval
    62 op notEqual *tmp9 switch1 null
    63 sensor *tmp10 switch1 @enabled
    64 op equal *tmp11 *tmp10 false
 
    81 setaddr :fn2*retaddr *label14
    82 call *label2 :fn2*retval
    83 gotolabel *label14 :fn2
-    * set *tmp14 :fn2*retval
-    * set .START_POWER_REQ *tmp14
+   84 set .START_POWER_REQ :fn2*retval
    85 set :fn2:reactor reactor2
    86 set :fn2:time :t_startup2
    87 setaddr :fn2*retaddr *label15
 
   118 setaddr :fn3*retaddr *label19
   119 call *label3 :fn3*retval
   120 gotolabel *label19 :fn3
-    * set *tmp19 :fn3*retval
-    * set :fuel_1 *tmp19
+  121 set :fuel_1 :fn3*retval
   122 set :t_startup1 .RET_T_STARTUP
   123 set :fn1:fuel :fuel_1
   124 set :fn1:uld_in .ULD_IN_1
 
   134 setaddr :fn3*retaddr *label21
   135 call *label3 :fn3*retval
   136 gotolabel *label21 :fn3
-    * set *tmp21 :fn3*retval
-    * set :fuel_2 *tmp21
+  137 set :fuel_2 :fn3*retval
   138 set :t_startup2 .RET_T_STARTUP
   139 set :fn1:fuel :fuel_2
   140 set :fn1:uld_in .ULD_IN_2
 
   156 setaddr :fn3*retaddr *label24
   157 call *label3 :fn3*retval
   158 gotolabel *label24 :fn3
-    * set *tmp24 :fn3*retval
-    * set :fuel_3 *tmp24
+  159 set :fuel_3 :fn3*retval
   160 set :t_startup3 .RET_T_STARTUP
   161 set :fn3:reactor reactor4
   162 set :fn3:reactor_num 4
 
   166 setaddr :fn3*retaddr *label25
   167 call *label3 :fn3*retval
   168 gotolabel *label25 :fn3
-    * set *tmp25 :fn3*retval
-    * set :fuel_4 *tmp25
+  169 set :fuel_4 :fn3*retval
   170 set :t_startup4 .RET_T_STARTUP
   171 set :fn3:reactor reactor5
   172 set :fn3:reactor_num 5
 
   176 setaddr :fn3*retaddr *label26
   177 call *label3 :fn3*retval
   178 gotolabel *label26 :fn3
-    * set *tmp26 :fn3*retval
-    * set :fuel_5 *tmp26
+  179 set :fuel_5 :fn3*retval
   180 set :t_startup5 .RET_T_STARTUP
   181 op or *tmp27 :fuel_3 :fuel_4
-    * op or *tmp28 *tmp27 :fuel_5
-    * set :fuel_many *tmp28
+  182 op or :fuel_many *tmp27 :fuel_5
   183 set :fn1:fuel :fuel_many
   184 set :fn1:uld_in .ULD_IN_MANY
   185 set :fn1:uld_out .ULD_OUT_MANY
 
   187 call *label1 :fn1*retval
   188 gotolabel *label27 :fn1
   189 op or *tmp30 :fuel_1 :fuel_2
-    * op or *tmp31 *tmp30 :fuel_many
-    * set :fn6:reactors_fueled *tmp31
+  190 op or :fn6:reactors_fueled *tmp30 :fuel_many
   191 set :fn6:emerg_shutdown :emerg_shutdown
   192 sensor *tmp33 .NODE @powerNetStored
-    * op floor *tmp34 *tmp33
-    * set :fn6:charge *tmp34
+  193 op floor :fn6:charge *tmp33
   194 sensor *tmp35 .NODE @powerNetIn
   195 sensor *tmp36 .NODE @powerNetOut
   196 op sub *tmp37 *tmp35 *tmp36
-    * op floor *tmp38 *tmp37
-    * set :fn6:surplus *tmp38
-    * sensor *tmp39 .CONTAINER @blast-compound
-    * set :fn6:fuel_stored *tmp39
+  197 op floor :fn6:surplus *tmp37
+  198 sensor :fn6:fuel_stored .CONTAINER @blast-compound
   199 op lessThan *tmp40 :fn6:charge .PWR_ABORT
   200 op lessThan *tmp41 :fn6:surplus .FLOW_ABORT
   201 op land *tmp42 *tmp40 *tmp41
 
   242 print "n"
   243 label *label34
   244 label *label30
-    * op lessThan *tmp48 :fn6:fuel_stored :fn6:limit
-    * set *tmp32 *tmp48
+  245 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   246 jump *label28 always
   247 set *tmp32 null
   248 label *label28
 
   257 control config *tmp49 *tmp51
   258 sensor *tmp53 .NODE @powerNetStored
   259 sensor *tmp54 .NODE @powerNetCapacity
-    * op div *tmp55 *tmp53 *tmp54
-    * set :fn7:stored_pc *tmp55
+  260 op div :fn7:stored_pc *tmp53 *tmp54
   261 op greaterThan *tmp56 :fn7:stored_pc 0.9
   262 op lessThan *tmp57 .START_POWER_REQ 10
   263 op land *tmp58 *tmp56 *tmp57
 
   276 setaddr :fn0*retaddr *label40
   277 call *label0 :fn0*retval
   278 gotolabel *label40 :fn0
-    * set *tmp64 :fn0*retval
-    * set :surplus *tmp64
-    * sensor *tmp65 .NODE @powerNetStored
-    * set :fn0:val *tmp65
+  279 set :surplus :fn0*retval
+  280 sensor :fn0:val .NODE @powerNetStored
   281 setaddr :fn0*retaddr *label41
   282 call *label0 :fn0*retval
   283 gotolabel *label41 :fn0
-    * set *tmp66 :fn0*retval
-    * set :charge *tmp66
+  284 set :charge :fn0*retval
   285 op greaterThan *tmp67 .START_POWER_REQ 0
   286 jump *label42 equal *tmp67 false
   287 set :fn0:val .START_POWER_REQ
   288 setaddr :fn0*retaddr *label44
   289 call *label0 :fn0*retval
   290 gotolabel *label44 :fn0
-    * set *tmp69 :fn0*retval
-    * set :req *tmp69
+  291 set :req :fn0*retval
   292 print "Req "
   293 print :req
   294 print "kJ / "
 
   307 print "\n"
   308 sensor *tmp71 .NODE @powerNetStored
   309 sensor *tmp72 .NODE @powerNetCapacity
-    * op div *tmp73 *tmp71 *tmp72
-    * set :fn8:stored *tmp73
+  310 op div :fn8:stored *tmp71 *tmp72
   311 op greaterThan *tmp74 :fn8:stored 0.98
   312 op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
   313 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
 
   330 jump *label50 equal *tmp84 false
   331 op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
   332 op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
-    * op max *tmp88 1 *tmp87
-    * set :fn8:needed *tmp88
+  333 op max :fn8:needed 1 *tmp87
   334 op add *tmp89 :fn8:needed .REACTORS_DESIRED
-    * op min *tmp90 5 *tmp89
-    * set .REACTORS_DESIRED *tmp90
+  335 op min .REACTORS_DESIRED 5 *tmp89
   336 jump *label51 always
   337 label *label50
   338 label *label51
 
   354 end
   355 label *label0
   356 op idiv *tmp93 :fn0:val 100
-    * op div *tmp94 *tmp93 10
-    * set :fn0*retval *tmp94
+  357 op div :fn0*retval *tmp93 10
   358 jump *label54 always
   359 set :fn0*retval null
   360 label *label54
 
   383 end
   384 label *label2
   385 op sub *tmp102 @tick :fn2:time
-    * op idiv *tmp103 *tmp102 60
-    * set :fn2:secs *tmp103
+  386 op idiv :fn2:secs *tmp102 60
   387 op greaterThan *tmp104 :fn2:secs 30
   388 sensor *tmp105 :fn2:reactor @enabled
   389 op equal *tmp106 *tmp105 false
 
   394 jump *label62 always
   395 label *label61
   396 label *label62
-    * op sub *tmp109 30 :fn2:secs
-    * set :fn2:time_left *tmp109
+  397 op sub :fn2:time_left 30 :fn2:secs
   398 op mul *tmp110 :fn2:time_left :fn2:time_left
   399 op mul *tmp111 *tmp110 25
-    * op floor *tmp112 *tmp111
-    * set :fn2:charge_req *tmp112
+  400 op floor :fn2:charge_req *tmp111
   401 set :fn2*retval :fn2:charge_req
   402 jump *label60 always
   403 set :fn2*retval null
 
   407 label *label3
   408 set .RET_T_STARTUP :fn3:t_startup
   409 op sub *tmp113 @tick :fn3:t_startup
-    * op idiv *tmp114 *tmp113 60
-    * set :fn3:secs *tmp114
-    * sensor *tmp115 :fn3:reactor @blast-compound
-    * set :fn3:fuel *tmp115
+  410 op idiv :fn3:secs *tmp113 60
+  411 sensor :fn3:fuel :fn3:reactor @blast-compound
   412 set :fn3:supply_fuel true
-    * sensor *tmp116 .CONTAINER @blast-compound
-    * set :fn3:fuel_stored *tmp116
-    * sensor *tmp117 :fn3:reactor @cryofluid
-    * set :fn3:cryo *tmp117
+  413 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  414 sensor :fn3:cryo :fn3:reactor @cryofluid
   415 sensor *tmp118 .NODE @powerNetStored
-    * op floor *tmp119 *tmp118
-    * set :fn3:charge *tmp119
+  416 op floor :fn3:charge *tmp118
   417 sensor *tmp120 .NODE @powerNetIn
   418 sensor *tmp121 .NODE @powerNetOut
   419 op sub *tmp122 *tmp120 *tmp121
-    * op floor *tmp123 *tmp122
-    * set :fn3:surplus *tmp123
+  420 op floor :fn3:surplus *tmp122
   421 op mul *tmp124 .AVG_SURPLUS 0.8
   422 op mul *tmp125 :fn3:surplus 0.2
-    * op add *tmp126 *tmp124 *tmp125
-    * set .AVG_SURPLUS *tmp126
-    * sensor *tmp127 :fn3:reactor @enabled
-    * set :fn3:enabled *tmp127
+  423 op add .AVG_SURPLUS *tmp124 *tmp125
+  424 sensor :fn3:enabled :fn3:reactor @enabled
   425 print "#"
   426 print :fn3:reactor_num
   427 print " "
 
   490 set :fn3:supply_fuel false
   491 jump *label80 always
   492 label *label79
-    * op sub *tmp160 30 :fn3:secs
-    * set :fn3:time_left *tmp160
+  493 op sub :fn3:time_left 30 :fn3:secs
   494 print "Starting "
   495 print :fn3:time_left
   496 print " "
 
   512 set :fn3:supply_fuel false
   513 jump *label82 always
   514 label *label81
-    * op idiv *tmp167 :fn3:secs 6
-    * set :fn3:mins *tmp167
-    * op div *tmp168 :fn3:mins 10
-    * set :fn3:mins *tmp168
+  515 op idiv :fn3:mins :fn3:secs 6
+  516 op div :fn3:mins :fn3:mins 10
   517 print "RUN "
   518 print :fn3:mins
   519 print " "
 
   530 op sub *tmp169 :fn3:charge .START_POWER_REQ
   531 op sub *tmp170 *tmp169 .PWR_ABORT
   532 op div *tmp171 *tmp170 .PWR_REQ
-    * op mul *tmp172 *tmp171 .PWR_RESERVE
-    * set :fn3:charge_units *tmp172
+  533 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
   534 op div *tmp173 :fn3:surplus .FLOW_REQ
-    * op max *tmp174 -0.1 *tmp173
-    * set :fn3:flow_units *tmp174
+  535 op max :fn3:flow_units -0.1 *tmp173
   536 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add *tmp176 .CRYO_REQ *tmp175
-    * set :fn3:cryo_req *tmp176
+  537 op add :fn3:cryo_req .CRYO_REQ *tmp175
   538 op lessThan *tmp177 .REACTORS_DESIRED :fn3:reactor_num
   539 jump *label83 equal *tmp177 false
   540 print "IDLE"
 
   547 jump *label85 equal *tmp180 false
   548 op mul *tmp182 :fn3:flow_units 1000
   549 op floor *tmp183 *tmp182
-    * op div *tmp184 *tmp183 10
-    * set :fn3:flow *tmp184
+  550 op div :fn3:flow *tmp183 10
   551 op mul *tmp185 :fn3:charge_units 1000
   552 op floor *tmp186 *tmp185
-    * op div *tmp187 *tmp186 10
-    * set :fn3:charge *tmp187
+  553 op div :fn3:charge *tmp186 10
   554 print "WAIT power. (%"
   555 print :fn3:charge
   556 print "J + %"
 
   603 sensor *tmp201 :fn3:reactor @enabled
   604 op notEqual *tmp202 :fn3:enabled *tmp201
   605 jump *label95 equal *tmp202 false
-    * set *tmp204 @tick
-    * set .RET_T_STARTUP *tmp204
+  606 set .RET_T_STARTUP @tick
   607 jump *label96 always
   608 label *label95
   609 label *label96
 
   614 goto :fn3*retaddr :fn3
   615 end
   616 label *label4
-    * radar enemy any any health :fn4:unit 1 *tmp205
-    * set :fn4:enemy_found *tmp205
+  617 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
   618 op notEqual *tmp206 :fn4:enemy_found null
   619 jump *label98 equal *tmp206 false
   620 control enabled projector1 true

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
    43 set .REACTORS_DESIRED 5
    44 set .AVG_SURPLUS 500
    45 label *label7
-    * jump *label9 equal true false
    46 set .ULD_IN_1 unloader1
    47 set .ULD_OUT_1 unloader2
    48 set .ULD_IN_2 unloader3

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-17 instructions):
 
    26 sensor *tmp1 node1 @powerNetOut
    27 op sub *tmp2 *tmp0 *tmp1
    28 op floor :surplus *tmp2
-    * op greaterThan *tmp4 :surplus 10000
-    * jump *label5 equal *tmp4 false
+   29 jump *label5 lessThanEq :surplus 10000
    30 op sub *tmp5 @tick 3600
    31 jump *label6 always
    32 label *label5
 
   217 label *label32
   218 jump *label30 always
   219 label *label29
-    * op equal *tmp46 :fn6:reactors_fueled false
-    * jump *label33 equal *tmp46 false
+  220 jump *label33 notEqual :fn6:reactors_fueled false
   221 set :fn6:limit .FUEL_LIMIT_LOW
   222 print "Fuel "
   223 print :fn6:fuel_stored
 
   279 call *label0 :fn0*retval
   280 gotolabel *label41 :fn0
   281 set :charge :fn0*retval
-    * op greaterThan *tmp67 .START_POWER_REQ 0
-    * jump *label42 equal *tmp67 false
+  282 jump *label42 lessThanEq .START_POWER_REQ 0
   283 set :fn0:val .START_POWER_REQ
   284 setaddr :fn0*retaddr *label44
   285 call *label0 :fn0*retval
 
   309 op greaterThan *tmp76 .AVG_SURPLUS *tmp75
   310 op land *tmp77 *tmp74 *tmp76
   311 jump *label46 equal *tmp77 false
-    * op greaterThan *tmp79 .REACTORS_DESIRED 2
-    * jump *label48 equal *tmp79 false
+  312 jump *label48 lessThanEq .REACTORS_DESIRED 2
   313 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   314 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
   315 jump *label49 always
 
   333 label *label51
   334 label *label45
   335 label *label43
-    * op notEqual *tmp91 .REACTORS_DESIRED 5
-    * jump *label52 equal *tmp91 false
+  336 jump *label52 equal .REACTORS_DESIRED 5
   337 print "Require only "
   338 print .REACTORS_DESIRED
   339 print "/5 reactors."
 
   364 label *label57
   365 control config *tmp95 *tmp97
   366 set *tmp98 :fn1:uld_out
-    * op equal *tmp100 :fn1:fuel false
-    * jump *label58 equal *tmp100 false
+  367 jump *label58 notEqual :fn1:fuel false
   368 set *tmp101 .FUEL
   369 jump *label59 always
   370 label *label58
 
   428 jump *label65 always
   429 label *label64
   430 jump *label66 equal :fn3:enabled false
-    * op lessThan *tmp132 .REACTORS_DESIRED :fn3:reactor_num
-    * jump *label68 equal *tmp132 false
+  431 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   432 set *tmp134 :fn3:reactor
   433 control enabled *tmp134 false
   434 print "STOP unwanted"
 
   446 print "\n"
   447 jump *label71 always
   448 label *label70
-    * op lessThanEq *tmp143 :fn3:fuel 1
-    * jump *label72 equal *tmp143 false
+  449 jump *label72 greaterThan :fn3:fuel 1
   450 set *tmp145 :fn3:reactor
   451 control enabled *tmp145 false
   452 print "STOP fuel low"
   453 print "\n"
   454 jump *label73 always
   455 label *label72
-    * op lessThanEq *tmp147 :fn3:cryo .CRYO_ABORT
-    * jump *label74 equal *tmp147 false
+  456 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   457 set *tmp149 :fn3:reactor
   458 control enabled *tmp149 false
   459 print "STOP out of cryo"
   460 print "\n"
   461 jump *label75 always
   462 label *label74
-    * op lessThan *tmp151 :fn3:secs 30
-    * jump *label76 equal *tmp151 false
+  463 jump *label76 greaterThanEq :fn3:secs 30
   464 set :fn2:reactor :fn3:reactor
   465 set :fn2:time :fn3:t_startup
   466 setaddr :fn2*retaddr *label78
 
   524 op max :fn3:flow_units -0.1 *tmp173
   525 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
   526 op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * op lessThan *tmp177 .REACTORS_DESIRED :fn3:reactor_num
-    * jump *label83 equal *tmp177 false
+  527 jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   528 print "IDLE"
   529 print "\n"
   530 set :fn3:supply_fuel false
   531 jump *label84 always
   532 label *label83
   533 op add *tmp179 :fn3:flow_units :fn3:charge_units
-    * op lessThan *tmp180 *tmp179 1
-    * jump *label85 equal *tmp180 false
+  534 jump *label85 greaterThanEq *tmp179 1
   535 op mul *tmp182 :fn3:flow_units 1000
   536 op floor *tmp183 *tmp182
   537 op div :fn3:flow *tmp183 10
 
   551 op land *tmp189 :fn3:fuel_on *tmp188
   552 jump *label87 equal *tmp189 false
   553 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * op greaterThan *tmp192 *tmp191 .FUEL_REQ
-    * jump *label89 equal *tmp192 false
+  554 jump *label89 lessThanEq *tmp191 .FUEL_REQ
   555 print "WAIT fuel"
   556 print "\n"
   557 jump *label90 always
 
   562 jump *label88 always
   563 label *label87
   564 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * op lessThan *tmp195 :fn3:fuel_stored *tmp194
-    * jump *label91 equal *tmp195 false
+  565 jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
   566 print "WAIT buffer fuel"
   567 print "\n"
   568 jump *label92 always
   569 label *label91
-    * op lessThan *tmp197 :fn3:cryo :fn3:cryo_req
-    * jump *label93 equal *tmp197 false
+  570 jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
   571 print "WAIT cryo"
   572 print "\n"
   573 jump *label94 always
 
   585 label *label67
   586 label *label65
   587 sensor *tmp201 :fn3:reactor @enabled
-    * op notEqual *tmp202 :fn3:enabled *tmp201
-    * jump *label95 equal *tmp202 false
+  588 jump *label95 equal :fn3:enabled *tmp201
   589 set .RET_T_STARTUP @tick
   590 jump *label96 always
   591 label *label95
 
   598 end
   599 label *label4
   600 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
-    * op notEqual *tmp206 :fn4:enemy_found null
-    * jump *label98 equal *tmp206 false
+  601 jump *label98 equal :fn4:enemy_found null
   602 control enabled projector1 true
   603 control enabled projector2 true
   604 set *tmp210 .ULD_IN_1

Modifications by Iterated phase, Single Step Elimination, pass 1, iteration 1 (-7 instructions):
 
    66 print "\n"
    67 set *tmp8 true
    68 jump *label11 always
-    * jump *label13 always
    69 label *label12
    70 label *label13
    71 set *tmp8 false
 
   311 jump *label48 lessThanEq .REACTORS_DESIRED 2
   312 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
   313 op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
-    * jump *label49 always
   314 label *label48
   315 label *label49
-    * jump *label47 always
   316 label *label46
   317 label *label47
   318 op lessThan *tmp81 :fn8:stored 0.8
 
   325 op max :fn8:needed 1 *tmp87
   326 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   327 op min .REACTORS_DESIRED 5 *tmp89
-    * jump *label51 always
   328 label *label50
   329 label *label51
   330 label *label45
 
   334 print .REACTORS_DESIRED
   335 print "/5 reactors."
   336 print "\n"
-    * jump *label53 always
   337 label *label52
   338 label *label53
   339 printflush message1
 
   379 jump *label61 equal *tmp107 false
   380 set :fn2*retval 0
   381 jump *label60 always
-    * jump *label62 always
   382 label *label61
   383 label *label62
   384 op sub :fn2:time_left 30 :fn2:secs
 
   581 sensor *tmp201 :fn3:reactor @enabled
   582 jump *label95 equal :fn3:enabled *tmp201
   583 set .RET_T_STARTUP @tick
-    * jump *label96 always
   584 label *label95
   585 label *label96
   586 set :fn3*retval :fn3:supply_fuel

Modifications by Iterated phase, Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   383 label *label62
   384 op sub :fn2:time_left 30 :fn2:secs
   385 op mul *tmp110 :fn2:time_left :fn2:time_left
-    * op mul *tmp111 *tmp110 25
-    * op floor :fn2:charge_req *tmp111
+  386 op idiv :fn2:charge_req *tmp110 0.04
   387 set :fn2*retval :fn2:charge_req
   388 jump *label60 always
   389 set :fn2*retval null
 
   525 label *label83
   526 op add *tmp179 :fn3:flow_units :fn3:charge_units
   527 jump *label85 greaterThanEq *tmp179 1
-    * op mul *tmp182 :fn3:flow_units 1000
-    * op floor *tmp183 *tmp182
+  528 op idiv *tmp183 :fn3:flow_units 0.001
   529 op div :fn3:flow *tmp183 10
-    * op mul *tmp185 :fn3:charge_units 1000
-    * op floor *tmp186 *tmp185
+  530 op idiv *tmp186 :fn3:charge_units 0.001
   531 op div :fn3:charge *tmp186 10
   532 print "WAIT power. (%"
   533 print :fn3:charge

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-7 instructions):
 
    33 set *tmp5 @tick
    34 label *label6
    35 set :start_time *tmp5
-    * set :t_startup1 :start_time
-    * set :t_startup2 :start_time
-    * set :t_startup3 :start_time
-    * set :t_startup4 :start_time
-    * set :t_startup5 :start_time
-    * set .RET_T_STARTUP :t_startup1
+   36 set :t_startup1 *tmp5
+   37 set :t_startup2 *tmp5
+   38 set :t_startup3 *tmp5
+   39 set :t_startup4 *tmp5
+   40 set :t_startup5 *tmp5
+   41 set .RET_T_STARTUP :start_time
    42 set .REACTORS_DESIRED 5
    43 set .AVG_SURPLUS 500
    44 label *label7
 
    52 set .TOWER cyclone1
    53 set .CONTAINER vault1
    54 set .NODE node1
-    * set :fn4:unit .TOWER
+   55 set :fn4:unit cyclone1
    56 setaddr :fn4*retaddr *label10
    57 call *label4 :fn4*retval
    58 gotolabel *label10 :fn4
 
    70 label *label13
    71 set *tmp8 false
    72 jump *label11 always
-    * set *tmp8 null
    73 label *label11
-    * op or :emerg_shutdown :emerg_shutdown *tmp8
+   74 op or :emerg_shutdown :fn4*retval *tmp8
    75 set :fn2:reactor reactor1
    76 set :fn2:time :t_startup1
    77 setaddr :fn2*retaddr *label14
 
    84 call *label2 :fn2*retval
    85 gotolabel *label15 :fn2
    86 set *tmp15 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp15
+   87 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    88 set :fn2:reactor reactor3
    89 set :fn2:time :t_startup3
    90 setaddr :fn2*retaddr *label16
    91 call *label2 :fn2*retval
    92 gotolabel *label16 :fn2
    93 set *tmp16 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp16
+   94 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    95 set :fn2:reactor reactor4
    96 set :fn2:time :t_startup4
    97 setaddr :fn2*retaddr *label17
    98 call *label2 :fn2*retval
    99 gotolabel *label17 :fn2
   100 set *tmp17 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp17
+  101 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   102 set :fn2:reactor reactor5
   103 set :fn2:time :t_startup5
   104 setaddr :fn2*retaddr *label18
   105 call *label2 :fn2*retval
   106 gotolabel *label18 :fn2
   107 set *tmp18 :fn2*retval
-    * op add .START_POWER_REQ .START_POWER_REQ *tmp18
+  108 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   109 set :fn3:reactor reactor1
   110 set :fn3:reactor_num 1
   111 set :fn3:emerg_shutdown :emerg_shutdown
 
   116 gotolabel *label19 :fn3
   117 set :fuel_1 :fn3*retval
   118 set :t_startup1 .RET_T_STARTUP
-    * set :fn1:fuel :fuel_1
-    * set :fn1:uld_in .ULD_IN_1
-    * set :fn1:uld_out .ULD_OUT_1
+  119 set :fn1:fuel :fn3*retval
+  120 set :fn1:uld_in unloader1
+  121 set :fn1:uld_out unloader2
   122 setaddr :fn1*retaddr *label20
   123 call *label1 :fn1*retval
   124 gotolabel *label20 :fn1
 
   132 gotolabel *label21 :fn3
   133 set :fuel_2 :fn3*retval
   134 set :t_startup2 .RET_T_STARTUP
-    * set :fn1:fuel :fuel_2
-    * set :fn1:uld_in .ULD_IN_2
-    * set :fn1:uld_out .ULD_OUT_2
+  135 set :fn1:fuel :fn3*retval
+  136 set :fn1:uld_in unloader3
+  137 set :fn1:uld_out unloader4
   138 setaddr :fn1*retaddr *label22
   139 call *label1 :fn1*retval
   140 gotolabel *label22 :fn1
-    * set :fn4:unit .TOWER
+  141 set :fn4:unit cyclone1
   142 setaddr :fn4*retaddr *label23
   143 call *label4 :fn4*retval
   144 gotolabel *label23 :fn4
   145 set *tmp23 :fn4*retval
-    * op or :emerg_shutdown :emerg_shutdown *tmp23
+  146 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   147 set :fn3:reactor reactor3
   148 set :fn3:reactor_num 3
   149 set :fn3:emerg_shutdown :emerg_shutdown
 
   175 set :fuel_5 :fn3*retval
   176 set :t_startup5 .RET_T_STARTUP
   177 op or *tmp27 :fuel_3 :fuel_4
-    * op or :fuel_many *tmp27 :fuel_5
+  178 op or :fuel_many *tmp27 :fn3*retval
   179 set :fn1:fuel :fuel_many
-    * set :fn1:uld_in .ULD_IN_MANY
-    * set :fn1:uld_out .ULD_OUT_MANY
+  180 set :fn1:uld_in unloader5
+  181 set :fn1:uld_out unloader6
   182 setaddr :fn1*retaddr *label27
   183 call *label1 :fn1*retval
   184 gotolabel *label27 :fn1
   185 op or *tmp30 :fuel_1 :fuel_2
   186 op or :fn6:reactors_fueled *tmp30 :fuel_many
   187 set :fn6:emerg_shutdown :emerg_shutdown
-    * sensor *tmp33 .NODE @powerNetStored
+  188 sensor *tmp33 node1 @powerNetStored
   189 op floor :fn6:charge *tmp33
-    * sensor *tmp35 .NODE @powerNetIn
-    * sensor *tmp36 .NODE @powerNetOut
+  190 sensor *tmp35 node1 @powerNetIn
+  191 sensor *tmp36 node1 @powerNetOut
   192 op sub *tmp37 *tmp35 *tmp36
   193 op floor :fn6:surplus *tmp37
-    * sensor :fn6:fuel_stored .CONTAINER @blast-compound
-    * op lessThan *tmp40 :fn6:charge .PWR_ABORT
-    * op lessThan *tmp41 :fn6:surplus .FLOW_ABORT
+  194 sensor :fn6:fuel_stored vault1 @blast-compound
+  195 op lessThan *tmp40 :fn6:charge 5000
+  196 op lessThan *tmp41 :fn6:surplus -500
   197 op land *tmp42 *tmp40 *tmp41
-    * op or *tmp43 *tmp42 :fn6:emerg_shutdown
+  198 op or *tmp43 *tmp42 :emerg_shutdown
   199 jump *label29 equal *tmp43 false
   200 set :fn6:limit 0
   201 print "Central Fuel at "
   202 print :fn6:fuel_stored
   203 print " "
   204 print "/ "
-    * print :fn6:limit
+  205 print 0
   206 print " "
   207 print "- "
-    * jump *label31 equal :fn6:emerg_shutdown false
+  208 jump *label31 equal :emerg_shutdown false
   209 print " Enemies detected."
   210 print "\n"
   211 jump *label32 always
 
   216 jump *label30 always
   217 label *label29
   218 jump *label33 notEqual :fn6:reactors_fueled false
-    * set :fn6:limit .FUEL_LIMIT_LOW
+  219 set :fn6:limit 150
   220 print "Fuel "
   221 print :fn6:fuel_stored
   222 print " "
   223 print "/ "
-    * print :fn6:limit
+  224 print .FUEL_LIMIT_LOW
   225 print " "
   226 print "(due to emergency)"
   227 print "\n"
   228 jump *label34 always
   229 label *label33
-    * set :fn6:limit .FUEL_LIMIT
+  230 set :fn6:limit 800
   231 print "Fuel "
   232 print :fn6:fuel_stored
   233 print " "
   234 print "/ "
-    * print :fn6:limit
+  235 print .FUEL_LIMIT
   236 print "\"
   237 print "n"
   238 label *label34
   239 label *label30
   240 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   241 jump *label28 always
-    * set *tmp32 null
   242 label *label28
   243 set :feed_mixers *tmp32
-    * set *tmp49 .ULD_MIXER
-    * jump *label35 equal :feed_mixers false
-    * set *tmp51 .MIXER_IN
+  244 set *tmp49 unloader7
+  245 jump *label35 equal *tmp32 false
+  246 set *tmp51 @pyratite
   247 jump *label36 always
   248 label *label35
-    * set *tmp51 .FUEL_OFF
+  249 set *tmp51 @scrap
   250 label *label36
-    * control config *tmp49 *tmp51
-    * sensor *tmp53 .NODE @powerNetStored
-    * sensor *tmp54 .NODE @powerNetCapacity
+  251 control config .ULD_MIXER *tmp51
+  252 sensor *tmp53 node1 @powerNetStored
+  253 sensor *tmp54 node1 @powerNetCapacity
   254 op div :fn7:stored_pc *tmp53 *tmp54
   255 op greaterThan *tmp56 :fn7:stored_pc 0.9
   256 op lessThan *tmp57 .START_POWER_REQ 10
 
   271 call *label0 :fn0*retval
   272 gotolabel *label40 :fn0
   273 set :surplus :fn0*retval
-    * sensor :fn0:val .NODE @powerNetStored
+  274 sensor :fn0:val node1 @powerNetStored
   275 setaddr :fn0*retaddr *label41
   276 call *label0 :fn0*retval
   277 gotolabel *label41 :fn0
 
   283 gotolabel *label44 :fn0
   284 set :req :fn0*retval
   285 print "Req "
-    * print :req
+  286 print :fn0*retval
   287 print "kJ / "
   288 print :charge
   289 print "kJ. "
 
   295 print "Power "
   296 print :surplus
   297 print "kW, "
-    * print :charge
+  298 print :fn0*retval
   299 print "kJ"
   300 print "\n"
-    * sensor *tmp71 .NODE @powerNetStored
-    * sensor *tmp72 .NODE @powerNetCapacity
+  301 sensor *tmp71 node1 @powerNetStored
+  302 sensor *tmp72 node1 @powerNetCapacity
   303 op div :fn8:stored *tmp71 *tmp72
   304 op greaterThan *tmp74 :fn8:stored 0.98
-    * op add *tmp75 .GENERATOR_OUTPUT .GOAL_BUFFER
-    * op greaterThan *tmp76 .AVG_SURPLUS *tmp75
+  305 op add *tmp75 6500 10000
+  306 op greaterThan *tmp76 .AVG_SURPLUS 16500
   307 op land *tmp77 *tmp74 *tmp76
   308 jump *label46 equal *tmp77 false
   309 jump *label48 lessThanEq .REACTORS_DESIRED 2
   310 op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
-    * op sub .AVG_SURPLUS .AVG_SURPLUS .GENERATOR_OUTPUT
+  311 op sub .AVG_SURPLUS .AVG_SURPLUS 6500
   312 label *label48
   313 label *label49
   314 label *label46
   315 label *label47
   316 op lessThan *tmp81 :fn8:stored 0.8
-    * op mul *tmp82 .GOAL_BUFFER 0.8
-    * op lessThan *tmp83 .AVG_SURPLUS *tmp82
+  317 op mul *tmp82 10000 0.8
+  318 op lessThan *tmp83 .AVG_SURPLUS 8000
   319 op land *tmp84 *tmp81 *tmp83
   320 jump *label50 equal *tmp84 false
-    * op sub *tmp86 .AVG_SURPLUS .GOAL_BUFFER
-    * op idiv *tmp87 *tmp86 .GENERATOR_OUTPUT
+  321 op sub *tmp86 .AVG_SURPLUS 10000
+  322 op idiv *tmp87 *tmp86 6500
   323 op max :fn8:needed 1 *tmp87
   324 op add *tmp89 :fn8:needed .REACTORS_DESIRED
   325 op min .REACTORS_DESIRED 5 *tmp89
 
   343 op idiv *tmp93 :fn0:val 100
   344 op div :fn0*retval *tmp93 10
   345 jump *label54 always
-    * set :fn0*retval null
   346 label *label54
   347 goto :fn0*retaddr :fn0
   348 end
 
   354 label *label56
   355 set *tmp97 .FUEL_OFF
   356 label *label57
-    * control config *tmp95 *tmp97
+  357 control config :fn1:uld_in *tmp97
   358 set *tmp98 :fn1:uld_out
   359 jump *label58 notEqual :fn1:fuel false
   360 set *tmp101 .FUEL
 
   362 label *label58
   363 set *tmp101 .FUEL_OFF
   364 label *label59
-    * control config *tmp98 *tmp101
+  365 control config :fn1:uld_out *tmp101
   366 label *label55
   367 goto :fn1*retaddr :fn1
   368 end
 
   383 op idiv :fn2:charge_req *tmp110 0.04
   384 set :fn2*retval :fn2:charge_req
   385 jump *label60 always
-    * set :fn2*retval null
   386 label *label60
   387 goto :fn2*retaddr :fn2
   388 end
 
   410 print "- "
   411 jump *label64 equal :fn3:emerg_shutdown false
   412 set *tmp129 :fn3:reactor
-    * control enabled *tmp129 false
+  413 control enabled :fn3:reactor false
   414 print "emergency mode"
   415 print "\n"
   416 set :fn3:supply_fuel false
 
   419 jump *label66 equal :fn3:enabled false
   420 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   421 set *tmp134 :fn3:reactor
-    * control enabled *tmp134 false
+  422 control enabled :fn3:reactor false
   423 print "STOP unwanted"
   424 print "\n"
   425 jump *label69 always
 
   430 op land *tmp139 *tmp136 *tmp138
   431 jump *label70 equal *tmp139 false
   432 set *tmp141 :fn3:reactor
-    * control enabled *tmp141 false
+  433 control enabled :fn3:reactor false
   434 print "STOP system fuel low"
   435 print "\n"
   436 jump *label71 always
   437 label *label70
   438 jump *label72 greaterThan :fn3:fuel 1
   439 set *tmp145 :fn3:reactor
-    * control enabled *tmp145 false
+  440 control enabled :fn3:reactor false
   441 print "STOP fuel low"
   442 print "\n"
   443 jump *label73 always
   444 label *label72
   445 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   446 set *tmp149 :fn3:reactor
-    * control enabled *tmp149 false
+  447 control enabled :fn3:reactor false
   448 print "STOP out of cryo"
   449 print "\n"
   450 jump *label75 always
 
   456 call *label2 :fn2*retval
   457 gotolabel *label78 :fn2
   458 set :fn3:charge_req :fn2*retval
-    * op sub *tmp153 :fn3:charge :fn3:charge_req
+  459 op sub *tmp153 :fn3:charge :fn2*retval
   460 op lessThan *tmp154 *tmp153 .PWR_ABORT
   461 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
   462 op land *tmp156 *tmp154 *tmp155
   463 jump *label79 equal *tmp156 false
   464 set *tmp158 :fn3:reactor
-    * control enabled *tmp158 false
+  465 control enabled :fn3:reactor false
   466 print "START FAIL battery"
   467 print "\n"
   468 set :fn3:supply_fuel false
 
   473 print :fn3:time_left
   474 print " "
   475 print "secs, req "
-    * print :fn3:charge_req
+  476 print :fn2*retval
   477 print "J"
   478 print "\n"
   479 label *label80
 
   484 op land *tmp163 *tmp161 *tmp162
   485 jump *label81 equal *tmp163 false
   486 set *tmp165 :fn3:reactor
-    * control enabled *tmp165 false
+  487 control enabled :fn3:reactor false
   488 print "ABANDON - battery crit"
   489 print "\n"
   490 set :fn3:supply_fuel false
 
   563 print "\n"
   564 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
   565 set *tmp199 :fn3:reactor
-    * control enabled *tmp199 true
+  566 control enabled :fn3:reactor true
   567 label *label94
   568 label *label92
   569 label *label88
 
   578 label *label96
   579 set :fn3*retval :fn3:supply_fuel
   580 jump *label63 always
-    * set :fn3*retval null
   581 label *label63
   582 goto :fn3*retaddr :fn3
   583 end
 
   587 control enabled projector1 true
   588 control enabled projector2 true
   589 set *tmp210 .ULD_IN_1
-    * control config *tmp210 .FUEL_OFF
+  590 control config .ULD_IN_1 .FUEL_OFF
   591 set *tmp212 .ULD_OUT_1
-    * control config *tmp212 .FUEL
+  592 control config .ULD_OUT_1 .FUEL
   593 set *tmp214 .ULD_IN_2
-    * control config *tmp214 .FUEL_OFF
+  594 control config .ULD_IN_2 .FUEL_OFF
   595 set *tmp216 .ULD_OUT_2
-    * control config *tmp216 .FUEL
+  596 control config .ULD_OUT_2 .FUEL
   597 set *tmp218 .ULD_IN_MANY
-    * control config *tmp218 .FUEL_OFF
+  598 control config .ULD_IN_MANY .FUEL_OFF
   599 set *tmp220 .ULD_OUT_MANY
-    * control config *tmp220 .FUEL
+  600 control config .ULD_OUT_MANY .FUEL
   601 set *tmp222 .ULD_MIXER
-    * control config *tmp222 .FUEL_OFF
+  602 control config .ULD_MIXER .FUEL_OFF
   603 control enabled reactor1 false
   604 control enabled reactor2 false
   605 control enabled reactor3 false
 
   607 control enabled reactor5 false
   608 set :fn4*retval true
   609 jump *label97 always
-    * set *tmp207 null
   610 jump *label99 always
   611 label *label98
   612 control enabled projector1 false
   613 control enabled projector2 false
   614 set :fn4*retval false
   615 jump *label97 always
-    * set *tmp207 null
   616 label *label99
-    * set :fn4*retval *tmp207
+  617 set :fn4*retval null
   618 label *label97
   619 goto :fn4*retaddr :fn4
   620 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-35 instructions):
     0 printflush message1
     1 set .FUEL @blast-compound
     2 set .FUEL_OFF @scrap
-    * set .MIXER_IN @pyratite
     3 set .PWR_REQ 23000
     4 set .FLOW_REQ 2000
     5 set .PWR_ABANDON 2000
 
    11 set .FUEL_LIMIT_LOW 150
    12 set .FUEL_LIMIT 800
    13 set .FUEL_TOT_ABORT 15
-    * set .GENERATOR_OUTPUT 6500
-    * set .GOAL_BUFFER 10000
    14 set .CRYO_REQ 3
    15 set .CRYO_REQ_EA 2
    16 set .CRYO_ABORT 1
 
    35 set :t_startup3 *tmp5
    36 set :t_startup4 *tmp5
    37 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP :start_time
+   38 set .RET_T_STARTUP *tmp5
    39 set .REACTORS_DESIRED 5
    40 set .AVG_SURPLUS 500
    41 label *label7
 
    46 set .ULD_IN_MANY unloader5
    47 set .ULD_OUT_MANY unloader6
    48 set .ULD_MIXER unloader7
-    * set .TOWER cyclone1
    49 set .CONTAINER vault1
    50 set .NODE node1
    51 set :fn4:unit cyclone1
    52 setaddr :fn4*retaddr *label10
    53 call *label4 :fn4*retval
    54 gotolabel *label10 :fn4
-    * set :emerg_shutdown :fn4*retval
    55 op notEqual *tmp9 switch1 null
    56 sensor *tmp10 switch1 @enabled
    57 op equal *tmp11 *tmp10 false
 
    78 setaddr :fn2*retaddr *label15
    79 call *label2 :fn2*retval
    80 gotolabel *label15 :fn2
-    * set *tmp15 :fn2*retval
    81 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    82 set :fn2:reactor reactor3
    83 set :fn2:time :t_startup3
    84 setaddr :fn2*retaddr *label16
    85 call *label2 :fn2*retval
    86 gotolabel *label16 :fn2
-    * set *tmp16 :fn2*retval
    87 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    88 set :fn2:reactor reactor4
    89 set :fn2:time :t_startup4
    90 setaddr :fn2*retaddr *label17
    91 call *label2 :fn2*retval
    92 gotolabel *label17 :fn2
-    * set *tmp17 :fn2*retval
    93 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
    94 set :fn2:reactor reactor5
    95 set :fn2:time :t_startup5
    96 setaddr :fn2*retaddr *label18
    97 call *label2 :fn2*retval
    98 gotolabel *label18 :fn2
-    * set *tmp18 :fn2*retval
    99 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   100 set :fn3:reactor reactor1
   101 set :fn3:reactor_num 1
 
   133 setaddr :fn4*retaddr *label23
   134 call *label4 :fn4*retval
   135 gotolabel *label23 :fn4
-    * set *tmp23 :fn4*retval
   136 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   137 set :fn3:reactor reactor3
   138 set :fn3:reactor_num 3
 
   174 gotolabel *label27 :fn1
   175 op or *tmp30 :fuel_1 :fuel_2
   176 op or :fn6:reactors_fueled *tmp30 :fuel_many
-    * set :fn6:emerg_shutdown :emerg_shutdown
   177 sensor *tmp33 node1 @powerNetStored
   178 op floor :fn6:charge *tmp33
   179 sensor *tmp35 node1 @powerNetIn
 
   210 print :fn6:fuel_stored
   211 print " "
   212 print "/ "
-    * print .FUEL_LIMIT_LOW
+  213 print 150
   214 print " "
   215 print "(due to emergency)"
   216 print "\n"
 
   221 print :fn6:fuel_stored
   222 print " "
   223 print "/ "
-    * print .FUEL_LIMIT
+  224 print 800
   225 print "\"
   226 print "n"
   227 label *label34
 
   229 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   230 jump *label28 always
   231 label *label28
-    * set :feed_mixers *tmp32
-    * set *tmp49 unloader7
   232 jump *label35 equal *tmp32 false
   233 set *tmp51 @pyratite
   234 jump *label36 always
   235 label *label35
   236 set *tmp51 @scrap
   237 label *label36
-    * control config .ULD_MIXER *tmp51
+  238 control config unloader7 *tmp51
   239 sensor *tmp53 node1 @powerNetStored
   240 sensor *tmp54 node1 @powerNetCapacity
   241 op div :fn7:stored_pc *tmp53 *tmp54
 
   268 setaddr :fn0*retaddr *label44
   269 call *label0 :fn0*retval
   270 gotolabel *label44 :fn0
-    * set :req :fn0*retval
   271 print "Req "
   272 print :fn0*retval
   273 print "kJ / "
 
   288 sensor *tmp72 node1 @powerNetCapacity
   289 op div :fn8:stored *tmp71 *tmp72
   290 op greaterThan *tmp74 :fn8:stored 0.98
-    * op add *tmp75 6500 10000
   291 op greaterThan *tmp76 .AVG_SURPLUS 16500
   292 op land *tmp77 *tmp74 *tmp76
   293 jump *label46 equal *tmp77 false
 
   299 label *label46
   300 label *label47
   301 op lessThan *tmp81 :fn8:stored 0.8
-    * op mul *tmp82 10000 0.8
   302 op lessThan *tmp83 .AVG_SURPLUS 8000
   303 op land *tmp84 *tmp81 *tmp83
   304 jump *label50 equal *tmp84 false
 
   331 goto :fn0*retaddr :fn0
   332 end
   333 label *label1
-    * set *tmp95 :fn1:uld_in
   334 jump *label56 equal :fn1:fuel false
   335 set *tmp97 .FUEL
   336 jump *label57 always
 
   338 set *tmp97 .FUEL_OFF
   339 label *label57
   340 control config :fn1:uld_in *tmp97
-    * set *tmp98 :fn1:uld_out
   341 jump *label58 notEqual :fn1:fuel false
   342 set *tmp101 .FUEL
   343 jump *label59 always
 
   391 print " "
   392 print "- "
   393 jump *label64 equal :fn3:emerg_shutdown false
-    * set *tmp129 :fn3:reactor
   394 control enabled :fn3:reactor false
   395 print "emergency mode"
   396 print "\n"
 
   399 label *label64
   400 jump *label66 equal :fn3:enabled false
   401 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * set *tmp134 :fn3:reactor
   402 control enabled :fn3:reactor false
   403 print "STOP unwanted"
   404 print "\n"
 
   409 op lessThan *tmp138 :fn3:fuel_stored *tmp137
   410 op land *tmp139 *tmp136 *tmp138
   411 jump *label70 equal *tmp139 false
-    * set *tmp141 :fn3:reactor
   412 control enabled :fn3:reactor false
   413 print "STOP system fuel low"
   414 print "\n"
   415 jump *label71 always
   416 label *label70
   417 jump *label72 greaterThan :fn3:fuel 1
-    * set *tmp145 :fn3:reactor
   418 control enabled :fn3:reactor false
   419 print "STOP fuel low"
   420 print "\n"
   421 jump *label73 always
   422 label *label72
   423 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
-    * set *tmp149 :fn3:reactor
   424 control enabled :fn3:reactor false
   425 print "STOP out of cryo"
   426 print "\n"
 
   432 setaddr :fn2*retaddr *label78
   433 call *label2 :fn2*retval
   434 gotolabel *label78 :fn2
-    * set :fn3:charge_req :fn2*retval
   435 op sub *tmp153 :fn3:charge :fn2*retval
   436 op lessThan *tmp154 *tmp153 .PWR_ABORT
   437 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
   438 op land *tmp156 *tmp154 *tmp155
   439 jump *label79 equal *tmp156 false
-    * set *tmp158 :fn3:reactor
   440 control enabled :fn3:reactor false
   441 print "START FAIL battery"
   442 print "\n"
 
   458 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
   459 op land *tmp163 *tmp161 *tmp162
   460 jump *label81 equal *tmp163 false
-    * set *tmp165 :fn3:reactor
   461 control enabled :fn3:reactor false
   462 print "ABANDON - battery crit"
   463 print "\n"
 
   536 print "STARTUP"
   537 print "\n"
   538 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * set *tmp199 :fn3:reactor
   539 control enabled :fn3:reactor true
   540 label *label94
   541 label *label92
 
   559 jump *label98 equal :fn4:enemy_found null
   560 control enabled projector1 true
   561 control enabled projector2 true
-    * set *tmp210 .ULD_IN_1
   562 control config .ULD_IN_1 .FUEL_OFF
-    * set *tmp212 .ULD_OUT_1
   563 control config .ULD_OUT_1 .FUEL
-    * set *tmp214 .ULD_IN_2
   564 control config .ULD_IN_2 .FUEL_OFF
-    * set *tmp216 .ULD_OUT_2
   565 control config .ULD_OUT_2 .FUEL
-    * set *tmp218 .ULD_IN_MANY
   566 control config .ULD_IN_MANY .FUEL_OFF
-    * set *tmp220 .ULD_OUT_MANY
   567 control config .ULD_OUT_MANY .FUEL
-    * set *tmp222 .ULD_MIXER
   568 control config .ULD_MIXER .FUEL_OFF
   569 control enabled reactor1 false
   570 control enabled reactor2 false
 
   580 set :fn4*retval false
   581 jump *label97 always
   582 label *label99
-    * set :fn4*retval null
   583 label *label97
   584 goto :fn4*retaddr :fn4
   585 end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 3 (-3 instructions):
 
     8 set .FLOW_ABORT -500
     9 set .FUEL_REQ 10
    10 set .FUEL_TOT_REQ 45
-    * set .FUEL_LIMIT_LOW 150
-    * set .FUEL_LIMIT 800
    11 set .FUEL_TOT_ABORT 15
    12 set .CRYO_REQ 3
    13 set .CRYO_REQ_EA 2
 
    27 label *label5
    28 set *tmp5 @tick
    29 label *label6
-    * set :start_time *tmp5
    30 set :t_startup1 *tmp5
    31 set :t_startup2 *tmp5
    32 set :t_startup3 *tmp5

Modifications by Iterated phase, If Expression Optimization, pass 1, iteration 1 (-3 instructions):
 
   227 jump *label28 always
   228 label *label28
   229 jump *label35 equal *tmp32 false
-    * set *tmp51 @pyratite
+  230 control config unloader7 @pyratite
   231 jump *label36 always
   232 label *label35
-    * set *tmp51 @scrap
+  233 control config unloader7 @scrap
   234 label *label36
-    * control config unloader7 *tmp51
   235 sensor *tmp53 node1 @powerNetStored
   236 sensor *tmp54 node1 @powerNetCapacity
   237 op div :fn7:stored_pc *tmp53 *tmp54
 
   328 end
   329 label *label1
   330 jump *label56 equal :fn1:fuel false
-    * set *tmp97 .FUEL
+  331 control config :fn1:uld_in .FUEL
   332 jump *label57 always
   333 label *label56
-    * set *tmp97 .FUEL_OFF
+  334 control config :fn1:uld_in .FUEL_OFF
   335 label *label57
-    * control config :fn1:uld_in *tmp97
   336 jump *label58 notEqual :fn1:fuel false
-    * set *tmp101 .FUEL
+  337 control config :fn1:uld_out .FUEL
   338 jump *label59 always
   339 label *label58
-    * set *tmp101 .FUEL_OFF
+  340 control config :fn1:uld_out .FUEL_OFF
   341 label *label59
-    * control config :fn1:uld_out *tmp101
   342 label *label55
   343 goto :fn1*retaddr :fn1
   344 end

Modifications by Inline function 'kilo' defined at line 117:1 (-2 instructions):
 
   250 label *label39
   251 label *label37
   252 set :fn0:val .AVG_SURPLUS
-    * setaddr :fn0*retaddr *label40
-    * call *label0 :fn0*retval
-    * gotolabel *label40 :fn0
+  253 label *label100
+  254 op idiv *tmp93 :fn0:val 100
+  255 op div :fn0*retval *tmp93 10
+  256 jump *label101 always
+  257 label *label101
   258 set :surplus :fn0*retval
   259 sensor :fn0:val node1 @powerNetStored
-    * setaddr :fn0*retaddr *label41
-    * call *label0 :fn0*retval
-    * gotolabel *label41 :fn0
+  260 label *label102
+  261 op idiv *tmp93 :fn0:val 100
+  262 op div :fn0*retval *tmp93 10
+  263 jump *label103 always
+  264 label *label103
   265 set :charge :fn0*retval
   266 jump *label42 lessThanEq .START_POWER_REQ 0
   267 set :fn0:val .START_POWER_REQ
-    * setaddr :fn0*retaddr *label44
-    * call *label0 :fn0*retval
-    * gotolabel *label44 :fn0
+  268 label *label104
+  269 op idiv *tmp93 :fn0:val 100
+  270 op div :fn0*retval *tmp93 10
+  271 jump *label105 always
+  272 label *label105
   273 print "Req "
   274 print :fn0*retval
   275 print "kJ / "
 
   325 jump *label7 always
   326 label *label9
   327 end
-    * label *label0
-    * op idiv *tmp93 :fn0:val 100
-    * op div :fn0*retval *tmp93 10
-    * jump *label54 always
-    * label *label54
-    * goto :fn0*retaddr :fn0
-    * end
   328 label *label1
   329 jump *label56 equal :fn1:fuel false
   330 control config :fn1:uld_in .FUEL

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   251 label *label37
   252 set :fn0:val .AVG_SURPLUS
   253 label *label100
-    * op idiv *tmp93 :fn0:val 100
+  254 op idiv *tmp93 .AVG_SURPLUS 100
   255 op div :fn0*retval *tmp93 10
   256 jump *label101 always
   257 label *label101
 
   266 jump *label42 lessThanEq .START_POWER_REQ 0
   267 set :fn0:val .START_POWER_REQ
   268 label *label104
-    * op idiv *tmp93 :fn0:val 100
+  269 op idiv *tmp93 .START_POWER_REQ 100
   270 op div :fn0*retval *tmp93 10
   271 jump *label105 always
   272 label *label105

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-2 instructions):
 
   249 control enabled generator2 true
   250 label *label39
   251 label *label37
-    * set :fn0:val .AVG_SURPLUS
   252 label *label100
   253 op idiv *tmp93 .AVG_SURPLUS 100
   254 op div :fn0*retval *tmp93 10
 
   263 label *label103
   264 set :charge :fn0*retval
   265 jump *label42 lessThanEq .START_POWER_REQ 0
-    * set :fn0:val .START_POWER_REQ
   266 label *label104
   267 op idiv *tmp93 .START_POWER_REQ 100
   268 op div :fn0*retval *tmp93 10

Modifications by Inline function 'update_fuel' defined at line 121:1 (+8 instructions):
 
   107 set :fn1:fuel :fn3*retval
   108 set :fn1:uld_in unloader1
   109 set :fn1:uld_out unloader2
-    * setaddr :fn1*retaddr *label20
-    * call *label1 :fn1*retval
-    * gotolabel *label20 :fn1
+  110 label *label106
+  111 jump *label107 equal :fn1:fuel false
+  112 control config :fn1:uld_in .FUEL
+  113 jump *label108 always
+  114 label *label107
+  115 control config :fn1:uld_in .FUEL_OFF
+  116 label *label108
+  117 jump *label109 notEqual :fn1:fuel false
+  118 control config :fn1:uld_out .FUEL
+  119 jump *label110 always
+  120 label *label109
+  121 control config :fn1:uld_out .FUEL_OFF
+  122 label *label110
+  123 label *label111
   124 set :fn3:reactor reactor2
   125 set :fn3:reactor_num 2
   126 set :fn3:emerg_shutdown :emerg_shutdown
 
   134 set :fn1:fuel :fn3*retval
   135 set :fn1:uld_in unloader3
   136 set :fn1:uld_out unloader4
-    * setaddr :fn1*retaddr *label22
-    * call *label1 :fn1*retval
-    * gotolabel *label22 :fn1
+  137 label *label112
+  138 jump *label113 equal :fn1:fuel false
+  139 control config :fn1:uld_in .FUEL
+  140 jump *label114 always
+  141 label *label113
+  142 control config :fn1:uld_in .FUEL_OFF
+  143 label *label114
+  144 jump *label115 notEqual :fn1:fuel false
+  145 control config :fn1:uld_out .FUEL
+  146 jump *label116 always
+  147 label *label115
+  148 control config :fn1:uld_out .FUEL_OFF
+  149 label *label116
+  150 label *label117
   151 set :fn4:unit cyclone1
   152 setaddr :fn4*retaddr *label23
   153 call *label4 :fn4*retval
 
   188 set :fn1:fuel :fuel_many
   189 set :fn1:uld_in unloader5
   190 set :fn1:uld_out unloader6
-    * setaddr :fn1*retaddr *label27
-    * call *label1 :fn1*retval
-    * gotolabel *label27 :fn1
+  191 label *label118
+  192 jump *label119 equal :fn1:fuel false
+  193 control config :fn1:uld_in .FUEL
+  194 jump *label120 always
+  195 label *label119
+  196 control config :fn1:uld_in .FUEL_OFF
+  197 label *label120
+  198 jump *label121 notEqual :fn1:fuel false
+  199 control config :fn1:uld_out .FUEL
+  200 jump *label122 always
+  201 label *label121
+  202 control config :fn1:uld_out .FUEL_OFF
+  203 label *label122
+  204 label *label123
   205 op or *tmp30 :fuel_1 :fuel_2
   206 op or :fn6:reactors_fueled *tmp30 :fuel_many
   207 sensor *tmp33 node1 @powerNetStored
 
   356 jump *label7 always
   357 label *label9
   358 end
-    * label *label1
-    * jump *label56 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
-    * jump *label57 always
-    * label *label56
-    * control config :fn1:uld_in .FUEL_OFF
-    * label *label57
-    * jump *label58 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
-    * jump *label59 always
-    * label *label58
-    * control config :fn1:uld_out .FUEL_OFF
-    * label *label59
-    * label *label55
-    * goto :fn1*retaddr :fn1
-    * end
   359 label *label2
   360 op sub *tmp102 @tick :fn2:time
   361 op idiv :fn2:secs *tmp102 60

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   108 set :fn1:uld_in unloader1
   109 set :fn1:uld_out unloader2
   110 label *label106
-    * jump *label107 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  111 jump *label107 equal :fn3*retval false
+  112 control config unloader1 @blast-compound
   113 jump *label108 always
   114 label *label107
-    * control config :fn1:uld_in .FUEL_OFF
+  115 control config unloader1 @scrap
   116 label *label108
-    * jump *label109 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  117 jump *label109 notEqual :fn3*retval false
+  118 control config unloader2 @blast-compound
   119 jump *label110 always
   120 label *label109
-    * control config :fn1:uld_out .FUEL_OFF
+  121 control config unloader2 @scrap
   122 label *label110
   123 label *label111
   124 set :fn3:reactor reactor2
 
   135 set :fn1:uld_in unloader3
   136 set :fn1:uld_out unloader4
   137 label *label112
-    * jump *label113 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  138 jump *label113 equal :fn3*retval false
+  139 control config unloader3 @blast-compound
   140 jump *label114 always
   141 label *label113
-    * control config :fn1:uld_in .FUEL_OFF
+  142 control config unloader3 @scrap
   143 label *label114
-    * jump *label115 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  144 jump *label115 notEqual :fn3*retval false
+  145 control config unloader4 @blast-compound
   146 jump *label116 always
   147 label *label115
-    * control config :fn1:uld_out .FUEL_OFF
+  148 control config unloader4 @scrap
   149 label *label116
   150 label *label117
   151 set :fn4:unit cyclone1
 
   189 set :fn1:uld_in unloader5
   190 set :fn1:uld_out unloader6
   191 label *label118
-    * jump *label119 equal :fn1:fuel false
-    * control config :fn1:uld_in .FUEL
+  192 jump *label119 equal :fuel_many false
+  193 control config unloader5 @blast-compound
   194 jump *label120 always
   195 label *label119
-    * control config :fn1:uld_in .FUEL_OFF
+  196 control config unloader5 @scrap
   197 label *label120
-    * jump *label121 notEqual :fn1:fuel false
-    * control config :fn1:uld_out .FUEL
+  198 jump *label121 notEqual :fuel_many false
+  199 control config unloader6 @blast-compound
   200 jump *label122 always
   201 label *label121
-    * control config :fn1:uld_out .FUEL_OFF
+  202 control config unloader6 @scrap
   203 label *label122
   204 label *label123
   205 op or *tmp30 :fuel_1 :fuel_2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-9 instructions):
 
   104 gotolabel *label19 :fn3
   105 set :fuel_1 :fn3*retval
   106 set :t_startup1 .RET_T_STARTUP
-    * set :fn1:fuel :fn3*retval
-    * set :fn1:uld_in unloader1
-    * set :fn1:uld_out unloader2
   107 label *label106
   108 jump *label107 equal :fn3*retval false
   109 control config unloader1 @blast-compound
 
   128 gotolabel *label21 :fn3
   129 set :fuel_2 :fn3*retval
   130 set :t_startup2 .RET_T_STARTUP
-    * set :fn1:fuel :fn3*retval
-    * set :fn1:uld_in unloader3
-    * set :fn1:uld_out unloader4
   131 label *label112
   132 jump *label113 equal :fn3*retval false
   133 control config unloader3 @blast-compound
 
   179 set :t_startup5 .RET_T_STARTUP
   180 op or *tmp27 :fuel_3 :fuel_4
   181 op or :fuel_many *tmp27 :fn3*retval
-    * set :fn1:fuel :fuel_many
-    * set :fn1:uld_in unloader5
-    * set :fn1:uld_out unloader6
   182 label *label118
   183 jump *label119 equal :fuel_many false
   184 control config unloader5 @blast-compound

Modifications by Inline function 'check_radar' defined at line 259:1 (+17 instructions):
 
    46 set .CONTAINER vault1
    47 set .NODE node1
    48 set :fn4:unit cyclone1
-    * setaddr :fn4*retaddr *label10
-    * call *label4 :fn4*retval
-    * gotolabel *label10 :fn4
+   49 label *label124
+   50 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+   51 jump *label125 equal :fn4:enemy_found null
+   52 control enabled projector1 true
+   53 control enabled projector2 true
+   54 control config .ULD_IN_1 .FUEL_OFF
+   55 control config .ULD_OUT_1 .FUEL
+   56 control config .ULD_IN_2 .FUEL_OFF
+   57 control config .ULD_OUT_2 .FUEL
+   58 control config .ULD_IN_MANY .FUEL_OFF
+   59 control config .ULD_OUT_MANY .FUEL
+   60 control config .ULD_MIXER .FUEL_OFF
+   61 control enabled reactor1 false
+   62 control enabled reactor2 false
+   63 control enabled reactor3 false
+   64 control enabled reactor4 false
+   65 control enabled reactor5 false
+   66 set :fn4*retval true
+   67 jump *label127 always
+   68 jump *label126 always
+   69 label *label125
+   70 control enabled projector1 false
+   71 control enabled projector2 false
+   72 set :fn4*retval false
+   73 jump *label127 always
+   74 label *label126
+   75 label *label127
    76 op notEqual *tmp9 switch1 null
    77 sensor *tmp10 switch1 @enabled
    78 op equal *tmp11 *tmp10 false
 
   167 label *label116
   168 label *label117
   169 set :fn4:unit cyclone1
-    * setaddr :fn4*retaddr *label23
-    * call *label4 :fn4*retval
-    * gotolabel *label23 :fn4
+  170 label *label128
+  171 radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+  172 jump *label129 equal :fn4:enemy_found null
+  173 control enabled projector1 true
+  174 control enabled projector2 true
+  175 control config .ULD_IN_1 .FUEL_OFF
+  176 control config .ULD_OUT_1 .FUEL
+  177 control config .ULD_IN_2 .FUEL_OFF
+  178 control config .ULD_OUT_2 .FUEL
+  179 control config .ULD_IN_MANY .FUEL_OFF
+  180 control config .ULD_OUT_MANY .FUEL
+  181 control config .ULD_MIXER .FUEL_OFF
+  182 control enabled reactor1 false
+  183 control enabled reactor2 false
+  184 control enabled reactor3 false
+  185 control enabled reactor4 false
+  186 control enabled reactor5 false
+  187 set :fn4*retval true
+  188 jump *label131 always
+  189 jump *label130 always
+  190 label *label129
+  191 control enabled projector1 false
+  192 control enabled projector2 false
+  193 set :fn4*retval false
+  194 jump *label131 always
+  195 label *label130
+  196 label *label131
   197 op or :emerg_shutdown :emerg_shutdown :fn4*retval
   198 set :fn3:reactor reactor3
   199 set :fn3:reactor_num 3
 
   601 label *label63
   602 goto :fn3*retaddr :fn3
   603 end
-    * label *label4
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
-    * jump *label98 equal :fn4:enemy_found null
-    * control enabled projector1 true
-    * control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
-    * control enabled reactor1 false
-    * control enabled reactor2 false
-    * control enabled reactor3 false
-    * control enabled reactor4 false
-    * control enabled reactor5 false
-    * set :fn4*retval true
-    * jump *label97 always
-    * jump *label99 always
-    * label *label98
-    * control enabled projector1 false
-    * control enabled projector2 false
-    * set :fn4*retval false
-    * jump *label97 always
-    * label *label99
-    * label *label97
-    * goto :fn4*retaddr :fn4
-    * end

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    47 set .NODE node1
    48 set :fn4:unit cyclone1
    49 label *label124
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+   50 radar enemy any any health cyclone1 1 :fn4:enemy_found
    51 jump *label125 equal :fn4:enemy_found null
    52 control enabled projector1 true
    53 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+   54 control config unloader1 @scrap
+   55 control config unloader2 @blast-compound
+   56 control config unloader3 @scrap
+   57 control config unloader4 @blast-compound
+   58 control config unloader5 @scrap
+   59 control config unloader6 @blast-compound
+   60 control config unloader7 @scrap
    61 control enabled reactor1 false
    62 control enabled reactor2 false
    63 control enabled reactor3 false
 
   168 label *label117
   169 set :fn4:unit cyclone1
   170 label *label128
-    * radar enemy any any health :fn4:unit 1 :fn4:enemy_found
+  171 radar enemy any any health cyclone1 1 :fn4:enemy_found
   172 jump *label129 equal :fn4:enemy_found null
   173 control enabled projector1 true
   174 control enabled projector2 true
-    * control config .ULD_IN_1 .FUEL_OFF
-    * control config .ULD_OUT_1 .FUEL
-    * control config .ULD_IN_2 .FUEL_OFF
-    * control config .ULD_OUT_2 .FUEL
-    * control config .ULD_IN_MANY .FUEL_OFF
-    * control config .ULD_OUT_MANY .FUEL
-    * control config .ULD_MIXER .FUEL_OFF
+  175 control config unloader1 @scrap
+  176 control config unloader2 @blast-compound
+  177 control config unloader3 @scrap
+  178 control config unloader4 @blast-compound
+  179 control config unloader5 @scrap
+  180 control config unloader6 @blast-compound
+  181 control config unloader7 @scrap
   182 control enabled reactor1 false
   183 control enabled reactor2 false
   184 control enabled reactor3 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
     0 printflush message1
-    * set .FUEL @blast-compound
-    * set .FUEL_OFF @scrap
     1 set .PWR_REQ 23000
     2 set .FLOW_REQ 2000
     3 set .PWR_ABANDON 2000
 
    34 set .REACTORS_DESIRED 5
    35 set .AVG_SURPLUS 500
    36 label *label7
-    * set .ULD_IN_1 unloader1
-    * set .ULD_OUT_1 unloader2
-    * set .ULD_IN_2 unloader3
-    * set .ULD_OUT_2 unloader4
-    * set .ULD_IN_MANY unloader5
-    * set .ULD_OUT_MANY unloader6
-    * set .ULD_MIXER unloader7
    37 set .CONTAINER vault1
    38 set .NODE node1
-    * set :fn4:unit cyclone1
    39 label *label124
    40 radar enemy any any health cyclone1 1 :fn4:enemy_found
    41 jump *label125 equal :fn4:enemy_found null
 
   156 control config unloader4 @scrap
   157 label *label116
   158 label *label117
-    * set :fn4:unit cyclone1
   159 label *label128
   160 radar enemy any any health cyclone1 1 :fn4:enemy_found
   161 jump *label129 equal :fn4:enemy_found null

Modifications by Inline function 'calc_charge_req' defined at line 126:1 (+56 instructions):
 
    80 op or :emerg_shutdown :fn4*retval *tmp8
    81 set :fn2:reactor reactor1
    82 set :fn2:time :t_startup1
-    * setaddr :fn2*retaddr *label14
-    * call *label2 :fn2*retval
-    * gotolabel *label14 :fn2
+   83 label *label132
+   84 op sub *tmp102 @tick :fn2:time
+   85 op idiv :fn2:secs *tmp102 60
+   86 op greaterThan *tmp104 :fn2:secs 30
+   87 sensor *tmp105 :fn2:reactor @enabled
+   88 op equal *tmp106 *tmp105 false
+   89 op or *tmp107 *tmp104 *tmp106
+   90 jump *label133 equal *tmp107 false
+   91 set :fn2*retval 0
+   92 jump *label135 always
+   93 label *label133
+   94 label *label134
+   95 op sub :fn2:time_left 30 :fn2:secs
+   96 op mul *tmp110 :fn2:time_left :fn2:time_left
+   97 op idiv :fn2:charge_req *tmp110 0.04
+   98 set :fn2*retval :fn2:charge_req
+   99 jump *label135 always
+  100 label *label135
   101 set .START_POWER_REQ :fn2*retval
   102 set :fn2:reactor reactor2
   103 set :fn2:time :t_startup2
-    * setaddr :fn2*retaddr *label15
-    * call *label2 :fn2*retval
-    * gotolabel *label15 :fn2
+  104 label *label136
+  105 op sub *tmp102 @tick :fn2:time
+  106 op idiv :fn2:secs *tmp102 60
+  107 op greaterThan *tmp104 :fn2:secs 30
+  108 sensor *tmp105 :fn2:reactor @enabled
+  109 op equal *tmp106 *tmp105 false
+  110 op or *tmp107 *tmp104 *tmp106
+  111 jump *label137 equal *tmp107 false
+  112 set :fn2*retval 0
+  113 jump *label139 always
+  114 label *label137
+  115 label *label138
+  116 op sub :fn2:time_left 30 :fn2:secs
+  117 op mul *tmp110 :fn2:time_left :fn2:time_left
+  118 op idiv :fn2:charge_req *tmp110 0.04
+  119 set :fn2*retval :fn2:charge_req
+  120 jump *label139 always
+  121 label *label139
   122 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   123 set :fn2:reactor reactor3
   124 set :fn2:time :t_startup3
-    * setaddr :fn2*retaddr *label16
-    * call *label2 :fn2*retval
-    * gotolabel *label16 :fn2
+  125 label *label140
+  126 op sub *tmp102 @tick :fn2:time
+  127 op idiv :fn2:secs *tmp102 60
+  128 op greaterThan *tmp104 :fn2:secs 30
+  129 sensor *tmp105 :fn2:reactor @enabled
+  130 op equal *tmp106 *tmp105 false
+  131 op or *tmp107 *tmp104 *tmp106
+  132 jump *label141 equal *tmp107 false
+  133 set :fn2*retval 0
+  134 jump *label143 always
+  135 label *label141
+  136 label *label142
+  137 op sub :fn2:time_left 30 :fn2:secs
+  138 op mul *tmp110 :fn2:time_left :fn2:time_left
+  139 op idiv :fn2:charge_req *tmp110 0.04
+  140 set :fn2*retval :fn2:charge_req
+  141 jump *label143 always
+  142 label *label143
   143 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   144 set :fn2:reactor reactor4
   145 set :fn2:time :t_startup4
-    * setaddr :fn2*retaddr *label17
-    * call *label2 :fn2*retval
-    * gotolabel *label17 :fn2
+  146 label *label144
+  147 op sub *tmp102 @tick :fn2:time
+  148 op idiv :fn2:secs *tmp102 60
+  149 op greaterThan *tmp104 :fn2:secs 30
+  150 sensor *tmp105 :fn2:reactor @enabled
+  151 op equal *tmp106 *tmp105 false
+  152 op or *tmp107 *tmp104 *tmp106
+  153 jump *label145 equal *tmp107 false
+  154 set :fn2*retval 0
+  155 jump *label147 always
+  156 label *label145
+  157 label *label146
+  158 op sub :fn2:time_left 30 :fn2:secs
+  159 op mul *tmp110 :fn2:time_left :fn2:time_left
+  160 op idiv :fn2:charge_req *tmp110 0.04
+  161 set :fn2*retval :fn2:charge_req
+  162 jump *label147 always
+  163 label *label147
   164 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   165 set :fn2:reactor reactor5
   166 set :fn2:time :t_startup5
-    * setaddr :fn2*retaddr *label18
-    * call *label2 :fn2*retval
-    * gotolabel *label18 :fn2
+  167 label *label148
+  168 op sub *tmp102 @tick :fn2:time
+  169 op idiv :fn2:secs *tmp102 60
+  170 op greaterThan *tmp104 :fn2:secs 30
+  171 sensor *tmp105 :fn2:reactor @enabled
+  172 op equal *tmp106 *tmp105 false
+  173 op or *tmp107 *tmp104 *tmp106
+  174 jump *label149 equal *tmp107 false
+  175 set :fn2*retval 0
+  176 jump *label151 always
+  177 label *label149
+  178 label *label150
+  179 op sub :fn2:time_left 30 :fn2:secs
+  180 op mul *tmp110 :fn2:time_left :fn2:time_left
+  181 op idiv :fn2:charge_req *tmp110 0.04
+  182 set :fn2*retval :fn2:charge_req
+  183 jump *label151 always
+  184 label *label151
   185 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
   186 set :fn3:reactor reactor1
   187 set :fn3:reactor_num 1
 
   459 jump *label7 always
   460 label *label9
   461 end
-    * label *label2
-    * op sub *tmp102 @tick :fn2:time
-    * op idiv :fn2:secs *tmp102 60
-    * op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
-    * op equal *tmp106 *tmp105 false
-    * op or *tmp107 *tmp104 *tmp106
-    * jump *label61 equal *tmp107 false
-    * set :fn2*retval 0
-    * jump *label60 always
-    * label *label61
-    * label *label62
-    * op sub :fn2:time_left 30 :fn2:secs
-    * op mul *tmp110 :fn2:time_left :fn2:time_left
-    * op idiv :fn2:charge_req *tmp110 0.04
-    * set :fn2*retval :fn2:charge_req
-    * jump *label60 always
-    * label *label60
-    * goto :fn2*retaddr :fn2
-    * end
   462 label *label3
   463 set .RET_T_STARTUP :fn3:t_startup
   464 op sub *tmp113 @tick :fn3:t_startup
 
   520 jump *label76 greaterThanEq :fn3:secs 30
   521 set :fn2:reactor :fn3:reactor
   522 set :fn2:time :fn3:t_startup
-    * setaddr :fn2*retaddr *label78
-    * call *label2 :fn2*retval
-    * gotolabel *label78 :fn2
+  523 label *label152
+  524 op sub *tmp102 @tick :fn2:time
+  525 op idiv :fn2:secs *tmp102 60
+  526 op greaterThan *tmp104 :fn2:secs 30
+  527 sensor *tmp105 :fn2:reactor @enabled
+  528 op equal *tmp106 *tmp105 false
+  529 op or *tmp107 *tmp104 *tmp106
+  530 jump *label153 equal *tmp107 false
+  531 set :fn2*retval 0
+  532 jump *label155 always
+  533 label *label153
+  534 label *label154
+  535 op sub :fn2:time_left 30 :fn2:secs
+  536 op mul *tmp110 :fn2:time_left :fn2:time_left
+  537 op idiv :fn2:charge_req *tmp110 0.04
+  538 set :fn2*retval :fn2:charge_req
+  539 jump *label155 always
+  540 label *label155
   541 op sub *tmp153 :fn3:charge :fn2*retval
   542 op lessThan *tmp154 *tmp153 .PWR_ABORT
   543 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    81 set :fn2:reactor reactor1
    82 set :fn2:time :t_startup1
    83 label *label132
-    * op sub *tmp102 @tick :fn2:time
+   84 op sub *tmp102 @tick :t_startup1
    85 op idiv :fn2:secs *tmp102 60
    86 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+   87 sensor *tmp105 reactor1 @enabled
    88 op equal *tmp106 *tmp105 false
    89 op or *tmp107 *tmp104 *tmp106
    90 jump *label133 equal *tmp107 false
 
   102 set :fn2:reactor reactor2
   103 set :fn2:time :t_startup2
   104 label *label136
-    * op sub *tmp102 @tick :fn2:time
+  105 op sub *tmp102 @tick :t_startup2
   106 op idiv :fn2:secs *tmp102 60
   107 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  108 sensor *tmp105 reactor2 @enabled
   109 op equal *tmp106 *tmp105 false
   110 op or *tmp107 *tmp104 *tmp106
   111 jump *label137 equal *tmp107 false
 
   123 set :fn2:reactor reactor3
   124 set :fn2:time :t_startup3
   125 label *label140
-    * op sub *tmp102 @tick :fn2:time
+  126 op sub *tmp102 @tick :t_startup3
   127 op idiv :fn2:secs *tmp102 60
   128 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  129 sensor *tmp105 reactor3 @enabled
   130 op equal *tmp106 *tmp105 false
   131 op or *tmp107 *tmp104 *tmp106
   132 jump *label141 equal *tmp107 false
 
   144 set :fn2:reactor reactor4
   145 set :fn2:time :t_startup4
   146 label *label144
-    * op sub *tmp102 @tick :fn2:time
+  147 op sub *tmp102 @tick :t_startup4
   148 op idiv :fn2:secs *tmp102 60
   149 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  150 sensor *tmp105 reactor4 @enabled
   151 op equal *tmp106 *tmp105 false
   152 op or *tmp107 *tmp104 *tmp106
   153 jump *label145 equal *tmp107 false
 
   165 set :fn2:reactor reactor5
   166 set :fn2:time :t_startup5
   167 label *label148
-    * op sub *tmp102 @tick :fn2:time
+  168 op sub *tmp102 @tick :t_startup5
   169 op idiv :fn2:secs *tmp102 60
   170 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  171 sensor *tmp105 reactor5 @enabled
   172 op equal *tmp106 *tmp105 false
   173 op or *tmp107 *tmp104 *tmp106
   174 jump *label149 equal *tmp107 false
 
   521 set :fn2:reactor :fn3:reactor
   522 set :fn2:time :fn3:t_startup
   523 label *label152
-    * op sub *tmp102 @tick :fn2:time
+  524 op sub *tmp102 @tick :fn3:t_startup
   525 op idiv :fn2:secs *tmp102 60
   526 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn2:reactor @enabled
+  527 sensor *tmp105 :fn3:reactor @enabled
   528 op equal *tmp106 *tmp105 false
   529 op or *tmp107 *tmp104 *tmp106
   530 jump *label153 equal *tmp107 false

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-12 instructions):
 
    78 jump *label11 always
    79 label *label11
    80 op or :emerg_shutdown :fn4*retval *tmp8
-    * set :fn2:reactor reactor1
-    * set :fn2:time :t_startup1
    81 label *label132
    82 op sub *tmp102 @tick :t_startup1
    83 op idiv :fn2:secs *tmp102 60
 
    97 jump *label135 always
    98 label *label135
    99 set .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor2
-    * set :fn2:time :t_startup2
   100 label *label136
   101 op sub *tmp102 @tick :t_startup2
   102 op idiv :fn2:secs *tmp102 60
 
   116 jump *label139 always
   117 label *label139
   118 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor3
-    * set :fn2:time :t_startup3
   119 label *label140
   120 op sub *tmp102 @tick :t_startup3
   121 op idiv :fn2:secs *tmp102 60
 
   135 jump *label143 always
   136 label *label143
   137 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor4
-    * set :fn2:time :t_startup4
   138 label *label144
   139 op sub *tmp102 @tick :t_startup4
   140 op idiv :fn2:secs *tmp102 60
 
   154 jump *label147 always
   155 label *label147
   156 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn2:reactor reactor5
-    * set :fn2:time :t_startup5
   157 label *label148
   158 op sub *tmp102 @tick :t_startup5
   159 op idiv :fn2:secs *tmp102 60
 
   508 jump *label75 always
   509 label *label74
   510 jump *label76 greaterThanEq :fn3:secs 30
-    * set :fn2:reactor :fn3:reactor
-    * set :fn2:time :fn3:t_startup
   511 label *label152
   512 op sub *tmp102 @tick :fn3:t_startup
   513 op idiv :fn2:secs *tmp102 60

Modifications by Inline function call at line 80:14 (+157 instructions):
 
   178 set :fn3:emerg_shutdown :emerg_shutdown
   179 set :fn3:fuel_on :fuel_1
   180 set :fn3:t_startup :t_startup1
-    * setaddr :fn3*retaddr *label19
-    * call *label3 :fn3*retval
-    * gotolabel *label19 :fn3
+  181 label *label156
+  182 set .RET_T_STARTUP :fn3:t_startup
+  183 op sub *tmp113 @tick :fn3:t_startup
+  184 op idiv :fn3:secs *tmp113 60
+  185 sensor :fn3:fuel :fn3:reactor @blast-compound
+  186 set :fn3:supply_fuel true
+  187 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  188 sensor :fn3:cryo :fn3:reactor @cryofluid
+  189 sensor *tmp118 .NODE @powerNetStored
+  190 op floor :fn3:charge *tmp118
+  191 sensor *tmp120 .NODE @powerNetIn
+  192 sensor *tmp121 .NODE @powerNetOut
+  193 op sub *tmp122 *tmp120 *tmp121
+  194 op floor :fn3:surplus *tmp122
+  195 op mul *tmp124 .AVG_SURPLUS 0.8
+  196 op mul *tmp125 :fn3:surplus 0.2
+  197 op add .AVG_SURPLUS *tmp124 *tmp125
+  198 sensor :fn3:enabled :fn3:reactor @enabled
+  199 print "#"
+  200 print :fn3:reactor_num
+  201 print " "
+  202 print "- "
+  203 jump *label157 equal :fn3:emerg_shutdown false
+  204 control enabled :fn3:reactor false
+  205 print "emergency mode"
+  206 print "\n"
+  207 set :fn3:supply_fuel false
+  208 jump *label190 always
+  209 label *label157
+  210 jump *label176 equal :fn3:enabled false
+  211 jump *label158 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  212 control enabled :fn3:reactor false
+  213 print "STOP unwanted"
+  214 print "\n"
+  215 jump *label175 always
+  216 label *label158
+  217 op greaterThan *tmp136 :fn3:reactor_num 1
+  218 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  219 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  220 op land *tmp139 *tmp136 *tmp138
+  221 jump *label159 equal *tmp139 false
+  222 control enabled :fn3:reactor false
+  223 print "STOP system fuel low"
+  224 print "\n"
+  225 jump *label174 always
+  226 label *label159
+  227 jump *label160 greaterThan :fn3:fuel 1
+  228 control enabled :fn3:reactor false
+  229 print "STOP fuel low"
+  230 print "\n"
+  231 jump *label173 always
+  232 label *label160
+  233 jump *label161 greaterThan :fn3:cryo .CRYO_ABORT
+  234 control enabled :fn3:reactor false
+  235 print "STOP out of cryo"
+  236 print "\n"
+  237 jump *label172 always
+  238 label *label161
+  239 jump *label168 greaterThanEq :fn3:secs 30
+  240 label *label162
+  241 op sub *tmp102 @tick :fn3:t_startup
+  242 op idiv :fn2:secs *tmp102 60
+  243 op greaterThan *tmp104 :fn2:secs 30
+  244 sensor *tmp105 :fn3:reactor @enabled
+  245 op equal *tmp106 *tmp105 false
+  246 op or *tmp107 *tmp104 *tmp106
+  247 jump *label163 equal *tmp107 false
+  248 set :fn2*retval 0
+  249 jump *label165 always
+  250 label *label163
+  251 label *label164
+  252 op sub :fn2:time_left 30 :fn2:secs
+  253 op mul *tmp110 :fn2:time_left :fn2:time_left
+  254 op idiv :fn2:charge_req *tmp110 0.04
+  255 set :fn2*retval :fn2:charge_req
+  256 jump *label165 always
+  257 label *label165
+  258 op sub *tmp153 :fn3:charge :fn2*retval
+  259 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  260 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  261 op land *tmp156 *tmp154 *tmp155
+  262 jump *label166 equal *tmp156 false
+  263 control enabled :fn3:reactor false
+  264 print "START FAIL battery"
+  265 print "\n"
+  266 set :fn3:supply_fuel false
+  267 jump *label167 always
+  268 label *label166
+  269 op sub :fn3:time_left 30 :fn3:secs
+  270 print "Starting "
+  271 print :fn3:time_left
+  272 print " "
+  273 print "secs, req "
+  274 print :fn2*retval
+  275 print "J"
+  276 print "\n"
+  277 label *label167
+  278 jump *label171 always
+  279 label *label168
+  280 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  281 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  282 op land *tmp163 *tmp161 *tmp162
+  283 jump *label169 equal *tmp163 false
+  284 control enabled :fn3:reactor false
+  285 print "ABANDON - battery crit"
+  286 print "\n"
+  287 set :fn3:supply_fuel false
+  288 jump *label170 always
+  289 label *label169
+  290 op idiv :fn3:mins :fn3:secs 6
+  291 op div :fn3:mins :fn3:mins 10
+  292 print "RUN "
+  293 print :fn3:mins
+  294 print " "
+  295 print "mins"
+  296 print "\n"
+  297 label *label170
+  298 label *label171
+  299 label *label172
+  300 label *label173
+  301 label *label174
+  302 label *label175
+  303 jump *label189 always
+  304 label *label176
+  305 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  306 op sub *tmp170 *tmp169 .PWR_ABORT
+  307 op div *tmp171 *tmp170 .PWR_REQ
+  308 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  309 op div *tmp173 :fn3:surplus .FLOW_REQ
+  310 op max :fn3:flow_units -0.1 *tmp173
+  311 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  312 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  313 jump *label177 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  314 print "IDLE"
+  315 print "\n"
+  316 set :fn3:supply_fuel false
+  317 jump *label188 always
+  318 label *label177
+  319 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  320 jump *label178 greaterThanEq *tmp179 1
+  321 op idiv *tmp183 :fn3:flow_units 0.001
+  322 op div :fn3:flow *tmp183 10
+  323 op idiv *tmp186 :fn3:charge_units 0.001
+  324 op div :fn3:charge *tmp186 10
+  325 print "WAIT power. (%"
+  326 print :fn3:charge
+  327 print "J + %"
+  328 print :fn3:flow
+  329 print "W)"
+  330 print "\n"
+  331 set :fn3:supply_fuel false
+  332 jump *label187 always
+  333 label *label178
+  334 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  335 op land *tmp189 :fn3:fuel_on *tmp188
+  336 jump *label181 equal *tmp189 false
+  337 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  338 jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  339 print "WAIT fuel"
+  340 print "\n"
+  341 jump *label180 always
+  342 label *label179
+  343 print "WAIT system fuel"
+  344 print "\n"
+  345 label *label180
+  346 jump *label186 always
+  347 label *label181
+  348 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  349 jump *label182 greaterThanEq :fn3:fuel_stored *tmp194
+  350 print "WAIT buffer fuel"
+  351 print "\n"
+  352 jump *label185 always
+  353 label *label182
+  354 jump *label183 greaterThanEq :fn3:cryo :fn3:cryo_req
+  355 print "WAIT cryo"
+  356 print "\n"
+  357 jump *label184 always
+  358 label *label183
+  359 print "STARTUP"
+  360 print "\n"
+  361 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  362 control enabled :fn3:reactor true
+  363 label *label184
+  364 label *label185
+  365 label *label186
+  366 label *label187
+  367 label *label188
+  368 label *label189
+  369 label *label190
+  370 sensor *tmp201 :fn3:reactor @enabled
+  371 jump *label191 equal :fn3:enabled *tmp201
+  372 set .RET_T_STARTUP @tick
+  373 label *label191
+  374 label *label192
+  375 set :fn3*retval :fn3:supply_fuel
+  376 jump *label193 always
+  377 label *label193
   378 set :fuel_1 :fn3*retval
   379 set :t_startup1 .RET_T_STARTUP
   380 label *label106

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1 (-1 instructions):
 
    30 set :t_startup3 *tmp5
    31 set :t_startup4 *tmp5
    32 set :t_startup5 *tmp5
-    * set .RET_T_STARTUP *tmp5
    33 set .REACTORS_DESIRED 5
    34 set .AVG_SURPLUS 500
    35 label *label7
 
   178 set :fn3:fuel_on :fuel_1
   179 set :fn3:t_startup :t_startup1
   180 label *label156
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  181 set .RET_T_STARTUP :t_startup1
+  182 op sub *tmp113 @tick :t_startup1
   183 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  184 sensor :fn3:fuel reactor1 @blast-compound
   185 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  186 sensor :fn3:fuel_stored vault1 @blast-compound
+  187 sensor :fn3:cryo reactor1 @cryofluid
+  188 sensor *tmp118 node1 @powerNetStored
   189 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  190 sensor *tmp120 node1 @powerNetIn
+  191 sensor *tmp121 node1 @powerNetOut
   192 op sub *tmp122 *tmp120 *tmp121
   193 op floor :fn3:surplus *tmp122
   194 op mul *tmp124 .AVG_SURPLUS 0.8
   195 op mul *tmp125 :fn3:surplus 0.2
   196 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  197 sensor :fn3:enabled reactor1 @enabled
   198 print "#"
-    * print :fn3:reactor_num
+  199 print 1
   200 print " "
   201 print "- "
-    * jump *label157 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  202 jump *label157 equal :emerg_shutdown false
+  203 control enabled reactor1 false
   204 print "emergency mode"
   205 print "\n"
   206 set :fn3:supply_fuel false
   207 jump *label190 always
   208 label *label157
   209 jump *label176 equal :fn3:enabled false
-    * jump *label158 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  210 jump *label158 greaterThanEq .REACTORS_DESIRED 1
+  211 control enabled reactor1 false
   212 print "STOP unwanted"
   213 print "\n"
   214 jump *label175 always
   215 label *label158
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  216 op greaterThan *tmp136 1 1
+  217 op mul *tmp137 15 1
+  218 op lessThan *tmp138 :fn3:fuel_stored 15
+  219 op land *tmp139 false *tmp138
   220 jump *label159 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  221 control enabled reactor1 false
   222 print "STOP system fuel low"
   223 print "\n"
   224 jump *label174 always
   225 label *label159
   226 jump *label160 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  227 control enabled reactor1 false
   228 print "STOP fuel low"
   229 print "\n"
   230 jump *label173 always
   231 label *label160
-    * jump *label161 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  232 jump *label161 greaterThan :fn3:cryo 1
+  233 control enabled reactor1 false
   234 print "STOP out of cryo"
   235 print "\n"
   236 jump *label172 always
   237 label *label161
   238 jump *label168 greaterThanEq :fn3:secs 30
   239 label *label162
-    * op sub *tmp102 @tick :fn3:t_startup
+  240 op sub *tmp102 @tick :t_startup1
   241 op idiv :fn2:secs *tmp102 60
   242 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  243 sensor *tmp105 reactor1 @enabled
   244 op equal *tmp106 *tmp105 false
   245 op or *tmp107 *tmp104 *tmp106
   246 jump *label163 equal *tmp107 false
 
   255 jump *label165 always
   256 label *label165
   257 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  258 op lessThan *tmp154 *tmp153 5000
+  259 op lessThan *tmp155 :fn3:surplus -500
   260 op land *tmp156 *tmp154 *tmp155
   261 jump *label166 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  262 control enabled reactor1 false
   263 print "START FAIL battery"
   264 print "\n"
   265 set :fn3:supply_fuel false
 
   276 label *label167
   277 jump *label171 always
   278 label *label168
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  279 op lessThan *tmp161 :fn3:charge 2000
+  280 op lessThan *tmp162 :fn3:surplus -500
   281 op land *tmp163 *tmp161 *tmp162
   282 jump *label169 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  283 control enabled reactor1 false
   284 print "ABANDON - battery crit"
   285 print "\n"
   286 set :fn3:supply_fuel false
 
   302 jump *label189 always
   303 label *label176
   304 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  305 op sub *tmp170 *tmp169 5000
+  306 op div *tmp171 *tmp170 23000
+  307 op mul :fn3:charge_units *tmp171 0.6
+  308 op div *tmp173 :fn3:surplus 2000
   309 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label177 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  310 op mul *tmp175 2 1
+  311 op add :fn3:cryo_req 3 2
+  312 jump *label177 greaterThanEq .REACTORS_DESIRED 1
   313 print "IDLE"
   314 print "\n"
   315 set :fn3:supply_fuel false
 
   330 set :fn3:supply_fuel false
   331 jump *label187 always
   332 label *label178
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  333 op lessThan *tmp188 :fn3:fuel 10
+  334 op land *tmp189 :fuel_1 *tmp188
   335 jump *label181 equal *tmp189 false
   336 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label179 lessThanEq *tmp191 .FUEL_REQ
+  337 jump *label179 lessThanEq *tmp191 10
   338 print "WAIT fuel"
   339 print "\n"
   340 jump *label180 always
 
   344 label *label180
   345 jump *label186 always
   346 label *label181
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label182 greaterThanEq :fn3:fuel_stored *tmp194
+  347 op mul *tmp194 45 1
+  348 jump *label182 greaterThanEq :fn3:fuel_stored 45
   349 print "WAIT buffer fuel"
   350 print "\n"
   351 jump *label185 always
   352 label *label182
-    * jump *label183 greaterThanEq :fn3:cryo :fn3:cryo_req
+  353 jump *label183 greaterThanEq :fn3:cryo 5
   354 print "WAIT cryo"
   355 print "\n"
   356 jump *label184 always
   357 label *label183
   358 print "STARTUP"
   359 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  360 op add .START_POWER_REQ .START_POWER_REQ 23000
+  361 control enabled reactor1 true
   362 label *label184
   363 label *label185
   364 label *label186
 
   366 label *label188
   367 label *label189
   368 label *label190
-    * sensor *tmp201 :fn3:reactor @enabled
+  369 sensor *tmp201 reactor1 @enabled
   370 jump *label191 equal :fn3:enabled *tmp201
   371 set .RET_T_STARTUP @tick
   372 label *label191
 
   374 set :fn3*retval :fn3:supply_fuel
   375 jump *label193 always
   376 label *label193
-    * set :fuel_1 :fn3*retval
+  377 set :fuel_1 :fn3:supply_fuel
   378 set :t_startup1 .RET_T_STARTUP
   379 label *label106
-    * jump *label107 equal :fn3*retval false
+  380 jump *label107 equal :fn3:supply_fuel false
   381 control config unloader1 @blast-compound
   382 jump *label108 always
   383 label *label107
   384 control config unloader1 @scrap
   385 label *label108
-    * jump *label109 notEqual :fn3*retval false
+  386 jump *label109 notEqual :fn3:supply_fuel false
   387 control config unloader2 @blast-compound
   388 jump *label110 always
   389 label *label109

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   172 jump *label151 always
   173 label *label151
   174 op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
-    * set :fn3:reactor reactor1
-    * set :fn3:reactor_num 1
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_1
-    * set :fn3:t_startup :t_startup1
   175 label *label156
   176 set .RET_T_STARTUP :t_startup1
   177 op sub *tmp113 @tick :t_startup1
 
   299 op sub *tmp169 :fn3:charge .START_POWER_REQ
   300 op sub *tmp170 *tmp169 5000
   301 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  302 op div :fn3:charge_units *tmp170 38333.333333333336
   303 op div *tmp173 :fn3:surplus 2000
   304 op max :fn3:flow_units -0.1 *tmp173
   305 op mul *tmp175 2 1
 
   366 set .RET_T_STARTUP @tick
   367 label *label191
   368 label *label192
-    * set :fn3*retval :fn3:supply_fuel
   369 jump *label193 always
   370 label *label193
   371 set :fuel_1 :fn3:supply_fuel

Modifications by Inline function call at line 84:14 (+157 instructions):
 
   389 set :fn3:emerg_shutdown :emerg_shutdown
   390 set :fn3:fuel_on :fuel_2
   391 set :fn3:t_startup :t_startup2
-    * setaddr :fn3*retaddr *label21
-    * call *label3 :fn3*retval
-    * gotolabel *label21 :fn3
+  392 label *label194
+  393 set .RET_T_STARTUP :fn3:t_startup
+  394 op sub *tmp113 @tick :fn3:t_startup
+  395 op idiv :fn3:secs *tmp113 60
+  396 sensor :fn3:fuel :fn3:reactor @blast-compound
+  397 set :fn3:supply_fuel true
+  398 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  399 sensor :fn3:cryo :fn3:reactor @cryofluid
+  400 sensor *tmp118 .NODE @powerNetStored
+  401 op floor :fn3:charge *tmp118
+  402 sensor *tmp120 .NODE @powerNetIn
+  403 sensor *tmp121 .NODE @powerNetOut
+  404 op sub *tmp122 *tmp120 *tmp121
+  405 op floor :fn3:surplus *tmp122
+  406 op mul *tmp124 .AVG_SURPLUS 0.8
+  407 op mul *tmp125 :fn3:surplus 0.2
+  408 op add .AVG_SURPLUS *tmp124 *tmp125
+  409 sensor :fn3:enabled :fn3:reactor @enabled
+  410 print "#"
+  411 print :fn3:reactor_num
+  412 print " "
+  413 print "- "
+  414 jump *label195 equal :fn3:emerg_shutdown false
+  415 control enabled :fn3:reactor false
+  416 print "emergency mode"
+  417 print "\n"
+  418 set :fn3:supply_fuel false
+  419 jump *label228 always
+  420 label *label195
+  421 jump *label214 equal :fn3:enabled false
+  422 jump *label196 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  423 control enabled :fn3:reactor false
+  424 print "STOP unwanted"
+  425 print "\n"
+  426 jump *label213 always
+  427 label *label196
+  428 op greaterThan *tmp136 :fn3:reactor_num 1
+  429 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  430 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  431 op land *tmp139 *tmp136 *tmp138
+  432 jump *label197 equal *tmp139 false
+  433 control enabled :fn3:reactor false
+  434 print "STOP system fuel low"
+  435 print "\n"
+  436 jump *label212 always
+  437 label *label197
+  438 jump *label198 greaterThan :fn3:fuel 1
+  439 control enabled :fn3:reactor false
+  440 print "STOP fuel low"
+  441 print "\n"
+  442 jump *label211 always
+  443 label *label198
+  444 jump *label199 greaterThan :fn3:cryo .CRYO_ABORT
+  445 control enabled :fn3:reactor false
+  446 print "STOP out of cryo"
+  447 print "\n"
+  448 jump *label210 always
+  449 label *label199
+  450 jump *label206 greaterThanEq :fn3:secs 30
+  451 label *label200
+  452 op sub *tmp102 @tick :fn3:t_startup
+  453 op idiv :fn2:secs *tmp102 60
+  454 op greaterThan *tmp104 :fn2:secs 30
+  455 sensor *tmp105 :fn3:reactor @enabled
+  456 op equal *tmp106 *tmp105 false
+  457 op or *tmp107 *tmp104 *tmp106
+  458 jump *label201 equal *tmp107 false
+  459 set :fn2*retval 0
+  460 jump *label203 always
+  461 label *label201
+  462 label *label202
+  463 op sub :fn2:time_left 30 :fn2:secs
+  464 op mul *tmp110 :fn2:time_left :fn2:time_left
+  465 op idiv :fn2:charge_req *tmp110 0.04
+  466 set :fn2*retval :fn2:charge_req
+  467 jump *label203 always
+  468 label *label203
+  469 op sub *tmp153 :fn3:charge :fn2*retval
+  470 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  471 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  472 op land *tmp156 *tmp154 *tmp155
+  473 jump *label204 equal *tmp156 false
+  474 control enabled :fn3:reactor false
+  475 print "START FAIL battery"
+  476 print "\n"
+  477 set :fn3:supply_fuel false
+  478 jump *label205 always
+  479 label *label204
+  480 op sub :fn3:time_left 30 :fn3:secs
+  481 print "Starting "
+  482 print :fn3:time_left
+  483 print " "
+  484 print "secs, req "
+  485 print :fn2*retval
+  486 print "J"
+  487 print "\n"
+  488 label *label205
+  489 jump *label209 always
+  490 label *label206
+  491 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  492 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  493 op land *tmp163 *tmp161 *tmp162
+  494 jump *label207 equal *tmp163 false
+  495 control enabled :fn3:reactor false
+  496 print "ABANDON - battery crit"
+  497 print "\n"
+  498 set :fn3:supply_fuel false
+  499 jump *label208 always
+  500 label *label207
+  501 op idiv :fn3:mins :fn3:secs 6
+  502 op div :fn3:mins :fn3:mins 10
+  503 print "RUN "
+  504 print :fn3:mins
+  505 print " "
+  506 print "mins"
+  507 print "\n"
+  508 label *label208
+  509 label *label209
+  510 label *label210
+  511 label *label211
+  512 label *label212
+  513 label *label213
+  514 jump *label227 always
+  515 label *label214
+  516 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  517 op sub *tmp170 *tmp169 .PWR_ABORT
+  518 op div *tmp171 *tmp170 .PWR_REQ
+  519 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  520 op div *tmp173 :fn3:surplus .FLOW_REQ
+  521 op max :fn3:flow_units -0.1 *tmp173
+  522 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  523 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  524 jump *label215 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  525 print "IDLE"
+  526 print "\n"
+  527 set :fn3:supply_fuel false
+  528 jump *label226 always
+  529 label *label215
+  530 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  531 jump *label216 greaterThanEq *tmp179 1
+  532 op idiv *tmp183 :fn3:flow_units 0.001
+  533 op div :fn3:flow *tmp183 10
+  534 op idiv *tmp186 :fn3:charge_units 0.001
+  535 op div :fn3:charge *tmp186 10
+  536 print "WAIT power. (%"
+  537 print :fn3:charge
+  538 print "J + %"
+  539 print :fn3:flow
+  540 print "W)"
+  541 print "\n"
+  542 set :fn3:supply_fuel false
+  543 jump *label225 always
+  544 label *label216
+  545 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  546 op land *tmp189 :fn3:fuel_on *tmp188
+  547 jump *label219 equal *tmp189 false
+  548 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  549 jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  550 print "WAIT fuel"
+  551 print "\n"
+  552 jump *label218 always
+  553 label *label217
+  554 print "WAIT system fuel"
+  555 print "\n"
+  556 label *label218
+  557 jump *label224 always
+  558 label *label219
+  559 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  560 jump *label220 greaterThanEq :fn3:fuel_stored *tmp194
+  561 print "WAIT buffer fuel"
+  562 print "\n"
+  563 jump *label223 always
+  564 label *label220
+  565 jump *label221 greaterThanEq :fn3:cryo :fn3:cryo_req
+  566 print "WAIT cryo"
+  567 print "\n"
+  568 jump *label222 always
+  569 label *label221
+  570 print "STARTUP"
+  571 print "\n"
+  572 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  573 control enabled :fn3:reactor true
+  574 label *label222
+  575 label *label223
+  576 label *label224
+  577 label *label225
+  578 label *label226
+  579 label *label227
+  580 label *label228
+  581 sensor *tmp201 :fn3:reactor @enabled
+  582 jump *label229 equal :fn3:enabled *tmp201
+  583 set .RET_T_STARTUP @tick
+  584 label *label229
+  585 label *label230
+  586 set :fn3*retval :fn3:supply_fuel
+  587 jump *label231 always
+  588 label *label231
   589 set :fuel_2 :fn3*retval
   590 set :t_startup2 .RET_T_STARTUP
   591 label *label112

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   390 set :fn3:fuel_on :fuel_2
   391 set :fn3:t_startup :t_startup2
   392 label *label194
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  393 set .RET_T_STARTUP :t_startup2
+  394 op sub *tmp113 @tick :t_startup2
   395 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  396 sensor :fn3:fuel reactor2 @blast-compound
   397 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  398 sensor :fn3:fuel_stored vault1 @blast-compound
+  399 sensor :fn3:cryo reactor2 @cryofluid
+  400 sensor *tmp118 node1 @powerNetStored
   401 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  402 sensor *tmp120 node1 @powerNetIn
+  403 sensor *tmp121 node1 @powerNetOut
   404 op sub *tmp122 *tmp120 *tmp121
   405 op floor :fn3:surplus *tmp122
   406 op mul *tmp124 .AVG_SURPLUS 0.8
   407 op mul *tmp125 :fn3:surplus 0.2
   408 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  409 sensor :fn3:enabled reactor2 @enabled
   410 print "#"
-    * print :fn3:reactor_num
+  411 print 2
   412 print " "
   413 print "- "
-    * jump *label195 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  414 jump *label195 equal :emerg_shutdown false
+  415 control enabled reactor2 false
   416 print "emergency mode"
   417 print "\n"
   418 set :fn3:supply_fuel false
   419 jump *label228 always
   420 label *label195
   421 jump *label214 equal :fn3:enabled false
-    * jump *label196 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  422 jump *label196 greaterThanEq .REACTORS_DESIRED 2
+  423 control enabled reactor2 false
   424 print "STOP unwanted"
   425 print "\n"
   426 jump *label213 always
   427 label *label196
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  428 op greaterThan *tmp136 2 1
+  429 op mul *tmp137 15 2
+  430 op lessThan *tmp138 :fn3:fuel_stored 30
+  431 op land *tmp139 true *tmp138
   432 jump *label197 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  433 control enabled reactor2 false
   434 print "STOP system fuel low"
   435 print "\n"
   436 jump *label212 always
   437 label *label197
   438 jump *label198 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  439 control enabled reactor2 false
   440 print "STOP fuel low"
   441 print "\n"
   442 jump *label211 always
   443 label *label198
-    * jump *label199 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  444 jump *label199 greaterThan :fn3:cryo 1
+  445 control enabled reactor2 false
   446 print "STOP out of cryo"
   447 print "\n"
   448 jump *label210 always
   449 label *label199
   450 jump *label206 greaterThanEq :fn3:secs 30
   451 label *label200
-    * op sub *tmp102 @tick :fn3:t_startup
+  452 op sub *tmp102 @tick :t_startup2
   453 op idiv :fn2:secs *tmp102 60
   454 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  455 sensor *tmp105 reactor2 @enabled
   456 op equal *tmp106 *tmp105 false
   457 op or *tmp107 *tmp104 *tmp106
   458 jump *label201 equal *tmp107 false
 
   467 jump *label203 always
   468 label *label203
   469 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  470 op lessThan *tmp154 *tmp153 5000
+  471 op lessThan *tmp155 :fn3:surplus -500
   472 op land *tmp156 *tmp154 *tmp155
   473 jump *label204 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  474 control enabled reactor2 false
   475 print "START FAIL battery"
   476 print "\n"
   477 set :fn3:supply_fuel false
 
   488 label *label205
   489 jump *label209 always
   490 label *label206
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  491 op lessThan *tmp161 :fn3:charge 2000
+  492 op lessThan *tmp162 :fn3:surplus -500
   493 op land *tmp163 *tmp161 *tmp162
   494 jump *label207 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  495 control enabled reactor2 false
   496 print "ABANDON - battery crit"
   497 print "\n"
   498 set :fn3:supply_fuel false
 
   514 jump *label227 always
   515 label *label214
   516 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  517 op sub *tmp170 *tmp169 5000
+  518 op div *tmp171 *tmp170 23000
+  519 op mul :fn3:charge_units *tmp171 0.6
+  520 op div *tmp173 :fn3:surplus 2000
   521 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label215 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  522 op mul *tmp175 2 2
+  523 op add :fn3:cryo_req 3 4
+  524 jump *label215 greaterThanEq .REACTORS_DESIRED 2
   525 print "IDLE"
   526 print "\n"
   527 set :fn3:supply_fuel false
 
   542 set :fn3:supply_fuel false
   543 jump *label225 always
   544 label *label216
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  545 op lessThan *tmp188 :fn3:fuel 10
+  546 op land *tmp189 :fuel_2 *tmp188
   547 jump *label219 equal *tmp189 false
   548 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label217 lessThanEq *tmp191 .FUEL_REQ
+  549 jump *label217 lessThanEq *tmp191 10
   550 print "WAIT fuel"
   551 print "\n"
   552 jump *label218 always
 
   556 label *label218
   557 jump *label224 always
   558 label *label219
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label220 greaterThanEq :fn3:fuel_stored *tmp194
+  559 op mul *tmp194 45 2
+  560 jump *label220 greaterThanEq :fn3:fuel_stored 90
   561 print "WAIT buffer fuel"
   562 print "\n"
   563 jump *label223 always
   564 label *label220
-    * jump *label221 greaterThanEq :fn3:cryo :fn3:cryo_req
+  565 jump *label221 greaterThanEq :fn3:cryo 7
   566 print "WAIT cryo"
   567 print "\n"
   568 jump *label222 always
   569 label *label221
   570 print "STARTUP"
   571 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  572 op add .START_POWER_REQ .START_POWER_REQ 23000
+  573 control enabled reactor2 true
   574 label *label222
   575 label *label223
   576 label *label224
 
   578 label *label226
   579 label *label227
   580 label *label228
-    * sensor *tmp201 :fn3:reactor @enabled
+  581 sensor *tmp201 reactor2 @enabled
   582 jump *label229 equal :fn3:enabled *tmp201
   583 set .RET_T_STARTUP @tick
   584 label *label229
 
   586 set :fn3*retval :fn3:supply_fuel
   587 jump *label231 always
   588 label *label231
-    * set :fuel_2 :fn3*retval
+  589 set :fuel_2 :fn3:supply_fuel
   590 set :t_startup2 .RET_T_STARTUP
   591 label *label112
-    * jump *label113 equal :fn3*retval false
+  592 jump *label113 equal :fn3:supply_fuel false
   593 control config unloader3 @blast-compound
   594 jump *label114 always
   595 label *label113
   596 control config unloader3 @scrap
   597 label *label114
-    * jump *label115 notEqual :fn3*retval false
+  598 jump *label115 notEqual :fn3:supply_fuel false
   599 control config unloader4 @blast-compound
   600 jump *label116 always
   601 label *label115

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   384 control config unloader2 @scrap
   385 label *label110
   386 label *label111
-    * set :fn3:reactor reactor2
-    * set :fn3:reactor_num 2
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_2
-    * set :fn3:t_startup :t_startup2
   387 label *label194
   388 set .RET_T_STARTUP :t_startup2
   389 op sub *tmp113 @tick :t_startup2
 
   511 op sub *tmp169 :fn3:charge .START_POWER_REQ
   512 op sub *tmp170 *tmp169 5000
   513 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  514 op div :fn3:charge_units *tmp170 38333.333333333336
   515 op div *tmp173 :fn3:surplus 2000
   516 op max :fn3:flow_units -0.1 *tmp173
   517 op mul *tmp175 2 2
 
   578 set .RET_T_STARTUP @tick
   579 label *label229
   580 label *label230
-    * set :fn3*retval :fn3:supply_fuel
   581 jump *label231 always
   582 label *label231
   583 set :fuel_2 :fn3:supply_fuel

Modifications by Inline function call at line 89:14 (+157 instructions):
 
   629 set :fn3:emerg_shutdown :emerg_shutdown
   630 set :fn3:fuel_on :fuel_3
   631 set :fn3:t_startup :t_startup3
-    * setaddr :fn3*retaddr *label24
-    * call *label3 :fn3*retval
-    * gotolabel *label24 :fn3
+  632 label *label232
+  633 set .RET_T_STARTUP :fn3:t_startup
+  634 op sub *tmp113 @tick :fn3:t_startup
+  635 op idiv :fn3:secs *tmp113 60
+  636 sensor :fn3:fuel :fn3:reactor @blast-compound
+  637 set :fn3:supply_fuel true
+  638 sensor :fn3:fuel_stored .CONTAINER @blast-compound
+  639 sensor :fn3:cryo :fn3:reactor @cryofluid
+  640 sensor *tmp118 .NODE @powerNetStored
+  641 op floor :fn3:charge *tmp118
+  642 sensor *tmp120 .NODE @powerNetIn
+  643 sensor *tmp121 .NODE @powerNetOut
+  644 op sub *tmp122 *tmp120 *tmp121
+  645 op floor :fn3:surplus *tmp122
+  646 op mul *tmp124 .AVG_SURPLUS 0.8
+  647 op mul *tmp125 :fn3:surplus 0.2
+  648 op add .AVG_SURPLUS *tmp124 *tmp125
+  649 sensor :fn3:enabled :fn3:reactor @enabled
+  650 print "#"
+  651 print :fn3:reactor_num
+  652 print " "
+  653 print "- "
+  654 jump *label233 equal :fn3:emerg_shutdown false
+  655 control enabled :fn3:reactor false
+  656 print "emergency mode"
+  657 print "\n"
+  658 set :fn3:supply_fuel false
+  659 jump *label266 always
+  660 label *label233
+  661 jump *label252 equal :fn3:enabled false
+  662 jump *label234 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  663 control enabled :fn3:reactor false
+  664 print "STOP unwanted"
+  665 print "\n"
+  666 jump *label251 always
+  667 label *label234
+  668 op greaterThan *tmp136 :fn3:reactor_num 1
+  669 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
+  670 op lessThan *tmp138 :fn3:fuel_stored *tmp137
+  671 op land *tmp139 *tmp136 *tmp138
+  672 jump *label235 equal *tmp139 false
+  673 control enabled :fn3:reactor false
+  674 print "STOP system fuel low"
+  675 print "\n"
+  676 jump *label250 always
+  677 label *label235
+  678 jump *label236 greaterThan :fn3:fuel 1
+  679 control enabled :fn3:reactor false
+  680 print "STOP fuel low"
+  681 print "\n"
+  682 jump *label249 always
+  683 label *label236
+  684 jump *label237 greaterThan :fn3:cryo .CRYO_ABORT
+  685 control enabled :fn3:reactor false
+  686 print "STOP out of cryo"
+  687 print "\n"
+  688 jump *label248 always
+  689 label *label237
+  690 jump *label244 greaterThanEq :fn3:secs 30
+  691 label *label238
+  692 op sub *tmp102 @tick :fn3:t_startup
+  693 op idiv :fn2:secs *tmp102 60
+  694 op greaterThan *tmp104 :fn2:secs 30
+  695 sensor *tmp105 :fn3:reactor @enabled
+  696 op equal *tmp106 *tmp105 false
+  697 op or *tmp107 *tmp104 *tmp106
+  698 jump *label239 equal *tmp107 false
+  699 set :fn2*retval 0
+  700 jump *label241 always
+  701 label *label239
+  702 label *label240
+  703 op sub :fn2:time_left 30 :fn2:secs
+  704 op mul *tmp110 :fn2:time_left :fn2:time_left
+  705 op idiv :fn2:charge_req *tmp110 0.04
+  706 set :fn2*retval :fn2:charge_req
+  707 jump *label241 always
+  708 label *label241
+  709 op sub *tmp153 :fn3:charge :fn2*retval
+  710 op lessThan *tmp154 *tmp153 .PWR_ABORT
+  711 op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  712 op land *tmp156 *tmp154 *tmp155
+  713 jump *label242 equal *tmp156 false
+  714 control enabled :fn3:reactor false
+  715 print "START FAIL battery"
+  716 print "\n"
+  717 set :fn3:supply_fuel false
+  718 jump *label243 always
+  719 label *label242
+  720 op sub :fn3:time_left 30 :fn3:secs
+  721 print "Starting "
+  722 print :fn3:time_left
+  723 print " "
+  724 print "secs, req "
+  725 print :fn2*retval
+  726 print "J"
+  727 print "\n"
+  728 label *label243
+  729 jump *label247 always
+  730 label *label244
+  731 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
+  732 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  733 op land *tmp163 *tmp161 *tmp162
+  734 jump *label245 equal *tmp163 false
+  735 control enabled :fn3:reactor false
+  736 print "ABANDON - battery crit"
+  737 print "\n"
+  738 set :fn3:supply_fuel false
+  739 jump *label246 always
+  740 label *label245
+  741 op idiv :fn3:mins :fn3:secs 6
+  742 op div :fn3:mins :fn3:mins 10
+  743 print "RUN "
+  744 print :fn3:mins
+  745 print " "
+  746 print "mins"
+  747 print "\n"
+  748 label *label246
+  749 label *label247
+  750 label *label248
+  751 label *label249
+  752 label *label250
+  753 label *label251
+  754 jump *label265 always
+  755 label *label252
+  756 op sub *tmp169 :fn3:charge .START_POWER_REQ
+  757 op sub *tmp170 *tmp169 .PWR_ABORT
+  758 op div *tmp171 *tmp170 .PWR_REQ
+  759 op mul :fn3:charge_units *tmp171 .PWR_RESERVE
+  760 op div *tmp173 :fn3:surplus .FLOW_REQ
+  761 op max :fn3:flow_units -0.1 *tmp173
+  762 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
+  763 op add :fn3:cryo_req .CRYO_REQ *tmp175
+  764 jump *label253 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  765 print "IDLE"
+  766 print "\n"
+  767 set :fn3:supply_fuel false
+  768 jump *label264 always
+  769 label *label253
+  770 op add *tmp179 :fn3:flow_units :fn3:charge_units
+  771 jump *label254 greaterThanEq *tmp179 1
+  772 op idiv *tmp183 :fn3:flow_units 0.001
+  773 op div :fn3:flow *tmp183 10
+  774 op idiv *tmp186 :fn3:charge_units 0.001
+  775 op div :fn3:charge *tmp186 10
+  776 print "WAIT power. (%"
+  777 print :fn3:charge
+  778 print "J + %"
+  779 print :fn3:flow
+  780 print "W)"
+  781 print "\n"
+  782 set :fn3:supply_fuel false
+  783 jump *label263 always
+  784 label *label254
+  785 op lessThan *tmp188 :fn3:fuel .FUEL_REQ
+  786 op land *tmp189 :fn3:fuel_on *tmp188
+  787 jump *label257 equal *tmp189 false
+  788 op add *tmp191 :fn3:fuel :fn3:fuel_stored
+  789 jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  790 print "WAIT fuel"
+  791 print "\n"
+  792 jump *label256 always
+  793 label *label255
+  794 print "WAIT system fuel"
+  795 print "\n"
+  796 label *label256
+  797 jump *label262 always
+  798 label *label257
+  799 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
+  800 jump *label258 greaterThanEq :fn3:fuel_stored *tmp194
+  801 print "WAIT buffer fuel"
+  802 print "\n"
+  803 jump *label261 always
+  804 label *label258
+  805 jump *label259 greaterThanEq :fn3:cryo :fn3:cryo_req
+  806 print "WAIT cryo"
+  807 print "\n"
+  808 jump *label260 always
+  809 label *label259
+  810 print "STARTUP"
+  811 print "\n"
+  812 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
+  813 control enabled :fn3:reactor true
+  814 label *label260
+  815 label *label261
+  816 label *label262
+  817 label *label263
+  818 label *label264
+  819 label *label265
+  820 label *label266
+  821 sensor *tmp201 :fn3:reactor @enabled
+  822 jump *label267 equal :fn3:enabled *tmp201
+  823 set .RET_T_STARTUP @tick
+  824 label *label267
+  825 label *label268
+  826 set :fn3*retval :fn3:supply_fuel
+  827 jump *label269 always
+  828 label *label269
   829 set :fuel_3 :fn3*retval
   830 set :t_startup3 .RET_T_STARTUP
   831 set :fn3:reactor reactor4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
   630 set :fn3:fuel_on :fuel_3
   631 set :fn3:t_startup :t_startup3
   632 label *label232
-    * set .RET_T_STARTUP :fn3:t_startup
-    * op sub *tmp113 @tick :fn3:t_startup
+  633 set .RET_T_STARTUP :t_startup3
+  634 op sub *tmp113 @tick :t_startup3
   635 op idiv :fn3:secs *tmp113 60
-    * sensor :fn3:fuel :fn3:reactor @blast-compound
+  636 sensor :fn3:fuel reactor3 @blast-compound
   637 set :fn3:supply_fuel true
-    * sensor :fn3:fuel_stored .CONTAINER @blast-compound
-    * sensor :fn3:cryo :fn3:reactor @cryofluid
-    * sensor *tmp118 .NODE @powerNetStored
+  638 sensor :fn3:fuel_stored vault1 @blast-compound
+  639 sensor :fn3:cryo reactor3 @cryofluid
+  640 sensor *tmp118 node1 @powerNetStored
   641 op floor :fn3:charge *tmp118
-    * sensor *tmp120 .NODE @powerNetIn
-    * sensor *tmp121 .NODE @powerNetOut
+  642 sensor *tmp120 node1 @powerNetIn
+  643 sensor *tmp121 node1 @powerNetOut
   644 op sub *tmp122 *tmp120 *tmp121
   645 op floor :fn3:surplus *tmp122
   646 op mul *tmp124 .AVG_SURPLUS 0.8
   647 op mul *tmp125 :fn3:surplus 0.2
   648 op add .AVG_SURPLUS *tmp124 *tmp125
-    * sensor :fn3:enabled :fn3:reactor @enabled
+  649 sensor :fn3:enabled reactor3 @enabled
   650 print "#"
-    * print :fn3:reactor_num
+  651 print 3
   652 print " "
   653 print "- "
-    * jump *label233 equal :fn3:emerg_shutdown false
-    * control enabled :fn3:reactor false
+  654 jump *label233 equal :emerg_shutdown false
+  655 control enabled reactor3 false
   656 print "emergency mode"
   657 print "\n"
   658 set :fn3:supply_fuel false
   659 jump *label266 always
   660 label *label233
   661 jump *label252 equal :fn3:enabled false
-    * jump *label234 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * control enabled :fn3:reactor false
+  662 jump *label234 greaterThanEq .REACTORS_DESIRED 3
+  663 control enabled reactor3 false
   664 print "STOP unwanted"
   665 print "\n"
   666 jump *label251 always
   667 label *label234
-    * op greaterThan *tmp136 :fn3:reactor_num 1
-    * op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
-    * op lessThan *tmp138 :fn3:fuel_stored *tmp137
-    * op land *tmp139 *tmp136 *tmp138
+  668 op greaterThan *tmp136 3 1
+  669 op mul *tmp137 15 3
+  670 op lessThan *tmp138 :fn3:fuel_stored 45
+  671 op land *tmp139 true *tmp138
   672 jump *label235 equal *tmp139 false
-    * control enabled :fn3:reactor false
+  673 control enabled reactor3 false
   674 print "STOP system fuel low"
   675 print "\n"
   676 jump *label250 always
   677 label *label235
   678 jump *label236 greaterThan :fn3:fuel 1
-    * control enabled :fn3:reactor false
+  679 control enabled reactor3 false
   680 print "STOP fuel low"
   681 print "\n"
   682 jump *label249 always
   683 label *label236
-    * jump *label237 greaterThan :fn3:cryo .CRYO_ABORT
-    * control enabled :fn3:reactor false
+  684 jump *label237 greaterThan :fn3:cryo 1
+  685 control enabled reactor3 false
   686 print "STOP out of cryo"
   687 print "\n"
   688 jump *label248 always
   689 label *label237
   690 jump *label244 greaterThanEq :fn3:secs 30
   691 label *label238
-    * op sub *tmp102 @tick :fn3:t_startup
+  692 op sub *tmp102 @tick :t_startup3
   693 op idiv :fn2:secs *tmp102 60
   694 op greaterThan *tmp104 :fn2:secs 30
-    * sensor *tmp105 :fn3:reactor @enabled
+  695 sensor *tmp105 reactor3 @enabled
   696 op equal *tmp106 *tmp105 false
   697 op or *tmp107 *tmp104 *tmp106
   698 jump *label239 equal *tmp107 false
 
   707 jump *label241 always
   708 label *label241
   709 op sub *tmp153 :fn3:charge :fn2*retval
-    * op lessThan *tmp154 *tmp153 .PWR_ABORT
-    * op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
+  710 op lessThan *tmp154 *tmp153 5000
+  711 op lessThan *tmp155 :fn3:surplus -500
   712 op land *tmp156 *tmp154 *tmp155
   713 jump *label242 equal *tmp156 false
-    * control enabled :fn3:reactor false
+  714 control enabled reactor3 false
   715 print "START FAIL battery"
   716 print "\n"
   717 set :fn3:supply_fuel false
 
   728 label *label243
   729 jump *label247 always
   730 label *label244
-    * op lessThan *tmp161 :fn3:charge .PWR_ABANDON
-    * op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
+  731 op lessThan *tmp161 :fn3:charge 2000
+  732 op lessThan *tmp162 :fn3:surplus -500
   733 op land *tmp163 *tmp161 *tmp162
   734 jump *label245 equal *tmp163 false
-    * control enabled :fn3:reactor false
+  735 control enabled reactor3 false
   736 print "ABANDON - battery crit"
   737 print "\n"
   738 set :fn3:supply_fuel false
 
   754 jump *label265 always
   755 label *label252
   756 op sub *tmp169 :fn3:charge .START_POWER_REQ
-    * op sub *tmp170 *tmp169 .PWR_ABORT
-    * op div *tmp171 *tmp170 .PWR_REQ
-    * op mul :fn3:charge_units *tmp171 .PWR_RESERVE
-    * op div *tmp173 :fn3:surplus .FLOW_REQ
+  757 op sub *tmp170 *tmp169 5000
+  758 op div *tmp171 *tmp170 23000
+  759 op mul :fn3:charge_units *tmp171 0.6
+  760 op div *tmp173 :fn3:surplus 2000
   761 op max :fn3:flow_units -0.1 *tmp173
-    * op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
-    * op add :fn3:cryo_req .CRYO_REQ *tmp175
-    * jump *label253 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
+  762 op mul *tmp175 2 3
+  763 op add :fn3:cryo_req 3 6
+  764 jump *label253 greaterThanEq .REACTORS_DESIRED 3
   765 print "IDLE"
   766 print "\n"
   767 set :fn3:supply_fuel false
 
   782 set :fn3:supply_fuel false
   783 jump *label263 always
   784 label *label254
-    * op lessThan *tmp188 :fn3:fuel .FUEL_REQ
-    * op land *tmp189 :fn3:fuel_on *tmp188
+  785 op lessThan *tmp188 :fn3:fuel 10
+  786 op land *tmp189 :fuel_3 *tmp188
   787 jump *label257 equal *tmp189 false
   788 op add *tmp191 :fn3:fuel :fn3:fuel_stored
-    * jump *label255 lessThanEq *tmp191 .FUEL_REQ
+  789 jump *label255 lessThanEq *tmp191 10
   790 print "WAIT fuel"
   791 print "\n"
   792 jump *label256 always
 
   796 label *label256
   797 jump *label262 always
   798 label *label257
-    * op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
-    * jump *label258 greaterThanEq :fn3:fuel_stored *tmp194
+  799 op mul *tmp194 45 3
+  800 jump *label258 greaterThanEq :fn3:fuel_stored 135
   801 print "WAIT buffer fuel"
   802 print "\n"
   803 jump *label261 always
   804 label *label258
-    * jump *label259 greaterThanEq :fn3:cryo :fn3:cryo_req
+  805 jump *label259 greaterThanEq :fn3:cryo 9
   806 print "WAIT cryo"
   807 print "\n"
   808 jump *label260 always
   809 label *label259
   810 print "STARTUP"
   811 print "\n"
-    * op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
-    * control enabled :fn3:reactor true
+  812 op add .START_POWER_REQ .START_POWER_REQ 23000
+  813 control enabled reactor3 true
   814 label *label260
   815 label *label261
   816 label *label262
 
   818 label *label264
   819 label *label265
   820 label *label266
-    * sensor *tmp201 :fn3:reactor @enabled
+  821 sensor *tmp201 reactor3 @enabled
   822 jump *label267 equal :fn3:enabled *tmp201
   823 set .RET_T_STARTUP @tick
   824 label *label267
 
   826 set :fn3*retval :fn3:supply_fuel
   827 jump *label269 always
   828 label *label269
-    * set :fuel_3 :fn3*retval
+  829 set :fuel_3 :fn3:supply_fuel
   830 set :t_startup3 .RET_T_STARTUP
   831 set :fn3:reactor reactor4
   832 set :fn3:reactor_num 4

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-6 instructions):
 
   624 label *label130
   625 label *label131
   626 op or :emerg_shutdown :emerg_shutdown :fn4*retval
-    * set :fn3:reactor reactor3
-    * set :fn3:reactor_num 3
-    * set :fn3:emerg_shutdown :emerg_shutdown
-    * set :fn3:fuel_on :fuel_3
-    * set :fn3:t_startup :t_startup3
   627 label *label232
   628 set .RET_T_STARTUP :t_startup3
   629 op sub *tmp113 @tick :t_startup3
 
   751 op sub *tmp169 :fn3:charge .START_POWER_REQ
   752 op sub *tmp170 *tmp169 5000
   753 op div *tmp171 *tmp170 23000
-    * op mul :fn3:charge_units *tmp171 0.6
+  754 op div :fn3:charge_units *tmp170 38333.333333333336
   755 op div *tmp173 :fn3:surplus 2000
   756 op max :fn3:flow_units -0.1 *tmp173
   757 op mul *tmp175 2 3
 
   818 set .RET_T_STARTUP @tick
   819 label *label267
   820 label *label268
-    * set :fn3*retval :fn3:supply_fuel
   821 jump *label269 always
   822 label *label269
   823 set :fuel_3 :fn3:supply_fuel

Modifications by Iterated phase, Single Step Elimination, pass 2, iteration 1 (-10 instructions):
 
    59 control enabled projector1 false
    60 control enabled projector2 false
    61 set :fn4*retval false
-    * jump *label127 always
    62 label *label126
    63 label *label127
    64 op notEqual *tmp9 switch1 null
 
   365 set .RET_T_STARTUP @tick
   366 label *label191
   367 label *label192
-    * jump *label193 always
   368 label *label193
   369 set :fuel_1 :fn3:supply_fuel
   370 set :t_startup1 .RET_T_STARTUP
 
   576 set .RET_T_STARTUP @tick
   577 label *label229
   578 label *label230
-    * jump *label231 always
   579 label *label231
   580 set :fuel_2 :fn3:supply_fuel
   581 set :t_startup2 .RET_T_STARTUP
 
   617 control enabled projector1 false
   618 control enabled projector2 false
   619 set :fn4*retval false
-    * jump *label131 always
   620 label *label130
   621 label *label131
   622 op or :emerg_shutdown :emerg_shutdown :fn4*retval
 
   814 set .RET_T_STARTUP @tick
   815 label *label267
   816 label *label268
-    * jump *label269 always
   817 label *label269
   818 set :fuel_3 :fn3:supply_fuel
   819 set :t_startup3 .RET_T_STARTUP
 
   908 label *label34
   909 label *label30
   910 op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
-    * jump *label28 always
   911 label *label28
   912 jump *label35 equal *tmp32 false
   913 control config unloader7 @pyratite
 
   935 label *label100
   936 op idiv *tmp93 .AVG_SURPLUS 100
   937 op div :fn0*retval *tmp93 10
-    * jump *label101 always
   938 label *label101
   939 set :surplus :fn0*retval
   940 sensor :fn0:val node1 @powerNetStored
   941 label *label102
   942 op idiv *tmp93 :fn0:val 100
   943 op div :fn0*retval *tmp93 10
-    * jump *label103 always
   944 label *label103
   945 set :charge :fn0*retval
   946 jump *label42 lessThanEq .START_POWER_REQ 0
   947 label *label104
   948 op idiv *tmp93 .START_POWER_REQ 100
   949 op div :fn0*retval *tmp93 10
-    * jump *label105 always
   950 label *label105
   951 print "Req "
   952 print :fn0*retval
 
  1198 label *label95
  1199 label *label96
  1200 set :fn3*retval :fn3:supply_fuel
-    * jump *label63 always
  1201 label *label63
  1202 goto :fn3*retaddr :fn3
  1203 end

Modifications by Iterated phase, Jump Optimization, pass 3, iteration 1 (-1 instructions):
 
   907 print "n"
   908 label *label34
   909 label *label30
-    * op lessThan *tmp32 :fn6:fuel_stored :fn6:limit
   910 label *label28
-    * jump *label35 equal *tmp32 false
+  911 jump *label35 greaterThanEq :fn6:fuel_stored :fn6:limit
   912 control config unloader7 @pyratite
   913 jump *label36 always
   914 label *label35

Modifications by Final phase, Jump Threading, iteration 1:
 
   205 control enabled reactor1 false
   206 print "STOP unwanted"
   207 print "\n"
-    * jump *label175 always
+  208 jump *label189 always
   209 label *label158
   210 op greaterThan *tmp136 1 1
   211 op mul *tmp137 15 1
 
   215 control enabled reactor1 false
   216 print "STOP system fuel low"
   217 print "\n"
-    * jump *label174 always
+  218 jump *label189 always
   219 label *label159
   220 jump *label160 greaterThan :fn3:fuel 1
   221 control enabled reactor1 false
   222 print "STOP fuel low"
   223 print "\n"
-    * jump *label173 always
+  224 jump *label189 always
   225 label *label160
   226 jump *label161 greaterThan :fn3:cryo 1
   227 control enabled reactor1 false
   228 print "STOP out of cryo"
   229 print "\n"
-    * jump *label172 always
+  230 jump *label189 always
   231 label *label161
   232 jump *label168 greaterThanEq :fn3:secs 30
   233 label *label162
 
   257 print "START FAIL battery"
   258 print "\n"
   259 set :fn3:supply_fuel false
-    * jump *label167 always
+  260 jump *label189 always
   261 label *label166
   262 op sub :fn3:time_left 30 :fn3:secs
   263 print "Starting "
 
   268 print "J"
   269 print "\n"
   270 label *label167
-    * jump *label171 always
+  271 jump *label189 always
   272 label *label168
   273 op lessThan *tmp161 :fn3:charge 2000
   274 op lessThan *tmp162 :fn3:surplus -500
 
   278 print "ABANDON - battery crit"
   279 print "\n"
   280 set :fn3:supply_fuel false
-    * jump *label170 always
+  281 jump *label189 always
   282 label *label169
   283 op idiv :fn3:mins :fn3:secs 6
   284 op div :fn3:mins :fn3:mins 10
 
   331 jump *label179 lessThanEq *tmp191 10
   332 print "WAIT fuel"
   333 print "\n"
-    * jump *label180 always
+  334 jump *label186 always
   335 label *label179
   336 print "WAIT system fuel"
   337 print "\n"
 
   416 control enabled reactor2 false
   417 print "STOP unwanted"
   418 print "\n"
-    * jump *label213 always
+  419 jump *label227 always
   420 label *label196
   421 op greaterThan *tmp136 2 1
   422 op mul *tmp137 15 2
 
   426 control enabled reactor2 false
   427 print "STOP system fuel low"
   428 print "\n"
-    * jump *label212 always
+  429 jump *label227 always
   430 label *label197
   431 jump *label198 greaterThan :fn3:fuel 1
   432 control enabled reactor2 false
   433 print "STOP fuel low"
   434 print "\n"
-    * jump *label211 always
+  435 jump *label227 always
   436 label *label198
   437 jump *label199 greaterThan :fn3:cryo 1
   438 control enabled reactor2 false
   439 print "STOP out of cryo"
   440 print "\n"
-    * jump *label210 always
+  441 jump *label227 always
   442 label *label199
   443 jump *label206 greaterThanEq :fn3:secs 30
   444 label *label200
 
   468 print "START FAIL battery"
   469 print "\n"
   470 set :fn3:supply_fuel false
-    * jump *label205 always
+  471 jump *label227 always
   472 label *label204
   473 op sub :fn3:time_left 30 :fn3:secs
   474 print "Starting "
 
   479 print "J"
   480 print "\n"
   481 label *label205
-    * jump *label209 always
+  482 jump *label227 always
   483 label *label206
   484 op lessThan *tmp161 :fn3:charge 2000
   485 op lessThan *tmp162 :fn3:surplus -500
 
   489 print "ABANDON - battery crit"
   490 print "\n"
   491 set :fn3:supply_fuel false
-    * jump *label208 always
+  492 jump *label227 always
   493 label *label207
   494 op idiv :fn3:mins :fn3:secs 6
   495 op div :fn3:mins :fn3:mins 10
 
   542 jump *label217 lessThanEq *tmp191 10
   543 print "WAIT fuel"
   544 print "\n"
-    * jump *label218 always
+  545 jump *label224 always
   546 label *label217
   547 print "WAIT system fuel"
   548 print "\n"
 
   654 control enabled reactor3 false
   655 print "STOP unwanted"
   656 print "\n"
-    * jump *label251 always
+  657 jump *label265 always
   658 label *label234
   659 op greaterThan *tmp136 3 1
   660 op mul *tmp137 15 3
 
   664 control enabled reactor3 false
   665 print "STOP system fuel low"
   666 print "\n"
-    * jump *label250 always
+  667 jump *label265 always
   668 label *label235
   669 jump *label236 greaterThan :fn3:fuel 1
   670 control enabled reactor3 false
   671 print "STOP fuel low"
   672 print "\n"
-    * jump *label249 always
+  673 jump *label265 always
   674 label *label236
   675 jump *label237 greaterThan :fn3:cryo 1
   676 control enabled reactor3 false
   677 print "STOP out of cryo"
   678 print "\n"
-    * jump *label248 always
+  679 jump *label265 always
   680 label *label237
   681 jump *label244 greaterThanEq :fn3:secs 30
   682 label *label238
 
   706 print "START FAIL battery"
   707 print "\n"
   708 set :fn3:supply_fuel false
-    * jump *label243 always
+  709 jump *label265 always
   710 label *label242
   711 op sub :fn3:time_left 30 :fn3:secs
   712 print "Starting "
 
   717 print "J"
   718 print "\n"
   719 label *label243
-    * jump *label247 always
+  720 jump *label265 always
   721 label *label244
   722 op lessThan *tmp161 :fn3:charge 2000
   723 op lessThan *tmp162 :fn3:surplus -500
 
   727 print "ABANDON - battery crit"
   728 print "\n"
   729 set :fn3:supply_fuel false
-    * jump *label246 always
+  730 jump *label265 always
   731 label *label245
   732 op idiv :fn3:mins :fn3:secs 6
   733 op div :fn3:mins :fn3:mins 10
 
   780 jump *label255 lessThanEq *tmp191 10
   781 print "WAIT fuel"
   782 print "\n"
-    * jump *label256 always
+  783 jump *label262 always
   784 label *label255
   785 print "WAIT system fuel"
   786 print "\n"
 
   878 jump *label31 equal :emerg_shutdown false
   879 print " Enemies detected."
   880 print "\n"
-    * jump *label32 always
+  881 jump *label30 always
   882 label *label31
   883 print " Critical power."
   884 print "\n"
 
  1036 control enabled :fn3:reactor false
  1037 print "STOP unwanted"
  1038 print "\n"
-    * jump *label69 always
+ 1039 jump *label67 always
  1040 label *label68
  1041 op greaterThan *tmp136 :fn3:reactor_num 1
  1042 op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
 
  1046 control enabled :fn3:reactor false
  1047 print "STOP system fuel low"
  1048 print "\n"
-    * jump *label71 always
+ 1049 jump *label67 always
  1050 label *label70
  1051 jump *label72 greaterThan :fn3:fuel 1
  1052 control enabled :fn3:reactor false
  1053 print "STOP fuel low"
  1054 print "\n"
-    * jump *label73 always
+ 1055 jump *label67 always
  1056 label *label72
  1057 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
  1058 control enabled :fn3:reactor false
  1059 print "STOP out of cryo"
  1060 print "\n"
-    * jump *label75 always
+ 1061 jump *label67 always
  1062 label *label74
  1063 jump *label76 greaterThanEq :fn3:secs 30
  1064 label *label152
 
  1088 print "START FAIL battery"
  1089 print "\n"
  1090 set :fn3:supply_fuel false
-    * jump *label80 always
+ 1091 jump *label67 always
  1092 label *label79
  1093 op sub :fn3:time_left 30 :fn3:secs
  1094 print "Starting "
 
  1099 print "J"
  1100 print "\n"
  1101 label *label80
-    * jump *label77 always
+ 1102 jump *label67 always
  1103 label *label76
  1104 op lessThan *tmp161 :fn3:charge .PWR_ABANDON
  1105 op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
 
  1109 print "ABANDON - battery crit"
  1110 print "\n"
  1111 set :fn3:supply_fuel false
-    * jump *label82 always
+ 1112 jump *label67 always
  1113 label *label81
  1114 op idiv :fn3:mins :fn3:secs 6
  1115 op div :fn3:mins :fn3:mins 10
 
  1162 jump *label89 lessThanEq *tmp191 .FUEL_REQ
  1163 print "WAIT fuel"
  1164 print "\n"
-    * jump *label90 always
+ 1165 jump *label88 always
  1166 label *label89
  1167 print "WAIT system fuel"
  1168 print "\n"

Modifications by Final phase, Unreachable Code Elimination, iteration 1 (-4 instructions):
 
    54 control enabled reactor5 false
    55 set :fn4*retval true
    56 jump *label127 always
-    * jump *label126 always
    57 label *label125
    58 control enabled projector1 false
    59 control enabled projector2 false
 
   611 control enabled reactor5 false
   612 set :fn4*retval true
   613 jump *label131 always
-    * jump *label130 always
   614 label *label129
   615 control enabled projector1 false
   616 control enabled projector2 false
 
   998 printflush message1
   999 label *label8
  1000 jump *label7 always
-    * label *label9
-    * end
  1001 label *label3
  1002 set .RET_T_STARTUP :fn3:t_startup
  1003 op sub *tmp113 @tick :fn3:t_startup
 
  1195 set :fn3*retval :fn3:supply_fuel
  1196 label *label63
  1197 goto :fn3*retaddr :fn3
-    * end

Modifications by Final phase, Print Merging, iteration 1 (-132 instructions):
 
    65 op equal *tmp11 *tmp10 false
    66 op land *tmp12 *tmp9 *tmp11
    67 jump *label12 equal *tmp12 false
-    * print "User has disabled emergency switch"
-    * print "\n"
+   68 print "User has disabled emergency switch\n"
    69 set *tmp8 true
    70 jump *label11 always
    71 label *label12
 
   187 op mul *tmp125 :fn3:surplus 0.2
   188 op add .AVG_SURPLUS *tmp124 *tmp125
   189 sensor :fn3:enabled reactor1 @enabled
-    * print "#"
-    * print 1
-    * print " "
-    * print "- "
+  190 print "#1 - "
   191 jump *label157 equal :emerg_shutdown false
   192 control enabled reactor1 false
-    * print "emergency mode"
-    * print "\n"
+  193 print "emergency mode\n"
   194 set :fn3:supply_fuel false
   195 jump *label190 always
   196 label *label157
   197 jump *label176 equal :fn3:enabled false
   198 jump *label158 greaterThanEq .REACTORS_DESIRED 1
   199 control enabled reactor1 false
-    * print "STOP unwanted"
-    * print "\n"
+  200 print "STOP unwanted\n"
   201 jump *label189 always
   202 label *label158
   203 op greaterThan *tmp136 1 1
 
   206 op land *tmp139 false *tmp138
   207 jump *label159 equal *tmp139 false
   208 control enabled reactor1 false
-    * print "STOP system fuel low"
-    * print "\n"
+  209 print "STOP system fuel low\n"
   210 jump *label189 always
   211 label *label159
   212 jump *label160 greaterThan :fn3:fuel 1
   213 control enabled reactor1 false
-    * print "STOP fuel low"
-    * print "\n"
+  214 print "STOP fuel low\n"
   215 jump *label189 always
   216 label *label160
   217 jump *label161 greaterThan :fn3:cryo 1
   218 control enabled reactor1 false
-    * print "STOP out of cryo"
-    * print "\n"
+  219 print "STOP out of cryo\n"
   220 jump *label189 always
   221 label *label161
   222 jump *label168 greaterThanEq :fn3:secs 30
 
   244 op land *tmp156 *tmp154 *tmp155
   245 jump *label166 equal *tmp156 false
   246 control enabled reactor1 false
-    * print "START FAIL battery"
-    * print "\n"
+  247 print "START FAIL battery\n"
   248 set :fn3:supply_fuel false
   249 jump *label189 always
   250 label *label166
   251 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  252 print "Starting {0} secs, req {0}J\n"
+  253 format :fn3:time_left
+  254 format :fn2*retval
   255 label *label167
   256 jump *label189 always
   257 label *label168
 
   260 op land *tmp163 *tmp161 *tmp162
   261 jump *label169 equal *tmp163 false
   262 control enabled reactor1 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  263 print "ABANDON - battery crit\n"
   264 set :fn3:supply_fuel false
   265 jump *label189 always
   266 label *label169
   267 op idiv :fn3:mins :fn3:secs 6
   268 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  269 print "RUN {0} mins\n"
+  270 format :fn3:mins
   271 label *label170
   272 label *label171
   273 label *label172
 
   285 op mul *tmp175 2 1
   286 op add :fn3:cryo_req 3 2
   287 jump *label177 greaterThanEq .REACTORS_DESIRED 1
-    * print "IDLE"
-    * print "\n"
+  288 print "IDLE\n"
   289 set :fn3:supply_fuel false
   290 jump *label188 always
   291 label *label177
 
   295 op div :fn3:flow *tmp183 10
   296 op idiv *tmp186 :fn3:charge_units 0.001
   297 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  298 print "WAIT power. (%{0}J + %{0}W)\n"
+  299 format :fn3:charge
+  300 format :fn3:flow
   301 set :fn3:supply_fuel false
   302 jump *label187 always
   303 label *label178
 
   306 jump *label181 equal *tmp189 false
   307 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   308 jump *label179 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  309 print "WAIT fuel\n"
   310 jump *label186 always
   311 label *label179
-    * print "WAIT system fuel"
-    * print "\n"
+  312 print "WAIT system fuel\n"
   313 label *label180
   314 jump *label186 always
   315 label *label181
   316 op mul *tmp194 45 1
   317 jump *label182 greaterThanEq :fn3:fuel_stored 45
-    * print "WAIT buffer fuel"
-    * print "\n"
+  318 print "WAIT buffer fuel\n"
   319 jump *label185 always
   320 label *label182
   321 jump *label183 greaterThanEq :fn3:cryo 5
-    * print "WAIT cryo"
-    * print "\n"
+  322 print "WAIT cryo\n"
   323 jump *label184 always
   324 label *label183
-    * print "STARTUP"
-    * print "\n"
+  325 print "STARTUP\n"
   326 op add .START_POWER_REQ .START_POWER_REQ 23000
   327 control enabled reactor1 true
   328 label *label184
 
   372 op mul *tmp125 :fn3:surplus 0.2
   373 op add .AVG_SURPLUS *tmp124 *tmp125
   374 sensor :fn3:enabled reactor2 @enabled
-    * print "#"
-    * print 2
-    * print " "
-    * print "- "
+  375 print "#2 - "
   376 jump *label195 equal :emerg_shutdown false
   377 control enabled reactor2 false
-    * print "emergency mode"
-    * print "\n"
+  378 print "emergency mode\n"
   379 set :fn3:supply_fuel false
   380 jump *label228 always
   381 label *label195
   382 jump *label214 equal :fn3:enabled false
   383 jump *label196 greaterThanEq .REACTORS_DESIRED 2
   384 control enabled reactor2 false
-    * print "STOP unwanted"
-    * print "\n"
+  385 print "STOP unwanted\n"
   386 jump *label227 always
   387 label *label196
   388 op greaterThan *tmp136 2 1
 
   391 op land *tmp139 true *tmp138
   392 jump *label197 equal *tmp139 false
   393 control enabled reactor2 false
-    * print "STOP system fuel low"
-    * print "\n"
+  394 print "STOP system fuel low\n"
   395 jump *label227 always
   396 label *label197
   397 jump *label198 greaterThan :fn3:fuel 1
   398 control enabled reactor2 false
-    * print "STOP fuel low"
-    * print "\n"
+  399 print "STOP fuel low\n"
   400 jump *label227 always
   401 label *label198
   402 jump *label199 greaterThan :fn3:cryo 1
   403 control enabled reactor2 false
-    * print "STOP out of cryo"
-    * print "\n"
+  404 print "STOP out of cryo\n"
   405 jump *label227 always
   406 label *label199
   407 jump *label206 greaterThanEq :fn3:secs 30
 
   429 op land *tmp156 *tmp154 *tmp155
   430 jump *label204 equal *tmp156 false
   431 control enabled reactor2 false
-    * print "START FAIL battery"
-    * print "\n"
+  432 print "START FAIL battery\n"
   433 set :fn3:supply_fuel false
   434 jump *label227 always
   435 label *label204
   436 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  437 print "Starting {0} secs, req {0}J\n"
+  438 format :fn3:time_left
+  439 format :fn2*retval
   440 label *label205
   441 jump *label227 always
   442 label *label206
 
   445 op land *tmp163 *tmp161 *tmp162
   446 jump *label207 equal *tmp163 false
   447 control enabled reactor2 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  448 print "ABANDON - battery crit\n"
   449 set :fn3:supply_fuel false
   450 jump *label227 always
   451 label *label207
   452 op idiv :fn3:mins :fn3:secs 6
   453 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  454 print "RUN {0} mins\n"
+  455 format :fn3:mins
   456 label *label208
   457 label *label209
   458 label *label210
 
   470 op mul *tmp175 2 2
   471 op add :fn3:cryo_req 3 4
   472 jump *label215 greaterThanEq .REACTORS_DESIRED 2
-    * print "IDLE"
-    * print "\n"
+  473 print "IDLE\n"
   474 set :fn3:supply_fuel false
   475 jump *label226 always
   476 label *label215
 
   480 op div :fn3:flow *tmp183 10
   481 op idiv *tmp186 :fn3:charge_units 0.001
   482 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  483 print "WAIT power. (%{0}J + %{0}W)\n"
+  484 format :fn3:charge
+  485 format :fn3:flow
   486 set :fn3:supply_fuel false
   487 jump *label225 always
   488 label *label216
 
   491 jump *label219 equal *tmp189 false
   492 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   493 jump *label217 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  494 print "WAIT fuel\n"
   495 jump *label224 always
   496 label *label217
-    * print "WAIT system fuel"
-    * print "\n"
+  497 print "WAIT system fuel\n"
   498 label *label218
   499 jump *label224 always
   500 label *label219
   501 op mul *tmp194 45 2
   502 jump *label220 greaterThanEq :fn3:fuel_stored 90
-    * print "WAIT buffer fuel"
-    * print "\n"
+  503 print "WAIT buffer fuel\n"
   504 jump *label223 always
   505 label *label220
   506 jump *label221 greaterThanEq :fn3:cryo 7
-    * print "WAIT cryo"
-    * print "\n"
+  507 print "WAIT cryo\n"
   508 jump *label222 always
   509 label *label221
-    * print "STARTUP"
-    * print "\n"
+  510 print "STARTUP\n"
   511 op add .START_POWER_REQ .START_POWER_REQ 23000
   512 control enabled reactor2 true
   513 label *label222
 
   583 op mul *tmp125 :fn3:surplus 0.2
   584 op add .AVG_SURPLUS *tmp124 *tmp125
   585 sensor :fn3:enabled reactor3 @enabled
-    * print "#"
-    * print 3
-    * print " "
-    * print "- "
+  586 print "#3 - "
   587 jump *label233 equal :emerg_shutdown false
   588 control enabled reactor3 false
-    * print "emergency mode"
-    * print "\n"
+  589 print "emergency mode\n"
   590 set :fn3:supply_fuel false
   591 jump *label266 always
   592 label *label233
   593 jump *label252 equal :fn3:enabled false
   594 jump *label234 greaterThanEq .REACTORS_DESIRED 3
   595 control enabled reactor3 false
-    * print "STOP unwanted"
-    * print "\n"
+  596 print "STOP unwanted\n"
   597 jump *label265 always
   598 label *label234
   599 op greaterThan *tmp136 3 1
 
   602 op land *tmp139 true *tmp138
   603 jump *label235 equal *tmp139 false
   604 control enabled reactor3 false
-    * print "STOP system fuel low"
-    * print "\n"
+  605 print "STOP system fuel low\n"
   606 jump *label265 always
   607 label *label235
   608 jump *label236 greaterThan :fn3:fuel 1
   609 control enabled reactor3 false
-    * print "STOP fuel low"
-    * print "\n"
+  610 print "STOP fuel low\n"
   611 jump *label265 always
   612 label *label236
   613 jump *label237 greaterThan :fn3:cryo 1
   614 control enabled reactor3 false
-    * print "STOP out of cryo"
-    * print "\n"
+  615 print "STOP out of cryo\n"
   616 jump *label265 always
   617 label *label237
   618 jump *label244 greaterThanEq :fn3:secs 30
 
   640 op land *tmp156 *tmp154 *tmp155
   641 jump *label242 equal *tmp156 false
   642 control enabled reactor3 false
-    * print "START FAIL battery"
-    * print "\n"
+  643 print "START FAIL battery\n"
   644 set :fn3:supply_fuel false
   645 jump *label265 always
   646 label *label242
   647 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  648 print "Starting {0} secs, req {0}J\n"
+  649 format :fn3:time_left
+  650 format :fn2*retval
   651 label *label243
   652 jump *label265 always
   653 label *label244
 
   656 op land *tmp163 *tmp161 *tmp162
   657 jump *label245 equal *tmp163 false
   658 control enabled reactor3 false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  659 print "ABANDON - battery crit\n"
   660 set :fn3:supply_fuel false
   661 jump *label265 always
   662 label *label245
   663 op idiv :fn3:mins :fn3:secs 6
   664 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  665 print "RUN {0} mins\n"
+  666 format :fn3:mins
   667 label *label246
   668 label *label247
   669 label *label248
 
   681 op mul *tmp175 2 3
   682 op add :fn3:cryo_req 3 6
   683 jump *label253 greaterThanEq .REACTORS_DESIRED 3
-    * print "IDLE"
-    * print "\n"
+  684 print "IDLE\n"
   685 set :fn3:supply_fuel false
   686 jump *label264 always
   687 label *label253
 
   691 op div :fn3:flow *tmp183 10
   692 op idiv *tmp186 :fn3:charge_units 0.001
   693 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+  694 print "WAIT power. (%{0}J + %{0}W)\n"
+  695 format :fn3:charge
+  696 format :fn3:flow
   697 set :fn3:supply_fuel false
   698 jump *label263 always
   699 label *label254
 
   702 jump *label257 equal *tmp189 false
   703 op add *tmp191 :fn3:fuel :fn3:fuel_stored
   704 jump *label255 lessThanEq *tmp191 10
-    * print "WAIT fuel"
-    * print "\n"
+  705 print "WAIT fuel\n"
   706 jump *label262 always
   707 label *label255
-    * print "WAIT system fuel"
-    * print "\n"
+  708 print "WAIT system fuel\n"
   709 label *label256
   710 jump *label262 always
   711 label *label257
   712 op mul *tmp194 45 3
   713 jump *label258 greaterThanEq :fn3:fuel_stored 135
-    * print "WAIT buffer fuel"
-    * print "\n"
+  714 print "WAIT buffer fuel\n"
   715 jump *label261 always
   716 label *label258
   717 jump *label259 greaterThanEq :fn3:cryo 9
-    * print "WAIT cryo"
-    * print "\n"
+  718 print "WAIT cryo\n"
   719 jump *label260 always
   720 label *label259
-    * print "STARTUP"
-    * print "\n"
+  721 print "STARTUP\n"
   722 op add .START_POWER_REQ .START_POWER_REQ 23000
   723 control enabled reactor3 true
   724 label *label260
 
   787 op or *tmp43 *tmp42 :emerg_shutdown
   788 jump *label29 equal *tmp43 false
   789 set :fn6:limit 0
-    * print "Central Fuel at "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 0
-    * print " "
-    * print "- "
+  790 print "Central Fuel at {0} / 0 - "
+  791 format :fn6:fuel_stored
   792 jump *label31 equal :emerg_shutdown false
-    * print " Enemies detected."
-    * print "\n"
+  793 print " Enemies detected.\n"
   794 jump *label30 always
   795 label *label31
-    * print " Critical power."
-    * print "\n"
+  796 print " Critical power.\n"
   797 label *label32
   798 jump *label30 always
   799 label *label29
   800 jump *label33 notEqual :fn6:reactors_fueled false
   801 set :fn6:limit 150
-    * print "Fuel "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 150
-    * print " "
-    * print "(due to emergency)"
-    * print "\n"
+  802 print "Fuel {0} / 150 (due to emergency)\n"
+  803 format :fn6:fuel_stored
   804 jump *label34 always
   805 label *label33
   806 set :fn6:limit 800
-    * print "Fuel "
-    * print :fn6:fuel_stored
-    * print " "
-    * print "/ "
-    * print 800
-    * print "\"
-    * print "n"
+  807 print "Fuel {0} / 800\n"
+  808 format :fn6:fuel_stored
   809 label *label34
   810 label *label30
   811 label *label28
 
   822 op lessThan *tmp57 .START_POWER_REQ 10
   823 op land *tmp58 *tmp56 *tmp57
   824 jump *label38 equal *tmp58 false
-    * print "Differential now idle."
-    * print "\n"
+  825 print "Differential now idle.\n"
   826 control enabled generator1 false
   827 control enabled generator2 false
   828 jump *label39 always
 
   847 op idiv *tmp93 .START_POWER_REQ 100
   848 op div :fn0*retval *tmp93 10
   849 label *label105
-    * print "Req "
-    * print :fn0*retval
-    * print "kJ / "
-    * print :charge
-    * print "kJ. "
-    * print :surplus
-    * print "kW flow."
-    * print "\n"
+  850 print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
+  851 format :fn0*retval
+  852 format :charge
+  853 format :surplus
   854 jump *label43 always
   855 label *label42
-    * print "Power "
-    * print :surplus
-    * print "kW, "
-    * print :fn0*retval
-    * print "kJ"
-    * print "\n"
+  856 print "Power {0}kW, {0}kJ\n"
+  857 format :surplus
+  858 format :fn0*retval
   859 sensor *tmp71 node1 @powerNetStored
   860 sensor *tmp72 node1 @powerNetCapacity
   861 op div :fn8:stored *tmp71 *tmp72
 
   884 label *label45
   885 label *label43
   886 jump *label52 equal .REACTORS_DESIRED 5
-    * print "Require only "
-    * print .REACTORS_DESIRED
-    * print "/5 reactors."
-    * print "\n"
+  887 print "Require only {0}/5 reactors.\n"
+  888 format .REACTORS_DESIRED
   889 label *label52
   890 label *label53
   891 printflush message1
 
   909 op mul *tmp125 :fn3:surplus 0.2
   910 op add .AVG_SURPLUS *tmp124 *tmp125
   911 sensor :fn3:enabled :fn3:reactor @enabled
-    * print "#"
-    * print :fn3:reactor_num
-    * print " "
-    * print "- "
+  912 print "#{0} - "
+  913 format :fn3:reactor_num
   914 jump *label64 equal :fn3:emerg_shutdown false
   915 control enabled :fn3:reactor false
-    * print "emergency mode"
-    * print "\n"
+  916 print "emergency mode\n"
   917 set :fn3:supply_fuel false
   918 jump *label65 always
   919 label *label64
   920 jump *label66 equal :fn3:enabled false
   921 jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
   922 control enabled :fn3:reactor false
-    * print "STOP unwanted"
-    * print "\n"
+  923 print "STOP unwanted\n"
   924 jump *label67 always
   925 label *label68
   926 op greaterThan *tmp136 :fn3:reactor_num 1
 
   929 op land *tmp139 *tmp136 *tmp138
   930 jump *label70 equal *tmp139 false
   931 control enabled :fn3:reactor false
-    * print "STOP system fuel low"
-    * print "\n"
+  932 print "STOP system fuel low\n"
   933 jump *label67 always
   934 label *label70
   935 jump *label72 greaterThan :fn3:fuel 1
   936 control enabled :fn3:reactor false
-    * print "STOP fuel low"
-    * print "\n"
+  937 print "STOP fuel low\n"
   938 jump *label67 always
   939 label *label72
   940 jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
   941 control enabled :fn3:reactor false
-    * print "STOP out of cryo"
-    * print "\n"
+  942 print "STOP out of cryo\n"
   943 jump *label67 always
   944 label *label74
   945 jump *label76 greaterThanEq :fn3:secs 30
 
   967 op land *tmp156 *tmp154 *tmp155
   968 jump *label79 equal *tmp156 false
   969 control enabled :fn3:reactor false
-    * print "START FAIL battery"
-    * print "\n"
+  970 print "START FAIL battery\n"
   971 set :fn3:supply_fuel false
   972 jump *label67 always
   973 label *label79
   974 op sub :fn3:time_left 30 :fn3:secs
-    * print "Starting "
-    * print :fn3:time_left
-    * print " "
-    * print "secs, req "
-    * print :fn2*retval
-    * print "J"
-    * print "\n"
+  975 print "Starting {0} secs, req {0}J\n"
+  976 format :fn3:time_left
+  977 format :fn2*retval
   978 label *label80
   979 jump *label67 always
   980 label *label76
 
   983 op land *tmp163 *tmp161 *tmp162
   984 jump *label81 equal *tmp163 false
   985 control enabled :fn3:reactor false
-    * print "ABANDON - battery crit"
-    * print "\n"
+  986 print "ABANDON - battery crit\n"
   987 set :fn3:supply_fuel false
   988 jump *label67 always
   989 label *label81
   990 op idiv :fn3:mins :fn3:secs 6
   991 op div :fn3:mins :fn3:mins 10
-    * print "RUN "
-    * print :fn3:mins
-    * print " "
-    * print "mins"
-    * print "\n"
+  992 print "RUN {0} mins\n"
+  993 format :fn3:mins
   994 label *label82
   995 label *label77
   996 label *label75
 
  1008 op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
  1009 op add :fn3:cryo_req .CRYO_REQ *tmp175
  1010 jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
-    * print "IDLE"
-    * print "\n"
+ 1011 print "IDLE\n"
  1012 set :fn3:supply_fuel false
  1013 jump *label84 always
  1014 label *label83
 
  1018 op div :fn3:flow *tmp183 10
  1019 op idiv *tmp186 :fn3:charge_units 0.001
  1020 op div :fn3:charge *tmp186 10
-    * print "WAIT power. (%"
-    * print :fn3:charge
-    * print "J + %"
-    * print :fn3:flow
-    * print "W)"
-    * print "\n"
+ 1021 print "WAIT power. (%{0}J + %{0}W)\n"
+ 1022 format :fn3:charge
+ 1023 format :fn3:flow
  1024 set :fn3:supply_fuel false
  1025 jump *label86 always
  1026 label *label85
 
  1029 jump *label87 equal *tmp189 false
  1030 op add *tmp191 :fn3:fuel :fn3:fuel_stored
  1031 jump *label89 lessThanEq *tmp191 .FUEL_REQ
-    * print "WAIT fuel"
-    * print "\n"
+ 1032 print "WAIT fuel\n"
  1033 jump *label88 always
  1034 label *label89
-    * print "WAIT system fuel"
-    * print "\n"
+ 1035 print "WAIT system fuel\n"
  1036 label *label90
  1037 jump *label88 always
  1038 label *label87
  1039 op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
  1040 jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
-    * print "WAIT buffer fuel"
-    * print "\n"
+ 1041 print "WAIT buffer fuel\n"
  1042 jump *label92 always
  1043 label *label91
  1044 jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
-    * print "WAIT cryo"
-    * print "\n"
+ 1045 print "WAIT cryo\n"
  1046 jump *label94 always
  1047 label *label93
-    * print "STARTUP"
-    * print "\n"
+ 1048 print "STARTUP\n"
  1049 op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
  1050 control enabled :fn3:reactor true
  1051 label *label94

Final code before resolving virtual instructions:

printflush message1
set .PWR_REQ 23000
set .FLOW_REQ 2000
set .PWR_ABANDON 2000
set .PWR_ABORT 5000
set .PWR_RESERVE 0.6
set .FLOW_ABORT -500
set .FUEL_REQ 10
set .FUEL_TOT_REQ 45
set .FUEL_TOT_ABORT 15
set .CRYO_REQ 3
set .CRYO_REQ_EA 2
set .CRYO_ABORT 1
set :fuel_1 false
set :fuel_2 false
set :fuel_3 false
set :fuel_4 false
set :fuel_5 false
sensor *tmp0 node1 @powerNetIn
sensor *tmp1 node1 @powerNetOut
op sub *tmp2 *tmp0 *tmp1
op floor :surplus *tmp2 0
jump *label5 lessThanEq :surplus 10000
op sub *tmp5 @tick 3600
jump *label6 always 0 0
label *label5
set *tmp5 @tick
label *label6
set :t_startup1 *tmp5
set :t_startup2 *tmp5
set :t_startup3 *tmp5
set :t_startup4 *tmp5
set :t_startup5 *tmp5
set .REACTORS_DESIRED 5
set .AVG_SURPLUS 500
label *label7
set .CONTAINER vault1
set .NODE node1
radar enemy any any health cyclone1 1 :fn4:enemy_found
jump *label125 equal :fn4:enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set :fn4*retval true
jump *label127 always 0 0
label *label125
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set :fn4*retval false
label *label127
op notEqual *tmp9 switch1 null
sensor *tmp10 switch1 @enabled
op equal *tmp11 *tmp10 false
op land *tmp12 *tmp9 *tmp11
jump *label12 equal *tmp12 false
print "User has disabled emergency switch\n"
set *tmp8 true
jump *label11 always 0 0
label *label12
set *tmp8 false
jump *label11 always 0 0
label *label11
op or :emerg_shutdown :fn4*retval *tmp8
op sub *tmp102 @tick :t_startup1
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label133 equal *tmp107 false
set :fn2*retval 0
jump *label135 always 0 0
label *label133
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label135 always 0 0
label *label135
set .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup2
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label137 equal *tmp107 false
set :fn2*retval 0
jump *label139 always 0 0
label *label137
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label139 always 0 0
label *label139
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup3
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label141 equal *tmp107 false
set :fn2*retval 0
jump *label143 always 0 0
label *label141
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label143 always 0 0
label *label143
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup4
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor4 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label145 equal *tmp107 false
set :fn2*retval 0
jump *label147 always 0 0
label *label145
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label147 always 0 0
label *label147
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
op sub *tmp102 @tick :t_startup5
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor5 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label149 equal *tmp107 false
set :fn2*retval 0
jump *label151 always 0 0
label *label149
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label151 always 0 0
label *label151
op add .START_POWER_REQ .START_POWER_REQ :fn2*retval
set .RET_T_STARTUP :t_startup1
op sub *tmp113 @tick :t_startup1
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor1 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor1 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor1 @enabled
print "#1 - "
jump *label157 equal :emerg_shutdown false
control enabled reactor1 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label190 always 0 0
label *label157
jump *label176 equal :fn3:enabled false
jump *label158 greaterThanEq .REACTORS_DESIRED 1
control enabled reactor1 false 0 0 0
print "STOP unwanted\n"
jump *label189 always 0 0
label *label158
op greaterThan *tmp136 1 1
op mul *tmp137 15 1
op lessThan *tmp138 :fn3:fuel_stored 15
op land *tmp139 false *tmp138
jump *label159 equal *tmp139 false
control enabled reactor1 false 0 0 0
print "STOP system fuel low\n"
jump *label189 always 0 0
label *label159
jump *label160 greaterThan :fn3:fuel 1
control enabled reactor1 false 0 0 0
print "STOP fuel low\n"
jump *label189 always 0 0
label *label160
jump *label161 greaterThan :fn3:cryo 1
control enabled reactor1 false 0 0 0
print "STOP out of cryo\n"
jump *label189 always 0 0
label *label161
jump *label168 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup1
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor1 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label163 equal *tmp107 false
set :fn2*retval 0
jump *label165 always 0 0
label *label163
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label165 always 0 0
label *label165
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label166 equal *tmp156 false
control enabled reactor1 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label189 always 0 0
label *label166
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label189 always 0 0
label *label168
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label169 equal *tmp163 false
control enabled reactor1 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label189 always 0 0
label *label169
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label189 always 0 0
label *label176
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 1
op add :fn3:cryo_req 3 2
jump *label177 greaterThanEq .REACTORS_DESIRED 1
print "IDLE\n"
set :fn3:supply_fuel false
jump *label188 always 0 0
label *label177
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label178 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label187 always 0 0
label *label178
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_1 *tmp188
jump *label181 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label179 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label186 always 0 0
label *label179
print "WAIT system fuel\n"
jump *label186 always 0 0
label *label181
op mul *tmp194 45 1
jump *label182 greaterThanEq :fn3:fuel_stored 45
print "WAIT buffer fuel\n"
jump *label185 always 0 0
label *label182
jump *label183 greaterThanEq :fn3:cryo 5
print "WAIT cryo\n"
jump *label184 always 0 0
label *label183
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor1 true 0 0 0
label *label184
label *label185
label *label186
label *label187
label *label188
label *label189
label *label190
sensor *tmp201 reactor1 @enabled
jump *label191 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label191
set :fuel_1 :fn3:supply_fuel
set :t_startup1 .RET_T_STARTUP
jump *label107 equal :fn3:supply_fuel false
control config unloader1 @blast-compound 0 0 0
jump *label108 always 0 0
label *label107
control config unloader1 @scrap 0 0 0
label *label108
jump *label109 notEqual :fn3:supply_fuel false
control config unloader2 @blast-compound 0 0 0
jump *label110 always 0 0
label *label109
control config unloader2 @scrap 0 0 0
label *label110
set .RET_T_STARTUP :t_startup2
op sub *tmp113 @tick :t_startup2
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor2 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor2 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor2 @enabled
print "#2 - "
jump *label195 equal :emerg_shutdown false
control enabled reactor2 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label228 always 0 0
label *label195
jump *label214 equal :fn3:enabled false
jump *label196 greaterThanEq .REACTORS_DESIRED 2
control enabled reactor2 false 0 0 0
print "STOP unwanted\n"
jump *label227 always 0 0
label *label196
op greaterThan *tmp136 2 1
op mul *tmp137 15 2
op lessThan *tmp138 :fn3:fuel_stored 30
op land *tmp139 true *tmp138
jump *label197 equal *tmp139 false
control enabled reactor2 false 0 0 0
print "STOP system fuel low\n"
jump *label227 always 0 0
label *label197
jump *label198 greaterThan :fn3:fuel 1
control enabled reactor2 false 0 0 0
print "STOP fuel low\n"
jump *label227 always 0 0
label *label198
jump *label199 greaterThan :fn3:cryo 1
control enabled reactor2 false 0 0 0
print "STOP out of cryo\n"
jump *label227 always 0 0
label *label199
jump *label206 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup2
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor2 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label201 equal *tmp107 false
set :fn2*retval 0
jump *label203 always 0 0
label *label201
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label203 always 0 0
label *label203
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label204 equal *tmp156 false
control enabled reactor2 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label227 always 0 0
label *label204
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label227 always 0 0
label *label206
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label207 equal *tmp163 false
control enabled reactor2 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label227 always 0 0
label *label207
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label227 always 0 0
label *label214
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 2
op add :fn3:cryo_req 3 4
jump *label215 greaterThanEq .REACTORS_DESIRED 2
print "IDLE\n"
set :fn3:supply_fuel false
jump *label226 always 0 0
label *label215
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label216 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label225 always 0 0
label *label216
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_2 *tmp188
jump *label219 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label217 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label224 always 0 0
label *label217
print "WAIT system fuel\n"
jump *label224 always 0 0
label *label219
op mul *tmp194 45 2
jump *label220 greaterThanEq :fn3:fuel_stored 90
print "WAIT buffer fuel\n"
jump *label223 always 0 0
label *label220
jump *label221 greaterThanEq :fn3:cryo 7
print "WAIT cryo\n"
jump *label222 always 0 0
label *label221
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor2 true 0 0 0
label *label222
label *label223
label *label224
label *label225
label *label226
label *label227
label *label228
sensor *tmp201 reactor2 @enabled
jump *label229 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label229
set :fuel_2 :fn3:supply_fuel
set :t_startup2 .RET_T_STARTUP
jump *label113 equal :fn3:supply_fuel false
control config unloader3 @blast-compound 0 0 0
jump *label114 always 0 0
label *label113
control config unloader3 @scrap 0 0 0
label *label114
jump *label115 notEqual :fn3:supply_fuel false
control config unloader4 @blast-compound 0 0 0
jump *label116 always 0 0
label *label115
control config unloader4 @scrap 0 0 0
label *label116
radar enemy any any health cyclone1 1 :fn4:enemy_found
jump *label129 equal :fn4:enemy_found null
control enabled projector1 true 0 0 0
control enabled projector2 true 0 0 0
control config unloader1 @scrap 0 0 0
control config unloader2 @blast-compound 0 0 0
control config unloader3 @scrap 0 0 0
control config unloader4 @blast-compound 0 0 0
control config unloader5 @scrap 0 0 0
control config unloader6 @blast-compound 0 0 0
control config unloader7 @scrap 0 0 0
control enabled reactor1 false 0 0 0
control enabled reactor2 false 0 0 0
control enabled reactor3 false 0 0 0
control enabled reactor4 false 0 0 0
control enabled reactor5 false 0 0 0
set :fn4*retval true
jump *label131 always 0 0
label *label129
control enabled projector1 false 0 0 0
control enabled projector2 false 0 0 0
set :fn4*retval false
label *label131
op or :emerg_shutdown :emerg_shutdown :fn4*retval
set .RET_T_STARTUP :t_startup3
op sub *tmp113 @tick :t_startup3
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel reactor3 @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored vault1 @blast-compound
sensor :fn3:cryo reactor3 @cryofluid
sensor *tmp118 node1 @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 node1 @powerNetIn
sensor *tmp121 node1 @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled reactor3 @enabled
print "#3 - "
jump *label233 equal :emerg_shutdown false
control enabled reactor3 false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label266 always 0 0
label *label233
jump *label252 equal :fn3:enabled false
jump *label234 greaterThanEq .REACTORS_DESIRED 3
control enabled reactor3 false 0 0 0
print "STOP unwanted\n"
jump *label265 always 0 0
label *label234
op greaterThan *tmp136 3 1
op mul *tmp137 15 3
op lessThan *tmp138 :fn3:fuel_stored 45
op land *tmp139 true *tmp138
jump *label235 equal *tmp139 false
control enabled reactor3 false 0 0 0
print "STOP system fuel low\n"
jump *label265 always 0 0
label *label235
jump *label236 greaterThan :fn3:fuel 1
control enabled reactor3 false 0 0 0
print "STOP fuel low\n"
jump *label265 always 0 0
label *label236
jump *label237 greaterThan :fn3:cryo 1
control enabled reactor3 false 0 0 0
print "STOP out of cryo\n"
jump *label265 always 0 0
label *label237
jump *label244 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :t_startup3
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 reactor3 @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label239 equal *tmp107 false
set :fn2*retval 0
jump *label241 always 0 0
label *label239
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label241 always 0 0
label *label241
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 5000
op lessThan *tmp155 :fn3:surplus -500
op land *tmp156 *tmp154 *tmp155
jump *label242 equal *tmp156 false
control enabled reactor3 false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label265 always 0 0
label *label242
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label265 always 0 0
label *label244
op lessThan *tmp161 :fn3:charge 2000
op lessThan *tmp162 :fn3:surplus -500
op land *tmp163 *tmp161 *tmp162
jump *label245 equal *tmp163 false
control enabled reactor3 false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label265 always 0 0
label *label245
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label265 always 0 0
label *label252
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 5000
op div *tmp171 *tmp170 23000
op div :fn3:charge_units *tmp170 38333.333333333336
op div *tmp173 :fn3:surplus 2000
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 2 3
op add :fn3:cryo_req 3 6
jump *label253 greaterThanEq .REACTORS_DESIRED 3
print "IDLE\n"
set :fn3:supply_fuel false
jump *label264 always 0 0
label *label253
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label254 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label263 always 0 0
label *label254
op lessThan *tmp188 :fn3:fuel 10
op land *tmp189 :fuel_3 *tmp188
jump *label257 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label255 lessThanEq *tmp191 10
print "WAIT fuel\n"
jump *label262 always 0 0
label *label255
print "WAIT system fuel\n"
jump *label262 always 0 0
label *label257
op mul *tmp194 45 3
jump *label258 greaterThanEq :fn3:fuel_stored 135
print "WAIT buffer fuel\n"
jump *label261 always 0 0
label *label258
jump *label259 greaterThanEq :fn3:cryo 9
print "WAIT cryo\n"
jump *label260 always 0 0
label *label259
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ 23000
control enabled reactor3 true 0 0 0
label *label260
label *label261
label *label262
label *label263
label *label264
label *label265
label *label266
sensor *tmp201 reactor3 @enabled
jump *label267 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label267
set :fuel_3 :fn3:supply_fuel
set :t_startup3 .RET_T_STARTUP
set :fn3:reactor reactor4
set :fn3:reactor_num 4
set :fn3:emerg_shutdown :emerg_shutdown
set :fn3:fuel_on :fuel_4
set :fn3:t_startup :t_startup4
setaddr :fn3*retaddr *label25
call *label3 :fn3*retval
gotolabel *label25 :fn3
set :fuel_4 :fn3*retval
set :t_startup4 .RET_T_STARTUP
set :fn3:reactor reactor5
set :fn3:reactor_num 5
set :fn3:emerg_shutdown :emerg_shutdown
set :fn3:fuel_on :fuel_5
set :fn3:t_startup :t_startup5
setaddr :fn3*retaddr *label26
call *label3 :fn3*retval
gotolabel *label26 :fn3
set :fuel_5 :fn3*retval
set :t_startup5 .RET_T_STARTUP
op or *tmp27 :fuel_3 :fuel_4
op or :fuel_many *tmp27 :fn3*retval
jump *label119 equal :fuel_many false
control config unloader5 @blast-compound 0 0 0
jump *label120 always 0 0
label *label119
control config unloader5 @scrap 0 0 0
label *label120
jump *label121 notEqual :fuel_many false
control config unloader6 @blast-compound 0 0 0
jump *label122 always 0 0
label *label121
control config unloader6 @scrap 0 0 0
label *label122
op or *tmp30 :fuel_1 :fuel_2
op or :fn6:reactors_fueled *tmp30 :fuel_many
sensor *tmp33 node1 @powerNetStored
op floor :fn6:charge *tmp33 0
sensor *tmp35 node1 @powerNetIn
sensor *tmp36 node1 @powerNetOut
op sub *tmp37 *tmp35 *tmp36
op floor :fn6:surplus *tmp37 0
sensor :fn6:fuel_stored vault1 @blast-compound
op lessThan *tmp40 :fn6:charge 5000
op lessThan *tmp41 :fn6:surplus -500
op land *tmp42 *tmp40 *tmp41
op or *tmp43 *tmp42 :emerg_shutdown
jump *label29 equal *tmp43 false
set :fn6:limit 0
print "Central Fuel at {0} / 0 - "
format :fn6:fuel_stored
jump *label31 equal :emerg_shutdown false
print " Enemies detected.\n"
jump *label30 always 0 0
label *label31
print " Critical power.\n"
jump *label30 always 0 0
label *label29
jump *label33 notEqual :fn6:reactors_fueled false
set :fn6:limit 150
print "Fuel {0} / 150 (due to emergency)\n"
format :fn6:fuel_stored
jump *label34 always 0 0
label *label33
set :fn6:limit 800
print "Fuel {0} / 800\n"
format :fn6:fuel_stored
label *label34
label *label30
jump *label35 greaterThanEq :fn6:fuel_stored :fn6:limit
control config unloader7 @pyratite 0 0 0
jump *label36 always 0 0
label *label35
control config unloader7 @scrap 0 0 0
label *label36
sensor *tmp53 node1 @powerNetStored
sensor *tmp54 node1 @powerNetCapacity
op div :fn7:stored_pc *tmp53 *tmp54
op greaterThan *tmp56 :fn7:stored_pc 0.9
op lessThan *tmp57 .START_POWER_REQ 10
op land *tmp58 *tmp56 *tmp57
jump *label38 equal *tmp58 false
print "Differential now idle.\n"
control enabled generator1 false 0 0 0
control enabled generator2 false 0 0 0
jump *label39 always 0 0
label *label38
control enabled generator1 true 0 0 0
control enabled generator2 true 0 0 0
label *label39
op idiv *tmp93 .AVG_SURPLUS 100
op div :fn0*retval *tmp93 10
set :surplus :fn0*retval
sensor :fn0:val node1 @powerNetStored
op idiv *tmp93 :fn0:val 100
op div :fn0*retval *tmp93 10
set :charge :fn0*retval
jump *label42 lessThanEq .START_POWER_REQ 0
op idiv *tmp93 .START_POWER_REQ 100
op div :fn0*retval *tmp93 10
print "Req {0}kJ / {0}kJ. {0}kW flow.\n"
format :fn0*retval
format :charge
format :surplus
jump *label43 always 0 0
label *label42
print "Power {0}kW, {0}kJ\n"
format :surplus
format :fn0*retval
sensor *tmp71 node1 @powerNetStored
sensor *tmp72 node1 @powerNetCapacity
op div :fn8:stored *tmp71 *tmp72
op greaterThan *tmp74 :fn8:stored 0.98
op greaterThan *tmp76 .AVG_SURPLUS 16500
op land *tmp77 *tmp74 *tmp76
jump *label46 equal *tmp77 false
jump *label48 lessThanEq .REACTORS_DESIRED 2
op sub .REACTORS_DESIRED .REACTORS_DESIRED 1
op sub .AVG_SURPLUS .AVG_SURPLUS 6500
label *label48
label *label46
op lessThan *tmp81 :fn8:stored 0.8
op lessThan *tmp83 .AVG_SURPLUS 8000
op land *tmp84 *tmp81 *tmp83
jump *label50 equal *tmp84 false
op sub *tmp86 .AVG_SURPLUS 10000
op idiv *tmp87 *tmp86 6500
op max :fn8:needed 1 *tmp87
op add *tmp89 :fn8:needed .REACTORS_DESIRED
op min .REACTORS_DESIRED 5 *tmp89
label *label50
label *label43
jump *label52 equal .REACTORS_DESIRED 5
print "Require only {0}/5 reactors.\n"
format .REACTORS_DESIRED
label *label52
printflush message1
jump *label7 always 0 0
label *label3
set .RET_T_STARTUP :fn3:t_startup
op sub *tmp113 @tick :fn3:t_startup
op idiv :fn3:secs *tmp113 60
sensor :fn3:fuel :fn3:reactor @blast-compound
set :fn3:supply_fuel true
sensor :fn3:fuel_stored .CONTAINER @blast-compound
sensor :fn3:cryo :fn3:reactor @cryofluid
sensor *tmp118 .NODE @powerNetStored
op floor :fn3:charge *tmp118 0
sensor *tmp120 .NODE @powerNetIn
sensor *tmp121 .NODE @powerNetOut
op sub *tmp122 *tmp120 *tmp121
op floor :fn3:surplus *tmp122 0
op mul *tmp124 .AVG_SURPLUS 0.8
op mul *tmp125 :fn3:surplus 0.2
op add .AVG_SURPLUS *tmp124 *tmp125
sensor :fn3:enabled :fn3:reactor @enabled
print "#{0} - "
format :fn3:reactor_num
jump *label64 equal :fn3:emerg_shutdown false
control enabled :fn3:reactor false 0 0 0
print "emergency mode\n"
set :fn3:supply_fuel false
jump *label65 always 0 0
label *label64
jump *label66 equal :fn3:enabled false
jump *label68 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
control enabled :fn3:reactor false 0 0 0
print "STOP unwanted\n"
jump *label67 always 0 0
label *label68
op greaterThan *tmp136 :fn3:reactor_num 1
op mul *tmp137 .FUEL_TOT_ABORT :fn3:reactor_num
op lessThan *tmp138 :fn3:fuel_stored *tmp137
op land *tmp139 *tmp136 *tmp138
jump *label70 equal *tmp139 false
control enabled :fn3:reactor false 0 0 0
print "STOP system fuel low\n"
jump *label67 always 0 0
label *label70
jump *label72 greaterThan :fn3:fuel 1
control enabled :fn3:reactor false 0 0 0
print "STOP fuel low\n"
jump *label67 always 0 0
label *label72
jump *label74 greaterThan :fn3:cryo .CRYO_ABORT
control enabled :fn3:reactor false 0 0 0
print "STOP out of cryo\n"
jump *label67 always 0 0
label *label74
jump *label76 greaterThanEq :fn3:secs 30
op sub *tmp102 @tick :fn3:t_startup
op idiv :fn2:secs *tmp102 60
op greaterThan *tmp104 :fn2:secs 30
sensor *tmp105 :fn3:reactor @enabled
op equal *tmp106 *tmp105 false
op or *tmp107 *tmp104 *tmp106
jump *label153 equal *tmp107 false
set :fn2*retval 0
jump *label155 always 0 0
label *label153
op sub :fn2:time_left 30 :fn2:secs
op mul *tmp110 :fn2:time_left :fn2:time_left
op idiv :fn2:charge_req *tmp110 0.04
set :fn2*retval :fn2:charge_req
jump *label155 always 0 0
label *label155
op sub *tmp153 :fn3:charge :fn2*retval
op lessThan *tmp154 *tmp153 .PWR_ABORT
op lessThan *tmp155 :fn3:surplus .FLOW_ABORT
op land *tmp156 *tmp154 *tmp155
jump *label79 equal *tmp156 false
control enabled :fn3:reactor false 0 0 0
print "START FAIL battery\n"
set :fn3:supply_fuel false
jump *label67 always 0 0
label *label79
op sub :fn3:time_left 30 :fn3:secs
print "Starting {0} secs, req {0}J\n"
format :fn3:time_left
format :fn2*retval
jump *label67 always 0 0
label *label76
op lessThan *tmp161 :fn3:charge .PWR_ABANDON
op lessThan *tmp162 :fn3:surplus .FLOW_ABORT
op land *tmp163 *tmp161 *tmp162
jump *label81 equal *tmp163 false
control enabled :fn3:reactor false 0 0 0
print "ABANDON - battery crit\n"
set :fn3:supply_fuel false
jump *label67 always 0 0
label *label81
op idiv :fn3:mins :fn3:secs 6
op div :fn3:mins :fn3:mins 10
print "RUN {0} mins\n"
format :fn3:mins
jump *label67 always 0 0
label *label66
op sub *tmp169 :fn3:charge .START_POWER_REQ
op sub *tmp170 *tmp169 .PWR_ABORT
op div *tmp171 *tmp170 .PWR_REQ
op mul :fn3:charge_units *tmp171 .PWR_RESERVE
op div *tmp173 :fn3:surplus .FLOW_REQ
op max :fn3:flow_units -0.1 *tmp173
op mul *tmp175 .CRYO_REQ_EA :fn3:reactor_num
op add :fn3:cryo_req .CRYO_REQ *tmp175
jump *label83 greaterThanEq .REACTORS_DESIRED :fn3:reactor_num
print "IDLE\n"
set :fn3:supply_fuel false
jump *label84 always 0 0
label *label83
op add *tmp179 :fn3:flow_units :fn3:charge_units
jump *label85 greaterThanEq *tmp179 1
op idiv *tmp183 :fn3:flow_units 0.001
op div :fn3:flow *tmp183 10
op idiv *tmp186 :fn3:charge_units 0.001
op div :fn3:charge *tmp186 10
print "WAIT power. (%{0}J + %{0}W)\n"
format :fn3:charge
format :fn3:flow
set :fn3:supply_fuel false
jump *label86 always 0 0
label *label85
op lessThan *tmp188 :fn3:fuel .FUEL_REQ
op land *tmp189 :fn3:fuel_on *tmp188
jump *label87 equal *tmp189 false
op add *tmp191 :fn3:fuel :fn3:fuel_stored
jump *label89 lessThanEq *tmp191 .FUEL_REQ
print "WAIT fuel\n"
jump *label88 always 0 0
label *label89
print "WAIT system fuel\n"
jump *label88 always 0 0
label *label87
op mul *tmp194 .FUEL_TOT_REQ :fn3:reactor_num
jump *label91 greaterThanEq :fn3:fuel_stored *tmp194
print "WAIT buffer fuel\n"
jump *label92 always 0 0
label *label91
jump *label93 greaterThanEq :fn3:cryo :fn3:cryo_req
print "WAIT cryo\n"
jump *label94 always 0 0
label *label93
print "STARTUP\n"
op add .START_POWER_REQ .START_POWER_REQ .PWR_REQ
control enabled :fn3:reactor true 0 0 0
label *label94
label *label92
label *label88
label *label86
label *label84
label *label67
label *label65
sensor *tmp201 :fn3:reactor @enabled
jump *label95 equal :fn3:enabled *tmp201
set .RET_T_STARTUP @tick
label *label95
set :fn3*retval :fn3:supply_fuel
goto :fn3*retaddr :fn3
