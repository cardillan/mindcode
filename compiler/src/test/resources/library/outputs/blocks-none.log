
Final code before resolving virtual instructions:

        label *label0
    0:  jump *label0 equal message1 null
    1:  set :findLinkedBlocks:title "Example program.\nTrying to locate linked blocks"
    2:  set :findLinkedBlocks:message message1
        label *label2
    3:  set :findLinkedBlocks:requested @large-logic-display
    4:  set :findLinkedBlocks:name "Display"
    5:  set :findLinkedBlocks:variable :display
    6:  set :findLinkedBlocks:required true
    7:  setaddr *tmp0 *label8
    8:  jump *label5 always 0 0
        multilabel *label8
    9:  set :display :findLinkedBlocks:variable
   10:  set :findLinkedBlocks:requested @message
   11:  set :findLinkedBlocks:name "Message"
   12:  set :findLinkedBlocks:variable :message
   13:  set :findLinkedBlocks:required false
   14:  setaddr *tmp0 *label9
   15:  jump *label5 always 0 0
        multilabel *label9
   16:  set :message :findLinkedBlocks:variable
   17:  set :findLinkedBlocks:requested @switch
   18:  set :findLinkedBlocks:name "Switch"
   19:  set :findLinkedBlocks:variable :switch
   20:  set :findLinkedBlocks:required false
   21:  setaddr *tmp0 *label10
   22:  jump *label5 always 0 0
        multilabel *label10
   23:  set :switch :findLinkedBlocks:variable
   24:  set :findLinkedBlocks:requested @memory-bank
   25:  set :findLinkedBlocks:name "Memory"
   26:  set :findLinkedBlocks:variable :memory
   27:  set :findLinkedBlocks:required true
   28:  setaddr *tmp0 *label11
   29:  jump *label5 always 0 0
        multilabel *label11
   30:  set :memory :findLinkedBlocks:variable
   31:  set :findLinkedBlocks:requested @memory-cell
   32:  set :findLinkedBlocks:name "Memory"
   33:  set :findLinkedBlocks:variable :memory
   34:  set :findLinkedBlocks:required true
   35:  setaddr *tmp0 *label12
        label *label5
   36:  set :findLinkedBlocks:variable null
        label *label6
   37:  multijump *tmp0 0 0
        multilabel *label12
   38:  set :memory :findLinkedBlocks:variable
        label *label7
   39:  print :findLinkedBlocks:title
   40:  set :findLinkedBlocks:n @links
        label *label13
   41:  op greaterThan *tmp1 :findLinkedBlocks:n 0
   42:  jump *label15 equal *tmp1 false
   43:  op sub :findLinkedBlocks:n :findLinkedBlocks:n 1
   44:  getlink *tmp2 :findLinkedBlocks:n
   45:  set :findLinkedBlocks:block *tmp2
   46:  print "\nFound: "
   47:  print :findLinkedBlocks:block
   48:  sensor *tmp3 :findLinkedBlocks:block @type
   49:  set :findLinkedBlocks:type *tmp3
   50:  set :findLinkedBlocks:requested @large-logic-display
   51:  set :findLinkedBlocks:name "Display"
   52:  set :findLinkedBlocks:variable :display
   53:  set :findLinkedBlocks:required true
   54:  setaddr *tmp4 *label19
   55:  jump *label16 always 0 0
        multilabel *label19
   56:  set :display :findLinkedBlocks:variable
   57:  set :findLinkedBlocks:requested @message
   58:  set :findLinkedBlocks:name "Message"
   59:  set :findLinkedBlocks:variable :message
   60:  set :findLinkedBlocks:required false
   61:  setaddr *tmp4 *label20
   62:  jump *label16 always 0 0
        multilabel *label20
   63:  set :message :findLinkedBlocks:variable
   64:  set :findLinkedBlocks:requested @switch
   65:  set :findLinkedBlocks:name "Switch"
   66:  set :findLinkedBlocks:variable :switch
   67:  set :findLinkedBlocks:required false
   68:  setaddr *tmp4 *label21
   69:  jump *label16 always 0 0
        multilabel *label21
   70:  set :switch :findLinkedBlocks:variable
   71:  set :findLinkedBlocks:requested @memory-bank
   72:  set :findLinkedBlocks:name "Memory"
   73:  set :findLinkedBlocks:variable :memory
   74:  set :findLinkedBlocks:required true
   75:  setaddr *tmp4 *label22
   76:  jump *label16 always 0 0
        multilabel *label22
   77:  set :memory :findLinkedBlocks:variable
   78:  set :findLinkedBlocks:requested @memory-cell
   79:  set :findLinkedBlocks:name "Memory"
   80:  set :findLinkedBlocks:variable :memory
   81:  set :findLinkedBlocks:required true
   82:  setaddr *tmp4 *label23
        label *label16
   83:  op equal *tmp5 :findLinkedBlocks:requested :findLinkedBlocks:type
   84:  jump *label24 equal *tmp5 false
   85:  set :findLinkedBlocks:variable :findLinkedBlocks:block
   86:  op equal *tmp7 :findLinkedBlocks:requested @message
   87:  jump *label26 equal *tmp7 false
   88:  set :findLinkedBlocks:message :findLinkedBlocks:block
   89:  set *tmp8 :findLinkedBlocks:message
   90:  jump *label27 always 0 0
        label *label26
   91:  set *tmp8 null
        label *label27
   92:  set *tmp6 *tmp8
   93:  jump *label25 always 0 0
        label *label24
   94:  set *tmp6 null
        label *label25
        label *label17
   95:  multijump *tmp4 0 0
        multilabel *label23
   96:  set :memory :findLinkedBlocks:variable
        label *label18
        label *label14
   97:  jump *label13 always 0 0
        label *label15
   98:  set :findLinkedBlocks:foundAll 1
   99:  set :findLinkedBlocks:requested @large-logic-display
  100:  set :findLinkedBlocks:name "Display"
  101:  set :findLinkedBlocks:variable :display
  102:  set :findLinkedBlocks:required true
  103:  setaddr *tmp9 *label31
  104:  jump *label28 always 0 0
        multilabel *label31
  105:  set :display :findLinkedBlocks:variable
  106:  set :findLinkedBlocks:requested @message
  107:  set :findLinkedBlocks:name "Message"
  108:  set :findLinkedBlocks:variable :message
  109:  set :findLinkedBlocks:required false
  110:  setaddr *tmp9 *label32
  111:  jump *label28 always 0 0
        multilabel *label32
  112:  set :message :findLinkedBlocks:variable
  113:  set :findLinkedBlocks:requested @switch
  114:  set :findLinkedBlocks:name "Switch"
  115:  set :findLinkedBlocks:variable :switch
  116:  set :findLinkedBlocks:required false
  117:  setaddr *tmp9 *label33
  118:  jump *label28 always 0 0
        multilabel *label33
  119:  set :switch :findLinkedBlocks:variable
  120:  set :findLinkedBlocks:requested @memory-bank
  121:  set :findLinkedBlocks:name "Memory"
  122:  set :findLinkedBlocks:variable :memory
  123:  set :findLinkedBlocks:required true
  124:  setaddr *tmp9 *label34
  125:  jump *label28 always 0 0
        multilabel *label34
  126:  set :memory :findLinkedBlocks:variable
  127:  set :findLinkedBlocks:requested @memory-cell
  128:  set :findLinkedBlocks:name "Memory"
  129:  set :findLinkedBlocks:variable :memory
  130:  set :findLinkedBlocks:required true
  131:  setaddr *tmp9 *label35
        label *label28
  132:  print "\n"
  133:  print :findLinkedBlocks:name
  134:  print ":"
  135:  print " "
  136:  print :findLinkedBlocks:variable
  137:  jump *label36 equal :findLinkedBlocks:required false
  138:  op and :findLinkedBlocks:foundAll :findLinkedBlocks:foundAll :findLinkedBlocks:variable
  139:  set *tmp10 :findLinkedBlocks:foundAll
  140:  jump *label37 always 0 0
        label *label36
  141:  set *tmp10 null
        label *label37
        label *label29
  142:  multijump *tmp9 0 0
        multilabel *label35
  143:  set :memory :findLinkedBlocks:variable
        label *label30
  144:  printflush :findLinkedBlocks:message
        label *label3
  145:  op equal *tmp11 :findLinkedBlocks:foundAll false
  146:  jump *label2 notEqual *tmp11 false
        label *label4
        label *label1
  147:  assertequals :message message1 "Located message1 block"
  148:  end
