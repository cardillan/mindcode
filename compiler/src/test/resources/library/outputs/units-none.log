Number of reported ambiguities: 29

Final code before resolving virtual instructions:

    0:  set SYS_MESSAGE null
    1:  set _initial_flag null
    2:  set _unit_type null
    3:  set _x null
    4:  set _y null
        label __label0
    5:  set __fn0__unit_type _unit_type
    6:  set __fn0__initial_flag _initial_flag
    7:  ubind __fn0__unit_type
    8:  op equal __tmp1 @unit null
    9:  jump __label2 equal __tmp1 false
   10:  set __tmp0 null
   11:  jump __label1 always 0 0
   12:  set __tmp2 null
   13:  jump __label3 always 0 0
        label __label2
   14:  set __tmp2 null
        label __label3
   15:  set __tmp3 @unit
   16:  set __fn0__first_unit __tmp3
        label __label4
   17:  sensor __tmp4 @unit @controlled
   18:  op equal __tmp5 __tmp4 0
   19:  jump __label7 equal __tmp5 false
   20:  ucontrol flag __fn0__initial_flag 0 0 0 0
   21:  set __tmp0 @unit
   22:  jump __label1 always 0 0
   23:  set __tmp6 null
   24:  jump __label8 always 0 0
        label __label7
   25:  sensor __tmp7 __fn0__first_unit @dead
   26:  op equal __tmp8 __tmp7 1
   27:  jump __label9 equal __tmp8 false
   28:  set __tmp10 @unit
   29:  set __fn0__first_unit __tmp10
   30:  set __tmp9 __fn0__first_unit
   31:  jump __label10 always 0 0
        label __label9
   32:  set __tmp9 null
        label __label10
   33:  set __tmp6 __tmp9
        label __label8
   34:  ubind __fn0__unit_type
        label __label5
   35:  op notEqual __tmp11 __fn0__first_unit @unit
   36:  jump __label4 notEqual __tmp11 false
        label __label6
   37:  set __tmp0 null
   38:  jump __label1 always 0 0
   39:  set __tmp0 null
        label __label1
   40:  print __tmp0
   41:  print "\n"
        label __label11
   42:  set __fn1__x _x
   43:  set __fn1__y _y
   44:  set __fn1__unit_type _unit_type
   45:  set __fn1__initial_flag _initial_flag
        label __label13
   46:  jump __label15 equal true false
   47:  ubind __fn1__unit_type
   48:  op equal __tmp13 @unit null
   49:  jump __label16 equal __tmp13 false
   50:  set __tmp12 null
   51:  jump __label12 always 0 0
   52:  set __tmp14 null
   53:  jump __label17 always 0 0
        label __label16
   54:  set __tmp14 null
        label __label17
   55:  set __tmp15 @unit
   56:  set __fn1__first_unit __tmp15
   57:  set __fn1__best_unit null
   58:  set __fn1__best_distance 10000000000
        label __label18
   59:  sensor __tmp16 @unit @controlled
   60:  op equal __tmp17 __tmp16 0
   61:  jump __label21 equal __tmp17 false
   62:  sensor __tmp19 @unit @x
   63:  op sub __tmp20 __tmp19 __fn1__x
   64:  sensor __tmp21 @unit @y
   65:  op sub __tmp22 __tmp21 __fn1__y
   66:  op len __tmp23 __tmp20 __tmp22
   67:  set __fn1__distance __tmp23
   68:  op lessThan __tmp24 __fn1__distance __fn1__best_distance
   69:  jump __label23 equal __tmp24 false
   70:  set __fn1__best_distance __fn1__distance
   71:  set __tmp26 @unit
   72:  set __fn1__best_unit __tmp26
   73:  set __tmp25 __fn1__best_unit
   74:  jump __label24 always 0 0
        label __label23
   75:  set __tmp25 null
        label __label24
   76:  set __tmp18 __tmp25
   77:  jump __label22 always 0 0
        label __label21
   78:  sensor __tmp27 __fn1__first_unit @dead
   79:  op equal __tmp28 __tmp27 1
   80:  jump __label25 equal __tmp28 false
   81:  set __tmp30 @unit
   82:  set __fn1__first_unit __tmp30
   83:  set __tmp29 __fn1__first_unit
   84:  jump __label26 always 0 0
        label __label25
   85:  set __tmp29 null
        label __label26
   86:  set __tmp18 __tmp29
        label __label22
   87:  ubind __fn1__unit_type
        label __label19
   88:  op notEqual __tmp31 __fn1__first_unit @unit
   89:  jump __label18 notEqual __tmp31 false
        label __label20
   90:  op equal __tmp32 __fn1__best_unit null
   91:  jump __label27 equal __tmp32 false
   92:  set __tmp12 null
   93:  jump __label12 always 0 0
   94:  set __tmp33 null
   95:  jump __label28 always 0 0
        label __label27
   96:  set __tmp33 null
        label __label28
   97:  sensor __tmp34 __fn1__best_unit @controlled
   98:  op equal __tmp35 __tmp34 0
   99:  jump __label29 equal __tmp35 false
  100:  ubind __fn1__best_unit
  101:  ucontrol flag __fn1__initial_flag 0 0 0 0
  102:  set __tmp12 __fn1__best_unit
  103:  jump __label12 always 0 0
  104:  set __tmp36 null
  105:  jump __label30 always 0 0
        label __label29
  106:  set __tmp36 null
        label __label30
        label __label14
  107:  jump __label13 always 0 0
        label __label15
  108:  set __tmp12 null
        label __label12
  109:  print __tmp12
  110:  print "\n"
        label __label31
  111:  set __fn2__unit_type _unit_type
  112:  set __fn2__initial_flag _initial_flag
        label __label33
  113:  jump __label35 equal true false
  114:  ubind __fn2__unit_type
  115:  op equal __tmp38 @unit null
  116:  jump __label36 equal __tmp38 false
  117:  jump __label38 equal SYS_MESSAGE false
  118:  print "No unit of type "
  119:  print __fn2__unit_type
  120:  print " found."
  121:  printflush SYS_MESSAGE
  122:  set __tmp40 null
  123:  jump __label39 always 0 0
        label __label38
  124:  set __tmp40 null
        label __label39
  125:  set __tmp39 __tmp40
  126:  jump __label37 always 0 0
        label __label36
  127:  sensor __tmp41 @unit @controlled
  128:  op notEqual __tmp42 __tmp41 0
  129:  jump __label40 equal __tmp42 false
  130:  jump __label42 equal SYS_MESSAGE false
  131:  print "Looking for a free "
  132:  print __fn2__unit_type
  133:  print "..."
  134:  printflush SYS_MESSAGE
  135:  set __tmp44 null
  136:  jump __label43 always 0 0
        label __label42
  137:  set __tmp44 null
        label __label43
  138:  set __tmp43 __tmp44
  139:  jump __label41 always 0 0
        label __label40
  140:  ucontrol flag __fn2__initial_flag 0 0 0 0
  141:  set __tmp37 @unit
  142:  jump __label32 always 0 0
  143:  set __tmp43 null
        label __label41
  144:  set __tmp39 __tmp43
        label __label37
        label __label34
  145:  jump __label33 always 0 0
        label __label35
  146:  set __tmp37 null
        label __label32
  147:  print __tmp37
  148:  print "\n"
  149:  end
