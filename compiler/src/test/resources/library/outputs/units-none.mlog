set :initial_flag null
set :message null
set :preface null
set :radius null
set :unit_type null
set :x null
set :y null
set :noControlWithin:x :x
set :noControlWithin:y :y
set :noControlWithin:radius :radius
sensor *tmp1 @unit @x
op sub *tmp2 :noControlWithin:x *tmp1
sensor *tmp3 @unit @y
op sub *tmp4 :noControlWithin:y *tmp3
op len *tmp5 *tmp2 *tmp4
op lessThan *tmp6 *tmp5 :noControlWithin:radius
set *tmp0 *tmp6
print *tmp0
print "\n"
set :findFreeUnit:unit_type :unit_type
set :findFreeUnit:initial_flag :initial_flag
ubind :findFreeUnit:unit_type
op equal *tmp8 @unit null
jump 28 equal *tmp8 false
set *tmp7 null
jump 53 always 0 0
set *tmp9 null
jump 29 always 0 0
set *tmp9 null
set :findFreeUnit:first_unit @unit
sensor *tmp10 @unit @controlled
op equal *tmp11 *tmp10 0
jump 38 equal *tmp11 false
ucontrol flag :findFreeUnit:initial_flag 0 0 0 0
set *tmp7 @unit
jump 53 always 0 0
set *tmp12 null
jump 47 always 0 0
sensor *tmp13 :findFreeUnit:first_unit @dead
op equal *tmp14 *tmp13 1
jump 45 equal *tmp14 false
set *tmp16 @unit
set :findFreeUnit:first_unit *tmp16
set *tmp15 :findFreeUnit:first_unit
jump 46 always 0 0
set *tmp15 null
set *tmp12 *tmp15
ubind :findFreeUnit:unit_type
op notEqual *tmp17 :findFreeUnit:first_unit @unit
jump 30 notEqual *tmp17 false
set *tmp7 null
jump 53 always 0 0
set *tmp7 null
print *tmp7
print "\n"
set :findClosestUnit:x :x
set :findClosestUnit:y :y
set :findClosestUnit:unit_type :unit_type
set :findClosestUnit:initial_flag :initial_flag
jump 120 equal true false
ubind :findClosestUnit:unit_type
op equal *tmp19 @unit null
jump 67 equal *tmp19 false
set *tmp18 null
jump 121 always 0 0
set *tmp20 null
jump 68 always 0 0
set *tmp20 null
set :findClosestUnit:first_unit @unit
set :findClosestUnit:best_unit null
set :findClosestUnit:best_distance 10000000000
sensor *tmp21 @unit @controlled
op equal *tmp22 *tmp21 0
jump 90 equal *tmp22 false
sensor *tmp24 @unit @x
op sub *tmp25 *tmp24 :findClosestUnit:x
sensor *tmp26 @unit @y
op sub *tmp27 *tmp26 :findClosestUnit:y
op len *tmp28 *tmp25 *tmp27
set :findClosestUnit:distance *tmp28
op lessThan *tmp29 :findClosestUnit:distance :findClosestUnit:best_distance
jump 87 equal *tmp29 false
set :findClosestUnit:best_distance :findClosestUnit:distance
set *tmp31 @unit
set :findClosestUnit:best_unit *tmp31
set *tmp30 :findClosestUnit:best_unit
jump 88 always 0 0
set *tmp30 null
set *tmp23 *tmp30
jump 99 always 0 0
sensor *tmp32 :findClosestUnit:first_unit @dead
op equal *tmp33 *tmp32 1
jump 97 equal *tmp33 false
set *tmp35 @unit
set :findClosestUnit:first_unit *tmp35
set *tmp34 :findClosestUnit:first_unit
jump 98 always 0 0
set *tmp34 null
set *tmp23 *tmp34
ubind :findClosestUnit:unit_type
op notEqual *tmp36 :findClosestUnit:first_unit @unit
jump 71 notEqual *tmp36 false
op equal *tmp37 :findClosestUnit:best_unit null
jump 108 equal *tmp37 false
set *tmp18 null
jump 121 always 0 0
set *tmp38 null
jump 109 always 0 0
set *tmp38 null
sensor *tmp39 :findClosestUnit:best_unit @controlled
op equal *tmp40 *tmp39 0
jump 118 equal *tmp40 false
ubind :findClosestUnit:best_unit
ucontrol flag :findClosestUnit:initial_flag 0 0 0 0
set *tmp18 :findClosestUnit:best_unit
jump 121 always 0 0
set *tmp41 null
jump 119 always 0 0
set *tmp41 null
jump 59 always 0 0
set *tmp18 null
print *tmp18
print "\n"
set :waitForFreeUnit:unit_type :unit_type
set :waitForFreeUnit:initial_flag :initial_flag
jump 142 equal true false
ubind :waitForFreeUnit:unit_type
op notEqual *tmp43 @unit null
jump 140 equal *tmp43 false
sensor *tmp45 @unit @controlled
op equal *tmp46 *tmp45 0
jump 137 equal *tmp46 false
ucontrol flag :waitForFreeUnit:initial_flag 0 0 0 0
set *tmp42 @unit
jump 143 always 0 0
set *tmp47 null
jump 138 always 0 0
set *tmp47 null
set *tmp44 *tmp47
jump 141 always 0 0
set *tmp44 null
jump 125 always 0 0
set *tmp42 null
print *tmp42
print "\n"
set :waitForFreeUnit.1:message :message
set :waitForFreeUnit.1:preface :preface
set :waitForFreeUnit.1:unit_type :unit_type
set :waitForFreeUnit.1:initial_flag :initial_flag
jump 178 equal true false
ubind :waitForFreeUnit.1:unit_type
op equal *tmp49 @unit null
jump 161 equal *tmp49 false
print :waitForFreeUnit.1:preface
print "No unit of type "
print :waitForFreeUnit.1:unit_type
print " "
print "found."
printflush :waitForFreeUnit.1:message
set *tmp50 null
jump 177 always 0 0
sensor *tmp51 @unit @controlled
op notEqual *tmp52 *tmp51 0
jump 172 equal *tmp52 false
print :waitForFreeUnit.1:preface
print "Looking for a free "
print :waitForFreeUnit.1:unit_type
print "."
print ".."
printflush :waitForFreeUnit.1:message
set *tmp53 null
jump 176 always 0 0
ucontrol flag :waitForFreeUnit.1:initial_flag 0 0 0 0
set *tmp48 @unit
jump 179 always 0 0
set *tmp53 null
set *tmp50 *tmp53
jump 149 always 0 0
set *tmp48 null
print *tmp48
print "\n"
end
print "Compiled by Mindcode - github.com/cardillan/mindcode"
