// demo script of function calling
allocate heap in cell1[0 ... 16], stack in cell1[16 ... 64];

def delay(n, count)
  _x = 0;
  deadline = @tick + n * count;
  while @tick < deadline do
    _x += 1;
  end;
end;

ubind(@poly);

if $x == 0 then
    $x = 80;
end;

while @unit != null do
  print($x);
  printflush(message1);

  if $x > 120 then
    $x = 80;
  else
    delay(1, 15);
    move($x, 100);
    $x += 1;
  end;
end;
